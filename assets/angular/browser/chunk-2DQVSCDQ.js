import{a as bt}from"./chunk-FGHZBMKZ.js";import{a as xt,b as vt,c as Et}from"./chunk-AG6534XP.js";import{a as Ue}from"./chunk-RGKKIZGC.js";import{a as _t}from"./chunk-UUN5OSV4.js";import{a as $e}from"./chunk-ZSNHXLZQ.js";import{a as je}from"./chunk-R542E3BI.js";import{a as Le}from"./chunk-B7OMWRKA.js";import{a as Nt,b as Be}from"./chunk-MJQY6A63.js";import{a as ht}from"./chunk-27RMNQXJ.js";import{a as gt}from"./chunk-OOC77CZV.js";import{b as Ve}from"./chunk-54WVOQJ7.js";import{h as Re}from"./chunk-M3KGNDQ5.js";import{a as mt,b as Pe,c as R,d as ue,e as ke,f as pt,g as S,h as me,i as Fe,j as Oe,k as ft,l as Ne,m as De,n as pe,o as fe,p as _e}from"./chunk-NILQYPGY.js";import{a as D}from"./chunk-OQPWVW4O.js";import{$a as z,Aa as Ze,Bb as k,Ca as Je,Ha as d,Ia as o,Ja as n,Ka as h,O as ne,Oa as Ie,P as Ce,Pa as we,Pb as re,R as ae,Ra as b,Rb as le,Sb as ce,Tb as rt,U as p,Ua as g,V as f,Vb as lt,Wa as u,Zb as ct,_a as U,a as Ke,aa as ot,ab as H,ac as dt,b as Xe,cc as it,db as G,dc as de,eb as oe,f as Ye,fa as I,fb as $,g as V,ga as P,ha as Se,hc as ut,ia as r,ib as c,jb as E,kb as A,kc as Me,lb as et,mb as Ae,nc as nt,ob as F,pa as y,pb as O,qb as N,ra as se,sa as ye,ub as tt,vb as w,wa as _,wb as Te,xb as K,yb as X,za as q}from"./chunk-TNNFIFGQ.js";var Mt=Ye(bt());var Y=class Y{constructor(t){this.http=t;this.ruta=D.ruta}Obtenerestudiantesifas(t){let e=new dt;return t&&Object.entries(t).forEach(([i,a])=>{a!=null&&a!==""&&(e=e.set(i,String(a)))}),this.http.get(this.ruta+"api/estudiantesifas/",{params:e})}Agregarestudiantesifas(t){return this.http.post(this.ruta+"api/estudiantesifas/",t)}Modificarestudiantesifas(t,e){return this.http.put(this.ruta+"api/estudiantesifas/"+e,t)}Seleccionarestudiantesifas(t){return this.http.get(this.ruta+"api/estudiantesifas/"+t)}Eliminarestudiantesifas(t){return this.http.delete(this.ruta+"api/estudiantesifas/"+t)}createFormGroupestudiantesifas(){return new pt({id:new S(0),Foto:new S(""),Ap_Paterno:new S(""),Ap_Materno:new S(""),Nombre:new S("",[R.required]),Sexo:new S("",[R.required]),FechaNac:new S("",[R.required]),Edad:new S("",[R.required]),CI:new S("",[R.required]),Expedido:new S("",[R.required]),Celular:new S("",[R.required]),Direccion:new S("",[R.required]),Correo:new S("NINGUNA"),Nombre_Padre:new S(""),Nombre_Madre:new S(""),OcupacionP:new S(""),OcupacionM:new S(""),NumCelP:new S(""),NumCelM:new S(""),NColegio:new S(""),TipoColegio:new S(""),CGrado:new S(""),CNivel:new S(""),Usuario:new S("",[R.required]),Contrasenia:new S("",[R.required]),Estado:new S("ACTIVO",[R.required]),InformacionCompartidaIFAS:new S("")})}};Y.\u0275fac=function(e){return new(e||Y)(ae(de))},Y.\u0275prov=ne({token:Y,factory:Y.\u0275fac,providedIn:"root"});var Q=Y;var J=class J{constructor(t){this.http=t;this.ruta=D.ruta}crearSesion(t){return this.http.post(this.ruta+"api/capture-sessions",{estudianteifas_id:t??null})}estadoSesion(t){return this.http.get(this.ruta+"api/capture-sessions/"+t)}cancelarSesion(t){return this.http.post(this.ruta+"api/capture-sessions/"+t+"/cancel",{})}};J.\u0275fac=function(e){return new(e||J)(ae(de))},J.\u0275prov=ne({token:J,factory:J.\u0275fac,providedIn:"root"});var ge=J;var ee=class ee{constructor(t){this.http=t;this.ruta=D.ruta}crearVinculacion(){return this.http.post(this.ruta+"api/capture-pairings",{})}estadoVinculacion(t){return this.http.get(this.ruta+"api/capture-pairings/"+t)}solicitarCaptura(t,e,i){return this.http.post(this.ruta+"api/capture-pairings/"+t+"/request-capture",{estudianteifas_id:e??null,capture_kind:i??void 0})}cancelarCaptura(t){return this.http.post(this.ruta+"api/capture-pairings/"+t+"/cancel-capture",{})}};ee.\u0275fac=function(e){return new(e||ee)(ae(de))},ee.\u0275prov=ne({token:ee,factory:ee.\u0275fac,providedIn:"root"});var he=ee;var Tt=Ye(bt());var Ht=["modalVincularCelular"],Gt=["modalEsperaFotoPagoCelular"],qt=["modalgestioninfoestudiantesifas"],Qt=["modalOtroComponenteEstadisticas"],L=(s,t)=>({"bi-caret-up":s,"bi-caret-down":t}),Wt=(s,t,e)=>({"bg-success":s,"bg-secondary":t,"bg-danger":e});function Kt(s,t){if(s&1&&h(0,"ng-lottie",47),s&2){let e=u(2);d("options",e.sexoEstudiante==="MASCULINO"?e._tools.optionsavatarmasculinoanimado:e._tools.optionsavatarfemenino2)}}function Xt(s,t){if(s&1&&h(0,"img",48),s&2){let e=u(2);d("src",e._tools.ruta+e.fotoEstudiante,P)}}function Yt(s,t){if(s&1&&(o(0,"div",46),Ze(1,Kt,1,1,"ng-lottie",47)(2,Xt,1,1,"img",48),n()),s&2){let e=u();r(),Je(e.fotoEstudiante==null||e.fotoEstudiante==""?1:2)}}function Zt(s,t){if(s&1&&(o(0,"option",49),c(1),n()),s&2){let e=t.$implicit;d("ngValue",e.id),r(),E(e.Anio)}}function Jt(s,t){if(s&1&&h(0,"i",50),s&2){let e=u(2);d("ngClass",w(1,L,e.getSortDirinfoestudiantesifas("NombreInstitucion")==="asc",e.getSortDirinfoestudiantesifas("NombreInstitucion")==="desc"))}}function ei(s,t){if(s&1){let e=b();o(0,"th",38),g("click",function(a){p(e);let l=u();return f(l.sortByinfoestudiantesifas("NombreInstitucion",a))}),c(1," NombreInstitucion "),_(2,Jt,1,4,"i",39),n()}if(s&2){let e=u();r(2),d("ngIf",e.isSortedinfoestudiantesifas("NombreInstitucion"))}}function ti(s,t){if(s&1&&h(0,"i",50),s&2){let e=u();d("ngClass",w(1,L,e.getSortDirinfoestudiantesifas("Anio")==="asc",e.getSortDirinfoestudiantesifas("Anio")==="desc"))}}function ii(s,t){if(s&1&&h(0,"i",50),s&2){let e=u();d("ngClass",w(1,L,e.getSortDirinfoestudiantesifas("FechInsc")==="asc",e.getSortDirinfoestudiantesifas("FechInsc")==="desc"))}}function ni(s,t){if(s&1&&h(0,"i",50),s&2){let e=u(2);d("ngClass",w(1,L,e.getSortDirinfoestudiantesifas("Ap_Paterno")==="asc",e.getSortDirinfoestudiantesifas("Ap_Paterno")==="desc"))}}function ai(s,t){if(s&1){let e=b();o(0,"th",38),g("click",function(a){p(e);let l=u();return f(l.sortByinfoestudiantesifas("Ap_Paterno",a))}),c(1," Ap_Paterno "),_(2,ni,1,4,"i",39),n()}if(s&2){let e=u();r(2),d("ngIf",e.isSortedinfoestudiantesifas("Ap_Paterno"))}}function si(s,t){if(s&1&&h(0,"i",50),s&2){let e=u(2);d("ngClass",w(1,L,e.getSortDirinfoestudiantesifas("Ap_Materno")==="asc",e.getSortDirinfoestudiantesifas("Ap_Materno")==="desc"))}}function oi(s,t){if(s&1){let e=b();o(0,"th",38),g("click",function(a){p(e);let l=u();return f(l.sortByinfoestudiantesifas("Ap_Materno",a))}),c(1," Ap_Materno "),_(2,si,1,4,"i",39),n()}if(s&2){let e=u();r(2),d("ngIf",e.isSortedinfoestudiantesifas("Ap_Materno"))}}function ri(s,t){if(s&1&&h(0,"i",50),s&2){let e=u(2);d("ngClass",w(1,L,e.getSortDirinfoestudiantesifas("Nombre")==="asc",e.getSortDirinfoestudiantesifas("Nombre")==="desc"))}}function li(s,t){if(s&1){let e=b();o(0,"th",38),g("click",function(a){p(e);let l=u();return f(l.sortByinfoestudiantesifas("Nombre",a))}),c(1," Nombre "),_(2,ri,1,4,"i",39),n()}if(s&2){let e=u();r(2),d("ngIf",e.isSortedinfoestudiantesifas("Nombre"))}}function ci(s,t){if(s&1&&h(0,"i",50),s&2){let e=u(2);d("ngClass",w(1,L,e.getSortDirinfoestudiantesifas("CI")==="asc",e.getSortDirinfoestudiantesifas("CI")==="desc"))}}function di(s,t){if(s&1){let e=b();o(0,"th",38),g("click",function(a){p(e);let l=u();return f(l.sortByinfoestudiantesifas("CI",a))}),c(1," Carnet "),_(2,ci,1,4,"i",39),n()}if(s&2){let e=u();r(2),d("ngIf",e.isSortedinfoestudiantesifas("CI"))}}function ui(s,t){if(s&1&&h(0,"i",50),s&2){let e=u();d("ngClass",w(1,L,e.getSortDirinfoestudiantesifas("Categoria")==="asc",e.getSortDirinfoestudiantesifas("Categoria")==="desc"))}}function mi(s,t){if(s&1&&h(0,"i",50),s&2){let e=u();d("ngClass",w(1,L,e.getSortDirinfoestudiantesifas("Curso_Solicitado")==="asc",e.getSortDirinfoestudiantesifas("Curso_Solicitado")==="desc"))}}function pi(s,t){if(s&1&&h(0,"i",50),s&2){let e=u();d("ngClass",w(1,L,e.getSortDirinfoestudiantesifas("CantidadMateriasAsignadas")==="asc",e.getSortDirinfoestudiantesifas("CantidadMateriasAsignadas")==="desc"))}}function fi(s,t){if(s&1&&h(0,"i",50),s&2){let e=u();d("ngClass",w(1,L,e.getSortDirinfoestudiantesifas("Observacion")==="asc",e.getSortDirinfoestudiantesifas("Observacion")==="desc"))}}function _i(s,t){if(s&1&&h(0,"i",50),s&2){let e=u();d("ngClass",w(1,L,e.getSortDirinfoestudiantesifas("Verificacion")==="asc",e.getSortDirinfoestudiantesifas("Verificacion")==="desc"))}}function gi(s,t){if(s&1&&(o(0,"tr")(1,"td",36)(2,"div",51)(3,"span",52),c(4,"Cargando..."),n()()()()),s&2){let e=u();r(),q("colspan",e.getTableColspan())}}function hi(s,t){if(s&1&&(o(0,"tr")(1,"td",53)(2,"div",54)(3,"div",55),c(4,"No hay datos disponibles"),n(),h(5,"ng-lottie",56),n()()()),s&2){let e=u();r(),q("colspan",e.getTableColspan()),r(4),d("options",e._tools.optionsnohayinformacion)}}function xi(s,t){if(s&1&&(o(0,"td"),c(1),n()),s&2){let e=u().$implicit;r(),E(e.NombreInstitucion)}}function vi(s,t){if(s&1&&(o(0,"td"),h(1,"span",58),n()),s&2){let e=u().$implicit,i=u();r(),d("innerHTML",i.resaltarTexto(e.Ap_Paterno),I)}}function Ei(s,t){if(s&1&&(o(0,"td"),h(1,"span",58),n()),s&2){let e=u().$implicit,i=u();r(),d("innerHTML",i.resaltarTexto(e.Ap_Materno),I)}}function bi(s,t){if(s&1&&(o(0,"td"),h(1,"span",58),n()),s&2){let e=u().$implicit,i=u();r(),d("innerHTML",i.resaltarTexto(e.Nombre),I)}}function Ci(s,t){if(s&1&&(o(0,"td"),h(1,"span",58),n()),s&2){let e=u().$implicit,i=u();r(),d("innerHTML",i.resaltarTexto(e.CI),I)}}function Si(s,t){if(s&1&&h(0,"img",64),s&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"pencil.svg",P)}}function yi(s,t){if(s&1&&h(0,"ng-lottie",65),s&2){let e=u(2);d("options",e._tools.optionsEditar)}}function Ii(s,t){if(s&1&&h(0,"img",64),s&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"delete.svg",P)}}function wi(s,t){if(s&1&&h(0,"ng-lottie",65),s&2){let e=u(2);d("options",e._tools.optionsEliminar)}}function Ai(s,t){if(s&1){let e=b();o(0,"tr",57),g("contextmenu",function(a){let l=p(e).$implicit,m=u();return f(m.abrirMenuinfoestudiantesifas(a,l))}),o(1,"td",36),c(2),n(),_(3,xi,2,1,"td",40),o(4,"td"),c(5),n(),o(6,"td"),c(7),K(8,"dateFormat"),n(),_(9,vi,2,1,"td",40)(10,Ei,2,1,"td",40)(11,bi,2,1,"td",40)(12,Ci,2,1,"td",40),o(13,"td"),h(14,"span",58),n(),o(15,"td"),h(16,"span",58),n(),o(17,"td",36),h(18,"span",58),n(),o(19,"td"),h(20,"span",58),n(),o(21,"td"),h(22,"span",58),n(),o(23,"td",59)(24,"button",60),g("click",function(){let a=p(e).$implicit,l=u();return f(l.Seleccionarinfoestudiantesifas(a.id))})("mouseenter",function(){let a=p(e).$implicit,l=u();return f(l._tools.hoverBotonMap["edicioninfoestudiantesifas-"+a.id]=!0)})("mouseleave",function(){let a=p(e).$implicit,l=u();return f(l._tools.hoverBotonMap["edicioninfoestudiantesifas-"+a.id]=!1)}),_(25,Si,1,1,"img",61)(26,yi,1,1,"ng-lottie",62),n(),o(27,"button",63),g("click",function(){let a=p(e).$implicit,l=u();return f(l.Eliminarinfoestudiantesifas(a.id))})("mouseenter",function(){let a=p(e).$implicit,l=u();return f(l._tools.hoverBotonMap["eliminacioninfoestudiantesifas-"+a.id]=!0)})("mouseleave",function(){let a=p(e).$implicit,l=u();return f(l._tools.hoverBotonMap["eliminacioninfoestudiantesifas-"+a.id]=!1)}),_(28,Ii,1,1,"img",61)(29,wi,1,1,"ng-lottie",62),n()()()}if(s&2){let e=t.index,i=t.$implicit,a=u();r(2),E((a.paginainfoestudiantesifas-1)*a.pageSizeinfoestudiantesifas+(e+1)),r(),d("ngIf",a.esSuperAdmin),r(2),E(i.Anio+" | "+(i.Resolucion||"\u2014")),r(2),E(X(8,17,i.FechInsc)),r(2),d("ngIf",!a.estudianteId),r(),d("ngIf",!a.estudianteId),r(),d("ngIf",!a.estudianteId),r(),d("ngIf",!a.estudianteId),r(2),d("innerHTML",a.resaltarTexto(i.Categoria),I),r(2),d("innerHTML",a.resaltarTexto(i.Curso_Solicitado+" "+(i.Paralelo_Solicitado==null?" ":i.Paralelo_Solicitado)),I),r(2),d("innerHTML",a.resaltarTexto(i.CantidadMateriasAsignadas),I),r(2),d("innerHTML",a.resaltarTexto(i.Observacion),I),r(2),d("innerHTML",a.resaltarTexto(i.Verificacion),I),r(3),d("ngIf",!a._tools.hoverBotonMap["edicioninfoestudiantesifas-"+i.id]),r(),d("ngIf",a._tools.hoverBotonMap["edicioninfoestudiantesifas-"+i.id]),r(2),d("ngIf",!a._tools.hoverBotonMap["eliminacioninfoestudiantesifas-"+i.id]),r(),d("ngIf",a._tools.hoverBotonMap["eliminacioninfoestudiantesifas-"+i.id])}}function Ti(s,t){if(s&1&&(o(0,"option",66),c(1),n()),s&2){let e=t.$implicit;d("value",e),r(),A("",e," por p\xE1gina")}}function Mi(s,t){if(s&1&&(o(0,"div",13)(1,"div",103),h(2,"input",114),o(3,"label"),c(4,"Instituci\xF3n"),n(),o(5,"div",85),c(6,"Este campo es obligatorio*"),n()()()),s&2){let e=u(2);r(2),d("ngClass",e.ValidacioninfoestudiantesifasxElemento("instituciones_id"))}}function Vi(s,t){if(s&1&&(o(0,"div"),h(1,"img",115),n()),s&2){let e,i=u(2);r(),d("src",i._tools.ruta+((e=i.newinfoestudiantesifas.get("FotoPago"))==null?null:e.value),P)}}function Pi(s,t){if(s&1&&(o(0,"div",13)(1,"div",55),c(2,"NO SE DISPONE DE FOTO COMPROBANTE DE PAGO EN DIGITAL"),n(),h(3,"ng-lottie",116),n()),s&2){let e=u(2);r(3),d("options",e._tools.optionsmoney)}}function ki(s,t){if(s&1){let e=b();o(0,"div",123),g("click",function(){let a=p(e).$implicit,l=u(4);return f(l.seleccionarEstudiante(a))}),o(1,"div",124),h(2,"span",58),o(3,"small",55),c(4,"CI: "),h(5,"span",58),n()()()}if(s&2){let e=t.$implicit,i=u(4);r(2),d("innerHTML",i.resaltarNombreEnBuscadorEstudiante(e),I),r(3),d("innerHTML",i.resaltarCIEnBuscadorEstudiante(e.CI),I)}}function Fi(s,t){if(s&1&&(o(0,"div",121),_(1,ki,6,2,"div",122),n()),s&2){let e=u(3);r(),d("ngForOf",e.estudiantesFiltrados)}}function Oi(s,t){if(s&1&&(o(0,"div"),h(1,"img",125),n()),s&2){let e=u(3);r(),d("src",e._tools.ruta+e.estudianteSeleccionado.Foto,P)}}function Ni(s,t){if(s&1&&(o(0,"div",13)(1,"div",55),c(2,"NO SE DISPONE DE FOTO DEL ESTUDIANTE"),n(),h(3,"ng-lottie",116),n()),s&2){let e=u(3);r(3),d("options",e._tools.optionsavatarmasculinoanimado)}}function Di(s,t){if(s&1){let e=b();o(0,"div",117)(1,"div",13)(2,"div",118)(3,"input",119),g("focus",function(){p(e);let a=u(2);return f(a.mostrarListaEstudiantes=!0)})("keyup.enter",function(){p(e);let a=u(2);return f(a.buscarEstudiantes())}),n(),o(4,"label"),c(5,"Buscar estudiante (CI / Apellidos / Nombre)"),n(),_(6,Fi,2,1,"div",99),n(),o(7,"div",120),_(8,Oi,2,1,"div",75)(9,Ni,4,1,"ng-template",null,5,k),n()()()}if(s&2){let e=G(10),i=u(2);r(3),d("formControl",i.estudianteInput),r(3),d("ngIf",i.mostrarListaEstudiantes&&((i.estudiantesFiltrados==null?null:i.estudiantesFiltrados.length)||0)>0),r(2),d("ngIf",i.estudianteSeleccionado==null?null:i.estudianteSeleccionado.Foto)("ngIfElse",e)}}function Ri(s,t){if(s&1&&(o(0,"option",126),c(1),n()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Li(s,t){if(s&1&&(o(0,"option",126),c(1),n()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Bi(s,t){if(s&1&&(o(0,"option",126),c(1),n()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function $i(s,t){if(s&1&&(o(0,"option",126),c(1),n()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function ji(s,t){s&1&&(o(0,"small",129),c(1,"INACTIVO"),n())}function Ui(s,t){if(s&1){let e=b();o(0,"div",123),g("click",function(){let a=p(e).$implicit,l=u(3);return f(l.seleccionarDocenteAdmin(a))}),o(1,"div",124)(2,"span"),c(3),n(),_(4,ji,2,0,"small",128),n()()}if(s&2){let e=t.$implicit,i=u(3);oe("opacity",i.docenteInactivo(e)?"0.65":"1")("pointer-events",i.docenteInactivo(e)?"none":"auto"),$("disabled",i.docenteInactivo(e)),r(3),E(i.getNombreCompletoDocente(e)),r(),d("ngIf",i.docenteInactivo(e))}}function zi(s,t){if(s&1&&(o(0,"div",121),_(1,Ui,5,8,"div",127),n()),s&2){let e=u(2);r(),d("ngForOf",e.docentesFiltradosAdmin)}}function Hi(s,t){s&1&&(o(0,"small",129),c(1,"INACTIVO"),n())}function Gi(s,t){if(s&1){let e=b();o(0,"div",123),g("click",function(){let a=p(e).$implicit,l=u(3);return f(l.seleccionarDocentePC(a))}),o(1,"div",124)(2,"span"),c(3),n(),_(4,Hi,2,0,"small",128),n()()}if(s&2){let e=t.$implicit,i=u(3);oe("opacity",i.docenteInactivo(e)?"0.65":"1")("pointer-events",i.docenteInactivo(e)?"none":"auto"),$("disabled",i.docenteInactivo(e)),r(3),E(i.getNombreCompletoDocente(e)),r(),d("ngIf",i.docenteInactivo(e))}}function qi(s,t){if(s&1&&(o(0,"div",121),_(1,Gi,5,8,"div",127),n()),s&2){let e=u(2);r(),d("ngForOf",e.docentesFiltradosPC)}}function Qi(s,t){s&1&&(o(0,"small",129),c(1,"INACTIVO"),n())}function Wi(s,t){if(s&1){let e=b();o(0,"div",123),g("click",function(){let a=p(e).$implicit,l=u(3);return f(l.seleccionarDocenteOtros(a))}),o(1,"div",124)(2,"span"),c(3),n(),_(4,Qi,2,0,"small",128),n()()}if(s&2){let e=t.$implicit,i=u(3);oe("opacity",i.docenteInactivo(e)?"0.65":"1")("pointer-events",i.docenteInactivo(e)?"none":"auto"),$("disabled",i.docenteInactivo(e)),r(3),E(i.getNombreCompletoDocente(e)),r(),d("ngIf",i.docenteInactivo(e))}}function Ki(s,t){if(s&1&&(o(0,"div",121),_(1,Wi,5,8,"div",127),n()),s&2){let e=u(2);r(),d("ngForOf",e.docentesFiltradosOtros)}}function Xi(s,t){if(s&1&&(o(0,"option",126),c(1),n()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Yi(s,t){if(s&1&&(o(0,"option",126),c(1),n()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Zi(s,t){if(s&1){let e=b();o(0,"button",132),g("click",function(){p(e);let a=u(3);return f(a.AutoCompletarLastinfoestudiantesifas())}),o(1,"span",16),h(2,"ng-lottie",17),n(),o(3,"span"),c(4,"AUTO COMPLETAR "),n(),h(5,"span",18),n()}if(s&2){let e=u(3);r(2),d("options",e._tools.optionsautocompletar)}}function Ji(s,t){if(s&1&&(o(0,"div",130),_(1,Zi,6,1,"button",131),n()),s&2){let e=u(2);r(),d("ngIf",!e.AnimacionCargabtnModalinfoestudiantesifas)}}function en(s,t){if(s&1){let e=b();o(0,"button",133),g("click",function(){p(e);let a=u().$implicit,l=u();return a.dismiss(),f(l.resetinfoestudiantesifas())}),o(1,"span",16),h(2,"ng-lottie",17),n(),o(3,"span"),c(4,"CANCELAR"),n(),h(5,"span",18),n()}if(s&2){let e=u(2);r(2),d("options",e._tools.optionscancelar)}}function tn(s,t){if(s&1){let e=b();o(0,"button",134),g("click",function(){p(e);let a=u(2);return f(a.AgregarModificarinfoestudiantesifas())}),h(1,"span",135),n()}s&2&&d("disabled",!0)}function nn(s,t){if(s&1){let e=b();o(0,"button",136),g("click",function(){p(e);let a=u(2);return f(a.AgregarModificarinfoestudiantesifas())}),o(1,"span",16),h(2,"ng-lottie",17),n(),o(3,"span"),c(4),n(),h(5,"span",18),n()}if(s&2){let e,i,a=u(2);r(2),d("options",(e=a.newinfoestudiantesifas.get("id"))!=null&&e.value?a._tools.optionsEditar:a._tools.optionsAdicionar),r(2),E((i=a.newinfoestudiantesifas.get("id"))!=null&&i.value?"MODIFICAR":"REGISTRAR")}}function an(s,t){if(s&1){let e=b();o(0,"div",67)(1,"h4",68),c(2),n(),o(3,"button",69),g("click",function(){let a=p(e).$implicit,l=u();return a.dismiss(),f(l.resetinfoestudiantesifas())}),n()(),o(4,"div",70)(5,"form",71),_(6,Mi,7,1,"div",72),o(7,"div",13)(8,"div",73)(9,"label",74),c(10,"COMPROBANTE DE PAGO EN DIGITAL"),n(),_(11,Vi,2,1,"div",75)(12,Pi,4,1,"ng-template",null,4,k),o(14,"div",76)(15,"button",77),g("click",function(){p(e);let a=u();return f(a.abrirVinculacionCelular())}),c(16," Vincular celular (QR) "),n(),o(17,"span",78),c(18),n(),o(19,"button",79),g("click",function(){p(e);let a=u();return f(a.iniciarCapturaFotoPagoPorCelular())}),c(20," Obtener Comprobante con celular "),n()()(),_(21,Di,11,4,"div",80),n(),o(22,"div",13)(23,"div",81)(24,"select",82)(25,"option",83),c(26,"Seleccione una opci\xF3n"),n(),_(27,Ri,2,3,"option",84),n(),o(28,"label"),c(29,"Categoria"),n(),o(30,"div",85),c(31,"Este campo es obligatorio*"),n()(),o(32,"div",81),h(33,"input",86),o(34,"label"),c(35,"Fecha de Inscripci\xF3n"),n(),o(36,"div",85),c(37,"Este campo es obligatorio*"),n()(),o(38,"div",81)(39,"select",87)(40,"option",83),c(41,"Seleccione una opci\xF3n"),n(),_(42,Li,2,3,"option",84),n(),o(43,"label"),c(44,"Verificacion"),n(),o(45,"div",85),c(46,"Este campo es obligatorio*"),n()()(),o(47,"div",13)(48,"div",88)(49,"select",89)(50,"option",83),c(51,"Seleccione una opci\xF3n"),n(),_(52,Bi,2,3,"option",84),n(),o(53,"label"),c(54,"Turno"),n(),o(55,"div",85),c(56,"Este campo es obligatorio*"),n()(),o(57,"div",90)(58,"select",91)(59,"option",83),c(60,"Seleccione una opci\xF3n"),n(),_(61,$i,2,3,"option",84),n(),o(62,"label"),c(63,"Curso Solicitado"),n(),o(64,"div",85),c(65,"Este campo es obligatorio*"),n()(),o(66,"div",92)(67,"input",93),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newinfoestudiantesifas,"Paralelo_Solicitado"))}),n(),o(68,"label"),c(69,"Paralelo Solicitado"),n(),o(70,"div",85),c(71,"Este campo es obligatorio*"),n()(),o(72,"div",90)(73,"input",94),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newinfoestudiantesifas,"Matricula"))}),n(),o(74,"label"),c(75,"Matricula"),n(),o(76,"div",85),c(77,"Este campo es obligatorio*"),n()(),o(78,"div",95)(79,"button",96),g("click",function(){p(e);let a=u();return f(a.newinfoestudiantesifas.patchValue({Matricula:a.generarMatricula()}))}),o(80,"span",16),h(81,"ng-lottie",17),n(),o(82,"span"),c(83,"Generar Matr\xEDcula"),n(),h(84,"span",18),n()()(),o(85,"div",13)(86,"div",97)(87,"input",98),g("focus",function(){p(e);let a=u();return f(a.mostrarListaDocAdmin=!0)}),n(),o(88,"label"),c(89,"Docente (Especialidad)"),n(),_(90,zi,2,1,"div",99),n(),o(91,"div",97)(92,"input",98),g("focus",function(){p(e);let a=u();return f(a.mostrarListaDocPC=!0)}),n(),o(93,"label"),c(94,"Docente Pr\xE1ctica de Conjuntos (funciona si se usa Modo Pr\xE1ctica de Conjuntos)"),n(),_(95,qi,2,1,"div",99),n(),o(96,"div",97)(97,"input",98),g("focus",function(){p(e);let a=u();return f(a.mostrarListaDocOtros=!0)}),n(),o(98,"label"),c(99,"Docente (Otros)"),n(),_(100,Ki,2,1,"div",99),n()(),o(101,"div",13)(102,"div",100)(103,"select",101)(104,"option",83),c(105,"Seleccione una opci\xF3n"),n(),_(106,Xi,2,3,"option",84),n(),o(107,"label"),c(108,"Instrumento Musical"),n(),o(109,"div",85),c(110,"Este campo es obligatorio*"),n()(),o(111,"div",100)(112,"select",102)(113,"option",83),c(114,"Seleccione una opci\xF3n"),n(),_(115,Yi,2,3,"option",84),n(),o(116,"label"),c(117,"Instrumento Musical Secundario"),n(),o(118,"div",85),c(119,"Este campo es obligatorio*"),n()()(),o(120,"div",103)(121,"textarea",104),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newinfoestudiantesifas,"Observacion"))}),n(),o(122,"label"),c(123,"Observacion"),n(),o(124,"div",85),c(125,"Este campo es obligatorio*"),n()(),o(126,"div",103)(127,"textarea",105),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newinfoestudiantesifas,"Anotaciones"))}),n(),o(128,"label"),c(129,"Anotaciones"),n(),o(130,"div",85),c(131,"Este campo es obligatorio*"),n()(),o(132,"div",103)(133,"textarea",106),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newinfoestudiantesifas,"Notas"))}),n(),o(134,"label"),c(135,"Notas"),n(),o(136,"div",85),c(137,"Este campo es obligatorio*"),n()()()(),o(138,"div",107),_(139,Ji,2,1,"div",108),o(140,"div",109),_(141,en,6,1,"button",110),n(),o(142,"div",111),_(143,tn,2,1,"button",112)(144,nn,6,2,"button",113),n()()}if(s&2){let e,i,a=G(13),l=u();r(2),A("",(e=l.newinfoestudiantesifas.get("id"))!=null&&e.value?"Modificar":"Registrar"," Inscripci\xF3n"),r(3),d("formGroup",l.newinfoestudiantesifas),r(),d("ngIf",l.esSuperAdmin),r(5),d("ngIf",(i=l.newinfoestudiantesifas.get("FotoPago"))==null?null:i.value)("ngIfElse",a),r(4),d("disabled",l.isCapturandoFotoPago),r(2),d("ngClass",Te(39,Wt,l.pairingStatus==="LINKED",!l.pairingStatus||l.pairingStatus==="PENDING",l.pairingStatus==="EXPIRED"||l.pairingStatus==="REVOKED")),r(),A(" ",l.pairingStatus==="LINKED"?"VINCULADO":l.pairingStatus||"NO VINCULADO"," "),r(),d("disabled",l.isCapturandoFotoPago),r(2),d("ngIf",!l.estudianteId),r(3),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("Categoria")),r(3),d("ngForOf",l.categoriaOptions),r(6),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("FechInsc")),r(6),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("Verificacion")),r(3),d("ngForOf",l.VerificacionOptions),r(7),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("Turno")),r(3),d("ngForOf",l.turnoOptions),r(6),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("Curso_Solicitado")),r(3),d("ngForOf",l.cursoOptions),r(6),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("Paralelo_Solicitado")),r(6),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("Matricula")),r(8),d("options",l._tools.optionsautocompletar),r(6),d("formControl",l.docAdminInput),r(3),d("ngIf",l.mostrarListaDocAdmin&&l.docAdminInput.value),r(2),d("formControl",l.docPCInput),r(3),d("ngIf",l.mostrarListaDocPC&&l.docPCInput.value),r(2),d("formControl",l.docOtrosInput),r(3),d("ngIf",l.mostrarListaDocOtros&&l.docOtrosInput.value),r(3),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("InstrumentoMusical")),r(3),d("ngForOf",l.InstrumentoMusicalOptions),r(6),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("InstrumentoMusicalSecundario")),r(3),d("ngForOf",l.InstrumentoMusicalSecundarioOptions),r(6),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("Observacion")),r(6),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("Anotaciones")),r(6),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("Notas")),r(6),d("ngIf",!l.newinfoestudiantesifas.get("id").value),r(2),d("ngIf",!l.AnimacionCargabtnModalinfoestudiantesifas),r(2),d("ngIf",l.AnimacionCargabtnModalinfoestudiantesifas),r(),d("ngIf",!l.AnimacionCargabtnModalinfoestudiantesifas)}}function sn(s,t){if(s&1&&(o(0,"div",143),h(1,"img",144),n()),s&2){let e=u(2);r(),d("src",e.pairingQrDataUrl,P)}}function on(s,t){if(s&1&&(o(0,"div",139)(1,"a",145),c(2,"Abrir link en el celular"),n()()),s&2){let e=u(2);r(),d("href",e.pairingUrl,P)}}function rn(s,t){if(s&1){let e=b();o(0,"div",67)(1,"h4",68),c(2,"Vincular celular"),n(),o(3,"button",69),g("click",function(){let a=p(e).$implicit;return f(a.dismiss())}),n()(),o(4,"div",70)(5,"div",137),c(6,"Escanea este QR una sola vez desde el celular."),n(),_(7,sn,2,1,"div",138),o(8,"div",139)(9,"div",140),c(10,"Estado"),n(),o(11,"div",141),c(12),n()(),_(13,on,3,1,"div",142),n()}if(s&2){let e=u();r(7),d("ngIf",e.pairingQrDataUrl),r(5),E(e.pairingStatus||"..."),r(),d("ngIf",e.pairingUrl)}}function ln(s,t){if(s&1){let e=b();o(0,"div",67)(1,"h4",68),c(2,"Esperando FotoPago..."),n(),o(3,"button",69),g("click",function(){let a=p(e).$implicit;return f(a.dismiss())}),n()(),o(4,"div",70)(5,"div",55),c(6,"En el celular entra a \u201CCaptura desde celular\u201D (ya vinculado) y toma la foto del comprobante."),n(),o(7,"div",139)(8,"div",140),c(9,"Estado"),n(),o(10,"div",141),c(11),n()(),o(12,"div",146)(13,"button",147),g("click",function(){let a=p(e).$implicit;return u().cancelarEsperaCaptura(),f(a.close())}),c(14,"Cancelar espera"),n()()()}if(s&2){let e=u();r(11),E(e.capturaStatus||"PENDING")}}function cn(s,t){if(s&1&&(o(0,"div",157)(1,"div",158),c(2,"Total:"),n(),o(3,"div",159),c(4),n()()),s&2){let e=u(2);r(4),E(e.estadisticasInscripciones==null||e.estadisticasInscripciones.meta==null?null:e.estadisticasInscripciones.meta.total)}}function dn(s,t){s&1&&(o(0,"div",139),c(1," Cargando estad\xEDsticas... "),n())}function un(s,t){s&1&&(o(0,"div",139),c(1," No hay estad\xEDsticas para mostrar. "),n())}function mn(s,t){s&1&&(o(0,"th"),c(1,"Edades"),n())}function pn(s,t){s&1&&(o(0,"th"),c(1,"Instrumentos"),n())}function fn(s,t){if(s&1&&(o(0,"td"),c(1),n()),s&2){let e=u().$implicit,i=u(3);r(),E(i.resumenEdades(e.edades))}}function _n(s,t){if(s&1&&(o(0,"td"),c(1),n()),s&2){let e=u().$implicit,i=u(3);r(),E(i.resumenInstrumentos(e.instrumentos))}}function gn(s,t){if(s&1&&(o(0,"tr")(1,"td"),c(2),n(),o(3,"td"),c(4),n(),o(5,"td",161),c(6),n(),o(7,"td",161),c(8),n(),o(9,"td",161),c(10),n(),o(11,"td",161),c(12),n(),_(13,fn,2,1,"td",40)(14,_n,2,1,"td",40),n()),s&2){let e=t.$implicit,i=u(3);r(2),E(e.curso),r(2),E(e.tipo),r(2),E(e.total),r(2),E(i.getSexoCount(e.sexo,"MASCULINO")),r(2),E(i.getSexoCount(e.sexo,"FEMENINO")),r(2),E(e.total-i.getSexoCount(e.sexo,"MASCULINO")-i.getSexoCount(e.sexo,"FEMENINO")),r(),d("ngIf",i.hayEdades(i.estadisticasInscripciones==null?null:i.estadisticasInscripciones.por_curso)),r(),d("ngIf",i.hayInstrumentos(i.estadisticasInscripciones==null?null:i.estadisticasInscripciones.por_curso))}}function hn(s,t){s&1&&(o(0,"th"),c(1,"Edades"),n())}function xn(s,t){s&1&&(o(0,"th"),c(1,"Instrumentos"),n())}function vn(s,t){if(s&1&&(o(0,"td"),c(1),n()),s&2){let e=u().$implicit,i=u(3);r(),E(i.resumenEdades(e.edades))}}function En(s,t){if(s&1&&(o(0,"td"),c(1),n()),s&2){let e=u().$implicit,i=u(3);r(),E(i.resumenInstrumentos(e.instrumentos))}}function bn(s,t){if(s&1&&(o(0,"tr")(1,"td"),c(2),n(),o(3,"td"),c(4),n(),o(5,"td"),c(6),n(),o(7,"td",161),c(8),n(),o(9,"td",161),c(10),n(),o(11,"td",161),c(12),n(),o(13,"td",161),c(14),n(),_(15,vn,2,1,"td",40)(16,En,2,1,"td",40),n()),s&2){let e=t.$implicit,i=u(3);r(2),E(e.curso),r(2),E(e.paralelo),r(2),E(e.tipo),r(2),E(e.total),r(2),E(i.getSexoCount(e.sexo,"MASCULINO")),r(2),E(i.getSexoCount(e.sexo,"FEMENINO")),r(2),E(e.total-i.getSexoCount(e.sexo,"MASCULINO")-i.getSexoCount(e.sexo,"FEMENINO")),r(),d("ngIf",i.hayEdades(i.estadisticasInscripciones==null?null:i.estadisticasInscripciones.por_curso_paralelo)),r(),d("ngIf",i.hayInstrumentos(i.estadisticasInscripciones==null?null:i.estadisticasInscripciones.por_curso_paralelo))}}function Cn(s,t){if(s&1&&(o(0,"div",139)(1,"h6"),c(2,"Por Curso_Solicitado"),n(),o(3,"div",34)(4,"table",160)(5,"thead")(6,"tr")(7,"th"),c(8,"Curso"),n(),o(9,"th"),c(10,"Tipo"),n(),o(11,"th",161),c(12,"Total"),n(),o(13,"th",161),c(14,"Varones"),n(),o(15,"th",161),c(16,"Mujeres"),n(),o(17,"th",161),c(18,"Otros/Sin dato"),n(),_(19,mn,2,0,"th",40)(20,pn,2,0,"th",40),n()(),o(21,"tbody"),_(22,gn,15,8,"tr",162),n()()(),o(23,"h6",33),c(24,"Por Curso_Solicitado + Paralelo_Solicitado"),n(),o(25,"div",163),c(26,"(Solo se muestra cuando existe Paralelo_Solicitado)"),n(),o(27,"div",34)(28,"table",160)(29,"thead")(30,"tr")(31,"th"),c(32,"Curso"),n(),o(33,"th"),c(34,"Paralelo"),n(),o(35,"th"),c(36,"Tipo"),n(),o(37,"th",161),c(38,"Total"),n(),o(39,"th",161),c(40,"Varones"),n(),o(41,"th",161),c(42,"Mujeres"),n(),o(43,"th",161),c(44,"Otros/Sin dato"),n(),_(45,hn,2,0,"th",40)(46,xn,2,0,"th",40),n()(),o(47,"tbody"),_(48,bn,17,9,"tr",162),n()()()()),s&2){let e=u(2);r(19),d("ngIf",e.hayEdades(e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso)),r(),d("ngIf",e.hayInstrumentos(e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso)),r(2),d("ngForOf",e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso),r(23),d("ngIf",e.hayEdades(e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso_paralelo)),r(),d("ngIf",e.hayInstrumentos(e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso_paralelo)),r(2),d("ngForOf",e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso_paralelo)}}function Sn(s,t){if(s&1){let e=b();o(0,"div",67)(1,"h5",68),c(2,"Componente Estadisticas de Inscripciones"),n(),o(3,"button",148),g("click",function(){let a=p(e).$implicit;return f(a.dismiss())}),n()(),o(4,"div",70)(5,"div",149)(6,"div",150)(7,"label",151),c(8,"Modo"),n(),o(9,"select",22),N("ngModelChange",function(a){p(e);let l=u();return O(l.estadisticasModo,a)||(l.estadisticasModo=a),f(a)}),g("change",function(){p(e);let a=u();return f(a.cargarEstadisticasInscripciones())}),o(10,"option",152),c(11,"POR DEFECTO (seg\xFAn check SIN ASIGNACIONES)"),n(),o(12,"option",153),c(13,"SOLO ASIGNADOS"),n(),o(14,"option",154),c(15,"SOLO SIN ASIGNAR"),n()()(),o(16,"div",150)(17,"button",155),g("click",function(){p(e);let a=u();return f(a.cargarEstadisticasInscripciones())}),c(18," ACTUALIZAR "),n()(),_(19,cn,5,1,"div",156),n(),_(20,dn,2,0,"div",142)(21,un,2,0,"div",142)(22,Cn,49,6,"div",142),n()}if(s&2){let e=u();r(9),F("ngModel",e.estadisticasModo),r(10),d("ngIf",e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.meta),r(),d("ngIf",e.isLoadingEstadisticas),r(),d("ngIf",!e.isLoadingEstadisticas&&!e.estadisticasInscripciones),r(),d("ngIf",!e.isLoadingEstadisticas&&e.estadisticasInscripciones)}}var xe=class xe{constructor(t,e,i,a,l,m,v,x,C,M,j){this._infoest=t;this._est=e;this._anios=i;this._controles=a;this._tools=l;this._auth=m;this._planteldoc=v;this._capture=x;this._pairing=C;this.router=M;this.sanitizer=j;this.estudianteId=null;this.nombreEstudiante=null;this.fotoEstudiante=null;this.sexoEstudiante=null;this.modo=null;this.pairingToken=null;this.pairingStatus=null;this.pairingUrl=null;this.pairingQrDataUrl=null;this.pairingIntervalId=null;this.capturaToken=null;this.capturaStatus=null;this.capturaIntervalId=null;this.isCapturandoFotoPago=!1;this.fotoPagoAnteriorPath=null;this.fotoPagoTempPath=null;this.esSuperAdmin=!1;this.plantelDocentes=[];this.docAdminInput=new S("");this.docPCInput=new S("");this.docOtrosInput=new S("");this.mostrarListaDocAdmin=!1;this.mostrarListaDocPC=!1;this.mostrarListaDocOtros=!1;this.docentesFiltradosAdmin=[];this.docentesFiltradosPC=[];this.docentesFiltradosOtros=[];this.categoriaOptions=[];this.turnoOptions=[];this.cursoOptions=[];this.InstrumentoMusicalOptions=[];this.InstrumentoMusicalSecundarioOptions=[];this.infoestudiantesifas=[];this.paginainfoestudiantesifas=1;this.isLoadinginfoestudiantesifas=!1;this.AnimacionCargabtnModalinfoestudiantesifas=!1;this.filtertxtinfoestudiantesifas="";this.searchAplicado="";this.anios=[];this.selectedAnioId="";this.incluirSinAsignar=!0;this.estadisticasModo="default";this.isLoadingEstadisticas=!1;this.estadisticasInscripciones=null;this.sortByColumn="FechInsc";this.sortDir="desc";this.estudianteInput=new S("");this.mostrarListaEstudiantes=!1;this.estudiantesFiltrados=[];this.isBuscandoEstudiante=!1;this.estudianteSeleccionado=null;this.collectionSizeinfoestudiantesifas=0;this.pageSizeinfoestudiantesifas=10;this.pageSizeOptionsinfoestudiantesifas=[5,10,20,50];this.sortColumnsinfoestudiantesifas=[];this.menuStateinfoestudiantesifas$=this._tools.state$;this.newinfoestudiantesifas=this._infoest.createFormGroupinfoestudiantesifas(),this.newinfoestudiantesifasAnteriorAccion=this._infoest.createFormGroupinfoestudiantesifas()}ngOnInit(){console.log("foto",this.fotoEstudiante),this.cargarAnios(),this.cargarOptionsDesdeControles(),this._auth.revisarSiEsSuperAdmin().subscribe(t=>this.esSuperAdmin=t),this.setupBuscadoresPlantel(),this.cargarPlantelDocentes(),this.setupBuscadorEstudiantes(),this.cargarVinculacionDesdeStorage()}ngOnDestroy(){this.detenerPollingVinculacion(),this.detenerPollingCaptura()}cargarVinculacionDesdeStorage(){let t=localStorage.getItem("lcch_capture_pairing_token");t&&(this.pairingToken=t,this.refrescarEstadoVinculacion(!1))}refrescarEstadoVinculacion(t){this.pairingToken&&this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:e=>{let i=e?.data?.status??this.pairingStatus;if(this.pairingStatus=i,i==="REVOKED"||i==="EXPIRED"){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null;return}t&&this._tools.MostrarMensaje("success","Vinculaci\xF3n actualizada")},error:e=>{e?.status===404&&(localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null)}})}abrirVinculacionCelular(){return V(this,null,function*(){this._tools.MostrarMensajeLoading();let t=()=>new Promise((e,i)=>{let a=()=>{this._pairing.crearVinculacion().subscribe({next:l=>{let m=l?.data?.token;if(!m)return i(new Error("No token"));this.pairingToken=m,this.pairingStatus=l?.data?.status??null,localStorage.setItem("lcch_capture_pairing_token",m),e(m)},error:l=>i(l)})};if(this.pairingToken){this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:l=>{let m=l?.data?.status??null;if(this.pairingStatus=m,m==="EXPIRED"||m==="REVOKED"){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null,a();return}e(this.pairingToken)},error:l=>{if(l?.status===404){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null,a();return}i(l)}});return}a()});try{let e=yield t(),i=this.router.serializeUrl(this.router.createUrlTree(["/captura-celular",e])),a=window.location.hostname,m=(a==="localhost"||a==="127.0.0.1")&&D.frontendPublicBaseUrl?D.frontendPublicBaseUrl:document.baseURI;this.pairingUrl=new URL(i,m).toString();try{this.pairingQrDataUrl=yield Tt.toDataURL(this.pairingUrl,{width:240,margin:1})}catch{this.pairingQrDataUrl=null}this.modalVincularCelularRef=this._tools.openModal(this.modalVincularCelular,"md"),this.modalVincularCelularRef.result.finally(()=>{this.detenerPollingVinculacion()}),this.iniciarPollingVinculacion(),this._tools.MostrarMensajeSuccess()}catch(e){console.log("ERROR creando vinculaci\xF3n",e),this._tools.MostrarMensajeError()}})}iniciarPollingVinculacion(){this.detenerPollingVinculacion(),this.pairingToken&&(this.pairingIntervalId=setInterval(()=>{this.pairingToken&&this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:t=>{let e=t?.data?.status;this.pairingStatus=e??this.pairingStatus,e==="LINKED"&&this.detenerPollingVinculacion()},error:()=>{}})},2e3))}detenerPollingVinculacion(){this.pairingIntervalId&&(clearInterval(this.pairingIntervalId),this.pairingIntervalId=null)}iniciarCapturaFotoPagoPorCelular(){return V(this,null,function*(){if(!this.pairingToken||this.pairingStatus!=="LINKED"){this._tools.MostrarMensaje("info","Primero vincule el celular (QR)"),yield this.abrirVinculacionCelular();return}this._tools.MostrarMensajeLoading();let t=this.estudianteId?Number(this.estudianteId):this.newinfoestudiantesifas.get("estudiantesifas_id")?.value?Number(this.newinfoestudiantesifas.get("estudiantesifas_id")?.value):null;this._pairing.solicitarCaptura(this.pairingToken,t,"pagosAnualesUnicos").subscribe({next:e=>{let i=e?.data?.token;if(!i){this._tools.MostrarMensajeError();return}this.capturaToken=i,this.capturaStatus=e?.data?.status??"PENDING",this.isCapturandoFotoPago=!0,this.modalEsperaFotoPagoCelularRef=this._tools.openModal(this.modalEsperaFotoPagoCelular,"md"),this.modalEsperaFotoPagoCelularRef.result.finally(()=>{this.cancelarEsperaCaptura(!0)}),this.iniciarPollingCaptura(),this._tools.MostrarMensajeSuccess()},error:e=>{console.log("ERROR solicitando captura",e),this._tools.MostrarMensajeError()}})})}iniciarPollingCaptura(){this.detenerPollingCaptura(),this.capturaToken&&(this.capturaIntervalId=setInterval(()=>{this.capturaToken&&this._capture.estadoSesion(this.capturaToken).subscribe({next:t=>{let e=t?.data?.status,i=t?.data?.file_path;if(this.capturaStatus=e??this.capturaStatus,e==="UPLOADED"&&i){let a=this.fotoPagoTempPath;this.newinfoestudiantesifas.patchValue({FotoPago:i}),this.fotoPagoTempPath=i,a&&a!==i&&a!==this.fotoPagoAnteriorPath&&this._tools.EliminarArchivo(a),this.isCapturandoFotoPago=!1,this.detenerPollingCaptura(),this.modalEsperaFotoPagoCelularRef?.close(),this._tools.MostrarMensaje("success","FotoPago recibida desde el celular")}},error:()=>{}})},2e3))}detenerPollingCaptura(){this.capturaIntervalId&&(clearInterval(this.capturaIntervalId),this.capturaIntervalId=null)}cancelarEsperaCaptura(t=!1){let e=this.capturaStatus;this.detenerPollingCaptura(),this.capturaStatus=null,this.capturaToken=null,this.isCapturandoFotoPago=!1,this.pairingToken&&e!=="UPLOADED"&&this._pairing.cancelarCaptura(this.pairingToken).subscribe({next:()=>{t||this._tools.MostrarMensaje("info","Espera cancelada")},error:()=>{}})}ngOnChanges(t){t.estudianteId&&!t.estudianteId.firstChange&&this.CargarSegunModo()}snapshotFormValue(t){let e=t;return typeof e.getRawValue=="function"?e.getRawValue():t.value}getTableColspan(){let t=10;return this.esSuperAdmin&&(t+=1),this.estudianteId||(t+=3),t}setupBuscadoresPlantel(){this.docAdminInput.valueChanges.subscribe(t=>{let e=(t??"").toString();if(e===""){this.docentesFiltradosAdmin=[],this.newinfoestudiantesifas.patchValue({planteldocadmins_id:""});return}if(e.trim()===""){this.docentesFiltradosAdmin=this.filtrarPlantelDocentes("",!0);return}this.newinfoestudiantesifas.patchValue({planteldocadmins_id:""}),this.docentesFiltradosAdmin=this.filtrarPlantelDocentes(e.toLowerCase().trim())}),this.docPCInput.valueChanges.subscribe(t=>{let e=(t??"").toString();if(e===""){this.docentesFiltradosPC=[],this.newinfoestudiantesifas.patchValue({planteldocadmins_idPC:""});return}if(e.trim()===""){this.docentesFiltradosPC=this.filtrarPlantelDocentes("",!0);return}this.newinfoestudiantesifas.patchValue({planteldocadmins_idPC:""}),this.docentesFiltradosPC=this.filtrarPlantelDocentes(e.toLowerCase().trim())}),this.docOtrosInput.valueChanges.subscribe(t=>{let e=(t??"").toString();if(e===""){this.docentesFiltradosOtros=[],this.newinfoestudiantesifas.patchValue({planteldocadmins_idOtros:""});return}if(e.trim()===""){this.docentesFiltradosOtros=this.filtrarPlantelDocentes("",!0);return}this.newinfoestudiantesifas.patchValue({planteldocadmins_idOtros:""}),this.docentesFiltradosOtros=this.filtrarPlantelDocentes(e.toLowerCase().trim())})}cargarPlantelDocentes(){this._planteldoc.Obtenerplanteldocentes().subscribe({next:t=>{let e=t?.data||[];this.plantelDocentes=e.filter(i=>this.normalizar(i?.Visibilidad)!=="OCULTO"),this.syncBuscadoresPlantelConForm()},error:t=>{console.error("Error al cargar planteldocentes",t),this.plantelDocentes=[]}})}getInstitucionFiltroId(){let t=this.newinfoestudiantesifas.get("instituciones_id")?.value;return t==null||String(t).trim()===""?null:String(t)}filtrarPlantelDocentes(t,e=!1){let i=this.getInstitucionFiltroId(),a=(this.plantelDocentes||[]).filter(l=>!(i&&String(l?.instituciones_id)!==i)).sort((l,m)=>this.getNombreCompletoDocente(l).localeCompare(this.getNombreCompletoDocente(m)));return e?a.slice(0,50):t?a.filter(l=>this.getNombreCompletoDocente(l).toLowerCase().includes(t)).slice(0,25):[]}normalizar(t){return(t??"").toString().trim().toUpperCase()}getNombreCompletoDocente(t){let e=(t?.Nombres??"").toString().trim(),i=(t?.Apellidos??"").toString().trim();return`${e} ${i}`.trim()}docenteInactivo(t){return this.normalizar(t?.Estado)==="INACTIVO"}seleccionarDocenteAdmin(t){!t||this.docenteInactivo(t)||(this.newinfoestudiantesifas.patchValue({planteldocadmins_id:t?.id??""}),this.docAdminInput.setValue(this.getNombreCompletoDocente(t),{emitEvent:!1}),this.mostrarListaDocAdmin=!1,this.docentesFiltradosAdmin=[])}seleccionarDocentePC(t){!t||this.docenteInactivo(t)||(this.newinfoestudiantesifas.patchValue({planteldocadmins_idPC:t?.id??""}),this.docPCInput.setValue(this.getNombreCompletoDocente(t),{emitEvent:!1}),this.mostrarListaDocPC=!1,this.docentesFiltradosPC=[])}seleccionarDocenteOtros(t){!t||this.docenteInactivo(t)||(this.newinfoestudiantesifas.patchValue({planteldocadmins_idOtros:t?.id??""}),this.docOtrosInput.setValue(this.getNombreCompletoDocente(t),{emitEvent:!1}),this.mostrarListaDocOtros=!1,this.docentesFiltradosOtros=[])}syncBuscadoresPlantelConForm(){if(!this.plantelDocentes?.length)return;let t=this.newinfoestudiantesifas.get("planteldocadmins_id")?.value,e=this.newinfoestudiantesifas.get("planteldocadmins_idPC")?.value,i=this.newinfoestudiantesifas.get("planteldocadmins_idOtros")?.value,a=x=>(this.plantelDocentes||[]).find(C=>String(C?.id)===String(x)),l=t?a(t):null,m=e?a(e):null,v=i?a(i):null;l&&this.docAdminInput.setValue(this.getNombreCompletoDocente(l),{emitEvent:!1}),m&&this.docPCInput.setValue(this.getNombreCompletoDocente(m),{emitEvent:!1}),v&&this.docOtrosInput.setValue(this.getNombreCompletoDocente(v),{emitEvent:!1})}cargarOptionsDesdeControles(){let t=["TIPO DE ESTUDIANTE","TURNO","LVLCURSO","ESPECIALIDAD","ESPECIALIDAD SECUNDARIA"];this._controles.ObtenerOptionsSelectPorCategorias(t).subscribe({next:e=>{this.categoriaOptions=e?.["TIPO DE ESTUDIANTE"]||[],this.turnoOptions=e?.TURNO||[],this.cursoOptions=e?.LVLCURSO||[],this.InstrumentoMusicalOptions=e?.ESPECIALIDAD||[],this.InstrumentoMusicalSecundarioOptions=e?.["ESPECIALIDAD SECUNDARIA"]||[]},error:()=>{this.categoriaOptions=[],this.turnoOptions=[],this.cursoOptions=[],this.InstrumentoMusicalOptions=[],this.InstrumentoMusicalSecundarioOptions=[]}})}abrirModalNuevoInfoestudiantesifas(){this.modalGestioninfoestudiantesifasRef=this._tools.openModal(this.modalgestioninfoestudiantesifas,"xl")}cargarAnios(){this._anios.ObtenerAniosConPredeterminado().subscribe({next:t=>{if(this.anios=t?.anios||[],this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){let e=t?.predeterminado;e?.id?this.selectedAnioId=e.id:this.anios?.length&&(this.selectedAnioId=this.anios[0]?.id??"")}this.CargarSegunModo()},error:t=>{console.error("Error al cargar anios",t),this.CargarSegunModo()}})}onAnioChange(){this.paginainfoestudiantesifas=1,this.Cargarinfoestudiantesifas(),this.modalEstadisticasRef&&this.cargarEstadisticasInscripciones()}abrirModalEstadisticas(){this.modalEstadisticasRef=this._tools.openModal(this.modalOtroComponenteEstadisticas,"xl"),this.cargarEstadisticasInscripciones(),this.modalEstadisticasRef.result.finally(()=>{this.isLoadingEstadisticas=!1})}cargarEstadisticasInscripciones(){if(this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){this.estadisticasInscripciones=null;return}this.isLoadingEstadisticas=!0,this._infoest.ObtenerEstadisticasInscripciones({anio_id:Number(this.selectedAnioId),include_sin_asignar:this.incluirSinAsignar?1:0,anio_scope:this.estadisticasModo}).subscribe({next:t=>{this.estadisticasInscripciones=t??null,this.isLoadingEstadisticas=!1},error:t=>{console.error("Error al cargar estad\xEDsticas",t),this.estadisticasInscripciones=null,this.isLoadingEstadisticas=!1}})}formatearMapaConteo(t,e,i){return!Array.isArray(t)||t.length===0?"":t.map(a=>{let l=(a?.[e]??"").toString().trim(),m=Number(a?.total??0);if(!l||!Number.isFinite(m)||m<=0)return"";let v=i?.suffix??"";return`${l}${v} (${m})`}).filter(a=>a!=="").join(", ")}resumenEdades(t){return this.formatearMapaConteo(t,"edad",{suffix:" a\xF1os"})}resumenInstrumentos(t){return this.formatearMapaConteo(t,"instrumento")}hayInstrumentos(t){return Array.isArray(t)&&t.some(e=>Array.isArray(e?.instrumentos)&&e.instrumentos.length>0)}hayEdades(t){return Array.isArray(t)&&t.some(e=>Array.isArray(e?.edades)&&e.edades.length>0)}getSexoCount(t,e){return t?Number(t?.[e]??0):0}onSearchEnter(){this.searchAplicado=(this.filtertxtinfoestudiantesifas??"").toString(),this.paginainfoestudiantesifas=1,this.Cargarinfoestudiantesifas()}onPageChange(t){this.paginainfoestudiantesifas=t,this.Cargarinfoestudiantesifas()}CargarSegunModo(){this.estudianteId&&(this.newinfoestudiantesifas.patchValue({estudiantesifas_id:this.estudianteId}),this.cargarEstudianteSeleccionadoPorId(this.estudianteId)),this.Cargarinfoestudiantesifas()}setupBuscadorEstudiantes(){this.estudianteInput.valueChanges.subscribe(t=>{(t??"").toString()===""&&(this.estudiantesFiltrados=[],this.mostrarListaEstudiantes=!1,this.estudianteId||(this.estudianteSeleccionado=null,this.newinfoestudiantesifas.patchValue({estudiantesifas_id:""})))})}getNombreCompletoEstudiante(t){let e=(t?.Ap_Paterno??"").toString().trim(),i=(t?.Ap_Materno??"").toString().trim(),a=(t?.Nombre??"").toString().trim();return`${e} ${i} ${a}`.replace(/\s+/g," ").trim()}normalizarParaBusqueda(t){return(t??"").toString().toLowerCase().trim()}tokenizarPreservandoDuplicados(t){return t.split(/\s+/g).map(e=>e.trim()).filter(e=>e.length>0)}esTokenNumerico(t){return/^\d+$/.test(t)}contarOcurrencias(t,e){if(!e)return 0;let i=0,a=0;for(;;){let l=t.indexOf(e,a);if(l===-1)break;i+=1,a=l+e.length}return i}filtrarEstudiantesPreciso(t,e){let i=(e??"").toString().trim();if(!i)return[];let a=this.tokenizarPreservandoDuplicados(i).map(m=>this.normalizarParaBusqueda(m));if(a.length===0)return[];let l=new Map;for(let m of a)l.set(m,(l.get(m)??0)+1);return(t||[]).filter(m=>{let v=this.normalizarParaBusqueda(this.getNombreCompletoEstudiante(m)),x=this.normalizarParaBusqueda(m?.CI);for(let[C,M]of l.entries())if(C){if(this.esTokenNumerico(C)){if(this.contarOcurrencias(x,C)<M)return!1}else if(this.contarOcurrencias(v,C)<M)return!1}return!0})}getTokensResaltadoEstudiante(t,e){let i=(t??"").toString().trim();if(!i)return[];let a=this.tokenizarPreservandoDuplicados(i).map(m=>this.normalizarParaBusqueda(m)).filter(m=>m.length>0),l=e==="ci"?a.filter(m=>this.esTokenNumerico(m)):a.filter(m=>!this.esTokenNumerico(m));return Array.from(new Set(l))}resaltarTextoConTokens(t,e){let i=(t??"").toString();if(!i)return this.sanitizer.bypassSecurityTrustHtml("");let a=this.escapeHtml(i);if(e.length>0){let l=e.map(v=>this.escapeRegExp(v)).sort((v,x)=>x.length-v.length),m=new RegExp(`(${l.join("|")})`,"gi");a=a.replace(m,v=>`<mark class="match-strong">${v}</mark>`)}return this.sanitizer.bypassSecurityTrustHtml(a)}resaltarNombreEnBuscadorEstudiante(t){let e=(this.estudianteInput?.value??"").toString(),i=this.getTokensResaltadoEstudiante(e,"nombre");return this.resaltarTextoConTokens(this.getNombreCompletoEstudiante(t),i)}resaltarCIEnBuscadorEstudiante(t){let e=(this.estudianteInput?.value??"").toString(),i=this.getTokensResaltadoEstudiante(e,"ci");return this.resaltarTextoConTokens((t??"").toString(),i)}buscarEstudiantes(){if(this.estudianteId)return;let t=(this.estudianteInput.value??"").toString().trim();if(!t){this.estudiantesFiltrados=[];return}this.isBuscandoEstudiante=!0;let e={page:1,per_page:200,search:t,search_mode:"any",sort_by:"id",sort_dir:"desc"};this._est.Obtenerestudiantesifas(e).subscribe({next:i=>{let a=i?.data||[],l=this.filtrarEstudiantesPreciso(a,t);this.estudiantesFiltrados=(l||[]).slice(0,15),this.mostrarListaEstudiantes=this.estudiantesFiltrados.length>0,this.isBuscandoEstudiante=!1},error:i=>{console.error("Error al buscar estudiantes",i),this.estudiantesFiltrados=[],this.mostrarListaEstudiantes=!1,this.isBuscandoEstudiante=!1}})}seleccionarEstudiante(t){t&&(this.estudianteSeleccionado=t,this.newinfoestudiantesifas.patchValue({estudiantesifas_id:t?.id??""}),this.estudianteInput.setValue(this.getNombreCompletoEstudiante(t),{emitEvent:!1}),this.mostrarListaEstudiantes=!1,this.estudiantesFiltrados=[])}cargarEstudianteSeleccionadoPorId(t){t&&this._est.Seleccionarestudiantesifas(Number(t)).subscribe({next:e=>{this.estudianteSeleccionado=e?.data??null,!this.estudianteId&&this.estudianteSeleccionado&&this.estudianteInput.setValue(this.getNombreCompletoEstudiante(this.estudianteSeleccionado),{emitEvent:!1})},error:e=>{console.error("Error al cargar estudiante",e),this.estudianteId||(this.estudianteSeleccionado=null)}})}generarMatricula(){let t=this.estudianteSeleccionado,e=(t?.Ap_Paterno??"").toString().trim(),i=(t?.Ap_Materno??"").toString().trim(),a=(t?.Nombre??"").toString().trim(),l=(t?.CI??"").toString().trim(),m=e?e.charAt(0):"",v=i?i.charAt(0):"",x=a?a.charAt(0):"";return`${m}${v}${x}${l}`.toUpperCase()}Cargarinfoestudiantesifas(){this.isLoadinginfoestudiantesifas=!0,this._infoest.Obtenerinfoestudiantesifas({page:this.paginainfoestudiantesifas,per_page:this.pageSizeinfoestudiantesifas,anio_id:this.selectedAnioId===""?void 0:Number(this.selectedAnioId),include_sin_asignar:this.incluirSinAsignar?1:0,estudiante_id:this.estudianteId?Number(this.estudianteId):void 0,search:this.searchAplicado,search_mode:"any",sort_by:this.sortByColumn,sort_dir:this.sortDir}).subscribe({next:t=>{console.log("cargar estudiantes inscritos",t.data),this.infoestudiantesifas=t.data||[],this.collectionSizeinfoestudiantesifas=t.meta?.total??this.infoestudiantesifas.length,this.isLoadinginfoestudiantesifas=!1},error:t=>{console.error("Error al cargar infoestudiantesifas",t),this.infoestudiantesifas=[],this.collectionSizeinfoestudiantesifas=0,this.isLoadinginfoestudiantesifas=!1}})}getTokensBusqueda(t){let e=(t??this.filtertxtinfoestudiantesifas??"").toString().trim();return e?Array.from(new Set(e.split(/\s+/g).map(i=>i.trim()).filter(i=>i.length>0))):[]}escapeHtml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}resaltarTexto(t,e){let i=this.getTokensBusqueda(e),a=(t??"").toString();if(!a)return this.sanitizer.bypassSecurityTrustHtml("");let l=this.escapeHtml(a);if(i.length>0){let m=i.map(x=>this.escapeRegExp(x)).sort((x,C)=>C.length-x.length),v=new RegExp(`(${m.join("|")})`,"gi");l=l.replace(v,x=>`<mark class="match-strong">${x}</mark>`)}return this.sanitizer.bypassSecurityTrustHtml(l)}AgregarModificarinfoestudiantesifas(){if(this.newinfoestudiantesifas.invalid){this.ValidacionTodoElementoinfoestudiantesifas(),this._tools.MostrarMensajeFrmIncompleto(),this.AnimacionCargabtnModalinfoestudiantesifas=!1;return}else{this.AnimarCargaTablainfoestudiantesifas(),this.AnimacionCargabtnModalinfoestudiantesifas=!0,this._tools.MostrarMensajeLoading(),this.newinfoestudiantesifasAnteriorAccion.patchValue(this.snapshotFormValue(this.newinfoestudiantesifas));let t=this.newinfoestudiantesifas.controls.id.value;console.log("INFO A PROCESAR",this.newinfoestudiantesifas.value);let e=this.newinfoestudiantesifas.get("FotoPago")?.value??null,i=this.fotoPagoAnteriorPath;t?this._infoest.Modificarinfoestudiantesifas(this.newinfoestudiantesifas.value,this.newinfoestudiantesifas.value.id).subscribe(a=>{console.log("SE MODIFICO CORRECTAMENTE infoestudiantesifas",a.data),i&&e&&i!==e&&this._tools.EliminarArchivo(i),this.Cargarinfoestudiantesifas(),this.fotoPagoTempPath=null,this.fotoPagoAnteriorPath=null,this.resetinfoestudiantesifas(),this.AnimacionCargabtnModalinfoestudiantesifas=!1,this._tools.MostrarMensajeSuccess()},a=>{console.log("ERROR AL MODIFICAR infoestudiantesifas",a),this.AnimacionCargabtnModalinfoestudiantesifas=!1,this._tools.MostrarMensajeError()}):this._infoest.Agregarinfoestudiantesifas(this.newinfoestudiantesifas.value).subscribe(a=>{console.log("SE A\xD1ADIO CORRECTAMENTE infoestudiantesifas",a.data),this.Cargarinfoestudiantesifas(),this.fotoPagoTempPath=null,this.fotoPagoAnteriorPath=null,this.resetinfoestudiantesifas(),this.AnimacionCargabtnModalinfoestudiantesifas=!1,this._tools.MostrarMensajeSuccess()},a=>{console.log("ERROR AL A\xD1ADIR infoestudiantesifas",a),this.AnimacionCargabtnModalinfoestudiantesifas=!1,this._tools.MostrarMensajeError()})}}Seleccionarinfoestudiantesifas(t){if(this._tools.MostrarMensajeLoading(),t){if(!this.infoestudiantesifas.find(i=>i.id===t))return;this._infoest.Seleccionarinfoestudiantesifas(t).subscribe(i=>{Object.keys(this.newinfoestudiantesifas.controls).forEach(l=>{this.newinfoestudiantesifas.controls[l].setValue(i.data[l])}),console.log("SELECCION DE infoestudiantesifas EXITOSA",this.newinfoestudiantesifas.value),this.newinfoestudiantesifasAnteriorAccion.patchValue(this.snapshotFormValue(this.newinfoestudiantesifas)),this.fotoPagoAnteriorPath=this.newinfoestudiantesifas.get("FotoPago")?.value??null,this.fotoPagoTempPath=null;let a=this.newinfoestudiantesifas.get("estudiantesifas_id")?.value;!this.estudianteId&&a&&this.cargarEstudianteSeleccionadoPorId(Number(a)),this.syncBuscadoresPlantelConForm(),this.modalGestioninfoestudiantesifasRef=this._tools.openModal(this.modalgestioninfoestudiantesifas,"xl"),this._tools.MostrarMensajeSuccess()},i=>{console.log("ERROR AL SELECCIONAR infoestudiantesifas",i),this._tools.MostrarMensajeError()})}}Eliminarinfoestudiantesifas(t){this._tools.mostrarMensajeConfirm("\xBFSEGURO QUE DESEA ELIMINAR?","SE ELIMINARA EL DATO Y NO SE PODR\xC1 RECUPERAR EL DATO","warning","SI, ESTOY SEGURO","NO").then(e=>{e&&(this._tools.MostrarMensajeLoading(),this._infoest.Eliminarinfoestudiantesifas(t).subscribe(i=>{console.log(i.data),this.Cargarinfoestudiantesifas(),this._tools.MostrarMensajeSuccess()},i=>{console.log("ERROR AL ELIMINAR infoestudiantesifas",i),this._tools.MostrarMensajeError()}))})}resetinfoestudiantesifas(){this.fotoPagoTempPath&&this.fotoPagoTempPath!==this.fotoPagoAnteriorPath&&this._tools.EliminarArchivo(this.fotoPagoTempPath),this.fotoPagoTempPath=null,this.fotoPagoAnteriorPath=null,this.newinfoestudiantesifas=this._infoest.createFormGroupinfoestudiantesifas(),this.estudianteId?(this.newinfoestudiantesifas.patchValue({estudiantesifas_id:this.estudianteId}),this.cargarEstudianteSeleccionadoPorId(this.estudianteId)):(this.estudianteSeleccionado=null,this.estudianteInput.setValue("",{emitEvent:!1}),this.estudiantesFiltrados=[],this.mostrarListaEstudiantes=!1),this.docAdminInput.setValue("",{emitEvent:!1}),this.docPCInput.setValue("",{emitEvent:!1}),this.docOtrosInput.setValue("",{emitEvent:!1}),this.docentesFiltradosAdmin=[],this.docentesFiltradosPC=[],this.docentesFiltradosOtros=[],this.mostrarListaDocAdmin=!1,this.mostrarListaDocPC=!1,this.mostrarListaDocOtros=!1,this._tools.closeModal(this.modalGestioninfoestudiantesifasRef)}AutoCompletarLastinfoestudiantesifas(){this.newinfoestudiantesifasAnteriorAccion.patchValue({CantidadMateriasAsignadas:0}),this.newinfoestudiantesifas.patchValue(this.snapshotFormValue(this.newinfoestudiantesifasAnteriorAccion)),this.syncBuscadoresPlantelConForm(),this.newinfoestudiantesifas.patchValue({id:0}),console.log("listo",this.newinfoestudiantesifas.value)}AnimarCargaTablainfoestudiantesifas(){this.infoestudiantesifas=[],this.isLoadinginfoestudiantesifas=!0}ValidacioninfoestudiantesifasxElemento(t){return this._tools.obtenerValidationClass(this.newinfoestudiantesifas,t)}ValidacionTodoElementoinfoestudiantesifas(){Object.values(this.newinfoestudiantesifas.controls).forEach(t=>{t.markAsTouched(),t.markAsDirty()})}onPageSizeChangeinfoestudiantesifas(){this.paginainfoestudiantesifas=1,this.Cargarinfoestudiantesifas()}sortByinfoestudiantesifas(t,e){this.sortColumnsinfoestudiantesifas=this._tools.handleSort(t,e,this.sortColumnsinfoestudiantesifas);let i=this.sortColumnsinfoestudiantesifas?.[0];i?.column&&(this.sortByColumn=i.column,this.sortDir=i.direction,this.paginainfoestudiantesifas=1,this.Cargarinfoestudiantesifas())}isSortedinfoestudiantesifas(t){return this._tools.isSorted(this.sortColumnsinfoestudiantesifas,t)}getSortDirinfoestudiantesifas(t){return this._tools.getSortDirection(this.sortColumnsinfoestudiantesifas,t)}closeMenu(t){this._tools.close();let e=t?.target;e?.closest?.(".plantel-doc-buscador")||e?.closest?.(".estudiante-buscador")||(this.mostrarListaDocAdmin=!1,this.mostrarListaDocPC=!1,this.mostrarListaDocOtros=!1,this.mostrarListaEstudiantes=!1)}abrirMenuinfoestudiantesifas(t,e){t.preventDefault(),t.stopPropagation(),console.log("aS",e);let i=[{label:"\u270F Editar",action:()=>this.Seleccionarinfoestudiantesifas(e.id)},{label:"\u{1F5D1}\uFE0F Eliminar",action:()=>this.Eliminarinfoestudiantesifas(e.id)}];this._tools.open(t.clientX,t.clientY,i)}};xe.\u0275fac=function(e){return new(e||xe)(y(je),y(Q),y(Ue),y($e),y(Be),y(Le),y(Et),y(ge),y(he),y(Me),y(ut))},xe.\u0275cmp=se({type:xe,selectors:[["app-estudiantesinscritos"]],viewQuery:function(e,i){if(e&1&&(U(Ht,7),U(Gt,7),U(qt,7),U(Qt,7)),e&2){let a;z(a=H())&&(i.modalVincularCelular=a.first),z(a=H())&&(i.modalEsperaFotoPagoCelular=a.first),z(a=H())&&(i.modalgestioninfoestudiantesifas=a.first),z(a=H())&&(i.modalOtroComponenteEstadisticas=a.first)}},hostBindings:function(e,i){e&1&&g("click",function(l){return i.closeMenu(l)},Se)},inputs:{estudianteId:"estudianteId",nombreEstudiante:"nombreEstudiante",fotoEstudiante:"fotoEstudiante",sexoEstudiante:"sexoEstudiante",modo:"modo"},standalone:!1,features:[ot],decls:93,vars:36,consts:[["modalgestioninfoestudiantesifas",""],["modalVincularCelular",""],["modalEsperaFotoPagoCelular",""],["modalOtroComponenteEstadisticas",""],["sinFotoPago",""],["sinFotoEstudiante",""],[1,"container","mt-4"],[1,"row","align-items-center"],[1,"col-12",3,"ngClass"],[1,"display-4","fw-bold","titulosGlobales","text-center"],[1,"lead","text-secondary","subtitulosGlobales","text-center"],[1,"lead","text-primary","subtitulosGlobales","text-center"],["class","col-12 col-md-4 d-flex justify-content-center justify-content-md-end mt-3 mt-md-0",4,"ngIf"],[1,"row"],[1,"col-sm-5","d-flex","justify-content-start","button",2,"gap","10px"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","width","30px","height","30px"],["width","50px","height","50px",3,"options"],[1,"dir-part"],[1,"col-sm-4","d-flex","justify-content-end"],[1,"d-flex","align-items-center","w-100",2,"gap","12px"],[1,"form-floating","flex-grow-1"],[1,"form-select",3,"ngModelChange","change","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-check",2,"white-space","nowrap"],["type","checkbox","id","chkSinAsignar",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","chkSinAsignar",1,"form-check-label"],[1,"col-sm-3","ms-auto","d-flex","justify-content-end"],["title","PRESIONAR TECLA ENTER PARA REALIZAR BUSQUEDA",1,"input-group"],[1,"input-group-text"],["width","30px","height","30px",3,"options"],[1,"form-floating"],["type","text","placeholder","Buscar","title","PRESIONAR TECLA ENTER PARA REALIZAR BUSQUEDA",1,"form-control",3,"keyup.enter","ngModelChange","ngModel"],[1,"mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-sm","align-middle"],[1,"text-center"],["style","user-select: none; -webkit-user-select: none; -moz-user-select: none;",3,"click",4,"ngIf"],[2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["class","bi",3,"ngClass",4,"ngIf"],[4,"ngIf"],["style","cursor: pointer;",3,"contextmenu",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["previousLabel","Anterior","nextLabel","Siguiente",3,"pageChange","page","collectionSize","pageSize","maxSize","rotate","ellipses","boundaryLinks"],[1,"form-select",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-md-4","d-flex","justify-content-center","justify-content-md-end","mt-3","mt-md-0"],[2,"width","160px","height","160px","object-fit","cover",3,"options"],["alt","Foto del estudiante",1,"border","rounded",2,"width","160px","height","160px","object-fit","cover",3,"src"],[3,"ngValue"],[1,"bi",3,"ngClass"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-center","py-4"],[1,"d-flex","flex-column","align-items-center","justify-content-center","gap-2"],[1,"text-muted"],[2,"width","min(200px, 40vw)","height","min(200px, 40vw)",3,"options"],[2,"cursor","pointer",3,"contextmenu"],[3,"innerHTML"],[1,"text-center","d-flex","justify-content-center","align-items-center",2,"gap","5px"],["title","Modificar informaci\xF3n",1,"btn","btn-outline-warning","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src",4,"ngIf"],["width","30px","height","35px",3,"options",4,"ngIf"],["title","Eliminar informaci\xF3n",1,"btn","btn-outline-danger","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src"],["width","30px","height","35px",3,"options"],[3,"value"],[1,"modal-header"],[1,"modal-title"],["type","button","title","cerrar",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup"],["class","row",4,"ngIf"],[1,"mb-3","col-12","col-sm-6"],[1,"form-label","bold"],[4,"ngIf","ngIfElse"],[1,"mt-2","d-flex","justify-content-start"],["type","button",1,"btn","btn-outline-secondary","btn-sm","me-2",3,"click","disabled"],[1,"badge","align-self-center","me-2",3,"ngClass"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],["class","col-12 col-sm-6",4,"ngIf"],[1,"form-floating","mb-3","col-sm-4"],["formControlName","Categoria",1,"form-control",3,"ngClass"],["disabled","",3,"value"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"invalid-feedback"],["type","date","placeholder","","formControlName","FechInsc",1,"form-control",3,"ngClass"],["formControlName","Verificacion",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-2"],["formControlName","Turno",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-3"],["formControlName","Curso_Solicitado",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-1"],["type","text","placeholder","","formControlName","Paralelo_Solicitado",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Matricula",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"button","col-sm-3","d-flex","align-items-start"],["type","button",1,"btn","mouse-dir","primary","d-flex","align-items-center","flex-shrink-0",2,"gap","8px","height","58px","white-space","nowrap",3,"click"],[1,"form-floating","mb-3","col-sm-4","position-relative","plantel-doc-buscador"],["type","text","placeholder"," ","autocomplete","off",1,"form-control",3,"focus","formControl"],["class","list-group position-absolute w-100","style","z-index: 1000;",4,"ngIf"],[1,"form-floating","mb-3","col-sm-6"],["formControlName","InstrumentoMusical",1,"form-control",3,"ngClass"],["formControlName","InstrumentoMusicalSecundario",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-12"],["placeholder","","formControlName","Observacion",1,"form-control",2,"text-transform","uppercase","height","100px",3,"change","ngClass"],["placeholder","","formControlName","Anotaciones",1,"form-control",2,"text-transform","uppercase","height","100px",3,"change","ngClass"],["placeholder","","formControlName","Notas",1,"form-control",2,"text-transform","uppercase","height","100px",3,"change","ngClass"],[1,"modal-footer"],["class","button d-flex justify-content-start",4,"ngIf"],[1,"button","me-2"],["title","Cancelar y cerrar","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],[1,"button"],["class","btn mouse-dir success","title","Procesando informaci\xF3n",3,"disabled","click",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;","title","Accionar",3,"click",4,"ngIf"],["type","number","placeholder","","formControlName","instituciones_id",1,"form-control",3,"ngClass"],["alt","FotoPago",1,"img-thumbnail",2,"width","180px","height","180px","object-fit","cover",3,"src"],[2,"width","180px","height","180px","object-fit","cover",3,"options"],[1,"col-12","col-sm-6"],[1,"form-floating","mb-3","col-12","position-relative","estudiante-buscador"],["type","text","placeholder"," ","autocomplete","off",1,"form-control",3,"focus","keyup.enter","formControl"],[1,"mb-3","col-12"],[1,"list-group","position-absolute","w-100",2,"z-index","1000"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"d-flex","w-100","justify-content-between"],["alt","Foto del estudiante",1,"img-thumbnail",2,"width","180px","height","180px","object-fit","cover",3,"src"],[3,"value","disabled"],["class","list-group-item list-group-item-action",3,"disabled","opacity","pointerEvents","click",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"button","d-flex","justify-content-start"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Cancelar y cerrar",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Procesando informaci\xF3n",1,"btn","mouse-dir","success",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["title","Accionar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[1,"mb-2","text-muted"],["class","d-flex justify-content-center",4,"ngIf"],[1,"mt-3"],[1,"small","text-muted"],[1,"fw-semibold"],["class","mt-3",4,"ngIf"],[1,"d-flex","justify-content-center"],["alt","QR",2,"max-width","260px","width","100%",3,"src"],["target","_blank","rel","noopener",3,"href"],[1,"mt-3","d-flex","justify-content-end"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[1,"row","g-2","align-items-end"],[1,"col-12","col-md-4"],[1,"form-label"],["value","default"],["value","assigned"],["value","unassigned"],[1,"btn","btn-outline-primary","w-100",3,"click"],["class","col-12 col-md-4 text-md-end",4,"ngIf"],[1,"col-12","col-md-4","text-md-end"],[1,"text-secondary"],[1,"fs-5","fw-bold"],[1,"table","table-sm","table-striped","align-middle"],[1,"text-end"],[4,"ngFor","ngForOf"],[1,"text-secondary","mb-2"]],template:function(e,i){if(e&1){let a=b();o(0,"div",6)(1,"div",7)(2,"div",8)(3,"h1",9),c(4),n(),o(5,"p",10),c(6),n(),o(7,"p",11),c(8),n()(),_(9,Yt,3,1,"div",12),n()(),o(10,"div",13)(11,"div",14)(12,"button",15),g("click",function(){return p(a),f(i.abrirModalNuevoInfoestudiantesifas())}),o(13,"span",16),h(14,"ng-lottie",17),n(),o(15,"span"),c(16,"A\xF1adir infoestudiantesifas "),n(),h(17,"span",18),n(),o(18,"button",15),g("click",function(){return p(a),f(i.abrirModalEstadisticas())}),o(19,"span",16),h(20,"ng-lottie",17),n(),o(21,"span"),c(22,"VER ESTAD\xCDSTICAS DE INSCRIPCIONES"),n(),h(23,"span",18),n()(),o(24,"div",19)(25,"div",20)(26,"div",21)(27,"select",22),N("ngModelChange",function(m){return p(a),O(i.selectedAnioId,m)||(i.selectedAnioId=m),f(m)}),g("change",function(){return p(a),f(i.onAnioChange())}),_(28,Zt,2,2,"option",23),n(),o(29,"label"),c(30,"A\xF1o"),n()(),o(31,"div",24)(32,"input",25),N("ngModelChange",function(m){return p(a),O(i.incluirSinAsignar,m)||(i.incluirSinAsignar=m),f(m)}),g("change",function(){return p(a),f(i.onAnioChange())}),n(),o(33,"label",26),c(34,"INCLUIR LOS SIN ASIGNACIONES"),n()()()(),o(35,"div",27)(36,"div",28)(37,"span",29),h(38,"ng-lottie",30),n(),o(39,"div",31)(40,"input",32),g("keyup.enter",function(){return p(a),f(i.onSearchEnter())}),N("ngModelChange",function(m){return p(a),O(i.filtertxtinfoestudiantesifas,m)||(i.filtertxtinfoestudiantesifas=m),f(m)}),n(),o(41,"label"),c(42,"Buscar"),n()()()()(),o(43,"div",33)(44,"div",34)(45,"table",35)(46,"tr")(47,"th",36),c(48,"#"),n(),_(49,ei,3,1,"th",37),o(50,"th",38),g("click",function(m){return p(a),f(i.sortByinfoestudiantesifas("Anio",m))}),c(51," Anio | Resoluci\xF3n "),_(52,ti,1,4,"i",39),n(),o(53,"th",38),g("click",function(m){return p(a),f(i.sortByinfoestudiantesifas("FechInsc",m))}),c(54," Fecha Inscripci\xF3n "),_(55,ii,1,4,"i",39),n(),_(56,ai,3,1,"th",37)(57,oi,3,1,"th",37)(58,li,3,1,"th",37)(59,di,3,1,"th",37),o(60,"th",38),g("click",function(m){return p(a),f(i.sortByinfoestudiantesifas("Categoria",m))}),c(61," Categoria "),_(62,ui,1,4,"i",39),n(),o(63,"th",38),g("click",function(m){return p(a),f(i.sortByinfoestudiantesifas("Curso_Solicitado",m))}),c(64," Curso_Solicitado "),_(65,mi,1,4,"i",39),n(),o(66,"th",38),g("click",function(m){return p(a),f(i.sortByinfoestudiantesifas("CantidadMateriasAsignadas",m))}),c(67," N\xB0 Asig. "),_(68,pi,1,4,"i",39),n(),o(69,"th",38),g("click",function(m){return p(a),f(i.sortByinfoestudiantesifas("Observacion",m))}),c(70," Observacion "),_(71,fi,1,4,"i",39),n(),o(72,"th",38),g("click",function(m){return p(a),f(i.sortByinfoestudiantesifas("Verificacion",m))}),c(73," Verificacion "),_(74,_i,1,4,"i",39),n(),o(75,"th",36),c(76,"ACCIONES"),n()(),o(77,"tbody"),_(78,gi,5,1,"tr",40),Ze(79,hi,6,2,"tr"),_(80,Ai,30,19,"tr",41),n()()(),o(81,"div",42)(82,"ngb-pagination",43),g("pageChange",function(m){return p(a),f(i.onPageChange(m))}),n(),o(83,"select",44),N("ngModelChange",function(m){return p(a),O(i.pageSizeinfoestudiantesifas,m)||(i.pageSizeinfoestudiantesifas=m),f(m)}),g("change",function(){return p(a),f(i.onPageSizeChangeinfoestudiantesifas())}),_(84,Ti,2,2,"option",45),n()()(),_(85,an,145,43,"ng-template",null,0,k)(87,rn,14,3,"ng-template",null,1,k)(89,ln,15,1,"ng-template",null,2,k)(91,Sn,23,5,"ng-template",null,3,k)}e&2&&(r(2),d("ngClass",i.modo==="estudiante"?"col-md-8 text-md-start":"text-center"),r(2),A(" ",i.modo==="estudiante"?"Inscripciones":"Inscripciones Estudiantiles"," "),r(2),A(" ",i.modo==="estudiante"?"Gestiona las Inscripciones del estudiante: ":"Gestiona la Informaci\xF3n de Inscripciones de sus estudiantes de manera sencilla y eficiente"," "),r(2),A(" ",i.modo==="estudiante"?""+i.nombreEstudiante:""," "),r(),d("ngIf",i.modo==="estudiante"),r(5),d("options",i._tools.optionsAdicionar),r(6),d("options",i._tools.optionsengranaje),r(7),F("ngModel",i.selectedAnioId),r(),d("ngForOf",i.anios),r(4),F("ngModel",i.incluirSinAsignar),r(6),d("options",i._tools.optionslupa),r(2),F("ngModel",i.filtertxtinfoestudiantesifas),r(9),d("ngIf",i.esSuperAdmin),r(3),d("ngIf",i.isSortedinfoestudiantesifas("Anio")),r(3),d("ngIf",i.isSortedinfoestudiantesifas("FechInsc")),r(),d("ngIf",!i.estudianteId),r(),d("ngIf",!i.estudianteId),r(),d("ngIf",!i.estudianteId),r(),d("ngIf",!i.estudianteId),r(3),d("ngIf",i.isSortedinfoestudiantesifas("Categoria")),r(3),d("ngIf",i.isSortedinfoestudiantesifas("Curso_Solicitado")),r(3),d("ngIf",i.isSortedinfoestudiantesifas("CantidadMateriasAsignadas")),r(3),d("ngIf",i.isSortedinfoestudiantesifas("Observacion")),r(3),d("ngIf",i.isSortedinfoestudiantesifas("Verificacion")),r(4),d("ngIf",i.isLoadinginfoestudiantesifas),r(),Je(!i.isLoadinginfoestudiantesifas&&(!i.infoestudiantesifas||i.infoestudiantesifas.length===0)?79:-1),r(),d("ngForOf",i.infoestudiantesifas),r(2),d("page",i.paginainfoestudiantesifas)("collectionSize",i.collectionSizeinfoestudiantesifas)("pageSize",i.pageSizeinfoestudiantesifas)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),r(),F("ngModel",i.pageSizeinfoestudiantesifas),r(),d("ngForOf",i.pageSizeOptionsinfoestudiantesifas))},dependencies:[re,le,ce,Fe,fe,_e,Pe,Oe,mt,pe,ue,ke,me,ft,Ne,De,Re,Ve,_t],styles:["[_nghost-%COMP%]     mark.match-strong{background-color:rgba(var(--bs-warning-rgb),.55);color:var(--bs-dark);font-weight:800;padding:0 .15rem;border-radius:.2rem;box-decoration-break:clone;-webkit-box-decoration-break:clone;outline:1px solid rgba(var(--bs-warning-rgb),.9)}"]});var ve=xe;var In=["modalVincularCelular"],wn=["modalEsperaFotoCelular"],An=["modalgestionestudiantesifas"],W=(s,t)=>({"bi-caret-up":s,"bi-caret-down":t}),Tn=(s,t,e)=>({"bg-success":s,"bg-secondary":t,"bg-danger":e}),Mn=(s,t)=>({top:s,left:t});function Vn(s,t){if(s&1&&h(0,"i",36),s&2){let e=u();d("ngClass",w(1,W,e.getSortDirestudiantesifas("Ap_Paterno")==="asc",e.getSortDirestudiantesifas("Ap_Paterno")==="desc"))}}function Pn(s,t){if(s&1&&h(0,"i",36),s&2){let e=u();d("ngClass",w(1,W,e.getSortDirestudiantesifas("Ap_Materno")==="asc",e.getSortDirestudiantesifas("Ap_Materno")==="desc"))}}function kn(s,t){if(s&1&&h(0,"i",36),s&2){let e=u();d("ngClass",w(1,W,e.getSortDirestudiantesifas("Nombre")==="asc",e.getSortDirestudiantesifas("Nombre")==="desc"))}}function Fn(s,t){if(s&1&&h(0,"i",36),s&2){let e=u();d("ngClass",w(1,W,e.getSortDirestudiantesifas("CI")==="asc",e.getSortDirestudiantesifas("CI")==="desc"))}}function On(s,t){if(s&1&&h(0,"i",36),s&2){let e=u();d("ngClass",w(1,W,e.getSortDirestudiantesifas("Expedido")==="asc",e.getSortDirestudiantesifas("Expedido")==="desc"))}}function Nn(s,t){if(s&1&&h(0,"i",36),s&2){let e=u();d("ngClass",w(1,W,e.getSortDirestudiantesifas("Sexo")==="asc",e.getSortDirestudiantesifas("Sexo")==="desc"))}}function Dn(s,t){if(s&1&&h(0,"i",36),s&2){let e=u();d("ngClass",w(1,W,e.getSortDirestudiantesifas("Edad")==="asc",e.getSortDirestudiantesifas("Edad")==="desc"))}}function Rn(s,t){if(s&1&&h(0,"i",36),s&2){let e=u();d("ngClass",w(1,W,e.getSortDirestudiantesifas("Estado")==="asc",e.getSortDirestudiantesifas("Estado")==="desc"))}}function Ln(s,t){s&1&&(o(0,"tr")(1,"td",26)(2,"div",37)(3,"span",38),c(4,"Cargando..."),n()()()()),s&2&&(r(),q("colspan",10))}function Bn(s,t){s&1&&(o(0,"tr")(1,"td",26),c(2,"No hay datos disponibles"),n()()),s&2&&(r(),q("colspan",10))}function $n(s,t){if(s&1&&h(0,"img",47),s&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"eye.svg",P)}}function jn(s,t){if(s&1&&h(0,"ng-lottie",48),s&2){let e=u(2);d("options",e._tools.optionseye)}}function Un(s,t){if(s&1&&h(0,"img",47),s&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"pencil.svg",P)}}function zn(s,t){if(s&1&&h(0,"ng-lottie",48),s&2){let e=u(2);d("options",e._tools.optionsEditar)}}function Hn(s,t){if(s&1&&h(0,"img",47),s&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"delete.svg",P)}}function Gn(s,t){if(s&1&&h(0,"ng-lottie",48),s&2){let e=u(2);d("options",e._tools.optionsEliminar)}}function qn(s,t){if(s&1){let e=b();o(0,"tr",39),g("contextmenu",function(a){let l=p(e).$implicit,m=u();return f(m.abrirMenuestudiantesifas(a,l))}),o(1,"td",26),c(2),n(),o(3,"td"),h(4,"span",40),n(),o(5,"td"),h(6,"span",40),n(),o(7,"td"),h(8,"span",40),n(),o(9,"td"),h(10,"span",40),n(),o(11,"td"),h(12,"span",40),n(),o(13,"td"),h(14,"span",40),n(),o(15,"td"),c(16),n(),o(17,"td"),h(18,"span",40),n(),o(19,"td",41)(20,"button",42),g("click",function(){let a=p(e).$implicit,l=u(),m=G(73);return l.VisualizarInfoEstudiante(a.id),f(l._tools.openModal(m,"xl"))})("mouseenter",function(){let a=p(e).$implicit,l=u();return f(l._tools.hoverBotonMap["visualizacionestudiantesifas-"+a.id]=!0)})("mouseleave",function(){let a=p(e).$implicit,l=u();return f(l._tools.hoverBotonMap["visualizacionestudiantesifas-"+a.id]=!1)}),_(21,$n,1,1,"img",43)(22,jn,1,1,"ng-lottie",44),n(),o(23,"button",45),g("click",function(){let a=p(e).$implicit,l=u();return f(l.Seleccionarestudiantesifas(a.id))})("mouseenter",function(){let a=p(e).$implicit,l=u();return f(l._tools.hoverBotonMap["edicionestudiantesifas-"+a.id]=!0)})("mouseleave",function(){let a=p(e).$implicit,l=u();return f(l._tools.hoverBotonMap["edicionestudiantesifas-"+a.id]=!1)}),_(24,Un,1,1,"img",43)(25,zn,1,1,"ng-lottie",44),n(),o(26,"button",46),g("click",function(){let a=p(e).$implicit,l=u();return f(l.Eliminarestudiantesifas(a.id))})("mouseenter",function(){let a=p(e).$implicit,l=u();return f(l._tools.hoverBotonMap["eliminacionestudiantesifas-"+a.id]=!0)})("mouseleave",function(){let a=p(e).$implicit,l=u();return f(l._tools.hoverBotonMap["eliminacionestudiantesifas-"+a.id]=!1)}),_(27,Hn,1,1,"img",43)(28,Gn,1,1,"ng-lottie",44),n()()()}if(s&2){let e=t.$implicit,i=t.index,a=u();r(2),E(a.rowIndexBaseestudiantesifas+(i+1)),r(2),d("innerHTML",a.highlightCell(e.Ap_Paterno),I),r(2),d("innerHTML",a.highlightCell(e.Ap_Materno),I),r(2),d("innerHTML",a.highlightCell(e.Nombre),I),r(2),d("innerHTML",a.highlightCell(e.CI),I),r(2),d("innerHTML",a.highlightCell(e.Expedido),I),r(2),d("innerHTML",a.highlightCell(e.Sexo),I),r(2),E(e.Edad),r(2),d("innerHTML",a.highlightCell(e.Estado),I),r(3),d("ngIf",!a._tools.hoverBotonMap["visualizacionestudiantesifas-"+e.id]),r(),d("ngIf",a._tools.hoverBotonMap["visualizacionestudiantesifas-"+e.id]),r(2),d("ngIf",!a._tools.hoverBotonMap["edicionestudiantesifas-"+e.id]),r(),d("ngIf",a._tools.hoverBotonMap["edicionestudiantesifas-"+e.id]),r(2),d("ngIf",!a._tools.hoverBotonMap["eliminacionestudiantesifas-"+e.id]),r(),d("ngIf",a._tools.hoverBotonMap["eliminacionestudiantesifas-"+e.id])}}function Qn(s,t){if(s&1&&(o(0,"option",49),c(1),n()),s&2){let e=t.$implicit;d("value",e),r(),A("",e," por p\xE1gina")}}function Wn(s,t){if(s&1&&(o(0,"div"),h(1,"img",114),n()),s&2){let e,i=u(2);r(),d("src",i._tools.ruta+((e=i.newestudiantesifas.get("Foto"))==null?null:e.value),P)}}function Kn(s,t){s&1&&(o(0,"div",59),c(1,"SIN FOTO DE PERFIL"),n())}function Xn(s,t){if(s&1&&(o(0,"div",115)(1,"div",116)(2,"div",117),c(3),n()()()),s&2){let e=u(2);r(2),oe("width",e.uploadProgressFoto,"%"),r(),A(" ",e.uploadProgressFoto,"% ")}}function Yn(s,t){s&1&&(o(0,"div",118),c(1," Este campo es obligatorio* "),n())}function Zn(s,t){if(s&1&&(o(0,"option",119),c(1),n()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Jn(s,t){if(s&1&&(o(0,"option",119),c(1),n()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function ea(s,t){if(s&1){let e=b();o(0,"button",120),g("click",function(){let a;p(e);let l=u(2);return f(l.newestudiantesifas.patchValue({Usuario:((a=l.newestudiantesifas.get("Ap_Paterno"))==null?null:a.value.charAt(0))+((a=l.newestudiantesifas.get("Ap_Materno"))==null?null:a.value.charAt(0))+((a=l.newestudiantesifas.get("Nombre"))==null?null:a.value.charAt(0))+((a=l.newestudiantesifas.get("CI"))==null?null:a.value)+"EST"}))}),h(1,"ng-lottie",121),n()}if(s&2){let e=u(2);r(),d("options",e._tools.optionstripleengranaje)}}function ta(s,t){s&1&&(o(0,"div",122),c(1," Este campo es obligatorio* "),n())}function ia(s,t){if(s&1){let e=b();o(0,"button",123),g("click",function(){p(e);let a=u(2);return f(a.mostrarContrasenia=!a.mostrarContrasenia)}),h(1,"ng-lottie",121),n()}if(s&2){let e=u(2);r(),d("options",e._tools.optionseye)}}function na(s,t){s&1&&(o(0,"div",122),c(1," Este campo es obligatorio* "),n())}function aa(s,t){if(s&1&&(o(0,"option",119),c(1),n()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function sa(s,t){if(s&1&&(o(0,"option",119),c(1),n()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function oa(s,t){if(s&1&&(o(0,"option",119),c(1),n()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function ra(s,t){if(s&1&&(o(0,"option",119),c(1),n()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function la(s,t){if(s&1){let e=b();o(0,"button",126),g("click",function(){p(e);let a=u(3);return f(a.AutoCompletarLastestudiantesifas())}),o(1,"span",13),h(2,"ng-lottie",14),n(),o(3,"span"),c(4,"AUTO COMPLETAR "),n(),h(5,"span",15),n()}if(s&2){let e=u(3);r(2),d("options",e._tools.optionsautocompletar)}}function ca(s,t){if(s&1&&(o(0,"div",124),_(1,la,6,1,"button",125),n()),s&2){let e=u(2);r(),d("ngIf",!e.AnimacionCargabtnModalestudiantesifas)}}function da(s,t){if(s&1){let e=b();o(0,"button",127),g("click",function(){p(e);let a=u().$implicit,l=u();return a.dismiss(),f(l.resetestudiantesifas())}),o(1,"span",13),h(2,"ng-lottie",14),n(),o(3,"span"),c(4,"CANCELAR"),n(),h(5,"span",15),n()}if(s&2){let e=u(2);r(2),d("options",e._tools.optionscancelar)}}function ua(s,t){if(s&1){let e=b();o(0,"button",128),g("click",function(){p(e);let a=u(2);return f(a.AgregarModificarestudiantesifas())}),h(1,"span",129),n()}s&2&&d("disabled",!0)}function ma(s,t){if(s&1){let e=b();o(0,"button",130),g("click",function(){p(e);let a=u(2);return f(a.AgregarModificarestudiantesifas())}),o(1,"span",13),h(2,"ng-lottie",14),n(),o(3,"span"),c(4),n(),h(5,"span",15),n()}if(s&2){let e,i,a=u(2);d("disabled",a.isUploadingFoto),r(2),d("options",(e=a.newestudiantesifas.get("id"))!=null&&e.value?a._tools.optionsEditar:a._tools.optionsAdicionar),r(2),E((i=a.newestudiantesifas.get("id"))!=null&&i.value?"MODIFICAR":"REGISTRAR")}}function pa(s,t){if(s&1){let e=b();o(0,"div",50)(1,"h4",51),c(2),n(),o(3,"button",52),g("click",function(){let a=p(e).$implicit,l=u();return a.dismiss(),f(l.resetestudiantesifas())}),n()(),o(4,"div",53)(5,"form",54)(6,"div",7)(7,"div",55)(8,"label",56),c(9,"Foto actual"),n(),_(10,Wn,2,1,"div",57)(11,Kn,2,0,"ng-template",null,4,k),n(),o(13,"div",55)(14,"label",56),c(15,"SUBIR FOTO DE PERFIL (1 archivo)"),n(),o(16,"div",58),g("dragover",function(a){p(e);let l=u();return f(l.onFotoDragOver(a))})("dragleave",function(a){p(e);let l=u();return f(l.onFotoDragLeave(a))})("drop",function(a){p(e);let l=u();return f(l.onFotoDrop(a))})("click",function(){p(e);let a=G(21),l=u();return f(l.abrirSelectorFoto(a))}),o(17,"div",59),c(18,"Arrastra y suelta aqu\xED, o clic para seleccionar archivo"),n(),_(19,Xn,4,3,"div",60),n(),o(20,"input",61,5),g("change",function(a){p(e);let l=u();return f(l.onFotoFileSelected(a))}),n(),o(22,"div",62)(23,"button",63),g("click",function(){p(e);let a=u();return f(a.abrirVinculacionCelular())}),c(24," Vincular celular (QR) "),n(),o(25,"span",64),c(26),n(),o(27,"button",65),g("click",function(){p(e);let a=u();return f(a.iniciarCapturaFotoPorCelular())}),c(28," Tomar foto con celular "),n()(),_(29,Yn,2,0,"div",66),n()(),o(30,"div",7)(31,"div",67)(32,"input",68),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newestudiantesifas,"Ap_Paterno"))}),n(),o(33,"label"),c(34,"Apellido Paterno"),n(),o(35,"div",69),c(36,"Este campo es obligatorio*"),n()(),o(37,"div",67)(38,"input",70),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newestudiantesifas,"Ap_Materno"))}),n(),o(39,"label"),c(40,"Apellido Materno"),n(),o(41,"div",69),c(42,"Este campo es obligatorio*"),n()(),o(43,"div",71)(44,"input",72),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newestudiantesifas,"Nombre"))}),n(),o(45,"label"),c(46,"Nombres"),n(),o(47,"div",69),c(48,"Este campo es obligatorio*"),n()()(),o(49,"div",7)(50,"div",67)(51,"input",73),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newestudiantesifas,"CI"))}),n(),o(52,"label"),c(53,"C\xE9dula de Identidad"),n(),o(54,"div",69),c(55,"Este campo es obligatorio*"),n()(),o(56,"div",74)(57,"select",75)(58,"option",76),c(59,"Seleccione una opci\xF3n"),n(),_(60,Zn,2,3,"option",77),n(),o(61,"label"),c(62,"Expedido"),n(),o(63,"div",69),c(64,"Este campo es obligatorio*"),n()(),o(65,"div",74)(66,"select",78)(67,"option",76),c(68,"Seleccione una opci\xF3n"),n(),_(69,Jn,2,3,"option",77),n(),o(70,"label"),c(71,"Sexo"),n(),o(72,"div",69),c(73,"Este campo es obligatorio*"),n()(),o(74,"div",67)(75,"input",79),g("change",function(a){let l;p(e);let m=u();return f((l=m.newestudiantesifas.get("Edad"))==null?null:l.setValue(m._tools.CalcularEdad(a.target.value)))}),n(),o(76,"label"),c(77,"Fecha de Nacimiento"),n(),o(78,"div",69),c(79,"Este campo es obligatorio*"),n()(),o(80,"div",74),h(81,"input",80),o(82,"label"),c(83,"Edad"),n(),o(84,"div",69),c(85,"Este campo es obligatorio*"),n()()(),o(86,"div",7)(87,"div",67)(88,"input",81),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newestudiantesifas,"Celular"))}),n(),o(89,"label"),c(90,"Celular"),n(),o(91,"div",69),c(92,"Este campo es obligatorio*"),n()(),o(93,"div",82)(94,"input",83),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newestudiantesifas,"Direccion"))}),n(),o(95,"label"),c(96,"Direcci\xF3n"),n(),o(97,"div",69),c(98,"Este campo es obligatorio*"),n()(),o(99,"div",84),h(100,"input",85),o(101,"label"),c(102,"Correo"),n(),o(103,"div",69),c(104,"Este campo es obligatorio*"),n()()(),o(105,"div",7)(106,"div",86)(107,"div",87)(108,"div",88)(109,"input",89),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newestudiantesifas,"Usuario"))}),n(),o(110,"label"),c(111,"Usuario"),n()(),_(112,ea,2,1,"button",90),n(),_(113,ta,2,0,"div",91),n(),o(114,"div",86)(115,"div",87)(116,"div",88),h(117,"input",92),o(118,"label"),c(119,"Contrase\xF1a"),n()(),_(120,ia,2,1,"button",93),n(),_(121,na,2,0,"div",91),n(),o(122,"div",84)(123,"select",94)(124,"option",76),c(125,"Seleccione una opci\xF3n"),n(),_(126,aa,2,3,"option",77),n(),o(127,"label"),c(128,"Estado"),n(),o(129,"div",69),c(130,"Este campo es obligatorio*"),n()()(),h(131,"hr"),o(132,"div",7)(133,"div",84)(134,"input",95),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newestudiantesifas,"Nombre_Padre"))}),n(),o(135,"label"),c(136,"Nombre Padre"),n(),o(137,"div",69),c(138,"Este campo es obligatorio*"),n()(),o(139,"div",84)(140,"input",96),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newestudiantesifas,"OcupacionP"))}),n(),o(141,"label"),c(142,"Ocupaci\xF3n del Padre"),n(),o(143,"div",69),c(144,"Este campo es obligatorio*"),n()(),o(145,"div",84)(146,"input",97),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newestudiantesifas,"NumCelP"))}),n(),o(147,"label"),c(148,"N\xFAmero Celular del Padre"),n(),o(149,"div",69),c(150,"Este campo es obligatorio*"),n()()(),o(151,"div",7)(152,"div",84)(153,"input",98),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newestudiantesifas,"Nombre_Madre"))}),n(),o(154,"label"),c(155,"Nombre Madre"),n(),o(156,"div",69),c(157,"Este campo es obligatorio*"),n()(),o(158,"div",84)(159,"input",99),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newestudiantesifas,"OcupacionM"))}),n(),o(160,"label"),c(161,"Ocupaci\xF3n de la Madre"),n(),o(162,"div",69),c(163,"Este campo es obligatorio*"),n()(),o(164,"div",84)(165,"input",100),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newestudiantesifas,"NumCelM"))}),n(),o(166,"label"),c(167,"N\xFAmero Celular de la Madre"),n(),o(168,"div",69),c(169,"Este campo es obligatorio*"),n()()(),o(170,"div",7)(171,"div",67)(172,"input",101),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newestudiantesifas,"NColegio"))}),n(),o(173,"label"),c(174,"Nombre Colegio"),n(),o(175,"div",69),c(176,"Este campo es obligatorio*"),n()(),o(177,"div",67)(178,"select",102)(179,"option",76),c(180,"Seleccione una opci\xF3n"),n(),_(181,sa,2,3,"option",77),n(),o(182,"label"),c(183,"Tipo Colegio"),n(),o(184,"div",69),c(185,"Este campo es obligatorio*"),n()(),o(186,"div",67)(187,"select",103)(188,"option",76),c(189,"Seleccione una opci\xF3n"),n(),_(190,oa,2,3,"option",77),n(),o(191,"label"),c(192,"Nivel del Colegio"),n(),o(193,"div",69),c(194,"Este campo es obligatorio*"),n()(),o(195,"div",67)(196,"select",104)(197,"option",76),c(198,"Seleccione una opci\xF3n"),n(),_(199,ra,2,3,"option",77),n(),o(200,"label"),c(201,"Grado en Colegio"),n(),o(202,"div",69),c(203,"Este campo es obligatorio*"),n()()(),o(204,"div",105)(205,"textarea",106),g("change",function(a){p(e);let l=u();return f(l._tools.EscribirEnMayuscula(a,l.newestudiantesifas,"InformacionCompartidaIFAS"))}),n(),o(206,"label"),c(207,"Informaci\xF3n Compartida IFAS"),n(),o(208,"div",69),c(209,"Este campo es obligatorio*"),n()()()(),o(210,"div",107),_(211,ca,2,1,"div",108),o(212,"div",109),_(213,da,6,1,"button",110),n(),o(214,"div",111),_(215,ua,2,1,"button",112)(216,ma,6,3,"button",113),n()()}if(s&2){let e,i,a,l,m,v=G(12),x=u();r(2),A("",(e=x.newestudiantesifas.get("id"))!=null&&e.value?"Modificar":"Registrar"," Informaci\xF3n Personal Estudiante"),r(3),d("formGroup",x.newestudiantesifas),r(5),d("ngIf",(i=x.newestudiantesifas.get("Foto"))==null?null:i.value)("ngIfElse",v),r(6),$("border-primary",x.isDraggingFoto)("bg-light",x.isDraggingFoto),r(3),d("ngIf",x.isUploadingFoto),r(4),d("disabled",x.isUploadingFoto),r(2),d("ngClass",Te(54,Tn,x.pairingStatus==="LINKED",!x.pairingStatus||x.pairingStatus==="PENDING",x.pairingStatus==="EXPIRED"||x.pairingStatus==="REVOKED")),r(),A(" ",x.pairingStatus==="LINKED"?"VINCULADO":x.pairingStatus||"NO VINCULADO"," "),r(),d("disabled",x.isUploadingFoto),r(2),d("ngIf",((a=x.newestudiantesifas.get("Foto"))==null?null:a.touched)&&((a=x.newestudiantesifas.get("Foto"))==null?null:a.invalid)),r(3),d("ngClass",x.ValidacionestudiantesifasxElemento("Ap_Paterno")),r(6),d("ngClass",x.ValidacionestudiantesifasxElemento("Ap_Materno")),r(6),d("ngClass",x.ValidacionestudiantesifasxElemento("Nombre")),r(7),d("ngClass",x.ValidacionestudiantesifasxElemento("CI")),r(6),d("ngClass",x.ValidacionestudiantesifasxElemento("Expedido")),r(3),d("ngForOf",x.expedidoOptions),r(6),d("ngClass",x.ValidacionestudiantesifasxElemento("Sexo")),r(3),d("ngForOf",x.sexoOptions),r(6),d("ngClass",x.ValidacionestudiantesifasxElemento("FechaNac")),r(6),d("ngClass",x.ValidacionestudiantesifasxElemento("Edad")),r(7),d("ngClass",x.ValidacionestudiantesifasxElemento("Celular")),r(6),d("ngClass",x.ValidacionestudiantesifasxElemento("Direccion")),r(6),d("ngClass",x.ValidacionestudiantesifasxElemento("Correo")),r(9),d("ngClass",x.ValidacionestudiantesifasxElemento("Usuario")),r(3),d("ngIf",!x.AnimacionCargabtnModalplanteldocentes),r(),d("ngIf",((l=x.newestudiantesifas.get("Usuario"))==null?null:l.touched)&&((l=x.newestudiantesifas.get("Usuario"))==null?null:l.invalid)),r(4),d("type",x.mostrarContrasenia?"text":"password")("ngClass",x.ValidacionestudiantesifasxElemento("Contrasenia")),r(3),d("ngIf",!x.AnimacionCargabtnModalplanteldocentes),r(),d("ngIf",((m=x.newestudiantesifas.get("Contrasenia"))==null?null:m.touched)&&((m=x.newestudiantesifas.get("Contrasenia"))==null?null:m.invalid)),r(2),d("ngClass",x.ValidacionestudiantesifasxElemento("Estado")),r(3),d("ngForOf",x.estadoOptions),r(8),d("ngClass",x.ValidacionestudiantesifasxElemento("Nombre_Padre")),r(6),d("ngClass",x.ValidacionestudiantesifasxElemento("OcupacionP")),r(6),d("ngClass",x.ValidacionestudiantesifasxElemento("NumCelP")),r(7),d("ngClass",x.ValidacionestudiantesifasxElemento("Nombre_Madre")),r(6),d("ngClass",x.ValidacionestudiantesifasxElemento("OcupacionM")),r(6),d("ngClass",x.ValidacionestudiantesifasxElemento("NumCelM")),r(7),d("ngClass",x.ValidacionestudiantesifasxElemento("NColegio")),r(6),d("ngClass",x.ValidacionestudiantesifasxElemento("TipoColegio")),r(3),d("ngForOf",x.tipoColegioOptions),r(6),d("ngClass",x.ValidacionestudiantesifasxElemento("CNivel")),r(3),d("ngForOf",x.nivelColegioOptions),r(6),d("ngClass",x.ValidacionestudiantesifasxElemento("CGrado")),r(3),d("ngForOf",x.gradoColegioOptions),r(6),d("ngClass",x.ValidacionestudiantesifasxElemento("InformacionCompartidaIFAS")),r(6),d("ngIf",!x.newestudiantesifas.get("id").value),r(2),d("ngIf",!x.AnimacionCargabtnModalestudiantesifas),r(2),d("ngIf",x.AnimacionCargabtnModalestudiantesifas),r(),d("ngIf",!x.AnimacionCargabtnModalestudiantesifas)}}function fa(s,t){if(s&1&&(o(0,"div",137),h(1,"img",138),n()),s&2){let e=u(2);r(),d("src",e.pairingQrDataUrl,P)}}function _a(s,t){if(s&1&&(o(0,"div",133)(1,"a",139),c(2,"Abrir link en el celular"),n()()),s&2){let e=u(2);r(),d("href",e.pairingUrl,P)}}function ga(s,t){if(s&1){let e=b();o(0,"div",50)(1,"h4",51),c(2,"Vincular celular"),n(),o(3,"button",52),g("click",function(){let a=p(e).$implicit;return f(a.dismiss())}),n()(),o(4,"div",53)(5,"div",131),c(6,"Escanea este QR una sola vez desde el celular."),n(),_(7,fa,2,1,"div",132),o(8,"div",133)(9,"div",134),c(10,"Estado"),n(),o(11,"div",135),c(12),n()(),_(13,_a,3,1,"div",136),n()}if(s&2){let e=u();r(7),d("ngIf",e.pairingQrDataUrl),r(5),E(e.pairingStatus||"..."),r(),d("ngIf",e.pairingUrl)}}function ha(s,t){if(s&1){let e=b();o(0,"div",50)(1,"h4",51),c(2,"Esperando foto..."),n(),o(3,"button",52),g("click",function(){let a=p(e).$implicit;return f(a.dismiss())}),n()(),o(4,"div",53)(5,"div",59),c(6,"En el celular entra a \u201CCaptura desde celular\u201D (ya vinculado) y toma la foto."),n(),o(7,"div",133)(8,"div",134),c(9,"Estado"),n(),o(10,"div",135),c(11),n()(),o(12,"div",140)(13,"button",141),g("click",function(){let a=p(e).$implicit;return u().cancelarEsperaCaptura(),f(a.close())}),c(14,"Cancelar espera"),n()()()}if(s&2){let e=u();r(11),E(e.capturaStatus||"PENDING")}}function xa(s,t){if(s&1){let e=b();o(0,"button",144),g("click",function(){let a=p(e).$implicit;return f(a.action())}),c(1),n()}if(s&2){let e=t.$implicit;r(),A(" ",e.label," ")}}function va(s,t){if(s&1&&(o(0,"div",142),K(1,"async"),K(2,"async"),_(3,xa,2,1,"button",143),K(4,"async"),n()),s&2){let e,i,a=u();d("ngStyle",w(8,Mn,((e=X(1,2,a.menuStateestudiantesifas$))==null?null:e.y)+"px",((e=X(2,4,a.menuStateestudiantesifas$))==null?null:e.x)+"px")),r(3),d("ngForOf",(i=X(4,6,a.menuStateestudiantesifas$))==null?null:i.items)}}function Ea(s,t){if(s&1){let e=b();o(0,"div",50)(1,"h5",51),c(2,"Inscripciones del estudiante"),n(),o(3,"button",145),g("click",function(){let a=p(e).$implicit;return f(a.dismiss())}),n()(),o(4,"div",53),h(5,"app-estudiantesinscritos",146),n()}if(s&2){let e=u();r(5),d("modo","estudiante")("estudianteId",e.estudianteSeleccionadoId)("nombreEstudiante",e.estudianteSeleccionadoNombre)("fotoEstudiante",e.estudianteSeleccionadoFoto)("sexoEstudiante",e.estudianteSeleccionadoSexo)}}var Ee=class Ee{constructor(t,e,i,a,l,m){this._est=t;this._tools=e;this._controles=i;this._capture=a;this._pairing=l;this.router=m;this.sexoOptions=[];this.expedidoOptions=[];this.estadoOptions=[];this.especialidadOptions=[];this.tipoColegioOptions=[];this.nivelColegioOptions=[];this.gradoColegioOptions=[];this.pairingToken=null;this.pairingStatus=null;this.pairingUrl=null;this.pairingQrDataUrl=null;this.pairingIntervalId=null;this.capturaToken=null;this.capturaStatus=null;this.capturaIntervalId=null;this.isDraggingFoto=!1;this.isUploadingFoto=!1;this.uploadProgressFoto=0;this.fotoAnteriorPath=null;this.fotoTempPath=null;this.estudiantesifas=[];this.paginaestudiantesifas=1;this.isLoadingestudiantesifas=!0;this.AnimacionCargabtnModalestudiantesifas=!1;this.filtertxtestudiantesifas="";this.sortByColumnestudiantesifas="id";this.sortDirestudiantesifas="desc";this.rowIndexBaseestudiantesifas=0;this.estudianteSeleccionadoId=null;this.estudianteSeleccionadoNombre=null;this.estudianteSeleccionadoFoto=null;this.estudianteSeleccionadoSexo=null;this.collectionSizeestudiantesifas=0;this.pageSizeestudiantesifas=10;this.pageSizeOptionsestudiantesifas=[5,10,20,50];this.menuStateestudiantesifas$=this._tools.state$;this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this.newestudiantesifasAnteriorAccion=this._est.createFormGroupestudiantesifas()}ngOnInit(){this.Cargarestudiantesifas(),this.cargarVinculacionDesdeStorage(),this.cargarOptionsDesdeControles()}cargarOptionsDesdeControles(){let t=["SEXO","EXPEDIDO","ESTADO","ESPECIALIDAD","TIPO COLEGIO","GRADO DE COLEGIO"];this._controles.ObtenerOptionsSelectPorCategorias(t).subscribe({next:e=>{this.sexoOptions=e?.SEXO||[],this.expedidoOptions=e?.EXPEDIDO||[],this.estadoOptions=e?.ESTADO||[],this.especialidadOptions=e?.ESPECIALIDAD||[],this.tipoColegioOptions=e?.["TIPO COLEGIO"]||[],this.nivelColegioOptions=e?.["NIVEL COLEGIO"]||[],this.gradoColegioOptions=e?.["GRADO DE COLEGIO"]||[]},error:()=>{this.sexoOptions=[],this.expedidoOptions=[],this.estadoOptions=[],this.especialidadOptions=[],this.tipoColegioOptions=[],this.nivelColegioOptions=[],this.gradoColegioOptions=[]}})}abrirModalNuevoEstudiantesifas(){this.modalGestionestudiantesifasRef=this._tools.openModal(this.modalgestionestudiantesifas,"xl")}ngOnDestroy(){this.detenerPollingCaptura(),this.detenerPollingVinculacion()}cargarVinculacionDesdeStorage(){let t=localStorage.getItem("lcch_capture_pairing_token");t&&(this.pairingToken=t,this.refrescarEstadoVinculacion(!1))}refrescarEstadoVinculacion(t){this.pairingToken&&this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:e=>{let i=e?.data?.status??this.pairingStatus;if(this.pairingStatus=i,i==="REVOKED"||i==="EXPIRED"){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null;return}t&&this._tools.MostrarMensaje("success","Vinculaci\xF3n actualizada")},error:e=>{e?.status===404&&(localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null)}})}abrirVinculacionCelular(){return V(this,null,function*(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida actual");return}this._tools.MostrarMensajeLoading();let t=()=>new Promise((e,i)=>{let a=()=>{this._pairing.crearVinculacion().subscribe({next:l=>{let m=l?.data?.token;if(!m)return i(new Error("No token"));this.pairingToken=m,this.pairingStatus=l?.data?.status??null,localStorage.setItem("lcch_capture_pairing_token",m),e(m)},error:l=>i(l)})};if(this.pairingToken){this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:l=>{let m=l?.data?.status??null;if(this.pairingStatus=m,m==="EXPIRED"||m==="REVOKED"){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null,a();return}e(this.pairingToken)},error:l=>{if(l?.status===404){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null,a();return}i(l)}});return}a()});try{let e=yield t(),i=this.router.serializeUrl(this.router.createUrlTree(["/captura-celular",e])),a=window.location.hostname,m=(a==="localhost"||a==="127.0.0.1")&&D.frontendPublicBaseUrl?D.frontendPublicBaseUrl:document.baseURI;this.pairingUrl=new URL(i,m).toString();try{this.pairingQrDataUrl=yield Mt.toDataURL(this.pairingUrl,{width:240,margin:1})}catch{this.pairingQrDataUrl=null}this.modalVincularCelularRef=this._tools.openModal(this.modalVincularCelular,"md"),this.modalVincularCelularRef.result.finally(()=>{this.detenerPollingVinculacion()}),this.iniciarPollingVinculacion(),this._tools.MostrarMensajeSuccess()}catch(e){console.log("ERROR creando vinculaci\xF3n",e),this._tools.MostrarMensajeError()}})}iniciarPollingVinculacion(){this.detenerPollingVinculacion(),this.pairingToken&&(this.pairingIntervalId=setInterval(()=>{this.pairingToken&&this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:t=>{let e=t?.data?.status;this.pairingStatus=e??this.pairingStatus,e==="LINKED"&&this.detenerPollingVinculacion()},error:()=>{}})},2e3))}detenerPollingVinculacion(){this.pairingIntervalId&&(clearInterval(this.pairingIntervalId),this.pairingIntervalId=null)}iniciarCapturaFotoPorCelular(){return V(this,null,function*(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida actual");return}if(!this.pairingToken||this.pairingStatus!=="LINKED"){this._tools.MostrarMensaje("info","Primero vincule el celular (QR)"),yield this.abrirVinculacionCelular();return}this._tools.MostrarMensajeLoading();let t=this.newestudiantesifas.get("id")?.value?Number(this.newestudiantesifas.get("id")?.value):null;this._pairing.solicitarCaptura(this.pairingToken,t,"Foto").subscribe({next:e=>{let i=e?.data?.token;if(!i){this._tools.MostrarMensajeError();return}this.capturaToken=i,this.capturaStatus=e?.data?.status??"PENDING",this.modalEsperaFotoCelularRef=this._tools.openModal(this.modalEsperaFotoCelular,"md"),this.modalEsperaFotoCelularRef.result.finally(()=>{this.cancelarEsperaCaptura(!0)}),this.iniciarPollingCaptura(),this._tools.MostrarMensajeSuccess()},error:e=>{console.log("ERROR solicitando captura",e),this._tools.MostrarMensajeError()}})})}iniciarPollingCaptura(){this.detenerPollingCaptura(),this.capturaToken&&(this.capturaIntervalId=setInterval(()=>{this.capturaToken&&this._capture.estadoSesion(this.capturaToken).subscribe({next:t=>{let e=t?.data?.status,i=t?.data?.file_path;if(this.capturaStatus=e??this.capturaStatus,e==="UPLOADED"&&i){let a=this.fotoTempPath;this.newestudiantesifas.patchValue({Foto:i}),this.fotoTempPath=i,a&&a!==i&&a!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(a),this.isUploadingFoto=!1,this.uploadProgressFoto=0,this.detenerPollingCaptura(),this.modalEsperaFotoCelularRef?.close(),this._tools.MostrarMensaje("success","Foto recibida desde el celular")}},error:()=>{}})},2e3))}detenerPollingCaptura(){this.capturaIntervalId&&(clearInterval(this.capturaIntervalId),this.capturaIntervalId=null)}cancelarEsperaCaptura(t=!1){let e=this.capturaStatus;this.detenerPollingCaptura(),this.capturaStatus=null,this.capturaToken=null,this.pairingToken&&e!=="UPLOADED"&&this._pairing.cancelarCaptura(this.pairingToken).subscribe({next:()=>{t||this._tools.MostrarMensaje("info","Espera cancelada")},error:()=>{}})}abrirSelectorFoto(t){t.click()}onFotoDragOver(t){t.preventDefault(),this.isDraggingFoto=!0}onFotoDragLeave(t){t.preventDefault(),this.isDraggingFoto=!1}onFotoDrop(t){t.preventDefault(),this.isDraggingFoto=!1;let e=t.dataTransfer?.files;e&&this.handleFotoFiles(e)}onFotoFileSelected(t){let e=t.target,i=e.files;i&&this.handleFotoFiles(i),e.value=""}handleFotoFiles(t){let e=t.item(0);e&&(t.length>1&&this._tools.MostrarMensaje("warning","Solo se permite 1 archivo"),this.subirFoto(e))}subirFoto(t){this.isUploadingFoto=!0,this.uploadProgressFoto=0,this._tools.SubirArchivo(t,"Foto").subscribe({next:e=>{if(e.type===it.UploadProgress&&e.total){this.uploadProgressFoto=Math.round(e.loaded/e.total*100);return}if(e.type===it.Response){let a=e.body?.filePath;if(a){let l=this.fotoTempPath;this.newestudiantesifas.patchValue({Foto:a}),this.fotoTempPath=a,l&&l!==a&&l!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(l)}this.isUploadingFoto=!1}},error:e=>{console.error("Error subiendo foto",e),this.isUploadingFoto=!1,this.uploadProgressFoto=0,this._tools.MostrarMensajeError()}})}limpiarFotoTemporalSiCorresponde(){this.fotoTempPath&&this.fotoTempPath!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(this.fotoTempPath),this.fotoTempPath=null,this.fotoAnteriorPath=null,this.isDraggingFoto=!1,this.isUploadingFoto=!1,this.uploadProgressFoto=0}Cargarestudiantesifas(){this.isLoadingestudiantesifas=!0;let t={page:this.paginaestudiantesifas,per_page:this.pageSizeestudiantesifas,search:this.filtertxtestudiantesifas,search_mode:"any",sort_by:this.sortByColumnestudiantesifas,sort_dir:this.sortDirestudiantesifas};this._est.Obtenerestudiantesifas(t).subscribe({next:e=>{console.log("data estudiantes",e.data),this.estudiantesifas=e.data||[],this.collectionSizeestudiantesifas=e?.meta?.total??this.estudiantesifas.length;let i=e?.meta?.from;this.rowIndexBaseestudiantesifas=typeof i=="number"&&i>0?i-1:0,this.isLoadingestudiantesifas=!1},error:e=>{console.error("Error al cargar estudiantesifas",e),this.estudiantesifas=[],this.collectionSizeestudiantesifas=0,this.rowIndexBaseestudiantesifas=0,this.isLoadingestudiantesifas=!1}})}AgregarModificarestudiantesifas(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida de la foto");return}if(this.newestudiantesifas.invalid){this.ValidacionTodoElementoestudiantesifas(),this._tools.MostrarMensajeFrmIncompleto(),this.AnimacionCargabtnModalestudiantesifas=!1;return}else{this.AnimarCargaTablaestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!0,this._tools.MostrarMensajeLoading(),this.newestudiantesifasAnteriorAccion.setValue(this.newestudiantesifas.value);let t=this.newestudiantesifas.controls.id.value;console.log("INFO A PROCESAR",this.newestudiantesifas.value);let e=this.newestudiantesifas.get("Foto")?.value??null,i=this.fotoAnteriorPath;t?this._est.Modificarestudiantesifas(this.newestudiantesifas.value,this.newestudiantesifas.value.id).subscribe(a=>{console.log("SE MODIFICO CORRECTAMENTE estudiantesifas",a.data),i&&e&&i!==e&&this._tools.EliminarArchivo(i),this.Cargarestudiantesifas(),this.fotoTempPath=null,this.fotoAnteriorPath=null,this.resetestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!1,this._tools.MostrarMensajeSuccess()},a=>{console.log("ERROR AL MODIFICAR estudiantesifas",a),this.AnimacionCargabtnModalestudiantesifas=!1,this._tools.MostrarMensajeError()}):this._est.Agregarestudiantesifas(this.newestudiantesifas.value).subscribe(a=>{console.log("SE A\xD1ADIO CORRECTAMENTE estudiantesifas",a.data),this.Cargarestudiantesifas(),this.fotoTempPath=null,this.fotoAnteriorPath=null,this.resetestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!1,this._tools.MostrarMensajeSuccess()},a=>{console.log("ERROR AL A\xD1ADIR estudiantesifas",a),this.AnimacionCargabtnModalestudiantesifas=!1,this._tools.MostrarMensajeError()})}}Seleccionarestudiantesifas(t){if(this._tools.MostrarMensajeLoading(),t){if(!this.estudiantesifas.find(i=>i.id===t))return;this._est.Seleccionarestudiantesifas(t).subscribe(i=>{Object.keys(this.newestudiantesifas.controls).forEach(a=>{this.newestudiantesifas.controls[a].setValue(i.data[a])}),console.log("SELECCION DE estudiantesifas EXITOSA",this.newestudiantesifas.value),this.newestudiantesifasAnteriorAccion.setValue(this.newestudiantesifas.value),this.fotoAnteriorPath=this.newestudiantesifas.get("Foto")?.value??null,this.fotoTempPath=null,this.isUploadingFoto=!1,this.uploadProgressFoto=0,this.modalGestionestudiantesifasRef=this._tools.openModal(this.modalgestionestudiantesifas,"xl"),this._tools.MostrarMensajeSuccess()},i=>{console.log("ERROR AL SELECCIONAR estudiantesifas",i),this._tools.MostrarMensajeError()})}}Eliminarestudiantesifas(t){this._tools.mostrarMensajeConfirm("\xBFSEGURO QUE DESEA ELIMINAR?","SE ELIMINARA EL DATO Y NO SE PODR\xC1 RECUPERAR EL DATO","warning","SI, ESTOY SEGURO","NO").then(e=>{e&&(this._tools.MostrarMensajeLoading(),this._est.Eliminarestudiantesifas(t).subscribe(i=>{console.log(i.data),this.Cargarestudiantesifas(),this._tools.MostrarMensajeSuccess()},i=>{console.log("ERROR AL ELIMINAR estudiantesifas",i),this._tools.MostrarMensajeError()}))})}resetestudiantesifas(){this.limpiarFotoTemporalSiCorresponde(),this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this._tools.closeModal(this.modalGestionestudiantesifasRef)}AutoCompletarLastestudiantesifas(){this.newestudiantesifas.setValue(this.newestudiantesifasAnteriorAccion.value),this.newestudiantesifas.patchValue({id:0}),console.log("listo",this.newestudiantesifas.value)}AnimarCargaTablaestudiantesifas(){this.estudiantesifas=[],this.isLoadingestudiantesifas=!0}ValidacionestudiantesifasxElemento(t){return this._tools.obtenerValidationClass(this.newestudiantesifas,t)}ValidacionTodoElementoestudiantesifas(){Object.values(this.newestudiantesifas.controls).forEach(t=>{t.markAsTouched(),t.markAsDirty()})}onPageSizeChangeestudiantesifas(){this.paginaestudiantesifas=1,this.Cargarestudiantesifas()}onPageChangeestudiantesifas(t){this.paginaestudiantesifas=t,this.Cargarestudiantesifas()}onSearchChangeestudiantesifas(){this.estudiantesifas=[],this.paginaestudiantesifas=1,this.Cargarestudiantesifas()}escapeHtml(t){return(t??"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}highlightCell(t){let e=(t??"").toString(),i=(this.filtertxtestudiantesifas??"").toString().trim();if(!i)return this.escapeHtml(e);let a=i.split(/\s+/).map(x=>x.trim()).filter(Boolean).sort((x,C)=>C.length-x.length);if(a.length===0)return this.escapeHtml(e);let l=this.escapeHtml(e),m=a.map(x=>this.escapeRegExp(x)).join("|"),v=new RegExp(m,"gi");return l.replace(v,x=>`<mark class="bg-warning text-dark fw-bold px-1 rounded">${x}</mark>`)}sortByestudiantesifas(t,e){e.preventDefault(),this.sortByColumnestudiantesifas===t?this.sortDirestudiantesifas=this.sortDirestudiantesifas==="asc"?"desc":"asc":(this.sortByColumnestudiantesifas=t,this.sortDirestudiantesifas="asc"),this.paginaestudiantesifas=1,this.Cargarestudiantesifas()}isSortedestudiantesifas(t){return this.sortByColumnestudiantesifas===t}getSortDirestudiantesifas(t){return this.sortByColumnestudiantesifas===t?this.sortDirestudiantesifas:null}VisualizarInfoEstudiante(t){this.estudianteSeleccionadoId=t;let e=Array.isArray(this.estudiantesifas)?this.estudiantesifas.find(v=>Number(v?.id)===Number(t)):null,i=(e?.Ap_Paterno??"").toString().trim(),a=(e?.Ap_Materno??"").toString().trim(),l=(e?.Nombre??"").toString().trim(),m=`${i} ${a} ${l}`.replace(/\s+/g," ").trim();this.estudianteSeleccionadoNombre=m||`#${t}`,this.estudianteSeleccionadoFoto=e?.Foto??null,this.estudianteSeleccionadoSexo=e?.Sexo??null}closeMenu(){this._tools.close()}abrirMenuestudiantesifas(t,e){t.preventDefault(),t.stopPropagation(),console.log("aS",e);let i=[{label:"\u270F Editar",action:()=>this.Seleccionarestudiantesifas(e.id)},{label:"\u{1F5D1}\uFE0F Eliminar",action:()=>this.Eliminarestudiantesifas(e.id)}];this._tools.open(t.clientX,t.clientY,i)}};Ee.\u0275fac=function(e){return new(e||Ee)(y(Q),y(Be),y($e),y(ge),y(he),y(Me))},Ee.\u0275cmp=se({type:Ee,selectors:[["app-estudiantesifas"]],viewQuery:function(e,i){if(e&1&&(U(In,7),U(wn,7),U(An,7)),e&2){let a;z(a=H())&&(i.modalVincularCelular=a.first),z(a=H())&&(i.modalEsperaFotoCelular=a.first),z(a=H())&&(i.modalgestionestudiantesifas=a.first)}},hostBindings:function(e,i){e&1&&g("click",function(){return i.closeMenu()},Se)},standalone:!1,decls:74,vars:26,consts:[["modalgestionestudiantesifas",""],["modalVincularCelular",""],["modalEsperaFotoCelular",""],["modalOtroComponenteinfoestudiantes",""],["sinFotoEst",""],["fotoInputEst",""],[1,"container","mt-4"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"lead","text-secondary","subtitulosGlobales"],[1,"button","col-sm-3","d-flex","justify-content-start"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","width","30px","height","30px"],["width","50px","height","50px",3,"options"],[1,"dir-part"],[1,"col-sm-3","ms-auto","d-flex","justify-content-end"],["title","PRESIONAR TECLA ENTER PARA REALIZAR BUSQUEDA",1,"input-group"],[1,"input-group-text"],["width","30px","height","30px",3,"options"],[1,"form-floating"],["type","text","placeholder","Buscar","title","PRESIONAR TECLA ENTER PARA REALIZAR BUSQUEDA",1,"form-control",3,"keyup.enter","ngModelChange","ngModel"],[1,"mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-sm","align-middle"],[1,""],[1,"text-center"],[2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["class","bi",3,"ngClass",4,"ngIf"],[4,"ngIf"],["style","cursor: pointer;",3,"contextmenu",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["previousLabel","Anterior","nextLabel","Siguiente",3,"pageChange","page","collectionSize","pageSize","maxSize","rotate","ellipses","boundaryLinks"],[1,"form-select",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","context-menu",3,"ngStyle",4,"ngIf"],[1,"bi",3,"ngClass"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[2,"cursor","pointer",3,"contextmenu"],[3,"innerHTML"],[1,"text-center","d-flex","justify-content-center","align-items-center",2,"gap","5px"],["title","Visualizar Inscripciones",1,"btn","btn-outline-light","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src",4,"ngIf"],["width","30px","height","35px",3,"options",4,"ngIf"],["title","Modificar informaci\xF3n",1,"btn","btn-outline-warning","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["title","Eliminar informaci\xF3n",1,"btn","btn-outline-danger","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src"],["width","30px","height","35px",3,"options"],[3,"value"],[1,"modal-header"],[1,"modal-title"],["type","button","title","cerrar",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup"],[1,"mb-3","col-sm-6"],[1,"form-label"],[4,"ngIf","ngIfElse"],[1,"border","rounded","p-3","text-center",3,"dragover","dragleave","drop","click"],[1,"text-muted"],["class","mt-2",4,"ngIf"],["type","file","accept","image/*",1,"d-none",3,"change"],[1,"mt-2","d-flex","justify-content-start"],["type","button",1,"btn","btn-outline-secondary","btn-sm","me-2",3,"click","disabled"],[1,"badge","align-self-center","me-2",3,"ngClass"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],["class","text-danger small",4,"ngIf"],[1,"form-floating","mb-3","col-sm-3"],["type","text","placeholder","","formControlName","Ap_Paterno",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"invalid-feedback"],["type","text","placeholder","","formControlName","Ap_Materno",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-6"],["type","text","placeholder","","formControlName","Nombre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","CI",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-2"],["formControlName","Expedido",1,"form-control",3,"ngClass"],["disabled","",3,"value"],[3,"value","disabled",4,"ngFor","ngForOf"],["formControlName","Sexo",1,"form-control",3,"ngClass"],["type","date","placeholder","","formControlName","FechaNac",1,"form-control",3,"change","ngClass"],["type","number","placeholder","","formControlName","Edad","readonly","","tabindex","-1",1,"form-control",2,"pointer-events","none","background-color","#e9ecef",3,"ngClass"],["type","text","placeholder","","formControlName","Celular",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-5"],["type","text","placeholder","","formControlName","Direccion",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-4"],["type","text","placeholder","","formControlName","Correo",1,"form-control",3,"ngClass"],[1,"mb-3","col-sm-4"],[1,"d-flex","align-items-end",2,"gap","10px"],[1,"form-floating","flex-grow-1"],["type","text","placeholder","","formControlName","Usuario",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","button","title","Generar Usuario","class","btn mouse-dir secondary d-flex align-items-center justify-content-center p-0","style","width: 58px; height: 58px;",3,"click",4,"ngIf"],["class","invalid-feedback d-block",4,"ngIf"],["placeholder","","formControlName","Contrasenia",1,"form-control",3,"type","ngClass"],["type","button","title","Mostrar/Ocultar Contrasenia","class","btn mouse-dir secondary d-flex align-items-center justify-content-center p-0","style","width: 58px; height: 58px;",3,"click",4,"ngIf"],["formControlName","Estado",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","Nombre_Padre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","OcupacionP",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","NumCelP",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Nombre_Madre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","OcupacionM",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","NumCelM",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","NColegio",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","TipoColegio",1,"form-control",3,"ngClass"],["formControlName","CNivel",1,"form-control",3,"ngClass"],["formControlName","CGrado",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-12"],["placeholder","","formControlName","InformacionCompartidaIFAS",1,"form-control",2,"text-transform","uppercase","height","100px",3,"change","ngClass"],[1,"modal-footer"],["class","button d-flex justify-content-start",4,"ngIf"],[1,"button","me-2"],["title","Cancelar y cerrar","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],[1,"button"],["class","btn mouse-dir success","title","Procesando informaci\xF3n",3,"disabled","click",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;","title","Accionar",3,"disabled","click",4,"ngIf"],["alt","Foto",1,"img-thumbnail",2,"width","140px","height","140px","object-fit","cover",3,"src"],[1,"mt-2"],[1,"progress"],["role","progressbar",1,"progress-bar"],[1,"text-danger","small"],[3,"value","disabled"],["type","button","title","Generar Usuario",1,"btn","mouse-dir","secondary","d-flex","align-items-center","justify-content-center","p-0",2,"width","58px","height","58px",3,"click"],["width","70px","height","70px",3,"options"],[1,"invalid-feedback","d-block"],["type","button","title","Mostrar/Ocultar Contrasenia",1,"btn","mouse-dir","secondary","d-flex","align-items-center","justify-content-center","p-0",2,"width","58px","height","58px",3,"click"],[1,"button","d-flex","justify-content-start"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Cancelar y cerrar",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Procesando informaci\xF3n",1,"btn","mouse-dir","success",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["title","Accionar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],[1,"mb-2","text-muted"],["class","d-flex justify-content-center",4,"ngIf"],[1,"mt-3"],[1,"small","text-muted"],[1,"fw-semibold"],["class","mt-3",4,"ngIf"],[1,"d-flex","justify-content-center"],["alt","QR",2,"max-width","260px","width","100%",3,"src"],["target","_blank","rel","noopener",3,"href"],[1,"mt-3","d-flex","justify-content-end"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"context-menu",3,"ngStyle"],["class","context-item",3,"click",4,"ngFor","ngForOf"],[1,"context-item",3,"click"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[3,"modo","estudianteId","nombreEstudiante","fotoEstudiante","sexoEstudiante"]],template:function(e,i){if(e&1){let a=b();o(0,"div",6)(1,"div",7)(2,"div",8)(3,"h1",9),c(4,"Gesti\xF3n de la Informaci\xF3n Personal de los estudiantes"),n(),o(5,"p",10),c(6,"Administra la informaci\xF3n Personal de los estudiantes de manera sencilla y eficiente"),n()()()(),o(7,"div",7)(8,"div",11)(9,"button",12),g("click",function(){return p(a),f(i.abrirModalNuevoEstudiantesifas())}),o(10,"span",13),h(11,"ng-lottie",14),n(),o(12,"span"),c(13,"A\xF1adir estudiantesifas "),n(),h(14,"span",15),n()(),o(15,"div",16)(16,"div",17)(17,"span",18),h(18,"ng-lottie",19),n(),o(19,"div",20)(20,"input",21),g("keyup.enter",function(){return p(a),f(i.onSearchChangeestudiantesifas())}),N("ngModelChange",function(m){return p(a),O(i.filtertxtestudiantesifas,m)||(i.filtertxtestudiantesifas=m),f(m)}),n(),o(21,"label"),c(22,"Buscar"),n()()()()(),o(23,"div",22)(24,"div",23)(25,"table",24)(26,"thead",25)(27,"tr")(28,"th",26),c(29,"#"),n(),o(30,"th",27),g("click",function(m){return p(a),f(i.sortByestudiantesifas("Ap_Paterno",m))}),c(31," Ap_Paterno "),_(32,Vn,1,4,"i",28),n(),o(33,"th",27),g("click",function(m){return p(a),f(i.sortByestudiantesifas("Ap_Materno",m))}),c(34," Ap_Materno "),_(35,Pn,1,4,"i",28),n(),o(36,"th",27),g("click",function(m){return p(a),f(i.sortByestudiantesifas("Nombre",m))}),c(37," Nombre "),_(38,kn,1,4,"i",28),n(),o(39,"th",27),g("click",function(m){return p(a),f(i.sortByestudiantesifas("CI",m))}),c(40," CI "),_(41,Fn,1,4,"i",28),n(),o(42,"th",27),g("click",function(m){return p(a),f(i.sortByestudiantesifas("Expedido",m))}),c(43," Exp. "),_(44,On,1,4,"i",28),n(),o(45,"th",27),g("click",function(m){return p(a),f(i.sortByestudiantesifas("Sexo",m))}),c(46," Sexo "),_(47,Nn,1,4,"i",28),n(),o(48,"th",27),g("click",function(m){return p(a),f(i.sortByestudiantesifas("Edad",m))}),c(49," Edad "),_(50,Dn,1,4,"i",28),n(),o(51,"th",27),g("click",function(m){return p(a),f(i.sortByestudiantesifas("Estado",m))}),c(52," Estado "),_(53,Rn,1,4,"i",28),n(),o(54,"th",26),c(55,"ACCIONES"),n()()(),o(56,"tbody"),_(57,Ln,5,1,"tr",29)(58,Bn,3,1,"tr",29)(59,qn,29,15,"tr",30),n()()(),o(60,"div",31)(61,"ngb-pagination",32),N("pageChange",function(m){return p(a),O(i.paginaestudiantesifas,m)||(i.paginaestudiantesifas=m),f(m)}),g("pageChange",function(m){return p(a),f(i.onPageChangeestudiantesifas(m))}),n(),o(62,"select",33),N("ngModelChange",function(m){return p(a),O(i.pageSizeestudiantesifas,m)||(i.pageSizeestudiantesifas=m),f(m)}),g("change",function(){return p(a),f(i.onPageSizeChangeestudiantesifas())}),_(63,Qn,2,2,"option",34),n()()(),_(64,pa,217,58,"ng-template",null,0,k)(66,ga,14,3,"ng-template",null,1,k)(68,ha,15,1,"ng-template",null,2,k)(70,va,5,11,"div",35),K(71,"async"),_(72,Ea,6,5,"ng-template",null,3,k)}if(e&2){let a;r(11),d("options",i._tools.optionsAdicionar),r(7),d("options",i._tools.optionslupa),r(2),F("ngModel",i.filtertxtestudiantesifas),r(12),d("ngIf",i.isSortedestudiantesifas("Ap_Paterno")),r(3),d("ngIf",i.isSortedestudiantesifas("Ap_Materno")),r(3),d("ngIf",i.isSortedestudiantesifas("Nombre")),r(3),d("ngIf",i.isSortedestudiantesifas("CI")),r(3),d("ngIf",i.isSortedestudiantesifas("Expedido")),r(3),d("ngIf",i.isSortedestudiantesifas("Sexo")),r(3),d("ngIf",i.isSortedestudiantesifas("Edad")),r(3),d("ngIf",i.isSortedestudiantesifas("Estado")),r(4),d("ngIf",i.isLoadingestudiantesifas),r(),d("ngIf",!i.isLoadingestudiantesifas&&(!i.estudiantesifas||i.estudiantesifas.length===0)),r(),d("ngForOf",i.estudiantesifas),r(2),F("page",i.paginaestudiantesifas),d("collectionSize",i.collectionSizeestudiantesifas)("pageSize",i.pageSizeestudiantesifas)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),r(),F("ngModel",i.pageSizeestudiantesifas),r(),d("ngForOf",i.pageSizeOptionsestudiantesifas),r(7),d("ngIf",(a=X(71,24,i.menuStateestudiantesifas$))==null?null:a.visible)}},dependencies:[re,le,ce,rt,Fe,fe,_e,Pe,Oe,pe,ue,ke,me,Ne,De,Re,Ve,ve,lt],encapsulation:2});var ze=Ee;var B=Ye(Nt());var ba=(s,t)=>({border:s,"border-primary":t}),Vt=s=>({checked:s,"custom-border":!0});function Ca(s,t){if(s&1&&(o(0,"option",15),c(1),n()),s&2){let e=t.$implicit;d("ngValue",e.id),r(),E(e.Anio)}}function Sa(s,t){if(s&1&&(o(0,"option",15),c(1),n()),s&2){let e=t.$implicit;d("ngValue",e.key),r(),E(e.label)}}function ya(s,t){s&1&&(o(0,"small",60),c(1,"Cargando..."),n())}function Ia(s,t){if(s&1){let e=b();o(0,"div",61)(1,"button",62),g("click",function(){p(e);let a=u(2);return f(a.pendPrev())}),c(2,"Anterior"),n(),o(3,"small",60),c(4),n(),o(5,"button",62),g("click",function(){p(e);let a=u(2);return f(a.pendNext())}),c(6,"Siguiente"),n()()}if(s&2){let e=u(2);r(),d("disabled",!e.pendTienePrev()||e.isLoadingPendientes),r(3),Ae(" P\xE1gina ",e.pendMeta.current_page," / ",e.pendMeta.last_page," (",e.pendMeta.total," resultados) "),r(),d("disabled",!e.pendTieneNext()||e.isLoadingPendientes)}}function wa(s,t){s&1&&(o(0,"th"),c(1,"Instituci\xF3n"),n())}function Aa(s,t){if(s&1&&(o(0,"td"),c(1),n()),s&2){let e=u().$implicit;r(),E(e.NombreInstitucion||"-")}}function Ta(s,t){if(s&1){let e=b();o(0,"tr")(1,"td"),c(2),n(),o(3,"td"),c(4),n(),_(5,Aa,2,1,"td",48),o(6,"td"),c(7),n(),o(8,"td"),c(9),n(),o(10,"td"),c(11),n(),o(12,"td"),c(13),n(),o(14,"td"),c(15),n(),o(16,"td"),c(17),n(),o(18,"td")(19,"button",63),g("click",function(){let a=p(e).$implicit,l=u(2);return f(l.seleccionarPendiente(a))}),c(20," Asignar "),n()()()}if(s&2){let e=t.$implicit,i=u(2);r(2),A("#",e.id),r(2),E(e.FechInsc||"-"),r(),d("ngIf",i.esSuperAdmin),r(2),Ae("",e.Ap_Paterno," ",e.Ap_Materno," ",e.Nombre),r(2),E(e.CI||"-"),r(2),E(e.Matricula||"-"),r(2),E(e.Curso_Solicitado||"-"),r(2),E(e.Paralelo_Solicitado||"-"),r(2),E(e.Turno||"-")}}function Ma(s,t){if(s&1&&(o(0,"tr")(1,"td",64),c(2,"Sin registros"),n()()),s&2){let e=u(2);r(),q("colspan",e.esSuperAdmin?10:9)}}function Va(s,t){if(s&1){let e=b();o(0,"div",49)(1,"div",50)(2,"span"),c(3,"Inscritos pendientes de asignaci\xF3n (sin materias asignadas)"),n(),_(4,ya,2,0,"small",34),n(),o(5,"div",7)(6,"div",24)(7,"div",51)(8,"div",10)(9,"span",11),h(10,"i",35),n(),o(11,"div",13)(12,"input",52),g("input",function(a){p(e);let l=u();return f(l.filterPendientes=a.target.value)})("keyup.enter",function(){p(e);let a=u();return f(a.cargarPendientes(1))}),n(),o(13,"label"),c(14,"Buscar (nombre/CI/matr\xEDcula/curso/paralelo/turno)"),n()(),o(15,"button",53),g("click",function(){p(e);let a=u();return f(a.cargarPendientes(1))}),c(16," Buscar "),n()(),_(17,Ia,7,5,"div",39),n(),o(18,"div",27)(19,"label",54),c(20,"Total pendientes"),n(),h(21,"input",55),n()()(),o(22,"div",56)(23,"table",57)(24,"thead")(25,"tr")(26,"th"),c(27,"Inscripci\xF3n"),n(),o(28,"th"),c(29,"Fecha inscripci\xF3n"),n(),_(30,wa,2,0,"th",48),o(31,"th"),c(32,"Estudiante"),n(),o(33,"th"),c(34,"CI"),n(),o(35,"th"),c(36,"Matr\xEDcula"),n(),o(37,"th"),c(38,"Curso solicitado"),n(),o(39,"th"),c(40,"Paralelo"),n(),o(41,"th"),c(42,"Turno"),n(),o(43,"th",58),c(44,"Acci\xF3n"),n()()(),o(45,"tbody"),_(46,Ta,21,11,"tr",59)(47,Ma,3,1,"tr",48),n()()()()}if(s&2){let e=u();r(4),d("ngIf",e.isLoadingPendientes),r(8),d("value",e.filterPendientes),r(3),d("disabled",e.isLoadingPendientes),r(2),d("ngIf",e.pendMeta),r(4),d("value",(e.pendMeta==null?null:e.pendMeta.total)||0),r(9),d("ngIf",e.esSuperAdmin),r(16),d("ngForOf",e.pendientes),r(),d("ngIf",e.pendientes.length===0)}}function Pa(s,t){s&1&&(o(0,"small",60),c(1," Selecciona A\xF1o para buscar por gesti\xF3n. "),n())}function ka(s,t){s&1&&(o(0,"small",65),c(1,"Buscando..."),n())}function Fa(s,t){if(s&1){let e=b();o(0,"div",61)(1,"button",66),g("click",function(){p(e);let a=u();return f(a.estPrev())}),c(2,"Anterior"),n(),o(3,"small",60),c(4),n(),o(5,"button",66),g("click",function(){p(e);let a=u();return f(a.estNext())}),c(6,"Siguiente"),n()()}if(s&2){let e=u();r(),d("disabled",!e.estTienePrev()||e.isLoadingEstudiantes),r(3),Ae(" P\xE1gina ",e.estMeta.current_page," / ",e.estMeta.last_page," (",e.estMeta.total," resultados) "),r(),d("disabled",!e.estTieneNext()||e.isLoadingEstudiantes)}}function Oa(s,t){if(s&1&&(o(0,"span"),c(1,"CI: "),h(2,"span",67),n()),s&2){let e=u().$implicit,i=u();r(2),d("innerHTML",i.highlightHtml(e.ci),I)}}function Na(s,t){if(s&1&&(o(0,"span"),c(1," \xA0|\xA0 Matr\xEDcula: "),h(2,"span",67),n()),s&2){let e=u().$implicit,i=u();r(2),d("innerHTML",i.highlightHtml(e.matricula),I)}}function Da(s,t){if(s&1&&h(0,"span",67),s&2){let e=u().$implicit,i=u();d("innerHTML",i.highlightHtml(i.formatoCursoParalelo(e)),I)}}function Ra(s,t){if(s&1&&(o(0,"div",68),c(1),n()),s&2){let e=u().$implicit;r(),A("Instituci\xF3n: ",e.institucionNombre)}}function La(s,t){if(s&1&&(o(0,"div",68),c(1),n()),s&2){let e=u().$implicit;r(),A("Fecha: ",e.fechInsc)}}function Ba(s,t){if(s&1){let e=b();o(0,"button",66),g("click",function(){let a=p(e).$implicit,l=u();return f(l.seleccionarEstudiante(a))}),h(1,"div",67),o(2,"div",68),_(3,Oa,3,1,"span",48)(4,Na,3,1,"span",48),n(),o(5,"div",69)(6,"span",70),c(7),n(),_(8,Da,1,1,"span",71),n(),_(9,Ra,2,1,"div",72)(10,La,2,1,"div",72),n()}if(s&2){let e=t.$implicit,i=u();$("active",i.selectedSearchInfoId&&e.infoId&&i.selectedSearchInfoId===e.infoId),d("disabled",i.isLoadingEstudiantes),r(),d("innerHTML",i.highlightHtml(e.nombre),I),r(2),d("ngIf",e.ci),r(),d("ngIf",e.matricula),r(3),A("Asignaciones: ",e.cantAsignaciones??0),r(),d("ngIf",i.formatoCursoParalelo(e)),r(),d("ngIf",i.esSuperAdmin&&e.institucionNombre),r(),d("ngIf",e.fechInsc)}}function $a(s,t){s&1&&(o(0,"small",60),c(1," Busca y selecciona un estudiante para continuar. "),n())}function ja(s,t){if(s&1&&(o(0,"span",76),c(1),n()),s&2){let e=t.$implicit;r(),E(e)}}function Ua(s,t){if(s&1&&(Ie(0),o(1,"small",60),c(2," Tiene Materias Asignadas en:"),n(),_(3,ja,2,1,"span",75),we()),s&2){let e=u(2);r(3),d("ngForOf",e.cursosConMateriasAsignadas())}}function za(s,t){s&1&&(o(0,"small",60),c(1,"Sin materias asignadas (en sus inscripciones)"),n())}function Ha(s,t){if(s&1&&(o(0,"div",73)(1,"div",42)(2,"h3",65),c(3," Estudiante Seleccionado: "),o(4,"b"),c(5),n()()(),_(6,Ua,4,1,"ng-container",74)(7,za,2,0,"ng-template",null,0,k),n()),s&2){let e=G(8),i=u();r(5),E(i.estudianteSeleccionado.nombre),r(),d("ngIf",i.cursosConMateriasAsignadas().length>0)("ngIfElse",e)}}function Ga(s,t){s&1&&(o(0,"small",60),c(1,"Cargando..."),n())}function qa(s,t){if(s&1){let e=b();o(0,"button",66),g("click",function(){let a=p(e).$implicit,l=u(2);return f(l.seleccionarInscripcion(a))}),c(1),n()}if(s&2){let e=t.$implicit,i=u(2);$("active",(i.inscripcionSeleccionada==null?null:i.inscripcionSeleccionada.id)===e.id),d("disabled",i.isLoadingInscripciones),r(),et(" ",e.Curso_Solicitado||"SIN CURSO"," ",e.Paralelo_Solicitado?"- "+e.Paralelo_Solicitado:""," ")}}function Qa(s,t){s&1&&(o(0,"small",60),c(1,"Sin inscripciones."),n())}function Wa(s,t){s&1&&(o(0,"h3",60),c(1,"Seleccione una inscripci\xF3n."),n())}function Ka(s,t){if(s&1&&(o(0,"h4",80),c(1," CURSO SOLICITADO: "),o(2,"b"),c(3),n()()),s&2){let e=u(2);r(3),et("",e.inscripcionSeleccionada.Curso_Solicitado||"-"," ",e.inscripcionSeleccionada.Paralelo_Solicitado?"- "+e.inscripcionSeleccionada.Paralelo_Solicitado:"")}}function Xa(s,t){if(s&1&&(o(0,"div")(1,"div",77)(2,"h5",78),c(3,"Inscripciones"),n(),_(4,Ga,2,0,"small",34),n(),o(5,"div",40),_(6,qa,2,5,"button",41),n(),o(7,"div",42),_(8,Qa,2,0,"small",34)(9,Wa,2,0,"h3",34)(10,Ka,4,2,"h4",79),n()()),s&2){let e=u();r(4),d("ngIf",e.isLoadingInscripciones),r(2),d("ngForOf",e.inscripciones)("ngForTrackBy",e.trackById),r(2),d("ngIf",!e.isLoadingInscripciones&&e.inscripciones.length===0),r(),d("ngIf",!e.isLoadingInscripciones&&e.inscripciones.length>0&&!e.inscripcionSeleccionada),r(),d("ngIf",e.inscripcionSeleccionada)}}function Ya(s,t){s&1&&h(0,"hr")}function Za(s,t){if(s&1){let e=b();o(0,"button",22),g("click",function(){let a=p(e).$implicit,l=u(3);return f(l.toggleLvlCurso(a))}),c(1),n()}if(s&2){let e=t.$implicit,i=u(3);$("active",i.isLvlCursoSeleccionado(e)),r(),A(" ",e," ")}}function Ja(s,t){if(s&1){let e=b();o(0,"button",98),g("click",function(){let a=p(e).$implicit,l=u(3);return f(l.toggleParalelo(a))}),c(1),n()}if(s&2){let e=t.$implicit,i=u(3);$("active",i.isParaleloSeleccionado(e)),r(),A(" ",e," ")}}function es(s,t){if(s&1){let e=b();o(0,"button",99),g("click",function(){p(e);let a=u(3);return f(a.asignarCursoCompleto())}),c(1," Asignar todo (A\xF1o/Resoluci\xF3n) "),n()}if(s&2){let e=u(3);d("disabled",e.isBulkLoading)}}function ts(s,t){if(s&1){let e=b();o(0,"button",100),g("click",function(){p(e);let a=u(3);return f(a.quitarTodasAsignaciones())}),c(1," Quitar todas "),n()}if(s&2){let e=u(3);d("disabled",e.isBulkLoading)}}function is(s,t){s&1&&(o(0,"span",116),c(1,"Tiene calificaciones"),n())}function ns(s,t){s&1&&(o(0,"span",116),c(1,"Sin calificaciones"),n())}function as(s,t){if(s&1){let e=b();o(0,"div",113)(1,"span")(2,"b"),c(3,"Calificaciones:"),n(),_(4,is,2,0,"span",114)(5,ns,2,0,"span",114),n(),o(6,"button",115),g("click",function(a){p(e);let l=u().$implicit,m=u(5);return f(m.verCalificaciones(l,a))}),c(7," Ver "),n()()}if(s&2){let e=u().$implicit,i=u(5);r(4),d("ngIf",i.tieneCalificaciones(e.id)),r(),d("ngIf",!i.tieneCalificaciones(e.id)),r(),d("disabled",!i.tieneCalificaciones(e.id))}}function ss(s,t){s&1&&(o(0,"div",117)(1,"span",118),c(2,"Cargando..."),n()())}function os(s,t){if(s&1){let e=b();o(0,"div",108)(1,"button",109),g("click",function(a){let l=p(e).$implicit,m=u(5);return f(m.toggleAsignacion(l,a))}),o(2,"span",110),c(3),n(),o(4,"span"),c(5),n()(),_(6,as,8,3,"div",111)(7,ss,3,0,"div",112),n()}if(s&2){let e=t.$implicit,i=u(5);d("ngClass",tt(7,Vt,i.isAsignada(e.id))),r(),d("disabled",i.isLoadingMateria[e.id]),r(),d("ngClass",i.isAsignada(e.id)?"bg-success":"bg-secondary"),r(),A(" ",i.isAsignada(e.id)?"ASIGNADO":"NO"," "),r(2),E((e.sigla?e.sigla+" - ":"")+e.nombre),r(),d("ngIf",i.isAsignada(e.id)),r(),d("ngIf",i.isLoadingMateria[e.id])}}function rs(s,t){if(s&1){let e=b();o(0,"div")(1,"div",101)(2,"h5",102),c(3),n(),o(4,"div",103)(5,"button",104),g("click",function(a){let l=p(e).$implicit,m=u(4);return f(m.asignarCategoriaCompleta(l,a))}),c(6," Asignar este curso "),n(),o(7,"button",105),g("click",function(a){let l=p(e).$implicit,m=u(4);return f(m.quitarCategoriaCompleta(l,a))}),c(8," Quitar este curso "),n()()(),o(9,"div",106),_(10,os,8,9,"div",107),n(),h(11,"hr"),n()}if(s&2){let e=t.$implicit,i=u(4);r(3),E(e),r(2),d("disabled",i.isBulkLoading),r(2),d("disabled",i.isBulkLoading),r(3),d("ngForOf",i.materiasPorCategoria(e))("ngForTrackBy",i.trackById)}}function ls(s,t){if(s&1&&(Ie(0),_(1,rs,12,5,"div",59),we()),s&2){let e=u(3);r(),d("ngForOf",e.categorias())}}function cs(s,t){if(s&1&&(o(0,"span"),c(1),n()),s&2){let e=u().$implicit;r(),E(e.lvlCurso)}}function ds(s,t){if(s&1&&(o(0,"span"),c(1),n()),s&2){let e=u().$implicit;r(),A(" - ",e.paralelo)}}function us(s,t){s&1&&(o(0,"span",116),c(1,"Tiene calificaciones"),n())}function ms(s,t){s&1&&(o(0,"span",116),c(1,"Sin calificaciones"),n())}function ps(s,t){if(s&1){let e=b();o(0,"div",113)(1,"span")(2,"b"),c(3,"Calificaciones:"),n(),_(4,us,2,0,"span",114)(5,ms,2,0,"span",114),n(),o(6,"button",115),g("click",function(a){p(e);let l=u().$implicit,m=u(4);return f(m.verCalificaciones(l,a))}),c(7," Ver "),n()()}if(s&2){let e=u().$implicit,i=u(4);r(4),d("ngIf",i.tieneCalificaciones(e.id)),r(),d("ngIf",!i.tieneCalificaciones(e.id)),r(),d("disabled",!i.tieneCalificaciones(e.id))}}function fs(s,t){s&1&&(o(0,"div",117)(1,"span",118),c(2,"Cargando..."),n()())}function _s(s,t){if(s&1){let e=b();o(0,"div",108)(1,"button",109),g("click",function(a){let l=p(e).$implicit,m=u(4);return f(m.toggleAsignacion(l,a))}),o(2,"span",110),c(3),n(),o(4,"span"),c(5),n()(),o(6,"div",119),_(7,cs,2,1,"span",48)(8,ds,2,1,"span",48),n(),_(9,ps,8,3,"div",111)(10,fs,3,0,"div",112),n()}if(s&2){let e=t.$implicit,i=u(4);d("ngClass",tt(9,Vt,i.isAsignada(e.id))),r(),d("disabled",i.isLoadingMateria[e.id]),r(),d("ngClass",i.isAsignada(e.id)?"bg-success":"bg-secondary"),r(),A(" ",i.isAsignada(e.id)?"ASIGNADO":"NO"," "),r(2),E((e.sigla?e.sigla+" - ":"")+e.nombre),r(2),d("ngIf",e.lvlCurso),r(),d("ngIf",e.paralelo),r(),d("ngIf",i.isAsignada(e.id)),r(),d("ngIf",i.isLoadingMateria[e.id])}}function gs(s,t){if(s&1&&(Ie(0),o(1,"div",106),_(2,_s,11,11,"div",107),n(),we()),s&2){let e=u(3);r(2),d("ngForOf",e.materiasFiltradas())("ngForTrackBy",e.trackById)}}function hs(s,t){if(s&1){let e=b();o(0,"div")(1,"div",82)(2,"div",83)(3,"div",10)(4,"span",11),h(5,"i",84),n(),o(6,"div",13)(7,"input",85),g("input",function(a){p(e);let l=u(2);return f(l.filterMateria=a.target.value)}),n(),o(8,"label"),c(9,"Buscar materia (sigla/nombre/ID)"),n()()()(),o(10,"div",86)(11,"div",87)(12,"input",88),g("change",function(){p(e);let a=u(2);return f(a.toggleModoCategorias())}),n(),o(13,"label",89),c(14,"Con categor\xEDas"),n()(),o(15,"div",87)(16,"input",90),g("change",function(){p(e);let a=u(2);return f(a.onToggleMostrarTodasMaterias())}),n(),o(17,"label",91),c(18,"Mostrar todas (manual)"),n()(),o(19,"div",92)(20,"small",93),c(21,"Cursos:"),n(),_(22,Za,2,3,"button",94),n(),o(23,"div",92)(24,"small",93),c(25,"Paralelos:"),n(),_(26,Ja,2,3,"button",95),n(),_(27,es,2,1,"button",96)(28,ts,2,1,"button",97),n()(),_(29,ls,2,1,"ng-container",48)(30,gs,3,2,"ng-container",48),n()}if(s&2){let e=u(2);r(7),d("value",e.filterMateria),r(5),d("checked",e.modoCategorias),r(4),d("checked",e.mostrarTodasMaterias),r(6),d("ngForOf",e.lvlCursosDetectados()),r(4),d("ngForOf",e.paralelosDetectados()),r(),d("ngIf",!e.modoCategorias),r(),d("ngIf",!e.modoCategorias),r(),d("ngIf",e.modoCategorias),r(),d("ngIf",!e.modoCategorias)}}function xs(s,t){s&1&&(o(0,"tr")(1,"td",122),c(2,"Sin asignaciones"),n()())}function vs(s,t){s&1&&(o(0,"span"),c(1,"Tiene calificaciones"),n())}function Es(s,t){s&1&&(o(0,"span"),c(1,"Sin calificaciones"),n())}function bs(s,t){if(s&1){let e=b();o(0,"tr")(1,"td"),c(2),n(),o(3,"td"),c(4),n(),o(5,"td"),c(6),n(),o(7,"td"),c(8),n(),o(9,"td"),c(10),n(),o(11,"td"),_(12,vs,2,0,"span",48)(13,Es,2,0,"span",48),o(14,"button",123),g("click",function(a){let l=p(e).$implicit,m=u(3);return f(m.verCalificacionesPorId(l.materiaId,a))}),c(15," Ver "),n()(),o(16,"td")(17,"button",100),g("click",function(){let a=p(e).$implicit,l=u(3);return f(l.quitarAsignacionTabla(a.materiaId))}),c(18," Quitar "),n()()()}if(s&2){let e=t.$implicit,i=t.index,a=u(3);r(2),E(i+1),r(2),E(e.estudiante),r(2),E(e.categoria),r(2),E(e.materia),r(2),E(e.paralelo),r(2),d("ngIf",a.tieneCalificaciones(e.materiaId)),r(),d("ngIf",!a.tieneCalificaciones(e.materiaId)),r(),d("disabled",!a.tieneCalificaciones(e.materiaId)),r(3),d("disabled",a.isLoadingMateria[e.materiaId])}}function Cs(s,t){if(s&1&&(o(0,"div",56)(1,"table",120)(2,"thead")(3,"tr")(4,"th"),c(5,"#"),n(),o(6,"th"),c(7,"Estudiante"),n(),o(8,"th"),c(9,"Categoria"),n(),o(10,"th"),c(11,"Materia"),n(),o(12,"th"),c(13,"Paralelo"),n(),o(14,"th"),c(15,"Calificaciones"),n(),o(16,"th"),c(17,"Acci\xF3n"),n()()(),o(18,"tbody",121),_(19,xs,3,0,"tr",48)(20,bs,19,9,"tr",59),n()()()),s&2){let e=u(2);r(19),d("ngIf",e.tablaAsignaciones().length===0),r(),d("ngForOf",e.tablaAsignaciones())}}function Ss(s,t){if(s&1&&(o(0,"div"),_(1,hs,31,9,"div",48)(2,Cs,21,2,"div",81),n()),s&2){let e=u();r(),d("ngIf",!e.ModoBoolean),r(),d("ngIf",e.ModoBoolean)}}var be=class be{constructor(t,e,i,a,l,m,v){this._calif=t;this._carreras=e;this._mat=i;this._est=a;this._info=l;this._anios=m;this._auth=v;this.ModoBoolean=!1;this.filterEstudiante="";this.filterMateria="";this.busquedaAnioScope="mixed";this.selectedSearchInfoId=null;this.mostrarTodasMaterias=!1;this.estudiantes=[];this.estMeta=null;this.estPage=1;this.estPerPage=10;this.isLoadingEstudiantes=!1;this.estudianteSeleccionado=null;this.inscripciones=[];this.inscripcionSeleccionada=null;this.isLoadingInscripciones=!1;this.inscripcionesReqToken=0;this.verPendientes=!1;this.filterPendientes="";this.pendientes=[];this.pendMeta=null;this.pendPage=1;this.pendPerPage=10;this.isLoadingPendientes=!1;this.materias=[];this.modoCategorias=!0;this.selectedLvlCursos=new Set;this.selectedParalelos=new Set;this.aniosOptions=[];this.filtroAnioId=null;this.filtroResolucionKey="";this.filtroResolucion=null;this.filtroInstitucionId=null;this.resolucionOptions=[];this.esSuperAdmin=!1;this.carreras=[];this.asignadas=new Set;this.isLoadingMateria={};this.isBulkLoading=!1;this.califPorMateria=new Map;this.camposCalificacion=[{key:"Teorico1",label:"Teorico1"},{key:"Teorico2",label:"Teorico2"},{key:"Teorico3",label:"Teorico3"},{key:"Teorico4",label:"Teorico4"},{key:"Practico1",label:"Practico1"},{key:"Practico2",label:"Practico2"},{key:"Practico3",label:"Practico3"},{key:"Practico4",label:"Practico4"},{key:"PromTeorico",label:"PromTeorico"},{key:"PromPractico",label:"PromPractico"},{key:"Promedio",label:"Promedio"},{key:"PruebaRecuperacion",label:"PruebaRecuperacion"}]}ngOnInit(){this.cargarFiltrosAsignacion(),this._auth.revisarSiEsSuperAdmin().subscribe(t=>{this.esSuperAdmin=t,this.rebuildResolucionOptions()})}cargarFiltrosAsignacion(){this._anios.Obteneranios().subscribe({next:t=>{let e=Array.isArray(t?.data)?t.data:[];this.aniosOptions=e.map(i=>({id:Number(i?.id),Anio:String(i?.Anio??"").trim()})).filter(i=>Number.isFinite(i.id)&&i.id>0&&i.Anio)},error:()=>{this.aniosOptions=[]}}),this._carreras.Obtenercarreras().subscribe({next:t=>{this.carreras=Array.isArray(t?.data)?t.data:[],this.rebuildResolucionOptions()},error:()=>{this.carreras=[],this.rebuildResolucionOptions()}})}rebuildResolucionOptions(){let t=new Map;for(let e of this.carreras||[]){let i=(e?.Resolucion??"").toString().trim();if(!i)continue;let a=e?.instituciones_id,l=a!=null&&a!==""?Number(a):null,m=(e?.NombreInstitucion??"").toString().trim(),v=this.esSuperAdmin&&l?`${l}|${i}`:i,x=this.esSuperAdmin&&l?`${i}${m?" ("+m+")":""}`:i;t.has(v)||t.set(v,{key:v,label:x,resolucion:i,instituciones_id:l})}this.resolucionOptions=Array.from(t.values()).sort((e,i)=>e.label.localeCompare(i.label))}parseResolucionKey(){let t=(this.filtroResolucionKey??"").toString();if(!t){this.filtroResolucion=null,this.filtroInstitucionId=null;return}let e=t.split("|");if(e.length>=2){let i=Number(e[0]),a=e.slice(1).join("|");this.filtroInstitucionId=Number.isFinite(i)?i:null,this.filtroResolucion=a||null}else this.filtroInstitucionId=null,this.filtroResolucion=t}onCambioFiltrosAsignacion(){this.parseResolucionKey(),this.inscripcionSeleccionada&&this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}trackById(t,e){return e.id}onToggleChange(t){let e=t.target.checked;this.ModoBoolean=e}toggleModoCategorias(){this.modoCategorias=!this.modoCategorias}togglePendientes(){this.verPendientes=!this.verPendientes,this.verPendientes&&this.cargarPendientes(1)}cargarPendientes(t=1){if(this.isLoadingPendientes)return;let e=(this.filterPendientes??"").trim();this.isLoadingPendientes=!0,this._info.ObtenerPendientesAsignacion({page:t,per_page:this.pendPerPage,instituciones_id:this.esSuperAdmin?this.filtroInstitucionId??void 0:void 0,search:e||void 0}).subscribe({next:i=>{this.pendientes=Array.isArray(i?.data)?i.data:[],this.pendMeta=i?.meta??null,this.pendPage=this.pendMeta?.current_page??t},error:i=>{console.error("Error al cargar pendientes:",i),this.pendientes=[],this.pendMeta=null,this.pendPage=1},complete:()=>{this.isLoadingPendientes=!1}})}pendTienePrev(){return(this.pendMeta?.current_page??1)>1}pendTieneNext(){let t=this.pendMeta?.current_page??1,e=this.pendMeta?.last_page??1;return t<e}pendPrev(){this.pendTienePrev()&&this.cargarPendientes((this.pendMeta?.current_page??1)-1)}pendNext(){this.pendTieneNext()&&this.cargarPendientes((this.pendMeta?.current_page??1)+1)}seleccionarPendiente(t){let e=Number(t?.estudiantesifas_id??0),i=Number(t?.id??0);if(!e||!i)return;let a=(t?.Ap_Paterno??"").toString().trim(),l=(t?.Ap_Materno??"").toString().trim(),m=(t?.Nombre??"").toString().trim(),v=`${a} ${l} ${m}`.replace(/\s+/g," ").trim()||`Estudiante #${e}`;this.seleccionarEstudiante({id:e,nombre:v,ci:(t?.CI??"").toString(),matricula:(t?.Matricula??"").toString(),infoId:i,institucionId:Number(t?.instituciones_id??0)||void 0,institucionNombre:(t?.NombreInstitucion??"").toString().trim()||void 0})}buscarEstudiantes(t=1){if(this.isLoadingEstudiantes)return;let e=(this.filterEstudiante??"").trim();if(!e||e.length<2){this.estudiantes=[],this.estMeta=null,this.estPage=1;return}if((this.busquedaAnioScope==="assigned"||this.busquedaAnioScope==="mixed")&&!this.filtroAnioId){B.default.fire("Falta gesti\xF3n","Selecciona el A\xF1o (Gesti\xF3n) para buscar por gesti\xF3n.","info");return}let i=this.busquedaAnioScope==="mixed"?"default":this.busquedaAnioScope;this.isLoadingEstudiantes=!0,this._info.Obtenerinfoestudiantesifas({page:t,per_page:this.estPerPage,search:e,sort_by:"Ap_Paterno",sort_dir:"asc",instituciones_id:this.esSuperAdmin?this.filtroInstitucionId??void 0:void 0,anio_id:this.busquedaAnioScope==="unassigned"?void 0:this.filtroAnioId??void 0,include_sin_asignar:this.busquedaAnioScope==="mixed"?1:0,anio_scope:i}).subscribe({next:a=>{let m=(Array.isArray(a?.data)?a.data:[]).map(v=>{let x=(v?.Ap_Paterno??"").toString().trim(),C=(v?.Ap_Materno??"").toString().trim(),M=(v?.Nombre??"").toString().trim(),j=`${x} ${C} ${M}`.replace(/\s+/g," ").trim()||`Estudiante #${v?.id}`,T=Number(v?.estudiantesifas_id??0),qe=Number(v?.id??0),Qe=(v?.FechInsc??v?.fechInsc??"").toString().trim(),kt=(v?.Curso_Solicitado??"").toString().trim(),Ft=(v?.Paralelo_Solicitado??"").toString().trim(),st=Number(v?.CantidadMateriasAsignadas??0),Ot=(v?.NombreInstitucion??"").toString().trim(),We=Number(v?.instituciones_id??0);return{id:T,nombre:j,ci:(v?.CI??"").toString(),matricula:(v?.Matricula??"").toString(),infoId:qe,fechInsc:Qe||void 0,cursoSolicitado:kt||void 0,paraleloSolicitado:Ft||void 0,cantAsignaciones:Number.isFinite(st)?st:0,institucionId:Number.isFinite(We)&&We>0?We:void 0,institucionNombre:Ot||void 0}}).filter(v=>Number.isFinite(v.id)&&v.id>0);this.estudiantes=m,this.estMeta=a?.meta??null,this.estPage=this.estMeta?.current_page??t},error:a=>{console.error("Error al buscar estudiantes:",a),this.estudiantes=[],this.estMeta=null},complete:()=>{this.isLoadingEstudiantes=!1}})}estTienePrev(){return(this.estMeta?.current_page??1)>1}estTieneNext(){let t=this.estMeta?.current_page??1,e=this.estMeta?.last_page??1;return t<e}estPrev(){this.estTienePrev()&&this.buscarEstudiantes((this.estMeta?.current_page??1)-1)}estNext(){this.estTieneNext()&&this.buscarEstudiantes((this.estMeta?.current_page??1)+1)}seleccionarEstudiante(t){this.selectedSearchInfoId=t.infoId??null,this.estudianteSeleccionado=t,this.inscripcionSeleccionada=null,this.inscripciones=[],this.materias=[],this.asignadas.clear(),this.filterMateria="",this.mostrarTodasMaterias=!1,this.selectedLvlCursos.clear(),this.selectedParalelos.clear(),this.modoCategorias=!0,this.cargarInscripciones(t.id,t.infoId??null)}limpiarEstudiante(){this.estudianteSeleccionado=null,this.inscripcionSeleccionada=null,this.inscripciones=[],this.materias=[],this.asignadas.clear(),this.filterMateria="",this.mostrarTodasMaterias=!1,this.selectedLvlCursos.clear(),this.selectedParalelos.clear(),this.modoCategorias=!0}cursosConMateriasAsignadas(){if(this.inscripcionSeleccionada){let i=new Map;for(let a of this.asignadas){let m=(this.materias.find(v=>v.id===a)?.categoria??"SIN CATEGORIA").toString().trim()||"SIN CATEGORIA";i.set(m,(i.get(m)??0)+1)}return Array.from(i.entries()).sort(([a],[l])=>a.localeCompare(l)).map(([a,l])=>`${a} (${l})`)}let t=new Set,e=[];for(let i of this.inscripciones??[]){let a=Number(i?.CantidadMateriasAsignadas??0);if(!Number.isFinite(a)||a<=0)continue;let l=(i?.Curso_Solicitado??"SIN CURSO").toString().trim()||"SIN CURSO",m=(i?.Paralelo_Solicitado??"").toString().trim(),v=m?`${l} - ${m} (${a})`:`${l} (${a})`;t.has(v)||(t.add(v),e.push(v))}return e.sort((i,a)=>i.localeCompare(a))}cargarInscripciones(t,e=null){let i=++this.inscripcionesReqToken;this.isLoadingInscripciones=!0,this._info.ObtenerinfoestudiantesifasPorEstudiante(t).subscribe({next:a=>{if(i!==this.inscripcionesReqToken)return;let l=Array.isArray(a?.data)?a.data:[];if(this.inscripciones=l.map(m=>({id:Number(m?.id),FechInsc:m?.FechInsc,Curso_Solicitado:m?.Curso_Solicitado,Paralelo_Solicitado:m?.Paralelo_Solicitado,Categoria:m?.Categoria,Turno:m?.Turno,CantidadMateriasAsignadas:m?.CantidadMateriasAsignadas})).filter(m=>Number.isFinite(m.id)),this.inscripciones.length>0){let m=e?this.inscripciones.find(v=>v.id===e):null;this.seleccionarInscripcion(m??this.inscripciones[0])}},error:a=>{i===this.inscripcionesReqToken&&(console.error("Error al cargar inscripciones:",a),this.inscripciones=[])},complete:()=>{i===this.inscripcionesReqToken&&(this.isLoadingInscripciones=!1)}})}seleccionarInscripcion(t){if(this.inscripcionSeleccionada=t,this.materias=[],this.asignadas.clear(),this.califPorMateria.clear(),this.filterMateria="",this.parseResolucionKey(),!this.filtroAnioId||!this.filtroResolucion){B.default.fire("Faltan filtros","Selecciona A\xF1o (Gesti\xF3n) y Resoluci\xF3n para cargar materias.","info");return}this.cargarMateriasYAsignaciones(t.id)}syncCantidadMateriasAsignadas(t,e){this.inscripcionSeleccionada?.id===t&&(this.inscripcionSeleccionada=Xe(Ke({},this.inscripcionSeleccionada),{CantidadMateriasAsignadas:e})),this.inscripciones=(this.inscripciones??[]).map(i=>i.id===t?Xe(Ke({},i),{CantidadMateriasAsignadas:e}):i)}cargarMateriasYAsignaciones(t){if(this.parseResolucionKey(),!this.filtroAnioId||!this.filtroResolucion){this.materias=[],this.asignadas.clear(),this.califPorMateria.clear();return}this._mat.ObtenermateriasPorInfo(t,{all:this.mostrarTodasMaterias,anio_id:this.filtroAnioId??void 0,resolucion:this.filtroResolucion||void 0}).subscribe({next:e=>{let i=Array.isArray(e?.data)?e.data:[];this.materias=i.map(a=>{let l=(a?.NombreMateria??"").toString().trim()||`Materia #${a?.id}`,m=(a?.SiglaMateria??"").toString().trim()||void 0,v=(a?.Anio??"SIN ASIGNAR").toString().trim()||"SIN ASIGNAR",x=(a?.Resolucion??"SIN RESOLUCION").toString().trim()||"SIN RESOLUCION",C=(a?.LvlCurso??"SIN CURSO").toString().trim()||"SIN CURSO",M=(a?.Paralelo??"").toString().trim(),j=M?`${C} ${M}`:C;return{id:Number(a?.id),categoria:j,sigla:m,nombre:l,lvlCurso:C,paralelo:M,anio:v,resolucion:x}}).filter(a=>Number.isFinite(a.id))},error:e=>{console.error("Error al cargar materias:",e),this.materias=[]}}),this._calif.ObtenerCalificacionesPorInfo(t).subscribe({next:e=>{let i=Array.isArray(e?.data)?e.data:[];this.asignadas.clear(),this.califPorMateria.clear();for(let a of i){let l=Number(a?.materias_id??a?.materia_id);if(Number.isFinite(l)&&(this.asignadas.add(l),this.califPorMateria.set(l,a),!this.materias.some(m=>m.id===l))){let m=(a?.NombreMateria??"").toString().trim()||`Materia #${l}`,v=(a?.SiglaMateria??"").toString().trim()||void 0,x=(a?.LvlCurso??"SIN CURSO").toString().trim()||"SIN CURSO",C=(a?.MateriaParalelo??"").toString().trim(),M=(a?.Anio??"SIN ASIGNAR").toString().trim()||"SIN ASIGNAR",j=(a?.Resolucion??"SIN RESOLUCION").toString().trim()||"SIN RESOLUCION",T=C?`${x} ${C}`:x;this.materias=[...this.materias,{id:l,categoria:T,sigla:v,nombre:m,lvlCurso:x,paralelo:C,anio:M,resolucion:j}]}}this.syncCantidadMateriasAsignadas(t,this.asignadas.size)},error:e=>{console.error("Error al cargar asignaciones:",e),this.asignadas.clear(),this.syncCantidadMateriasAsignadas(t,0)}})}materiasFiltradas(){let t=(this.filterMateria??"").trim().toLowerCase(),e=this.materias;return t&&(e=e.filter(i=>`${i.id} ${i.sigla??""} ${i.nombre} ${i.categoria} ${i.lvlCurso??""} ${i.paralelo??""}`.toLowerCase().includes(t))),this.selectedLvlCursos.size>0&&(e=e.filter(i=>this.selectedLvlCursos.has((i.lvlCurso??"").toString()))),this.selectedParalelos.size>0&&(e=e.filter(i=>this.selectedParalelos.has((i.paralelo??"").toString()))),e}lvlCursosDetectados(){return Array.from(new Set(this.materias.map(t=>(t.lvlCurso??"").toString()).filter(Boolean))).sort((t,e)=>t.localeCompare(e))}paralelosDetectados(){return Array.from(new Set(this.materias.map(t=>(t.paralelo??"").toString()).filter(t=>!!t))).sort((t,e)=>t.localeCompare(e))}isLvlCursoSeleccionado(t){return this.selectedLvlCursos.has(t)}toggleLvlCurso(t){this.selectedLvlCursos.has(t)?this.selectedLvlCursos.delete(t):this.selectedLvlCursos.add(t)}isParaleloSeleccionado(t){return this.selectedParalelos.has(t)}toggleParalelo(t){this.selectedParalelos.has(t)?this.selectedParalelos.delete(t):this.selectedParalelos.add(t)}categorias(){return Array.from(new Set(this.materiasFiltradas().map(t=>t.categoria))).sort((t,e)=>t.localeCompare(e))}materiasPorCategoria(t){return this.materiasFiltradas().filter(e=>e.categoria===t)}isAsignada(t){return this.asignadas.has(t)}toggleAsignacion(t,e){return V(this,null,function*(){if(e?.preventDefault(),!this.inscripcionSeleccionada)return;let i=this.inscripcionSeleccionada.id;this.isLoadingMateria[t.id]=!0;try{if(this.asignadas.has(t.id)){if(!(yield this.confirmarQuitarMateriaSiTieneCalificaciones(t)))return;yield new Promise((m,v)=>{this._calif.QuitarMateriaAEstudiante({infoestudiantesifas_id:i,materias_id:t.id}).subscribe({next:()=>m(),error:x=>v(x)})}),this.asignadas.delete(t.id),this.syncCantidadMateriasAsignadas(i,this.asignadas.size)}else yield new Promise((l,m)=>{this._calif.AsignarMateriaAEstudiante({infoestudiantesifas_id:i,materias_id:t.id,forzar:this.mostrarTodasMaterias}).subscribe({next:()=>l(),error:v=>m(v)})}),this.asignadas.add(t.id),this.syncCantidadMateriasAsignadas(i,this.asignadas.size);this._calif.ObtenerCalificacionesPorInfo(i).subscribe({next:l=>{let m=Array.isArray(l?.data)?l.data:[];this.califPorMateria.clear();for(let v of m){let x=Number(v?.materias_id??v?.materia_id);Number.isFinite(x)&&this.califPorMateria.set(x,v)}this.syncCantidadMateriasAsignadas(i,this.asignadas.size)}})}catch(a){console.error("Error al alternar asignaci\xF3n:",a)}finally{this.isLoadingMateria[t.id]=!1}})}onToggleMostrarTodasMaterias(){this.mostrarTodasMaterias=!this.mostrarTodasMaterias,this.inscripcionSeleccionada&&this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}fmtCal(t){return t==null||t===""?"NULL":String(t)}califDeMateria(t){return this.califPorMateria.get(t)}tieneCalificaciones(t){let e=this.califDeMateria(t);return e?this.camposCalificacion.some(({key:i})=>{let a=e?.[i];return a!=null&&a!==""}):!1}verCalificaciones(t,e){return V(this,null,function*(){e?.preventDefault(),e?.stopPropagation?.();let i=this.califDeMateria(t.id),a=`${t.sigla?t.sigla+" - ":""}${t.nombre}`,l=`
      <div style="text-align:left">
        <div><b>Materia:</b> ${this.escapeHtml(a)}</div>
        <div style="margin-top:8px">
          <table class="table table-sm" style="margin:0">
            <tbody>
              ${this.camposCalificacion.map(({key:m,label:v})=>{let x=this.fmtCal(i?.[m]);return`<tr><td style="width:45%"><b>${this.escapeHtml(v)}</b></td><td>${this.escapeHtml(x)}</td></tr>`}).join("")}
            </tbody>
          </table>
        </div>
      </div>
    `;yield B.default.fire({title:"Calificaciones",html:l,icon:"info",confirmButtonText:"Cerrar",width:720})})}verCalificacionesPorId(t,e){return V(this,null,function*(){let i=this.materias.find(a=>a.id===t);i&&(yield this.verCalificaciones(i,e))})}confirmarQuitarMateriaSiTieneCalificaciones(t){return V(this,null,function*(){if(!this.tieneCalificaciones(t.id))return!0;let e=`${t.sigla?t.sigla+" - ":""}${t.nombre}`;return!!(yield B.default.fire({title:"Confirmar",text:`Esta materia ya tiene calificaciones (${e}). \xBFSeguro que deseas quitarla?`,icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, quitar",cancelButtonText:"Cancelar"})).isConfirmed})}escapeHtml(t){return String(t??"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}tokensBusqueda(){let t=(this.filterEstudiante??"").toString().trim();if(!t)return[];let e=t.split(/\s+/).map(i=>i.trim()).filter(i=>i!=="");return Array.from(new Set(e)).sort((i,a)=>a.length-i.length)}highlightHtml(t){let e=this.escapeHtml(t??""),i=this.tokensBusqueda();if(i.length===0)return e;let a=e;for(let l of i){if(!l)continue;let m=new RegExp(this.escapeRegExp(l),"gi");a=a.replace(m,v=>`<strong class="fw-bold">${v}</strong>`)}return a}formatoCursoParalelo(t){let e=(t?.cursoSolicitado??"").toString().trim(),i=(t?.paraleloSolicitado??"").toString().trim();return!e&&!i?"":i?`${e} - ${i}`:e}asignarCursoCompleto(){return V(this,null,function*(){if(this.inscripcionSeleccionada){if(this.parseResolucionKey(),!this.filtroAnioId||!this.filtroResolucion){yield B.default.fire({title:"Faltan filtros",text:"Selecciona A\xF1o y Resoluci\xF3n para asignaci\xF3n masiva.",icon:"warning",confirmButtonText:"Cerrar"});return}this.isBulkLoading=!0;try{yield new Promise((t,e)=>{this._calif.AsignarAnioResolucionCompleto({infoestudiantesifas_id:this.inscripcionSeleccionada.id,anio_id:this.filtroAnioId,resolucion:this.filtroResolucion}).subscribe({next:()=>t(),error:i=>e(i)})}),this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}catch(t){console.error("Error al asignar curso completo:",t)}finally{this.isBulkLoading=!1}}})}asignarCategoriaCompleta(t,e){return V(this,null,function*(){if(e?.preventDefault(),e?.stopPropagation?.(),!this.inscripcionSeleccionada)return;let i=this.inscripcionSeleccionada.id;if(this.parseResolucionKey(),!this.filtroAnioId||!this.filtroResolucion){yield B.default.fire({title:"Faltan filtros",text:"Selecciona A\xF1o y Resoluci\xF3n para asignaci\xF3n masiva.",icon:"warning",confirmButtonText:"Cerrar"});return}let a=this.materiasPorCategoria(t);if(a.length===0)return;let l=a.map(C=>C.id);for(let C of l)this.isLoadingMateria[C]=!0;let m=(a[0]?.lvlCurso??"").toString().trim(),v=(a[0]?.paralelo??"").toString().trim(),x=v||null;this.isBulkLoading=!0;try{yield new Promise((C,M)=>{this._calif.AsignarCategoriaCompleta({infoestudiantesifas_id:i,curso:m,paralelo:x,forzar:!1}).subscribe({next:()=>C(),error:j=>M(j)})}),this.cargarMateriasYAsignaciones(i)}catch(C){console.error("Error al asignar curso/paralelo (bulk):",C),yield B.default.fire({title:"Error",text:"No se pudo asignar el curso/paralelo.",icon:"error",confirmButtonText:"Cerrar"})}finally{this.isBulkLoading=!1;for(let C of l)this.isLoadingMateria[C]=!1}})}quitarCategoriaCompleta(t,e){return V(this,null,function*(){if(e?.preventDefault(),e?.stopPropagation?.(),!this.inscripcionSeleccionada)return;let i=this.inscripcionSeleccionada.id;if(this.parseResolucionKey(),!this.filtroAnioId||!this.filtroResolucion){yield B.default.fire({title:"Faltan filtros",text:"Selecciona A\xF1o y Resoluci\xF3n para desasignaci\xF3n masiva.",icon:"warning",confirmButtonText:"Cerrar"});return}let a=this.materiasPorCategoria(t);if(a.length===0)return;let l=a.filter(T=>this.asignadas.has(T.id));if(l.length===0)return;let m=l.some(T=>this.tieneCalificaciones(T.id));if(!(yield B.default.fire({title:"Confirmar",text:m?"Hay materias con calificaciones en este curso/paralelo. \xBFSeguro que deseas quitar todas sus asignaciones?":"\xBFSeguro que deseas quitar todas las asignaciones de este curso/paralelo?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, quitar",cancelButtonText:"Cancelar"})).isConfirmed)return;let x=a.map(T=>T.id);for(let T of x)this.isLoadingMateria[T]=!0;let C=(a[0]?.lvlCurso??"").toString().trim(),M=(a[0]?.paralelo??"").toString().trim(),j=M||null;this.isBulkLoading=!0;try{yield new Promise((T,qe)=>{this._calif.QuitarCategoriaCompleta({infoestudiantesifas_id:i,curso:C,paralelo:j,forzar:!1}).subscribe({next:()=>T(),error:Qe=>qe(Qe)})}),this.cargarMateriasYAsignaciones(i)}catch(T){console.error("Error al quitar curso/paralelo (bulk):",T),yield B.default.fire({title:"Error",text:"No se pudo quitar el curso/paralelo.",icon:"error",confirmButtonText:"Cerrar"})}finally{this.isBulkLoading=!1;for(let T of x)this.isLoadingMateria[T]=!1}})}quitarTodasAsignaciones(){return V(this,null,function*(){if(!this.inscripcionSeleccionada)return;let t=Array.from(this.asignadas).some(i=>this.tieneCalificaciones(i));if((yield B.default.fire({title:"Confirmar",text:t?"Hay materias con calificaciones. \xBFSeguro que deseas quitar todas las asignaciones?":"\xBFSeguro que deseas quitar todas las asignaciones?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, quitar todas",cancelButtonText:"Cancelar"})).isConfirmed){this.isBulkLoading=!0;try{yield new Promise((i,a)=>{this._calif.QuitarTodasLasMaterias({infoestudiantesifas_id:this.inscripcionSeleccionada.id}).subscribe({next:()=>i(),error:l=>a(l)})}),this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}catch(i){console.error("Error al quitar todas las asignaciones:",i)}finally{this.isBulkLoading=!1}}})}quitarAsignacionTabla(t){return V(this,null,function*(){let e=this.materias.find(i=>i.id===t);e&&(yield this.toggleAsignacion(e))})}tablaAsignaciones(){if(!this.estudianteSeleccionado||!this.inscripcionSeleccionada)return[];let t=[];for(let e of this.asignadas){let i=this.materias.find(a=>a.id===e);i&&t.push({materiaId:i.id,estudiante:this.estudianteSeleccionado.nombre,materia:`${i.sigla?i.sigla+" - ":""}${i.nombre}`,categoria:i.categoria,paralelo:i.paralelo||"-"})}return t}};be.\u0275fac=function(e){return new(e||be)(y(ht),y(xt),y(vt),y(Q),y(je),y(Ue),y(Le))},be.\u0275cmp=se({type:be,selectors:[["app-asignadormateriasestudiantes"]],standalone:!1,decls:79,vars:25,consts:[["sinCursosAsignados",""],[1,"container","mt-4"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"lead","text-secondary","subtitulosGlobales"],[1,"card"],[1,"card-body"],[1,"row","align-items-end","g-2","mb-3"],[1,"col-sm-3"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-calendar"],[1,"form-floating","flex-grow-1"],["id","filtroAnioGlobal",1,"form-select",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","filtroAnioGlobal"],[1,"bi","bi-bookmark"],["id","filtroResolucionGlobal",1,"form-select",3,"ngModelChange","change","ngModel"],["for","filtroResolucionGlobal"],[1,"col-sm-6","d-flex","justify-content-end"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],["class","card mb-3",4,"ngIf"],[1,"row","align-items-end","g-2"],[1,"col-sm-10"],[1,"row","g-2","mb-2"],[1,"col-lg-4"],[1,"bi","bi-funnel"],["id","busquedaScope",1,"form-select",3,"ngModelChange","ngModel"],["value","mixed"],["value","assigned"],["value","unassigned"],["for","busquedaScope"],["class","text-muted",4,"ngIf"],[1,"bi","bi-search"],["type","text","placeholder","Buscar estudiante",1,"form-control",3,"input","keyup.enter","ngClass","value"],[1,"btn","btn-outline-primary",3,"click","disabled"],["class","text-primary",4,"ngIf"],["class","mt-2 d-flex align-items-center gap-2",4,"ngIf"],[1,"mt-2","d-flex","flex-wrap","gap-2"],["class","btn btn-outline-secondary btn-sm",3,"active","disabled","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mt-2"],["class","d-flex flex-wrap align-items-center gap-2",4,"ngIf"],[1,"col-sm-2","d-flex","justify-content-end","gap-2"],[1,"form-check","mt-2"],["type","checkbox","id","toggleModo",1,"form-check-input",3,"change"],["for","toggleModo",1,"form-check-label"],[4,"ngIf"],[1,"card","mb-3"],[1,"card-header","d-flex","align-items-center","justify-content-between","flex-wrap","gap-2"],[1,"col-lg-8"],["type","text","placeholder","Buscar pendiente",1,"form-control",3,"input","keyup.enter","value"],["type","button",1,"btn","btn-outline-primary",3,"click","disabled"],[1,"form-label"],["readonly","",1,"form-control",3,"value"],[1,"table-responsive"],[1,"table","table-sm","table-striped","align-middle","mb-0"],[2,"width","140px"],[4,"ngFor","ngForOf"],[1,"text-muted"],[1,"mt-2","d-flex","align-items-center","gap-2"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],["type","button",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"text-center","py-3"],[1,"text-primary"],[1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[3,"innerHTML"],[1,"small","text-muted"],[1,"small"],[1,"badge","bg-secondary","me-1"],[3,"innerHTML",4,"ngIf"],["class","small text-muted",4,"ngIf"],[1,"d-flex","flex-wrap","align-items-center","gap-2"],[4,"ngIf","ngIfElse"],["class","badge bg-success",4,"ngFor","ngForOf"],[1,"badge","bg-success"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap","gap-2"],[1,"m-0"],["class","text-success",4,"ngIf"],[1,"text-success"],["class","table-responsive",4,"ngIf"],[1,"row","mb-2"],[1,"col-sm-6"],[1,"bi","bi-filter"],["type","text","placeholder","Buscar materia",1,"form-control",3,"input","value"],[1,"col-sm-6","d-flex","justify-content-end","flex-wrap","gap-2","mt-2","mt-sm-0"],[1,"form-check","mt-1"],["type","checkbox","id","toggleCategorias",1,"form-check-input",3,"change","checked"],["for","toggleCategorias",1,"form-check-label"],["type","checkbox","id","toggleTodas",1,"form-check-input",3,"change","checked"],["for","toggleTodas",1,"form-check-label"],[1,"d-flex","align-items-center","flex-wrap","gap-1"],[1,"text-muted","me-1"],["type","button","class","btn btn-outline-primary btn-sm",3,"active","click",4,"ngFor","ngForOf"],["type","button","class","btn btn-outline-secondary btn-sm",3,"active","click",4,"ngFor","ngForOf"],["class","btn btn-outline-success btn-sm",3,"disabled","click",4,"ngIf"],["class","btn btn-outline-danger btn-sm",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"btn","btn-outline-success","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],[1,"d-flex","align-items-center","justify-content-between","mt-3","gap-2"],[1,"m-0","flex-grow-1","text-center"],[1,"d-flex","align-items-center","gap-2"],["type","button","title","Asigna todas las materias de este curso/paralelo",1,"btn","btn-outline-success","btn-sm",3,"click","disabled"],["type","button","title","Quita todas las materias asignadas de este curso/paralelo",1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],[1,"d-flex","flex-wrap"],["class","list-group-item col-sm-3 custom-border position-relative",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"list-group-item","col-sm-3","custom-border","position-relative",3,"ngClass"],["type","button",1,"btn","btn-sm","w-100","text-start",3,"click","disabled"],[1,"me-2","badge",3,"ngClass"],["class","small text-muted mt-2 d-flex align-items-center justify-content-between gap-2",4,"ngIf"],["class","spinner-border spinner-border-sm text-primary position-absolute top-50 start-50 translate-middle","role","status",4,"ngIf"],[1,"small","text-muted","mt-2","d-flex","align-items-center","justify-content-between","gap-2"],["class","ms-1",4,"ngIf"],["type","button","title","Ver detalle",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"ms-1"],["role","status",1,"spinner-border","spinner-border-sm","text-primary","position-absolute","top-50","start-50","translate-middle"],[1,"visually-hidden"],[1,"small","text-muted","mt-1"],[1,"table","align-middle","table-hover","table-sm"],[1,"table-group-divider"],["colspan","7",1,"text-center","text-muted"],["type","button",1,"btn","btn-outline-primary","btn-sm","ms-2",3,"click","disabled"]],template:function(e,i){e&1&&(o(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),c(4,"Asignador de Materias - ESTUDIANTES"),n(),o(5,"p",5),c(6,"Asigne materias a estudiantes de manera sencilla y eficiente"),n()()()(),o(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"span",11),h(13,"i",12),n(),o(14,"div",13)(15,"select",14),N("ngModelChange",function(l){return O(i.filtroAnioId,l)||(i.filtroAnioId=l),l}),g("change",function(){return i.onCambioFiltrosAsignacion()}),o(16,"option",15),c(17,"-- Seleccione --"),n(),_(18,Ca,2,2,"option",16),n(),o(19,"label",17),c(20,"A\xF1o (Gesti\xF3n)"),n()()()(),o(21,"div",9)(22,"div",10)(23,"span",11),h(24,"i",18),n(),o(25,"div",13)(26,"select",19),N("ngModelChange",function(l){return O(i.filtroResolucionKey,l)||(i.filtroResolucionKey=l),l}),g("change",function(){return i.onCambioFiltrosAsignacion()}),o(27,"option",15),c(28,"-- Seleccione --"),n(),_(29,Sa,2,2,"option",16),n(),o(30,"label",20),c(31,"Resoluci\xF3n"),n()()()(),o(32,"div",21)(33,"button",22),g("click",function(){return i.togglePendientes()}),c(34),n()()(),_(35,Va,48,8,"div",23),o(36,"div",24)(37,"div",25)(38,"div",26)(39,"div",27)(40,"div",10)(41,"span",11),h(42,"i",28),n(),o(43,"div",13)(44,"select",29),N("ngModelChange",function(l){return O(i.busquedaAnioScope,l)||(i.busquedaAnioScope=l),l}),o(45,"option",30),c(46,"Busqueda Mixta"),n(),o(47,"option",31),c(48,"Buscar solo en los Asignados"),n(),o(49,"option",32),c(50,"Buscar solo en los sin asignar "),n()(),o(51,"label",33),c(52,"Buscar inscritos"),n()()(),_(53,Pa,2,0,"small",34),n()(),o(54,"div",10)(55,"span",11),h(56,"i",35),n(),o(57,"div",13)(58,"input",36),g("input",function(l){return i.filterEstudiante=l.target.value})("keyup.enter",function(){return i.buscarEstudiantes(1)}),n(),o(59,"label"),c(60,"Buscar estudiante (m\xEDn. 2 caracteres)"),n()(),o(61,"button",37),g("click",function(){return i.buscarEstudiantes(1)}),c(62," Buscar "),n()(),_(63,ka,2,0,"small",38)(64,Fa,7,5,"div",39),o(65,"div",40),_(66,Ba,11,10,"button",41),n(),o(67,"div",42),_(68,$a,2,0,"small",34)(69,Ha,9,3,"div",43),n()(),o(70,"div",44)(71,"div",45)(72,"input",46),g("change",function(l){return i.onToggleChange(l)}),n(),o(73,"label",47),c(74,"Modo tabla"),n()()()(),h(75,"hr"),_(76,Xa,11,6,"div",48)(77,Ya,1,0,"hr",48)(78,Ss,3,2,"div",48),n()()),e&2&&(r(15),F("ngModel",i.filtroAnioId),r(),d("ngValue",null),r(2),d("ngForOf",i.aniosOptions),r(8),F("ngModel",i.filtroResolucionKey),r(),d("ngValue",""),r(2),d("ngForOf",i.resolucionOptions),r(5),A(" ",i.verPendientes?"Ocultar pendientes":"Ver pendientes de asignaci\xF3n"," "),r(),d("ngIf",i.verPendientes),r(9),F("ngModel",i.busquedaAnioScope),r(9),d("ngIf",(i.busquedaAnioScope==="assigned"||i.busquedaAnioScope==="mixed")&&!i.filtroAnioId),r(5),d("ngClass",w(22,ba,i.isLoadingEstudiantes,i.isLoadingEstudiantes))("value",i.filterEstudiante),r(3),d("disabled",i.isLoadingEstudiantes),r(2),d("ngIf",i.isLoadingEstudiantes),r(),d("ngIf",i.estMeta),r(2),d("ngForOf",i.estudiantes)("ngForTrackBy",i.trackById),r(2),d("ngIf",!i.estudianteSeleccionado),r(),d("ngIf",i.estudianteSeleccionado),r(7),d("ngIf",i.estudianteSeleccionado),r(),d("ngIf",i.inscripcionSeleccionada),r(),d("ngIf",i.inscripcionSeleccionada))},dependencies:[re,le,ce,fe,_e,pe,ue,me],styles:[".custom-border[_ngcontent-%COMP%]{border:1px solid #e6e6e6;border-radius:10px;margin:6px;padding:8px;background:#fff;transition:background-color .16s ease,border-color .16s ease}.checked[_ngcontent-%COMP%]{border-color:#22c55e!important;background:#f3fff5}.btn.active[_ngcontent-%COMP%]{border-color:#2563eb;background:#eaf1ff;color:#0335a0;font-weight:700}"]});var He=be;var ys=[{path:"estudiantes",component:ze},{path:"asignarestudiantes",component:He},{path:"estudiantesinscritos",component:ve}],te=class te{};te.\u0275fac=function(e){return new(e||te)},te.\u0275mod=ye({type:te}),te.\u0275inj=Ce({imports:[nt.forChild(ys),nt]});var Ge=te;var ie=class ie{};ie.\u0275fac=function(e){return new(e||ie)},ie.\u0275mod=ye({type:ie}),ie.\u0275inj=Ce({imports:[ct,gt,Ge]});var Pt=ie;export{Pt as TiemposinscripcionesModule};
