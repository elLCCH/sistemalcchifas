import{a as oe,b as it}from"./chunk-JD6BS3PO.js";import{a as Te}from"./chunk-SDTEYBFQ.js";import{a as Tt}from"./chunk-YJY6DP6Y.js";import{a as Mt}from"./chunk-XILPAHEE.js";import{a as Ie}from"./chunk-SVDENQU6.js";import{b as te}from"./chunk-ZODOWL6N.js";import{b as It}from"./chunk-ZPE3UOEJ.js";import{b as ie}from"./chunk-IOMHTJQE.js";import{a as wt,b as At}from"./chunk-R7WDWIDH.js";import{k as ut}from"./chunk-O3DH7IF3.js";import{b as ne}from"./chunk-L3EZDEDO.js";import{g as Ae}from"./chunk-XJCOF3T3.js";import{c as Se,e as k,f as Y,g as Ee,h as et,j as N,k as J,l as ye,m as tt,o as yt,p as Me,q as we,r as X,s as Z,t as ee}from"./chunk-RY6BQWSI.js";import{a as Ze}from"./chunk-JISGPZ2J.js";import{$b as M,Aa as G,Bb as de,Cb as me,Da as ve,Db as pe,Dc as q,Ea as s,F as ce,Fc as K,Gb as Ke,Gc as Q,Hc as Ce,Ib as Qe,Jc as he,Lb as c,Ma as A,Mb as v,Nb as y,Nc as be,Ob as ue,Oc as Et,Pb as St,Ra as U,Sa as We,Tb as I,Ua as qe,Ub as T,Uc as Je,Vb as O,Wa as g,Yc as Xe,Z as ze,Zb as Ye,_ as He,_b as pt,ab as B,ba as Ue,dc as P,ec as R,ga as p,gc as W,ha as u,hc as $,ib as l,jb as n,k as se,kb as o,lb as x,pb as dt,q as le,qb as mt,ra as bt,sb as h,vb as f,w as $e,xb as m}from"./chunk-K6WFP5KF.js";import{a as ae,b as Be,m as ct}from"./chunk-GG76335P.js";var Lt=["modalgestioncarreras"],H=(a,t)=>({"bi-caret-up":a,"bi-caret-down":t}),Gt=(a,t)=>({top:a,left:t});function jt(a,t){if(a&1&&x(0,"i",32),a&2){let e=m(2);l("ngClass",M(1,H,e.getSortDircarreras("NombreInstitucion")==="asc",e.getSortDircarreras("NombreInstitucion")==="desc"))}}function Bt(a,t){if(a&1){let e=h();n(0,"th",23),f("click",function(r){p(e);let d=m();return u(d.sortBycarreras("NombreInstitucion",r))}),c(1," Instituci\xF3n "),g(2,jt,1,4,"i",24),o()}if(a&2){let e=m();s(2),l("ngIf",e.isSortedcarreras("NombreInstitucion"))}}function $t(a,t){if(a&1&&x(0,"i",32),a&2){let e=m();l("ngClass",M(1,H,e.getSortDircarreras("NombreCarrera")==="asc",e.getSortDircarreras("NombreCarrera")==="desc"))}}function zt(a,t){if(a&1&&x(0,"i",32),a&2){let e=m();l("ngClass",M(1,H,e.getSortDircarreras("Area")==="asc",e.getSortDircarreras("Area")==="desc"))}}function Ht(a,t){if(a&1&&x(0,"i",32),a&2){let e=m();l("ngClass",M(1,H,e.getSortDircarreras("Mencion")==="asc",e.getSortDircarreras("Mencion")==="desc"))}}function Ut(a,t){if(a&1&&x(0,"i",32),a&2){let e=m();l("ngClass",M(1,H,e.getSortDircarreras("Resolucion")==="asc",e.getSortDircarreras("Resolucion")==="desc"))}}function Wt(a,t){if(a&1&&x(0,"i",32),a&2){let e=m();l("ngClass",M(1,H,e.getSortDircarreras("Nivel")==="asc",e.getSortDircarreras("Nivel")==="desc"))}}function qt(a,t){if(a&1&&x(0,"i",32),a&2){let e=m();l("ngClass",M(1,H,e.getSortDircarreras("HorasTotales")==="asc",e.getSortDircarreras("HorasTotales")==="desc"))}}function Kt(a,t){if(a&1&&x(0,"i",32),a&2){let e=m();l("ngClass",M(1,H,e.getSortDircarreras("Visibilidad")==="asc",e.getSortDircarreras("Visibilidad")==="desc"))}}function Qt(a,t){if(a&1&&x(0,"i",32),a&2){let e=m();l("ngClass",M(1,H,e.getSortDircarreras("Estado")==="asc",e.getSortDircarreras("Estado")==="desc"))}}function Yt(a,t){if(a&1&&(n(0,"tr")(1,"td",21)(2,"div",33)(3,"span",34),c(4,"Cargando..."),o()()()()),a&2){let e=m();s(),B("colspan",e.esSuperAdmin?11:10)}}function Jt(a,t){if(a&1&&(n(0,"tr")(1,"td",21),c(2,"No hay datos disponibles"),o()()),a&2){let e=m();s(),B("colspan",e.esSuperAdmin?11:10)}}function Xt(a,t){if(a&1&&(n(0,"td"),c(1),o()),a&2){let e=m().$implicit;s(),v(e.NombreInstitucion)}}function Zt(a,t){if(a&1&&x(0,"img",41),a&2){let e=m(2);l("src",e._tools.rutabtniconsanimaciones+"pencil.svg",G)}}function ei(a,t){if(a&1&&x(0,"ng-lottie",42),a&2){let e=m(2);l("options",e._tools.optionsEditar)}}function ti(a,t){if(a&1&&x(0,"img",41),a&2){let e=m(2);l("src",e._tools.rutabtniconsanimaciones+"delete.svg",G)}}function ii(a,t){if(a&1&&x(0,"ng-lottie",42),a&2){let e=m(2);l("options",e._tools.optionsEliminar)}}function ni(a,t){if(a&1){let e=h();n(0,"tr",35),f("contextmenu",function(r){let d=p(e).$implicit,_=m();return u(_.abrirMenucarreras(r,d))}),n(1,"td",21),c(2),o(),g(3,Xt,2,1,"td",25),n(4,"td"),c(5),o(),n(6,"td"),c(7),o(),n(8,"td"),c(9),o(),n(10,"td"),c(11),o(),n(12,"td"),c(13),o(),n(14,"td"),c(15),o(),n(16,"td"),c(17),o(),n(18,"td"),c(19),o(),n(20,"td",36)(21,"button",37),f("click",function(){let r=p(e).$implicit,d=m();return u(d.Seleccionarcarreras(r.id))})("mouseenter",function(){let r=p(e).$implicit,d=m();return u(d._tools.hoverBotonMap["edicioncarreras-"+r.id]=!0)})("mouseleave",function(){let r=p(e).$implicit,d=m();return u(d._tools.hoverBotonMap["edicioncarreras-"+r.id]=!1)}),g(22,Zt,1,1,"img",38)(23,ei,1,1,"ng-lottie",39),o(),n(24,"button",40),f("click",function(){let r=p(e).$implicit,d=m();return u(d.Eliminarcarreras(r.id))})("mouseenter",function(){let r=p(e).$implicit,d=m();return u(d._tools.hoverBotonMap["eliminacioncarreras-"+r.id]=!0)})("mouseleave",function(){let r=p(e).$implicit,d=m();return u(d._tools.hoverBotonMap["eliminacioncarreras-"+r.id]=!1)}),g(25,ti,1,1,"img",38)(26,ii,1,1,"ng-lottie",39),o()()()}if(a&2){let e=t.index,i=t.$implicit,r=m();s(2),v((r.paginacarreras-1)*r.pageSizecarreras+(e+1)),s(),l("ngIf",r.esSuperAdmin),s(2),v(i.NombreCarrera),s(2),v(i.Area),s(2),v(i.Mencion),s(2),v(i.Resolucion),s(2),v(i.Nivel),s(2),v(i.HorasTotales),s(2),v(i.Visibilidad),s(2),v(i.Estado),s(3),l("ngIf",!r._tools.hoverBotonMap["edicioncarreras-"+i.id]),s(),l("ngIf",r._tools.hoverBotonMap["edicioncarreras-"+i.id]),s(2),l("ngIf",!r._tools.hoverBotonMap["eliminacioncarreras-"+i.id]),s(),l("ngIf",r._tools.hoverBotonMap["eliminacioncarreras-"+i.id])}}function oi(a,t){if(a&1&&(n(0,"option",43),c(1),o()),a&2){let e=t.$implicit;l("value",e),s(),y("",e," por p\xE1gina")}}function ri(a,t){if(a&1&&(n(0,"option",43),c(1),o()),a&2){let e=t.$implicit;l("value",e.id),s(),v(e.Nombre)}}function ai(a,t){if(a&1&&(n(0,"div",84)(1,"select",85),g(2,ri,2,2,"option",30),o(),n(3,"label"),c(4,"Instituci\xF3n"),o(),n(5,"div",52),c(6,"Este campo es obligatorio*"),o()()),a&2){let e=m(2);s(),l("ngClass",e.ValidacioncarrerasxElemento("instituciones_id")),s(),l("ngForOf",e.instituciones)}}function si(a,t){if(a&1&&(n(0,"option",86),c(1),o()),a&2){let e=t.$implicit;l("value",e.value)("disabled",e.disabled),s(),v(e.label)}}function li(a,t){if(a&1&&(n(0,"option",86),c(1),o()),a&2){let e=t.$implicit;l("value",e.value)("disabled",e.disabled),s(),v(e.label)}}function ci(a,t){if(a&1&&(n(0,"option",86),c(1),o()),a&2){let e=t.$implicit;l("value",e.value)("disabled",e.disabled),s(),v(e.label)}}function di(a,t){if(a&1&&(n(0,"option",86),c(1),o()),a&2){let e=t.$implicit;l("value",e.value)("disabled",e.disabled),s(),v(e.label)}}function mi(a,t){if(a&1&&(n(0,"option",86),c(1),o()),a&2){let e=t.$implicit;l("value",e.value)("disabled",e.disabled),s(),v(e.label)}}function pi(a,t){if(a&1&&(n(0,"option",86),c(1),o()),a&2){let e=t.$implicit;l("value",e.value)("disabled",e.disabled),s(),v(e.label)}}function ui(a,t){if(a&1){let e=h();n(0,"button",89),f("click",function(){p(e);let r=m(3);return u(r.AutoCompletarLastcarreras())}),n(1,"span",8),x(2,"ng-lottie",9),o(),n(3,"span"),c(4,"AUTO COMPLETAR "),o(),x(5,"span",10),o()}if(a&2){let e=m(3);s(2),l("options",e._tools.optionsautocompletar)}}function _i(a,t){if(a&1&&(n(0,"div",87),g(1,ui,6,1,"button",88),o()),a&2){let e=m(2);s(),l("ngIf",!e.AnimacionCargabtnModalcarreras)}}function gi(a,t){if(a&1){let e=h();n(0,"button",90),f("click",function(){p(e);let r=m().$implicit,d=m();return r.dismiss(),u(d.resetcarreras())}),n(1,"span",8),x(2,"ng-lottie",9),o(),n(3,"span"),c(4,"CANCELAR"),o(),x(5,"span",10),o()}if(a&2){let e=m(2);s(2),l("options",e._tools.optionscancelar)}}function fi(a,t){if(a&1){let e=h();n(0,"button",91),f("click",function(){p(e);let r=m(2);return u(r.AgregarModificarcarreras())}),x(1,"span",92),o()}a&2&&l("disabled",!0)}function xi(a,t){if(a&1){let e=h();n(0,"button",93),f("click",function(){p(e);let r=m(2);return u(r.AgregarModificarcarreras())}),n(1,"span",8),x(2,"ng-lottie",9),o(),n(3,"span"),c(4),o(),x(5,"span",10),o()}if(a&2){let e,i,r=m(2);s(2),l("options",(e=r.newcarreras.get("id"))!=null&&e.value?r._tools.optionsEditar:r._tools.optionsAdicionar),s(2),v((i=r.newcarreras.get("id"))!=null&&i.value?"MODIFICAR":"REGISTRAR")}}function vi(a,t){if(a&1){let e=h();n(0,"div",44)(1,"h4",45),c(2),o(),n(3,"button",46),f("click",function(){let r=p(e).$implicit,d=m();return r.dismiss(),u(d.resetcarreras())}),o()(),n(4,"div",47)(5,"form",48),g(6,ai,7,2,"div",49),n(7,"div",2)(8,"div",50)(9,"input",51),f("change",function(r){p(e);let d=m();return u(d._tools.EscribirEnMayuscula(r,d.newcarreras,"Area"))}),o(),n(10,"label"),c(11,"Area"),o(),n(12,"div",52),c(13,"Este campo es obligatorio*"),o()(),n(14,"div",50)(15,"input",53),f("change",function(r){p(e);let d=m();return u(d._tools.EscribirEnMayuscula(r,d.newcarreras,"Mencion"))}),o(),n(16,"label"),c(17,"Mencion"),o(),n(18,"div",52),c(19,"Este campo es obligatorio*"),o()(),n(20,"div",50)(21,"input",54),f("change",function(r){p(e);let d=m();return u(d._tools.EscribirEnMayuscula(r,d.newcarreras,"Resolucion"))}),o(),n(22,"label"),c(23,"Resolucion"),o(),n(24,"div",52),c(25,"Este campo es obligatorio*"),o()(),n(26,"div",50)(27,"input",55),f("change",function(r){p(e);let d=m();return u(d._tools.EscribirEnMayuscula(r,d.newcarreras,"NombreCarrera"))}),o(),n(28,"label"),c(29,"Nombre de Carrera"),o(),n(30,"div",52),c(31,"Este campo es obligatorio*"),o()()(),n(32,"div",2)(33,"div",56)(34,"input",57),f("change",function(r){p(e);let d=m();return u(d._tools.EscribirEnMayuscula(r,d.newcarreras,"HorasTotales"))}),o(),n(35,"label"),c(36,"Horas Totales"),o(),n(37,"div",52),c(38,"Este campo es obligatorio*"),o()(),n(39,"div",56)(40,"select",58)(41,"option",59),c(42,"Seleccione una opci\xF3n"),o(),g(43,si,2,3,"option",60),o(),n(44,"label"),c(45,"Nivel"),o(),n(46,"div",52),c(47,"Este campo es obligatorio*"),o()(),n(48,"div",56)(49,"select",61)(50,"option",59),c(51,"Seleccione una opci\xF3n"),o(),g(52,li,2,3,"option",60),o(),n(53,"label"),c(54,"Cantidad Evaluaciones"),o(),n(55,"div",52),c(56,"Este campo es obligatorio*"),o()()(),n(57,"div",2)(58,"div",50),x(59,"input",62),n(60,"label"),c(61,"Limite M\xE1ximo Te\xF3rico"),o(),n(62,"div",52),c(63,"Este campo es obligatorio*"),o()(),n(64,"div",50),x(65,"input",63),n(66,"label"),c(67,"Limite M\xE1ximo Pr\xE1ctico"),o(),n(68,"div",52),c(69,"Este campo es obligatorio*"),o()(),n(70,"div",50),x(71,"input",64),n(72,"label"),c(73,"Nota M\xEDnima Aprobaci\xF3n"),o(),n(74,"div",52),c(75,"Este campo es obligatorio*"),o()(),n(76,"div",50),x(77,"input",65),n(78,"label"),c(79,"Nota M\xEDnima 2da Instancia"),o(),n(80,"div",52),c(81,"Este campo es obligatorio*"),o()()(),n(82,"div",2)(83,"div",56)(84,"input",66),f("change",function(r){p(e);let d=m();return u(d._tools.EscribirEnMayuscula(r,d.newcarreras,"TituloOficial"))}),o(),n(85,"label"),c(86,"Titulo Oficial"),o(),n(87,"div",52),c(88,"Este campo es obligatorio*"),o()(),n(89,"div",56)(90,"select",67)(91,"option",59),c(92,"Seleccione una opci\xF3n"),o(),g(93,ci,2,3,"option",60),o(),n(94,"label"),c(95,"Programa"),o(),n(96,"div",52),c(97,"Este campo es obligatorio*"),o()(),n(98,"div",56)(99,"input",68),f("change",function(r){p(e);let d=m();return u(d._tools.EscribirEnMayuscula(r,d.newcarreras,"Duracion"))}),o(),n(100,"label"),c(101,"Duracion"),o(),n(102,"div",52),c(103,"Este campo es obligatorio*"),o()()(),n(104,"div",2)(105,"div",69)(106,"input",70),f("change",function(r){p(e);let d=m();return u(d._tools.EscribirEnMayuscula(r,d.newcarreras,"Capacitacion"))}),o(),n(107,"label"),c(108,"Capacitaci\xF3n"),o(),n(109,"div",52),c(110,"Este campo es obligatorio*"),o()(),n(111,"div",69)(112,"input",71),f("change",function(r){p(e);let d=m();return u(d._tools.EscribirEnMayuscula(r,d.newcarreras,"CarreraProfesional"))}),o(),n(113,"label"),c(114,"Carrera Profesional"),o(),n(115,"div",52),c(116,"Este campo es obligatorio*"),o()()(),n(117,"div",2)(118,"div",56)(119,"select",72)(120,"option",59),c(121,"Seleccione una opci\xF3n"),o(),g(122,di,2,3,"option",60),o(),n(123,"label"),c(124,"Modalidad"),o(),n(125,"div",52),c(126,"Este campo es obligatorio*"),o()(),n(127,"div",56)(128,"select",73)(129,"option",59),c(130,"Seleccione una opci\xF3n"),o(),g(131,mi,2,3,"option",60),o(),n(132,"label"),c(133,"Visibilidad"),o(),n(134,"div",52),c(135,"Este campo es obligatorio*"),o()(),n(136,"div",56)(137,"select",74)(138,"option",59),c(139,"Seleccione una opci\xF3n"),o(),g(140,pi,2,3,"option",60),o(),n(141,"label"),c(142,"Estado"),o(),n(143,"div",52),c(144,"Este campo es obligatorio*"),o()(),n(145,"div",75)(146,"label"),c(147,"Descripci\xF3n"),o(),x(148,"quill-editor",76),n(149,"div",52),c(150,"Este campo es obligatorio*"),o()()()()(),n(151,"div",77),g(152,_i,2,1,"div",78),n(153,"div",79),g(154,gi,6,1,"button",80),o(),n(155,"div",81),g(156,fi,2,1,"button",82)(157,xi,6,2,"button",83),o()()}if(a&2){let e,i=m();s(2),y("",(e=i.newcarreras.get("id"))!=null&&e.value?"Modificar":"Registrar"," carreras"),s(3),l("formGroup",i.newcarreras),s(),l("ngIf",i.esSuperAdmin),s(3),l("ngClass",i.ValidacioncarrerasxElemento("Area")),s(6),l("ngClass",i.ValidacioncarrerasxElemento("Mencion")),s(6),l("ngClass",i.ValidacioncarrerasxElemento("Resolucion")),s(6),l("ngClass",i.ValidacioncarrerasxElemento("NombreCarrera")),s(7),l("ngClass",i.ValidacioncarrerasxElemento("HorasTotales")),s(6),l("ngClass",i.ValidacioncarrerasxElemento("Nivel")),s(3),l("ngForOf",i.nivelcarreraOptions),s(6),l("ngClass",i.ValidacioncarrerasxElemento("CantidadEvaluaciones")),s(3),l("ngForOf",i.cantidadevaluacionesOptions),s(7),l("ngClass",i.ValidacioncarrerasxElemento("LimiteMaxTeorico")),s(6),l("ngClass",i.ValidacioncarrerasxElemento("LimiteMaxPractico")),s(6),l("ngClass",i.ValidacioncarrerasxElemento("NotaAprobacion")),s(6),l("ngClass",i.ValidacioncarrerasxElemento("NotaMinRevalida")),s(7),l("ngClass",i.ValidacioncarrerasxElemento("TituloOficial")),s(6),l("ngClass",i.ValidacioncarrerasxElemento("Programa")),s(3),l("ngForOf",i.programaOptions),s(6),l("ngClass",i.ValidacioncarrerasxElemento("Duracion")),s(7),l("ngClass",i.ValidacioncarrerasxElemento("Capacitacion")),s(6),l("ngClass",i.ValidacioncarrerasxElemento("CarreraProfesional")),s(7),l("ngClass",i.ValidacioncarrerasxElemento("Modalidad")),s(3),l("ngForOf",i.modalidadOptions),s(6),l("ngClass",i.ValidacioncarrerasxElemento("Visibilidad")),s(3),l("ngForOf",i.visibilidadOptions),s(6),l("ngClass",i.ValidacioncarrerasxElemento("Estado")),s(3),l("ngForOf",i.estadoOptions),s(8),l("modules",i.modulesQuillEdicion)("ngClass",i.ValidacioncarrerasxElemento("Descripcion")),s(4),l("ngIf",!i.newcarreras.get("id").value),s(2),l("ngIf",!i.AnimacionCargabtnModalcarreras),s(2),l("ngIf",i.AnimacionCargabtnModalcarreras),s(),l("ngIf",!i.AnimacionCargabtnModalcarreras)}}function Ci(a,t){if(a&1){let e=h();n(0,"button",96),f("click",function(){let r=p(e).$implicit;return u(r.action())}),c(1),o()}if(a&2){let e=t.$implicit;s(),y(" ",e.label," ")}}function hi(a,t){if(a&1&&(n(0,"div",94),P(1,"async"),P(2,"async"),g(3,Ci,2,1,"button",95),P(4,"async"),o()),a&2){let e,i,r=m();l("ngStyle",M(8,Gt,((e=R(1,2,r.menuStatecarreras$))==null?null:e.y)+"px",((e=R(2,4,r.menuStatecarreras$))==null?null:e.x)+"px")),s(3),l("ngForOf",(i=R(4,6,r.menuStatecarreras$))==null?null:i.items)}}var Oe=class Oe{constructor(t,e,i,r,d){this._carr=t;this._tools=e;this._inst=i;this._controles=r;this._auth=d;this.modulesQuillEdicion={toolbar:[["bold","italic","underline","strike"],[{align:[]}],[{size:["small",!1,"large"]}],[{color:[]},{background:[]}],[{font:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","video"],["clean"]]};this.modulesQuillShow={toolbar:!1};this.esSuperAdmin=!1;this.estadoOptions=[];this.visibilidadOptions=[];this.programaOptions=[];this.modalidadOptions=[];this.nivelcarreraOptions=[];this.cantidadevaluacionesOptions=[];this.carreras=[];this.paginacarreras=1;this.isLoadingcarreras=!0;this.AnimacionCargabtnModalcarreras=!1;this.filtertxtcarreras="";this.collectionSizecarreras=0;this.pageSizecarreras=10;this.pageSizeOptionscarreras=[5,10,20,50];this.sortColumnscarreras=[];this.menuStatecarreras$=this._tools.state$;this.instituciones=[];this.newcarreras=this._carr.createFormGroupcarreras(),this.newcarrerasAnteriorAccion=this._carr.createFormGroupcarreras()}ngOnInit(){this.Cargarcarreras(),this.cargarInstituciones(),this.cargarOptionsDesdeControles(),this._auth.revisarSiEsSuperAdmin().subscribe(t=>this.esSuperAdmin=t)}cargarOptionsDesdeControles(){let t=["ESTADO","VISIBILIDAD","PROGRAMA","MODALIDAD","NIVEL DE CARRERA","CANTIDAD DE EVALUACIONES"];this._controles.ObtenerOptionsSelectPorCategorias(t).subscribe({next:e=>{this.estadoOptions=e?.ESTADO||[],this.visibilidadOptions=e?.VISIBILIDAD||[],this.programaOptions=e?.PROGRAMA||[],this.modalidadOptions=e?.MODALIDAD||[],this.nivelcarreraOptions=e?.["NIVEL DE CARRERA"]||[],this.cantidadevaluacionesOptions=e?.["CANTIDAD DE EVALUACIONES"]||[]},error:()=>{this.estadoOptions=[],this.visibilidadOptions=[],this.programaOptions=[],this.modalidadOptions=[],this.nivelcarreraOptions=[],this.cantidadevaluacionesOptions=[]}})}abrirModalNuevoCarreras(){this.modalGestioncarrerasRef=this._tools.openModal(this.modalgestioncarreras,"xl")}Cargarcarreras(){this.isLoadingcarreras=!0,this._carr.Obtenercarreras().subscribe({next:t=>{console.log(t),this.carreras=t.data||[],this.collectionSizecarreras=this.carreras.length,this.isLoadingcarreras=!1},error:t=>{console.error("Error al cargar carreras",t),this.isLoadingcarreras=!1}})}AgregarModificarcarreras(){if(this.newcarreras.invalid){this.ValidacionTodoElementocarreras(),this._tools.MostrarMensajeFrmIncompleto(),this.AnimacionCargabtnModalcarreras=!1;return}else{this.AnimarCargaTablacarreras(),this.AnimacionCargabtnModalcarreras=!0,this._tools.MostrarMensajeLoading(),this.newcarrerasAnteriorAccion.setValue(this.newcarreras.value);let t=this.newcarreras.controls.id.value;console.log("INFO A PROCESAR",this.newcarreras.value),t?this._carr.Modificarcarreras(this.newcarreras.value,this.newcarreras.value.id).subscribe(e=>{console.log("SE MODIFICO CORRECTAMENTE carreras",e.data),this.Cargarcarreras(),this.resetcarreras(),this.AnimacionCargabtnModalcarreras=!1,this._tools.MostrarMensajeSuccess()},e=>{console.log("ERROR AL MODIFICAR carreras",e),this.AnimacionCargabtnModalcarreras=!1,this._tools.MostrarMensajeError()}):this._carr.Agregarcarreras(this.newcarreras.value).subscribe(e=>{console.log("SE A\xD1ADIO CORRECTAMENTE carreras",e.data),this.Cargarcarreras(),this.resetcarreras(),this.AnimacionCargabtnModalcarreras=!1,this._tools.MostrarMensajeSuccess()},e=>{console.log("ERROR AL A\xD1ADIR carreras",e),this.AnimacionCargabtnModalcarreras=!1,this._tools.MostrarMensajeError()})}}Seleccionarcarreras(t){if(this._tools.MostrarMensajeLoading(),t){if(!this.carreras.find(i=>i.id===t))return;this._carr.Seleccionarcarreras(t).subscribe(i=>{Object.keys(this.newcarreras.controls).forEach(r=>{this.newcarreras.controls[r].setValue(i.data[r])}),console.log("SELECCION DE carreras EXITOSA",this.newcarreras.value),this.newcarrerasAnteriorAccion.setValue(this.newcarreras.value),this.modalGestioncarrerasRef=this._tools.openModal(this.modalgestioncarreras,"xl"),this._tools.MostrarMensajeSuccess()},i=>{console.log("ERROR AL SELECCIONAR carreras",i),this._tools.MostrarMensajeError()})}}Eliminarcarreras(t){this._tools.mostrarMensajeConfirm("\xBFSEGURO QUE DESEA ELIMINAR?","SE ELIMINARA EL DATO Y NO SE PODR\xC1 RECUPERAR EL DATO","warning","SI, ESTOY SEGURO","NO").then(e=>{e&&(this._tools.MostrarMensajeLoading(),this._carr.Eliminarcarreras(t).subscribe(i=>{console.log(i.data),this.Cargarcarreras(),this._tools.MostrarMensajeSuccess()},i=>{console.log("ERROR AL ELIMINAR carreras",i),this._tools.MostrarMensajeError()}))})}resetcarreras(){this.newcarreras=this._carr.createFormGroupcarreras(),this._tools.closeModal(this.modalGestioncarrerasRef)}AutoCompletarLastcarreras(){this.newcarreras.setValue(this.newcarrerasAnteriorAccion.value),this.newcarreras.patchValue({id:0}),console.log("listo",this.newcarreras.value)}AnimarCargaTablacarreras(){this.carreras=[],this.isLoadingcarreras=!0}ValidacioncarrerasxElemento(t){return this._tools.obtenerValidationClass(this.newcarreras,t)}ValidacionTodoElementocarreras(){Object.values(this.newcarreras.controls).forEach(t=>{t.markAsTouched(),t.markAsDirty()})}onPageSizeChangecarreras(){this.paginacarreras=1}sortBycarreras(t,e){this.sortColumnscarreras=this._tools.handleSort(t,e,this.sortColumnscarreras),this.carreras=this._tools.applyMultiSort(this.carreras,this.sortColumnscarreras)}isSortedcarreras(t){return this._tools.isSorted(this.sortColumnscarreras,t)}getSortDircarreras(t){return this._tools.getSortDirection(this.sortColumnscarreras,t)}closeMenu(){this._tools.close()}abrirMenucarreras(t,e){t.preventDefault(),t.stopPropagation(),console.log("aS",e);let i=[{label:"\u270F Editar",action:()=>this.Seleccionarcarreras(e.id)},{label:"\u{1F5D1}\uFE0F Eliminar",action:()=>this.Eliminarcarreras(e.id)}];this._tools.open(t.clientX,t.clientY,i)}cargarInstituciones(){this._inst.Obtenerinstituciones().subscribe({next:t=>{console.log(t),this.instituciones=t.data||[]},error:t=>{console.error("Error al cargar instituciones",t)}})}};Oe.\u0275fac=function(e){return new(e||Oe)(A(oe),A(ne),A(Mt),A(Ie),A(te))},Oe.\u0275cmp=U({type:Oe,selectors:[["app-carreras"]],viewQuery:function(e,i){if(e&1&&de(Lt,7),e&2){let r;me(r=pe())&&(i.modalgestioncarreras=r.first)}},hostBindings:function(e,i){e&1&&f("click",function(){return i.closeMenu()},ve)},standalone:!1,decls:70,vars:31,consts:[["modalgestioncarreras",""],[1,"container","mt-4"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"lead","text-secondary","subtitulosGlobales"],[1,"button","col-sm-3","d-flex","justify-content-start"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","width","30px","height","30px"],["width","50px","height","50px",3,"options"],[1,"dir-part"],[1,"col-sm-3","ms-auto","d-flex","justify-content-end"],[1,"input-group"],[1,"input-group-text"],["width","30px","height","30px",3,"options"],[1,"form-floating"],["type","text","placeholder","Buscar","title","Filtrar/Buscar",1,"form-control",3,"input","ngModelChange","ngModel"],[1,"mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-sm","align-middle"],[1,""],[1,"text-center"],["style","user-select: none; -webkit-user-select: none; -moz-user-select: none;",3,"click",4,"ngIf"],[2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["class","bi",3,"ngClass",4,"ngIf"],[4,"ngIf"],["style","cursor: pointer;",3,"contextmenu",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["previousLabel","Anterior","nextLabel","Siguiente",3,"pageChange","page","collectionSize","pageSize","maxSize","rotate","ellipses","boundaryLinks"],[1,"form-select",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","context-menu",3,"ngStyle",4,"ngIf"],[1,"bi",3,"ngClass"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[2,"cursor","pointer",3,"contextmenu"],[1,"text-center","d-flex","justify-content-center","align-items-center",2,"gap","5px"],["title","Modificar informaci\xF3n",1,"btn","btn-outline-warning","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src",4,"ngIf"],["width","30px","height","35px",3,"options",4,"ngIf"],["title","Eliminar informaci\xF3n",1,"btn","btn-outline-danger","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src"],["width","30px","height","35px",3,"options"],[3,"value"],[1,"modal-header"],[1,"modal-title"],["type","button","title","cerrar",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup"],["class","form-floating mb-3 col-sm-12",4,"ngIf"],[1,"form-floating","mb-3","col-sm-3"],["type","text","placeholder","","formControlName","Area",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"invalid-feedback"],["type","text","placeholder","","formControlName","Mencion",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Resolucion",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","NombreCarrera",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-4"],["type","text","placeholder","","formControlName","HorasTotales",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","Nivel",1,"form-control",3,"ngClass"],["disabled","",3,"value"],[3,"value","disabled",4,"ngFor","ngForOf"],["formControlName","CantidadEvaluaciones",1,"form-control",3,"ngClass"],["type","number","placeholder","","formControlName","LimiteMaxTeorico",1,"form-control",3,"ngClass"],["type","number","placeholder","","formControlName","LimiteMaxPractico",1,"form-control",3,"ngClass"],["type","number","placeholder","","formControlName","NotaAprobacion",1,"form-control",3,"ngClass"],["type","number","placeholder","","formControlName","NotaMinRevalida",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","TituloOficial",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","Programa",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","Duracion",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-6"],["type","text","placeholder","","formControlName","Capacitacion",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","CarreraProfesional",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","Modalidad",1,"form-control",3,"ngClass"],["formControlName","Visibilidad",1,"form-control",3,"ngClass"],["formControlName","Estado",1,"form-control",3,"ngClass"],[1,"mb-3","col-sm-12"],["placeholder","","formControlName","Descripcion",1,"quill-container-wrapper",2,"text-transform","uppercase",3,"modules","ngClass"],[1,"modal-footer"],["class","button d-flex justify-content-start",4,"ngIf"],[1,"button","me-2"],["title","Cancelar y cerrar","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],[1,"button"],["class","btn mouse-dir success","title","Procesando informaci\xF3n",3,"disabled","click",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;","title","Accionar",3,"click",4,"ngIf"],[1,"form-floating","mb-3","col-sm-12"],["formControlName","instituciones_id",1,"form-control",3,"ngClass"],[3,"value","disabled"],[1,"button","d-flex","justify-content-start"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Cancelar y cerrar",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Procesando informaci\xF3n",1,"btn","mouse-dir","success",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["title","Accionar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[1,"context-menu",3,"ngStyle"],["class","context-item",3,"click",4,"ngFor","ngForOf"],[1,"context-item",3,"click"]],template:function(e,i){if(e&1){let r=h();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),c(4,"Gesti\xF3n de carreras"),o(),n(5,"p",5),c(6,"Administra la informaci\xF3n de los carreras de manera sencilla y eficiente"),o()()()(),n(7,"div",2)(8,"div",6)(9,"button",7),f("click",function(){return p(r),u(i.abrirModalNuevoCarreras())}),n(10,"span",8),x(11,"ng-lottie",9),o(),n(12,"span"),c(13,"A\xF1adir carreras "),o(),x(14,"span",10),o()(),n(15,"div",11)(16,"div",12)(17,"span",13),x(18,"ng-lottie",14),o(),n(19,"div",15)(20,"input",16),f("input",function(){return p(r),u(i.paginacarreras=1)}),O("ngModelChange",function(_){return p(r),T(i.filtertxtcarreras,_)||(i.filtertxtcarreras=_),u(_)}),o(),n(21,"label"),c(22,"Buscar"),o()()()()(),n(23,"div",17)(24,"div",18)(25,"table",19)(26,"thead",20)(27,"tr")(28,"th",21),c(29,"#"),o(),g(30,Bt,3,1,"th",22),n(31,"th",23),f("click",function(_){return p(r),u(i.sortBycarreras("NombreCarrera",_))}),c(32," NombreCarrera "),g(33,$t,1,4,"i",24),o(),n(34,"th",23),f("click",function(_){return p(r),u(i.sortBycarreras("Area",_))}),c(35," Area "),g(36,zt,1,4,"i",24),o(),n(37,"th",23),f("click",function(_){return p(r),u(i.sortBycarreras("Mencion",_))}),c(38," Mencion "),g(39,Ht,1,4,"i",24),o(),n(40,"th",23),f("click",function(_){return p(r),u(i.sortBycarreras("Resolucion",_))}),c(41," Resolucion "),g(42,Ut,1,4,"i",24),o(),n(43,"th",23),f("click",function(_){return p(r),u(i.sortBycarreras("Nivel",_))}),c(44," Nivel "),g(45,Wt,1,4,"i",24),o(),n(46,"th",23),f("click",function(_){return p(r),u(i.sortBycarreras("HorasTotales",_))}),c(47," HorasTotales "),g(48,qt,1,4,"i",24),o(),n(49,"th",23),f("click",function(_){return p(r),u(i.sortBycarreras("Visibilidad",_))}),c(50," Visibilidad "),g(51,Kt,1,4,"i",24),o(),n(52,"th",23),f("click",function(_){return p(r),u(i.sortBycarreras("Estado",_))}),c(53," Estado "),g(54,Qt,1,4,"i",24),o(),n(55,"th",21),c(56,"ACCIONES"),o()()(),n(57,"tbody"),g(58,Yt,5,1,"tr",25)(59,Jt,3,1,"tr",25)(60,ni,27,14,"tr",26),P(61,"slice"),o()()(),n(62,"div",27)(63,"ngb-pagination",28),O("pageChange",function(_){return p(r),T(i.paginacarreras,_)||(i.paginacarreras=_),u(_)}),o(),n(64,"select",29),O("ngModelChange",function(_){return p(r),T(i.pageSizecarreras,_)||(i.pageSizecarreras=_),u(_)}),f("change",function(){return p(r),u(i.onPageSizeChangecarreras())}),g(65,oi,2,2,"option",30),o()()(),g(66,vi,158,34,"ng-template",null,0,$)(68,hi,5,11,"div",31),P(69,"async")}if(e&2){let r;s(11),l("options",i._tools.optionsAdicionar),s(7),l("options",i._tools.optionslupa),s(2),I("ngModel",i.filtertxtcarreras),s(10),l("ngIf",i.esSuperAdmin),s(3),l("ngIf",i.isSortedcarreras("NombreCarrera")),s(3),l("ngIf",i.isSortedcarreras("Area")),s(3),l("ngIf",i.isSortedcarreras("Mencion")),s(3),l("ngIf",i.isSortedcarreras("Resolucion")),s(3),l("ngIf",i.isSortedcarreras("Nivel")),s(3),l("ngIf",i.isSortedcarreras("HorasTotales")),s(3),l("ngIf",i.isSortedcarreras("Visibilidad")),s(3),l("ngIf",i.isSortedcarreras("Estado")),s(4),l("ngIf",i.isLoadingcarreras),s(),l("ngIf",!i.isLoadingcarreras&&(!i.carreras||i.carreras.length===0)),s(),l("ngForOf",W(61,25,i.carreras,(i.paginacarreras-1)*i.pageSizecarreras,i.paginacarreras*i.pageSizecarreras)),s(3),I("page",i.paginacarreras),l("collectionSize",i.collectionSizecarreras)("pageSize",i.pageSizecarreras)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),s(),I("ngModel",i.pageSizecarreras),s(),l("ngForOf",i.pageSizeOptionscarreras),s(3),l("ngIf",(r=R(69,29,i.menuStatecarreras$))==null?null:r.visible)}},dependencies:[q,K,Q,Ce,ye,Z,ee,Se,tt,X,Y,Ee,J,Me,we,Ae,ie,wt,he,be],encapsulation:2});var Ve=Oe;var _e=class _e{constructor(t){this.http=t;this.ruta=Ze.ruta}Obtenerplandeestudios(t){let e=new Je,i=t||{};return i?.anio_id&&(e=e.set("anio_id",String(i.anio_id))),i?.resolucion&&(e=e.set("resolucion",String(i.resolucion))),i?.nivel&&(e=e.set("nivel",String(i.nivel))),i?.instituciones_id&&(e=e.set("instituciones_id",String(i.instituciones_id))),this.http.get(this.ruta+"api/plandeestudios/",{params:e})}Agregarplandeestudios(t){return this.http.post(this.ruta+"api/plandeestudios/",t)}Modificarplandeestudios(t,e){return this.http.put(this.ruta+"api/plandeestudios/"+e,t)}Seleccionarplandeestudios(t){return this.http.get(this.ruta+"api/plandeestudios/"+t)}Eliminarplandeestudios(t){return this.http.delete(this.ruta+"api/plandeestudios/"+t)}createFormGroupplandeestudios(){return new et({id:new N(0),carreras_id:new N("",[k.required]),Rango:new N("",[k.required]),RangoLvlCurso:new N("",[k.required]),LvlCurso:new N("",[k.required]),Horas:new N("",[k.required]),anio_id:new N("",[k.required]),ModoMateria:new N("1 DOCENTE x MATERIA",[k.required]),NombreMateria:new N("",[k.required]),SiglaMateria:new N("",[k.required]),Prerrequisitos:new N(""),SiglasPrerrequisitos:new N(""),TipoMateria:new N("TE\xD3RICO",[k.required]),RelacionDocenteCursoAEstudiante:new N("NINGUNA",[k.required])})}};_e.\u0275fac=function(e){return new(e||_e)(Ue(Xe))},_e.\u0275prov=ze({token:_e,factory:_e.\u0275fac,providedIn:"root"});var De=_e;var Ne=class Ne{transform(t,e,i,r=!0,d=4){if(!t||!Array.isArray(t)||t.length===0)return[];let _=(e??"").toString().trim();if(!_)return t;let C=_.split(/\s+/g).map(b=>this.normalizarTexto(b).toLowerCase()).filter(Boolean);if(C.length===0)return t;let S=this.normalizarTexto(_).toLowerCase(),E=t.map((b,w)=>{let V=this.buildHaystack(b,i,d);if(!(r?C.every(D=>this.tokenMatches(V,D)):C.some(D=>this.tokenMatches(V,D))))return{item:b,idx:w,score:-1};let F=this.computeScore(V,S,C);return{item:b,idx:w,score:F}}).filter(b=>b.score>=0);return E.sort((b,w)=>w.score-b.score||b.idx-w.idx),E.map(b=>b.item)}buildHaystack(t,e,i=4){let r=[];if(Array.isArray(e)&&e.length>0){for(let C of e){let S=this.getByPath(t,C),E=this.normalizarTexto(S).toLowerCase();E&&r.push(E)}return r.join(" ")}let d=new Set,_=(C,S)=>{if(C==null||S<0)return;let E=typeof C;if(E==="string"||E==="number"||E==="boolean"||C instanceof Date){let b=this.normalizarTexto(C).toLowerCase();b&&r.push(b);return}if(Array.isArray(C)){for(let b of C)_(b,S-1);return}if(E==="object"){if(d.has(C))return;d.add(C);for(let b of Object.keys(C))_(C[b],S-1)}};return _(t,i),r.join(" ")}tokenMatches(t,e){return e?e.length<=1?new RegExp(`\\b${this.escapeRegExp(e)}\\b`,"i").test(t):new RegExp(`\\b${this.escapeRegExp(e)}\\b`,"i").test(t)||t.includes(e):!0}computeScore(t,e,i){let r=0;if(e&&t.includes(e)){r+=120;let _=t.indexOf(e);r+=Math.max(0,40-Math.min(_,40))}let d=[];for(let _ of i){if(!_)continue;let C=new RegExp(`\\b${this.escapeRegExp(_)}\\b`,"i").test(t);r+=C?30:10;let S=t.indexOf(_);S>=0&&d.push(S)}if(d.length>=2){let _=Math.min(...d),S=Math.max(...d)-_;r+=Math.max(0,40-S/5)}return r}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}getByPath(t,e){return!t||!e?"":e.includes(".")?e.split(".").reduce((i,r)=>i?.[r],t):t?.[e]}normalizarTexto(t){if(t==null)return"";let e="";try{e=typeof t=="string"?t:String(t)}catch{e=""}return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}};Ne.\u0275fac=function(e){return new(e||Ne)},Ne.\u0275pipe=qe({name:"filterByText",type:Ne,pure:!0,standalone:!1});var nt=Ne;var Mi=["modalAccionesMaterias"],wi=["modalgestionmaterias"],Ai=()=>["LvlCurso","Nivel","Paralelo","Turno","NombreMateria","SiglaMateria","ModoAsistencia","EstadoHabilitacion","EstadoEnvio","Anio","Resolucion"],Fe=(a,t)=>({"bi-caret-up":a,"bi-caret-down":t}),Ii=(a,t)=>({top:a,left:t});function Ti(a,t){if(a&1&&(n(0,"option",15),c(1),o()),a&2){let e=t.$implicit;l("ngValue",e.id),s(),v(e.Anio)}}function Oi(a,t){if(a&1&&(n(0,"option",15),c(1),o()),a&2){let e=t.$implicit;l("ngValue",e.key),s(),v(e.label)}}function Vi(a,t){if(a&1&&x(0,"i",40),a&2){let e=m(2);l("ngClass",M(1,Fe,e.getSortDirmaterias("LvlCurso")==="asc",e.getSortDirmaterias("LvlCurso")==="desc"))}}function Di(a,t){if(a&1&&x(0,"i",40),a&2){let e=m(2);l("ngClass",M(1,Fe,e.getSortDirmaterias("Paralelo")==="asc",e.getSortDirmaterias("Paralelo")==="desc"))}}function Ni(a,t){if(a&1&&x(0,"i",40),a&2){let e=m(2);l("ngClass",M(1,Fe,e.getSortDirmaterias("Turno")==="asc",e.getSortDirmaterias("Turno")==="desc"))}}function Pi(a,t){if(a&1&&x(0,"i",40),a&2){let e=m(2);l("ngClass",M(1,Fe,e.getSortDirmaterias("NombreMateria")==="asc",e.getSortDirmaterias("NombreMateria")==="desc"))}}function Ri(a,t){if(a&1&&x(0,"i",40),a&2){let e=m(2);l("ngClass",M(1,Fe,e.getSortDirmaterias("ModoAsistencia")==="asc",e.getSortDirmaterias("ModoAsistencia")==="desc"))}}function Fi(a,t){if(a&1&&x(0,"i",40),a&2){let e=m(2);l("ngClass",M(1,Fe,e.getSortDirmaterias("EstadoHabilitacion")==="asc",e.getSortDirmaterias("EstadoHabilitacion")==="desc"))}}function ki(a,t){a&1&&(n(0,"tr")(1,"td",31)(2,"div",41)(3,"span",42),c(4,"Cargando..."),o()()()()),a&2&&(s(),B("colspan",9))}function Li(a,t){a&1&&(n(0,"tr")(1,"td",31),c(2,"No hay datos disponibles"),o()()),a&2&&(s(),B("colspan",9))}function Gi(a,t){if(a&1&&x(0,"img",50),a&2){let e=m(3);l("src",e._tools.rutabtniconsanimaciones+"pencil.svg",G)}}function ji(a,t){if(a&1&&x(0,"ng-lottie",51),a&2){let e=m(3);l("options",e._tools.optionsEditar)}}function Bi(a,t){if(a&1&&x(0,"img",50),a&2){let e=m(3);l("src",e._tools.rutabtniconsanimaciones+"delete.svg",G)}}function $i(a,t){if(a&1&&x(0,"ng-lottie",51),a&2){let e=m(3);l("options",e._tools.optionsEliminar)}}function zi(a,t){if(a&1){let e=h();n(0,"tr",43),f("contextmenu",function(r){let d=p(e).$implicit,_=m(2);return u(_.abrirMenumaterias(r,d))}),n(1,"td",31),c(2),o(),n(3,"td"),c(4),n(5,"div",44),c(6),o()(),n(7,"td"),c(8),o(),n(9,"td"),c(10),o(),n(11,"td"),c(12),n(13,"div",44),c(14),o()(),n(15,"td"),c(16),o(),n(17,"td"),c(18),o(),n(19,"td",45)(20,"button",46),f("click",function(){let r=p(e).$implicit,d=m(2);return u(d.Seleccionarmaterias(r.id))})("mouseenter",function(){let r=p(e).$implicit,d=m(2);return u(d._tools.hoverBotonMap["edicionmaterias-"+r.id]=!0)})("mouseleave",function(){let r=p(e).$implicit,d=m(2);return u(d._tools.hoverBotonMap["edicionmaterias-"+r.id]=!1)}),g(21,Gi,1,1,"img",47)(22,ji,1,1,"ng-lottie",48),o(),n(23,"button",49),f("click",function(){let r=p(e).$implicit,d=m(2);return u(d.Eliminarmaterias(r.id))})("mouseenter",function(){let r=p(e).$implicit,d=m(2);return u(d._tools.hoverBotonMap["eliminacionmaterias-"+r.id]=!0)})("mouseleave",function(){let r=p(e).$implicit,d=m(2);return u(d._tools.hoverBotonMap["eliminacionmaterias-"+r.id]=!1)}),g(24,Bi,1,1,"img",47)(25,$i,1,1,"ng-lottie",48),o()()()}if(a&2){let e=t.$implicit,i=t.index,r=m(2);s(2),v((r.paginamaterias-1)*r.pageSizematerias+(i+1)),s(2),y(" ",e.LvlCurso," "),s(2),v(e.Nivel),s(2),v(e.Paralelo),s(2),v(e.Turno),s(2),y("",e.NombreMateria," "),s(2),ue("A\xF1o: ",e.Anio," \xB7 Res: ",e.Resolucion),s(2),v(e.ModoAsistencia),s(2),v(e.EstadoHabilitacion),s(3),l("ngIf",!r._tools.hoverBotonMap["edicionmaterias-"+e.id]),s(),l("ngIf",r._tools.hoverBotonMap["edicionmaterias-"+e.id]),s(2),l("ngIf",!r._tools.hoverBotonMap["eliminacionmaterias-"+e.id]),s(),l("ngIf",r._tools.hoverBotonMap["eliminacionmaterias-"+e.id])}}function Hi(a,t){if(a&1&&(n(0,"option",52),c(1),o()),a&2){let e=t.$implicit;l("value",e),s(),y("",e," por p\xE1gina")}}function Ui(a,t){if(a&1){let e=h();n(0,"div",27)(1,"div",28)(2,"table",29)(3,"thead",30)(4,"tr")(5,"th",31),c(6,"#"),o(),n(7,"th",32),f("click",function(r){p(e);let d=m();return u(d.sortBymaterias("LvlCurso",r))}),c(8," LvlCurso "),g(9,Vi,1,4,"i",33),o(),n(10,"th",32),f("click",function(r){p(e);let d=m();return u(d.sortBymaterias("Paralelo",r))}),c(11," Paralelo "),g(12,Di,1,4,"i",33),o(),n(13,"th",32),f("click",function(r){p(e);let d=m();return u(d.sortBymaterias("Turno",r))}),c(14," Turno "),g(15,Ni,1,4,"i",33),o(),n(16,"th",32),f("click",function(r){p(e);let d=m();return u(d.sortBymaterias("NombreMateria",r))}),c(17," NombreMateria "),g(18,Pi,1,4,"i",33),o(),n(19,"th",32),f("click",function(r){p(e);let d=m();return u(d.sortBymaterias("ModoAsistencia",r))}),c(20," ModoAsistencia "),g(21,Ri,1,4,"i",33),o(),n(22,"th",32),f("click",function(r){p(e);let d=m();return u(d.sortBymaterias("EstadoHabilitacion",r))}),c(23," EstadoHabilitacion "),g(24,Fi,1,4,"i",33),o(),n(25,"th",31),c(26,"ACCIONES"),o()()(),n(27,"tbody"),g(28,ki,5,1,"tr",34)(29,Li,3,1,"tr",34)(30,zi,26,14,"tr",35),P(31,"slice"),o()()(),n(32,"div",36)(33,"ngb-pagination",37),O("pageChange",function(r){p(e);let d=m();return T(d.paginamaterias,r)||(d.paginamaterias=r),u(r)}),o(),n(34,"select",38),O("ngModelChange",function(r){p(e);let d=m();return T(d.pageSizematerias,r)||(d.pageSizematerias=r),u(r)}),f("change",function(){p(e);let r=m();return u(r.onPageSizeChangematerias())}),g(35,Hi,2,2,"option",39),o()()()}if(a&2){let e=t.ngIf,i=m();s(9),l("ngIf",i.isSortedmaterias("LvlCurso")),s(3),l("ngIf",i.isSortedmaterias("Paralelo")),s(3),l("ngIf",i.isSortedmaterias("Turno")),s(3),l("ngIf",i.isSortedmaterias("NombreMateria")),s(3),l("ngIf",i.isSortedmaterias("ModoAsistencia")),s(3),l("ngIf",i.isSortedmaterias("EstadoHabilitacion")),s(4),l("ngIf",i.isLoadingmaterias),s(),l("ngIf",!i.isLoadingmaterias&&e.length===0),s(),l("ngForOf",W(31,18,e,(i.paginamaterias-1)*i.pageSizematerias,i.paginamaterias*i.pageSizematerias)),s(3),I("page",i.paginamaterias),l("collectionSize",e.length)("pageSize",i.pageSizematerias)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),s(),I("ngModel",i.pageSizematerias),s(),l("ngForOf",i.pageSizeOptionsmaterias)}}function Wi(a,t){if(a&1){let e=h();n(0,"div",80),f("click",function(){let r=p(e).$implicit,d=m(3);return u(d.seleccionarPlan(r))}),n(1,"div",81)(2,"h6",82),c(3),o(),n(4,"small"),c(5),o()(),n(6,"p",82),c(7),o()()}if(a&2){let e=t.$implicit;s(3),St(" ",e.RangoLvlCurso," | ",e.NombreMateria," (",e.SiglaMateria,") "),s(2),v(e.Anio),s(2),y(" Resoluci\xF3n: ",e.Resolucion," ")}}function qi(a,t){if(a&1&&(n(0,"div",78),g(1,Wi,8,5,"div",79),o()),a&2){let e=m(2);s(),l("ngForOf",e.planesFiltrados)}}function Ki(a,t){a&1&&(n(0,"div",83),c(1," Este campo es obligatorio* "),o())}function Qi(a,t){if(a&1&&(n(0,"option",84),c(1),o()),a&2){let e=t.$implicit;l("value",e.value)("disabled",e.disabled),s(),v(e.label)}}function Yi(a,t){if(a&1&&(n(0,"option",84),c(1),o()),a&2){let e=t.$implicit;l("value",e.value)("disabled",e.disabled),s(),v(e.label)}}function Ji(a,t){if(a&1&&(n(0,"option",84),c(1),o()),a&2){let e=t.$implicit;l("value",e.value)("disabled",e.disabled),s(),v(e.label)}}function Xi(a,t){if(a&1&&(n(0,"option",84),c(1),o()),a&2){let e=t.$implicit;l("value",e.value)("disabled",e.disabled),s(),v(e.label)}}function Zi(a,t){if(a&1){let e=h();n(0,"button",87),f("click",function(){p(e);let r=m(3);return u(r.AutoCompletarLastmaterias())}),n(1,"span",9),x(2,"ng-lottie",10),o(),n(3,"span"),c(4,"AUTO COMPLETAR "),o(),x(5,"span",11),o()}if(a&2){let e=m(3);s(2),l("options",e._tools.optionsautocompletar)}}function en(a,t){if(a&1&&(n(0,"div",85),g(1,Zi,6,1,"button",86),o()),a&2){let e=m(2);s(),l("ngIf",!e.AnimacionCargabtnModalmaterias)}}function tn(a,t){if(a&1){let e=h();n(0,"button",88),f("click",function(){p(e);let r=m().$implicit,d=m();return r.dismiss(),u(d.resetmaterias())}),n(1,"span",9),x(2,"ng-lottie",10),o(),n(3,"span"),c(4,"CANCELAR"),o(),x(5,"span",11),o()}if(a&2){let e=m(2);s(2),l("options",e._tools.optionscancelar)}}function nn(a,t){if(a&1){let e=h();n(0,"button",89),f("click",function(){p(e);let r=m(2);return u(r.AgregarModificarmaterias())}),x(1,"span",90),o()}a&2&&l("disabled",!0)}function on(a,t){if(a&1){let e=h();n(0,"button",91),f("click",function(){p(e);let r=m(2);return u(r.AgregarModificarmaterias())}),n(1,"span",9),x(2,"ng-lottie",10),o(),n(3,"span"),c(4),o(),x(5,"span",11),o()}if(a&2){let e,i,r=m(2);s(2),l("options",(e=r.newmaterias.get("id"))!=null&&e.value?r._tools.optionsEditar:r._tools.optionsAdicionar),s(2),v((i=r.newmaterias.get("id"))!=null&&i.value?"MODIFICAR":"REGISTRAR")}}function rn(a,t){if(a&1){let e=h();n(0,"div",53)(1,"h4",54),c(2),o(),n(3,"button",55),f("click",function(){let r=p(e).$implicit,d=m();return r.dismiss(),u(d.resetmaterias())}),o()(),n(4,"div",56)(5,"form",57)(6,"div",58)(7,"input",59),f("focus",function(){p(e);let r=m();return u(r.mostrarLista=!0)}),o(),g(8,qi,2,1,"div",60)(9,Ki,2,0,"div",61),o(),n(10,"div",62)(11,"input",63),f("change",function(r){p(e);let d=m();return u(d._tools.EscribirEnMayuscula(r,d.newmaterias,"Paralelo"))}),o(),n(12,"label"),c(13,"Paralelo"),o(),n(14,"div",64),c(15,"Este campo es obligatorio*"),o()(),n(16,"div",62)(17,"select",65)(18,"option",66),c(19,"Seleccione una opci\xF3n"),o(),g(20,Qi,2,3,"option",67),o(),n(21,"label"),c(22,"Turno"),o(),n(23,"div",64),c(24,"Este campo es obligatorio*"),o()(),n(25,"div",62)(26,"select",68)(27,"option",66),c(28,"Seleccione una opci\xF3n"),o(),g(29,Yi,2,3,"option",67),o(),n(30,"label"),c(31,"ModoAsistencia"),o(),n(32,"div",64),c(33,"Este campo es obligatorio*"),o()(),n(34,"div",62)(35,"select",69)(36,"option",66),c(37,"Seleccione una opci\xF3n"),o(),g(38,Ji,2,3,"option",67),o(),n(39,"label"),c(40,"EstadoHabilitacion"),o(),n(41,"div",64),c(42,"Este campo es obligatorio*"),o()(),n(43,"div",62)(44,"select",70)(45,"option",66),c(46,"Seleccione una opci\xF3n"),o(),g(47,Xi,2,3,"option",67),o(),n(48,"label"),c(49,"EstadoEnvio"),o(),n(50,"div",64),c(51,"Este campo es obligatorio*"),o()()()(),n(52,"div",71),g(53,en,2,1,"div",72),n(54,"div",73),g(55,tn,6,1,"button",74),o(),n(56,"div",75),g(57,nn,2,1,"button",76)(58,on,6,2,"button",77),o()()}if(a&2){let e,i,r=m();s(2),y("",(e=r.newmaterias.get("id"))!=null&&e.value?"Modificar":"Registrar"," materias"),s(3),l("formGroup",r.newmaterias),s(2),l("formControl",r.planInput),s(),l("ngIf",r.mostrarLista&&r.planInput.value),s(),l("ngIf",(i=r.newmaterias.get("plandeestudios_id"))==null?null:i.invalid),s(2),l("ngClass",r.ValidacionmateriasxElemento("Paralelo")),s(6),l("ngClass",r.ValidacionmateriasxElemento("Turno")),s(3),l("ngForOf",r.turnoOptions),s(6),l("ngClass",r.ValidacionmateriasxElemento("ModoAsistencia")),s(3),l("ngForOf",r.modoAsistenciaOptions),s(6),l("ngClass",r.ValidacionmateriasxElemento("EstadoHabilitacion")),s(3),l("ngForOf",r.estadoHabilitacionOptions),s(6),l("ngClass",r.ValidacionmateriasxElemento("EstadoEnvio")),s(3),l("ngForOf",r.estadoEnvioOptions),s(6),l("ngIf",!r.newmaterias.get("id").value),s(2),l("ngIf",!r.AnimacionCargabtnModalmaterias),s(2),l("ngIf",r.AnimacionCargabtnModalmaterias),s(),l("ngIf",!r.AnimacionCargabtnModalmaterias)}}function an(a,t){if(a&1){let e=h();n(0,"button",94),f("click",function(){let r=p(e).$implicit;return u(r.action())}),c(1),o()}if(a&2){let e=t.$implicit;s(),y(" ",e.label," ")}}function sn(a,t){if(a&1&&(n(0,"div",92),P(1,"async"),P(2,"async"),g(3,an,2,1,"button",93),P(4,"async"),o()),a&2){let e,i,r=m();l("ngStyle",M(8,Ii,((e=R(1,2,r.menuStatematerias$))==null?null:e.y)+"px",((e=R(2,4,r.menuStatematerias$))==null?null:e.x)+"px")),s(3),l("ngForOf",(i=R(4,6,r.menuStatematerias$))==null?null:i.items)}}function ln(a,t){if(a&1&&(n(0,"option",15),c(1),o()),a&2){let e=t.$implicit;l("ngValue",e),s(),v(e)}}function cn(a,t){if(a&1&&(n(0,"option",15),c(1),o()),a&2){let e=t.$implicit;l("ngValue",e),s(),v(e)}}function dn(a,t){if(a&1){let e=h();n(0,"div",97)(1,"div",23)(2,"select",104),O("ngModelChange",function(r){p(e);let d=m(2);return T(d.paraleloActualGrupal,r)||(d.paraleloActualGrupal=r),u(r)}),n(3,"option",15),c(4,"Seleccione una opci\xF3n"),o(),g(5,cn,2,2,"option",16),o(),n(6,"label"),c(7,"Paralelo actual"),o()()()}if(a&2){let e=m(2);s(2),I("ngModel",e.paraleloActualGrupal),s(),l("ngValue",""),s(2),l("ngForOf",e.paralelosGrupalOptions)}}function mn(a,t){if(a&1){let e=h();n(0,"div",97)(1,"div",23)(2,"input",105),O("ngModelChange",function(r){p(e);let d=m(2);return T(d.paraleloNuevoGrupal,r)||(d.paraleloNuevoGrupal=r),u(r)}),o(),n(3,"label"),c(4,"Nuevo paralelo"),o()(),n(5,"div",106),c(6,"Se valida que no exista en el mismo A\xF1o + Resoluci\xF3n."),o()()}if(a&2){let e=m(2);s(2),I("ngModel",e.paraleloNuevoGrupal)}}function pn(a,t){if(a&1&&(n(0,"option",109),c(1),o()),a&2){let e=t.$implicit;l("ngValue",e.value)("disabled",e.disabled),s(),v(e.label)}}function un(a,t){if(a&1){let e=h();n(0,"div",97)(1,"div",23)(2,"select",107),O("ngModelChange",function(r){p(e);let d=m(2);return T(d.turnoGrupal,r)||(d.turnoGrupal=r),u(r)}),n(3,"option",15),c(4,"(No cambiar realizar cambios)"),o(),g(5,pn,2,3,"option",108),o(),n(6,"label"),c(7,"Turno"),o()()()}if(a&2){let e=m(2);s(2),I("ngModel",e.turnoGrupal),s(),l("ngValue",null),s(2),l("ngForOf",e.turnoOptions)}}function _n(a,t){if(a&1&&(n(0,"option",109),c(1),o()),a&2){let e=t.$implicit;l("ngValue",e.value)("disabled",e.disabled),s(),v(e.label)}}function gn(a,t){if(a&1){let e=h();n(0,"div",97)(1,"div",23)(2,"select",110),O("ngModelChange",function(r){p(e);let d=m(2);return T(d.modoAsistenciaGrupal,r)||(d.modoAsistenciaGrupal=r),u(r)}),n(3,"option",15),c(4,"(No cambiar realizar cambios)"),o(),g(5,_n,2,3,"option",108),o(),n(6,"label"),c(7,"ModoAsistencia"),o()()()}if(a&2){let e=m(2);s(2),I("ngModel",e.modoAsistenciaGrupal),s(),l("ngValue",null),s(2),l("ngForOf",e.modoAsistenciaOptions)}}function fn(a,t){if(a&1&&(n(0,"option",109),c(1),o()),a&2){let e=t.$implicit;l("ngValue",e.value)("disabled",e.disabled),s(),v(e.label)}}function xn(a,t){if(a&1){let e=h();n(0,"div",97)(1,"div",23)(2,"select",111),O("ngModelChange",function(r){p(e);let d=m(2);return T(d.estadoHabilitacionGrupal,r)||(d.estadoHabilitacionGrupal=r),u(r)}),n(3,"option",15),c(4,"(No cambiar realizar cambios)"),o(),g(5,fn,2,3,"option",108),o(),n(6,"label"),c(7,"EstadoHabilitacion"),o()()()}if(a&2){let e=m(2);s(2),I("ngModel",e.estadoHabilitacionGrupal),s(),l("ngValue",null),s(2),l("ngForOf",e.estadoHabilitacionOptions)}}function vn(a,t){a&1&&(n(0,"button",112),x(1,"span",90),o()),a&2&&l("disabled",!0)}function Cn(a,t){if(a&1){let e=h();n(0,"button",113),f("click",function(){p(e);let r=m(2);return u(r.ejecutarAccionGrupal())}),n(1,"span",9),x(2,"ng-lottie",10),o(),n(3,"span"),c(4,"EJECUTAR"),o(),x(5,"span",11),o()}if(a&2){let e=m(2);s(2),l("options",e._tools.optionstrengranaje)}}function hn(a,t){if(a&1){let e=h();n(0,"div",53)(1,"h5",54),c(2,"Acciones grupales de materias"),o(),n(3,"button",95),f("click",function(){let r=p(e).$implicit;return u(r.dismiss())}),o()(),n(4,"div",56)(5,"div",96),c(6,"Se aplicar\xE1 sobre el filtro actual (A\xF1o + Resoluci\xF3n)."),o(),n(7,"div",3)(8,"div",97)(9,"div",23)(10,"select",98),O("ngModelChange",function(r){p(e);let d=m();return T(d.accionGrupal,r)||(d.accionGrupal=r),u(r)}),n(11,"option",15),c(12,"A\xF1adir todas las materias del curso"),o(),n(13,"option",15),c(14,"Modificar paralelo del curso"),o(),n(15,"option",15),c(16,"Eliminar materias del curso (por paralelo)"),o()(),n(17,"label"),c(18,"Acci\xF3n"),o()()(),n(19,"div",97)(20,"div",23)(21,"select",99),O("ngModelChange",function(r){p(e);let d=m();return T(d.cursoGrupal,r)||(d.cursoGrupal=r),u(r)}),f("ngModelChange",function(){p(e);let r=m();return u(r.onCursoGrupalChange())}),n(22,"option",15),c(23,"Seleccione una opci\xF3n"),o(),g(24,ln,2,2,"option",16),o(),n(25,"label"),c(26,"Curso (LvlCurso)"),o()()(),g(27,dn,8,3,"div",100)(28,mn,7,1,"div",100)(29,un,8,3,"div",100)(30,gn,8,3,"div",100)(31,xn,8,3,"div",100),o()(),n(32,"div",71)(33,"div",73)(34,"button",101),f("click",function(){let r=p(e).$implicit;return u(r.dismiss())}),n(35,"span",9),x(36,"ng-lottie",10),o(),n(37,"span"),c(38,"CANCELAR"),o(),x(39,"span",11),o()(),n(40,"div",75),g(41,vn,2,1,"button",102)(42,Cn,6,1,"button",103),o()()}if(a&2){let e=m();s(10),I("ngModel",e.accionGrupal),s(),l("ngValue","agregar"),s(2),l("ngValue","modificar"),s(2),l("ngValue","eliminar"),s(6),I("ngModel",e.cursoGrupal),s(),l("ngValue",""),s(2),l("ngForOf",e.cursosGrupalOptions),s(3),l("ngIf",e.accionGrupal!=="agregar"),s(),l("ngIf",e.accionGrupal!=="eliminar"),s(),l("ngIf",e.accionGrupal!=="eliminar"),s(),l("ngIf",e.accionGrupal!=="eliminar"),s(),l("ngIf",e.accionGrupal!=="eliminar"),s(3),l("disabled",e.isProcesandoAccionGrupal),s(2),l("options",e._tools.optionscancelar),s(5),l("ngIf",e.isProcesandoAccionGrupal),s(),l("ngIf",!e.isProcesandoAccionGrupal)}}var Pe=class Pe{constructor(t,e,i,r,d,_,C){this._mat=t;this._tools=e;this._planest=i;this._controles=r;this._carr=d;this._anios=_;this._auth=C;this.esSuperAdmin=!1;this.estadoHabilitacionOptions=[];this.estadoEnvioOptions=[];this.modoAsistenciaOptions=[];this.turnoOptions=[];this.accionGrupal="agregar";this.cursoGrupal="";this.paraleloActualGrupal="";this.paraleloNuevoGrupal="";this.turnoGrupal=null;this.modoAsistenciaGrupal=null;this.estadoHabilitacionGrupal=null;this.estadoEnvioGrupal=null;this.cursosGrupalOptions=[];this.paralelosGrupalOptions=[];this.planesFiltroActual=[];this.isProcesandoAccionGrupal=!1;this.materias=[];this.paginamaterias=1;this.isLoadingmaterias=!1;this.AnimacionCargabtnModalmaterias=!1;this.filtertxtmaterias="";this.filtroAnioId=null;this.filtroResolucionKey="";this.filtroResolucion=null;this.filtroNivelCarrera=null;this.filtroInstitucionId=null;this.resolucionOptions=[];this.collectionSizematerias=0;this.pageSizematerias=10;this.pageSizeOptionsmaterias=[5,10,20,50];this.sortColumnsmaterias=[];this.menuStatematerias$=this._tools.state$;this.carreras=[];this.anios=[];this.plandeestudios=[];this.planInput=new N("");this.planesFiltrados=[];this.mostrarLista=!1;this.newmaterias=this._mat.createFormGroupmaterias(),this.newmateriasAnteriorAccion=this._mat.createFormGroupmaterias()}ngOnInit(){this.cargarCarreras(),this.cargarAnios(),this.cargarplandeestudios(),this.cargarOptionsDesdeControles(),this._auth.revisarSiEsSuperAdmin().subscribe(t=>{this.esSuperAdmin=t,this.rebuildResolucionOptions(),this.onFiltroChange()}),this.planesFiltrados=[],this.planInput.valueChanges.subscribe(t=>{let e=t?.toLowerCase()||"";if(!e){this.planesFiltrados=[];return}this.planesFiltrados=this.plandeestudios.filter(i=>`${i.RangoLvlCurso} ${i.NombreMateria} ${i.SiglaMateria} ${i.Anio} ${i.Resolucion}`.toLowerCase().includes(e))})}cargarOptionsDesdeControles(){let t=["ESTADO DE HABILITACI\xD3N","ESTADO DE ENVIO","MODO DE ASISTENCIA","TURNO"];this._controles.ObtenerOptionsSelectPorCategorias(t).subscribe({next:e=>{this.estadoHabilitacionOptions=e?.["ESTADO DE HABILITACI\xD3N"]||[],this.estadoEnvioOptions=e?.["ESTADO DE ENVIO"]||[],this.modoAsistenciaOptions=e?.["MODO DE ASISTENCIA"]||[],this.turnoOptions=e?.TURNO||[]},error:()=>{this.estadoHabilitacionOptions=[],this.estadoEnvioOptions=[],this.modoAsistenciaOptions=[],this.turnoOptions=[]}})}abrirModalNuevoMaterias(){this.modalGestionmateriasRef=this._tools.openModal(this.modalgestionmaterias,"xl")}abrirModalAccionesMaterias(){let t=this.getFiltroParams();if(!t){this._tools.MostrarMensaje("warning","Seleccione A\xF1o y Resoluci\xF3n para continuar");return}this.isProcesandoAccionGrupal=!0,this._tools.MostrarMensajeLoading(),$e({materias:this._mat.Obtenermaterias(t).pipe(le(e=>e?.data||[]),ce(e=>(console.error("Error cargando materias (modal grupal)",e),se([])))),planes:this._planest.Obtenerplandeestudios(t).pipe(le(e=>e?.data||[]),ce(e=>(console.error("Error cargando planes (modal grupal)",e),se([]))))}).subscribe({next:({materias:e,planes:i})=>{this.materias=e||[],this.collectionSizematerias=this.materias.length,this.planesFiltroActual=i||[];let r=new Set;for(let d of this.planesFiltroActual){let _=(d?.LvlCurso??"").toString().trim();_&&r.add(_)}this.cursosGrupalOptions=Array.from(r.values()).sort((d,_)=>d.localeCompare(_)),this.accionGrupal="agregar",this.cursoGrupal="",this.paraleloActualGrupal="",this.paraleloNuevoGrupal="",this.paralelosGrupalOptions=[],this.turnoGrupal=null,this.modoAsistenciaGrupal=null,this.estadoHabilitacionGrupal=null,this.estadoEnvioGrupal=null,this.modalAccionesMateriasRef=this._tools.openModal(this.modalAccionesMaterias,"xl")},error:e=>{console.error(e),this._tools.MostrarMensajeError()},complete:()=>{this.isProcesandoAccionGrupal=!1}})}onCursoGrupalChange(){let t=this.upper(this.cursoGrupal),e=new Set;for(let i of this.materias||[]){let r=this.upper(i?.LvlCurso),d=this.upper(i?.Paralelo);t&&r===t&&d&&e.add(d)}this.paralelosGrupalOptions=Array.from(e.values()).sort((i,r)=>i.localeCompare(r)),this.paraleloActualGrupal=""}ejecutarAccionGrupal(){let t=this.getFiltroParams();if(!t){this._tools.MostrarMensaje("warning","Seleccione A\xF1o y Resoluci\xF3n (incluye Nivel) para continuar");return}let e=this.upper(this.cursoGrupal),i=this.upper(this.paraleloNuevoGrupal),r=this.upper(this.paraleloActualGrupal),d=(this.turnoGrupal??"").toString().trim(),_=(this.modoAsistenciaGrupal??"").toString().trim(),C=(this.estadoHabilitacionGrupal??"").toString().trim(),S=(this.estadoEnvioGrupal??"").toString().trim(),E={};if(t.nivel&&(E.nivel=t.nivel),d&&(E.Turno=d),_&&(E.ModoAsistencia=_),C&&(E.EstadoHabilitacion=C),S&&(E.EstadoEnvio=S),!e){this._tools.MostrarMensaje("warning","Seleccione un curso (LvlCurso)");return}if(this.accionGrupal!=="eliminar"&&!i){this._tools.MostrarMensaje("warning","Ingrese el nuevo paralelo");return}if(this.accionGrupal!=="agregar"&&!r){this._tools.MostrarMensaje("warning","Seleccione el paralelo actual");return}this.isProcesandoAccionGrupal=!0,this._tools.MostrarMensajeLoading(),this._mat.Obtenermaterias(t).pipe(le(b=>b?.data||[]),ce(b=>(console.error("Error refrescando materias (acci\xF3n grupal)",b),se([])))).subscribe({next:b=>{let w=(F,D,re=[])=>{let Ft=new Set(re.map(je=>Number(je)));return(b||[]).some(je=>{let kt=Number(je?.id);return Ft.has(kt)?!1:this.upper(je?.LvlCurso)===D&&this.upper(je?.Paralelo)===F})},V=F=>(b||[]).filter(D=>this.upper(D?.LvlCurso)===e&&this.upper(D?.Paralelo)===F);if(this.accionGrupal==="agregar"){if(w(i,e)){this.isProcesandoAccionGrupal=!1,this._tools.MostrarMensaje("warning","Ese paralelo ya existe para el mismo A\xF1o y Resoluci\xF3n");return}this._mat.AgregarMateriasGrupal(ae({anio_id:t.anio_id,resolucion:t.resolucion,nivel:t.nivel,instituciones_id:t.instituciones_id,lvlcurso:e,paralelo_nuevo:i},E)).subscribe({next:()=>{this._tools.MostrarMensajeSuccess(),this.Cargarmaterias(),this._tools.closeModal(this.modalAccionesMateriasRef)},error:F=>{console.error("Error en alta grupal de materias (bulk)",F);let D=F?.error?.message;D?this._tools.MostrarMensaje("warning",D):this._tools.MostrarMensajeError(),this.isProcesandoAccionGrupal=!1},complete:()=>{this.isProcesandoAccionGrupal=!1}});return}let L=V(r);if(!L.length){this.isProcesandoAccionGrupal=!1,this._tools.MostrarMensaje("warning","No hay materias para ese curso y paralelo");return}if(this.accionGrupal==="modificar"){let F=L.map(D=>Number(D?.id)).filter(D=>Number.isFinite(D));if(w(i,e,F)){this.isProcesandoAccionGrupal=!1,this._tools.MostrarMensaje("warning","Ese paralelo ya existe para el mismo A\xF1o y Resoluci\xF3n");return}this._mat.ActualizarParaleloGrupal(ae({anio_id:t.anio_id,resolucion:t.resolucion,nivel:t.nivel,instituciones_id:t.instituciones_id,lvlcurso:e,paralelo_actual:r,paralelo_nuevo:i},E)).subscribe({next:()=>{this._tools.MostrarMensajeSuccess(),this.Cargarmaterias(),this._tools.closeModal(this.modalAccionesMateriasRef)},error:D=>{console.error("Error en modificaci\xF3n grupal de paralelo (bulk)",D);let re=D?.error?.message;re?this._tools.MostrarMensaje("warning",re):this._tools.MostrarMensajeError(),this.isProcesandoAccionGrupal=!1},complete:()=>{this.isProcesandoAccionGrupal=!1}});return}this._tools.mostrarMensajeConfirm("\xBFSEGURO QUE DESEA ELIMINAR?","Se eliminar\xE1n todas las materias del curso/paralelo seleccionado","warning","SI, ESTOY SEGURO","NO").then(F=>{if(!F){this.isProcesandoAccionGrupal=!1;return}this._mat.EliminarMateriasGrupal({anio_id:t.anio_id,resolucion:t.resolucion,nivel:t.nivel,instituciones_id:t.instituciones_id,lvlcurso:e,paralelo_actual:r}).subscribe({next:()=>{this._tools.MostrarMensajeSuccess(),this.Cargarmaterias(),this._tools.closeModal(this.modalAccionesMateriasRef)},error:D=>{console.error("Error en eliminaci\xF3n grupal de materias (bulk)",D);let re=D?.error?.message;re?this._tools.MostrarMensaje("warning",re):this._tools.MostrarMensajeError(),this.isProcesandoAccionGrupal=!1},complete:()=>{this.isProcesandoAccionGrupal=!1}})})},error:()=>{this.isProcesandoAccionGrupal=!1,this._tools.MostrarMensajeError()}})}upper(t){return(t??"").toString().trim().toUpperCase()}getFiltroParams(){let t=this.filtroAnioId,e=!!(this.filtroResolucionKey&&this.filtroResolucionKey.toString().trim());return!t||!e||(this.parseResolucionKey(),!this.filtroResolucion||!this.filtroNivelCarrera)?null:{anio_id:t,resolucion:this.filtroResolucion,nivel:this.filtroNivelCarrera,instituciones_id:this.esSuperAdmin?this.filtroInstitucionId??void 0:void 0}}rebuildResolucionOptions(){let t=new Map;for(let e of this.carreras){let i=(e?.Resolucion??"").toString().trim();if(!i)continue;let r=(e?.Nivel??"").toString().trim(),d=(e?.Area??"").toString().trim(),_=e?.instituciones_id,C=_!=null&&_!==""?Number(_):null,S=(e?.NombreInstitucion??"").toString().trim(),E=r||"SIN NIVEL",b=`${i}|${E}`,w=this.esSuperAdmin&&C?`${C}|${b}`:b,V=`${d?d+" \xB7 ":""}${i} (${E})`,L=this.esSuperAdmin&&C?`${V}${S?" \xB7 "+S:""}`:V;t.has(w)||t.set(w,{key:w,label:L,resolucion:i,nivel:E,instituciones_id:C})}this.resolucionOptions=Array.from(t.values()).sort((e,i)=>e.label.localeCompare(i.label))}onFiltroChange(){if(this.paginamaterias=1,!!!this.filtroAnioId){this.materias=[],this.collectionSizematerias=0;return}this.parseResolucionKey(),this.Cargarmaterias()}parseResolucionKey(){let t=(this.filtroResolucionKey??"").toString();if(!t){this.filtroResolucion=null,this.filtroNivelCarrera=null,this.filtroInstitucionId=null;return}let e=t.split("|");if(e.length>=3){let i=Number(e[0]),r=(e[1]??"").toString(),d=e.slice(2).join("|");this.filtroInstitucionId=Number.isFinite(i)?i:null,this.filtroResolucion=r||null,this.filtroNivelCarrera=d||null;return}if(e.length===2){let i=(e[0]??"").toString(),r=(e[1]??"").toString();this.filtroInstitucionId=null,this.filtroResolucion=i||null,this.filtroNivelCarrera=r||null;return}this.filtroInstitucionId=null,this.filtroResolucion=t,this.filtroNivelCarrera=null}Cargarmaterias(){let t=this.filtroAnioId;if(!t){this.materias=[],this.collectionSizematerias=0;return}this.isLoadingmaterias=!0;let e={anio_id:t,instituciones_id:this.esSuperAdmin?this.filtroInstitucionId??void 0:void 0};this.filtroResolucion&&(e.resolucion=this.filtroResolucion),this.filtroNivelCarrera&&(e.nivel=this.filtroNivelCarrera),this._mat.Obtenermaterias(e).subscribe({next:i=>{console.log(i),this.materias=i.data||[],this.collectionSizematerias=this.materias.length,this.isLoadingmaterias=!1},error:i=>{console.error("Error al cargar materias",i),this.isLoadingmaterias=!1}})}AgregarModificarmaterias(){if(this.newmaterias.invalid){this.ValidacionTodoElementomaterias(),this._tools.MostrarMensajeFrmIncompleto(),this.AnimacionCargabtnModalmaterias=!1;return}else{this.AnimarCargaTablamaterias(),this.AnimacionCargabtnModalmaterias=!0,this._tools.MostrarMensajeLoading(),this.newmateriasAnteriorAccion.setValue(this.newmaterias.value);let t=this.newmaterias.controls.id.value;console.log("INFO A PROCESAR",this.newmaterias.value),t?this._mat.Modificarmaterias(this.newmaterias.value,this.newmaterias.value.id).subscribe(e=>{console.log("SE MODIFICO CORRECTAMENTE materias",e.data),this.Cargarmaterias(),this.resetmaterias(),this.AnimacionCargabtnModalmaterias=!1,this._tools.MostrarMensajeSuccess()},e=>{console.log("ERROR AL MODIFICAR materias",e),this.AnimacionCargabtnModalmaterias=!1,this._tools.MostrarMensajeError()}):this._mat.Agregarmaterias(this.newmaterias.value).subscribe(e=>{console.log("SE A\xD1ADIO CORRECTAMENTE materias",e.data),this.Cargarmaterias(),this.resetmaterias(),this.AnimacionCargabtnModalmaterias=!1,this._tools.MostrarMensajeSuccess()},e=>{console.log("ERROR AL A\xD1ADIR materias",e),this.AnimacionCargabtnModalmaterias=!1,this._tools.MostrarMensajeError()})}}Seleccionarmaterias(t){if(this._tools.MostrarMensajeLoading(),t){if(!this.materias.find(i=>i.id===t))return;this._mat.Seleccionarmaterias(t).subscribe(i=>{Object.keys(this.newmaterias.controls).forEach(r=>{this.newmaterias.controls[r].setValue(i.data[r])}),console.log("SELECCION DE materias EXITOSA",this.newmaterias.value),this.newmateriasAnteriorAccion.setValue(this.newmaterias.value),this.modalGestionmateriasRef=this._tools.openModal(this.modalgestionmaterias,"xl"),this._tools.MostrarMensajeSuccess()},i=>{console.log("ERROR AL SELECCIONAR materias",i),this._tools.MostrarMensajeError()})}}Eliminarmaterias(t){this._tools.mostrarMensajeConfirm("\xBFSEGURO QUE DESEA ELIMINAR?","SE ELIMINARA EL DATO Y NO SE PODR\xC1 RECUPERAR EL DATO","warning","SI, ESTOY SEGURO","NO").then(e=>{e&&(this._tools.MostrarMensajeLoading(),this._mat.Eliminarmaterias(t).subscribe(i=>{console.log(i.data),this.Cargarmaterias(),this._tools.MostrarMensajeSuccess()},i=>{console.log("ERROR AL ELIMINAR materias",i),this._tools.MostrarMensajeError()}))})}resetmaterias(){this.newmaterias=this._mat.createFormGroupmaterias(),this._tools.closeModal(this.modalGestionmateriasRef)}AutoCompletarLastmaterias(){this.newmaterias.setValue(this.newmateriasAnteriorAccion.value),this.newmaterias.patchValue({id:0}),console.log("listo",this.newmaterias.value)}AnimarCargaTablamaterias(){this.materias=[],this.isLoadingmaterias=!0}ValidacionmateriasxElemento(t){return this._tools.obtenerValidationClass(this.newmaterias,t)}ValidacionTodoElementomaterias(){Object.values(this.newmaterias.controls).forEach(t=>{t.markAsTouched(),t.markAsDirty()})}onPageSizeChangematerias(){this.paginamaterias=1}sortBymaterias(t,e){this.sortColumnsmaterias=this._tools.handleSort(t,e,this.sortColumnsmaterias),this.materias=this._tools.applyMultiSort(this.materias,this.sortColumnsmaterias)}isSortedmaterias(t){return this._tools.isSorted(this.sortColumnsmaterias,t)}getSortDirmaterias(t){return this._tools.getSortDirection(this.sortColumnsmaterias,t)}closeMenu(){this._tools.close()}abrirMenumaterias(t,e){t.preventDefault(),t.stopPropagation(),console.log("aS",e);let i=[{label:"\u270F Editar",action:()=>this.Seleccionarmaterias(e.id)},{label:"\u{1F5D1}\uFE0F Eliminar",action:()=>this.Eliminarmaterias(e.id)}];this._tools.open(t.clientX,t.clientY,i)}cargarCarreras(){this._carr.Obtenercarreras().subscribe({next:t=>{this.carreras=t.data||[],this.rebuildResolucionOptions()},error:t=>{console.error("Error al cargar carreras",t)}})}cargarAnios(){this._anios.ObtenerAniosConPredeterminado().subscribe({next:t=>{if(this.anios=t?.anios||[],this.filtroAnioId===null||this.filtroAnioId===void 0){let e=t?.predeterminado;e?.id?this.filtroAnioId=Number(e.id):this.anios?.length&&(this.filtroAnioId=Number(this.anios[0]?.id))}this.onFiltroChange()},error:t=>{console.error("Error al cargar anios",t)}})}cargarplandeestudios(){this._planest.Obtenerplandeestudios().subscribe({next:t=>{console.log(t.data),this.plandeestudios=t.data||[]},error:t=>{console.error("Error al cargar plandeestudios",t)}})}seleccionarPlan(t){this.planInput.setValue(`${t.NombreMateria} (${t.SiglaMateria})`,{emitEvent:!1}),this.newmaterias.get("plandeestudios_id")?.setValue(t.id),this.mostrarLista=!1}};Pe.\u0275fac=function(e){return new(e||Pe)(A(it),A(ne),A(De),A(Ie),A(oe),A(Te),A(te))},Pe.\u0275cmp=U({type:Pe,selectors:[["app-materias"]],viewQuery:function(e,i){if(e&1&&(de(Mi,7),de(wi,7)),e&2){let r;me(r=pe())&&(i.modalAccionesMaterias=r.first),me(r=pe())&&(i.modalgestionmaterias=r.first)}},hostBindings:function(e,i){e&1&&f("click",function(){return i.closeMenu()},ve)},standalone:!1,decls:46,vars:18,consts:[["modalgestionmaterias",""],["modalAccionesMaterias",""],[1,"container","mt-4"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"lead","text-secondary","subtitulosGlobales"],[1,"col-sm-6","d-flex","justify-content-start","button",2,"gap","10px"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","width","30px","height","30px"],["width","50px","height","50px",3,"options"],[1,"dir-part"],[1,"col-sm-3","d-flex","justify-content-end",2,"gap","10px"],[1,"form-floating",2,"min-width","140px"],["title","Filtrar por A\xF1o",1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-floating",2,"min-width","180px"],["title","Filtrar por Resoluci\xF3n",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-sm-3","ms-auto","d-flex","justify-content-end"],[1,"input-group"],[1,"input-group-text"],["width","30px","height","30px",3,"options"],[1,"form-floating"],["type","text","placeholder","Buscar","title","Filtrar/Buscar",1,"form-control",3,"input","ngModelChange","ngModel"],["class","mt-4",4,"ngIf"],["class","context-menu",3,"ngStyle",4,"ngIf"],[1,"mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-sm","align-middle"],[1,""],[1,"text-center"],[2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["class","bi",3,"ngClass",4,"ngIf"],[4,"ngIf"],["style","cursor: pointer;",3,"contextmenu",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["previousLabel","Anterior","nextLabel","Siguiente",3,"pageChange","page","collectionSize","pageSize","maxSize","rotate","ellipses","boundaryLinks"],[1,"form-select",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"bi",3,"ngClass"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[2,"cursor","pointer",3,"contextmenu"],[1,"small","text-muted"],[1,"text-center","d-flex","justify-content-center","align-items-center",2,"gap","5px"],["title","Modificar informaci\xF3n",1,"btn","btn-outline-warning","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src",4,"ngIf"],["width","30px","height","35px",3,"options",4,"ngIf"],["title","Eliminar informaci\xF3n",1,"btn","btn-outline-danger","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src"],["width","30px","height","35px",3,"options"],[3,"value"],[1,"modal-header"],[1,"modal-title"],["type","button","title","cerrar",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup"],[1,"col-sm-12","mb-3","position-relative"],["type","text","placeholder","Buscar plan de estudios","autocomplete","off",1,"form-control",3,"focus","formControl"],["class","list-group position-absolute w-100","style","z-index: 1000;",4,"ngIf"],["class","invalid-feedback d-block",4,"ngIf"],[1,"form-floating","mb-3","col-sm-12"],["type","text","placeholder","","formControlName","Paralelo",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"invalid-feedback"],["formControlName","Turno",1,"form-control",3,"ngClass"],["disabled","",3,"value"],[3,"value","disabled",4,"ngFor","ngForOf"],["formControlName","ModoAsistencia",1,"form-control",3,"ngClass"],["formControlName","EstadoHabilitacion",1,"form-control",3,"ngClass"],["formControlName","EstadoEnvio",1,"form-control",3,"ngClass"],[1,"modal-footer"],["class","button d-flex justify-content-start",4,"ngIf"],[1,"button","me-2"],["title","Cancelar y cerrar","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],[1,"button"],["class","btn mouse-dir success","title","Procesando informaci\xF3n",3,"disabled","click",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;","title","Accionar",3,"click",4,"ngIf"],[1,"list-group","position-absolute","w-100",2,"z-index","1000"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"d-flex","w-100","justify-content-between"],[1,"mb-1"],[1,"invalid-feedback","d-block"],[3,"value","disabled"],[1,"button","d-flex","justify-content-start"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Cancelar y cerrar",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Procesando informaci\xF3n",1,"btn","mouse-dir","success",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["title","Accionar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[1,"context-menu",3,"ngStyle"],["class","context-item",3,"click",4,"ngFor","ngForOf"],[1,"context-item",3,"click"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[1,"text-muted","mb-3"],[1,"col-sm-6","mb-3"],["title","Acci\xF3n",1,"form-control",3,"ngModelChange","ngModel"],["title","Curso",1,"form-control",3,"ngModelChange","ngModel"],["class","col-sm-6 mb-3",4,"ngIf"],["title","Cancelar",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],["class","btn mouse-dir success","title","Procesando",3,"disabled",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style","gap: 8px;","title","Ejecutar",3,"click",4,"ngIf"],["title","Paralelo actual",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","",1,"form-control",2,"text-transform","uppercase",3,"ngModelChange","ngModel"],[1,"form-text"],["title","Turno",1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[3,"ngValue","disabled"],["title","Modo de asistencia",1,"form-control",3,"ngModelChange","ngModel"],["title","Estado de habilitaci\xF3n",1,"form-control",3,"ngModelChange","ngModel"],["title","Procesando",1,"btn","mouse-dir","success",3,"disabled"],["title","Ejecutar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"]],template:function(e,i){if(e&1){let r=h();n(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1",5),c(4,"Gesti\xF3n de materias"),o(),n(5,"p",6),c(6,"Administra la informaci\xF3n de los materias de manera sencilla y eficiente"),o()()()(),n(7,"div",3)(8,"div",7)(9,"button",8),f("click",function(){return p(r),u(i.abrirModalAccionesMaterias())}),n(10,"span",9),x(11,"ng-lottie",10),o(),n(12,"span"),c(13,"Acciones Grupales"),o(),x(14,"span",11),o()(),n(15,"div",12)(16,"div",13)(17,"select",14),O("ngModelChange",function(_){return p(r),T(i.filtroAnioId,_)||(i.filtroAnioId=_),u(_)}),f("ngModelChange",function(){return p(r),i.paginamaterias=1,u(i.onFiltroChange())}),n(18,"option",15),c(19,"Seleccione una opci\xF3n"),o(),g(20,Ti,2,2,"option",16),o(),n(21,"label"),c(22,"A\xF1o"),o()(),n(23,"div",17)(24,"select",18),O("ngModelChange",function(_){return p(r),T(i.filtroResolucionKey,_)||(i.filtroResolucionKey=_),u(_)}),f("ngModelChange",function(){return p(r),i.paginamaterias=1,u(i.onFiltroChange())}),n(25,"option",15),c(26,"Seleccione una opci\xF3n"),o(),g(27,Oi,2,2,"option",16),o(),n(28,"label"),c(29,"Resoluci\xF3n"),o()()(),n(30,"div",19)(31,"div",20)(32,"span",21),x(33,"ng-lottie",22),o(),n(34,"div",23)(35,"input",24),f("input",function(){return p(r),u(i.paginamaterias=1)}),O("ngModelChange",function(_){return p(r),T(i.filtertxtmaterias,_)||(i.filtertxtmaterias=_),u(_)}),o(),n(36,"label"),c(37,"Buscar"),o()()()()(),g(38,Ui,36,22,"div",25),P(39,"filterByText"),g(40,rn,59,18,"ng-template",null,0,$)(42,sn,5,11,"div",26),P(43,"async"),g(44,hn,43,16,"ng-template",null,1,$)}if(e&2){let r;s(11),l("options",i._tools.optionssubgestion),s(6),I("ngModel",i.filtroAnioId),s(),l("ngValue",null),s(2),l("ngForOf",i.anios),s(4),I("ngModel",i.filtroResolucionKey),s(),l("ngValue",null),s(2),l("ngForOf",i.resolucionOptions),s(6),l("options",i._tools.optionslupa),s(2),I("ngModel",i.filtertxtmaterias),s(3),l("ngIf",W(39,11,i.materias,i.filtertxtmaterias,Ye(17,Ai))),s(4),l("ngIf",(r=R(43,15,i.menuStatematerias$))==null?null:r.visible)}},dependencies:[q,K,Q,Ce,ye,Z,ee,Se,X,Y,Ee,J,yt,Me,we,Ae,ie,he,be,nt],styles:[".dropdown-list[_ngcontent-%COMP%]{position:absolute;width:100%;max-height:280px;overflow-y:auto;background:#fff;border:1px solid #ced4da;z-index:1000}.dropdown-item[_ngcontent-%COMP%]{padding:8px 12px;cursor:pointer}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.row-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 80px 140px;gap:12px;align-items:center}.center[_ngcontent-%COMP%]{text-align:center;font-weight:500}.right[_ngcontent-%COMP%]{text-align:right;white-space:nowrap}"]});var Re=Pe;var ke=class ke{transform(t,e,i=[],r=!0){if(!t||!Array.isArray(t)||t.length===0)return[];let d=(e??"").toString().trim();if(!d)return t;let _=d.split(/\s+/g).map(S=>this.normalizarTexto(S).toLowerCase()).filter(Boolean);if(_.length===0)return t;let C=i?.length?i:Object.keys(t[0]);return t.filter(S=>{let E=C.map(w=>{let V=typeof w=="function"?w(S):this.getByPath(S,w);return this.normalizarTexto(V).toLowerCase()}).filter(Boolean),b=w=>E.some(V=>V.includes(w));return r?_.every(b):_.some(b)})}getByPath(t,e){return!t||!e?"":e.includes(".")?e.split(".").reduce((i,r)=>i?.[r],t):t?.[e]}normalizarTexto(t){return t==null?"":String(t).normalize("NFD").replace(/[\u0300-\u036f]/g,"")}};ke.\u0275fac=function(e){return new(e||ke)},ke.\u0275pipe=qe({name:"filterByFields",type:ke,pure:!0,standalone:!1});var ot=ke;var En=["modalgestionplandeestudios"],yn=()=>["RangoLvlCurso","Rango","LvlCurso","NombreMateria","SiglaMateria","SiglasPrerrequisitos","TipoMateria","ModoMateria","Horas","Anio","Resolucion","Nivel","NombreCarrera","NombreInstitucion"],j=(a,t)=>({"bi-caret-up":a,"bi-caret-down":t}),Mn=(a,t)=>({top:a,left:t});function wn(a,t){if(a&1&&(n(0,"option",16),c(1),o()),a&2){let e=t.$implicit;l("ngValue",e.id),s(),v(e.Anio)}}function An(a,t){if(a&1&&(n(0,"option",16),c(1),o()),a&2){let e=t.$implicit;l("ngValue",e.key),s(),v(e.label)}}function In(a,t){if(a&1&&x(0,"i",43),a&2){let e=m(3);l("ngClass",M(1,j,e.getSortDirplandeestudios("NombreInstitucion")==="asc",e.getSortDirplandeestudios("NombreInstitucion")==="desc"))}}function Tn(a,t){if(a&1){let e=h();n(0,"th",34),f("click",function(r){p(e);let d=m(2);return u(d.sortByplandeestudios("NombreInstitucion",r))}),c(1," Nombre Institucion "),g(2,In,1,4,"i",35),o()}if(a&2){let e=m(2);s(2),l("ngIf",e.isSortedplandeestudios("NombreInstitucion"))}}function On(a,t){if(a&1&&x(0,"i",43),a&2){let e=m(2);l("ngClass",M(1,j,e.getSortDirplandeestudios("RangoLvlCurso")==="asc",e.getSortDirplandeestudios("RangoLvlCurso")==="desc"))}}function Vn(a,t){if(a&1&&x(0,"i",43),a&2){let e=m(2);l("ngClass",M(1,j,e.getSortDirplandeestudios("Rango")==="asc",e.getSortDirplandeestudios("Rango")==="desc"))}}function Dn(a,t){if(a&1&&x(0,"i",43),a&2){let e=m(2);l("ngClass",M(1,j,e.getSortDirplandeestudios("LvlCurso")==="asc",e.getSortDirplandeestudios("LvlCurso")==="desc"))}}function Nn(a,t){if(a&1&&x(0,"i",43),a&2){let e=m(2);l("ngClass",M(1,j,e.getSortDirplandeestudios("NombreMateria")==="asc",e.getSortDirplandeestudios("NombreMateria")==="desc"))}}function Pn(a,t){if(a&1&&x(0,"i",43),a&2){let e=m(2);l("ngClass",M(1,j,e.getSortDirplandeestudios("Horas")==="asc",e.getSortDirplandeestudios("Horas")==="desc"))}}function Rn(a,t){if(a&1&&x(0,"i",43),a&2){let e=m(2);l("ngClass",M(1,j,e.getSortDirplandeestudios("SiglaMateria")==="asc",e.getSortDirplandeestudios("SiglaMateria")==="desc"))}}function Fn(a,t){if(a&1&&x(0,"i",43),a&2){let e=m(2);l("ngClass",M(1,j,e.getSortDirplandeestudios("SiglasPrerrequisitos")==="asc",e.getSortDirplandeestudios("SiglasPrerrequisitos")==="desc"))}}function kn(a,t){if(a&1&&x(0,"i",43),a&2){let e=m(2);l("ngClass",M(1,j,e.getSortDirplandeestudios("TipoMateria")==="asc",e.getSortDirplandeestudios("TipoMateria")==="desc"))}}function Ln(a,t){if(a&1&&x(0,"i",43),a&2){let e=m(2);l("ngClass",M(1,j,e.getSortDirplandeestudios("ModoMateria")==="asc",e.getSortDirplandeestudios("ModoMateria")==="desc"))}}function Gn(a,t){if(a&1&&(n(0,"tr")(1,"td",32)(2,"div",44)(3,"span",45),c(4,"Cargando..."),o()()()()),a&2){let e=m(2);s(),B("colspan",e.esSuperAdmin?14:13)}}function jn(a,t){if(a&1&&(n(0,"tr")(1,"td",32),c(2,"No hay datos disponibles"),o()()),a&2){let e=m(2);s(),B("colspan",e.esSuperAdmin?14:13)}}function Bn(a,t){if(a&1&&(n(0,"td"),c(1),o()),a&2){let e=m().$implicit;s(),v(e.NombreInstitucion)}}function $n(a,t){if(a&1&&x(0,"img",53),a&2){let e=m(3);l("src",e._tools.rutabtniconsanimaciones+"pencil.svg",G)}}function zn(a,t){if(a&1&&x(0,"ng-lottie",54),a&2){let e=m(3);l("options",e._tools.optionsEditar)}}function Hn(a,t){if(a&1&&x(0,"img",53),a&2){let e=m(3);l("src",e._tools.rutabtniconsanimaciones+"delete.svg",G)}}function Un(a,t){if(a&1&&x(0,"ng-lottie",54),a&2){let e=m(3);l("options",e._tools.optionsEliminar)}}function Wn(a,t){if(a&1){let e=h();n(0,"tr",46),f("contextmenu",function(r){let d=p(e).$implicit,_=m(2);return u(_.abrirMenuplandeestudios(r,d))}),n(1,"td",32),c(2),o(),g(3,Bn,2,1,"td",37),n(4,"td",32),c(5),o(),n(6,"td",32),c(7),o(),n(8,"td"),c(9),n(10,"div",47),c(11),o()(),n(12,"td"),c(13),n(14,"div",47),c(15),o()(),n(16,"td",32),c(17),o(),n(18,"td"),c(19),o(),n(20,"td"),c(21),o(),n(22,"td"),c(23),o(),n(24,"td"),c(25),o(),n(26,"td",48)(27,"button",49),f("click",function(){let r=p(e).$implicit,d=m(2);return u(d.Seleccionarplandeestudios(r.id))})("mouseenter",function(){let r=p(e).$implicit,d=m(2);return u(d._tools.hoverBotonMap["edicionplandeestudios-"+r.id]=!0)})("mouseleave",function(){let r=p(e).$implicit,d=m(2);return u(d._tools.hoverBotonMap["edicionplandeestudios-"+r.id]=!1)}),g(28,$n,1,1,"img",50)(29,zn,1,1,"ng-lottie",51),o(),n(30,"button",52),f("click",function(){let r=p(e).$implicit,d=m(2);return u(d.Eliminarplandeestudios(r.id))})("mouseenter",function(){let r=p(e).$implicit,d=m(2);return u(d._tools.hoverBotonMap["eliminacionplandeestudios-"+r.id]=!0)})("mouseleave",function(){let r=p(e).$implicit,d=m(2);return u(d._tools.hoverBotonMap["eliminacionplandeestudios-"+r.id]=!1)}),g(31,Hn,1,1,"img",50)(32,Un,1,1,"ng-lottie",51),o()()()}if(a&2){let e=t.$implicit,i=t.index,r=m(2);s(2),v((r.paginaplandeestudios-1)*r.pageSizeplandeestudios+(i+1)),s(),l("ngIf",r.esSuperAdmin),s(2),y(" ",e.RangoLvlCurso," "),s(2),v(e.Rango),s(2),y("",e.LvlCurso," "),s(2),y(" ",e.Nivel),s(2),y("",e.NombreMateria," "),s(2),ue("A\xF1o: ",e.Anio," \xB7 Res: ",e.Resolucion),s(2),v(e.Horas),s(2),v(e.SiglaMateria),s(2),v(e.SiglasPrerrequisitos),s(2),v(e.TipoMateria),s(2),v(e.ModoMateria),s(3),l("ngIf",!r._tools.hoverBotonMap["edicionplandeestudios-"+e.id]),s(),l("ngIf",r._tools.hoverBotonMap["edicionplandeestudios-"+e.id]),s(2),l("ngIf",!r._tools.hoverBotonMap["eliminacionplandeestudios-"+e.id]),s(),l("ngIf",r._tools.hoverBotonMap["eliminacionplandeestudios-"+e.id])}}function qn(a,t){if(a&1&&(n(0,"option",55),c(1),o()),a&2){let e=t.$implicit;l("value",e),s(),y("",e," por p\xE1gina")}}function Kn(a,t){if(a&1){let e=h();n(0,"div",28)(1,"div",29)(2,"table",30)(3,"thead",31)(4,"tr")(5,"th",32),c(6,"#"),o(),g(7,Tn,3,1,"th",33),n(8,"th",34),f("click",function(r){p(e);let d=m();return u(d.sortByplandeestudios("RangoLvlCurso",r))}),c(9," Nivel "),g(10,On,1,4,"i",35),o(),n(11,"th",34),f("click",function(r){p(e);let d=m();return u(d.sortByplandeestudios("Rango",r))}),c(12," Rango "),g(13,Vn,1,4,"i",35),o(),n(14,"th",34),f("click",function(r){p(e);let d=m();return u(d.sortByplandeestudios("LvlCurso",r))}),c(15," Nivel Curso "),g(16,Dn,1,4,"i",35),o(),n(17,"th",34),f("click",function(r){p(e);let d=m();return u(d.sortByplandeestudios("NombreMateria",r))}),c(18," NombreMateria "),g(19,Nn,1,4,"i",35),o(),n(20,"th",34),f("click",function(r){p(e);let d=m();return u(d.sortByplandeestudios("Horas",r))}),c(21," Horas "),g(22,Pn,1,4,"i",35),o(),n(23,"th",34),f("click",function(r){p(e);let d=m();return u(d.sortByplandeestudios("SiglaMateria",r))}),c(24," Sigla "),g(25,Rn,1,4,"i",35),o(),n(26,"th",36),f("click",function(r){p(e);let d=m();return u(d.sortByplandeestudios("SiglasPrerrequisitos",r))}),c(27," Sigla Pre. "),g(28,Fn,1,4,"i",35),o(),n(29,"th",34),f("click",function(r){p(e);let d=m();return u(d.sortByplandeestudios("TipoMateria",r))}),c(30," TipoMateria "),g(31,kn,1,4,"i",35),o(),n(32,"th",34),f("click",function(r){p(e);let d=m();return u(d.sortByplandeestudios("ModoMateria",r))}),c(33," Modo Materia "),g(34,Ln,1,4,"i",35),o(),n(35,"th",32),c(36,"ACCIONES"),o()()(),n(37,"tbody"),g(38,Gn,5,1,"tr",37)(39,jn,3,1,"tr",37)(40,Wn,33,18,"tr",38),P(41,"slice"),o()()(),n(42,"div",39)(43,"ngb-pagination",40),O("pageChange",function(r){p(e);let d=m();return T(d.paginaplandeestudios,r)||(d.paginaplandeestudios=r),u(r)}),o(),n(44,"select",41),O("ngModelChange",function(r){p(e);let d=m();return T(d.pageSizeplandeestudios,r)||(d.pageSizeplandeestudios=r),u(r)}),f("change",function(){p(e);let r=m();return u(r.onPageSizeChangeplandeestudios())}),g(45,qn,2,2,"option",42),o()()()}if(a&2){let e=t.ngIf,i=m();s(7),l("ngIf",i.esSuperAdmin),s(3),l("ngIf",i.isSortedplandeestudios("RangoLvlCurso")),s(3),l("ngIf",i.isSortedplandeestudios("Rango")),s(3),l("ngIf",i.isSortedplandeestudios("LvlCurso")),s(3),l("ngIf",i.isSortedplandeestudios("NombreMateria")),s(3),l("ngIf",i.isSortedplandeestudios("Horas")),s(3),l("ngIf",i.isSortedplandeestudios("SiglaMateria")),s(3),l("ngIf",i.isSortedplandeestudios("SiglasPrerrequisitos")),s(3),l("ngIf",i.isSortedplandeestudios("TipoMateria")),s(3),l("ngIf",i.isSortedplandeestudios("ModoMateria")),s(4),l("ngIf",i.isLoadingplandeestudios),s(),l("ngIf",!i.isLoadingplandeestudios&&e.length===0),s(),l("ngForOf",W(41,22,e,(i.paginaplandeestudios-1)*i.pageSizeplandeestudios,i.paginaplandeestudios*i.pageSizeplandeestudios)),s(3),I("page",i.paginaplandeestudios),l("collectionSize",e.length)("pageSize",i.pageSizeplandeestudios)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),s(),I("ngModel",i.pageSizeplandeestudios),s(),l("ngForOf",i.pageSizeOptionsplandeestudios)}}function Qn(a,t){if(a&1&&(n(0,"option",55),c(1),o()),a&2){let e=t.$implicit;l("value",e.id),s(),v(e.Anio)}}function Yn(a,t){if(a&1&&(n(0,"option",55),c(1),o()),a&2){let e=t.$implicit,i=m(2);l("value",e.id),s(),y(" ",i.esSuperAdmin?e.NombreCarrera+" ("+e.NombreInstitucion+" | "+e.Resolucion+(e.Nivel?" ("+e.Nivel+")":"")+")":e.NombreCarrera+" ("+e.Resolucion+(e.Nivel?" ("+e.Nivel+")":"")+")"," ")}}function Jn(a,t){if(a&1&&(n(0,"option",89),c(1),o()),a&2){let e=t.$implicit;l("value",e.value)("disabled",e.disabled),s(),v(e.label)}}function Xn(a,t){if(a&1&&(n(0,"option",89),c(1),o()),a&2){let e=t.$implicit;l("value",e.value)("disabled",e.disabled),s(),v(e.label)}}function Zn(a,t){if(a&1&&(n(0,"option",89),c(1),o()),a&2){let e=t.$implicit;l("value",e.value)("disabled",e.disabled),s(),v(e.label)}}function eo(a,t){if(a&1){let e=h();n(0,"button",92),f("click",function(){p(e);let r=m(3);return u(r.AutoCompletarLastplandeestudios())}),n(1,"span",10),x(2,"ng-lottie",11),o(),n(3,"span"),c(4,"AUTO COMPLETAR "),o(),x(5,"span",12),o()}if(a&2){let e=m(3);s(2),l("options",e._tools.optionsautocompletar)}}function to(a,t){if(a&1&&(n(0,"div",90),g(1,eo,6,1,"button",91),o()),a&2){let e=m(2);s(),l("ngIf",!e.AnimacionCargabtnModalplandeestudios)}}function io(a,t){if(a&1){let e=h();n(0,"button",93),f("click",function(){p(e);let r=m().$implicit,d=m();return r.dismiss(),u(d.resetplandeestudios())}),n(1,"span",10),x(2,"ng-lottie",11),o(),n(3,"span"),c(4,"CANCELAR"),o(),x(5,"span",12),o()}if(a&2){let e=m(2);s(2),l("options",e._tools.optionscancelar)}}function no(a,t){if(a&1){let e=h();n(0,"button",94),f("click",function(){p(e);let r=m(2);return u(r.AgregarModificarplandeestudios())}),x(1,"span",95),o()}a&2&&l("disabled",!0)}function oo(a,t){if(a&1){let e=h();n(0,"button",96),f("click",function(){p(e);let r=m(2);return u(r.AgregarModificarplandeestudios())}),n(1,"span",10),x(2,"ng-lottie",11),o(),n(3,"span"),c(4),o(),x(5,"span",12),o()}if(a&2){let e,i,r=m(2);s(2),l("options",(e=r.newplandeestudios.get("id"))!=null&&e.value?r._tools.optionsEditar:r._tools.optionsAdicionar),s(2),v((i=r.newplandeestudios.get("id"))!=null&&i.value?"MODIFICAR":"REGISTRAR")}}function ro(a,t){if(a&1){let e=h();n(0,"div",56)(1,"h4",57),c(2),o(),n(3,"button",58),f("click",function(){let r=p(e).$implicit,d=m();return r.dismiss(),u(d.resetplandeestudios())}),o()(),n(4,"div",59)(5,"form",60)(6,"div",4)(7,"div",61)(8,"select",62)(9,"option",63),c(10,"Seleccione una opci\xF3n"),o(),g(11,Qn,2,2,"option",42),o(),n(12,"label"),c(13,"A\xF1o"),o(),n(14,"div",64),c(15,"Este campo es obligatorio*"),o()(),n(16,"div",61)(17,"select",65)(18,"option",63),c(19,"Seleccione una opci\xF3n"),o(),g(20,Yn,2,2,"option",42),o(),n(21,"label"),c(22,"Carrera"),o(),n(23,"div",64),c(24,"Este campo es obligatorio*"),o()()(),n(25,"div",4)(26,"div",66),x(27,"input",67),n(28,"label"),c(29,"Nivel"),o(),n(30,"div",64),c(31,"Este campo es obligatorio*"),o()(),n(32,"div",66),x(33,"input",68),n(34,"label"),c(35,"Rango"),o(),n(36,"div",64),c(37,"Este campo es obligatorio*"),o()(),n(38,"div",69),x(39,"input",70),n(40,"label"),c(41,"Horas"),o(),n(42,"div",64),c(43,"Este campo es obligatorio*"),o()(),n(44,"div",71)(45,"select",72)(46,"option",73),c(47,"Seleccione una opci\xF3n"),o(),g(48,Jn,2,3,"option",74),o(),n(49,"label"),c(50,"Nivel del Curso"),o(),n(51,"div",64),c(52,"Este campo es obligatorio*"),o()()(),n(53,"div",4)(54,"div",61)(55,"input",75),f("change",function(r){p(e);let d=m();return u(d._tools.EscribirEnMayuscula(r,d.newplandeestudios,"NombreMateria"))}),o(),n(56,"label"),c(57,"Nombre Materia"),o(),n(58,"div",64),c(59,"Este campo es obligatorio*"),o()(),n(60,"div",61)(61,"input",76),f("change",function(r){p(e);let d=m();return u(d._tools.EscribirEnMayuscula(r,d.newplandeestudios,"SiglaMateria"))}),o(),n(62,"label"),c(63,"Sigla Materia"),o(),n(64,"div",64),c(65,"Este campo es obligatorio*"),o()()(),n(66,"div",4)(67,"div",61)(68,"input",77),f("change",function(r){p(e);let d=m();return u(d._tools.EscribirEnMayuscula(r,d.newplandeestudios,"Prerrequisitos"))}),o(),n(69,"label"),c(70,"Prerrequisitos"),o(),n(71,"div",64),c(72,"Este campo es obligatorio*"),o()(),n(73,"div",61)(74,"input",78),f("change",function(r){p(e);let d=m();return u(d._tools.EscribirEnMayuscula(r,d.newplandeestudios,"SiglasPrerrequisitos"))}),o(),n(75,"label"),c(76,"Siglas Prerrequisitos"),o(),n(77,"div",64),c(78,"Este campo es obligatorio*"),o()()(),n(79,"div",4)(80,"div",66)(81,"select",79)(82,"option",73),c(83,"Seleccione una opci\xF3n"),o(),g(84,Xn,2,3,"option",74),o(),n(85,"label"),c(86,"Tipo de Materia"),o(),n(87,"div",64),c(88,"Este campo es obligatorio*"),o()(),n(89,"div",80)(90,"select",81)(91,"option",73),c(92,"Seleccione una opci\xF3n"),o(),g(93,Zn,2,3,"option",74),o(),n(94,"label"),c(95,"Modo de Materia"),o(),n(96,"div",64),c(97,"Este campo es obligatorio*"),o()()()()(),n(98,"div",82),g(99,to,2,1,"div",83),n(100,"div",84),g(101,io,6,1,"button",85),o(),n(102,"div",86),g(103,no,2,1,"button",87)(104,oo,6,2,"button",88),o()()}if(a&2){let e,i=m();s(2),y("",(e=i.newplandeestudios.get("id"))!=null&&e.value?"Modificar":"Registrar"," plandeestudios"),s(3),l("formGroup",i.newplandeestudios),s(3),l("ngClass",i.ValidacionplandeestudiosxElemento("anio_id")),s(3),l("ngForOf",i.anios),s(6),l("ngClass",i.ValidacionplandeestudiosxElemento("carreras_id")),s(3),l("ngForOf",i.carreras),s(7),l("ngClass",i.ValidacionplandeestudiosxElemento("RangoLvlCurso")),s(6),l("ngClass",i.ValidacionplandeestudiosxElemento("Rango")),s(6),l("ngClass",i.ValidacionplandeestudiosxElemento("Horas")),s(6),l("ngClass",i.ValidacionplandeestudiosxElemento("LvlCurso")),s(3),l("ngForOf",i.LvlCursoOptions),s(7),l("ngClass",i.ValidacionplandeestudiosxElemento("NombreMateria")),s(6),l("ngClass",i.ValidacionplandeestudiosxElemento("SiglaMateria")),s(7),l("ngClass",i.ValidacionplandeestudiosxElemento("Prerrequisitos")),s(6),l("ngClass",i.ValidacionplandeestudiosxElemento("SiglasPrerrequisitos")),s(7),l("ngClass",i.ValidacionplandeestudiosxElemento("TipoMateria")),s(3),l("ngForOf",i.tipoMateriaOptions),s(6),l("ngClass",i.ValidacionplandeestudiosxElemento("ModoMateria")),s(3),l("ngForOf",i.modoMateriaOptions),s(6),l("ngIf",!i.newplandeestudios.get("id").value),s(2),l("ngIf",!i.AnimacionCargabtnModalplandeestudios),s(2),l("ngIf",i.AnimacionCargabtnModalplandeestudios),s(),l("ngIf",!i.AnimacionCargabtnModalplandeestudios)}}function ao(a,t){if(a&1){let e=h();n(0,"button",99),f("click",function(){let r=p(e).$implicit;return u(r.action())}),c(1),o()}if(a&2){let e=t.$implicit;s(),y(" ",e.label," ")}}function so(a,t){if(a&1&&(n(0,"div",97),P(1,"async"),P(2,"async"),g(3,ao,2,1,"button",98),P(4,"async"),o()),a&2){let e,i,r=m();l("ngStyle",M(8,Mn,((e=R(1,2,r.menuStateplandeestudios$))==null?null:e.y)+"px",((e=R(2,4,r.menuStateplandeestudios$))==null?null:e.x)+"px")),s(3),l("ngForOf",(i=R(4,6,r.menuStateplandeestudios$))==null?null:i.items)}}function lo(a,t){if(a&1){let e=h();n(0,"div",56)(1,"h5",57),c(2,"Componente Gestion de Carreras"),o(),n(3,"button",100),f("click",function(){let r=p(e).$implicit;return u(r.dismiss())}),o()(),n(4,"div",59),x(5,"app-carreras",101),o()}a&2&&(s(5),l("modo","uno")("idAnio","ASDASD"))}function co(a,t){if(a&1){let e=h();n(0,"div",56)(1,"h5",57),c(2,"Componente Gestion de Materias"),o(),n(3,"button",100),f("click",function(){let r=p(e).$implicit;return u(r.dismiss())}),o()(),n(4,"div",59),x(5,"app-materias",101),o()}a&2&&(s(5),l("modo","uno")("idAnio","ASDASD"))}var Le=class Le{constructor(t,e,i,r,d,_){this._controles=t;this._planest=e;this._tools=i;this._carr=r;this._anios=d;this._auth=_;this.isRelacionDocenteEstudianteLocked=!1;this.relacionDocenteEstudianteOptionsView=[];this.tipoMateriaOptions=[];this.modoMateriaOptions=[];this.relacionDocenteEstudianteOptions=[];this.LvlCursoOptions=[];this.esSuperAdmin=!1;this.plandeestudios=[];this.paginaplandeestudios=1;this.isLoadingplandeestudios=!1;this.AnimacionCargabtnModalplandeestudios=!1;this.filtertxtplandeestudios="";this.filtroAnioId=null;this.filtroResolucionKey="";this.filtroResolucion=null;this.filtroNivelCarrera=null;this.filtroInstitucionId=null;this.resolucionOptions=[];this.collectionSizeplandeestudios=0;this.pageSizeplandeestudios=10;this.pageSizeOptionsplandeestudios=[5,10,20,50];this.sortColumnsplandeestudios=[];this.menuStateplandeestudios$=this._tools.state$;this.carreras=[];this.anios=[];this.newplandeestudios=this._planest.createFormGroupplandeestudios(),this.newplandeestudiosAnteriorAccion=this._planest.createFormGroupplandeestudios(),this.initModoMateriaWatcher()}ngOnInit(){this.cargarCarreras(),this.cargarAnios(),this.cargarOptionsDesdeControles(),this._auth.revisarSiEsSuperAdmin().subscribe(t=>{this.esSuperAdmin=t,this.rebuildResolucionOptions(),this.onFiltroChange()})}cargarOptionsDesdeControles(){let t=["TIPOS MATERIAS","MODOS MATERIAS","RELACI\xD3N DOCENTE ESTUDIANTES","LVLCURSO"];this._controles.ObtenerOptionsSelectPorCategorias(t).subscribe({next:e=>{this.tipoMateriaOptions=e?.["TIPOS MATERIAS"]||[],this.modoMateriaOptions=e?.["MODOS MATERIAS"]||[],this.relacionDocenteEstudianteOptions=e?.["RELACI\xD3N DOCENTE ESTUDIANTES"]||[],this.LvlCursoOptions=e?.LVLCURSO||[],this.applyRelacionDocenteRules(this.newplandeestudios?.get("ModoMateria")?.value)},error:()=>{this.tipoMateriaOptions=[],this.modoMateriaOptions=[],this.relacionDocenteEstudianteOptions=[],this.LvlCursoOptions=[],this.relacionDocenteEstudianteOptionsView=[],this.isRelacionDocenteEstudianteLocked=!1}})}initModoMateriaWatcher(){this.modoMateriaSub?.unsubscribe();let t=this.newplandeestudios?.get("ModoMateria");t&&(this.modoMateriaSub=t.valueChanges.subscribe(e=>{this.applyRelacionDocenteRules(e)}),this.applyRelacionDocenteRules(t.value))}normalizeText(t){return(t??"").toString().trim().toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}findOptionValueApprox(t,e){let i=this.normalizeText(t);return(e||[]).find(d=>this.normalizeText(d?.value)===i||this.normalizeText(d?.label)===i)?.value??null}buildAllowedValues(t){let e=new Set;for(let i of t){let r=this.findOptionValueApprox(i,this.relacionDocenteEstudianteOptions);e.add(r??i)}return e}isModoMateria(t,e){return this.normalizeText(t)===this.normalizeText(e)}applyRelacionDocenteRules(t){let e=this.newplandeestudios?.get("RelacionDocenteCursoAEstudiante"),i=(e?.value??"").toString(),r=null,d=!1;this.isModoMateria(t,"1 DOCENTE x MATERIA")||this.isModoMateria(t,"MULTIPLES DOCENTES x MATERIA")?(d=!0,r=this.buildAllowedValues(["NINGUNA"])):this.isModoMateria(t,"MODO INSTRUMENTOS DE ESPECIALIDAD")?r=this.buildAllowedValues(["1 DOCENTE DE ESPECIALIDAD x ESTUDIANTE","2 DOCENTES DE ESPECIALIDAD x ESTUDIANTE","NINGUNA"]):(this.isModoMateria(t,"MODO PR\xC1CTICA DE CONJUNTOS")||this.isModoMateria(t,"MODO PRACTICA DE CONJUNTOS"))&&(r=this.buildAllowedValues(["1 DOCENTE DE PR\xC1CTICA DE CONJUNTO x ESTUDIANTE","1 DOCENTE DE PRACTICA DE CONJUNTO x ESTUDIANTE","NINGUNA"])),this.isRelacionDocenteEstudianteLocked=d;let _=this.relacionDocenteEstudianteOptions||[];if(this.relacionDocenteEstudianteOptionsView=_.map(C=>{let S=r?r.has(C.value):!0;return Be(ae({},C),{disabled:!!C.disabled||!S})}),e){let C=this.findOptionValueApprox("NINGUNA",_)??"NINGUNA",S=r?r.has(i):!0;(d||!S)&&i!==C&&e.setValue(C)}}rebuildResolucionOptions(){let t=new Map;for(let e of this.carreras){let i=(e?.Resolucion??"").toString().trim();if(!i)continue;let r=(e?.Nivel??"").toString().trim(),d=(e?.Area??"").toString().trim(),_=e?.instituciones_id,C=_!=null&&_!==""?Number(_):null,S=(e?.NombreInstitucion??"").toString().trim(),E=r||"SIN NIVEL",b=`${i}|${E}`,w=this.esSuperAdmin&&C?`${C}|${b}`:b,V=`${d?d+" \xB7 ":""}${i} (${E})`,L=this.esSuperAdmin&&C?`${V}${S?" \xB7 "+S:""}`:V;t.has(w)||t.set(w,{key:w,label:L,resolucion:i,nivel:E,instituciones_id:C})}this.resolucionOptions=Array.from(t.values()).sort((e,i)=>e.label.localeCompare(i.label))}onFiltroChange(){if(this.paginaplandeestudios=1,!!!this.filtroAnioId){this.plandeestudios=[],this.collectionSizeplandeestudios=0;return}this.parseResolucionKey(),this.Cargarplandeestudios()}parseResolucionKey(){let t=(this.filtroResolucionKey??"").toString();if(!t){this.filtroResolucion=null,this.filtroNivelCarrera=null,this.filtroInstitucionId=null;return}let e=t.split("|");if(e.length>=3){let i=Number(e[0]),r=(e[1]??"").toString(),d=e.slice(2).join("|");this.filtroInstitucionId=Number.isFinite(i)?i:null,this.filtroResolucion=r||null,this.filtroNivelCarrera=d||null;return}if(e.length===2){let i=(e[0]??"").toString(),r=(e[1]??"").toString();this.filtroInstitucionId=null,this.filtroResolucion=i||null,this.filtroNivelCarrera=r||null;return}this.filtroInstitucionId=null,this.filtroResolucion=t,this.filtroNivelCarrera=null}Cargarplandeestudios(){let t=this.filtroAnioId;if(!t){this.plandeestudios=[],this.collectionSizeplandeestudios=0;return}this.isLoadingplandeestudios=!0;let e={anio_id:t,instituciones_id:this.esSuperAdmin?this.filtroInstitucionId??void 0:void 0};this.filtroResolucion&&(e.resolucion=this.filtroResolucion),this.filtroNivelCarrera&&(e.nivel=this.filtroNivelCarrera),this._planest.Obtenerplandeestudios(e).subscribe({next:i=>{console.log("planes de estudio",i.data),this.plandeestudios=i.data||[],this.collectionSizeplandeestudios=this.plandeestudios.length,this.isLoadingplandeestudios=!1},error:i=>{console.error("Error al cargar plandeestudios",i),this.isLoadingplandeestudios=!1}})}AgregarModificarplandeestudios(){if(this.newplandeestudios.invalid){this.ValidacionTodoElementoplandeestudios(),this._tools.MostrarMensajeFrmIncompleto(),this.AnimacionCargabtnModalplandeestudios=!1;return}else{this.AnimarCargaTablaplandeestudios(),this.AnimacionCargabtnModalplandeestudios=!0,this._tools.MostrarMensajeLoading(),this.newplandeestudiosAnteriorAccion.setValue(this.newplandeestudios.value);let t=this.newplandeestudios.controls.id.value;console.log("INFO A PROCESAR",this.newplandeestudios.value),t?this._planest.Modificarplandeestudios(this.newplandeestudios.value,this.newplandeestudios.value.id).subscribe(e=>{console.log("SE MODIFICO CORRECTAMENTE plandeestudios",e.data),this.Cargarplandeestudios(),this.resetplandeestudios(),this.AnimacionCargabtnModalplandeestudios=!1,this._tools.MostrarMensajeSuccess()},e=>{console.log("ERROR AL MODIFICAR plandeestudios",e),this.AnimacionCargabtnModalplandeestudios=!1,this._tools.MostrarMensajeError()}):this._planest.Agregarplandeestudios(this.newplandeestudios.value).subscribe(e=>{console.log("SE A\xD1ADIO CORRECTAMENTE plandeestudios",e.data),this.Cargarplandeestudios(),this.resetplandeestudios(),this.AnimacionCargabtnModalplandeestudios=!1,this._tools.MostrarMensajeSuccess()},e=>{console.log("ERROR AL A\xD1ADIR plandeestudios",e),this.AnimacionCargabtnModalplandeestudios=!1,this._tools.MostrarMensajeError()})}}Seleccionarplandeestudios(t){if(this._tools.MostrarMensajeLoading(),t){if(!this.plandeestudios.find(i=>i.id===t))return;this._planest.Seleccionarplandeestudios(t).subscribe(i=>{Object.keys(this.newplandeestudios.controls).forEach(r=>{this.newplandeestudios.controls[r].setValue(i.data[r])}),console.log("SELECCION DE plandeestudios EXITOSA",this.newplandeestudios.value),this.newplandeestudiosAnteriorAccion.setValue(this.newplandeestudios.value),this.modalGestionplandeestudiosRef=this._tools.openModal(this.modalgestionplandeestudios,"xl"),this._tools.MostrarMensajeSuccess()},i=>{console.log("ERROR AL SELECCIONAR plandeestudios",i),this._tools.MostrarMensajeError()})}}Eliminarplandeestudios(t){this._tools.mostrarMensajeConfirm("\xBFSEGURO QUE DESEA ELIMINAR?","SE ELIMINARA EL DATO Y NO SE PODR\xC1 RECUPERAR EL DATO","warning","SI, ESTOY SEGURO","NO").then(e=>{e&&(this._tools.MostrarMensajeLoading(),this._planest.Eliminarplandeestudios(t).subscribe(i=>{console.log(i.data),this.Cargarplandeestudios(),this._tools.MostrarMensajeSuccess()},i=>{console.log("ERROR AL ELIMINAR plandeestudios",i),this._tools.MostrarMensajeError()}))})}resetplandeestudios(){this.newplandeestudios=this._planest.createFormGroupplandeestudios(),this.initModoMateriaWatcher(),this._tools.closeModal(this.modalGestionplandeestudiosRef)}AutoCompletarLastplandeestudios(){this.newplandeestudios.setValue(this.newplandeestudiosAnteriorAccion.value),this.newplandeestudios.patchValue({id:0}),console.log("listo",this.newplandeestudios.value)}AnimarCargaTablaplandeestudios(){this.plandeestudios=[],this.isLoadingplandeestudios=!0}ValidacionplandeestudiosxElemento(t){return this._tools.obtenerValidationClass(this.newplandeestudios,t)}ValidacionTodoElementoplandeestudios(){Object.values(this.newplandeestudios.controls).forEach(t=>{t.markAsTouched(),t.markAsDirty()})}onPageSizeChangeplandeestudios(){this.paginaplandeestudios=1}sortByplandeestudios(t,e){this.sortColumnsplandeestudios=this._tools.handleSort(t,e,this.sortColumnsplandeestudios),this.plandeestudios=this._tools.applyMultiSort(this.plandeestudios,this.sortColumnsplandeestudios)}isSortedplandeestudios(t){return this._tools.isSorted(this.sortColumnsplandeestudios,t)}getSortDirplandeestudios(t){return this._tools.getSortDirection(this.sortColumnsplandeestudios,t)}closeMenu(){this._tools.close()}abrirMenuplandeestudios(t,e){t.preventDefault(),t.stopPropagation();let i=[{label:"\u270F Editar",action:()=>this.Seleccionarplandeestudios(e.id)},{label:"\u{1F5D1}\uFE0F Eliminar",action:()=>this.Eliminarplandeestudios(e.id)}];this._tools.open(t.clientX,t.clientY,i)}cargarCarreras(){this._carr.Obtenercarreras().subscribe({next:t=>{console.log("data carreras",t),this.carreras=t.data||[],this.rebuildResolucionOptions()},error:t=>{console.error("Error al cargar carreras",t),this.resolucionOptions=[]}})}cargarAnios(){this._anios.ObtenerAniosConPredeterminado().subscribe({next:t=>{if(this.anios=t?.anios||[],this.filtroAnioId===null||this.filtroAnioId===void 0){let e=t?.predeterminado;e?.id?this.filtroAnioId=Number(e.id):this.anios?.length&&(this.filtroAnioId=Number(this.anios[0]?.id))}this.onFiltroChange()},error:t=>{console.error("Error al cargar anios",t)}})}};Le.\u0275fac=function(e){return new(e||Le)(A(Ie),A(De),A(ne),A(oe),A(Te),A(te))},Le.\u0275cmp=U({type:Le,selectors:[["app-plandeestudios"]],viewQuery:function(e,i){if(e&1&&de(En,7),e&2){let r;me(r=pe())&&(i.modalgestionplandeestudios=r.first)}},hostBindings:function(e,i){e&1&&f("click",function(){return i.closeMenu()},ve)},standalone:!1,decls:60,vars:20,consts:[["modalgestionplandeestudios",""],["modalOtroComponentecarreras",""],["modalOtroComponentematerias",""],[1,"container","mt-4"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"lead","text-secondary","subtitulosGlobales"],[1,"col-sm-6","d-flex","justify-content-start","button",2,"gap","10px"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","width","30px","height","30px"],["width","50px","height","50px",3,"options"],[1,"dir-part"],[1,"col-sm-3","d-flex","justify-content-end",2,"gap","10px"],[1,"form-floating",2,"min-width","140px"],["title","Filtrar por A\xF1o",1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-floating",2,"min-width","180px"],["title","Filtrar por Resoluci\xF3n",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-sm-3","d-flex","justify-content-end"],[1,"input-group"],[1,"input-group-text"],["width","30px","height","30px",3,"options"],[1,"form-floating"],["type","text","placeholder","Buscar","title","Filtrar/Buscar",1,"form-control",3,"input","ngModelChange","ngModel"],["class","mt-4",4,"ngIf"],["class","context-menu",3,"ngStyle",4,"ngIf"],[1,"mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-sm","align-middle"],[1,""],[1,"text-center"],["style","user-select: none; -webkit-user-select: none; -moz-user-select: none;",3,"click",4,"ngIf"],[2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["class","bi",3,"ngClass",4,"ngIf"],["title","Sigla Prerrequisitos",2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],[4,"ngIf"],["style","cursor: pointer;",3,"contextmenu",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["previousLabel","Anterior","nextLabel","Siguiente",3,"pageChange","page","collectionSize","pageSize","maxSize","rotate","ellipses","boundaryLinks"],[1,"form-select",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"bi",3,"ngClass"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[2,"cursor","pointer",3,"contextmenu"],[1,"small","text-muted"],[1,"text-center","d-flex","justify-content-center","align-items-center",2,"gap","5px"],["title","Modificar informaci\xF3n",1,"btn","btn-outline-warning","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src",4,"ngIf"],["width","30px","height","35px",3,"options",4,"ngIf"],["title","Eliminar informaci\xF3n",1,"btn","btn-outline-danger","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src"],["width","30px","height","35px",3,"options"],[3,"value"],[1,"modal-header"],[1,"modal-title"],["type","button","title","cerrar",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup"],[1,"form-floating","mb-3","col-sm-6"],["formControlName","anio_id",1,"form-control",3,"ngClass"],["disabled","","selected","",3,"value"],[1,"invalid-feedback"],["formControlName","carreras_id",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-2"],["type","number","placeholder"," ","formControlName","RangoLvlCurso",1,"form-control",3,"ngClass"],["type","number","placeholder"," ","formControlName","Rango",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-3"],["type","number","placeholder"," ","formControlName","Horas",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-5"],["formControlName","LvlCurso",1,"form-control",3,"ngClass"],["disabled","",3,"value"],[3,"value","disabled",4,"ngFor","ngForOf"],["type","text","placeholder"," ","formControlName","NombreMateria",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder"," ","formControlName","SiglaMateria",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder"," ","formControlName","Prerrequisitos",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder"," ","formControlName","SiglasPrerrequisitos",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","TipoMateria",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-4"],["formControlName","ModoMateria",1,"form-control",3,"ngClass"],[1,"modal-footer"],["class","button d-flex justify-content-start",4,"ngIf"],[1,"button","me-2"],["title","Cancelar y cerrar","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],[1,"button"],["class","btn mouse-dir success","title","Procesando informaci\xF3n",3,"disabled","click",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;","title","Accionar",3,"click",4,"ngIf"],[3,"value","disabled"],[1,"button","d-flex","justify-content-start"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Cancelar y cerrar",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Procesando informaci\xF3n",1,"btn","mouse-dir","success",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["title","Accionar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[1,"context-menu",3,"ngStyle"],["class","context-item",3,"click",4,"ngFor","ngForOf"],[1,"context-item",3,"click"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[3,"modo","idAnio"]],template:function(e,i){if(e&1){let r=h();n(0,"div",3)(1,"div",4)(2,"div",5)(3,"h1",6),c(4,"Gesti\xF3n de Plan de Estudios"),o(),n(5,"p",7),c(6,'Administra la informaci\xF3n de los "Planes de estudios", "Materias" y "Carreras" de manera sencilla y eficiente'),o()()()(),n(7,"div",4)(8,"div",8)(9,"button",9),f("click",function(){p(r);let _=Ke(53);return u(i.modalGestionplandeestudiosRef=i._tools.openModal(_,"xl"))}),n(10,"span",10),x(11,"ng-lottie",11),o(),n(12,"span"),c(13,"A\xF1adir plandeestudios "),o(),x(14,"span",12),o(),n(15,"button",9),f("click",function(){p(r);let _=Ke(57);return u(i._tools.openModal(_,"xl"))}),n(16,"span",10),x(17,"ng-lottie",11),o(),n(18,"span"),c(19,"GESTIONAR CARRERAS"),o(),x(20,"span",12),o(),n(21,"button",9),f("click",function(){p(r);let _=Ke(59);return u(i._tools.openModal(_,"xl"))}),n(22,"span",10),x(23,"ng-lottie",11),o(),n(24,"span"),c(25,"GESTIONAR MATERIAS"),o(),x(26,"span",12),o()(),n(27,"div",13)(28,"div",14)(29,"select",15),O("ngModelChange",function(_){return p(r),T(i.filtroAnioId,_)||(i.filtroAnioId=_),u(_)}),f("ngModelChange",function(){return p(r),i.paginaplandeestudios=1,u(i.onFiltroChange())}),n(30,"option",16),c(31,"Seleccione una opci\xF3n"),o(),g(32,wn,2,2,"option",17),o(),n(33,"label"),c(34,"A\xF1o"),o()(),n(35,"div",18)(36,"select",19),O("ngModelChange",function(_){return p(r),T(i.filtroResolucionKey,_)||(i.filtroResolucionKey=_),u(_)}),f("ngModelChange",function(){return p(r),i.paginaplandeestudios=1,u(i.onFiltroChange())}),n(37,"option",16),c(38,"Seleccione una opci\xF3n"),o(),g(39,An,2,2,"option",17),o(),n(40,"label"),c(41,"Resoluci\xF3n"),o()()(),n(42,"div",20)(43,"div",21)(44,"span",22),x(45,"ng-lottie",23),o(),n(46,"div",24)(47,"input",25),f("input",function(){return p(r),u(i.paginaplandeestudios=1)}),O("ngModelChange",function(_){return p(r),T(i.filtertxtplandeestudios,_)||(i.filtertxtplandeestudios=_),u(_)}),o(),n(48,"label"),c(49,"Buscar"),o()()()()(),g(50,Kn,46,26,"div",26),P(51,"filterByFields"),g(52,ro,105,23,"ng-template",null,0,$)(54,so,5,11,"div",27),P(55,"async"),g(56,lo,6,2,"ng-template",null,1,$)(58,co,6,2,"ng-template",null,2,$)}if(e&2){let r;s(11),l("options",i._tools.optionsAdicionar),s(6),l("options",i._tools.optionssubgestion),s(6),l("options",i._tools.optionssubgestion),s(6),I("ngModel",i.filtroAnioId),s(),l("ngValue",null),s(2),l("ngForOf",i.anios),s(4),I("ngModel",i.filtroResolucionKey),s(),l("ngValue",null),s(2),l("ngForOf",i.resolucionOptions),s(6),l("options",i._tools.optionslupa),s(2),I("ngModel",i.filtertxtplandeestudios),s(3),l("ngIf",W(51,13,i.plandeestudios,i.filtertxtplandeestudios,Ye(19,yn))),s(4),l("ngIf",(r=R(55,17,i.menuStateplandeestudios$))==null?null:r.visible)}},dependencies:[q,K,Q,Ce,ye,Z,ee,Se,tt,X,Y,Ee,J,Me,we,Ae,ie,Ve,Re,he,be,ot],encapsulation:2});var rt=Le;var ge=class ge{constructor(t){this.http=t;this.ruta=Ze.ruta}Obtenerplanteldocentesmaterias(t){let e=new Je,i=t;return i?.planteldocentes_id&&(e=e.set("planteldocentes_id",String(i.planteldocentes_id))),i?.anio_id&&(e=e.set("anio_id",String(i.anio_id))),i?.resolucion&&(e=e.set("resolucion",String(i.resolucion))),i?.nivel&&(e=e.set("nivel",String(i.nivel))),i?.instituciones_id&&(e=e.set("instituciones_id",String(i.instituciones_id))),this.http.get(this.ruta+"api/planteldocentesmaterias/",{params:e})}ObtenerplanteldocentesmateriasPorDocente(t){return this.Obtenerplanteldocentesmaterias({planteldocentes_id:t})}AsignarMateriaADocente(t){return this.http.post(this.ruta+"api/planteldocentesmaterias/assign",t)}QuitarMateriaADocente(t){return this.http.post(this.ruta+"api/planteldocentesmaterias/unassign",t)}Agregarplanteldocentesmaterias(t){return this.http.post(this.ruta+"api/planteldocentesmaterias/",t)}Modificarplanteldocentesmaterias(t,e){return this.http.put(this.ruta+"api/planteldocentesmaterias/"+e,t)}Seleccionarplanteldocentesmaterias(t){return this.http.get(this.ruta+"api/planteldocentesmaterias/"+t)}Eliminarplanteldocentesmaterias(t){return this.http.delete(this.ruta+"api/planteldocentesmaterias/"+t)}createFormGroupplanteldocentesmaterias(){return new et({id:new N(0),planteldocentes_id:new N(""),materias_id:new N("")})}};ge.\u0275fac=function(e){return new(e||ge)(Ue(Xe))},ge.\u0275prov=ze({token:ge,factory:ge.\u0275fac,providedIn:"root"});var at=ge;var Pt=a=>({checked:a,"custom-border":!0});function po(a,t){a&1&&(n(0,"div",24)(1,"div",25)(2,"h1",26),c(3,"Asignador de MATERIAS - DOCENTES"),o()()())}function uo(a,t){if(a&1&&x(0,"img",37),a&2){let e=m(2);l("src",e._tools.ruta+e.fotoDocente,G)}}function _o(a,t){if(a&1&&x(0,"ng-lottie",38),a&2){let e=m(2);l("options",e.sexoDocente==="MASCULINO"?e._tools.optionsavatarmasculinoanimado:e._tools.optionsavatarfemenino2)}}function go(a,t){if(a&1&&(n(0,"span",39),c(1),o()),a&2){let e=m(2);s(),y("ID: ",e.docenteId)}}function fo(a,t){if(a&1&&(n(0,"div",24)(1,"div",27)(2,"div",28)(3,"div",29)(4,"div",30),g(5,uo,1,1,"img",31)(6,_o,1,1,"ng-lottie",32),o(),n(7,"div")(8,"div",33),c(9,"Docente seleccionado"),o(),n(10,"div",34),c(11),o()()(),n(12,"div",35),g(13,go,2,1,"span",36),o()()()()),a&2){let e=m();s(5),l("ngIf",e.fotoDocente),s(),l("ngIf",!e.fotoDocente),s(5),v(e.nombreDocente||(e.docenteSeleccionadoDemo==null?null:e.docenteSeleccionadoDemo.nombre)),s(2),l("ngIf",e.docenteId)}}function xo(a,t){if(a&1&&(n(0,"option",10),c(1),o()),a&2){let e=t.$implicit;l("ngValue",e.id),s(),v(e.Anio)}}function vo(a,t){if(a&1&&(n(0,"option",10),c(1),o()),a&2){let e=t.$implicit;l("ngValue",e.key),s(),v(e.label)}}function Co(a,t){if(a&1){let e=h();n(0,"div",40)(1,"button",41),f("click",function(){p(e);let r=m();return u(r.togglePendientesDocentes())}),n(2,"span",42),x(3,"ng-lottie",43),o(),n(4,"span"),c(5),o(),x(6,"span",44),o()()}if(a&2){let e=m();s(3),l("options",e._tools.optionseye),s(2),y("",e.verPendientesDocentes?"Ocultar pendientes":"Ver docentes pendientes de asignaci\xF3n"," ")}}function ho(a,t){a&1&&(n(0,"div",45),c(1," Seleccione "),n(2,"b"),c(3,"A\xF1o (Gesti\xF3n)"),o(),c(4," y "),n(5,"b"),c(6,"Resoluci\xF3n"),o(),c(7," para cargar materias/asignaciones. "),o())}function bo(a,t){if(a&1){let e=h();n(0,"tr")(1,"td"),c(2),o(),n(3,"td"),c(4),o(),n(5,"td")(6,"button",55),f("click",function(){let r=p(e).$implicit,d=m(2);return u(d.seleccionarDocenteDemo(r))}),c(7," Seleccionar "),o()()()}if(a&2){let e=t.$implicit,i=m(2);s(2),ue("",e.nombre," (#",e.id,")"),s(2),v(e.cantMaterias||0),s(2),l("disabled",!i.esDocenteSeleccionable(e))}}function So(a,t){a&1&&(n(0,"tr")(1,"td",56),c(2,"Sin pendientes"),o()())}function Eo(a,t){if(a&1){let e=h();n(0,"div",46)(1,"div",47)(2,"span"),c(3,"DOCENTES SIN ASIGNACIONES (sin materias asignadas)"),o()(),n(4,"div",18)(5,"div",5)(6,"span",6),x(7,"i",48),o(),n(8,"div",8)(9,"input",49),f("input",function(r){p(e);let d=m();return u(d.filterPendientesDocentes=r.target.value)}),o(),n(10,"label"),c(11,"Buscar (nombre)"),o()()()(),n(12,"div",50)(13,"table",51)(14,"thead")(15,"tr")(16,"th"),c(17,"Docente"),o(),n(18,"th",52),c(19,"Materias asignadas"),o(),n(20,"th",53),c(21,"Acci\xF3n"),o()()(),n(22,"tbody"),g(23,bo,8,4,"tr",54)(24,So,3,0,"tr",22),o()()()()}if(a&2){let e=m();s(9),l("value",e.filterPendientesDocentes),s(14),l("ngForOf",e.docentesPendientesFiltrados())("ngForTrackBy",e.trackById),s(),l("ngIf",e.docentesPendientesFiltrados().length===0)}}function yo(a,t){if(a&1){let e=h();n(0,"button",69),f("click",function(){let r=p(e).$implicit,d=m(2);return u(d.seleccionarDocenteDemo(r))}),c(1),n(2,"span",70),c(3),o()()}if(a&2){let e=t.$implicit,i=m(2);Qe("active",(i.docenteSeleccionadoDemo==null?null:i.docenteSeleccionadoDemo.id)===e.id),l("disabled",!i.esDocenteSeleccionable(e)),s(),ue(" ",e.nombre," (#",e.id,") "),s(2),y(" - ",e.cantMaterias||0," materias")}}function Mo(a,t){a&1&&(n(0,"small",70),c(1,"Selecciona un docente para habilitar los toggles."),o())}function wo(a,t){if(a&1&&(n(0,"h3",71),c(1," Docente Seleccionado: "),n(2,"b"),c(3),o()()),a&2){let e=m(2);s(3),v(e.docenteSeleccionadoDemo.nombre)}}function Ao(a,t){if(a&1){let e=h();n(0,"div",57)(1,"div",58)(2,"div",5)(3,"span",6),x(4,"i",48),o(),n(5,"div",8)(6,"input",59),f("input",function(r){p(e);let d=m();return u(d.filterDocente=r.target.value)}),o(),n(7,"label"),c(8,"Buscar docente (nombre o ID)"),o()()(),n(9,"div",60),g(10,yo,4,6,"button",61),o(),n(11,"div",62),g(12,Mo,2,0,"small",63)(13,wo,4,1,"h3",64),o()(),n(14,"div",65)(15,"div",66)(16,"input",67),f("change",function(r){p(e);let d=m();return u(d.onToggleChange(r))}),o(),n(17,"label",68),c(18,"Modo tabla"),o()()()()}if(a&2){let e=m();s(6),l("value",e.filterDocente),s(4),l("ngForOf",e.docentesFiltradosDemo())("ngForTrackBy",e.trackById),s(2),l("ngIf",!e.docenteSeleccionadoDemo),s(),l("ngIf",e.docenteSeleccionadoDemo)}}function Io(a,t){if(a&1&&(n(0,"option",10),c(1),o()),a&2){let e=t.$implicit;l("ngValue",e.id),s(),v(e.Anio)}}function To(a,t){if(a&1&&(n(0,"option",10),c(1),o()),a&2){let e=t.$implicit;l("ngValue",e.key),s(),v(e.label)}}function Oo(a,t){if(a&1){let e=h();n(0,"div",72)(1,"div",4)(2,"div",5)(3,"span",6),x(4,"i",7),o(),n(5,"div",8)(6,"select",73),O("ngModelChange",function(r){p(e);let d=m();return T(d.filtroAnioId,r)||(d.filtroAnioId=r),u(r)}),f("change",function(){p(e);let r=m();return u(r.onCambioFiltrosAsignacion())}),n(7,"option",10),c(8,"-- Seleccione --"),o(),g(9,Io,2,2,"option",11),o(),n(10,"label",74),c(11,"A\xF1o (Gesti\xF3n)"),o()()()(),n(12,"div",75)(13,"div",5)(14,"span",6),x(15,"i",13),o(),n(16,"div",8)(17,"select",76),O("ngModelChange",function(r){p(e);let d=m();return T(d.filtroResolucionKey,r)||(d.filtroResolucionKey=r),u(r)}),f("change",function(){p(e);let r=m();return u(r.onCambioFiltrosAsignacion())}),n(18,"option",10),c(19,"-- Seleccione --"),o(),g(20,To,2,2,"option",11),o(),n(21,"label",77),c(22,"Resoluci\xF3n"),o()()()()()}if(a&2){let e=m();s(6),I("ngModel",e.filtroAnioId),s(),l("ngValue",null),s(2),l("ngForOf",e.aniosOptions),s(8),I("ngModel",e.filtroResolucionKey),s(),l("ngValue",""),s(2),l("ngForOf",e.resolucionOptions)}}function Vo(a,t){if(a&1){let e=h();n(0,"button",89),f("click",function(){let r=p(e).$implicit,d=m(2);return u(d.toggleLvlCurso(r))}),c(1),o()}if(a&2){let e=t.$implicit,i=m(2);Qe("active",i.isLvlCursoSeleccionado(e)),s(),y(" ",e," ")}}function Do(a,t){if(a&1){let e=h();n(0,"button",90),f("click",function(){let r=p(e).$implicit,d=m(2);return u(d.toggleParalelo(r))}),c(1),o()}if(a&2){let e=t.$implicit,i=m(2);Qe("active",i.isParaleloSeleccionado(e)),s(),y(" ",e," ")}}function No(a,t){if(a&1&&(n(0,"div",100),c(1),o()),a&2){let e=t.ngIf;s(),y(" Docentes: ",e," ")}}function Po(a,t){a&1&&(n(0,"div",101)(1,"span",102),c(2,"Cargando..."),o()())}function Ro(a,t){if(a&1){let e=h();n(0,"div",95)(1,"button",96),f("click",function(r){let d=p(e).$implicit,_=m(4);return u(_.toggleAsignacionDemo(d,r))}),n(2,"span",97),c(3),o(),n(4,"span"),c(5),o()(),g(6,No,2,1,"div",98)(7,Po,3,0,"div",99),o()}if(a&2){let e=t.$implicit,i=m(4);l("ngClass",pt(7,Pt,i.isAsignadaDemo(e.id))),s(),l("disabled",!i.docenteSeleccionadoDemo||i.isLoadingMateria[e.id]),s(),l("ngClass",i.isAsignadaDemo(e.id)?"bg-success":"bg-secondary"),s(),y(" ",i.isAsignadaDemo(e.id)?"ASIGNADO":"NO"," "),s(2),v((e.sigla?e.sigla+" - ":"")+e.nombre),s(),l("ngIf",i.docentesAsignadosEnMateriaTexto(e.id)),s(),l("ngIf",i.isLoadingMateria[e.id])}}function Fo(a,t){if(a&1&&(n(0,"div")(1,"h5",92),c(2),o(),n(3,"div",93),g(4,Ro,8,9,"div",94),o(),x(5,"hr"),o()),a&2){let e=t.$implicit,i=m(3);s(2),v(e),s(2),l("ngForOf",i.materiasPorCategoria(e))}}function ko(a,t){if(a&1&&(dt(0),g(1,Fo,6,2,"div",91),mt()),a&2){let e=m(2);s(),l("ngForOf",e.categoriasDemo())}}function Lo(a,t){if(a&1&&(n(0,"span"),c(1),o()),a&2){let e=m().$implicit;s(),v(e.lvlCurso)}}function Go(a,t){if(a&1&&(n(0,"span"),c(1),o()),a&2){let e=m().$implicit;s(),y(" - ",e.paralelo)}}function jo(a,t){if(a&1&&(n(0,"div",100),c(1),o()),a&2){let e=t.ngIf;s(),y(" Docentes: ",e," ")}}function Bo(a,t){a&1&&(n(0,"div",101)(1,"span",102),c(2,"Cargando..."),o()())}function $o(a,t){if(a&1){let e=h();n(0,"div",95)(1,"button",96),f("click",function(r){let d=p(e).$implicit,_=m(3);return u(_.toggleAsignacionDemo(d,r))}),n(2,"span",97),c(3),o(),n(4,"span"),c(5),o()(),n(6,"div",100),g(7,Lo,2,1,"span",22)(8,Go,2,1,"span",22),o(),g(9,jo,2,1,"div",98)(10,Bo,3,0,"div",99),o()}if(a&2){let e=t.$implicit,i=m(3);l("ngClass",pt(9,Pt,i.isAsignadaDemo(e.id))),s(),l("disabled",!i.docenteSeleccionadoDemo||i.isLoadingMateria[e.id]),s(),l("ngClass",i.isAsignadaDemo(e.id)?"bg-success":"bg-secondary"),s(),y(" ",i.isAsignadaDemo(e.id)?"ASIGNADO":"NO"," "),s(2),v((e.sigla?e.sigla+" - ":"")+e.nombre),s(2),l("ngIf",e.lvlCurso),s(),l("ngIf",e.paralelo),s(),l("ngIf",i.docentesAsignadosEnMateriaTexto(e.id)),s(),l("ngIf",i.isLoadingMateria[e.id])}}function zo(a,t){if(a&1&&(dt(0),n(1,"div",93),g(2,$o,11,11,"div",94),o(),mt()),a&2){let e=m(2);s(2),l("ngForOf",e.materiasFiltradasDemo())}}function Ho(a,t){if(a&1){let e=h();n(0,"div")(1,"div",72)(2,"div",78)(3,"div",5)(4,"span",6),x(5,"i",79),o(),n(6,"div",8)(7,"input",80),f("input",function(r){p(e);let d=m();return u(d.filterMateria=r.target.value)}),o(),n(8,"label"),c(9,"Buscar materia (sigla/nombre/ID)"),o()()()(),n(10,"div",81)(11,"div",82)(12,"input",83),f("change",function(){p(e);let r=m();return u(r.toggleModoCategorias())}),o(),n(13,"label",84),c(14,"Con categor\xEDas"),o()(),n(15,"div",85)(16,"small",86),c(17,"Cursos:"),o(),g(18,Vo,2,3,"button",87),o(),n(19,"div",85)(20,"small",86),c(21,"Paralelos:"),o(),g(22,Do,2,3,"button",88),o()()(),g(23,ko,2,1,"ng-container",22)(24,zo,3,1,"ng-container",22),o()}if(a&2){let e=m();s(7),l("value",e.filterMateria),s(5),l("checked",e.modoCategorias),s(6),l("ngForOf",e.lvlCursosDetectados()),s(4),l("ngForOf",e.paralelosDetectados()),s(),l("ngIf",e.modoCategorias),s(),l("ngIf",!e.modoCategorias)}}function Uo(a,t){a&1&&(n(0,"tr")(1,"td",105),c(2," Selecciona un docente para ver asignaciones. "),o()())}function Wo(a,t){if(a&1){let e=h();n(0,"tr")(1,"td"),c(2),o(),n(3,"td"),c(4),o(),n(5,"td"),c(6),o(),n(7,"td"),c(8),o(),n(9,"td"),c(10),o(),n(11,"td")(12,"button",106),f("click",function(){let r=p(e).$implicit,d=m(2);return u(d.quitarAsignacionTabla(r.materiaId))}),c(13," Quitar "),o()()()}if(a&2){let e=t.$implicit,i=t.index,r=m(2);s(2),v(i+1),s(2),v(e.docente),s(2),v(e.categoria),s(2),v(e.materia),s(2),v(e.paralelo),s(2),l("disabled",!r.docenteSeleccionadoDemo||r.isLoadingMateria[e.materiaId])}}function qo(a,t){a&1&&(n(0,"tr")(1,"td",107),c(2,"Sin asignaciones (demo)"),o()())}function Ko(a,t){if(a&1&&(n(0,"div",50)(1,"table",103)(2,"thead")(3,"tr")(4,"th"),c(5,"#"),o(),n(6,"th"),c(7,"Docente"),o(),n(8,"th"),c(9,"Categoria"),o(),n(10,"th"),c(11,"Materia"),o(),n(12,"th"),c(13,"Paralelo"),o(),n(14,"th"),c(15,"Acci\xF3n"),o()()(),n(16,"tbody",104),g(17,Uo,3,0,"tr",22)(18,Wo,14,6,"tr",91)(19,qo,3,0,"tr",22),o()()()),a&2){let e=m();s(17),l("ngIf",!e.docenteSeleccionadoDemo),s(),l("ngForOf",e.tablaAsignacionesDemo()),s(),l("ngIf",e.docenteSeleccionadoDemo&&e.tablaAsignacionesDemo().length===0)}}var Ge=class Ge{constructor(t,e,i,r,d,_,C){this._mat=t;this._tools=e;this._planteldoc=i;this._planteldocmat=r;this._carreras=d;this._anios=_;this._auth=C;this.modo="general";this.docenteId=null;this.nombreDocente=null;this.fotoDocente=null;this.sexoDocente=null;this.lastAppliedDocenteId=null;this.ModoBoolean=!1;this.filterDocente="";this.filterMateria="";this.docentesDemo=[];this.materiasDemo=[];this.docenteSeleccionadoDemo=null;this.paraleloDemo="";this.modoCategorias=!0;this.aniosOptions=[];this.filtroAnioId=null;this.filtroResolucionKey="";this.filtroResolucion=null;this.filtroNivelCarrera=null;this.filtroInstitucionId=null;this.resolucionOptions=[];this.esSuperAdmin=!1;this.carreras=[];this.verPendientesDocentes=!1;this.filterPendientesDocentes="";this.selectedLvlCursos=new Set;this.selectedParalelos=new Set;this.asignacionesDemo=new Map;this.docentesPorMateria=new Map;this.isLoadingMateria={};this.docentes=[];this.materias=[]}ngOnInit(){this.cargarFiltrosAsignacion(),this.cargardocentes(),this._auth.revisarSiEsSuperAdmin().subscribe(t=>{this.esSuperAdmin=t,this.rebuildResolucionOptions(),this.onCambioFiltrosAsignacion()}),this.tryApplyModoDocente()}ngOnChanges(t){(t.modo||t.docenteId||t.nombreDocente||t.fotoDocente||t.sexoDocente)&&this.tryApplyModoDocente()}tryApplyModoDocente(){if(this.modo!=="docente")return;let t=Number(this.docenteId??0);if(!Number.isFinite(t)||t<=0||this.lastAppliedDocenteId===t&&this.docenteSeleccionadoDemo?.id===t)return;this.verPendientesDocentes=!1,this.filterDocente="";let e=(this.nombreDocente??"").toString().trim()||`Docente #${t}`,i={id:t,nombre:e,cantMaterias:0,visibilidad:"VISIBLE",estado:"ACTIVO"},r=this.docentesDemo.find(d=>d.id===t);r||(this.docentesDemo=[i,...this.docentesDemo]),this.docenteSeleccionadoDemo=r??i,this.lastAppliedDocenteId=t,this.recalcularConteosDocentes()}modoEsDocente(){return this.modo==="docente"}filtrosAsignacionCompletos(){return this.getFiltroParams()!==null}cargarFiltrosAsignacion(){this._anios.Obteneranios().subscribe({next:t=>{let e=Array.isArray(t?.data)?t.data:[];this.aniosOptions=e.map(i=>({id:Number(i?.id),Anio:String(i?.Anio??"").trim()})).filter(i=>Number.isFinite(i.id)&&i.id>0&&i.Anio)},error:()=>{this.aniosOptions=[]}}),this._carreras.Obtenercarreras().subscribe({next:t=>{this.carreras=Array.isArray(t?.data)?t.data:[],this.rebuildResolucionOptions()},error:()=>{this.carreras=[],this.rebuildResolucionOptions()}})}rebuildResolucionOptions(){let t=new Map;for(let e of this.carreras||[]){let i=(e?.Resolucion??"").toString().trim();if(!i)continue;let r=(e?.Nivel??"").toString().trim(),d=(e?.Area??"").toString().trim(),_=e?.instituciones_id,C=_!=null&&_!==""?Number(_):null,S=(e?.NombreInstitucion??"").toString().trim(),E=r||"SIN NIVEL",b=`${i}|${E}`,w=this.esSuperAdmin&&C?`${C}|${b}`:b,V=`${d?d+" \xB7 ":""}${i} (${E})`,L=this.esSuperAdmin&&C?`${V}${S?" \xB7 "+S:""}`:V;t.has(w)||t.set(w,{key:w,label:L,resolucion:i,nivel:E,instituciones_id:C})}this.resolucionOptions=Array.from(t.values()).sort((e,i)=>e.label.localeCompare(i.label))}onCambioFiltrosAsignacion(){this.selectedLvlCursos.clear(),this.selectedParalelos.clear(),this.recargarDatosPorFiltro()}togglePendientesDocentes(){this.verPendientesDocentes=!this.verPendientesDocentes}docentesPendientesFiltrados(){let t=(this.filterPendientesDocentes??"").trim().toLowerCase(),e=this.docentesDemo.filter(i=>(i.cantMaterias??0)===0);return t?e.filter(i=>`${i.id} ${i.nombre}`.toLowerCase().includes(t)):e}esDocenteSeleccionable(t){return t?(t.estado??"").toString().trim().toUpperCase()!=="INACTIVO":!1}cargardocentes(){this._planteldoc.Obtenerplanteldocentes().subscribe({next:t=>{if(console.log("data plantel docente",t.data),this.docentes=t.data,this.docentesDemo=(Array.isArray(t.data)?t.data:[]).map(e=>{let i=(e?.Nombres??"").toString().trim(),r=(e?.Apellidos??"").toString().trim(),d=`${i} ${r}`.trim()||`Docente #${e?.id}`,_=(e?.Visibilidad??"").toString().trim().toUpperCase(),C=(e?.Estado??"").toString().trim().toUpperCase();return{id:Number(e?.id),nombre:d,cantMaterias:0,visibilidad:_,estado:C}}).filter(e=>Number.isFinite(e.id)&&(e.visibilidad??"").toString().trim().toUpperCase()==="VISIBLE"),this.docenteSeleccionadoDemo){let e=this.docentesDemo.find(i=>i.id===this.docenteSeleccionadoDemo?.id);(!e||!this.esDocenteSeleccionable(e))&&(this.modo==="docente"&&Number(this.docenteId??0)===Number(this.docenteSeleccionadoDemo?.id??0)||(this.docenteSeleccionadoDemo=null))}this.tryApplyModoDocente(),this.recalcularConteosDocentes()},error:t=>{console.error("Error al cargar los docentes:",t)}})}parseResolucionKey(){let t=(this.filtroResolucionKey??"").toString();if(!t){this.filtroResolucion=null,this.filtroNivelCarrera=null,this.filtroInstitucionId=null;return}let e=t.split("|");if(e.length>=3){let i=Number(e[0]),r=(e[1]??"").toString(),d=e.slice(2).join("|");this.filtroInstitucionId=Number.isFinite(i)?i:null,this.filtroResolucion=r||null,this.filtroNivelCarrera=d||null;return}if(e.length===2){let i=(e[0]??"").toString(),r=(e[1]??"").toString();this.filtroInstitucionId=null,this.filtroResolucion=i||null,this.filtroNivelCarrera=r||null;return}this.filtroInstitucionId=null,this.filtroResolucion=t,this.filtroNivelCarrera=null}getFiltroParams(){let t=this.filtroAnioId,e=!!(this.filtroResolucionKey&&this.filtroResolucionKey.toString().trim());return!t||!e||(this.parseResolucionKey(),!this.filtroResolucion||!this.filtroNivelCarrera)?null:{anio_id:t,resolucion:this.filtroResolucion,nivel:this.filtroNivelCarrera,instituciones_id:this.esSuperAdmin?this.filtroInstitucionId??void 0:void 0}}recargarDatosPorFiltro(){let t=this.getFiltroParams();if(!t){this.materias=[],this.materiasDemo=[],this.asignacionesDemo.clear(),this.docentesPorMateria.clear(),this.recalcularConteosDocentes();return}$e({materias:this._mat.Obtenermaterias(t).pipe(le(e=>e?.data||[]),ce(e=>(console.error("Error al cargar materias (filtro global)",e),se([])))),asignaciones:this._planteldocmat.Obtenerplanteldocentesmaterias(t).pipe(le(e=>e?.data||[]),ce(e=>(console.error("Error al cargar asignaciones (filtro global)",e),se([]))))}).subscribe({next:({materias:e,asignaciones:i})=>{this.materias=e||[],this.materiasDemo=(Array.isArray(e)?e:[]).map(d=>{let _=(d?.NombreMateria??"").toString().trim()||`Materia #${d?.id}`,C=(d?.SiglaMateria??"").toString().trim()||void 0,S=(d?.ModoMateria??"").toString().trim()||void 0,E=(d?.Anio??"SIN ASIGNAR").toString().trim()||"SIN ASIGNAR",b=(d?.Resolucion??"SIN RESOLUCION").toString().trim()||"SIN RESOLUCION",w=(d?.LvlCurso??"SIN CURSO").toString().trim()||"SIN CURSO",V=(d?.Paralelo??"").toString().trim(),L=V?`${w} ${V}`:w;return{id:Number(d?.id),categoria:L,sigla:C,nombre:_,modoMateria:S,lvlCurso:w,paralelo:V,anio:E,resolucion:b}}).filter(d=>Number.isFinite(d.id));let r=new Set(this.materiasDemo.map(d=>d.id));this.asignacionesDemo.clear(),this.docentesPorMateria.clear();for(let d of Array.isArray(i)?i:[]){let _=Number(d.planteldocentes_id??d.planteldocente_id),C=Number(d.materias_id??d.materia_id);!Number.isFinite(_)||!Number.isFinite(C)||r.has(C)&&(this.asignacionesDemo.has(_)||this.asignacionesDemo.set(_,new Set),this.asignacionesDemo.get(_)?.add(C),this.docentesPorMateria.has(C)||this.docentesPorMateria.set(C,new Set),this.docentesPorMateria.get(C)?.add(_))}this.recalcularConteosDocentes()},error:e=>{console.error(e)}})}recalcularConteosDocentes(){Array.isArray(this.docentesDemo)&&(this.docentesDemo=this.docentesDemo.map(t=>{let e=(this.asignacionesDemo.get(t.id)??new Set).size;return Be(ae({},t),{cantMaterias:e})}))}trackById(t,e){return e.id}onToggleChange(t){let e=t.target.checked;this.ModoBoolean=e}docentesFiltradosDemo(){let t=(this.filterDocente??"").trim().toLowerCase();return t?this.docentesDemo.filter(e=>`${e.id} ${e.nombre}`.toLowerCase().includes(t)):this.docentesDemo}seleccionarDocenteDemo(t){this.esDocenteSeleccionable(t)&&(this.docenteSeleccionadoDemo=t)}limpiarDocenteDemo(){this.docenteSeleccionadoDemo=null}materiasFiltradasDemo(){let t=(this.filterMateria??"").trim().toLowerCase(),e=this.materiasDemo;return t&&(e=e.filter(i=>`${i.id} ${i.sigla??""} ${i.nombre} ${i.categoria} ${i.lvlCurso??""} ${i.paralelo??""} ${this.docentesAsignadosEnMateriaTexto(i.id)}`.toLowerCase().includes(t))),this.selectedLvlCursos.size>0&&(e=e.filter(i=>this.selectedLvlCursos.has((i.lvlCurso??"").toString()))),this.selectedParalelos.size>0&&(e=e.filter(i=>this.selectedParalelos.has((i.paralelo??"").toString()))),e}materiasPorCategoria(t){return this.materiasFiltradasDemo().filter(e=>e.categoria===t)}categoriasDemo(){return Array.from(new Set(this.materiasFiltradasDemo().map(t=>t.categoria))).sort((t,e)=>t.localeCompare(e))}toggleModoCategorias(){this.modoCategorias=!this.modoCategorias}lvlCursosDetectados(){return Array.from(new Set(this.materiasDemo.map(t=>t.lvlCurso).filter(Boolean))).sort((t,e)=>t.localeCompare(e))}paralelosDetectados(){return Array.from(new Set(this.materiasDemo.map(t=>t.paralelo).filter(t=>!!t))).sort((t,e)=>t.localeCompare(e))}isLvlCursoSeleccionado(t){return this.selectedLvlCursos.has(t)}toggleLvlCurso(t){this.selectedLvlCursos.has(t)?this.selectedLvlCursos.delete(t):this.selectedLvlCursos.add(t)}isParaleloSeleccionado(t){return this.selectedParalelos.has(t)}toggleParalelo(t){this.selectedParalelos.has(t)?this.selectedParalelos.delete(t):this.selectedParalelos.add(t)}docentesAsignadosEnMateriaTexto(t){let e=this.docentesPorMateria.get(t);return!e||e.size===0?"":Array.from(e).map(r=>this.docentesDemo.find(d=>d.id===r)?.nombre??`#${r}`).filter(Boolean).join(", ")}normalizeModoMateria(t){return(t??"").toString().trim().toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}esModoInstrumentoEspecialidad(t){let e=this.normalizeModoMateria(t.modoMateria);return e.includes("INSTRUMENT")&&e.includes("ESPECIAL")}esModoInstrumentoComplementario(t){let e=this.normalizeModoMateria(t.modoMateria);return e.includes("INSTRUMENT")&&e.includes("COMPLEMENT")}esModoPracticaConjuntos(t){let e=this.normalizeModoMateria(t.modoMateria);return e.includes("PRACTICA")&&e.includes("CONJUNTO")}esModoUnDocentePorMateria(t){let e=this.normalizeModoMateria(t.modoMateria);return e.includes("1")&&e.includes("DOCENTE")}isAsignadaDemo(t){let e=this.docenteSeleccionadoDemo;return e?(this.asignacionesDemo.get(e.id)??new Set).has(t):!1}toggleAsignacionDemo(t,e){return ct(this,null,function*(){if(e?.preventDefault(),!this.docenteSeleccionadoDemo)return;let i=this.docenteSeleccionadoDemo.id,r=this.asignacionesDemo.get(i)??new Set;this.asignacionesDemo.set(i,r),this.isLoadingMateria[t.id]=!0;try{if(r.has(t.id)){yield new Promise((C,S)=>{this._planteldocmat.QuitarMateriaADocente({planteldocentes_id:i,materias_id:t.id}).subscribe({next:()=>C(),error:E=>S(E)})}),r.delete(t.id);let _=this.docentesPorMateria.get(t.id);_?.delete(i),_&&_.size===0&&this.docentesPorMateria.delete(t.id)}else{if(this.esModoInstrumentoEspecialidad(t)){this._tools.MostrarMensaje("info","NO ES NECESARIO ASIGNAR MATERIAS DE INSTRUMENTO DE ESPECIALIDAD PORQUE LA DETECCION DE ESTUDIANTES SE HACE AUTOMATICO DESDE INSCRIPCIONES DE ESTUDIANTES.");return}if(this.esModoInstrumentoComplementario(t)){this._tools.MostrarMensaje("info","NO ES NECESARIO ASIGNAR MATERIAS DE INSTRUMENTO COMPLEMENTARIO PORQUE LA DETECCION DE ESTUDIANTES SE HACE AUTOMATICO DESDE INSCRIPCIONES DE ESTUDIANTES.");return}if(this.esModoPracticaConjuntos(t)){this._tools.MostrarMensaje("info","NO ES NECESARIO ASIGNAR MATERIAS DE PR\xC1CTICA DE CONJUNTOS PORQUE LA DETECCION DE ESTUDIANTES SE HACE AUTOMATICO DESDE INSCRIPCIONES DE ESTUDIANTES.");return}if(this.esModoUnDocentePorMateria(t)){let _=this.docentesPorMateria.get(t.id);if(_&&_.size>0){let C=this.docentesAsignadosEnMateriaTexto(t.id);this._tools.MostrarMensaje("warning",`No se puede asignar: esta materia es "1 DOCENTE x MATERIA" y ya tiene docente asignado${C?": "+C:"."}`);return}}yield new Promise((_,C)=>{this._planteldocmat.AsignarMateriaADocente({planteldocentes_id:i,materias_id:t.id,Paralelo:this.paraleloDemo||null}).subscribe({next:()=>_(),error:S=>C(S)})}),r.add(t.id),this.docentesPorMateria.has(t.id)||this.docentesPorMateria.set(t.id,new Set),this.docentesPorMateria.get(t.id)?.add(i)}}catch(d){console.error("Error al alternar asignaci\xF3n:",d);let _=d,C=(_?.error?.message??_?.message??"").toString().trim();C?this._tools.MostrarMensaje("error",C):this._tools.MostrarMensajeError()}finally{this.isLoadingMateria[t.id]=!1,this.recalcularConteosDocentes()}})}quitarAsignacionTabla(t){return ct(this,null,function*(){if(!this.docenteSeleccionadoDemo)return;let e=this.materiasDemo.find(i=>i.id===t);e&&(yield this.toggleAsignacionDemo(e))})}tablaAsignacionesDemo(){let t=this.docenteSeleccionadoDemo;if(!t)return[];let e=this.asignacionesDemo.get(t.id)??new Set,i=[];for(let r of e){let d=this.materiasDemo.find(_=>_.id===r);d&&i.push({materiaId:d.id,docente:t.nombre,materia:`${d.sigla?d.sigla+" - ":""}${d.nombre}`,categoria:d.categoria,paralelo:d.paralelo||"-"})}return i}};Ge.\u0275fac=function(e){return new(e||Ge)(A(it),A(ne),A(Tt),A(at),A(oe),A(Te),A(te))},Ge.\u0275cmp=U({type:Ge,selectors:[["app-asignadormaterias"]],inputs:{modo:"modo",docenteId:"docenteId",nombreDocente:"nombreDocente",fotoDocente:"fotoDocente",sexoDocente:"sexoDocente"},standalone:!1,features:[bt],decls:36,vars:15,consts:[[1,"container","mt-4"],["class","row",4,"ngIf"],[1,"card"],[1,"row","align-items-end","g-2","mb-2"],[1,"col-sm-3"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-calendar"],[1,"form-floating","flex-grow-1"],["id","filtroAnio",1,"form-select",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","filtroAnio"],[1,"bi","bi-bookmark"],["id","filtroResolucion",1,"form-select",3,"ngModelChange","change","ngModel"],["for","filtroResolucion"],["class","button col-sm-6 d-flex justify-content-end",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[1,"card-body"],["class","card mb-3",4,"ngIf"],["class","row align-items-end g-2",4,"ngIf"],["class","row mb-2",4,"ngIf"],[4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"col-12"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-center",2,"gap","16px"],[1,"d-flex","align-items-center",2,"gap","12px"],[2,"width","70px","height","70px","border-radius","50%","overflow","hidden","border","3px solid #0d6efd","display","flex","align-items","center","justify-content","center","background","#fff"],["style","width: 100%; height: 100%; object-fit: cover;",3,"src",4,"ngIf"],["style","width: 70px; height: 70px;",3,"options",4,"ngIf"],[1,"text-muted",2,"font-size","13px"],[1,"fw-bold",2,"font-size","18px"],[1,"d-flex","align-items-center",2,"gap","8px"],["class","badge bg-primary",4,"ngIf"],[2,"width","100%","height","100%","object-fit","cover",3,"src"],[2,"width","70px","height","70px",3,"options"],[1,"badge","bg-primary"],[1,"button","col-sm-6","d-flex","justify-content-end"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","width","30px","height","30px"],["width","50px","height","50px",3,"options"],[1,"dir-part"],[1,"alert","alert-warning"],[1,"card","mb-3"],[1,"card-header","d-flex","align-items-center","justify-content-between","flex-wrap","gap-2","text-danger"],[1,"bi","bi-search"],["type","text","placeholder","Buscar docente pendiente",1,"form-control",3,"input","value"],[1,"table-responsive"],[1,"table","table-sm","table-striped","align-middle","mb-0"],[2,"width","140px"],[2,"width","120px"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","button",1,"btn","btn-sm","btn-outline-success",3,"click","disabled"],["colspan","3",1,"text-center","py-3"],[1,"row","align-items-end","g-2"],[1,"col-sm-12"],["type","text","placeholder","Buscar docente",1,"form-control",3,"input","value"],[1,"mt-2","d-flex","flex-wrap","gap-2"],["class","btn btn-outline-secondary btn-sm",3,"active","disabled","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mt-2"],["class","text-muted",4,"ngIf"],["class","text-primary",4,"ngIf"],[1,"col-sm-4","d-flex","justify-content-end","gap-2"],[1,"form-check","mt-2"],["type","checkbox","id","toggleModo",1,"form-check-input",3,"change"],["for","toggleModo",1,"form-check-label"],[1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"text-muted"],[1,"text-primary"],[1,"row","mb-2"],["id","filtroAnioTabla",1,"form-select",3,"ngModelChange","change","ngModel"],["for","filtroAnioTabla"],[1,"col-sm-3","mt-2","mt-sm-0"],["id","filtroResolucionTabla",1,"form-select",3,"ngModelChange","change","ngModel"],["for","filtroResolucionTabla"],[1,"col-sm-6"],[1,"bi","bi-filter"],["type","text","placeholder","Buscar materia",1,"form-control",3,"input","value"],[1,"col-sm-6","d-flex","justify-content-end","flex-wrap","gap-2","mt-2","mt-sm-0"],[1,"form-check","mt-1"],["type","checkbox","id","toggleCategorias",1,"form-check-input",3,"change","checked"],["for","toggleCategorias",1,"form-check-label"],[1,"d-flex","align-items-center","flex-wrap","gap-1"],[1,"text-muted","me-1"],["type","button","class","btn btn-outline-primary btn-sm",3,"active","click",4,"ngFor","ngForOf"],["type","button","class","btn btn-outline-secondary btn-sm",3,"active","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[4,"ngFor","ngForOf"],[1,"text-center","mt-3"],[1,"d-flex","flex-wrap"],["class","list-group-item col-sm-3 custom-border position-relative",3,"ngClass",4,"ngFor","ngForOf"],[1,"list-group-item","col-sm-3","custom-border","position-relative",3,"ngClass"],["type","button",1,"btn","btn-sm","w-100","text-start",3,"click","disabled"],[1,"me-2","badge",3,"ngClass"],["class","small text-muted mt-1",4,"ngIf"],["class","spinner-border spinner-border-sm text-primary position-absolute top-50 start-50 translate-middle","role","status",4,"ngIf"],[1,"small","text-muted","mt-1"],["role","status",1,"spinner-border","spinner-border-sm","text-primary","position-absolute","top-50","start-50","translate-middle"],[1,"visually-hidden"],[1,"table","align-middle","table-hover","table-sm"],[1,"table-group-divider"],["colspan","6",1,"text-center","text-muted"],[1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],["colspan","6",1,"text-center"]],template:function(e,i){e&1&&(n(0,"div",0),g(1,po,4,0,"div",1)(2,fo,14,4,"div",1),o(),n(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"span",6),x(8,"i",7),o(),n(9,"div",8)(10,"select",9),O("ngModelChange",function(d){return T(i.filtroAnioId,d)||(i.filtroAnioId=d),d}),f("change",function(){return i.onCambioFiltrosAsignacion()}),n(11,"option",10),c(12,"-- Seleccione --"),o(),g(13,xo,2,2,"option",11),o(),n(14,"label",12),c(15,"A\xF1o (Gesti\xF3n)"),o()()()(),n(16,"div",4)(17,"div",5)(18,"span",6),x(19,"i",13),o(),n(20,"div",8)(21,"select",14),O("ngModelChange",function(d){return T(i.filtroResolucionKey,d)||(i.filtroResolucionKey=d),d}),f("change",function(){return i.onCambioFiltrosAsignacion()}),n(22,"option",10),c(23,"-- Seleccione --"),o(),g(24,vo,2,2,"option",11),o(),n(25,"label",15),c(26,"Resoluci\xF3n"),o()()()(),g(27,Co,7,2,"div",16),o(),g(28,ho,8,0,"div",17),n(29,"div",18),g(30,Eo,25,4,"div",19)(31,Ao,19,5,"div",20),x(32,"hr"),g(33,Oo,23,6,"div",21)(34,Ho,25,6,"div",22)(35,Ko,20,3,"div",23),o()()),e&2&&(s(),l("ngIf",!i.modoEsDocente()),s(),l("ngIf",i.modoEsDocente()),s(8),I("ngModel",i.filtroAnioId),s(),l("ngValue",null),s(2),l("ngForOf",i.aniosOptions),s(8),I("ngModel",i.filtroResolucionKey),s(),l("ngValue",""),s(2),l("ngForOf",i.resolucionOptions),s(3),l("ngIf",!i.modoEsDocente()),s(),l("ngIf",!i.filtrosAsignacionCompletos()),s(2),l("ngIf",i.verPendientesDocentes&&!i.modoEsDocente()),s(),l("ngIf",!i.modoEsDocente()),s(2),l("ngIf",i.ModoBoolean),s(),l("ngIf",!i.ModoBoolean),s(),l("ngIf",i.ModoBoolean))},dependencies:[q,K,Q,Z,ee,X,Y,J,ie],styles:[".wrap[_ngcontent-%COMP%]{padding:16px}.head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.card[_ngcontent-%COMP%]{border:1px solid #e6e6e6;border-radius:10px;padding:12px;background:#fff}.card.full[_ngcontent-%COMP%]{grid-column:1/-1}.row3[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr}.row4[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr auto}.lbl[_ngcontent-%COMP%]{font-size:12px;color:#444;margin-bottom:6px}.inp[_ngcontent-%COMP%]{width:100%;padding:8px 10px;border:1px solid #dadada;border-radius:8px}.inp.mini[_ngcontent-%COMP%]{padding:6px 8px}.actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end}button[_ngcontent-%COMP%]{padding:8px 10px;border:1px solid #dadada;border-radius:8px;background:#fafafa;cursor:pointer}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.danger[_ngcontent-%COMP%]{border-color:#ffb4b4;background:#fff5f5}.muted[_ngcontent-%COMP%]{opacity:.8}.hint[_ngcontent-%COMP%]{margin-top:8px;font-size:12px;color:#666}.msg[_ngcontent-%COMP%]{margin:10px 0;padding:10px 12px;border-radius:10px}.msg.err[_ngcontent-%COMP%]{background:#fff5f5;border:1px solid #ffb4b4;color:#7a0012}.msg.ok[_ngcontent-%COMP%]{background:#f3fff5;border:1px solid #a7f3b6;color:#0b4b1f}.chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}.chip[_ngcontent-%COMP%]{border-radius:999px}.chip.on[_ngcontent-%COMP%]{border-color:#2563eb;background:#eaf1ff}.table[_ngcontent-%COMP%]{margin-top:8px;overflow:auto}.tr[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 220px 1fr 110px 160px 1fr 210px;gap:8px;align-items:center;padding:8px;border-top:1px solid #f0f0f0}.th[_ngcontent-%COMP%]{font-weight:700;background:#fafafa;border-top:none;position:sticky;top:0}.mono[_ngcontent-%COMP%]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.custom-border[_ngcontent-%COMP%]{border:1px solid #e6e6e6;border-radius:10px;padding:8px;background:#fff}.custom-border[_ngcontent-%COMP%]:hover{border-color:#2563eb;background:#eaf1ff}.checked[_ngcontent-%COMP%]{border-color:#22c55e!important;background:#f3fff5}.list-group-item[_ngcontent-%COMP%]{cursor:pointer}.btn.active[_ngcontent-%COMP%]{border-color:#2563eb;background:#eaf1ff;color:#0300a3;font-weight:700}@media (max-width: 1100px){.grid[_ngcontent-%COMP%], .row[_ngcontent-%COMP%], .row3[_ngcontent-%COMP%], .row4[_ngcontent-%COMP%]{grid-template-columns:1fr}.tr[_ngcontent-%COMP%]{grid-template-columns:70px 1fr}.th[_ngcontent-%COMP%]{display:none}}"]});var st=Ge;var Qo=[{path:"carreras",component:Ve},{path:"materias",component:Re},{path:"plandeestudios",component:rt},{path:"asignadormaterias",component:st}],fe=class fe{};fe.\u0275fac=function(e){return new(e||fe)},fe.\u0275mod=We({type:fe}),fe.\u0275inj=He({imports:[ut.forChild(Qo),ut]});var lt=fe;var xe=class xe{};xe.\u0275fac=function(e){return new(e||xe)},xe.\u0275mod=We({type:xe}),xe.\u0275inj=He({imports:[Et,It,At,lt]});var Rt=xe;export{ot as a,st as b,Rt as c};
