import{a as bt,b as Ve}from"./chunk-HLJU5C62.js";import{a as Jt,b as te}from"./chunk-H6X6YUI6.js";import{a as ye}from"./chunk-44R4R5AU.js";import{a as ee,b as we}from"./chunk-EG2YTVAW.js";import{a as Ae}from"./chunk-TLCONUWA.js";import{a as Et}from"./chunk-JB36DJXC.js";import{a as Te,b as Me}from"./chunk-ASKK6NHC.js";import{a as Se}from"./chunk-NM3QK2HC.js";import{a as vt}from"./chunk-6XE6ANEK.js";import{a as Ce}from"./chunk-S5RDXWW2.js";import{a as Ie}from"./chunk-LM3NAENR.js";import{a as Zt}from"./chunk-RUQNPGGO.js";import{a as Kt}from"./chunk-564HOHQI.js";import{a as xt}from"./chunk-CBGZNB6O.js";import{b as ft}from"./chunk-WLT776V2.js";import{b as be}from"./chunk-ALM2N5XJ.js";import{b as gt}from"./chunk-TW3VKOPH.js";import"./chunk-ITZFLXEJ.js";import{a as Xt,b as Ee}from"./chunk-3CN6OIBN.js";import"./chunk-NCIXDP2C.js";import{g as jt,k as _e}from"./chunk-XBZTFKDR.js";import{a as He,b as ht}from"./chunk-QOHQRMWE.js";import{g as Yt}from"./chunk-PLBSLCVI.js";import{b as Ut,c as zt,e as xe,f as dt,g as Gt,j as Pt,k as ut,l as qt,m as Ht,o as ve,p as Qt,q as Wt,r as mt,s as pt,t as _t}from"./chunk-UMQOUSDV.js";import{a as ct}from"./chunk-5RMZ5E5A.js";import{$a as B,$c as he,Aa as P,Ab as R,Bb as D,Bc as st,Ca as Rt,Cb as L,Da as r,Dc as ot,Ec as rt,F as ue,Fb as j,Fc as $t,Gb as Z,Hb as G,Hc as Bt,Kb as d,La as A,Lb as E,Mb as I,Mc as ge,Nb as K,Ob as Lt,Qa as it,Ra as Dt,Rb as N,Sb as F,Tb as O,Uc as lt,Va as g,Vb as Tt,Xb as Y,Yb as Mt,Zb as T,_ as Ft,_b as Vt,ab as me,bc as q,cb as pe,cc as H,fc as M,ga as p,ha as _,hb as l,ib as o,jb as s,k as Nt,kb as x,ob as nt,pb as at,q as de,ra as Ot,rb as b,ub as h,w as fe,wb as u,za as V}from"./chunk-D5AL6KTU.js";import{a as W,b as et,f as ce,m as k}from"./chunk-GG76335P.js";var Ge=ce(ye());var Ue=ce(ye());var z=ce(He());var We=(i,e)=>({border:i,"border-primary":e}),je=i=>({checked:i,"custom-border":!0}),Ke=()=>({standalone:!0});function Ye(i,e){i&1&&(o(0,"div",27)(1,"div",28)(2,"h1",29),d(3,"Asignador de Materias - ESTUDIANTES"),s(),o(4,"p",30),d(5,"Asigne materias a estudiantes de manera sencilla y eficiente"),s()()())}function Xe(i,e){if(i&1&&x(0,"img",42),i&2){let t=u(2);l("src",t._tools.ruta+t.fotoEstudiante,P)}}function Ze(i,e){if(i&1&&x(0,"ng-lottie",43),i&2){let t=u(2);l("options",t.sexoEstudiante==="MASCULINO"?t._tools.optionsavatarmasculinoanimado:t._tools.optionsavatarfemenino2)}}function Je(i,e){if(i&1&&(o(0,"span",44),d(1),s()),i&2){let t=u(2);r(),I("ID: ",t.estudianteId)}}function ti(i,e){if(i&1&&(o(0,"span",45),d(1),s()),i&2){let t=u(2);r(),I("Inscripci\xF3n: #",t.preferInfoId)}}function ei(i,e){if(i&1&&(o(0,"div",27)(1,"div",31)(2,"div",32)(3,"div",33)(4,"div",34),g(5,Xe,1,1,"img",35)(6,Ze,1,1,"ng-lottie",36),s(),o(7,"div")(8,"div",37),d(9,"Estudiante seleccionado"),s(),o(10,"div",38),d(11),s()()(),o(12,"div",39),g(13,Je,2,1,"span",40)(14,ti,2,1,"span",41),s()()()()),i&2){let t=u();r(5),l("ngIf",t.fotoEstudiante),r(),l("ngIf",!t.fotoEstudiante),r(5),E(t.nombreEstudiante||(t.estudianteSeleccionado==null?null:t.estudianteSeleccionado.nombre)),r(2),l("ngIf",t.estudianteId),r(),l("ngIf",t.preferInfoId)}}function ii(i,e){if(i&1&&(o(0,"option",14),d(1),s()),i&2){let t=e.$implicit;l("ngValue",t.id),r(),E(t.Anio)}}function ni(i,e){if(i&1&&(o(0,"option",14),d(1),s()),i&2){let t=e.$implicit;l("ngValue",t.key),r(),E(t.label)}}function ai(i,e){if(i&1&&(o(0,"small",64),x(1,"ng-lottie",65),o(2,"span"),d(3,"Cargando..."),s()()),i&2){let t=u(2);r(),l("options",t._tools.optionsengranaje)}}function si(i,e){if(i&1&&x(0,"ng-lottie",65),i&2){let t=u(2);l("options",t._tools.optionslupa)}}function oi(i,e){if(i&1){let t=b();o(0,"div",66)(1,"button",67),h("click",function(){p(t);let a=u(2);return _(a.pendPrev())}),d(2,"Anterior"),s(),o(3,"small",68),d(4),s(),o(5,"button",67),h("click",function(){p(t);let a=u(2);return _(a.pendNext())}),d(6,"Siguiente"),s()()}if(i&2){let t=u(2);r(),l("disabled",!t.pendTienePrev()||t.isLoadingPendientes),r(3),Lt(" P\xE1gina ",t.pendMeta.current_page," / ",t.pendMeta.last_page," (",t.pendMeta.total," resultados) "),r(),l("disabled",!t.pendTieneNext()||t.isLoadingPendientes)}}function ri(i,e){i&1&&(o(0,"th"),d(1,"Instituci\xF3n"),s())}function li(i,e){if(i&1&&(o(0,"tr")(1,"td",69)(2,"div",70),x(3,"ng-lottie",71),o(4,"span",68),d(5,"Cargando pendientes..."),s()()()()),i&2){let t=u(2);r(),B("colspan",t.esSuperAdmin?10:9),r(2),l("options",t._tools.optionsengranaje)}}function ci(i,e){if(i&1&&(o(0,"td"),d(1),s()),i&2){let t=u().$implicit;r(),E(t.NombreInstitucion||"-")}}function di(i,e){if(i&1){let t=b();o(0,"tr",72)(1,"td"),d(2),s(),o(3,"td"),d(4),s(),g(5,ci,2,1,"td",26),o(6,"td"),d(7),s(),o(8,"td"),d(9),s(),o(10,"td"),d(11),s(),o(12,"td"),d(13),s(),o(14,"td"),d(15),s(),o(16,"td"),d(17),s(),o(18,"td")(19,"button",73),h("click",function(){let a=p(t).$implicit,c=u(2);return _(c.seleccionarPendiente(a))}),d(20," Asignar "),s()()()}if(i&2){let t=e.$implicit,n=u(2);l("hidden",n.isLoadingPendientes),r(2),I("#",t.id),r(2),E(t.FechInsc||"-"),r(),l("ngIf",n.esSuperAdmin),r(2),Lt("",t.Ap_Paterno," ",t.Ap_Materno," ",t.Nombre),r(2),E(t.CI||"-"),r(2),E(t.Matricula||"-"),r(2),E(t.Curso_Solicitado||"-"),r(2),E(t.Paralelo_Solicitado||"-"),r(2),E(t.Turno||"-")}}function ui(i,e){if(i&1&&(o(0,"tr")(1,"td",69),d(2,"Sin registros"),s()()),i&2){let t=u(2);r(),B("colspan",t.esSuperAdmin?10:9)}}function mi(i,e){if(i&1){let t=b();o(0,"div",46)(1,"div",47)(2,"span"),d(3,"Inscritos pendientes de asignaci\xF3n (sin materias asignadas)"),s(),g(4,ai,4,1,"small",48),s(),o(5,"div",6)(6,"div",49)(7,"div",50)(8,"div",9)(9,"span",10),x(10,"i",51),s(),o(11,"div",12)(12,"input",52),h("input",function(a){p(t);let c=u();return _(c.filterPendientes=a.target.value)})("keyup.enter",function(){p(t);let a=u();return _(a.cargarPendientes(1))}),s(),o(13,"label"),d(14,"Buscar (nombre/CI/matr\xEDcula/curso/paralelo/turno)"),s()(),o(15,"button",53),h("click",function(){p(t);let a=u();return _(a.cargarPendientes(1))}),o(16,"span",54),g(17,si,1,1,"ng-lottie",55),o(18,"span"),d(19),s()()()(),g(20,oi,7,5,"div",56),s(),o(21,"div",57)(22,"label",58),d(23,"Total pendientes"),s(),x(24,"input",59),s()()(),o(25,"div",60)(26,"table",61)(27,"thead")(28,"tr")(29,"th"),d(30,"Inscripci\xF3n"),s(),o(31,"th"),d(32,"Fecha inscripci\xF3n"),s(),g(33,ri,2,0,"th",26),o(34,"th"),d(35,"Estudiante"),s(),o(36,"th"),d(37,"CI"),s(),o(38,"th"),d(39,"Matr\xEDcula"),s(),o(40,"th"),d(41,"Curso solicitado"),s(),o(42,"th"),d(43,"Paralelo"),s(),o(44,"th"),d(45,"Turno"),s(),o(46,"th",62),d(47,"Acci\xF3n"),s()()(),o(48,"tbody"),g(49,li,6,2,"tr",26)(50,di,21,12,"tr",63)(51,ui,3,1,"tr",26),s()()()()}if(i&2){let t=u();r(4),l("ngIf",t.isLoadingPendientes),r(8),l("value",t.filterPendientes),r(3),l("disabled",t.isLoadingPendientes),r(2),l("ngIf",t.isLoadingPendientes),r(2),E(t.isLoadingPendientes?"Buscando...":"Buscar"),r(),l("ngIf",t.pendMeta),r(4),l("value",(t.pendMeta==null?null:t.pendMeta.total)||0),r(9),l("ngIf",t.esSuperAdmin),r(16),l("ngIf",t.isLoadingPendientes),r(),l("ngForOf",t.pendientes),r(),l("ngIf",t.pendientes.length===0&&!t.isLoadingPendientes)}}function pi(i,e){if(i&1&&x(0,"ng-lottie",65),i&2){let t=u(2);l("options",t._tools.optionslupa)}}function _i(i,e){if(i&1&&(o(0,"small",86),x(1,"ng-lottie",65),o(2,"span"),d(3,"Buscando..."),s()()),i&2){let t=u(2);r(),l("options",t._tools.optionslupa)}}function fi(i,e){if(i&1){let t=b();o(0,"div",66)(1,"button",87),h("click",function(){p(t);let a=u(2);return _(a.estPrev())}),d(2,"Anterior"),s(),o(3,"small",68),d(4),s(),o(5,"button",87),h("click",function(){p(t);let a=u(2);return _(a.estNext())}),d(6,"Siguiente"),s()()}if(i&2){let t=u(2);r(),l("disabled",!t.estTienePrev()||t.isLoadingEstudiantes),r(3),Lt(" P\xE1gina ",t.estMeta.current_page," / ",t.estMeta.last_page," (",t.estMeta.total," resultados) "),r(),l("disabled",!t.estTieneNext()||t.isLoadingEstudiantes)}}function gi(i,e){if(i&1&&(o(0,"span"),d(1,"CI: "),x(2,"span",89),s()),i&2){let t=u().$implicit,n=u(2);r(2),l("innerHTML",n.highlightHtml(t.ci),V)}}function hi(i,e){if(i&1&&(o(0,"span"),d(1," \xA0|\xA0 Matr\xEDcula: "),x(2,"span",89),s()),i&2){let t=u().$implicit,n=u(2);r(2),l("innerHTML",n.highlightHtml(t.matricula),V)}}function xi(i,e){if(i&1&&x(0,"span",89),i&2){let t=u().$implicit,n=u(2);l("innerHTML",n.highlightHtml(n.formatoCursoParalelo(t)),V)}}function vi(i,e){if(i&1&&(o(0,"div",90),d(1),s()),i&2){let t=u().$implicit;r(),I("Instituci\xF3n: ",t.institucionNombre)}}function Ei(i,e){if(i&1&&(o(0,"div",90),d(1),s()),i&2){let t=u().$implicit;r(),I("Fecha: ",t.fechInsc)}}function bi(i,e){if(i&1){let t=b();o(0,"button",88),h("click",function(){let a=p(t).$implicit,c=u(2);return _(c.seleccionarEstudiante(a))}),x(1,"div",89),o(2,"div",90),g(3,gi,3,1,"span",26)(4,hi,3,1,"span",26),s(),o(5,"div",91)(6,"span",92),d(7),s(),g(8,xi,1,1,"span",93),s(),g(9,vi,2,1,"div",94)(10,Ei,2,1,"div",94),s()}if(i&2){let t=e.$implicit,n=u(2);G("active",n.selectedSearchInfoId&&t.infoId&&n.selectedSearchInfoId===t.infoId),l("disabled",n.isLoadingEstudiantes)("hidden",n.isLoadingEstudiantes),r(),l("innerHTML",n.highlightHtml(t.nombre),V),r(2),l("ngIf",t.ci),r(),l("ngIf",t.matricula),r(3),I("Asignaciones: ",t.cantAsignaciones??0),r(),l("ngIf",n.formatoCursoParalelo(t)),r(),l("ngIf",n.esSuperAdmin&&t.institucionNombre),r(),l("ngIf",t.fechInsc)}}function Ci(i,e){if(i&1){let t=b();o(0,"div",82)(1,"input",95),O("ngModelChange",function(a){p(t);let c=u(2);return F(c.mostrarDetalleCalificaciones,a)||(c.mostrarDetalleCalificaciones=a),_(a)}),s(),o(2,"label",96),d(3,"Detalle"),s()()}if(i&2){let t=u(2);r(),N("ngModel",t.mostrarDetalleCalificaciones)}}function Si(i,e){if(i&1){let t=b();o(0,"div",49)(1,"div",74)(2,"div",75)(3,"div",76)(4,"span",10),x(5,"i",51),s(),o(6,"div",12)(7,"input",77),h("input",function(a){p(t);let c=u();return _(c.filterEstudiante=a.target.value)})("keyup.enter",function(){p(t);let a=u();return _(a.buscarEstudiantes(1))}),s(),o(8,"label"),d(9,"Buscar estudiante (m\xEDn. 2 caracteres)"),s()(),o(10,"button",53),h("click",function(){p(t);let a=u();return _(a.buscarEstudiantes(1))}),o(11,"span",54),g(12,pi,1,1,"ng-lottie",55),o(13,"span"),d(14),s()()()()(),g(15,_i,4,1,"small",78)(16,fi,7,5,"div",56),o(17,"div",79),g(18,bi,11,11,"button",80),s()(),o(19,"div",81)(20,"div",82)(21,"input",83),h("change",function(a){p(t);let c=u();return _(c.onToggleChange(a))}),s(),o(22,"label",84),d(23,"Modo tabla"),s()(),g(24,Ci,4,1,"div",85),s()()}if(i&2){let t=u();r(7),l("ngClass",T(10,We,t.isLoadingEstudiantes,t.isLoadingEstudiantes))("value",t.filterEstudiante),r(3),l("disabled",t.isLoadingEstudiantes),r(2),l("ngIf",t.isLoadingEstudiantes),r(2),E(t.isLoadingEstudiantes?"Buscando...":"Buscar"),r(),l("ngIf",t.isLoadingEstudiantes),r(),l("ngIf",t.estMeta),r(2),l("ngForOf",t.estudiantes)("ngForTrackBy",t.trackById),r(6),l("ngIf",t.ModoBoolean)}}function Ii(i,e){if(i&1&&(o(0,"span",103),d(1),s()),i&2){let t=e.$implicit;r(),E(t)}}function yi(i,e){if(i&1&&(o(0,"div",101)(1,"span",68),d(2,"Materias asignadas en:"),s(),g(3,Ii,2,1,"span",102),s()),i&2){let t=u(2);r(3),l("ngForOf",t.cursosConMateriasAsignadasList)}}function wi(i,e){i&1&&(o(0,"div",101)(1,"span",68),d(2,"Sin materias asignadas (en sus inscripciones)"),s()())}function Ai(i,e){if(i&1&&(nt(0),o(1,"div",97)(2,"div",98)(3,"span",44),d(4,"Estudiante"),s(),o(5,"span",99),d(6),s()(),g(7,yi,4,1,"div",100)(8,wi,3,0,"ng-template",null,2,M),s(),at()),i&2){let t=j(9),n=u();r(6),E(n.estudianteSeleccionado.nombre),r(),l("ngIf",n.cursosConMateriasAsignadasList.length>0)("ngIfElse",t)}}function Ti(i,e){if(i&1&&(o(0,"small",68),d(1),s()),i&2){let t=u();r(),I(" ",t.modo==="estudiante"?"Cargando estudiante...":"Busca y selecciona un estudiante para continuar."," ")}}function Mi(i,e){if(i&1&&(o(0,"div",107),x(1,"ng-lottie",108),o(2,"span"),d(3,"Cargando inscripciones..."),s()()),i&2){let t=u(2);r(),l("options",t._tools.optionsengranaje)}}function Vi(i,e){i&1&&(o(0,"small",68),d(1,"Sin inscripciones."),s())}function Pi(i,e){i&1&&(o(0,"h3",68),d(1,"Seleccione una inscripci\xF3n."),s())}function ki(i,e){if(i&1){let t=b();o(0,"div",109)(1,"h4",110),d(2," CURSO SOLICITADO: "),o(3,"b"),d(4),s()(),o(5,"button",111),h("click",function(){p(t);let a=u(2),c=j(42);return _(a._tools.openModal(c,"xl"))}),x(6,"ng-lottie",108),o(7,"span"),d(8,"Historial"),s()()()}if(i&2){let t=u(2);r(4),K("",t.inscripcionSeleccionada.Curso_Solicitado||"-"," ",t.inscripcionSeleccionada.Paralelo_Solicitado?"- "+t.inscripcionSeleccionada.Paralelo_Solicitado:""),r(),l("disabled",!t.ciEstudianteNumerico()),r(),l("options",t._tools.optionsAdicionar)}}function Ni(i,e){if(i&1&&(o(0,"div")(1,"div",24),g(2,Mi,4,1,"div",104)(3,Vi,2,0,"small",105)(4,Pi,2,0,"h3",105)(5,ki,9,4,"div",106),s()()),i&2){let t=u();r(2),l("ngIf",t.isLoadingInscripciones),r(),l("ngIf",!t.isLoadingInscripciones&&t.inscripciones.length===0),r(),l("ngIf",!t.isLoadingInscripciones&&t.inscripciones.length>0&&!t.inscripcionSeleccionada),r(),l("ngIf",t.inscripcionSeleccionada)}}function Fi(i,e){i&1&&x(0,"hr")}function Oi(i,e){if(i&1){let t=b();o(0,"div",117)(1,"input",118),O("ngModelChange",function(a){p(t);let c=u(3);return F(c.mostrarDetalleCalificaciones,a)||(c.mostrarDetalleCalificaciones=a),_(a)}),s(),o(2,"label",119),d(3,"Detalle"),s()()}if(i&2){let t=u(3);r(),N("ngModel",t.mostrarDetalleCalificaciones)}}function Ri(i,e){if(i&1){let t=b();o(0,"button",120),h("click",function(){p(t);let a=u(3);return _(a.abrirOpcionesAsignacion())}),d(1," Asignar... "),s()}}function Di(i,e){if(i&1&&(o(0,"div",114)(1,"div",68)(2,"b"),d(3,"Calificaciones"),s(),d(4," de materias asignadas (vista r\xE1pida) "),s(),o(5,"div",33),g(6,Oi,4,1,"div",115)(7,Ri,2,0,"button",116),s()()),i&2){let t=u(2);r(6),l("ngIf",!t.mostrarOpcionesAsignacion),r(),l("ngIf",!t.mostrarOpcionesAsignacion)}}function Li(i,e){i&1&&(o(0,"th",123),d(1,"T1"),s())}function $i(i,e){i&1&&(o(0,"th",123),d(1,"T2"),s())}function Bi(i,e){i&1&&(o(0,"th",123),d(1,"T3"),s())}function ji(i,e){i&1&&(o(0,"th",123),d(1,"T4"),s())}function Ui(i,e){i&1&&(o(0,"th",123),d(1,"P1"),s())}function zi(i,e){i&1&&(o(0,"th",123),d(1,"P2"),s())}function Gi(i,e){i&1&&(o(0,"th",123),d(1,"P3"),s())}function qi(i,e){i&1&&(o(0,"th",123),d(1,"P4"),s())}function Hi(i,e){if(i&1&&(o(0,"tr")(1,"td",125)(2,"div",70),x(3,"ng-lottie",71),o(4,"span",68),d(5,"Cargando calificaciones..."),s()()()()),i&2){let t=u(3);r(),B("colspan",t.mostrarDetalleCalificaciones?15:7),r(2),l("options",t._tools.optionsengranaje)}}function Qi(i,e){if(i&1&&(o(0,"tr")(1,"td",127),d(2,"Sin asignaciones"),s()()),i&2){let t=u(4);r(),B("colspan",t.mostrarDetalleCalificaciones?15:7)}}function Wi(i,e){if(i&1&&(o(0,"div",129),d(1),s()),i&2){let t=u().$implicit,n=u(4);r(),I(" ",n.materiaMetaSmall(t.materiaId)," ")}}function Ki(i,e){if(i&1&&(o(0,"td",123),d(1),s()),i&2){let t=u().$implicit,n=u(4);r(),E(n.califValor(t.materiaId,"Teorico1"))}}function Yi(i,e){if(i&1&&(o(0,"td",123),d(1),s()),i&2){let t=u().$implicit,n=u(4);r(),E(n.califValor(t.materiaId,"Teorico2"))}}function Xi(i,e){if(i&1&&(o(0,"td",123),d(1),s()),i&2){let t=u().$implicit,n=u(4);r(),E(n.califValor(t.materiaId,"Teorico3"))}}function Zi(i,e){if(i&1&&(o(0,"td",123),d(1),s()),i&2){let t=u().$implicit,n=u(4);r(),E(n.califValor(t.materiaId,"Teorico4"))}}function Ji(i,e){if(i&1&&(o(0,"td",123),d(1),s()),i&2){let t=u().$implicit,n=u(4);r(),E(n.califValor(t.materiaId,"Practico1"))}}function tn(i,e){if(i&1&&(o(0,"td",123),d(1),s()),i&2){let t=u().$implicit,n=u(4);r(),E(n.califValor(t.materiaId,"Practico2"))}}function en(i,e){if(i&1&&(o(0,"td",123),d(1),s()),i&2){let t=u().$implicit,n=u(4);r(),E(n.califValor(t.materiaId,"Practico3"))}}function nn(i,e){if(i&1&&(o(0,"td",123),d(1),s()),i&2){let t=u().$implicit,n=u(4);r(),E(n.califValor(t.materiaId,"Practico4"))}}function an(i,e){if(i&1&&(o(0,"tr",72)(1,"td"),d(2),s(),o(3,"td")(4,"div"),d(5),s(),g(6,Wi,2,1,"div",128),s(),g(7,Ki,2,1,"td",122)(8,Yi,2,1,"td",122)(9,Xi,2,1,"td",122)(10,Zi,2,1,"td",122)(11,Ji,2,1,"td",122)(12,tn,2,1,"td",122)(13,en,2,1,"td",122)(14,nn,2,1,"td",122),o(15,"td",123),d(16),s(),o(17,"td",123),d(18),s(),o(19,"td",123),d(20),s(),o(21,"td",123),d(22),s(),o(23,"td"),d(24),s()()),i&2){let t=e.$implicit,n=e.index,a=u(4);l("hidden",a.isLoadingAsignaciones),r(2),E(n+1),r(3),E(t.materia),r(),l("ngIf",a.materiaMetaSmall(t.materiaId)),r(),l("ngIf",a.mostrarDetalleCalificaciones),r(),l("ngIf",a.mostrarDetalleCalificaciones),r(),l("ngIf",a.mostrarDetalleCalificaciones),r(),l("ngIf",a.mostrarDetalleCalificaciones),r(),l("ngIf",a.mostrarDetalleCalificaciones),r(),l("ngIf",a.mostrarDetalleCalificaciones),r(),l("ngIf",a.mostrarDetalleCalificaciones),r(),l("ngIf",a.mostrarDetalleCalificaciones),r(2),E(a.califValor(t.materiaId,"PromTeorico")),r(2),E(a.califValor(t.materiaId,"PromPractico")),r(2),E(a.califValor(t.materiaId,"Promedio")),r(2),E(a.califValor(t.materiaId,"PruebaRecuperacion")),r(2),E(a.estadoRegistroMateria(t.materiaId))}}function sn(i,e){if(i&1&&(nt(0),g(1,Qi,3,1,"tr",26)(2,an,25,17,"tr",126),at()),i&2){let t=e.ngIf,n=u(3);r(),l("ngIf",!n.isLoadingAsignaciones&&t.length===0),r(),l("ngForOf",t)("ngForTrackBy",n.trackByMateriaId)}}function on(i,e){if(i&1&&(o(0,"div",60)(1,"table",121)(2,"thead")(3,"tr")(4,"th"),d(5,"#"),s(),o(6,"th"),d(7,"Materia"),s(),g(8,Li,2,0,"th",122)(9,$i,2,0,"th",122)(10,Bi,2,0,"th",122)(11,ji,2,0,"th",122)(12,Ui,2,0,"th",122)(13,zi,2,0,"th",122)(14,Gi,2,0,"th",122)(15,qi,2,0,"th",122),o(16,"th",123),d(17,"PromT"),s(),o(18,"th",123),d(19,"PromP"),s(),o(20,"th",123),d(21,"Prom"),s(),o(22,"th",123),d(23,"Rec"),s(),o(24,"th"),d(25,"Estado"),s()()(),o(26,"tbody",124),g(27,Hi,6,2,"tr",26)(28,sn,3,3,"ng-container",26),s()()()),i&2){let t=u(2);r(8),l("ngIf",t.mostrarDetalleCalificaciones),r(),l("ngIf",t.mostrarDetalleCalificaciones),r(),l("ngIf",t.mostrarDetalleCalificaciones),r(),l("ngIf",t.mostrarDetalleCalificaciones),r(),l("ngIf",t.mostrarDetalleCalificaciones),r(),l("ngIf",t.mostrarDetalleCalificaciones),r(),l("ngIf",t.mostrarDetalleCalificaciones),r(),l("ngIf",t.mostrarDetalleCalificaciones),r(12),l("ngIf",t.isLoadingAsignaciones),r(),l("ngIf",t.tablaAsignacionesRows)}}function rn(i,e){if(i&1&&(o(0,"div",153)(1,"div",107),x(2,"ng-lottie",108),o(3,"span"),d(4,"Cargando materias/asignaciones..."),s()()()),i&2){let t=u(4);r(2),l("options",t._tools.optionsengranaje)}}function ln(i,e){if(i&1&&(o(0,"option",14),d(1,"REGULAR"),s()),i&2){let t=u(4);l("ngValue",t.tipoRegistroMateria)}}function cn(i,e){if(i&1&&(o(0,"option",154),d(1),s()),i&2){let t=e.$implicit;l("ngValue",t.value)("disabled",t.disabled),r(),E(t.label)}}function dn(i,e){if(i&1){let t=b();o(0,"button",21),h("click",function(){let a=p(t).$implicit,c=u(4);return _(c.toggleLvlCurso(a))}),d(1),s()}if(i&2){let t=e.$implicit,n=u(4);G("active",n.isLvlCursoSeleccionado(t)),r(),I(" ",t," ")}}function un(i,e){if(i&1){let t=b();o(0,"button",155),h("click",function(){let a=p(t).$implicit,c=u(4);return _(c.toggleParalelo(a))}),d(1),s()}if(i&2){let t=e.$implicit,n=u(4);G("active",n.isParaleloSeleccionado(t)),r(),I(" ",t," ")}}function mn(i,e){if(i&1&&x(0,"ng-lottie",65),i&2){let t=u(5);l("options",t._tools.optionsengranaje)}}function pn(i,e){if(i&1){let t=b();o(0,"button",156),h("click",function(){p(t);let a=u(4);return _(a.asignarCursoCompleto())}),o(1,"span",54),g(2,mn,1,1,"ng-lottie",55),o(3,"span"),d(4),s()()()}if(i&2){let t=u(4);l("disabled",t.isBulkLoading),r(2),l("ngIf",t.isBulkLoading),r(2),E(t.isBulkLoading?"Procesando...":"Asignar todo (A\xF1o/Resoluci\xF3n)")}}function _n(i,e){if(i&1&&x(0,"ng-lottie",65),i&2){let t=u(5);l("options",t._tools.optionsengranaje)}}function fn(i,e){if(i&1){let t=b();o(0,"button",157),h("click",function(){p(t);let a=u(4);return _(a.quitarTodasAsignaciones())}),o(1,"span",54),g(2,_n,1,1,"ng-lottie",55),o(3,"span"),d(4),s()()()}if(i&2){let t=u(4);l("disabled",t.isBulkLoading),r(2),l("ngIf",t.isBulkLoading),r(2),E(t.isBulkLoading?"Procesando...":"Quitar todas")}}function gn(i,e){if(i&1&&x(0,"ng-lottie",65),i&2){let t=u(6);l("options",t._tools.optionsengranaje)}}function hn(i,e){if(i&1&&x(0,"ng-lottie",65),i&2){let t=u(6);l("options",t._tools.optionsengranaje)}}function xn(i,e){if(i&1&&(o(0,"span"),d(1),s()),i&2){let t=u().$implicit;r(),E(t.lvlCurso)}}function vn(i,e){if(i&1&&(o(0,"span"),d(1),s()),i&2){let t=u().$implicit;r(),I(" - ",t.paralelo)}}function En(i,e){i&1&&(o(0,"span",176),d(1,"Tiene calificaciones"),s())}function bn(i,e){i&1&&(o(0,"span",176),d(1,"Sin calificaciones"),s())}function Cn(i,e){if(i&1){let t=b();o(0,"div",172)(1,"div",173)(2,"span")(3,"b"),d(4,"Calificaciones:"),s(),g(5,En,2,0,"span",174)(6,bn,2,0,"span",174),s(),o(7,"span",175)(8,"b"),d(9,"Tipo de registro:"),s(),o(10,"span",176),d(11),s()()(),o(12,"button",177),h("click",function(a){p(t);let c=u().$implicit,m=u(6);return _(m.verCalificaciones(c,a))}),d(13," Ver "),s()()}if(i&2){let t=u().$implicit,n=u(6);r(5),l("ngIf",n.tieneCalificaciones(t.id)),r(),l("ngIf",!n.tieneCalificaciones(t.id)),r(5),E(n.estadoRegistroMateria(t.id)),r(),l("disabled",!n.tieneCalificaciones(t.id))}}function Sn(i,e){if(i&1&&(o(0,"div",178),x(1,"ng-lottie",71),s()),i&2){let t=u(7);r(),l("options",t._tools.optionsengranaje)}}function In(i,e){if(i&1){let t=b();o(0,"div",166)(1,"button",167),h("click",function(a){let c=p(t).$implicit,m=u(6);return _(m.toggleAsignacion(c,a))}),o(2,"span",168),d(3),s(),o(4,"span"),d(5),s()(),o(6,"div",169),g(7,xn,2,1,"span",26)(8,vn,2,1,"span",26),s(),g(9,Cn,14,4,"div",170)(10,Sn,2,1,"div",171),s()}if(i&2){let t=e.$implicit,n=u(6);l("ngClass",Mt(9,je,n.isAsignada(t.id))),r(),l("disabled",n.isLoadingMateria[t.id]),r(),l("ngClass",n.isAsignada(t.id)?"bg-success":"bg-secondary"),r(),I(" ",n.isAsignada(t.id)?"ASIGNADO":"NO"," "),r(2),E((t.sigla?t.sigla+" - ":"")+t.nombre),r(2),l("ngIf",t.lvlCurso),r(),l("ngIf",t.paralelo),r(),l("ngIf",n.isAsignada(t.id)),r(),l("ngIf",n.isLoadingMateria[t.id])}}function yn(i,e){if(i&1){let t=b();o(0,"div")(1,"div",159)(2,"h5",160),d(3),s(),o(4,"div",161)(5,"button",162),h("click",function(a){let c=p(t).$implicit,m=u(5);return _(m.asignarCategoriaCompleta(c,a))}),o(6,"span",54),g(7,gn,1,1,"ng-lottie",55),o(8,"span"),d(9),s()()(),o(10,"button",163),h("click",function(a){let c=p(t).$implicit,m=u(5);return _(m.quitarCategoriaCompleta(c,a))}),o(11,"span",54),g(12,hn,1,1,"ng-lottie",55),o(13,"span"),d(14),s()()()()(),o(15,"div",164),g(16,In,11,11,"div",165),s(),x(17,"hr"),s()}if(i&2){let t=e.$implicit,n=u(5);r(3),E(t),r(2),l("disabled",n.isBulkLoading),r(2),l("ngIf",n.isBulkLoading),r(2),E(n.isBulkLoading?"Procesando...":"Asignar este curso"),r(),l("disabled",n.isBulkLoading),r(2),l("ngIf",n.isBulkLoading),r(2),E(n.isBulkLoading?"Procesando...":"Quitar este curso"),r(2),l("ngForOf",n.materiasPorCategoria(t))("ngForTrackBy",n.trackById)}}function wn(i,e){if(i&1&&(nt(0),g(1,yn,18,9,"div",158),at()),i&2){let t=u(4);r(),l("ngForOf",t.categorias())}}function An(i,e){if(i&1&&(o(0,"span"),d(1),s()),i&2){let t=u().$implicit;r(),E(t.lvlCurso)}}function Tn(i,e){if(i&1&&(o(0,"span"),d(1),s()),i&2){let t=u().$implicit;r(),I(" - ",t.paralelo)}}function Mn(i,e){if(i&1&&(o(0,"div",90),d(1," Tipo de registro (al asignar): "),o(2,"b"),d(3),s()()),i&2){let t=u(6);r(3),E(t.tipoRegistroMateria||"REGULAR")}}function Vn(i,e){i&1&&(o(0,"span",176),d(1,"Tiene calificaciones"),s())}function Pn(i,e){i&1&&(o(0,"span",176),d(1,"Sin calificaciones"),s())}function kn(i,e){if(i&1){let t=b();o(0,"div",172)(1,"div",173)(2,"span")(3,"b"),d(4,"Calificaciones:"),s(),g(5,Vn,2,0,"span",174)(6,Pn,2,0,"span",174),s(),o(7,"span",175)(8,"b"),d(9,"Tipo de registro:"),s(),o(10,"span",176),d(11),s()()(),o(12,"button",177),h("click",function(a){p(t);let c=u().$implicit,m=u(5);return _(m.verCalificaciones(c,a))}),d(13," Ver "),s()()}if(i&2){let t=u().$implicit,n=u(5);r(5),l("ngIf",n.tieneCalificaciones(t.id)),r(),l("ngIf",!n.tieneCalificaciones(t.id)),r(5),E(n.estadoRegistroMateria(t.id)),r(),l("disabled",!n.tieneCalificaciones(t.id))}}function Nn(i,e){if(i&1&&(o(0,"div",178),x(1,"ng-lottie",71),s()),i&2){let t=u(6);r(),l("options",t._tools.optionsengranaje)}}function Fn(i,e){if(i&1){let t=b();o(0,"div",166)(1,"button",167),h("click",function(a){let c=p(t).$implicit,m=u(5);return _(m.toggleAsignacion(c,a))}),o(2,"span",168),d(3),s(),o(4,"span"),d(5),s()(),o(6,"div",169),g(7,An,2,1,"span",26)(8,Tn,2,1,"span",26),s(),g(9,Mn,4,1,"div",94)(10,kn,14,4,"div",170)(11,Nn,2,1,"div",171),s()}if(i&2){let t=e.$implicit,n=u(5);l("ngClass",Mt(10,je,n.isAsignada(t.id))),r(),l("disabled",n.isLoadingMateria[t.id]),r(),l("ngClass",n.isAsignada(t.id)?"bg-success":"bg-secondary"),r(),I(" ",n.isAsignada(t.id)?"ASIGNADO":"NO"," "),r(2),E((t.sigla?t.sigla+" - ":"")+t.nombre),r(2),l("ngIf",t.lvlCurso),r(),l("ngIf",t.paralelo),r(),l("ngIf",!n.isAsignada(t.id)),r(),l("ngIf",n.isAsignada(t.id)),r(),l("ngIf",n.isLoadingMateria[t.id])}}function On(i,e){if(i&1&&(nt(0),o(1,"div",164),g(2,Fn,12,12,"div",165),s(),at()),i&2){let t=u(4);r(2),l("ngForOf",t.materiasFiltradas())("ngForTrackBy",t.trackById)}}function Rn(i,e){if(i&1){let t=b();o(0,"div"),g(1,rn,5,1,"div",130),o(2,"div",131)(3,"div",132)(4,"div",9)(5,"span",10),x(6,"i",133),s(),o(7,"div",12)(8,"input",134),h("input",function(a){p(t);let c=u(3);return _(c.filterMateria=a.target.value)}),s(),o(9,"label"),d(10,"Buscar materia (sigla/nombre/ID)"),s()()()(),o(11,"div",135)(12,"div",136)(13,"input",137),h("change",function(){p(t);let a=u(3);return _(a.toggleModoCategorias())}),s(),o(14,"label",138),d(15,"Con categor\xEDas"),s()(),o(16,"div",136)(17,"input",139),h("change",function(){p(t);let a=u(3);return _(a.onToggleMostrarTodasMaterias())}),s(),o(18,"label",140),d(19,"Mostrar todas (manual)"),s()(),o(20,"div",141)(21,"span",10),x(22,"i",142),s(),o(23,"div",12)(24,"select",143),O("ngModelChange",function(a){p(t);let c=u(3);return F(c.tipoRegistroMateria,a)||(c.tipoRegistroMateria=a),_(a)}),g(25,ln,2,1,"option",144)(26,cn,2,3,"option",145),s(),o(27,"label",146),d(28,"Tipo de registro"),s()()(),o(29,"div",147)(30,"small",148),d(31,"Cursos:"),s(),g(32,dn,2,3,"button",149),s(),o(33,"div",147)(34,"small",148),d(35,"Paralelos:"),s(),g(36,un,2,3,"button",150),s(),g(37,pn,5,3,"button",151)(38,fn,5,3,"button",152),s()(),g(39,wn,2,1,"ng-container",26)(40,On,3,2,"ng-container",26),s()}if(i&2){let t=u(3);r(),l("ngIf",t.isLoadingMateriasAsignables||t.isLoadingAsignaciones),r(7),l("value",t.filterMateria),r(5),l("checked",t.modoCategorias),r(4),l("checked",t.mostrarTodasMaterias),r(7),N("ngModel",t.tipoRegistroMateria),l("disabled",t.isLoadingTipoRegistroMateria),r(),l("ngIf",t.tipoRegistroMateriaOptions.length===0),r(),l("ngForOf",t.tipoRegistroMateriaOptions),r(6),l("ngForOf",t.lvlCursosDetectados()),r(4),l("ngForOf",t.paralelosDetectados()),r(),l("ngIf",!t.modoCategorias),r(),l("ngIf",!t.modoCategorias),r(),l("ngIf",t.modoCategorias),r(),l("ngIf",!t.modoCategorias)}}function Dn(i,e){i&1&&(o(0,"th",123),d(1,"T1"),s())}function Ln(i,e){i&1&&(o(0,"th",123),d(1,"T2"),s())}function $n(i,e){i&1&&(o(0,"th",123),d(1,"T3"),s())}function Bn(i,e){i&1&&(o(0,"th",123),d(1,"T4"),s())}function jn(i,e){i&1&&(o(0,"th",123),d(1,"P1"),s())}function Un(i,e){i&1&&(o(0,"th",123),d(1,"P2"),s())}function zn(i,e){i&1&&(o(0,"th",123),d(1,"P3"),s())}function Gn(i,e){i&1&&(o(0,"th",123),d(1,"P4"),s())}function qn(i,e){if(i&1&&(o(0,"tr")(1,"td",125)(2,"div",70),x(3,"ng-lottie",71),o(4,"span",68),d(5,"Cargando asignaciones..."),s()()()()),i&2){let t=u(4);r(),B("colspan",t.mostrarDetalleCalificaciones?19:11),r(2),l("options",t._tools.optionsengranaje)}}function Hn(i,e){if(i&1&&(o(0,"tr")(1,"td",127),d(2,"Sin asignaciones"),s()()),i&2){let t=u(5);r(),B("colspan",t.mostrarDetalleCalificaciones?19:11)}}function Qn(i,e){if(i&1&&(o(0,"div",129),d(1),s()),i&2){let t=u().$implicit,n=u(5);r(),I(" ",n.materiaMetaSmall(t.materiaId)," ")}}function Wn(i,e){if(i&1&&(o(0,"td",123),d(1),s()),i&2){let t=u().$implicit,n=u(5);r(),E(n.califValor(t.materiaId,"Teorico1"))}}function Kn(i,e){if(i&1&&(o(0,"td",123),d(1),s()),i&2){let t=u().$implicit,n=u(5);r(),E(n.califValor(t.materiaId,"Teorico2"))}}function Yn(i,e){if(i&1&&(o(0,"td",123),d(1),s()),i&2){let t=u().$implicit,n=u(5);r(),E(n.califValor(t.materiaId,"Teorico3"))}}function Xn(i,e){if(i&1&&(o(0,"td",123),d(1),s()),i&2){let t=u().$implicit,n=u(5);r(),E(n.califValor(t.materiaId,"Teorico4"))}}function Zn(i,e){if(i&1&&(o(0,"td",123),d(1),s()),i&2){let t=u().$implicit,n=u(5);r(),E(n.califValor(t.materiaId,"Practico1"))}}function Jn(i,e){if(i&1&&(o(0,"td",123),d(1),s()),i&2){let t=u().$implicit,n=u(5);r(),E(n.califValor(t.materiaId,"Practico2"))}}function ta(i,e){if(i&1&&(o(0,"td",123),d(1),s()),i&2){let t=u().$implicit,n=u(5);r(),E(n.califValor(t.materiaId,"Practico3"))}}function ea(i,e){if(i&1&&(o(0,"td",123),d(1),s()),i&2){let t=u().$implicit,n=u(5);r(),E(n.califValor(t.materiaId,"Practico4"))}}function ia(i,e){if(i&1&&(o(0,"option",181),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),I(" ",t.value," ")}}function na(i,e){if(i&1){let t=b();o(0,"tr",72)(1,"td"),d(2),s(),o(3,"td"),d(4),s(),o(5,"td"),d(6),s(),o(7,"td")(8,"div"),d(9),s(),g(10,Qn,2,1,"div",128),s(),o(11,"td"),d(12),s(),g(13,Wn,2,1,"td",122)(14,Kn,2,1,"td",122)(15,Yn,2,1,"td",122)(16,Xn,2,1,"td",122)(17,Zn,2,1,"td",122)(18,Jn,2,1,"td",122)(19,ta,2,1,"td",122)(20,ea,2,1,"td",122),o(21,"td",123),d(22),s(),o(23,"td",123),d(24),s(),o(25,"td",123),d(26),s(),o(27,"td",123),d(28),s(),o(29,"td")(30,"select",179),h("change",function(a){let c=p(t).$implicit,m=u(5);return _(m.onEstadoRegistroMateriaChange(c.materiaId,a.target.value))})("click",function(a){return p(t),_(a.stopPropagation())}),g(31,ia,2,3,"option",180),s()(),o(32,"td")(33,"button",157),h("click",function(){let a=p(t).$implicit,c=u(5);return _(c.quitarAsignacionTabla(a.materiaId))}),d(34," Quitar "),s()()()}if(i&2){let t=e.$implicit,n=e.index,a=u(5);l("hidden",a.isLoadingAsignaciones),r(2),E(n+1),r(2),E(t.estudiante),r(2),E(t.categoria),r(3),E(t.materia),r(),l("ngIf",a.materiaMetaSmall(t.materiaId)),r(2),E(t.paralelo),r(),l("ngIf",a.mostrarDetalleCalificaciones),r(),l("ngIf",a.mostrarDetalleCalificaciones),r(),l("ngIf",a.mostrarDetalleCalificaciones),r(),l("ngIf",a.mostrarDetalleCalificaciones),r(),l("ngIf",a.mostrarDetalleCalificaciones),r(),l("ngIf",a.mostrarDetalleCalificaciones),r(),l("ngIf",a.mostrarDetalleCalificaciones),r(),l("ngIf",a.mostrarDetalleCalificaciones),r(2),E(a.califValor(t.materiaId,"PromTeorico")),r(2),E(a.califValor(t.materiaId,"PromPractico")),r(2),E(a.califValor(t.materiaId,"Promedio")),r(2),E(a.califValor(t.materiaId,"PruebaRecuperacion")),r(2),l("ngModel",a.estadoRegistroMateria(t.materiaId))("ngModelOptions",Y(24,Ke))("disabled",a.isLoadingMateria[t.materiaId]),r(),l("ngForOf",a.estadoRegistroMateriaOptions()),r(2),l("disabled",a.isLoadingMateria[t.materiaId])}}function aa(i,e){if(i&1&&(nt(0),g(1,Hn,3,1,"tr",26)(2,na,35,25,"tr",126),at()),i&2){let t=e.ngIf,n=u(4);r(),l("ngIf",!n.isLoadingAsignaciones&&t.length===0),r(),l("ngForOf",t)("ngForTrackBy",n.trackByMateriaId)}}function sa(i,e){if(i&1&&(o(0,"div",60)(1,"table",121)(2,"thead")(3,"tr")(4,"th"),d(5,"#"),s(),o(6,"th"),d(7,"Estudiante"),s(),o(8,"th"),d(9,"Categoria"),s(),o(10,"th"),d(11,"Materia"),s(),o(12,"th"),d(13,"Paralelo"),s(),g(14,Dn,2,0,"th",122)(15,Ln,2,0,"th",122)(16,$n,2,0,"th",122)(17,Bn,2,0,"th",122)(18,jn,2,0,"th",122)(19,Un,2,0,"th",122)(20,zn,2,0,"th",122)(21,Gn,2,0,"th",122),o(22,"th",123),d(23,"PromT"),s(),o(24,"th",123),d(25,"PromP"),s(),o(26,"th",123),d(27,"Prom"),s(),o(28,"th",123),d(29,"Rec"),s(),o(30,"th"),d(31,"Estado"),s(),o(32,"th"),d(33,"Acci\xF3n"),s()()(),o(34,"tbody",124),g(35,qn,6,2,"tr",26)(36,aa,3,3,"ng-container",26),s()()()),i&2){let t=u(3);r(14),l("ngIf",t.mostrarDetalleCalificaciones),r(),l("ngIf",t.mostrarDetalleCalificaciones),r(),l("ngIf",t.mostrarDetalleCalificaciones),r(),l("ngIf",t.mostrarDetalleCalificaciones),r(),l("ngIf",t.mostrarDetalleCalificaciones),r(),l("ngIf",t.mostrarDetalleCalificaciones),r(),l("ngIf",t.mostrarDetalleCalificaciones),r(),l("ngIf",t.mostrarDetalleCalificaciones),r(14),l("ngIf",t.isLoadingAsignaciones),r(),l("ngIf",t.tablaAsignacionesRows)}}function oa(i,e){if(i&1&&(o(0,"div"),g(1,Rn,41,14,"div",26)(2,sa,37,10,"div",113),s()),i&2){let t=u(2);r(),l("ngIf",!t.ModoBoolean),r(),l("ngIf",t.ModoBoolean)}}function ra(i,e){if(i&1&&(o(0,"div"),g(1,Di,8,2,"div",112)(2,on,29,10,"div",113)(3,oa,3,2,"div",26),s()),i&2){let t=u();r(),l("ngIf",t.modo==="estudiante"),r(),l("ngIf",t.modo==="estudiante"&&!t.mostrarOpcionesAsignacion),r(),l("ngIf",t.modo!=="estudiante"||t.mostrarOpcionesAsignacion)}}function la(i,e){if(i&1){let t=b();o(0,"div",182)(1,"h5",183),d(2,"Componente Historias"),s(),o(3,"button",184),h("click",function(){let a=p(t).$implicit;return _(a.dismiss())}),s()(),o(4,"div",185),x(5,"app-califhistorias",186),s()}if(i&2){let t=u();r(5),l("modo","modal_ci")("ciBusqueda",t.ciEstudianteNumerico())("institucion",t.institucionHistorialNombre())}}var Ct=class Ct{constructor(e,t,n,a,c,m,v,f,C){this._calif=e;this._carreras=t;this._mat=n;this._controles=a;this._est=c;this._info=m;this._anios=v;this._auth=f;this._tools=C;this.modo="general";this.estudianteId=null;this.nombreEstudiante=null;this.fotoEstudiante=null;this.sexoEstudiante=null;this.preferInfoId=null;this.lastAppliedEstudianteId=null;this.mostrarOpcionesAsignacion=!0;this.mostrarDetalleCalificaciones=!1;this.ModoBoolean=!1;this.filterEstudiante="";this.filterMateria="";this.busquedaAnioScope="mixed";this.selectedSearchInfoId=null;this.mostrarTodasMaterias=!1;this.tipoRegistroMateriaOptions=[];this.tipoRegistroMateria="REGULAR";this.isLoadingTipoRegistroMateria=!1;this.estudiantes=[];this.estMeta=null;this.estPage=1;this.estPerPage=10;this.isLoadingEstudiantes=!1;this.estudianteSeleccionado=null;this.inscripciones=[];this.inscripcionSeleccionada=null;this.isLoadingInscripciones=!1;this.isLoadingMateriasAsignables=!1;this.isLoadingAsignaciones=!1;this.materiasReqToken=0;this.asignacionesReqToken=0;this.inscripcionesReqToken=0;this.verPendientes=!1;this.filterPendientes="";this.pendientes=[];this.pendMeta=null;this.pendPage=1;this.pendPerPage=10;this.isLoadingPendientes=!1;this.materias=[];this.modoCategorias=!0;this.selectedLvlCursos=new Set;this.selectedParalelos=new Set;this.aniosOptions=[];this.filtroAnioId=null;this.filtroResolucionKey="";this.filtroResolucion=null;this.filtroNivelCarrera=null;this.filtroInstitucionId=null;this.resolucionOptions=[];this.esSuperAdmin=!1;this.perfilInstitucionNombre="";this.carreras=[];this.asignadas=new Set;this.isLoadingMateria={};this.isBulkLoading=!1;this.tablaAsignacionesRows=[];this.cursosConMateriasAsignadasList=[];this.califPorMateria=new Map;this.estadoRegistroMateriaFallbackOptions=[{value:"REGULAR"},{value:"ARRASTRE"},{value:"CONVALIDADO"},{value:"CORRELATIVO"}];this.materiaMetaCache=new Map;this.materiaMetaReqToken=0;this.camposCalificacion=[{key:"Teorico1",label:"Teorico1"},{key:"Teorico2",label:"Teorico2"},{key:"Teorico3",label:"Teorico3"},{key:"Teorico4",label:"Teorico4"},{key:"Practico1",label:"Practico1"},{key:"Practico2",label:"Practico2"},{key:"Practico3",label:"Practico3"},{key:"Practico4",label:"Practico4"},{key:"PromTeorico",label:"PromTeorico"},{key:"PromPractico",label:"PromPractico"},{key:"Promedio",label:"Promedio"},{key:"PruebaRecuperacion",label:"PruebaRecuperacion"}]}ngOnInit(){this.cargarFiltrosAsignacion(),this.cargarTipoRegistroMateriaDesdeControles(),this._auth.pedirPerfil().subscribe({next:e=>{this.perfilInstitucionNombre=String(e?.nameInst??"").trim()},error:()=>{this.perfilInstitucionNombre=""}}),this._auth.revisarSiEsSuperAdmin().subscribe(e=>{this.esSuperAdmin=e,this.rebuildResolucionOptions()}),this.tryApplyModoEstudiante()}upperTrim(e){return(e??"").toString().trim().toUpperCase()}estadoRegistroMateriaOptions(){let e=Array.isArray(this.tipoRegistroMateriaOptions)?this.tipoRegistroMateriaOptions:[];if(e.length===0)return this.estadoRegistroMateriaFallbackOptions;let t=e.map(c=>({value:this.upperTrim(c?.value),disabled:!!c?.disabled})).filter(c=>!!c.value),n=new Set,a=t.filter(c=>n.has(c.value)?!1:(n.add(c.value),!0));return a.length>0?a:this.estadoRegistroMateriaFallbackOptions}onEstadoRegistroMateriaChange(e,t){return k(this,null,function*(){let n=this.califDeMateria(e),a=Number(n?.id??0);if(!Number.isFinite(a)||a<=0)return;let c=this.upperTrim(t),m=this.upperTrim(n?.EstadoRegistroMateria),v=c||"REGULAR";if(m!==v){this.isLoadingMateria[e]=!0;try{yield new Promise((C,S)=>{this._calif.ActualizarEstadoRegistroMateria({id:a,EstadoRegistroMateria:v}).subscribe({next:()=>C(),error:w=>S(w)})});let f=et(W({},n??{}),{EstadoRegistroMateria:v});this.califPorMateria.set(e,f)}catch(f){console.error("No se pudo actualizar el tipo de registro:",f),this.inscripcionSeleccionada&&this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}finally{this.isLoadingMateria[e]=!1}}})}cargarTipoRegistroMateriaDesdeControles(){this.isLoadingTipoRegistroMateria=!0,this._controles.ObtenerOptionsSelectPorCategorias(["TIPO REGISTRO DE MATERIA"]).subscribe({next:e=>{this.tipoRegistroMateriaOptions=e?.["TIPO REGISTRO DE MATERIA"]||[];let t=this.upperTrim(this.tipoRegistroMateria),n=(this.tipoRegistroMateriaOptions||[]).map(c=>this.upperTrim(c?.value));if(!(t&&n.includes(t))){let c=(this.tipoRegistroMateriaOptions||[]).find(v=>this.upperTrim(v?.value)==="REGULAR"&&!v.disabled),m=(this.tipoRegistroMateriaOptions||[]).find(v=>!v.disabled);this.tipoRegistroMateria=(c?.value??m?.value??"REGULAR").toString()}},error:()=>{this.tipoRegistroMateriaOptions=[],this.tipoRegistroMateria="REGULAR"},complete:()=>{this.isLoadingTipoRegistroMateria=!1}})}estadoRegistroMateriaParaAsignar(){return this.upperTrim(this.tipoRegistroMateria)||"REGULAR"}ngOnChanges(e){(e.modo||e.estudianteId||e.preferInfoId||e.nombreEstudiante||e.fotoEstudiante||e.sexoEstudiante)&&this.tryApplyModoEstudiante()}tryApplyModoEstudiante(){if(this.modo!=="estudiante")return;let e=Number(this.estudianteId??0);if(!Number.isFinite(e)||e<=0||this.lastAppliedEstudianteId===e&&this.estudianteSeleccionado?.id===e)return;this.verPendientes=!1,this.mostrarOpcionesAsignacion=!1,this.filterEstudiante="",this.estudiantes=[],this.estMeta=null;let t=(this.nombreEstudiante??"").toString().trim()||`Estudiante #${e}`,n=this.preferInfoId?Number(this.preferInfoId):null;this.lastAppliedEstudianteId=e,this.seleccionarEstudiante({id:e,nombre:t,infoId:n??void 0}),this._est.Seleccionarestudiantesifas(e).subscribe({next:a=>{let c=a?.data;!c||!this.estudianteSeleccionado||this.estudianteSeleccionado.id!==e||(this.estudianteSeleccionado=et(W({},this.estudianteSeleccionado),{ci:(c?.CI??"").toString()}))},error:()=>{}})}abrirOpcionesAsignacion(){this.mostrarOpcionesAsignacion=!0}cargarFiltrosAsignacion(){this._anios.ObtenerAniosConPredeterminado().subscribe({next:e=>{let t=Array.isArray(e?.anios)?e.anios:[];this.aniosOptions=t.map(a=>({id:Number(a?.id),Anio:String(a?.Anio??"").trim()})).filter(a=>Number.isFinite(a.id)&&a.id>0&&a.Anio);let n=this.filtroAnioId;if(this.filtroAnioId===null||this.filtroAnioId===void 0){let a=e?.predeterminado;a?.id?this.filtroAnioId=Number(a.id):this.aniosOptions.length&&(this.filtroAnioId=this.aniosOptions[0].id)}this.inscripcionSeleccionada&&this.filtroAnioId&&n!==this.filtroAnioId&&this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)},error:()=>{this.aniosOptions=[]}}),this._carreras.Obtenercarreras().subscribe({next:e=>{this.carreras=Array.isArray(e?.data)?e.data:[],this.rebuildResolucionOptions()},error:()=>{this.carreras=[],this.rebuildResolucionOptions()}})}rebuildResolucionOptions(){let e=new Map;for(let t of this.carreras||[]){let n=(t?.Resolucion??"").toString().trim();if(!n)continue;let a=(t?.Nivel??"").toString().trim(),c=(t?.Area??"").toString().trim(),m=t?.instituciones_id,v=m!=null&&m!==""?Number(m):null,f=(t?.NombreInstitucion??"").toString().trim(),C=a||"SIN NIVEL",S=`${n}|${C}`,w=this.esSuperAdmin&&v?`${v}|${S}`:S,y=`${c?c+" \xB7 ":""}${n} (${C})`,$=this.esSuperAdmin&&v?`${y}${f?" \xB7 "+f:""}`:y;e.has(w)||e.set(w,{key:w,label:$,resolucion:n,nivel:C,instituciones_id:v})}this.resolucionOptions=Array.from(e.values()).sort((t,n)=>t.label.localeCompare(n.label))}parseResolucionKey(){let e=(this.filtroResolucionKey??"").toString();if(!e){this.filtroResolucion=null,this.filtroNivelCarrera=null,this.filtroInstitucionId=null;return}let t=e.split("|");if(t.length>=3){let n=Number(t[0]),a=(t[1]??"").toString(),c=t.slice(2).join("|");this.filtroInstitucionId=Number.isFinite(n)?n:null,this.filtroResolucion=a||null,this.filtroNivelCarrera=c||null;return}if(t.length===2){let n=(t[0]??"").toString(),a=(t[1]??"").toString();this.filtroInstitucionId=null,this.filtroResolucion=n||null,this.filtroNivelCarrera=a||null;return}this.filtroInstitucionId=null,this.filtroResolucion=e,this.filtroNivelCarrera=null}onCambioFiltrosAsignacion(){this.parseResolucionKey(),this.inscripcionSeleccionada&&this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}trackById(e,t){return t.id}trackByMateriaId(e,t){return t.materiaId}onToggleChange(e){let t=e.target.checked;this.ModoBoolean=t}rebuildDerivedViews(){if(!this.estudianteSeleccionado||!this.inscripcionSeleccionada)this.tablaAsignacionesRows=[];else{let e=[];for(let t of this.asignadas){let n=this.materias.find(a=>a.id===t);n&&e.push({materiaId:n.id,estudiante:this.estudianteSeleccionado.nombre,materia:`${n.sigla?n.sigla+" - ":""}${n.nombre}`,categoria:n.categoria,paralelo:n.paralelo||"-"})}this.tablaAsignacionesRows=e}this.cursosConMateriasAsignadasList=this.buildCursosConMateriasAsignadas()}toggleModoCategorias(){this.modoCategorias=!this.modoCategorias}togglePendientes(){this.verPendientes=!this.verPendientes,this.verPendientes&&this.cargarPendientes(1)}cargarPendientes(e=1){if(this.isLoadingPendientes)return;let t=(this.filterPendientes??"").trim();this.isLoadingPendientes=!0,this._info.ObtenerPendientesAsignacion({page:e,per_page:this.pendPerPage,instituciones_id:this.esSuperAdmin?this.filtroInstitucionId??void 0:void 0,search:t||void 0}).subscribe({next:n=>{this.pendientes=Array.isArray(n?.data)?n.data:[],this.pendMeta=n?.meta??null,this.pendPage=this.pendMeta?.current_page??e},error:n=>{console.error("Error al cargar pendientes:",n),this.pendientes=[],this.pendMeta=null,this.pendPage=1},complete:()=>{this.isLoadingPendientes=!1}})}pendTienePrev(){return(this.pendMeta?.current_page??1)>1}pendTieneNext(){let e=this.pendMeta?.current_page??1,t=this.pendMeta?.last_page??1;return e<t}pendPrev(){this.pendTienePrev()&&this.cargarPendientes((this.pendMeta?.current_page??1)-1)}pendNext(){this.pendTieneNext()&&this.cargarPendientes((this.pendMeta?.current_page??1)+1)}seleccionarPendiente(e){let t=Number(e?.estudiantesifas_id??0),n=Number(e?.id??0);if(!t||!n)return;let a=(e?.Ap_Paterno??"").toString().trim(),c=(e?.Ap_Materno??"").toString().trim(),m=(e?.Nombre??"").toString().trim(),v=`${a} ${c} ${m}`.replace(/\s+/g," ").trim()||`Estudiante #${t}`;this.seleccionarEstudiante({id:t,nombre:v,ci:(e?.CI??"").toString(),matricula:(e?.Matricula??"").toString(),infoId:n,institucionId:Number(e?.instituciones_id??0)||void 0,institucionNombre:(e?.NombreInstitucion??"").toString().trim()||void 0})}buscarEstudiantes(e=1){if(this.isLoadingEstudiantes)return;let t=(this.filterEstudiante??"").trim();if(!t||t.length<2){this.estudiantes=[],this.estMeta=null,this.estPage=1;return}if((this.busquedaAnioScope==="assigned"||this.busquedaAnioScope==="mixed")&&!this.filtroAnioId){z.default.fire("Falta gesti\xF3n","Selecciona el A\xF1o (Gesti\xF3n) para buscar por gesti\xF3n.","info");return}let n=this.busquedaAnioScope==="mixed"?"default":this.busquedaAnioScope;this.isLoadingEstudiantes=!0,this._info.Obtenerinfoestudiantesifas({page:e,per_page:this.estPerPage,search:t,sort_by:"Ap_Paterno",sort_dir:"asc",instituciones_id:this.esSuperAdmin?this.filtroInstitucionId??void 0:void 0,anio_id:this.busquedaAnioScope==="unassigned"?void 0:this.filtroAnioId??void 0,include_sin_asignar:this.busquedaAnioScope==="mixed"?1:0,anio_scope:n}).subscribe({next:a=>{let m=(Array.isArray(a?.data)?a.data:[]).map(v=>{let f=(v?.Ap_Paterno??"").toString().trim(),C=(v?.Ap_Materno??"").toString().trim(),S=(v?.Nombre??"").toString().trim(),w=`${f} ${C} ${S}`.replace(/\s+/g," ").trim()||`Estudiante #${v?.id}`,y=Number(v?.estudiantesifas_id??0),$=Number(v?.id??0),Q=(v?.FechInsc??v?.fechInsc??"").toString().trim(),At=(v?.Curso_Solicitado??"").toString().trim(),oe=(v?.Paralelo_Solicitado??"").toString().trim(),kt=Number(v?.CantidadMateriasAsignadas??0),re=(v?.NombreInstitucion??"").toString().trim(),le=Number(v?.instituciones_id??0);return{id:y,nombre:w,ci:(v?.CI??"").toString(),matricula:(v?.Matricula??"").toString(),infoId:$,fechInsc:Q||void 0,cursoSolicitado:At||void 0,paraleloSolicitado:oe||void 0,cantAsignaciones:Number.isFinite(kt)?kt:0,institucionId:Number.isFinite(le)&&le>0?le:void 0,institucionNombre:re||void 0}}).filter(v=>Number.isFinite(v.id)&&v.id>0);this.estudiantes=m,this.estMeta=a?.meta??null,this.estPage=this.estMeta?.current_page??e},error:a=>{console.error("Error al buscar estudiantes:",a),this.estudiantes=[],this.estMeta=null},complete:()=>{this.isLoadingEstudiantes=!1}})}estTienePrev(){return(this.estMeta?.current_page??1)>1}estTieneNext(){let e=this.estMeta?.current_page??1,t=this.estMeta?.last_page??1;return e<t}estPrev(){this.estTienePrev()&&this.buscarEstudiantes((this.estMeta?.current_page??1)-1)}estNext(){this.estTieneNext()&&this.buscarEstudiantes((this.estMeta?.current_page??1)+1)}seleccionarEstudiante(e){this.selectedSearchInfoId=e.infoId??null,this.estudianteSeleccionado=e,this.inscripcionSeleccionada=null,this.inscripciones=[],this.materias=[],this.asignadas.clear(),this.filterMateria="",this.mostrarTodasMaterias=!1,this.selectedLvlCursos.clear(),this.selectedParalelos.clear(),this.modoCategorias=!0,this.rebuildDerivedViews(),this.cargarInscripciones(e.id,e.infoId??null)}limpiarEstudiante(){this.estudianteSeleccionado=null,this.inscripcionSeleccionada=null,this.inscripciones=[],this.materias=[],this.asignadas.clear(),this.filterMateria="",this.mostrarTodasMaterias=!1,this.selectedLvlCursos.clear(),this.selectedParalelos.clear(),this.modoCategorias=!0,this.rebuildDerivedViews()}buildCursosConMateriasAsignadas(){if(this.inscripcionSeleccionada){let n=new Map;for(let a of this.asignadas){let m=(this.materias.find(v=>v.id===a)?.categoria??"SIN CATEGORIA").toString().trim()||"SIN CATEGORIA";n.set(m,(n.get(m)??0)+1)}return Array.from(n.entries()).sort(([a],[c])=>a.localeCompare(c)).map(([a,c])=>`${a} (${c})`)}let e=new Set,t=[];for(let n of this.inscripciones??[]){let a=Number(n?.CantidadMateriasAsignadas??0);if(!Number.isFinite(a)||a<=0)continue;let c=(n?.Curso_Solicitado??"SIN CURSO").toString().trim()||"SIN CURSO",m=(n?.Paralelo_Solicitado??"").toString().trim(),v=m?`${c} - ${m} (${a})`:`${c} (${a})`;e.has(v)||(e.add(v),t.push(v))}return t.sort((n,a)=>n.localeCompare(a))}cargarInscripciones(e,t=null){let n=++this.inscripcionesReqToken;this.isLoadingInscripciones=!0,this._info.ObtenerinfoestudiantesifasPorEstudiante(e).subscribe({next:a=>{if(n!==this.inscripcionesReqToken)return;let c=Array.isArray(a?.data)?a.data:[];if(this.inscripciones=c.map(m=>({id:Number(m?.id),FechInsc:m?.FechInsc,Curso_Solicitado:m?.Curso_Solicitado,Paralelo_Solicitado:m?.Paralelo_Solicitado,Categoria:m?.Categoria,Turno:m?.Turno,CantidadMateriasAsignadas:m?.CantidadMateriasAsignadas,institucionId:Number(m?.instituciones_id??0)||void 0,institucionNombre:(m?.NombreInstitucion??"").toString().trim()||void 0})).filter(m=>Number.isFinite(m.id)),this.inscripciones.length>0){let m=t?this.inscripciones.find(v=>v.id===t):null;this.seleccionarInscripcion(m??this.inscripciones[0],!0)}},error:a=>{n===this.inscripcionesReqToken&&(console.error("Error al cargar inscripciones:",a),this.inscripciones=[])},complete:()=>{n===this.inscripcionesReqToken&&(this.isLoadingInscripciones=!1)}})}seleccionarInscripcion(e,t=!1){this.inscripcionSeleccionada=e,this.materias=[],this.asignadas.clear(),this.califPorMateria.clear(),this.filterMateria="",this.cargarMateriasYAsignaciones(e.id),this.parseResolucionKey(),(!this.filtroAnioId||!this.filtroResolucion)&&!t&&z.default.fire("Filtros incompletos","Selecciona A\xF1o (Gesti\xF3n) y Resoluci\xF3n para cargar materias asignables. Mientras tanto, se muestran las asignadas actuales.","info")}syncCantidadMateriasAsignadas(e,t){this.inscripcionSeleccionada?.id===e&&(this.inscripcionSeleccionada=et(W({},this.inscripcionSeleccionada),{CantidadMateriasAsignadas:t})),this.inscripciones=(this.inscripciones??[]).map(n=>n.id===e?et(W({},n),{CantidadMateriasAsignadas:t}):n)}anioSeleccionadoTexto(){let e=this.filtroAnioId;return e&&((this.aniosOptions??[]).find(a=>Number(a?.id)===Number(e))?.Anio??"").toString().trim()||null}filtrarCalificacionesPorAnio(e){let t=this.filtroAnioId;if(!t)return e;let n=this.anioSeleccionadoTexto();return(e??[]).filter(a=>{let c=Number(a?.anios_id??a?.anio_id??a?.aniosId??a?.anioId??0);if(Number.isFinite(c)&&c>0)return c===Number(t);let m=(a?.Anio??a?.anio??"").toString().trim();return n&&m?m===n:!1})}pickString(e){return String(e??"").trim()}normalizeMeta(e){let t=(e??"").toString().trim();if(!t)return"";let n=t.toUpperCase();return n==="SIN RESOLUCION"||n==="SIN RESOLUCI\xD3N"?"":t}hydrateMateriasMeta(e){let t=Array.from(new Set((e??[]).filter(a=>Number.isFinite(a)&&a>0)));if(t.length===0)return;let n=++this.materiaMetaReqToken;for(let a of t)this.materiaMetaCache.has(a)||this._mat.Seleccionarmaterias(a).subscribe({next:c=>{if(n!==this.materiaMetaReqToken)return;let m=c?.data??c;if(!m)return;let v=this.pickString(m?.Anio)||this.pickString(m?.anio)||this.pickString(m?.plandeestudios?.Anio)||this.pickString(m?.plan?.Anio)||this.pickString(m?.Plan?.Anio),f=this.pickString(m?.Resolucion)||this.pickString(m?.resolucion)||this.pickString(m?.plandeestudios?.Resolucion)||this.pickString(m?.carrera?.Resolucion)||this.pickString(m?.Carrera?.Resolucion),C={anio:this.normalizeMeta(v)||void 0,resolucion:this.normalizeMeta(f)||void 0};this.materiaMetaCache.set(a,C);let S=(this.materias??[]).findIndex(w=>w.id===a);if(S>=0){let w=this.materias[S];this.materias=(this.materias??[]).map(y=>y.id===a?et(W({},y),{anio:C.anio??y.anio,resolucion:C.resolucion??y.resolucion}):y)}},error:()=>{}})}cargarMateriasYAsignaciones(e){if(this.parseResolucionKey(),!!this.filtroAnioId&&!!this.filtroResolucion&&!!this.filtroNivelCarrera){let a=++this.materiasReqToken;this.isLoadingMateriasAsignables=!0,this._mat.ObtenermateriasPorInfo(e,{all:this.mostrarTodasMaterias,anio_id:this.filtroAnioId??void 0,resolucion:this.filtroResolucion||void 0,nivel:this.filtroNivelCarrera||void 0}).subscribe({next:c=>{if(a!==this.materiasReqToken)return;let m=Array.isArray(c?.data)?c.data:[];this.materias=m.map(v=>{let f=(v?.NombreMateria??"").toString().trim()||`Materia #${v?.id}`,C=(v?.SiglaMateria??"").toString().trim()||void 0,S=(v?.Anio??"SIN ASIGNAR").toString().trim()||"SIN ASIGNAR",w=(v?.Resolucion??"SIN RESOLUCION").toString().trim()||"SIN RESOLUCION",y=(v?.LvlCurso??"SIN CURSO").toString().trim()||"SIN CURSO",$=(v?.Paralelo??"").toString().trim(),Q=$?`${y} ${$}`:y;return{id:Number(v?.id),categoria:Q,sigla:C,nombre:f,lvlCurso:y,paralelo:$,anio:S,resolucion:w}}).filter(v=>Number.isFinite(v.id))},error:c=>{a===this.materiasReqToken&&(console.error("Error al cargar materias:",c),this.materias=[])},complete:()=>{a===this.materiasReqToken&&(this.isLoadingMateriasAsignables=!1)}})}else this.materiasReqToken++,this.isLoadingMateriasAsignables=!1,this.materias=[];let n=++this.asignacionesReqToken;this.isLoadingAsignaciones=!0,this._calif.ObtenerCalificacionesPorInfo(e).subscribe({next:a=>{if(n!==this.asignacionesReqToken)return;let c=Array.isArray(a?.data)?a.data:[],m=this.filtrarCalificacionesPorAnio(c);this.asignadas.clear(),this.califPorMateria.clear();let v=[];for(let f of m){let C=Number(f?.materias_id??f?.materia_id);if(Number.isFinite(C)){this.asignadas.add(C),this.califPorMateria.set(C,f);let S=this.normalizeMeta(this.pickString(f?.Resolucion)),w=this.normalizeMeta(this.pickString(f?.Anio));if((!S||!w)&&v.push(C),!this.materias.some(y=>y.id===C)){let y=(f?.NombreMateria??"").toString().trim()||`Materia #${C}`,$=(f?.SiglaMateria??"").toString().trim()||void 0,Q=(f?.LvlCurso??"SIN CURSO").toString().trim()||"SIN CURSO",At=(f?.MateriaParalelo??"").toString().trim(),oe=this.pickString(f?.Anio)||"SIN ASIGNAR",kt=this.pickString(f?.Resolucion)||"SIN RESOLUCION",re=At?`${Q} ${At}`:Q;this.materias=[...this.materias,{id:C,categoria:re,sigla:$,nombre:y,lvlCurso:Q,paralelo:At,anio:oe,resolucion:kt}]}}}this.hydrateMateriasMeta(v),this.syncCantidadMateriasAsignadas(e,this.asignadas.size),this.rebuildDerivedViews()},error:a=>{n===this.asignacionesReqToken&&(console.error("Error al cargar asignaciones:",a),this.asignadas.clear(),this.califPorMateria.clear(),this.syncCantidadMateriasAsignadas(e,0),this.rebuildDerivedViews())},complete:()=>{n===this.asignacionesReqToken&&(this.isLoadingAsignaciones=!1)}})}materiasFiltradas(){let e=(this.filterMateria??"").trim().toLowerCase(),t=this.materias;if(this.inscripcionSeleccionada&&!this.mostrarTodasMaterias){let n=(this.inscripcionSeleccionada.Curso_Solicitado??"").toString().trim(),a=(this.inscripcionSeleccionada.Paralelo_Solicitado??"").toString().trim();n&&(t=t.filter(c=>this.asignadas.has(c.id)||(c.lvlCurso??"").toString().trim()===n),a&&(t=t.filter(c=>this.asignadas.has(c.id)||(c.paralelo??"").toString().trim()===a)))}return e&&(t=t.filter(n=>`${n.id} ${n.sigla??""} ${n.nombre} ${n.categoria} ${n.lvlCurso??""} ${n.paralelo??""}`.toLowerCase().includes(e))),this.selectedLvlCursos.size>0&&(t=t.filter(n=>this.selectedLvlCursos.has((n.lvlCurso??"").toString()))),this.selectedParalelos.size>0&&(t=t.filter(n=>this.selectedParalelos.has((n.paralelo??"").toString()))),t}lvlCursosDetectados(){return Array.from(new Set(this.materias.map(e=>(e.lvlCurso??"").toString()).filter(Boolean))).sort((e,t)=>e.localeCompare(t))}paralelosDetectados(){return Array.from(new Set(this.materias.map(e=>(e.paralelo??"").toString()).filter(e=>!!e))).sort((e,t)=>e.localeCompare(t))}isLvlCursoSeleccionado(e){return this.selectedLvlCursos.has(e)}toggleLvlCurso(e){this.selectedLvlCursos.has(e)?this.selectedLvlCursos.delete(e):this.selectedLvlCursos.add(e)}isParaleloSeleccionado(e){return this.selectedParalelos.has(e)}toggleParalelo(e){this.selectedParalelos.has(e)?this.selectedParalelos.delete(e):this.selectedParalelos.add(e)}categorias(){return Array.from(new Set(this.materiasFiltradas().map(e=>e.categoria))).sort((e,t)=>e.localeCompare(t))}materiasPorCategoria(e){return this.materiasFiltradas().filter(t=>t.categoria===e)}isAsignada(e){return this.asignadas.has(e)}toggleAsignacion(e,t){return k(this,null,function*(){if(t?.preventDefault(),!this.inscripcionSeleccionada)return;let n=this.inscripcionSeleccionada.id;this.isLoadingMateria[e.id]=!0;try{if(this.asignadas.has(e.id)){if(!(yield this.confirmarQuitarMateriaSiTieneCalificaciones(e)))return;yield new Promise((m,v)=>{this._calif.QuitarMateriaAEstudiante({infoestudiantesifas_id:n,materias_id:e.id}).subscribe({next:()=>m(),error:f=>v(f)})}),this.asignadas.delete(e.id),this.syncCantidadMateriasAsignadas(n,this.asignadas.size)}else yield new Promise((c,m)=>{this._calif.AsignarMateriaAEstudiante({infoestudiantesifas_id:n,materias_id:e.id,EstadoRegistroMateria:this.estadoRegistroMateriaParaAsignar(),forzar:!0}).subscribe({next:()=>c(),error:v=>m(v)})}),this.asignadas.add(e.id),this.syncCantidadMateriasAsignadas(n,this.asignadas.size);this.cargarMateriasYAsignaciones(n)}catch(a){console.error("Error al alternar asignaci\xF3n:",a)}finally{this.isLoadingMateria[e.id]=!1}})}onToggleMostrarTodasMaterias(){this.mostrarTodasMaterias=!this.mostrarTodasMaterias,this.inscripcionSeleccionada&&this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}fmtCal(e){return e==null||e===""?"NULL":String(e)}califDeMateria(e){return this.califPorMateria.get(e)}tieneCalificaciones(e){let t=this.califDeMateria(e);return t?this.camposCalificacion.some(({key:n})=>{let a=t?.[n];return a!=null&&a!==""}):!1}verCalificaciones(e,t){return k(this,null,function*(){t?.preventDefault(),t?.stopPropagation?.();let n=this.califDeMateria(e.id),a=`${e.sigla?e.sigla+" - ":""}${e.nombre}`,c=`
      <div style="text-align:left">
        <div><b>Materia:</b> ${this.escapeHtml(a)}</div>
        <div style="margin-top:8px">
          <table class="table table-sm" style="margin:0">
            <tbody>
              ${this.camposCalificacion.map(({key:m,label:v})=>{let f=this.fmtCal(n?.[m]);return`<tr><td style="width:45%"><b>${this.escapeHtml(v)}</b></td><td>${this.escapeHtml(f)}</td></tr>`}).join("")}
            </tbody>
          </table>
        </div>
      </div>
    `;yield z.default.fire({title:"Calificaciones",html:c,icon:"info",confirmButtonText:"Cerrar",width:720})})}verCalificacionesPorId(e,t){return k(this,null,function*(){let n=this.materias.find(a=>a.id===e);n&&(yield this.verCalificaciones(n,t))})}confirmarQuitarMateriaSiTieneCalificaciones(e){return k(this,null,function*(){if(!this.tieneCalificaciones(e.id))return!0;let t=`${e.sigla?e.sigla+" - ":""}${e.nombre}`;return!!(yield z.default.fire({title:"Confirmar",text:`Esta materia ya tiene calificaciones (${t}). \xBFSeguro que deseas quitarla?`,icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, quitar",cancelButtonText:"Cancelar"})).isConfirmed})}escapeHtml(e){return String(e??"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}tokensBusqueda(){let e=(this.filterEstudiante??"").toString().trim();if(!e)return[];let t=e.split(/\s+/).map(n=>n.trim()).filter(n=>n!=="");return Array.from(new Set(t)).sort((n,a)=>a.length-n.length)}highlightHtml(e){let t=this.escapeHtml(e??""),n=this.tokensBusqueda();if(n.length===0)return t;let a=t;for(let c of n){if(!c)continue;let m=new RegExp(this.escapeRegExp(c),"gi");a=a.replace(m,v=>`<strong class="fw-bold">${v}</strong>`)}return a}formatoCursoParalelo(e){let t=(e?.cursoSolicitado??"").toString().trim(),n=(e?.paraleloSolicitado??"").toString().trim();return!t&&!n?"":n?`${t} - ${n}`:t}ciSoloNumeros(e){return String(e??"").replace(/\D+/g,"")}ciEstudianteNumerico(){return this.ciSoloNumeros(this.estudianteSeleccionado?.ci??"")}institucionHistorialNombre(){let e=(this.perfilInstitucionNombre??"").toString().trim();if(e)return e;let t=(this.estudianteSeleccionado?.institucionNombre??"").toString().trim();if(t)return t;let n=(this.inscripcionSeleccionada?.institucionNombre??"").toString().trim();if(n)return n;if(this.esSuperAdmin&&this.filtroInstitucionId){let c=((this.carreras??[]).find(m=>Number(m?.instituciones_id??0)===Number(this.filtroInstitucionId))?.NombreInstitucion??"").toString().trim();if(c)return c}return""}califValor(e,t){let n=this.califDeMateria(e),a=n?n?.[t]:null;return a==null||a===""?"-":String(a)}estadoRegistroMateria(e){let t=this.califDeMateria(e),n=t?t?.EstadoRegistroMateria:null;return this.upperTrim(n)||"REGULAR"}materiaMetaSmall(e){let t=this.materias.find(f=>f.id===e),n=this.califDeMateria(e),a=this.materiaMetaCache.get(e),c=this.normalizeMeta(this.pickString(t?.anio))||this.normalizeMeta(this.pickString(n?.Anio))||this.normalizeMeta(this.pickString(a?.anio)),m=this.normalizeMeta(this.pickString(t?.resolucion))||this.normalizeMeta(this.pickString(n?.Resolucion))||this.normalizeMeta(this.pickString(a?.resolucion)),v=[];return c&&v.push(c),m&&v.push(m),v.join(" | ")}asignarCursoCompleto(){return k(this,null,function*(){if(this.inscripcionSeleccionada){if(this.parseResolucionKey(),!this.filtroAnioId||!this.filtroResolucion){yield z.default.fire({title:"Faltan filtros",text:"Selecciona A\xF1o y Resoluci\xF3n para asignaci\xF3n masiva.",icon:"warning",confirmButtonText:"Cerrar"});return}this.isBulkLoading=!0;try{yield new Promise((e,t)=>{this._calif.AsignarAnioResolucionCompleto({infoestudiantesifas_id:this.inscripcionSeleccionada.id,anio_id:this.filtroAnioId,resolucion:this.filtroResolucion,EstadoRegistroMateria:this.estadoRegistroMateriaParaAsignar()}).subscribe({next:()=>e(),error:n=>t(n)})}),this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}catch(e){console.error("Error al asignar curso completo:",e)}finally{this.isBulkLoading=!1}}})}asignarCategoriaCompleta(e,t){return k(this,null,function*(){if(t?.preventDefault(),t?.stopPropagation?.(),!this.inscripcionSeleccionada)return;let n=this.inscripcionSeleccionada.id;if(this.parseResolucionKey(),!this.filtroAnioId||!this.filtroResolucion){yield z.default.fire({title:"Faltan filtros",text:"Selecciona A\xF1o y Resoluci\xF3n para asignaci\xF3n masiva.",icon:"warning",confirmButtonText:"Cerrar"});return}let a=this.materiasPorCategoria(e);if(a.length===0)return;let c=a.map(C=>C.id);for(let C of c)this.isLoadingMateria[C]=!0;let m=(a[0]?.lvlCurso??"").toString().trim(),v=(a[0]?.paralelo??"").toString().trim(),f=v||null;this.isBulkLoading=!0;try{yield new Promise((C,S)=>{this._calif.AsignarCategoriaCompleta({infoestudiantesifas_id:n,curso:m,paralelo:f,forzar:!1,EstadoRegistroMateria:this.estadoRegistroMateriaParaAsignar()}).subscribe({next:()=>C(),error:w=>S(w)})}),this.cargarMateriasYAsignaciones(n)}catch(C){console.error("Error al asignar curso/paralelo (bulk):",C),yield z.default.fire({title:"Error",text:"No se pudo asignar el curso/paralelo.",icon:"error",confirmButtonText:"Cerrar"})}finally{this.isBulkLoading=!1;for(let C of c)this.isLoadingMateria[C]=!1}})}quitarCategoriaCompleta(e,t){return k(this,null,function*(){if(t?.preventDefault(),t?.stopPropagation?.(),!this.inscripcionSeleccionada)return;let n=this.inscripcionSeleccionada.id;if(this.parseResolucionKey(),!this.filtroAnioId||!this.filtroResolucion){yield z.default.fire({title:"Faltan filtros",text:"Selecciona A\xF1o y Resoluci\xF3n para desasignaci\xF3n masiva.",icon:"warning",confirmButtonText:"Cerrar"});return}let a=this.materiasPorCategoria(e);if(a.length===0)return;let c=a.filter(y=>this.asignadas.has(y.id));if(c.length===0)return;let m=c.some(y=>this.tieneCalificaciones(y.id));if(!(yield z.default.fire({title:"Confirmar",text:m?"Hay materias con calificaciones en este curso/paralelo. \xBFSeguro que deseas quitar todas sus asignaciones?":"\xBFSeguro que deseas quitar todas las asignaciones de este curso/paralelo?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, quitar",cancelButtonText:"Cancelar"})).isConfirmed)return;let f=a.map(y=>y.id);for(let y of f)this.isLoadingMateria[y]=!0;let C=(a[0]?.lvlCurso??"").toString().trim(),S=(a[0]?.paralelo??"").toString().trim(),w=S||null;this.isBulkLoading=!0;try{yield new Promise((y,$)=>{this._calif.QuitarCategoriaCompleta({infoestudiantesifas_id:n,curso:C,paralelo:w,forzar:!1}).subscribe({next:()=>y(),error:Q=>$(Q)})}),this.cargarMateriasYAsignaciones(n)}catch(y){console.error("Error al quitar curso/paralelo (bulk):",y),yield z.default.fire({title:"Error",text:"No se pudo quitar el curso/paralelo.",icon:"error",confirmButtonText:"Cerrar"})}finally{this.isBulkLoading=!1;for(let y of f)this.isLoadingMateria[y]=!1}})}quitarTodasAsignaciones(){return k(this,null,function*(){if(!this.inscripcionSeleccionada)return;let e=Array.from(this.asignadas).some(n=>this.tieneCalificaciones(n));if((yield z.default.fire({title:"Confirmar",text:e?"Hay materias con calificaciones. \xBFSeguro que deseas quitar todas las asignaciones?":"\xBFSeguro que deseas quitar todas las asignaciones?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, quitar todas",cancelButtonText:"Cancelar"})).isConfirmed){this.isBulkLoading=!0;try{yield new Promise((n,a)=>{this._calif.QuitarTodasLasMaterias({infoestudiantesifas_id:this.inscripcionSeleccionada.id}).subscribe({next:()=>n(),error:c=>a(c)})}),this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}catch(n){console.error("Error al quitar todas las asignaciones:",n)}finally{this.isBulkLoading=!1}}})}quitarAsignacionTabla(e){return k(this,null,function*(){let t=this.materias.find(n=>n.id===e);t&&(yield this.toggleAsignacion(t))})}tablaAsignaciones(){return this.tablaAsignacionesRows}};Ct.\u0275fac=function(t){return new(t||Ct)(A(Ae),A(Te),A(Me),A(xt),A(vt),A(Et),A(Zt),A(ft),A(ht))},Ct.\u0275cmp=it({type:Ct,selectors:[["app-asignadormateriasestudiantes"]],inputs:{modo:"modo",estudianteId:"estudianteId",nombreEstudiante:"nombreEstudiante",fotoEstudiante:"fotoEstudiante",sexoEstudiante:"sexoEstudiante",preferInfoId:"preferInfoId"},standalone:!1,features:[Ot],decls:43,vars:16,consts:[["sinEstudianteSeleccionado",""],["modalOtroComponentecalifhistorias",""],["sinCursosAsignados",""],[1,"container","mt-4"],["class","row",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"row","align-items-end","g-2","mb-3"],[1,"col-sm-3"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-calendar"],[1,"form-floating","flex-grow-1"],["id","filtroAnioGlobal",1,"form-select",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","filtroAnioGlobal"],[1,"bi","bi-bookmark"],["id","filtroResolucionGlobal",1,"form-select",3,"ngModelChange","change","ngModel"],["for","filtroResolucionGlobal"],[1,"col-sm-6","d-flex","justify-content-end"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],["class","card mb-3",4,"ngIf"],["class","row align-items-end g-2",4,"ngIf"],[1,"mt-2"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"lead","text-secondary","subtitulosGlobales"],[1,"col-12"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-center",2,"gap","16px"],[1,"d-flex","align-items-center",2,"gap","12px"],[2,"width","70px","height","70px","border-radius","50%","overflow","hidden","border","3px solid #0d6efd","display","flex","align-items","center","justify-content","center","background","#fff"],["style","width: 100%; height: 100%; object-fit: cover;",3,"src",4,"ngIf"],["style","width: 70px; height: 70px;",3,"options",4,"ngIf"],[1,"text-muted",2,"font-size","13px"],[1,"fw-bold",2,"font-size","18px"],[1,"d-flex","align-items-center",2,"gap","8px"],["class","badge bg-primary",4,"ngIf"],["class","badge bg-secondary",4,"ngIf"],[2,"width","100%","height","100%","object-fit","cover",3,"src"],[2,"width","70px","height","70px",3,"options"],[1,"badge","bg-primary"],[1,"badge","bg-secondary"],[1,"card","mb-3"],[1,"card-header","d-flex","align-items-center","justify-content-between","flex-wrap","gap-2"],["class","text-muted loading-inline",4,"ngIf"],[1,"row","align-items-end","g-2"],[1,"col-lg-8"],[1,"bi","bi-search"],["type","text","placeholder","Buscar pendiente",1,"form-control",3,"input","keyup.enter","value"],["type","button",1,"btn","btn-outline-primary",3,"click","disabled"],[1,"d-inline-flex","align-items-center","gap-2"],["width","22px","height","22px",3,"options",4,"ngIf"],["class","mt-2 d-flex align-items-center gap-2",4,"ngIf"],[1,"col-lg-4"],[1,"form-label"],["readonly","",1,"form-control",3,"value"],[1,"table-responsive"],[1,"table","table-sm","table-striped","align-middle","mb-0"],[2,"width","140px"],[3,"hidden",4,"ngFor","ngForOf"],[1,"text-muted","loading-inline"],["width","22px","height","22px",3,"options"],[1,"mt-2","d-flex","align-items-center","gap-2"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"text-muted"],[1,"text-center","py-3"],[1,"loading-row"],["width","34px","height","34px",3,"options"],[3,"hidden"],["type","button",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"col-sm-10"],[1,"mb-2"],[1,"input-group","buscador-estudiante"],["type","text","placeholder","Buscar estudiante",1,"form-control",3,"input","keyup.enter","ngClass","value"],["class","text-primary loading-inline",4,"ngIf"],[1,"mt-2","d-flex","flex-wrap","gap-2"],["class","btn btn-outline-secondary btn-sm",3,"active","disabled","hidden","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-sm-2","d-flex","justify-content-end","gap-2"],[1,"form-check","mt-2"],["type","checkbox","id","toggleModo",1,"form-check-input",3,"change"],["for","toggleModo",1,"form-check-label"],["class","form-check mt-2",4,"ngIf"],[1,"text-primary","loading-inline"],[1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled","hidden"],[3,"innerHTML"],[1,"small","text-muted"],[1,"small"],[1,"badge","bg-secondary","me-1"],[3,"innerHTML",4,"ngIf"],["class","small text-muted",4,"ngIf"],["type","checkbox","id","toggleDetalleCalifGeneral",1,"form-check-input",3,"ngModelChange","ngModel"],["for","toggleDetalleCalifGeneral",1,"form-check-label"],[1,"seleccion-resumen"],[1,"seleccion-titulo"],[1,"fw-semibold"],["class","seleccion-extra",4,"ngIf","ngIfElse"],[1,"seleccion-extra"],["class","badge bg-success",4,"ngFor","ngForOf"],[1,"badge","bg-success"],["class","loading-inline text-muted",4,"ngIf"],["class","text-muted",4,"ngIf"],["class","d-flex align-items-center justify-content-between flex-wrap gap-2",4,"ngIf"],[1,"loading-inline","text-muted"],["width","26px","height","26px",3,"options"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap","gap-2"],[1,"text-success","m-0"],["type","button","title","Ver historial (califhistorias) por CI",1,"btn","btn-outline-primary","btn-sm","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],["class","d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap","gap-2","mb-2"],["class","form-check form-switch m-0",4,"ngIf"],["type","button","class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"form-check","form-switch","m-0"],["type","checkbox","id","toggleDetalleCalifEst",1,"form-check-input",3,"ngModelChange","ngModel"],["for","toggleDetalleCalifEst",1,"form-check-label","small","text-muted"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"table","align-middle","table-hover","table-sm"],["class","text-center",4,"ngIf"],[1,"text-center"],[1,"table-group-divider"],[1,"text-center","text-muted","py-3"],[3,"hidden",4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-center","text-muted"],["class","text-muted","style","font-size: 11px; line-height: 1.1;",4,"ngIf"],[1,"text-muted",2,"font-size","11px","line-height","1.1"],["class","alert alert-light d-flex align-items-center justify-content-between flex-wrap gap-2",4,"ngIf"],[1,"row","mb-2"],[1,"col-sm-6"],[1,"bi","bi-filter"],["type","text","placeholder","Buscar materia",1,"form-control",3,"input","value"],[1,"col-sm-6","d-flex","justify-content-end","flex-wrap","gap-2","mt-2","mt-sm-0"],[1,"form-check","mt-1"],["type","checkbox","id","toggleCategorias",1,"form-check-input",3,"change","checked"],["for","toggleCategorias",1,"form-check-label"],["type","checkbox","id","toggleTodas",1,"form-check-input",3,"change","checked"],["for","toggleTodas",1,"form-check-label"],[1,"input-group","input-group-sm",2,"width","260px"],[1,"bi","bi-journal-check"],["id","tipoRegistroMateriaSelect",1,"form-select",3,"ngModelChange","ngModel","disabled"],[3,"ngValue",4,"ngIf"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],["for","tipoRegistroMateriaSelect"],[1,"d-flex","align-items-center","flex-wrap","gap-1"],[1,"text-muted","me-1"],["type","button","class","btn btn-outline-primary btn-sm",3,"active","click",4,"ngFor","ngForOf"],["type","button","class","btn btn-outline-secondary btn-sm",3,"active","click",4,"ngFor","ngForOf"],["class","btn btn-outline-success btn-sm",3,"disabled","click",4,"ngIf"],["class","btn btn-outline-danger btn-sm",3,"disabled","click",4,"ngIf"],[1,"alert","alert-light","d-flex","align-items-center","justify-content-between","flex-wrap","gap-2"],[3,"ngValue","disabled"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"btn","btn-outline-success","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","justify-content-between","mt-3","gap-2"],[1,"m-0","flex-grow-1","text-center"],[1,"d-flex","align-items-center","gap-2"],["type","button","title","Asigna todas las materias de este curso/paralelo",1,"btn","btn-outline-success","btn-sm",3,"click","disabled"],["type","button","title","Quita todas las materias asignadas de este curso/paralelo",1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],[1,"d-flex","flex-wrap"],["class","list-group-item col-sm-3 custom-border position-relative",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"list-group-item","col-sm-3","custom-border","position-relative",3,"ngClass"],["type","button",1,"btn","btn-sm","w-100","text-start",3,"click","disabled"],[1,"me-2","badge",3,"ngClass"],[1,"small","text-muted","mt-1"],["class","small text-muted mt-2 d-flex align-items-start justify-content-between gap-2",4,"ngIf"],["class","position-absolute top-50 start-50 translate-middle",4,"ngIf"],[1,"small","text-muted","mt-2","d-flex","align-items-start","justify-content-between","gap-2"],[1,"d-flex","flex-column"],["class","ms-1",4,"ngIf"],[1,"mt-1"],[1,"ms-1"],["type","button","title","Ver detalle",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"position-absolute","top-50","start-50","translate-middle"],[1,"form-select","form-select-sm",3,"change","click","ngModel","ngModelOptions","disabled"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[1,"modal-body"],[3,"modo","ciBusqueda","institucion"]],template:function(t,n){if(t&1){let a=b();o(0,"div",3),g(1,Ye,6,0,"div",4)(2,ei,15,5,"div",4),s(),o(3,"div",5)(4,"div",6)(5,"div",7)(6,"div",8)(7,"div",9)(8,"span",10),x(9,"i",11),s(),o(10,"div",12)(11,"select",13),O("ngModelChange",function(m){return p(a),F(n.filtroAnioId,m)||(n.filtroAnioId=m),_(m)}),h("change",function(){return p(a),_(n.onCambioFiltrosAsignacion())}),o(12,"option",14),d(13,"-- Seleccione --"),s(),g(14,ii,2,2,"option",15),s(),o(15,"label",16),d(16,"A\xF1o (Gesti\xF3n)"),s()()()(),o(17,"div",8)(18,"div",9)(19,"span",10),x(20,"i",17),s(),o(21,"div",12)(22,"select",18),O("ngModelChange",function(m){return p(a),F(n.filtroResolucionKey,m)||(n.filtroResolucionKey=m),_(m)}),h("change",function(){return p(a),_(n.onCambioFiltrosAsignacion())}),o(23,"option",14),d(24,"-- Seleccione --"),s(),g(25,ni,2,2,"option",15),s(),o(26,"label",19),d(27,"Resoluci\xF3n"),s()()()(),o(28,"div",20)(29,"button",21),h("click",function(){return p(a),_(n.togglePendientes())}),d(30),s()()(),g(31,mi,52,11,"div",22)(32,Si,25,13,"div",23),o(33,"div",24),g(34,Ai,10,3,"ng-container",25)(35,Ti,2,1,"ng-template",null,0,M),s(),x(37,"hr"),g(38,Ni,6,4,"div",26)(39,Fi,1,0,"hr",26)(40,ra,4,3,"div",26),s()(),g(41,la,6,3,"ng-template",null,1,M)}if(t&2){let a=j(36);r(),l("ngIf",n.modo!=="estudiante"),r(),l("ngIf",n.modo==="estudiante"),r(9),N("ngModel",n.filtroAnioId),r(),l("ngValue",null),r(2),l("ngForOf",n.aniosOptions),r(8),N("ngModel",n.filtroResolucionKey),r(),l("ngValue",""),r(2),l("ngForOf",n.resolucionOptions),r(5),I(" ",n.verPendientes?"Ocultar pendientes":"Ver pendientes de asignaci\xF3n"," "),r(),l("ngIf",n.verPendientes&&n.modo!=="estudiante"),r(),l("ngIf",n.modo!=="estudiante"),r(2),l("ngIf",n.estudianteSeleccionado)("ngIfElse",a),r(4),l("ngIf",n.estudianteSeleccionado),r(),l("ngIf",n.inscripcionSeleccionada),r(),l("ngIf",n.inscripcionSeleccionada)}},dependencies:[st,ot,rt,pt,_t,Ut,mt,dt,ut,gt,bt],styles:[".custom-border[_ngcontent-%COMP%]{border:1px solid #e6e6e6;border-radius:10px;padding:8px;background:#fff;transition:background-color .16s ease,border-color .16s ease}.custom-border[_ngcontent-%COMP%]:hover{border-color:#2563eb;background:#eaf1ff}.checked[_ngcontent-%COMP%]{border-color:#22c55e!important;background:#f3fff5}.btn.active[_ngcontent-%COMP%]{border-color:#2563eb;background:#eaf1ff;color:#0335a0;font-weight:700}.loading-row[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:10px}.loading-inline[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px}.buscador-estudiante[_ngcontent-%COMP%]{max-width:100%}.seleccion-resumen[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.08);background:#0d6efd0f;border-radius:12px;padding:10px 12px;display:flex;flex-wrap:wrap;align-items:center;gap:10px}.seleccion-titulo[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:10px}.seleccion-extra[_ngcontent-%COMP%]{display:inline-flex;align-items:center;flex-wrap:wrap;gap:8px}"]});var St=Ct;var ha=["modalOtroComponentecalifhistorias"],xa=["modalRegistroEstudianteCompleto"],va=["modalEsperaFotoCelular"],Ea=["modalVincularCelular"],ba=["modalEsperaFotoPagoCelular"],Ca=["modalgestioninfoestudiantesifas"],Sa=["modalOtroComponenteEstadisticas"],Ia=["modalDetalleEstadisticas"],ya=["modalOtroComponenteAsignacionesEstudiantes"],wa=["modalListasPreliminaresCursos"],Aa=["modalOtroComponenteRegistrarpagos"],U=(i,e)=>({"bi-caret-up":i,"bi-caret-down":e}),Ta=i=>({active:i}),ze=(i,e,t)=>({"bg-success":i,"bg-secondary":e,"bg-danger":t}),Ma=()=>({standalone:!0}),ne=()=>[],Va=(i,e)=>({top:i,left:e});function Pa(i,e){if(i&1&&x(0,"ng-lottie",59),i&2){let t=u(2);l("options",t.sexoEstudiante==="MASCULINO"?t._tools.optionsavatarmasculinoanimado:t._tools.optionsavatarfemenino2)}}function ka(i,e){if(i&1&&x(0,"img",60),i&2){let t=u(2);l("src",t._tools.ruta+t.fotoEstudiante,P)}}function Na(i,e){if(i&1&&(o(0,"div",58),me(1,Pa,1,1,"ng-lottie",59)(2,ka,1,1,"img",60),s()),i&2){let t=u();r(),pe(t.fotoEstudiante==null||t.fotoEstudiante==""?1:2)}}function Fa(i,e){if(i&1&&(o(0,"option",61),d(1),s()),i&2){let t=e.$implicit;l("ngValue",t.id),r(),E(t.Anio)}}function Oa(i,e){if(i&1){let t=b();o(0,"div",40)(1,"input",76),O("ngModelChange",function(a){p(t);let c=u(2);return F(c.incluirEspecialidadListas,a)||(c.incluirEspecialidadListas=a),_(a)}),s(),o(2,"label",77),d(3,"Incluir especialidad"),s()()}if(i&2){let t=u(2);r(),N("ngModel",t.incluirEspecialidadListas)}}function Ra(i,e){i&1&&(o(0,"div",78)(1,"div",79)(2,"span",80),d(3,"Cargando..."),s()(),o(4,"span",81),d(5,"Cargando cursos..."),s()())}function Da(i,e){i&1&&(o(0,"div",82),d(1," No se encontraron cursos para el filtro actual. "),s())}function La(i,e){if(i&1){let t=b();o(0,"tr")(1,"td",47),d(2),s(),o(3,"td",47)(4,"input",90),O("ngModelChange",function(a){let c=p(t).$implicit;return F(c.selected,a)||(c.selected=a),_(a)}),s()(),o(5,"td"),d(6),s(),o(7,"td",47),d(8),s(),o(9,"td",47),d(10),s()()}if(i&2){let t=e.$implicit,n=e.index;r(2),E(n+1),r(2),N("ngModel",t.selected),r(2),E(t.curso),r(2),E(t.paraleloLabel),r(2),E(t.total)}}function $a(i,e){if(i&1&&(o(0,"div",83)(1,"table",84)(2,"thead")(3,"tr")(4,"th",85),d(5,"#"),s(),o(6,"th",86),d(7,"Sel"),s(),o(8,"th"),d(9,"Curso"),s(),o(10,"th",87),d(11,"Paralelo"),s(),o(12,"th",88),d(13,"Total"),s()()(),o(14,"tbody"),g(15,La,11,5,"tr",89),s()()()),i&2){let t=u(2);r(15),l("ngForOf",t.cursosParaListas)}}function Ba(i,e){i&1&&(o(0,"span"),d(1,"Generar PDF"),s())}function ja(i,e){i&1&&(o(0,"span"),d(1,"Generando..."),s())}function Ua(i,e){if(i&1){let t=b();o(0,"div",62)(1,"h5",63),d(2,"Generar listas preliminares por curso"),s(),o(3,"button",64),h("click",function(){let a=p(t).$implicit;return _(a.dismiss("close"))}),s()(),o(4,"div",65)(5,"div",66)(6,"div",67)(7,"button",68),h("click",function(){p(t);let a=u();return _(a.seleccionarTodosCursosListas(!0))}),d(8,"Seleccionar todos"),s(),o(9,"button",68),h("click",function(){p(t);let a=u();return _(a.seleccionarTodosCursosListas(!1))}),d(10,"Limpiar"),s()(),g(11,Oa,4,1,"div",69),s(),g(12,Ra,6,0,"div",70)(13,Da,2,0,"div",71)(14,$a,16,1,"div",72),s(),o(15,"div",73)(16,"button",74),h("click",function(){let a=p(t).$implicit;return _(a.dismiss("cancel"))}),d(17,"Cancelar"),s(),o(18,"button",75),h("click",function(){let a=p(t).$implicit,c=u();return _(c.generarListasPreliminaresSeleccionadas(a))}),g(19,Ba,2,0,"span",51)(20,ja,2,0,"span",51),s()()}if(i&2){let t=u();r(11),l("ngIf",t.habilitarCamposMusicales),r(),l("ngIf",t.isLoadingCursosParaListas),r(),l("ngIf",!t.isLoadingCursosParaListas&&t.cursosParaListas.length===0),r(),l("ngIf",!t.isLoadingCursosParaListas&&t.cursosParaListas.length>0),r(4),l("disabled",t.isGenerandoListasPreliminares||t.cursosSeleccionadosCount()===0),r(),l("ngIf",!t.isGenerandoListasPreliminares),r(),l("ngIf",t.isGenerandoListasPreliminares)}}function za(i,e){if(i&1&&x(0,"i",91),i&2){let t=u(2);l("ngClass",T(1,U,t.getSortDirinfoestudiantesifas("NombreInstitucion")==="asc",t.getSortDirinfoestudiantesifas("NombreInstitucion")==="desc"))}}function Ga(i,e){if(i&1){let t=b();o(0,"th",49),h("click",function(a){p(t);let c=u();return _(c.sortByinfoestudiantesifas("NombreInstitucion",a))}),d(1," NombreInstitucion "),g(2,za,1,4,"i",50),s()}if(i&2){let t=u();r(2),l("ngIf",t.isSortedinfoestudiantesifas("NombreInstitucion"))}}function qa(i,e){if(i&1&&x(0,"i",91),i&2){let t=u();l("ngClass",T(1,U,t.getSortDirinfoestudiantesifas("Anio")==="asc",t.getSortDirinfoestudiantesifas("Anio")==="desc"))}}function Ha(i,e){if(i&1&&x(0,"i",91),i&2){let t=u();l("ngClass",T(1,U,t.getSortDirinfoestudiantesifas("FechInsc")==="asc",t.getSortDirinfoestudiantesifas("FechInsc")==="desc"))}}function Qa(i,e){if(i&1&&x(0,"i",91),i&2){let t=u(2);l("ngClass",T(1,U,t.getSortDirinfoestudiantesifas("Ap_Paterno")==="asc",t.getSortDirinfoestudiantesifas("Ap_Paterno")==="desc"))}}function Wa(i,e){if(i&1){let t=b();o(0,"th",49),h("click",function(a){p(t);let c=u();return _(c.sortByinfoestudiantesifas("Ap_Paterno",a))}),d(1," Ap_Paterno "),g(2,Qa,1,4,"i",50),s()}if(i&2){let t=u();r(2),l("ngIf",t.isSortedinfoestudiantesifas("Ap_Paterno"))}}function Ka(i,e){if(i&1&&x(0,"i",91),i&2){let t=u(2);l("ngClass",T(1,U,t.getSortDirinfoestudiantesifas("Ap_Materno")==="asc",t.getSortDirinfoestudiantesifas("Ap_Materno")==="desc"))}}function Ya(i,e){if(i&1){let t=b();o(0,"th",49),h("click",function(a){p(t);let c=u();return _(c.sortByinfoestudiantesifas("Ap_Materno",a))}),d(1," Ap_Materno "),g(2,Ka,1,4,"i",50),s()}if(i&2){let t=u();r(2),l("ngIf",t.isSortedinfoestudiantesifas("Ap_Materno"))}}function Xa(i,e){if(i&1&&x(0,"i",91),i&2){let t=u(2);l("ngClass",T(1,U,t.getSortDirinfoestudiantesifas("Nombre")==="asc",t.getSortDirinfoestudiantesifas("Nombre")==="desc"))}}function Za(i,e){if(i&1){let t=b();o(0,"th",49),h("click",function(a){p(t);let c=u();return _(c.sortByinfoestudiantesifas("Nombre",a))}),d(1," Nombre "),g(2,Xa,1,4,"i",50),s()}if(i&2){let t=u();r(2),l("ngIf",t.isSortedinfoestudiantesifas("Nombre"))}}function Ja(i,e){if(i&1&&x(0,"i",91),i&2){let t=u(2);l("ngClass",T(1,U,t.getSortDirinfoestudiantesifas("CI")==="asc",t.getSortDirinfoestudiantesifas("CI")==="desc"))}}function ts(i,e){if(i&1){let t=b();o(0,"th",49),h("click",function(a){p(t);let c=u();return _(c.sortByinfoestudiantesifas("CI",a))}),d(1," Carnet "),g(2,Ja,1,4,"i",50),s()}if(i&2){let t=u();r(2),l("ngIf",t.isSortedinfoestudiantesifas("CI"))}}function es(i,e){if(i&1&&x(0,"i",91),i&2){let t=u();l("ngClass",T(1,U,t.getSortDirinfoestudiantesifas("Categoria")==="asc",t.getSortDirinfoestudiantesifas("Categoria")==="desc"))}}function is(i,e){if(i&1&&x(0,"i",91),i&2){let t=u();l("ngClass",T(1,U,t.getSortDirinfoestudiantesifas("Curso_Solicitado")==="asc",t.getSortDirinfoestudiantesifas("Curso_Solicitado")==="desc"))}}function ns(i,e){if(i&1&&x(0,"i",91),i&2){let t=u();l("ngClass",T(1,U,t.getSortDirinfoestudiantesifas("Paralelo_Solicitado")==="asc",t.getSortDirinfoestudiantesifas("Paralelo_Solicitado")==="desc"))}}function as(i,e){if(i&1&&x(0,"i",91),i&2){let t=u();l("ngClass",T(1,U,t.getSortDirinfoestudiantesifas("Turno")==="asc",t.getSortDirinfoestudiantesifas("Turno")==="desc"))}}function ss(i,e){if(i&1&&x(0,"i",91),i&2){let t=u();l("ngClass",T(1,U,t.getSortDirinfoestudiantesifas("CantidadMateriasAsignadas")==="asc",t.getSortDirinfoestudiantesifas("CantidadMateriasAsignadas")==="desc"))}}function os(i,e){if(i&1&&x(0,"i",91),i&2){let t=u();l("ngClass",T(1,U,t.getSortDirinfoestudiantesifas("Verificacion")==="asc",t.getSortDirinfoestudiantesifas("Verificacion")==="desc"))}}function rs(i,e){if(i&1&&(o(0,"tr")(1,"td",47)(2,"div",79)(3,"span",80),d(4,"Cargando..."),s()()()()),i&2){let t=u();r(),B("colspan",t.getTableColspan())}}function ls(i,e){if(i&1&&(o(0,"tr")(1,"td",92)(2,"div",93)(3,"div",94),d(4,"No hay datos disponibles"),s(),x(5,"ng-lottie",95),s()()()),i&2){let t=u();r(),B("colspan",t.getTableColspan()),r(4),l("options",t._tools.optionsnohayinformacion)}}function cs(i,e){if(i&1&&(o(0,"td"),d(1),s()),i&2){let t=u().$implicit;r(),E(t.NombreInstitucion)}}function ds(i,e){if(i&1&&(o(0,"td"),x(1,"span",98),s()),i&2){let t=u().$implicit,n=u();r(),l("innerHTML",n.resaltarTexto(t.Ap_Paterno),V)}}function us(i,e){if(i&1&&(o(0,"td"),x(1,"span",98),s()),i&2){let t=u().$implicit,n=u();r(),l("innerHTML",n.resaltarTexto(t.Ap_Materno),V)}}function ms(i,e){if(i&1&&(o(0,"td"),x(1,"span",98),s()),i&2){let t=u().$implicit,n=u();r(),l("innerHTML",n.resaltarTexto(t.Nombre),V)}}function ps(i,e){if(i&1&&(o(0,"td"),x(1,"span",98),s()),i&2){let t=u().$implicit,n=u();r(),l("innerHTML",n.resaltarTexto(t.CI),V)}}function _s(i,e){if(i&1&&x(0,"img",108),i&2){let t=u(2);l("src",t._tools.rutabtniconsanimaciones+"asignacion.svg",P)}}function fs(i,e){if(i&1&&x(0,"ng-lottie",109),i&2){let t=u(2);l("options",t._tools.optionssubgestion)}}function gs(i,e){if(i&1&&x(0,"img",108),i&2){let t=u(2);l("src",t._tools.rutabtniconsanimaciones+"pdf.svg",P)}}function hs(i,e){if(i&1&&x(0,"ng-lottie",109),i&2){let t=u(2);l("options",t._tools.optionsarchivopdf)}}function xs(i,e){if(i&1&&x(0,"img",108),i&2){let t=u(2);l("src",t._tools.rutabtniconsanimaciones+"historial.svg",P)}}function vs(i,e){if(i&1&&x(0,"ng-lottie",109),i&2){let t=u(2);l("options",t._tools.optionsarchive)}}function Es(i,e){if(i&1&&x(0,"img",108),i&2){let t=u(3);l("src",t._tools.rutabtniconsanimaciones+"money.svg",P)}}function bs(i,e){if(i&1&&x(0,"ng-lottie",109),i&2){let t=u(3);l("options",t._tools.optionsmoney)}}function Cs(i,e){if(i&1){let t=b();o(0,"button",110),h("click",function(){p(t);let a=u().$implicit,c=u();return _(c.abrirRegistroPagoDesdeInscripcion(a))})("mouseenter",function(){p(t);let a=u().$implicit,c=u();return _(c._tools.hoverBotonMap["visualizacioninfoestudiantesifas1-"+a.id]=!0)})("mouseleave",function(){p(t);let a=u().$implicit,c=u();return _(c._tools.hoverBotonMap["visualizacioninfoestudiantesifas1-"+a.id]=!1)}),g(1,Es,1,1,"img",101)(2,bs,1,1,"ng-lottie",102),s()}if(i&2){let t=u().$implicit,n=u();r(),l("ngIf",!n._tools.hoverBotonMap["visualizacioninfoestudiantesifas1-"+t.id]),r(),l("ngIf",n._tools.hoverBotonMap["visualizacioninfoestudiantesifas1-"+t.id])}}function Ss(i,e){if(i&1&&x(0,"img",108),i&2){let t=u(2);l("src",t._tools.rutabtniconsanimaciones+"pencil.svg",P)}}function Is(i,e){if(i&1&&x(0,"ng-lottie",109),i&2){let t=u(2);l("options",t._tools.optionsEditar)}}function ys(i,e){if(i&1&&x(0,"img",108),i&2){let t=u(2);l("src",t._tools.rutabtniconsanimaciones+"delete.svg",P)}}function ws(i,e){if(i&1&&x(0,"ng-lottie",109),i&2){let t=u(2);l("options",t._tools.optionsEliminar)}}function As(i,e){if(i&1){let t=b();o(0,"tr",96),h("contextmenu",function(a){let c=p(t).$implicit,m=u();return _(m.abrirMenuinfoestudiantesifas(a,c))}),o(1,"td",47),d(2),s(),g(3,cs,2,1,"td",51),o(4,"td")(5,"button",97),h("click",function(a){let c=p(t).$implicit,m=u();return _(m.abrirHistorialDesdeInscripcion(c,a))}),d(6),s()(),o(7,"td"),d(8),q(9,"dateFormat"),s(),g(10,ds,2,1,"td",51)(11,us,2,1,"td",51)(12,ms,2,1,"td",51)(13,ps,2,1,"td",51),o(14,"td"),x(15,"span",98),s(),o(16,"td"),x(17,"span",98),s(),o(18,"td"),x(19,"span",98),s(),o(20,"td"),x(21,"span",98),s(),o(22,"td",47),x(23,"span",98),s(),o(24,"td"),x(25,"span",98),s(),o(26,"td",99)(27,"button",100),h("click",function(){let a=p(t).$implicit,c=u();return _(c.abrirAsignadorMateriasDesdeInscripcion(a))})("mouseenter",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["visualizacioninfoestudiantesifas-"+a.id]=!0)})("mouseleave",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["visualizacioninfoestudiantesifas-"+a.id]=!1)}),g(28,_s,1,1,"img",101)(29,fs,1,1,"ng-lottie",102),s(),o(30,"button",103),h("click",function(){let a=p(t).$implicit,c=u();return _(c.generarReporteInscripcion(a))})("mouseenter",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["visualizacioninfoestudiantesifaspdf-"+a.id]=!0)})("mouseleave",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["visualizacioninfoestudiantesifaspdf-"+a.id]=!1)}),g(31,gs,1,1,"img",101)(32,hs,1,1,"ng-lottie",102),s(),o(33,"button",104),h("click",function(a){let c=p(t).$implicit,m=u();return _(m.abrirHistorialDesdeInscripcion(c,a))})("mouseenter",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["visualizacioninfoestudiantesifas12-"+a.id]=!0)})("mouseleave",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["visualizacioninfoestudiantesifas12-"+a.id]=!1)}),g(34,xs,1,1,"img",101)(35,vs,1,1,"ng-lottie",102),s(),g(36,Cs,3,2,"button",105),o(37,"button",106),h("click",function(){let a=p(t).$implicit,c=u();return _(c.Seleccionarinfoestudiantesifas(a.id))})("mouseenter",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["edicioninfoestudiantesifas-"+a.id]=!0)})("mouseleave",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["edicioninfoestudiantesifas-"+a.id]=!1)}),g(38,Ss,1,1,"img",101)(39,Is,1,1,"ng-lottie",102),s(),o(40,"button",107),h("click",function(){let a=p(t).$implicit,c=u();return _(c.Eliminarinfoestudiantesifas(a.id))})("mouseenter",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["eliminacioninfoestudiantesifas-"+a.id]=!0)})("mouseleave",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["eliminacioninfoestudiantesifas-"+a.id]=!1)}),g(41,ys,1,1,"img",101)(42,ws,1,1,"ng-lottie",102),s()()()}if(i&2){let t=e.$implicit,n=e.index,a=u();r(2),E((a.paginainfoestudiantesifas-1)*a.pageSizeinfoestudiantesifas+(n+1)),r(),l("ngIf",a.esSuperAdmin),r(2),l("ngClass",Mt(28,Ta,t.seleccionado)),r(),I(" ",t.Anio+" | "+(t.Resolucion||"INACTIVO")," "),r(2),E(H(9,26,t.FechInsc)),r(2),l("ngIf",!a.estudianteId),r(),l("ngIf",!a.estudianteId),r(),l("ngIf",!a.estudianteId),r(),l("ngIf",!a.estudianteId),r(2),l("innerHTML",a.resaltarTexto(t.Categoria),V),r(2),l("innerHTML",a.resaltarTexto(t.Curso_Solicitado),V),r(2),l("innerHTML",a.resaltarTexto(t.Paralelo_Solicitado==null?" ":t.Paralelo_Solicitado),V),r(2),l("innerHTML",a.resaltarTexto(t.Turno),V),r(2),l("innerHTML",a.resaltarTexto(t.CantidadMateriasAsignadas),V),r(2),l("innerHTML",a.resaltarTexto(t.Verificacion),V),r(3),l("ngIf",!a._tools.hoverBotonMap["visualizacioninfoestudiantesifas-"+t.id]),r(),l("ngIf",a._tools.hoverBotonMap["visualizacioninfoestudiantesifas-"+t.id]),r(2),l("ngIf",!a._tools.hoverBotonMap["visualizacioninfoestudiantesifaspdf-"+t.id]),r(),l("ngIf",a._tools.hoverBotonMap["visualizacioninfoestudiantesifaspdf-"+t.id]),r(2),l("ngIf",!a._tools.hoverBotonMap["visualizacioninfoestudiantesifas12-"+t.id]),r(),l("ngIf",a._tools.hoverBotonMap["visualizacioninfoestudiantesifas12-"+t.id]),r(),l("ngIf",a.habilitarSistemaPagosCarreras),r(2),l("ngIf",!a._tools.hoverBotonMap["edicioninfoestudiantesifas-"+t.id]),r(),l("ngIf",a._tools.hoverBotonMap["edicioninfoestudiantesifas-"+t.id]),r(2),l("ngIf",!a._tools.hoverBotonMap["eliminacioninfoestudiantesifas-"+t.id]),r(),l("ngIf",a._tools.hoverBotonMap["eliminacioninfoestudiantesifas-"+t.id])}}function Ts(i,e){if(i&1&&(o(0,"option",111),d(1),s()),i&2){let t=e.$implicit;l("value",t),r(),I("",t," por p\xE1gina")}}function Ms(i,e){if(i&1&&(o(0,"div",22)(1,"div",154),x(2,"input",155),o(3,"label"),d(4,"Instituci\xF3n"),s(),o(5,"div",128),d(6,"Este campo es obligatorio*"),s()()()),i&2){let t=u(2);r(2),l("ngClass",t.ValidacioninfoestudiantesifasxElemento("instituciones_id"))}}function Vs(i,e){if(i&1&&(o(0,"div"),x(1,"img",156),s()),i&2){let t,n=u(2);r(),l("src",n._tools.ruta+((t=n.newinfoestudiantesifas.get("FotoPago"))==null?null:t.value),P)}}function Ps(i,e){if(i&1&&(o(0,"div",22)(1,"div",94),d(2,"NO SE DISPONE DE FOTO COMPROBANTE DE PAGO EN DIGITAL"),s(),x(3,"ng-lottie",157),s()),i&2){let t=u(2);r(3),l("options",t._tools.optionsmoney)}}function ks(i,e){if(i&1){let t=b();o(0,"div",158)(1,"div")(2,"div",159),d(3,"Esperando FotoPago del celular..."),s(),o(4,"div",160),d(5),s()(),o(6,"button",161),h("click",function(){p(t);let a=u(2);return _(a.cancelarEsperaCaptura())}),d(7,"Cancelar"),s()()}if(i&2){let t=u(2);r(5),I("Estado: ",t.capturaStatus||"PENDING",". Puedes seguir llenando el formulario.")}}function Ns(i,e){i&1&&(o(0,"div",174),x(1,"span",175),d(2," Buscando... "),s())}function Fs(i,e){if(i&1){let t=b();o(0,"div",168),h("click",function(){let a=p(t).$implicit,c=u(4);return _(c.seleccionarEstudiante(a))}),o(1,"div",176),x(2,"span",98),o(3,"small",94),d(4,"CI: "),x(5,"span",98),s()()()}if(i&2){let t=e.$implicit,n=u(4);r(2),l("innerHTML",n.resaltarNombreEnBuscadorEstudiante(t),V),r(3),l("innerHTML",n.resaltarCIEnBuscadorEstudiante(t.CI),V)}}function Os(i,e){if(i&1){let t=b();o(0,"div",174)(1,"div",177)(2,"button",178),h("click",function(a){return p(t),u(4).estudiantesPrevPage(),_(a.stopPropagation())}),d(3," Anterior "),s(),o(4,"span",170),d(5),s(),o(6,"button",178),h("click",function(a){return p(t),u(4).estudiantesNextPage(),_(a.stopPropagation())}),d(7," Siguiente "),s()()()}if(i&2){let t=u(4);r(2),l("disabled",t.estudiantesPage<=1),r(3),K("P\xE1gina ",t.estudiantesPage," de ",t.estudiantesTotalPages),r(),l("disabled",t.estudiantesPage>=t.estudiantesTotalPages)}}function Rs(i,e){if(i&1){let t=b();o(0,"div",167)(1,"div",168),h("click",function(){p(t);let a=u(3);return _(a.abrirRegistroEstudianteDesdeBuscador())}),o(2,"div",169)(3,"div")(4,"div",159),d(5,"\xBFNO ENCONTR\xD3 AL ESTUDIANTE?, REG\xCDSTRE SU INFO. PERSONAL."),s(),o(6,"div",170),d(7,"Click para registrar y continuar con la inscripci\xF3n."),s()(),o(8,"span",171),d(9,"REGISTRAR"),s()()(),g(10,Ns,3,0,"div",172)(11,Fs,6,2,"div",173)(12,Os,8,4,"div",172),s()}if(i&2){let t=u(3);r(10),l("ngIf",t.isBuscandoEstudiante),r(),l("ngForOf",t.estudiantesPaginados),r(),l("ngIf",!t.isBuscandoEstudiante&&((t.estudiantesFiltrados==null?null:t.estudiantesFiltrados.length)||0)>t.estudiantesPageSize)}}function Ds(i,e){if(i&1&&(o(0,"div"),x(1,"img",179),s()),i&2){let t=u(3);r(),l("src",t._tools.ruta+t.estudianteSeleccionado.Foto,P)}}function Ls(i,e){if(i&1&&(o(0,"div",22)(1,"div",94),d(2,"NO SE DISPONE DE FOTO DEL ESTUDIANTE"),s(),x(3,"ng-lottie",157),s()),i&2){let t=u(3);r(3),l("options",t._tools.optionsavatarmasculinoanimado)}}function $s(i,e){if(i&1){let t=b();o(0,"div",162)(1,"div",22)(2,"div",163)(3,"input",164),h("focus",function(){p(t);let a=u(2);return _(a.mostrarListaEstudiantes=!0)})("keyup.enter",function(){p(t);let a=u(2);return _(a.buscarEstudiantes())}),s(),o(4,"label"),d(5,"Buscar estudiante (CI / Apellidos / Nombre)"),s(),g(6,Rs,13,3,"div",165),s(),o(7,"div",166),g(8,Ds,2,1,"div",117)(9,Ls,4,1,"ng-template",null,12,M),s()()()}if(i&2){let t=j(10),n=u(2);r(3),l("formControl",n.estudianteInput),r(3),l("ngIf",n.mostrarListaEstudiantes&&(n.estudianteInput.value||"").toString().trim()!==""&&n.busquedaEstudiantesEjecutada),r(2),l("ngIf",n.estudianteSeleccionado==null?null:n.estudianteSeleccionado.Foto)("ngIfElse",t)}}function Bs(i,e){if(i&1&&(o(0,"option",180),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function js(i,e){if(i&1&&(o(0,"option",180),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function Us(i,e){if(i&1&&(o(0,"option",180),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function zs(i,e){if(i&1&&(o(0,"option",180),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function Gs(i,e){i&1&&(o(0,"small",189),d(1,"INACTIVO"),s())}function qs(i,e){if(i&1){let t=b();o(0,"div",168),h("click",function(){let a=p(t).$implicit,c=u(4);return _(c.seleccionarDocenteAdmin(a))}),o(1,"div",176)(2,"span"),d(3),s(),g(4,Gs,2,0,"small",188),s()()}if(i&2){let t=e.$implicit,n=u(4);Z("opacity",n.docenteInactivo(t)?"0.65":"1")("pointer-events",n.docenteInactivo(t)?"none":"auto"),G("disabled",n.docenteInactivo(t)),r(3),E(n.getNombreCompletoDocente(t)),r(),l("ngIf",n.docenteInactivo(t))}}function Hs(i,e){if(i&1&&(o(0,"div",186),g(1,qs,5,8,"div",187),s()),i&2){let t=u(3);r(),l("ngForOf",t.docentesFiltradosAdmin)}}function Qs(i,e){i&1&&(o(0,"small",189),d(1,"INACTIVO"),s())}function Ws(i,e){if(i&1){let t=b();o(0,"div",168),h("click",function(){let a=p(t).$implicit,c=u(4);return _(c.seleccionarDocentePC(a))}),o(1,"div",176)(2,"span"),d(3),s(),g(4,Qs,2,0,"small",188),s()()}if(i&2){let t=e.$implicit,n=u(4);Z("opacity",n.docenteInactivo(t)?"0.65":"1")("pointer-events",n.docenteInactivo(t)?"none":"auto"),G("disabled",n.docenteInactivo(t)),r(3),E(n.getNombreCompletoDocente(t)),r(),l("ngIf",n.docenteInactivo(t))}}function Ks(i,e){if(i&1&&(o(0,"div",186),g(1,Ws,5,8,"div",187),s()),i&2){let t=u(3);r(),l("ngForOf",t.docentesFiltradosPC)}}function Ys(i,e){i&1&&(o(0,"small",189),d(1,"INACTIVO"),s())}function Xs(i,e){if(i&1){let t=b();o(0,"div",168),h("click",function(){let a=p(t).$implicit,c=u(4);return _(c.seleccionarDocenteOtros(a))}),o(1,"div",176)(2,"span"),d(3),s(),g(4,Ys,2,0,"small",188),s()()}if(i&2){let t=e.$implicit,n=u(4);Z("opacity",n.docenteInactivo(t)?"0.65":"1")("pointer-events",n.docenteInactivo(t)?"none":"auto"),G("disabled",n.docenteInactivo(t)),r(3),E(n.getNombreCompletoDocente(t)),r(),l("ngIf",n.docenteInactivo(t))}}function Zs(i,e){if(i&1&&(o(0,"div",186),g(1,Xs,5,8,"div",187),s()),i&2){let t=u(3);r(),l("ngForOf",t.docentesFiltradosOtros)}}function Js(i,e){if(i&1){let t=b();o(0,"div",22)(1,"div",181)(2,"input",182),h("focus",function(){p(t);let a=u(2);return _(a.mostrarListaDocAdmin=!0)}),s(),o(3,"label"),d(4,"Docente (Especialidad)"),s(),g(5,Hs,2,1,"div",183),s(),o(6,"div",181)(7,"input",184),h("focus",function(){p(t);let a=u(2);return _(a.mostrarListaDocPC=!0)}),s(),o(8,"label"),d(9,"Docente Pr\xE1ctica de Conjuntos "),s(),g(10,Ks,2,1,"div",183),s(),o(11,"div",181)(12,"input",185),h("focus",function(){p(t);let a=u(2);return _(a.mostrarListaDocOtros=!0)}),s(),o(13,"label"),d(14,"Docente Instrumento Complementario"),s(),g(15,Zs,2,1,"div",183),s()()}if(i&2){let t=u(2);r(2),l("formControl",t.docAdminInput),r(3),l("ngIf",t.mostrarListaDocAdmin&&t.docAdminInput.value),r(2),l("formControl",t.docPCInput),r(3),l("ngIf",t.mostrarListaDocPC&&t.docPCInput.value),r(2),l("formControl",t.docOtrosInput),r(3),l("ngIf",t.mostrarListaDocOtros&&t.docOtrosInput.value)}}function to(i,e){if(i&1&&(o(0,"option",180),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function eo(i,e){if(i&1&&(o(0,"div",124)(1,"select",190)(2,"option",126),d(3,"Seleccione una opci\xF3n"),s(),g(4,to,2,3,"option",127),s(),o(5,"label"),d(6,"Instrumento Musical"),s(),o(7,"div",128),d(8,"Este campo es obligatorio*"),s()()),i&2){let t=u(2);r(),l("ngClass",t.ValidacioninfoestudiantesifasxElemento("InstrumentoMusical")),r(3),l("ngForOf",t.InstrumentoMusicalOptions)}}function io(i,e){if(i&1&&(o(0,"option",180),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function no(i,e){if(i&1&&(o(0,"div",124)(1,"select",191)(2,"option",126),d(3,"Seleccione una opci\xF3n"),s(),g(4,io,2,3,"option",127),s(),o(5,"label"),d(6,"Instrumento Musical Secundario"),s(),o(7,"div",128),d(8,"Este campo es obligatorio*"),s()()),i&2){let t=u(2);r(),l("ngClass",t.ValidacioninfoestudiantesifasxElemento("InstrumentoMusicalSecundario")),r(3),l("ngForOf",t.InstrumentoMusicalSecundarioOptions)}}function ao(i,e){if(i&1&&(o(0,"div",22)(1,"div",192)(2,"label"),d(3,"Observacion"),s(),x(4,"quill-editor",193),o(5,"div",128),d(6,"Este campo es obligatorio*"),s()(),o(7,"div",192)(8,"label"),d(9,"Anotaciones"),s(),x(10,"quill-editor",194),o(11,"div",128),d(12,"Este campo es obligatorio*"),s()(),o(13,"div",192)(14,"label"),d(15,"Notas"),s(),x(16,"quill-editor",195),o(17,"div",128),d(18,"Este campo es obligatorio*"),s()()()),i&2){let t=u(2);r(4),l("modules",t.modulesQuillEdicion)("ngClass",t.ValidacioninfoestudiantesifasxElemento("Observacion")),r(6),l("modules",t.modulesQuillEdicion)("ngClass",t.ValidacioninfoestudiantesifasxElemento("Anotaciones")),r(6),l("modules",t.modulesQuillEdicion)("ngClass",t.ValidacioninfoestudiantesifasxElemento("Notas"))}}function so(i,e){if(i&1){let t=b();o(0,"button",198),h("click",function(){p(t);let a=u(3);return _(a.AutoCompletarLastinfoestudiantesifas())}),o(1,"span",25),x(2,"ng-lottie",26),s(),o(3,"span"),d(4,"AUTO COMPLETAR "),s(),x(5,"span",27),s()}if(i&2){let t=u(3);r(2),l("options",t._tools.optionsautocompletar)}}function oo(i,e){if(i&1&&(o(0,"div",196),g(1,so,6,1,"button",197),s()),i&2){let t=u(2);r(),l("ngIf",!t.AnimacionCargabtnModalinfoestudiantesifas)}}function ro(i,e){if(i&1){let t=b();o(0,"button",199),h("click",function(){p(t);let a=u().$implicit,c=u();return a.dismiss(),_(c.resetinfoestudiantesifas())}),o(1,"span",25),x(2,"ng-lottie",26),s(),o(3,"span"),d(4,"CANCELAR"),s(),x(5,"span",27),s()}if(i&2){let t=u(2);r(2),l("options",t._tools.optionscancelar)}}function lo(i,e){if(i&1){let t=b();o(0,"button",200),h("click",function(){p(t);let a=u(2);return _(a.AgregarModificarinfoestudiantesifas())}),x(1,"span",201),s()}i&2&&l("disabled",!0)}function co(i,e){if(i&1){let t=b();o(0,"button",202),h("click",function(){p(t);let a=u(2);return _(a.AgregarModificarinfoestudiantesifas())}),o(1,"span",25),x(2,"ng-lottie",26),s(),o(3,"span"),d(4),s(),x(5,"span",27),s()}if(i&2){let t,n,a=u(2);r(2),l("options",(t=a.newinfoestudiantesifas.get("id"))!=null&&t.value?a._tools.optionsEditar:a._tools.optionsAdicionar),r(2),E((n=a.newinfoestudiantesifas.get("id"))!=null&&n.value?"MODIFICAR":"REGISTRAR")}}function uo(i,e){if(i&1){let t=b();o(0,"div",62)(1,"h4",63),d(2),s(),o(3,"button",112),h("click",function(){let a=p(t).$implicit,c=u();return a.dismiss(),_(c.resetinfoestudiantesifas())}),s()(),o(4,"div",65)(5,"form",113),g(6,Ms,7,1,"div",114),o(7,"div",22)(8,"div",115)(9,"label",116),d(10,"COMPROBANTE DE PAGO EN DIGITAL"),s(),g(11,Vs,2,1,"div",117)(12,Ps,4,1,"ng-template",null,11,M),o(14,"div",118)(15,"button",119),h("click",function(){p(t);let a=u();return _(a.abrirVinculacionCelular())}),d(16," Vincular celular (QR) "),s(),o(17,"span",120),d(18),s(),o(19,"button",121),h("click",function(){p(t);let a=u();return _(a.iniciarCapturaFotoPagoPorCelular())}),d(20," Obtener Comprobante con celular "),s()(),g(21,ks,8,1,"div",122),s(),g(22,$s,11,4,"div",123),s(),o(23,"div",22)(24,"div",124)(25,"select",125)(26,"option",126),d(27,"Seleccione una opci\xF3n"),s(),g(28,Bs,2,3,"option",127),s(),o(29,"label"),d(30,"Categoria"),s(),o(31,"div",128),d(32,"Este campo es obligatorio*"),s()(),o(33,"div",124),x(34,"input",129),o(35,"label"),d(36,"Fecha de Inscripci\xF3n"),s(),o(37,"div",128),d(38,"Este campo es obligatorio*"),s()(),o(39,"div",124)(40,"select",130)(41,"option",126),d(42,"Seleccione una opci\xF3n"),s(),g(43,js,2,3,"option",127),s(),o(44,"label"),d(45,"Verificacion"),s(),o(46,"div",128),d(47,"Este campo es obligatorio*"),s()()(),o(48,"div",22)(49,"div",131)(50,"select",132)(51,"option",126),d(52,"Seleccione una opci\xF3n"),s(),g(53,Us,2,3,"option",127),s(),o(54,"label"),d(55,"Turno"),s(),o(56,"div",128),d(57,"Este campo es obligatorio*"),s()(),o(58,"div",133)(59,"select",134)(60,"option",126),d(61,"Seleccione una opci\xF3n"),s(),g(62,zs,2,3,"option",127),s(),o(63,"label"),d(64,"Curso Solicitado"),s(),o(65,"div",128),d(66,"Este campo es obligatorio*"),s()(),o(67,"div",131)(68,"input",135),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newinfoestudiantesifas,"Paralelo_Solicitado"))}),s(),o(69,"label"),d(70,"Paralelo Solicitado"),s(),o(71,"div",128),d(72,"Este campo es obligatorio*"),s()(),o(73,"div",133)(74,"input",136),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newinfoestudiantesifas,"Matricula"))}),s(),o(75,"label"),d(76,"Matricula"),s(),o(77,"div",128),d(78,"Este campo es obligatorio*"),s()(),o(79,"div",137)(80,"button",138),h("click",function(){p(t);let a=u();return _(a.newinfoestudiantesifas.patchValue({Matricula:a.generarMatricula()}))}),o(81,"span",25),x(82,"ng-lottie",26),s(),o(83,"span"),d(84,"Generar"),s(),x(85,"span",27),s()()(),g(86,Js,16,6,"div",114),o(87,"div",139),g(88,eo,9,2,"div",140)(89,no,9,2,"div",140),o(90,"div",131)(91,"button",141),h("click",function(a){p(t);let c=u();return _(c.abrirHistorialDesdeFormulario(a))}),x(92,"ng-lottie",142),o(93,"span"),d(94,"VER HISTORIAL CALIFICACIONES"),s()()(),o(95,"div",131)(96,"button",143),h("click",function(a){p(t);let c=u();return _(c.abrirPerfilEstudianteActual(a))}),x(97,"ng-lottie",142),o(98,"span"),d(99,"VER PERFIL"),s()()()(),o(100,"div",144)(101,"div",145)(102,"input",146),O("ngModelChange",function(a){p(t);let c=u();return F(c.mostrarObsAnoNotas,a)||(c.mostrarObsAnoNotas=a),_(a)}),s(),o(103,"label",147),d(104," Mostrar Observaci\xF3n / Anotaciones / Notas "),s()()(),g(105,ao,19,6,"div",114),s()(),o(106,"div",73),g(107,oo,2,1,"div",148),o(108,"div",149),g(109,ro,6,1,"button",150),s(),o(110,"div",151),g(111,lo,2,1,"button",152)(112,co,6,2,"button",153),s()()}if(i&2){let t,n,a=j(13),c=u();r(2),I("",(t=c.newinfoestudiantesifas.get("id"))!=null&&t.value?"Modificar":"Registrar"," Inscripci\xF3n"),r(3),l("formGroup",c.newinfoestudiantesifas),r(),l("ngIf",c.esSuperAdmin),r(5),l("ngIf",(n=c.newinfoestudiantesifas.get("FotoPago"))==null?null:n.value)("ngIfElse",a),r(4),l("disabled",c.isCapturandoFotoPago),r(2),l("ngClass",Vt(37,ze,c.pairingStatus==="LINKED",!c.pairingStatus||c.pairingStatus==="PENDING",c.pairingStatus==="EXPIRED"||c.pairingStatus==="REVOKED")),r(),I(" ",c.pairingStatus==="LINKED"?"VINCULADO":c.pairingStatus||"NO VINCULADO"," "),r(),l("disabled",c.isCapturandoFotoPago),r(2),l("ngIf",c.isCapturandoFotoPago&&c.capturaToken),r(),l("ngIf",!c.estudianteId),r(3),l("ngClass",c.ValidacioninfoestudiantesifasxElemento("Categoria")),r(3),l("ngForOf",c.categoriaOptions),r(6),l("ngClass",c.ValidacioninfoestudiantesifasxElemento("FechInsc")),r(6),l("ngClass",c.ValidacioninfoestudiantesifasxElemento("Verificacion")),r(3),l("ngForOf",c.VerificacionInscripciones),r(7),l("ngClass",c.ValidacioninfoestudiantesifasxElemento("Turno")),r(3),l("ngForOf",c.turnoOptions),r(6),l("ngClass",c.ValidacioninfoestudiantesifasxElemento("Curso_Solicitado")),r(3),l("ngForOf",c.cursoOptions),r(6),l("ngClass",c.ValidacioninfoestudiantesifasxElemento("Paralelo_Solicitado")),r(6),l("ngClass",c.ValidacioninfoestudiantesifasxElemento("Matricula")),r(8),l("options",c._tools.optionsautocompletar),r(4),l("ngIf",c.habilitarCamposMusicales),r(2),l("ngIf",c.habilitarCamposMusicales),r(),l("ngIf",c.habilitarCamposMusicales),r(2),l("disabled",!c.ciEstudianteNumerico()),r(),l("options",c._tools.optionseye),r(4),l("disabled",!c.puedeAbrirPerfilEstudiante()),r(),l("options",c._tools.optionsEditar),r(5),N("ngModel",c.mostrarObsAnoNotas),l("ngModelOptions",Y(41,Ma)),r(3),l("ngIf",c.mostrarObsAnoNotas),r(2),l("ngIf",!c.newinfoestudiantesifas.get("id").value),r(2),l("ngIf",!c.AnimacionCargabtnModalinfoestudiantesifas),r(2),l("ngIf",c.AnimacionCargabtnModalinfoestudiantesifas),r(),l("ngIf",!c.AnimacionCargabtnModalinfoestudiantesifas)}}function mo(i,e){if(i&1&&(o(0,"div"),x(1,"img",243),s()),i&2){let t,n=u(2);r(),l("src",n._tools.ruta+((t=n.newestudiantesifas.get("Foto"))==null?null:t.value),P)}}function po(i,e){i&1&&(o(0,"div",94),d(1,"SIN FOTO DE PERFIL"),s())}function _o(i,e){if(i&1&&(o(0,"div",244)(1,"div",245)(2,"div",246),d(3),s()()()),i&2){let t=u(2);r(2),Z("width",t.uploadProgressFoto,"%"),r(),I(" ",t.uploadProgressFoto,"% ")}}function fo(i,e){if(i&1){let t=b();o(0,"div",158)(1,"div")(2,"div",159),d(3,"Esperando foto de perfil del celular..."),s(),o(4,"div",160),d(5),s()(),o(6,"button",161),h("click",function(){p(t);let a=u(2);return _(a.cancelarEsperaCapturaFotoPerfil())}),d(7,"Cancelar"),s()()}if(i&2){let t=u(2);r(5),I("Estado: ",t.capturaStatusFotoPerfil||"PENDING",". Puedes seguir llenando el formulario.")}}function go(i,e){i&1&&(o(0,"div",247),d(1," Este campo es obligatorio* "),s())}function ho(i,e){if(i&1&&(o(0,"option",180),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function xo(i,e){if(i&1&&(o(0,"option",180),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function vo(i,e){if(i&1){let t=b();o(0,"button",248),h("click",function(){let a;p(t);let c=u(2);return _(c.newestudiantesifas.patchValue({Usuario:((a=c.newestudiantesifas.get("Ap_Paterno"))==null?null:a.value.charAt(0))+((a=c.newestudiantesifas.get("Ap_Materno"))==null?null:a.value.charAt(0))+((a=c.newestudiantesifas.get("Nombre"))==null?null:a.value.charAt(0))+((a=c.newestudiantesifas.get("CI"))==null?null:a.value)+"EST"}))}),x(1,"ng-lottie",249),s()}if(i&2){let t=u(2);r(),l("options",t._tools.optionstripleengranaje)}}function Eo(i,e){i&1&&(o(0,"div",250),d(1," Este campo es obligatorio* "),s())}function bo(i,e){if(i&1){let t=b();o(0,"button",251),h("click",function(){p(t);let a=u(2);return _(a.mostrarContrasenia=!a.mostrarContrasenia)}),x(1,"ng-lottie",249),s()}if(i&2){let t=u(2);r(),l("options",t._tools.optionseye)}}function Co(i,e){i&1&&(o(0,"div",250),d(1," Este campo es obligatorio* "),s())}function So(i,e){if(i&1&&(o(0,"option",180),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function Io(i,e){if(i&1&&(o(0,"option",180),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function yo(i,e){if(i&1&&(o(0,"option",180),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function wo(i,e){if(i&1&&(o(0,"option",180),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function Ao(i,e){if(i&1&&(o(0,"option",180),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function To(i,e){if(i&1&&(o(0,"option",180),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function Mo(i,e){if(i&1){let t=b();o(0,"button",198),h("click",function(){p(t);let a=u(3);return _(a.AutoCompletarLastestudiantesifas())}),o(1,"span",25),x(2,"ng-lottie",26),s(),o(3,"span"),d(4,"AUTO COMPLETAR "),s(),x(5,"span",27),s()}if(i&2){let t=u(3);r(2),l("options",t._tools.optionsautocompletar)}}function Vo(i,e){if(i&1&&(o(0,"div",196),g(1,Mo,6,1,"button",197),s()),i&2){let t=u(2);r(),l("ngIf",!t.AnimacionCargabtnModalestudiantesifas)}}function Po(i,e){if(i&1){let t=b();o(0,"button",199),h("click",function(){p(t);let a=u().$implicit,c=u();return a.dismiss(),_(c.resetestudiantesifas())}),o(1,"span",25),x(2,"ng-lottie",26),s(),o(3,"span"),d(4,"CANCELAR"),s(),x(5,"span",27),s()}if(i&2){let t=u(2);r(2),l("options",t._tools.optionscancelar)}}function ko(i,e){if(i&1){let t=b();o(0,"button",200),h("click",function(){p(t);let a=u(2);return _(a.AgregarModificarestudiantesifas())}),x(1,"span",201),s()}i&2&&l("disabled",!0)}function No(i,e){if(i&1){let t=b();o(0,"button",252),h("click",function(){p(t);let a=u(2);return _(a.AgregarModificarestudiantesifas())}),o(1,"span",25),x(2,"ng-lottie",26),s(),o(3,"span"),d(4),s(),x(5,"span",27),s()}if(i&2){let t,n,a=u(2);l("disabled",a.isUploadingFoto),r(2),l("options",(t=a.newestudiantesifas.get("id"))!=null&&t.value?a._tools.optionsEditar:a._tools.optionsAdicionar),r(2),E((n=a.newestudiantesifas.get("id"))!=null&&n.value?"MODIFICAR":"REGISTRAR")}}function Fo(i,e){if(i&1){let t=b();o(0,"div",62)(1,"h4",63),d(2),s(),o(3,"button",112),h("click",function(){let a=p(t).$implicit,c=u();return a.dismiss(),_(c.resetestudiantesifas())}),s()(),o(4,"div",65)(5,"form",113)(6,"div",22)(7,"div",203)(8,"label",204),d(9,"Foto actual"),s(),g(10,mo,2,1,"div",117)(11,po,2,0,"ng-template",null,13,M),s(),o(13,"div",203)(14,"label",204),d(15,"SUBIR FOTO DE PERFIL (1 archivo)"),s(),o(16,"div",205),h("dragover",function(a){p(t);let c=u();return _(c.onFotoDragOver(a))})("dragleave",function(a){p(t);let c=u();return _(c.onFotoDragLeave(a))})("drop",function(a){p(t);let c=u();return _(c.onFotoDrop(a))})("click",function(){p(t);let a=j(21),c=u();return _(c.abrirSelectorFoto(a))}),o(17,"div",94),d(18,"Arrastra y suelta aqu\xED, o clic para seleccionar archivo"),s(),g(19,_o,4,3,"div",206),s(),o(20,"input",207,14),h("change",function(a){p(t);let c=u();return _(c.onFotoFileSelected(a))}),s(),o(22,"div",118)(23,"button",119),h("click",function(){p(t);let a=u();return _(a.abrirVinculacionCelular())}),d(24," Vincular celular (QR) "),s(),o(25,"span",120),d(26),s(),o(27,"button",121),h("click",function(){p(t);let a=u();return _(a.iniciarCapturaFotoPorCelular())}),d(28," Tomar foto con celular "),s()(),g(29,fo,8,1,"div",122)(30,go,2,0,"div",208),s()(),o(31,"div",22)(32,"div",133)(33,"input",209),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"Ap_Paterno"))}),s(),o(34,"label"),d(35,"Apellido Paterno"),s(),o(36,"div",128),d(37,"Este campo es obligatorio*"),s()(),o(38,"div",133)(39,"input",210),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"Ap_Materno"))}),s(),o(40,"label"),d(41,"Apellido Materno"),s(),o(42,"div",128),d(43,"Este campo es obligatorio*"),s()(),o(44,"div",211)(45,"input",212),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"Nombre"))}),s(),o(46,"label"),d(47,"Nombres"),s(),o(48,"div",128),d(49,"Este campo es obligatorio*"),s()()(),o(50,"div",22)(51,"div",133)(52,"input",213),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"CI"))}),s(),o(53,"label"),d(54,"C\xE9dula de Identidad"),s(),o(55,"div",128),d(56,"Este campo es obligatorio*"),s()(),o(57,"div",131)(58,"select",214)(59,"option",126),d(60,"Seleccione una opci\xF3n"),s(),g(61,ho,2,3,"option",127),s(),o(62,"label"),d(63,"Expedido"),s(),o(64,"div",128),d(65,"Este campo es obligatorio*"),s()(),o(66,"div",131)(67,"select",215)(68,"option",126),d(69,"Seleccione una opci\xF3n"),s(),g(70,xo,2,3,"option",127),s(),o(71,"label"),d(72,"Sexo"),s(),o(73,"div",128),d(74,"Este campo es obligatorio*"),s()(),o(75,"div",133)(76,"input",216),h("change",function(a){let c;p(t);let m=u();return _((c=m.newestudiantesifas.get("Edad"))==null?null:c.setValue(m._tools.CalcularEdad(a.target.value)))}),s(),o(77,"label"),d(78,"Fecha de Nacimiento"),s(),o(79,"div",128),d(80,"Este campo es obligatorio*"),s()(),o(81,"div",131),x(82,"input",217),o(83,"label"),d(84,"Edad"),s(),o(85,"div",128),d(86,"Este campo es obligatorio*"),s()()(),o(87,"div",22)(88,"div",133)(89,"input",218),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"Celular"))}),s(),o(90,"label"),d(91,"Celular"),s(),o(92,"div",128),d(93,"Este campo es obligatorio*"),s()(),o(94,"div",219)(95,"input",220),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"Direccion"))}),s(),o(96,"label"),d(97,"Direcci\xF3n"),s(),o(98,"div",128),d(99,"Este campo es obligatorio*"),s()(),o(100,"div",124),x(101,"input",221),o(102,"label"),d(103,"Correo"),s(),o(104,"div",128),d(105,"Este campo es obligatorio*"),s()()(),o(106,"div",22)(107,"div",222)(108,"div",223)(109,"div",30)(110,"input",224),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"Usuario"))}),s(),o(111,"label"),d(112,"Usuario"),s()(),g(113,vo,2,1,"button",225),s(),g(114,Eo,2,0,"div",226),s(),o(115,"div",222)(116,"div",223)(117,"div",30),x(118,"input",227),o(119,"label"),d(120,"Contrase\xF1a"),s()(),g(121,bo,2,1,"button",228),s(),g(122,Co,2,0,"div",226),s(),o(123,"div",124)(124,"select",229)(125,"option",126),d(126,"Seleccione una opci\xF3n"),s(),g(127,So,2,3,"option",127),s(),o(128,"label"),d(129,"Estado"),s(),o(130,"div",128),d(131,"Este campo es obligatorio*"),s()()(),x(132,"hr"),o(133,"div",22)(134,"div",124)(135,"input",230),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"Nombre_Padre"))}),s(),o(136,"label"),d(137,"Nombre Padre"),s(),o(138,"div",128),d(139,"Este campo es obligatorio*"),s()(),o(140,"div",133)(141,"select",231)(142,"option",126),d(143,"Seleccione una opci\xF3n"),s(),g(144,Io,2,3,"option",127),s(),o(145,"label"),d(146,"Ocupaci\xF3n del Padre"),s(),o(147,"div",128),d(148,"Este campo es obligatorio*"),s()(),o(149,"div",124)(150,"input",232),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"NumCelP"))}),s(),o(151,"label"),d(152,"N\xFAmero Celular del Padre"),s(),o(153,"div",128),d(154,"Este campo es obligatorio*"),s()()(),o(155,"div",22)(156,"div",124)(157,"input",233),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"Nombre_Madre"))}),s(),o(158,"label"),d(159,"Nombre Madre"),s(),o(160,"div",128),d(161,"Este campo es obligatorio*"),s()(),o(162,"div",133)(163,"select",234)(164,"option",126),d(165,"Seleccione una opci\xF3n"),s(),g(166,yo,2,3,"option",127),s(),o(167,"label"),d(168,"Ocupaci\xF3n de la Madre"),s(),o(169,"div",128),d(170,"Este campo es obligatorio*"),s()(),o(171,"div",124)(172,"input",235),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"NumCelM"))}),s(),o(173,"label"),d(174,"N\xFAmero Celular de la Madre"),s(),o(175,"div",128),d(176,"Este campo es obligatorio*"),s()()(),o(177,"div",22)(178,"div",133)(179,"input",236),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"NColegio"))}),s(),o(180,"label"),d(181,"Nombre Colegio"),s(),o(182,"div",128),d(183,"Este campo es obligatorio*"),s()(),o(184,"div",133)(185,"select",237)(186,"option",126),d(187,"Seleccione una opci\xF3n"),s(),g(188,wo,2,3,"option",127),s(),o(189,"label"),d(190,"Tipo Colegio"),s(),o(191,"div",128),d(192,"Este campo es obligatorio*"),s()(),o(193,"div",133)(194,"select",238)(195,"option",126),d(196,"Seleccione una opci\xF3n"),s(),g(197,Ao,2,3,"option",127),s(),o(198,"label"),d(199,"Nivel del Colegio"),s(),o(200,"div",128),d(201,"Este campo es obligatorio*"),s()(),o(202,"div",133)(203,"select",239)(204,"option",126),d(205,"Seleccione una opci\xF3n"),s(),g(206,To,2,3,"option",127),s(),o(207,"label"),d(208,"Grado en Colegio"),s(),o(209,"div",128),d(210,"Este campo es obligatorio*"),s()()(),o(211,"div",240)(212,"label"),d(213,"Informaci\xF3n Compartida IFAS"),s(),x(214,"quill-editor",241),o(215,"div",128),d(216,"Este campo es obligatorio*"),s()()()(),o(217,"div",73),g(218,Vo,2,1,"div",148),o(219,"div",149),g(220,Po,6,1,"button",150),s(),o(221,"div",151),g(222,ko,2,1,"button",152)(223,No,6,3,"button",242),s()()}if(i&2){let t,n,a,c,m,v=j(12),f=u();r(2),I("",(t=f.newestudiantesifas.get("id"))!=null&&t.value?"Modificar":"Registrar"," Informaci\xF3n Personal Estudiante"),r(3),l("formGroup",f.newestudiantesifas),r(5),l("ngIf",(n=f.newestudiantesifas.get("Foto"))==null?null:n.value)("ngIfElse",v),r(6),G("border-primary",f.isDraggingFoto)("bg-light",f.isDraggingFoto),r(3),l("ngIf",f.isUploadingFoto),r(4),l("disabled",f.isUploadingFoto),r(2),l("ngClass",Vt(58,ze,f.pairingStatus==="LINKED",!f.pairingStatus||f.pairingStatus==="PENDING",f.pairingStatus==="EXPIRED"||f.pairingStatus==="REVOKED")),r(),I(" ",f.pairingStatus==="LINKED"?"VINCULADO":f.pairingStatus||"NO VINCULADO"," "),r(),l("disabled",f.isUploadingFoto||f.isEsperandoFotoPerfil),r(2),l("ngIf",f.isEsperandoFotoPerfil&&f.capturaTokenFotoPerfil),r(),l("ngIf",((a=f.newestudiantesifas.get("Foto"))==null?null:a.touched)&&((a=f.newestudiantesifas.get("Foto"))==null?null:a.invalid)),r(3),l("ngClass",f.ValidacionestudiantesifasxElemento("Ap_Paterno")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("Ap_Materno")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("Nombre")),r(7),l("ngClass",f.ValidacionestudiantesifasxElemento("CI")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("Expedido")),r(3),l("ngForOf",f.expedidoOptions),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("Sexo")),r(3),l("ngForOf",f.sexoOptions),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("FechaNac")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("Edad")),r(7),l("ngClass",f.ValidacionestudiantesifasxElemento("Celular")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("Direccion")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("Correo")),r(9),l("ngClass",f.ValidacionestudiantesifasxElemento("Usuario")),r(3),l("ngIf",!f.AnimacionCargabtnModalestudiantesifas),r(),l("ngIf",((c=f.newestudiantesifas.get("Usuario"))==null?null:c.touched)&&((c=f.newestudiantesifas.get("Usuario"))==null?null:c.invalid)),r(4),l("type",f.mostrarContrasenia?"text":"password")("ngClass",f.ValidacionestudiantesifasxElemento("Contrasenia")),r(3),l("ngIf",!f.AnimacionCargabtnModalestudiantesifas),r(),l("ngIf",((m=f.newestudiantesifas.get("Contrasenia"))==null?null:m.touched)&&((m=f.newestudiantesifas.get("Contrasenia"))==null?null:m.invalid)),r(2),l("ngClass",f.ValidacionestudiantesifasxElemento("Estado")),r(3),l("ngForOf",f.estadoOptions),r(8),l("ngClass",f.ValidacionestudiantesifasxElemento("Nombre_Padre")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("OcupacionP")),r(3),l("ngForOf",f.OcupacionOptions),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("NumCelP")),r(7),l("ngClass",f.ValidacionestudiantesifasxElemento("Nombre_Madre")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("OcupacionM")),r(3),l("ngForOf",f.OcupacionOptions),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("NumCelM")),r(7),l("ngClass",f.ValidacionestudiantesifasxElemento("NColegio")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("TipoColegio")),r(3),l("ngForOf",f.tipoColegioOptions),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("CNivel")),r(3),l("ngForOf",f.nivelColegioOptions),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("CGrado")),r(3),l("ngForOf",f.gradoColegioOptions),r(8),l("modules",f.modulesQuillEdicion)("ngClass",f.ValidacionestudiantesifasxElemento("InformacionCompartidaIFAS")),r(4),l("ngIf",!f.newestudiantesifas.get("id").value),r(2),l("ngIf",!f.AnimacionCargabtnModalestudiantesifas),r(2),l("ngIf",f.AnimacionCargabtnModalestudiantesifas),r(),l("ngIf",!f.AnimacionCargabtnModalestudiantesifas)}}function Oo(i,e){if(i&1&&(o(0,"div",255),x(1,"img",256),s()),i&2){let t=u(2);r(),l("src",t.pairingQrDataUrl,P)}}function Ro(i,e){if(i&1&&(o(0,"div",78)(1,"a",257),d(2,"Abrir link en el celular"),s()()),i&2){let t=u(2);r(),l("href",t.pairingUrl,P)}}function Do(i,e){if(i&1){let t=b();o(0,"div",62)(1,"h4",63),d(2,"Vincular celular"),s(),o(3,"button",112),h("click",function(){let a=p(t).$implicit;return _(a.dismiss())}),s()(),o(4,"div",65)(5,"div",253),d(6,"Escanea este QR una sola vez desde el celular."),s(),g(7,Oo,2,1,"div",254),o(8,"div",78)(9,"div",170),d(10,"Estado"),s(),o(11,"div",159),d(12),s()(),g(13,Ro,3,1,"div",70),s()}if(i&2){let t=u();r(7),l("ngIf",t.pairingQrDataUrl),r(5),E(t.pairingStatus||"..."),r(),l("ngIf",t.pairingUrl)}}function Lo(i,e){if(i&1){let t=b();o(0,"div",62)(1,"h4",63),d(2,"Esperando foto..."),s(),o(3,"button",112),h("click",function(){let a=p(t).$implicit;return _(a.dismiss())}),s()(),o(4,"div",65)(5,"div",94),d(6,"En el celular entra a \u201CCaptura desde celular\u201D (ya vinculado) y toma la foto del estudiante."),s(),o(7,"div",78)(8,"div",170),d(9,"Estado"),s(),o(10,"div",159),d(11),s()(),o(12,"div",258)(13,"button",161),h("click",function(){let a=p(t).$implicit;return u().cancelarEsperaCapturaFotoPerfil(),_(a.close())}),d(14,"Cancelar espera"),s()()()}if(i&2){let t=u();r(11),E(t.capturaStatusFotoPerfil||"PENDING")}}function $o(i,e){if(i&1){let t=b();o(0,"div",62)(1,"h4",63),d(2,"Esperando FotoPago..."),s(),o(3,"button",112),h("click",function(){let a=p(t).$implicit;return _(a.dismiss())}),s()(),o(4,"div",65)(5,"div",94),d(6,"En el celular entra a \u201CCaptura desde celular\u201D (ya vinculado) y toma la foto del comprobante."),s(),o(7,"div",78)(8,"div",170),d(9,"Estado"),s(),o(10,"div",159),d(11),s()(),o(12,"div",258)(13,"button",161),h("click",function(){let a=p(t).$implicit;return u().cancelarEsperaCaptura(),_(a.close())}),d(14,"Cancelar espera"),s()()()}if(i&2){let t=u();r(11),E(t.capturaStatus||"PENDING")}}function Bo(i,e){if(i&1&&(o(0,"div",268)(1,"div",269),d(2,"Total:"),s(),o(3,"div",270),d(4),s()()),i&2){let t=u(2);r(4),E(t.estadisticasInscripciones==null||t.estadisticasInscripciones.meta==null?null:t.estadisticasInscripciones.meta.total)}}function jo(i,e){i&1&&(o(0,"div",78),d(1," Cargando estad\xEDsticas... "),s())}function Uo(i,e){i&1&&(o(0,"div",78),d(1," No hay estad\xEDsticas para mostrar. "),s())}function zo(i,e){i&1&&(o(0,"th"),d(1,"Edades"),s())}function Go(i,e){i&1&&(o(0,"th"),d(1,"Instrumentos"),s())}function qo(i,e){if(i&1){let t=b();o(0,"button",276),h("click",function(){let a=p(t).$implicit,c=u(2).$implicit,m=u(3);return _(m.abrirDetalleEstadisticasCursoEdad(c,a==null?null:a.edad))}),d(1),s()}if(i&2){let t=e.$implicit;l("title",Tt("Ver estudiantes de ",t==null?null:t.edad," a\xF1os"))("disabled",((t==null?null:t.total)??0)<=0),r(),K(" ",t==null?null:t.edad," A\xF1os (",t==null?null:t.total,") ")}}function Ho(i,e){if(i&1&&(o(0,"td")(1,"div",274),g(2,qo,2,5,"button",275),s()()),i&2){let t=u().$implicit;r(2),l("ngForOf",t.edades||Y(1,ne))}}function Qo(i,e){if(i&1){let t=b();o(0,"button",276),h("click",function(){let a=p(t).$implicit,c=u(2).$implicit,m=u(3);return _(m.abrirDetalleEstadisticasCursoInstrumento(c,a==null?null:a.instrumento))}),d(1),s()}if(i&2){let t=e.$implicit;l("title",Tt("Ver estudiantes de ",t==null?null:t.instrumento))("disabled",((t==null?null:t.total)??0)<=0),r(),K(" ",t==null?null:t.instrumento," (",t==null?null:t.total,") ")}}function Wo(i,e){if(i&1&&(o(0,"td")(1,"div",274),g(2,Qo,2,5,"button",275),s()()),i&2){let t=u().$implicit;r(2),l("ngForOf",t.instrumentos||Y(1,ne))}}function Ko(i,e){if(i&1){let t=b();o(0,"tr")(1,"td"),d(2),s(),o(3,"td",271)(4,"button",273),h("click",function(){let a=p(t).$implicit,c=u(3);return _(c.abrirDetalleEstadisticasCurso(a,""))}),d(5),s()(),o(6,"td",271)(7,"button",273),h("click",function(){let a=p(t).$implicit,c=u(3);return _(c.abrirDetalleEstadisticasCurso(a,"MASCULINO"))}),d(8),s()(),o(9,"td",271)(10,"button",273),h("click",function(){let a=p(t).$implicit,c=u(3);return _(c.abrirDetalleEstadisticasCurso(a,"FEMENINO"))}),d(11),s()(),g(12,Ho,3,2,"td",51)(13,Wo,3,2,"td",51),s()}if(i&2){let t=e.$implicit,n=u(3);r(2),E(t.curso),r(2),l("disabled",(t.total??0)<=0),r(),I(" ",t.total," "),r(2),l("disabled",n.getSexoCount(t.sexo,"MASCULINO")<=0),r(),I(" ",n.getSexoCount(t.sexo,"MASCULINO")," "),r(2),l("disabled",n.getSexoCount(t.sexo,"FEMENINO")<=0),r(),I(" ",n.getSexoCount(t.sexo,"FEMENINO")," "),r(),l("ngIf",n.hayEdades(n.estadisticasInscripciones==null?null:n.estadisticasInscripciones.por_curso)),r(),l("ngIf",n.hayInstrumentos(n.estadisticasInscripciones==null?null:n.estadisticasInscripciones.por_curso))}}function Yo(i,e){i&1&&(o(0,"th"),d(1,"Edades"),s())}function Xo(i,e){i&1&&(o(0,"th"),d(1,"Instrumentos"),s())}function Zo(i,e){if(i&1){let t=b();o(0,"button",276),h("click",function(){let a=p(t).$implicit,c=u(2).$implicit,m=u(3);return _(m.abrirDetalleEstadisticasCursoParaleloEdad(c,a==null?null:a.edad))}),d(1),s()}if(i&2){let t=e.$implicit;l("title",Tt("Ver estudiantes de ",t==null?null:t.edad," a\xF1os"))("disabled",((t==null?null:t.total)??0)<=0),r(),K(" ",t==null?null:t.edad," A\xF1os (",t==null?null:t.total,") ")}}function Jo(i,e){if(i&1&&(o(0,"td")(1,"div",274),g(2,Zo,2,5,"button",275),s()()),i&2){let t=u().$implicit;r(2),l("ngForOf",t.edades||Y(1,ne))}}function tr(i,e){if(i&1){let t=b();o(0,"button",276),h("click",function(){let a=p(t).$implicit,c=u(2).$implicit,m=u(3);return _(m.abrirDetalleEstadisticasCursoParaleloInstrumento(c,a==null?null:a.instrumento))}),d(1),s()}if(i&2){let t=e.$implicit;l("title",Tt("Ver estudiantes de ",t==null?null:t.instrumento))("disabled",((t==null?null:t.total)??0)<=0),r(),K(" ",t==null?null:t.instrumento," (",t==null?null:t.total,") ")}}function er(i,e){if(i&1&&(o(0,"td")(1,"div",274),g(2,tr,2,5,"button",275),s()()),i&2){let t=u().$implicit;r(2),l("ngForOf",t.instrumentos||Y(1,ne))}}function ir(i,e){if(i&1){let t=b();o(0,"tr")(1,"td"),d(2),s(),o(3,"td"),d(4),s(),o(5,"td",271)(6,"button",273),h("click",function(){let a=p(t).$implicit,c=u(3);return _(c.abrirDetalleEstadisticasCursoParalelo(a,""))}),d(7),s()(),o(8,"td",271)(9,"button",273),h("click",function(){let a=p(t).$implicit,c=u(3);return _(c.abrirDetalleEstadisticasCursoParalelo(a,"MASCULINO"))}),d(10),s()(),o(11,"td",271)(12,"button",273),h("click",function(){let a=p(t).$implicit,c=u(3);return _(c.abrirDetalleEstadisticasCursoParalelo(a,"FEMENINO"))}),d(13),s()(),g(14,Jo,3,2,"td",51)(15,er,3,2,"td",51),s()}if(i&2){let t=e.$implicit,n=u(3);r(2),E(t.curso),r(2),E(t.paralelo),r(2),l("disabled",(t.total??0)<=0),r(),I(" ",t.total," "),r(2),l("disabled",n.getSexoCount(t.sexo,"MASCULINO")<=0),r(),I(" ",n.getSexoCount(t.sexo,"MASCULINO")," "),r(2),l("disabled",n.getSexoCount(t.sexo,"FEMENINO")<=0),r(),I(" ",n.getSexoCount(t.sexo,"FEMENINO")," "),r(),l("ngIf",n.hayEdades(n.estadisticasInscripciones==null?null:n.estadisticasInscripciones.por_curso_paralelo)),r(),l("ngIf",n.hayInstrumentos(n.estadisticasInscripciones==null?null:n.estadisticasInscripciones.por_curso_paralelo))}}function nr(i,e){if(i&1&&(o(0,"div",78)(1,"h6"),d(2,"Por Curso_Solicitado"),s(),o(3,"div",45)(4,"table",84)(5,"thead")(6,"tr")(7,"th"),d(8,"Curso"),s(),o(9,"th",271),d(10,"Total"),s(),o(11,"th",271),d(12,"Varones"),s(),o(13,"th",271),d(14,"Mujeres"),s(),g(15,zo,2,0,"th",51)(16,Go,2,0,"th",51),s()(),o(17,"tbody"),g(18,Ko,14,9,"tr",89),s()()(),o(19,"h6",44),d(20,"Por Curso_Solicitado + Paralelo_Solicitado"),s(),o(21,"div",272),d(22,"(Solo se muestra cuando existe Paralelo_Solicitado)"),s(),o(23,"div",45)(24,"table",84)(25,"thead")(26,"tr")(27,"th"),d(28,"Curso"),s(),o(29,"th"),d(30,"Paralelo"),s(),o(31,"th",271),d(32,"Total"),s(),o(33,"th",271),d(34,"Varones"),s(),o(35,"th",271),d(36,"Mujeres"),s(),g(37,Yo,2,0,"th",51)(38,Xo,2,0,"th",51),s()(),o(39,"tbody"),g(40,ir,16,10,"tr",89),s()()()()),i&2){let t=u(2);r(15),l("ngIf",t.hayEdades(t.estadisticasInscripciones==null?null:t.estadisticasInscripciones.por_curso)),r(),l("ngIf",t.hayInstrumentos(t.estadisticasInscripciones==null?null:t.estadisticasInscripciones.por_curso)),r(2),l("ngForOf",t.estadisticasInscripciones==null?null:t.estadisticasInscripciones.por_curso),r(19),l("ngIf",t.hayEdades(t.estadisticasInscripciones==null?null:t.estadisticasInscripciones.por_curso_paralelo)),r(),l("ngIf",t.hayInstrumentos(t.estadisticasInscripciones==null?null:t.estadisticasInscripciones.por_curso_paralelo)),r(2),l("ngForOf",t.estadisticasInscripciones==null?null:t.estadisticasInscripciones.por_curso_paralelo)}}function ar(i,e){if(i&1){let t=b();o(0,"div",62)(1,"h5",63),d(2,"Componente Estadisticas de Inscripciones"),s(),o(3,"button",259),h("click",function(){let a=p(t).$implicit;return _(a.dismiss())}),s()(),o(4,"div",65)(5,"div",260)(6,"div",261)(7,"label",204),d(8,"Modo"),s(),o(9,"select",31),O("ngModelChange",function(a){p(t);let c=u();return F(c.estadisticasModo,a)||(c.estadisticasModo=a),_(a)}),h("change",function(){p(t);let a=u();return _(a.cargarEstadisticasInscripciones())}),o(10,"option",262),d(11,"POR DEFECTO (seg\xFAn check SIN ASIGNACIONES)"),s(),o(12,"option",263),d(13,"SOLO ASIGNADOS"),s(),o(14,"option",264),d(15,"SOLO SIN ASIGNAR"),s(),o(16,"option",265),d(17,"ASIGNADOS + SIN ASIGNAR (DEL A\xD1O)"),s()()(),o(18,"div",261)(19,"button",266),h("click",function(){p(t);let a=u();return _(a.cargarEstadisticasInscripciones())}),d(20," ACTUALIZAR "),s()(),g(21,Bo,5,1,"div",267),s(),g(22,jo,2,0,"div",70)(23,Uo,2,0,"div",70)(24,nr,41,6,"div",70),s()}if(i&2){let t=u();r(9),N("ngModel",t.estadisticasModo),r(12),l("ngIf",t.estadisticasInscripciones==null?null:t.estadisticasInscripciones.meta),r(),l("ngIf",t.isLoadingEstadisticas),r(),l("ngIf",!t.isLoadingEstadisticas&&!t.estadisticasInscripciones),r(),l("ngIf",!t.isLoadingEstadisticas&&t.estadisticasInscripciones)}}function sr(i,e){i&1&&(o(0,"div",280),d(1,"Paralelo"),s())}function or(i,e){if(i&1&&(o(0,"div",159),d(1),s()),i&2){let t=u(3);r(),E(t.detalleEstadisticasMeta==null?null:t.detalleEstadisticasMeta.paralelo)}}function rr(i,e){i&1&&(o(0,"div",280),d(1,"Instrumento"),s())}function lr(i,e){if(i&1&&(o(0,"div",159),d(1),s()),i&2){let t=u(3);r(),E(t.detalleEstadisticasMeta==null?null:t.detalleEstadisticasMeta.instrumento)}}function cr(i,e){i&1&&(o(0,"div",280),d(1,"Edad"),s())}function dr(i,e){if(i&1&&(o(0,"div",159),d(1),s()),i&2){let t=u(3);r(),I("",t.detalleEstadisticasMeta==null?null:t.detalleEstadisticasMeta.edad," a\xF1os")}}function ur(i,e){i&1&&(o(0,"div",280),d(1,"Total"),s())}function mr(i,e){if(i&1&&(o(0,"div",159),d(1),s()),i&2){let t=u(3);r(),E(t.detalleEstadisticasMeta==null?null:t.detalleEstadisticasMeta.total)}}function pr(i,e){if(i&1&&(o(0,"div",279)(1,"div",280),d(2,"Curso"),s(),o(3,"div",159),d(4),s(),g(5,sr,2,0,"div",281)(6,or,2,1,"div",282),o(7,"div",280),d(8,"Sexo"),s(),o(9,"div",159),d(10),s(),g(11,rr,2,0,"div",281)(12,lr,2,1,"div",282)(13,cr,2,0,"div",281)(14,dr,2,1,"div",282)(15,ur,2,0,"div",281)(16,mr,2,1,"div",282),s()),i&2){let t=u(2);r(4),E(t.detalleEstadisticasMeta==null?null:t.detalleEstadisticasMeta.curso),r(),l("ngIf",(t.detalleEstadisticasMeta==null?null:t.detalleEstadisticasMeta.paralelo)!=null),r(),l("ngIf",(t.detalleEstadisticasMeta==null?null:t.detalleEstadisticasMeta.paralelo)!=null),r(4),E((t.detalleEstadisticasMeta==null?null:t.detalleEstadisticasMeta.sexo)||"TODOS"),r(),l("ngIf",t.detalleEstadisticasMeta==null?null:t.detalleEstadisticasMeta.instrumento),r(),l("ngIf",t.detalleEstadisticasMeta==null?null:t.detalleEstadisticasMeta.instrumento),r(),l("ngIf",t.detalleEstadisticasMeta==null?null:t.detalleEstadisticasMeta.edad),r(),l("ngIf",t.detalleEstadisticasMeta==null?null:t.detalleEstadisticasMeta.edad),r(),l("ngIf",(t.detalleEstadisticasMeta==null?null:t.detalleEstadisticasMeta.total)!=null),r(),l("ngIf",(t.detalleEstadisticasMeta==null?null:t.detalleEstadisticasMeta.total)!=null)}}function _r(i,e){i&1&&(o(0,"div",78),d(1," Cargando estudiantes... "),s())}function fr(i,e){i&1&&(o(0,"div",78),d(1," No hay estudiantes para mostrar. "),s())}function gr(i,e){if(i&1&&(o(0,"tr")(1,"td"),d(2),s(),o(3,"td"),d(4),s(),o(5,"td"),d(6),s(),o(7,"td"),d(8),s(),o(9,"td"),d(10),s(),o(11,"td",271),d(12),s()()),i&2){let t=e.$implicit,n=e.index;r(2),E(n+1),r(2),E(((t==null?null:t.Ap_Paterno)||"")+" "+((t==null?null:t.Ap_Materno)||"")),r(2),E(t==null?null:t.Nombre),r(2),E(t==null?null:t.CI),r(2),E(t==null?null:t.Sexo),r(2),E(t==null?null:t.Edad)}}function hr(i,e){if(i&1&&(o(0,"div",283)(1,"table",84)(2,"thead")(3,"tr")(4,"th"),d(5,"#"),s(),o(6,"th"),d(7,"Apellidos"),s(),o(8,"th"),d(9,"Nombres"),s(),o(10,"th"),d(11,"CI"),s(),o(12,"th"),d(13,"Sexo"),s(),o(14,"th",271),d(15,"Edad"),s()()(),o(16,"tbody"),g(17,gr,13,6,"tr",89),s()()()),i&2){let t=u(2);r(17),l("ngForOf",t.detalleEstadisticasRows)}}function xr(i,e){if(i&1){let t=b();o(0,"div",62)(1,"h5",63),d(2,"Detalle de estudiantes"),s(),o(3,"button",259),h("click",function(){let a=p(t).$implicit;return _(a.dismiss())}),s()(),o(4,"div",65),g(5,pr,17,10,"div",277)(6,_r,2,0,"div",70)(7,fr,2,0,"div",70)(8,hr,18,1,"div",278),s(),o(9,"div",73)(10,"button",74),h("click",function(){let a=p(t).$implicit;return _(a.close())}),d(11,"Cerrar"),s()()}if(i&2){let t=u();r(5),l("ngIf",t.detalleEstadisticasMeta),r(),l("ngIf",t.isLoadingDetalleEstadisticas),r(),l("ngIf",!t.isLoadingDetalleEstadisticas&&(!t.detalleEstadisticasRows||t.detalleEstadisticasRows.length===0)),r(),l("ngIf",!t.isLoadingDetalleEstadisticas&&t.detalleEstadisticasRows&&t.detalleEstadisticasRows.length>0)}}function vr(i,e){if(i&1){let t=b();o(0,"div",62)(1,"h5",63),d(2,"Componente Asignacion de estudiante"),s(),o(3,"button",259),h("click",function(){let a=p(t).$implicit;return _(a.dismiss())}),s()(),o(4,"div",65),x(5,"app-asignadormateriasestudiantes",284),s()}if(i&2){let t=u();r(5),l("modo",t.asignadorModo)("estudianteId",t.asignadorEstudianteId)("nombreEstudiante",t.asignadorNombreEstudiante)("fotoEstudiante",t.asignadorFotoEstudiante)("sexoEstudiante",t.asignadorSexoEstudiante)("preferInfoId",t.asignadorPreferInfoId)}}function Er(i,e){if(i&1){let t=b();o(0,"div",62)(1,"h5",63),d(2,"Componente Registro de pagos estudiantes de carrera"),s(),o(3,"button",259),h("click",function(){let a=p(t).$implicit;return _(a.dismiss())}),s()(),o(4,"div",65),x(5,"app-sistemapagoslcch",285),s()}if(i&2){let t=u();r(5),l("modo",t.pagosModo)("infoId",t.pagosInfoId)("estudianteId",t.pagosEstudianteId)("nombreEstudiante",t.pagosNombreEstudiante)("fotoEstudiante",t.pagosFotoEstudiante)("sexoEstudiante",t.pagosSexoEstudiante)("gestionPredeterminada",t.pagosGestionPredeterminada)}}function br(i,e){if(i&1){let t=b();o(0,"div",62)(1,"h5",63),d(2,"Componente Historias"),s(),o(3,"button",259),h("click",function(){let a=p(t).$implicit;return _(a.dismiss())}),s()(),o(4,"div",65),x(5,"app-califhistorias",286),s()}if(i&2){let t=u();r(5),l("modo","modal_ci")("ciBusqueda",t.historialCiBusqueda)("institucion",t.historialInstitucionNombre)}}function Cr(i,e){if(i&1){let t=b();o(0,"button",289),h("click",function(){let a=p(t).$implicit;return _(a.action())}),d(1),s()}if(i&2){let t=e.$implicit;r(),I(" ",t.label," ")}}function Sr(i,e){if(i&1&&(o(0,"div",287),q(1,"async"),q(2,"async"),g(3,Cr,2,1,"button",288),q(4,"async"),s()),i&2){let t,n,a=u();l("ngStyle",T(8,Va,((t=H(1,2,a.menuStateinfoestudiantesifas$))==null?null:t.y)+"px",((t=H(2,4,a.menuStateinfoestudiantesifas$))==null?null:t.x)+"px")),r(3),l("ngForOf",(n=H(4,6,a.menuStateinfoestudiantesifas$))==null?null:n.items)}}var It=class It{constructor(e,t,n,a,c,m,v,f,C,S,w,y,$){this._infoest=e;this._est=t;this._anios=n;this._controles=a;this._tools=c;this._reportes=m;this._auth=v;this._inst=f;this._planteldoc=C;this._capture=S;this._pairing=w;this.router=y;this.sanitizer=$;this.modulesQuillEdicion={toolbar:[["bold","italic","underline","strike"],[{align:[]}],[{size:["small",!1,"large"]}],[{color:[]},{background:[]}],[{font:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","video"],["clean"]]};this.modulesQuillShow={toolbar:!1};this.estudianteId=null;this.nombreEstudiante=null;this.fotoEstudiante=null;this.sexoEstudiante=null;this.modo=null;this.habilitarSistemaPagosCarreras=!1;this.habilitarCamposMusicales=!1;this.institucionCaractisticasActual="";this.institucionNombreActual="";this.historialCiBusqueda="";this.historialInstitucionNombre="";this.AnimacionCargabtnModalestudiantesifas=!1;this.mostrarContrasenia=!1;this.sexoOptions=[];this.expedidoOptions=[];this.estadoOptions=[];this.especialidadOptions=[];this.tipoColegioOptions=[];this.nivelColegioOptions=[];this.gradoColegioOptions=[];this.OcupacionOptions=[];this.modoEdicionPerfilEstudiante=!1;this.capturaTokenFotoPerfil=null;this.capturaStatusFotoPerfil=null;this.isEsperandoFotoPerfil=!1;this.capturaIntervalIdFotoPerfil=null;this.isDraggingFoto=!1;this.isUploadingFoto=!1;this.uploadProgressFoto=0;this.fotoAnteriorPath=null;this.fotoTempPath=null;this.pairingToken=null;this.pairingStatus=null;this.pairingUrl=null;this.pairingQrDataUrl=null;this.pairingIntervalId=null;this.capturaToken=null;this.capturaStatus=null;this.capturaIntervalId=null;this.isCapturandoFotoPago=!1;this.fotoPagoAnteriorPath=null;this.fotoPagoTempPath=null;this.esSuperAdmin=!1;this.plantelDocentes=[];this.docAdminInput=new Pt("");this.docPCInput=new Pt("");this.docOtrosInput=new Pt("");this.mostrarListaDocAdmin=!1;this.mostrarListaDocPC=!1;this.mostrarListaDocOtros=!1;this.docentesFiltradosAdmin=[];this.docentesFiltradosPC=[];this.docentesFiltradosOtros=[];this.categoriaOptions=[];this.turnoOptions=[];this.cursoOptions=[];this.InstrumentoMusicalOptions=[];this.InstrumentoMusicalSecundarioOptions=[];this.VerificacionInscripciones=[];this.infoestudiantesifas=[];this.autoAbrioNuevoPorVacio=!1;this.paginainfoestudiantesifas=1;this.isLoadinginfoestudiantesifas=!1;this.AnimacionCargabtnModalinfoestudiantesifas=!1;this.filtertxtinfoestudiantesifas="";this.searchAplicado="";this.anios=[];this.selectedAnioId="";this.incluirSinAsignar=!0;this.isGenerandoCuadroInscripciones=!1;this.estadisticasModo="default";this.isLoadingEstadisticas=!1;this.estadisticasInscripciones=null;this.isLoadingDetalleEstadisticas=!1;this.detalleEstadisticasRows=[];this.detalleEstadisticasMeta=null;this.cursosParaListas=[];this.isLoadingCursosParaListas=!1;this.isGenerandoListasPreliminares=!1;this.incluirEspecialidadListas=!1;this.asignadorModo="general";this.asignadorEstudianteId=null;this.asignadorNombreEstudiante=null;this.asignadorFotoEstudiante=null;this.asignadorSexoEstudiante=null;this.asignadorPreferInfoId=null;this.pagosModo="general";this.pagosInfoId=null;this.pagosEstudianteId=null;this.pagosNombreEstudiante=null;this.pagosFotoEstudiante=null;this.pagosSexoEstudiante=null;this.pagosGestionPredeterminada=null;this.sortByColumn="FechInsc";this.sortDir="desc";this.estudianteInput=new Pt("");this.mostrarListaEstudiantes=!1;this.estudiantesFiltrados=[];this.isBuscandoEstudiante=!1;this.estudianteSeleccionado=null;this.busquedaEstudiantesEjecutada=!1;this.estudiantesPage=1;this.estudiantesPageSize=10;this.collectionSizeinfoestudiantesifas=0;this.pageSizeinfoestudiantesifas=10;this.pageSizeOptionsinfoestudiantesifas=[5,10,20,50];this.sortColumnsinfoestudiantesifas=[];this.menuStateinfoestudiantesifas$=this._tools.state$;this.newinfoestudiantesifas=this._infoest.createFormGroupinfoestudiantesifas(),this.newinfoestudiantesifasAnteriorAccion=this._infoest.createFormGroupinfoestudiantesifas(),this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this.newestudiantesifasAnteriorAccion=this._est.createFormGroupestudiantesifas()}ngOnInit(){console.log("foto",this.fotoEstudiante),this.cargarAnios(),this.cargarOptionsDesdeControles(),this.cargarOptionsEstudiantesDesdeControles(),this._auth.revisarSiEsSuperAdmin().subscribe(e=>{this.esSuperAdmin=e;let t=this.newinfoestudiantesifas.get("instituciones_id");if(t&&(e?t.setValidators([xe.required]):t.clearValidators(),t.updateValueAndValidity({emitEvent:!1})),e&&t){t.valueChanges.subscribe(a=>{let c=Number(a??0);this.cargarCaractisticasInstitucionActual(Number.isFinite(c)&&c>0?c:null)});let n=Number(t.value??0);this.cargarCaractisticasInstitucionActual(Number.isFinite(n)&&n>0?n:null)}}),this._auth.pedirPerfil().subscribe({next:e=>{if(this.esSuperAdmin)return;let t=Number(e?.usuario?.instituciones_id??0);this.cargarCaractisticasInstitucionActual(Number.isFinite(t)&&t>0?t:null)},error:()=>{}}),this.setupBuscadoresPlantel(),this.cargarPlantelDocentes(),this.setupBuscadorEstudiantes(),this.cargarVinculacionDesdeStorage()}generarReporteInscripcion(e,t){let n=!!t?.ocultarDatosFamiliares,a=Number(e?.estudiantesifas_id??e?.estudianteifas_id??0);if(!Number.isFinite(a)||a<=0){this._tools.MostrarMensaje("warning","No se pudo identificar el estudiante para el reporte");return}try{this._tools.MostrarMensajeLoading?.()}catch{}let c=this._est.Seleccionarestudiantesifas(a).pipe(de(f=>f?.data??f??null),ue(()=>Nt(null))),m=Number(e?.planteldocadmins_id??0),v=Number.isFinite(m)&&m>0?this._planteldoc.Seleccionarplanteldocentes(m).pipe(de(f=>f?.data??f??null),ue(()=>Nt(null))):Nt(null);fe({estudiante:c,docente:v}).subscribe({next:({estudiante:f,docente:C})=>{try{this._tools.OcultarMensajeLoading?.()}catch{}let S=W(W({},e??{}),f??{});S.FechNac=S.FechNac??S.FechaNac??"",S.Especialidad=S.Especialidad??S.InstrumentoMusical??"",S.CI=S.CI??S.Carnet??"";let w=C?String([C?.Nombres,C?.Apellidos].filter(Boolean).join(" ")).trim():"";this._reportes.GenerarFormularioInscripcion(S,w,n).catch(y=>{console.error(y),this._tools.MostrarMensaje("error","No se pudo generar el reporte de inscripci\xF3n")})},error:f=>{console.error(f);try{this._tools.OcultarMensajeLoading?.()}catch{}this._tools.MostrarMensaje("error","No se pudo preparar la informaci\xF3n para el reporte")}})}normalizarTexto(e){return(e??"").toString().trim().toUpperCase()}ciSoloNumeros(e){return String(e??"").replace(/\D+/g,"")}ciEstudianteNumerico(){return this.ciSoloNumeros(this.estudianteSeleccionado?.CI??"")}institucionHistorialNombre(){let e=(this.institucionNombreActual??"").toString().trim();if(e)return e;let t=(this.estudianteSeleccionado?.NombreInstitucion??this.estudianteSeleccionado?.Nombre??"").toString().trim();return t||""}abrirHistorialDesdeFormulario(e){e&&(e.preventDefault?.(),e.stopPropagation?.());let t=this.ciEstudianteNumerico();if(!t){this._tools.MostrarMensaje("warning","No se pudo identificar el CI del estudiante");return}this.historialCiBusqueda=t,this.historialInstitucionNombre=this.institucionHistorialNombre(),this.modalCalifhistoriasRef=this._tools.openModal(this.modalOtroComponentecalifhistorias,"xl")}abrirHistorialDesdeInscripcion(e,t){t&&(t.preventDefault?.(),t.stopPropagation?.());let n=this.ciSoloNumeros(e?.CI??e?.ci??"");if(!n){this._tools.MostrarMensaje("warning","No se pudo identificar el CI del estudiante");return}let a=(e?.NombreInstitucion??e?.nombre_institucion??"").toString().trim();this.historialCiBusqueda=n,this.historialInstitucionNombre=a||this.institucionHistorialNombre(),this.modalCalifhistoriasRef=this._tools.openModal(this.modalOtroComponentecalifhistorias,"xl")}cargarCaractisticasInstitucionActual(e){if(!e){this.institucionCaractisticasActual="",this.habilitarSistemaPagosCarreras=!1,this.habilitarCamposMusicales=!1,this.institucionNombreActual="";return}this._inst.Seleccionarinstituciones(e).subscribe({next:t=>{let n=t?.data?.Caractisticas;this.institucionCaractisticasActual=(n??"").toString(),this.habilitarSistemaPagosCarreras=this.normalizarTexto(this.institucionCaractisticasActual).includes("SISTEMA PAGOS CARRERAS"),this.habilitarCamposMusicales=this.normalizarTexto(this.institucionCaractisticasActual).includes("INSTITUTO MUSICAL");let a=(t?.data?.NombreInstitucion??t?.data?.Nombre??"").toString().trim();this.institucionNombreActual=a},error:()=>{this.institucionCaractisticasActual="",this.habilitarSistemaPagosCarreras=!1,this.habilitarCamposMusicales=!1,this.institucionNombreActual=""}})}cargarOptionsEstudiantesDesdeControles(){let e=["SEXO","EXPEDIDO","ESTADO","ESPECIALIDAD","TIPO COLEGIO","GRADO DE COLEGIO","NIVEL EN COLEGIO","OCUPACIONES PADRES"];this._controles.ObtenerOptionsSelectPorCategorias(e).subscribe({next:t=>{this.sexoOptions=t?.SEXO||[],this.expedidoOptions=t?.EXPEDIDO||[],this.estadoOptions=t?.ESTADO||[],this.especialidadOptions=t?.ESPECIALIDAD||[],this.tipoColegioOptions=t?.["TIPO COLEGIO"]||[],this.nivelColegioOptions=t?.["NIVEL EN COLEGIO"]||[],this.gradoColegioOptions=t?.["GRADO DE COLEGIO"]||[],this.OcupacionOptions=t?.["OCUPACIONES PADRES"]||[]},error:()=>{this.sexoOptions=[],this.expedidoOptions=[],this.estadoOptions=[],this.especialidadOptions=[],this.tipoColegioOptions=[],this.nivelColegioOptions=[],this.gradoColegioOptions=[],this.OcupacionOptions=[]}})}abrirModalRegistroEstudianteCompleto(e){this.limpiarFotoTemporalSiCorresponde(),this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!1,this.mostrarContrasenia=!1,this.modoEdicionPerfilEstudiante=!1;let t=(e??"").toString().trim();t&&this.newestudiantesifas.patchValue({CI:t}),this.newestudiantesifas.get("Estado")?.value||this.newestudiantesifas.patchValue({Estado:"ACTIVO"}),this.modalRegistroEstudianteCompletoRef=this._tools.openModal(this.modalRegistroEstudianteCompleto,"xl")}getEstudianteIdActual(){let e=Number(this.estudianteSeleccionado?.id??0);if(e)return e;let t=Number(this.newinfoestudiantesifas?.get("estudiantesifas_id")?.value??0);if(t)return t;let n=Number(this.estudianteId??0);return n||0}puedeAbrirPerfilEstudiante(){return this.getEstudianteIdActual()>0}abrirPerfilEstudianteActual(e){e&&(e.preventDefault?.(),e.stopPropagation?.());let t=this.getEstudianteIdActual();if(!t){this._tools.MostrarMensaje("warning","Seleccione un estudiante primero");return}this.abrirModalEdicionEstudianteCompleto(t)}abrirModalEdicionEstudianteCompleto(e){this.limpiarFotoTemporalSiCorresponde(),this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!1,this.mostrarContrasenia=!1,this.modoEdicionPerfilEstudiante=!0,this._tools.MostrarMensajeLoading(),this._est.Seleccionarestudiantesifas(Number(e)).subscribe({next:t=>{let n=t?.data??null;n&&this.newestudiantesifas.patchValue(n),this.newestudiantesifas.get("Estado")?.value||this.newestudiantesifas.patchValue({Estado:"ACTIVO"}),this.modalRegistroEstudianteCompletoRef=this._tools.openModal(this.modalRegistroEstudianteCompleto,"xl"),this._tools.MostrarMensajeSuccess()},error:()=>{this._tools.MostrarMensajeError(),this.modoEdicionPerfilEstudiante=!1}})}resetestudiantesifas(){this.isEsperandoFotoPerfil&&this.cancelarEsperaCapturaFotoPerfil(!0),this.limpiarFotoTemporalSiCorresponde(),this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!1,this.mostrarContrasenia=!1,this.modoEdicionPerfilEstudiante=!1,this.modalRegistroEstudianteCompletoRef&&this._tools.closeModal(this.modalRegistroEstudianteCompletoRef)}AutoCompletarLastestudiantesifas(){this.newestudiantesifas.setValue(this.newestudiantesifasAnteriorAccion.value),this.newestudiantesifas.patchValue({id:0})}ValidacionestudiantesifasxElemento(e){return this._tools.obtenerValidationClass(this.newestudiantesifas,e)}ValidacionTodoElementoestudiantesifas(){Object.values(this.newestudiantesifas.controls).forEach(e=>{e.markAsTouched(),e.markAsDirty()})}AgregarModificarestudiantesifas(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida de la foto");return}if(this.newestudiantesifas.invalid){this.ValidacionTodoElementoestudiantesifas(),this._tools.MostrarMensajeFrmIncompleto(),this.AnimacionCargabtnModalestudiantesifas=!1;return}this.AnimacionCargabtnModalestudiantesifas=!0,this._tools.MostrarMensajeLoading(),this.newestudiantesifasAnteriorAccion.setValue(this.newestudiantesifas.value);let e=this.newestudiantesifas.controls.id?.value;if(e){if(!this.modoEdicionPerfilEstudiante){this._tools.MensajeInformacion("Acci\xF3n no permitida","Desde inscripci\xF3n solo se registra (no se modifica).","info"),this.AnimacionCargabtnModalestudiantesifas=!1;return}this._est.Modificarestudiantesifas(this.newestudiantesifas.value,e).subscribe({next:t=>{let n=t?.data??null;n&&(this.estudianteSeleccionado=n,this.estudianteId||this.estudianteInput.setValue(this.getNombreCompletoEstudiante(n),{emitEvent:!1})),this.AnimacionCargabtnModalestudiantesifas=!1,this._tools.MostrarMensajeSuccess(),this.resetestudiantesifas()},error:t=>{let n=t?.status,a=t?.error?.message;n===409?this._tools.MensajeInformacion("CI duplicado",a||"Ya existe un estudiante con ese CI.","warning"):this._tools.MostrarMensajeError(),this.AnimacionCargabtnModalestudiantesifas=!1}});return}this._est.Agregarestudiantesifas(this.newestudiantesifas.value).subscribe({next:t=>{let n=t?.data;this.fotoTempPath=null,this.fotoAnteriorPath=null,n?.id&&this.seleccionarEstudiante(n),this.AnimacionCargabtnModalestudiantesifas=!1,this._tools.MostrarMensajeSuccess(),this.resetestudiantesifas()},error:t=>{let n=t?.status,a=t?.error?.message;n===409?this._tools.MensajeInformacion("CI duplicado",a||"Ya existe un estudiante con ese CI.","warning"):this._tools.MostrarMensajeError(),this.AnimacionCargabtnModalestudiantesifas=!1}})}iniciarCapturaFotoPorCelular(){return k(this,null,function*(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida actual");return}if(!this.pairingToken||this.pairingStatus!=="LINKED"){this._tools.MostrarMensaje("info","Primero vincule el celular (QR)"),yield this.abrirVinculacionCelular();return}this._tools.MostrarMensajeLoading();let e=this.newestudiantesifas.get("id")?.value?Number(this.newestudiantesifas.get("id")?.value):null;this._pairing.solicitarCaptura(this.pairingToken,e,"Foto").subscribe({next:t=>{let n=t?.data?.token;if(!n){this._tools.MostrarMensajeError();return}this.capturaTokenFotoPerfil=n,this.capturaStatusFotoPerfil=t?.data?.status??"PENDING",this.isEsperandoFotoPerfil=!0,this.iniciarPollingCapturaFotoPerfil(),this._tools.MostrarMensajeSuccess()},error:t=>{console.log("ERROR solicitando captura",t),this._tools.MostrarMensajeError()}})})}iniciarPollingCapturaFotoPerfil(){this.detenerPollingCapturaFotoPerfil(),this.capturaTokenFotoPerfil&&(this.capturaIntervalIdFotoPerfil=setInterval(()=>{this.capturaTokenFotoPerfil&&this._capture.estadoSesion(this.capturaTokenFotoPerfil).subscribe({next:e=>{let t=e?.data?.status,n=e?.data?.file_path;if(this.capturaStatusFotoPerfil=t??this.capturaStatusFotoPerfil,t==="UPLOADED"&&n){let a=this.fotoTempPath;this.newestudiantesifas.patchValue({Foto:n}),this.fotoTempPath=n,a&&a!==n&&a!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(a),this.isUploadingFoto=!1,this.uploadProgressFoto=0,this.isEsperandoFotoPerfil=!1,this.detenerPollingCapturaFotoPerfil(),this._tools.MostrarMensaje("success","Foto recibida desde el celular")}},error:()=>{}})},2e3))}detenerPollingCapturaFotoPerfil(){this.capturaIntervalIdFotoPerfil&&(clearInterval(this.capturaIntervalIdFotoPerfil),this.capturaIntervalIdFotoPerfil=null)}cancelarEsperaCapturaFotoPerfil(e=!1){let t=this.capturaStatusFotoPerfil;this.detenerPollingCapturaFotoPerfil(),this.capturaStatusFotoPerfil=null,this.capturaTokenFotoPerfil=null,this.isEsperandoFotoPerfil=!1,this.pairingToken&&t!=="UPLOADED"&&this._pairing.cancelarCaptura(this.pairingToken).subscribe({next:()=>{e||this._tools.MostrarMensaje("info","Espera cancelada")},error:()=>{}})}abrirSelectorFoto(e){e.click()}onFotoDragOver(e){e.preventDefault(),this.isDraggingFoto=!0}onFotoDragLeave(e){e.preventDefault(),this.isDraggingFoto=!1}onFotoDrop(e){e.preventDefault(),this.isDraggingFoto=!1;let t=e.dataTransfer?.files;t&&this.handleFotoFiles(t)}onFotoFileSelected(e){let t=e.target,n=t.files;n&&this.handleFotoFiles(n),t.value=""}handleFotoFiles(e){let t=e.item(0);t&&(e.length>1&&this._tools.MostrarMensaje("warning","Solo se permite 1 archivo"),this.subirFoto(t))}subirFoto(e){this.isUploadingFoto=!0,this.uploadProgressFoto=0,this._tools.SubirArchivo(e,"Foto").subscribe({next:t=>{if(t.type===lt.UploadProgress&&t.total){this.uploadProgressFoto=Math.round(t.loaded/t.total*100);return}if(t.type===lt.Response){let a=t.body?.filePath;if(a){let c=this.fotoTempPath;this.newestudiantesifas.patchValue({Foto:a}),this.fotoTempPath=a,c&&c!==a&&c!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(c)}this.isUploadingFoto=!1}},error:t=>{console.error("Error subiendo foto",t),this.isUploadingFoto=!1,this.uploadProgressFoto=0,this._tools.MostrarMensajeError()}})}limpiarFotoTemporalSiCorresponde(){this.fotoTempPath&&this.fotoTempPath!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(this.fotoTempPath),this.fotoTempPath=null,this.fotoAnteriorPath=null,this.isDraggingFoto=!1,this.isUploadingFoto=!1,this.uploadProgressFoto=0}ngOnDestroy(){this.isEsperandoFotoPerfil&&this.cancelarEsperaCapturaFotoPerfil(!0),this.isCapturandoFotoPago&&this.cancelarEsperaCaptura(!0),this.detenerPollingVinculacion(),this.detenerPollingCaptura(),this.detenerPollingCapturaFotoPerfil()}cargarVinculacionDesdeStorage(){let e=localStorage.getItem("lcch_capture_pairing_token");e&&(this.pairingToken=e,this.refrescarEstadoVinculacion(!1))}refrescarEstadoVinculacion(e){this.pairingToken&&this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:t=>{let n=t?.data?.status??this.pairingStatus;if(this.pairingStatus=n,n==="REVOKED"||n==="EXPIRED"){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null;return}e&&this._tools.MostrarMensaje("success","Vinculaci\xF3n actualizada")},error:t=>{t?.status===404&&(localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null)}})}abrirVinculacionCelular(){return k(this,null,function*(){this._tools.MostrarMensajeLoading();let e=()=>new Promise((t,n)=>{let a=()=>{this._pairing.crearVinculacion().subscribe({next:c=>{let m=c?.data?.token;if(!m)return n(new Error("No token"));this.pairingToken=m,this.pairingStatus=c?.data?.status??null,localStorage.setItem("lcch_capture_pairing_token",m),t(m)},error:c=>n(c)})};if(this.pairingToken){this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:c=>{let m=c?.data?.status??null;if(this.pairingStatus=m,m==="EXPIRED"||m==="REVOKED"){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null,a();return}t(this.pairingToken)},error:c=>{if(c?.status===404){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null,a();return}n(c)}});return}a()});try{let t=yield e(),n=this.router.serializeUrl(this.router.createUrlTree(["/captura-celular",t])),a=window.location.hostname,m=(a==="localhost"||a==="127.0.0.1")&&ct.frontendPublicBaseUrl?ct.frontendPublicBaseUrl:document.baseURI;this.pairingUrl=new URL(n,m).toString();try{this.pairingQrDataUrl=yield Ue.toDataURL(this.pairingUrl,{width:240,margin:1})}catch{this.pairingQrDataUrl=null}this.modalVincularCelularRef=this._tools.openModal(this.modalVincularCelular,"md"),this.modalVincularCelularRef.result.finally(()=>{this.detenerPollingVinculacion()}),this.iniciarPollingVinculacion(),this._tools.MostrarMensajeSuccess()}catch(t){console.log("ERROR creando vinculaci\xF3n",t),this._tools.MostrarMensajeError()}})}iniciarPollingVinculacion(){this.detenerPollingVinculacion(),this.pairingToken&&(this.pairingIntervalId=setInterval(()=>{this.pairingToken&&this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:e=>{let t=e?.data?.status;this.pairingStatus=t??this.pairingStatus,t==="LINKED"&&this.detenerPollingVinculacion()},error:()=>{}})},2e3))}detenerPollingVinculacion(){this.pairingIntervalId&&(clearInterval(this.pairingIntervalId),this.pairingIntervalId=null)}iniciarCapturaFotoPagoPorCelular(){return k(this,null,function*(){if(!this.pairingToken||this.pairingStatus!=="LINKED"){this._tools.MostrarMensaje("info","Primero vincule el celular (QR)"),yield this.abrirVinculacionCelular();return}this._tools.MostrarMensajeLoading();let e=this.estudianteId?Number(this.estudianteId):this.newinfoestudiantesifas.get("estudiantesifas_id")?.value?Number(this.newinfoestudiantesifas.get("estudiantesifas_id")?.value):null;this._pairing.solicitarCaptura(this.pairingToken,e,"pagosAnualesUnicos").subscribe({next:t=>{let n=t?.data?.token;if(!n){this._tools.MostrarMensajeError();return}this.capturaToken=n,this.capturaStatus=t?.data?.status??"PENDING",this.isCapturandoFotoPago=!0,this.iniciarPollingCaptura(),this._tools.MostrarMensajeSuccess()},error:t=>{console.log("ERROR solicitando captura",t),this._tools.MostrarMensajeError()}})})}iniciarPollingCaptura(){this.detenerPollingCaptura(),this.capturaToken&&(this.capturaIntervalId=setInterval(()=>{this.capturaToken&&this._capture.estadoSesion(this.capturaToken).subscribe({next:e=>{let t=e?.data?.status,n=e?.data?.file_path;if(this.capturaStatus=t??this.capturaStatus,t==="UPLOADED"&&n){let a=this.fotoPagoTempPath;this.newinfoestudiantesifas.patchValue({FotoPago:n}),this.fotoPagoTempPath=n,a&&a!==n&&a!==this.fotoPagoAnteriorPath&&this._tools.EliminarArchivo(a),this.isCapturandoFotoPago=!1,this.detenerPollingCaptura(),this._tools.MostrarMensaje("success","FotoPago recibida desde el celular")}},error:()=>{}})},2e3))}detenerPollingCaptura(){this.capturaIntervalId&&(clearInterval(this.capturaIntervalId),this.capturaIntervalId=null)}cancelarEsperaCaptura(e=!1){let t=this.capturaStatus;this.detenerPollingCaptura(),this.capturaStatus=null,this.capturaToken=null,this.isCapturandoFotoPago=!1,this.pairingToken&&t!=="UPLOADED"&&this._pairing.cancelarCaptura(this.pairingToken).subscribe({next:()=>{e||this._tools.MostrarMensaje("info","Espera cancelada")},error:()=>{}})}ngOnChanges(e){e.estudianteId&&!e.estudianteId.firstChange&&this.CargarSegunModo()}snapshotFormValue(e){let t=e;return typeof t.getRawValue=="function"?t.getRawValue():e.value}getTableColspan(){let e=10;return this.esSuperAdmin&&(e+=1),this.estudianteId||(e+=3),e}setupBuscadoresPlantel(){this.docAdminInput.valueChanges.subscribe(e=>{let t=(e??"").toString();if(t===""){this.docentesFiltradosAdmin=[],this.newinfoestudiantesifas.patchValue({planteldocadmins_id:""});return}if(t.trim()===""){this.docentesFiltradosAdmin=this.filtrarPlantelDocentes("",!0);return}this.newinfoestudiantesifas.patchValue({planteldocadmins_id:""}),this.docentesFiltradosAdmin=this.filtrarPlantelDocentes(t.toLowerCase().trim())}),this.docPCInput.valueChanges.subscribe(e=>{let t=(e??"").toString();if(t===""){this.docentesFiltradosPC=[],this.newinfoestudiantesifas.patchValue({planteldocadmins_idPC:""});return}if(t.trim()===""){this.docentesFiltradosPC=this.filtrarPlantelDocentes("",!0);return}this.newinfoestudiantesifas.patchValue({planteldocadmins_idPC:""}),this.docentesFiltradosPC=this.filtrarPlantelDocentes(t.toLowerCase().trim())}),this.docOtrosInput.valueChanges.subscribe(e=>{let t=(e??"").toString();if(t===""){this.docentesFiltradosOtros=[],this.newinfoestudiantesifas.patchValue({planteldocadmins_idOtros:""});return}if(t.trim()===""){this.docentesFiltradosOtros=this.filtrarPlantelDocentes("",!0);return}this.newinfoestudiantesifas.patchValue({planteldocadmins_idOtros:""}),this.docentesFiltradosOtros=this.filtrarPlantelDocentes(t.toLowerCase().trim())})}cargarPlantelDocentes(){this._planteldoc.Obtenerplanteldocentes().subscribe({next:e=>{let t=e?.data||[];this.plantelDocentes=t.filter(n=>this.normalizar(n?.Visibilidad)!=="OCULTO"),this.syncBuscadoresPlantelConForm()},error:e=>{console.error("Error al cargar planteldocentes",e),this.plantelDocentes=[]}})}getInstitucionFiltroId(){let e=this.newinfoestudiantesifas.get("instituciones_id")?.value;return e==null||String(e).trim()===""?null:String(e)}filtrarPlantelDocentes(e,t=!1){let n=this.getInstitucionFiltroId(),a=(this.plantelDocentes||[]).filter(c=>!(n&&String(c?.instituciones_id)!==n)).sort((c,m)=>this.getNombreCompletoDocente(c).localeCompare(this.getNombreCompletoDocente(m)));return t?a.slice(0,50):e?a.filter(c=>this.getNombreCompletoDocente(c).toLowerCase().includes(e)).slice(0,25):[]}normalizar(e){return(e??"").toString().trim().toUpperCase()}getNombreCompletoDocente(e){let t=(e?.Nombres??"").toString().trim(),n=(e?.Apellidos??"").toString().trim();return`${t} ${n}`.trim()}docenteInactivo(e){return this.normalizar(e?.Estado)==="INACTIVO"}seleccionarDocenteAdmin(e){!e||this.docenteInactivo(e)||(this.newinfoestudiantesifas.patchValue({planteldocadmins_id:e?.id??""}),this.docAdminInput.setValue(this.getNombreCompletoDocente(e),{emitEvent:!1}),this.mostrarListaDocAdmin=!1,this.docentesFiltradosAdmin=[])}seleccionarDocentePC(e){!e||this.docenteInactivo(e)||(this.newinfoestudiantesifas.patchValue({planteldocadmins_idPC:e?.id??""}),this.docPCInput.setValue(this.getNombreCompletoDocente(e),{emitEvent:!1}),this.mostrarListaDocPC=!1,this.docentesFiltradosPC=[])}seleccionarDocenteOtros(e){!e||this.docenteInactivo(e)||(this.newinfoestudiantesifas.patchValue({planteldocadmins_idOtros:e?.id??""}),this.docOtrosInput.setValue(this.getNombreCompletoDocente(e),{emitEvent:!1}),this.mostrarListaDocOtros=!1,this.docentesFiltradosOtros=[])}syncBuscadoresPlantelConForm(){if(!this.plantelDocentes?.length)return;let e=this.newinfoestudiantesifas.get("planteldocadmins_id")?.value,t=this.newinfoestudiantesifas.get("planteldocadmins_idPC")?.value,n=this.newinfoestudiantesifas.get("planteldocadmins_idOtros")?.value,a=f=>(this.plantelDocentes||[]).find(C=>String(C?.id)===String(f)),c=e?a(e):null,m=t?a(t):null,v=n?a(n):null;c&&this.docAdminInput.setValue(this.getNombreCompletoDocente(c),{emitEvent:!1}),m&&this.docPCInput.setValue(this.getNombreCompletoDocente(m),{emitEvent:!1}),v&&this.docOtrosInput.setValue(this.getNombreCompletoDocente(v),{emitEvent:!1})}cargarOptionsDesdeControles(){let e=["TIPO DE ESTUDIANTE","TURNO","LVLCURSO","ESPECIALIDAD","ESPECIALIDAD SECUNDARIA","VERIFICACI\xD3N INSCRIPCIONES"];this._controles.ObtenerOptionsSelectPorCategorias(e).subscribe({next:t=>{this.categoriaOptions=t?.["TIPO DE ESTUDIANTE"]||[],this.turnoOptions=t?.TURNO||[],this.cursoOptions=t?.LVLCURSO||[],this.InstrumentoMusicalOptions=t?.ESPECIALIDAD||[],this.InstrumentoMusicalSecundarioOptions=t?.["ESPECIALIDAD SECUNDARIA"]||[],this.VerificacionInscripciones=t?.["VERIFICACI\xD3N INSCRIPCIONES"]||[]},error:()=>{this.categoriaOptions=[],this.turnoOptions=[],this.cursoOptions=[],this.InstrumentoMusicalOptions=[],this.InstrumentoMusicalSecundarioOptions=[],this.VerificacionInscripciones=[]}})}abrirModalNuevoInfoestudiantesifas(){this.modalGestioninfoestudiantesifasRef=this._tools.openModal(this.modalgestioninfoestudiantesifas,"xl")}cargarAnios(){this._anios.ObtenerAniosConPredeterminado().subscribe({next:e=>{if(this.anios=e?.anios||[],this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){let t=e?.predeterminado;t?.id?this.selectedAnioId=t.id:this.anios?.length&&(this.selectedAnioId=this.anios[0]?.id??"")}this.CargarSegunModo()},error:e=>{console.error("Error al cargar anios",e),this.CargarSegunModo()}})}buildNombreCompleto(e,t,n){return`${(e??"").toString().trim()} ${(t??"").toString().trim()} ${(n??"").toString().trim()}`.replace(/\s+/g," ").trim()}abrirAsignadorMateriasGeneral(){this.asignadorModo="general",this.asignadorEstudianteId=null,this.asignadorNombreEstudiante=null,this.asignadorFotoEstudiante=null,this.asignadorSexoEstudiante=null,this.asignadorPreferInfoId=null,this.modalAsignacionesEstudiantesRef=this._tools.openModal(this.modalOtroComponenteAsignacionesEstudiantes,"xl"),this.modalAsignacionesEstudiantesRef?.result?.finally(()=>{this.Cargarinfoestudiantesifas()})}abrirAsignadorMateriasDesdeInscripcion(e){this.asignadorModo="estudiante",this.asignadorPreferInfoId=Number(e?.id??0)||null;let t=this.estudianteId?Number(this.estudianteId):Number(e?.estudiantesifas_id??0);this.asignadorEstudianteId=Number.isFinite(t)&&t>0?t:null,this.estudianteId?(this.asignadorNombreEstudiante=this.nombreEstudiante,this.asignadorFotoEstudiante=this.fotoEstudiante,this.asignadorSexoEstudiante=this.sexoEstudiante):(this.asignadorNombreEstudiante=this.buildNombreCompleto(e?.Ap_Paterno,e?.Ap_Materno,e?.Nombre)||(this.asignadorEstudianteId?`Estudiante #${this.asignadorEstudianteId}`:null),this.asignadorFotoEstudiante=null,this.asignadorSexoEstudiante=null,this.asignadorEstudianteId&&this._est.Seleccionarestudiantesifas(this.asignadorEstudianteId).subscribe({next:n=>{let a=n?.data;if(!a)return;this.asignadorFotoEstudiante=a?.Foto??a?.foto??this.asignadorFotoEstudiante,this.asignadorSexoEstudiante=a?.Sexo??a?.sexo??this.asignadorSexoEstudiante;let c=this.buildNombreCompleto(a?.Ap_Paterno,a?.Ap_Materno,a?.Nombre);c&&(this.asignadorNombreEstudiante=c)},error:()=>{}})),this.modalAsignacionesEstudiantesRef=this._tools.openModal(this.modalOtroComponenteAsignacionesEstudiantes,"xl"),this.modalAsignacionesEstudiantesRef?.result?.finally(()=>{this.Cargarinfoestudiantesifas()})}abrirRegistroPagoDesdeInscripcion(e){this.pagosModo="estudiante";let t=Number(e?.id??0);this.pagosInfoId=Number.isFinite(t)&&t>0?t:null;let n=this.estudianteId?Number(this.estudianteId):Number(e?.estudiantesifas_id??0);this.pagosEstudianteId=Number.isFinite(n)&&n>0?n:null;let a=String(e?.Anio??"").trim();if(this.pagosGestionPredeterminada=a||String(new Date().getFullYear()),this.estudianteId?(this.pagosNombreEstudiante=this.nombreEstudiante,this.pagosFotoEstudiante=this.fotoEstudiante,this.pagosSexoEstudiante=this.sexoEstudiante):(this.pagosNombreEstudiante=this.buildNombreCompleto(e?.Ap_Paterno,e?.Ap_Materno,e?.Nombre)||(this.pagosEstudianteId?`Estudiante #${this.pagosEstudianteId}`:null),this.pagosFotoEstudiante=null,this.pagosSexoEstudiante=null,this.pagosEstudianteId&&this._est.Seleccionarestudiantesifas(this.pagosEstudianteId).subscribe({next:c=>{let m=c?.data;if(!m)return;this.pagosFotoEstudiante=m?.Foto??m?.foto??this.pagosFotoEstudiante,this.pagosSexoEstudiante=m?.Sexo??m?.sexo??this.pagosSexoEstudiante;let v=this.buildNombreCompleto(m?.Ap_Paterno,m?.Ap_Materno,m?.Nombre);v&&(this.pagosNombreEstudiante=v)},error:()=>{}})),!this.pagosInfoId){this._tools.MostrarMensaje("warning","No se pudo identificar la inscripci\xF3n del estudiante");return}this.modalRegistrarpagosRef=this._tools.openModal(this.modalOtroComponenteRegistrarpagos,"xl")}onAnioChange(){this.paginainfoestudiantesifas=1,this.Cargarinfoestudiantesifas(),this.modalEstadisticasRef&&this.cargarEstadisticasInscripciones()}generarCuadroInscripciones(){if(this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){this._tools.MostrarMensaje("warning","Seleccione un a\xF1o para generar el cuadro");return}if(!this.isGenerandoCuadroInscripciones){this.isGenerandoCuadroInscripciones=!0;try{let e=this.getInstitucionIdParaReportes();this._reportes.GenerarCuadroInscripciones2026(1,Number(this.selectedAnioId),"MIXTO",this.incluirSinAsignar,e)}catch(e){console.error(e),this._tools.MostrarMensaje("error","No se pudo generar el cuadro de inscripciones")}finally{setTimeout(()=>{this.isGenerandoCuadroInscripciones=!1},1200)}}}getInstitucionIdParaReportes(){let e=this.getInstitucionFiltroId();if(!e)return null;let t=Number(e);return Number.isFinite(t)&&t>0?t:null}abrirModalListasPreliminaresCursos(){if(this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){this._tools.MostrarMensaje("warning","Seleccione un a\xF1o para generar las listas");return}this.cursosParaListas=[],this.isLoadingCursosParaListas=!0,this.incluirEspecialidadListas=!1,this.modalListasPreliminaresCursosRef=this._tools.openModal(this.modalListasPreliminaresCursos,"lg");let e=this.getInstitucionIdParaReportes();this._infoest.ObtenerEstadisticasInscripciones({anio_id:Number(this.selectedAnioId),include_sin_asignar:this.incluirSinAsignar?1:0,anio_scope:"default",instituciones_id:e??void 0}).subscribe({next:t=>{let n=Array.isArray(t?.por_curso_paralelo)?t.por_curso_paralelo:[];this.cursosParaListas=n.map(a=>({curso:(a?.curso??"").toString().trim(),paralelo:(a?.paralelo??"").toString().trim(),paraleloLabel:(a?.paralelo_label??a?.paralelo??"").toString().trim()||"SIN DETERMINAR",total:Number(a?.total??0)||0,selected:!0})).filter(a=>a.curso!=="").sort((a,c)=>{let m=a.curso.localeCompare(c.curso);return m!==0?m:a.paraleloLabel.localeCompare(c.paraleloLabel)}),this.isLoadingCursosParaListas=!1},error:t=>{console.error("Error al cargar cursos para listas",t),this.cursosParaListas=[],this.isLoadingCursosParaListas=!1}})}seleccionarTodosCursosListas(e){(this.cursosParaListas||[]).forEach(t=>t.selected=e)}cursosSeleccionadosCount(){return(this.cursosParaListas||[]).filter(e=>!!e.selected).length}generarListasPreliminaresSeleccionadas(e){return k(this,null,function*(){if(this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){this._tools.MostrarMensaje("warning","Seleccione un a\xF1o");return}let t=(this.cursosParaListas||[]).filter(n=>!!n.selected).map(n=>({curso:n.curso,paralelo:n.paralelo}));if(t.length===0){this._tools.MostrarMensaje("warning","Seleccione al menos un curso");return}if(!this.isGenerandoListasPreliminares){this.isGenerandoListasPreliminares=!0;try{let n=this.getInstitucionIdParaReportes();yield this._reportes.GenerarListaPreliminarAlumnos2026(Number(this.selectedAnioId),t,n,this.incluirSinAsignar,this.incluirEspecialidadListas);try{e?.close?.("ok")}catch{}}catch(n){console.error(n),this._tools.MostrarMensaje("error","No se pudo generar las listas")}finally{this.isGenerandoListasPreliminares=!1}}})}abrirModalEstadisticas(){this.modalEstadisticasRef=this._tools.openModal(this.modalOtroComponenteEstadisticas,"xl"),this.cargarEstadisticasInscripciones(),this.modalEstadisticasRef.result.finally(()=>{this.isLoadingEstadisticas=!1})}cargarEstadisticasInscripciones(){if(this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){this.estadisticasInscripciones=null;return}this.isLoadingEstadisticas=!0;let e=this.getInstitucionIdParaReportes(),t=this.estadisticasModo==="both"||this.incluirSinAsignar?1:0;this._infoest.ObtenerEstadisticasInscripciones({anio_id:Number(this.selectedAnioId),include_sin_asignar:t,anio_scope:this.estadisticasModo,instituciones_id:e??void 0}).subscribe({next:n=>{this.estadisticasInscripciones=n??null,this.isLoadingEstadisticas=!1},error:n=>{console.error("Error al cargar estad\xEDsticas",n),this.estadisticasInscripciones=null,this.isLoadingEstadisticas=!1}})}getOtrosCount(e,t){let n=Number(e??0),a=this.getSexoCount(t,"MASCULINO"),c=this.getSexoCount(t,"FEMENINO"),m=n-a-c;return Number.isFinite(m)&&m>0?m:0}abrirDetalleEstadisticasCurso(e,t){this.abrirDetalleEstadisticas({curso:(e?.curso??"").toString().trim(),usarParalelo:!1,paralelo:"",sexo:t??"",edad:null})}abrirDetalleEstadisticasCursoParalelo(e,t){this.abrirDetalleEstadisticas({curso:(e?.curso??"").toString().trim(),usarParalelo:!0,paralelo:(e?.paralelo??"").toString().trim(),sexo:t??"",edad:null})}abrirDetalleEstadisticasCursoEdad(e,t){let n=Number(t??0);this.abrirDetalleEstadisticas({curso:(e?.curso??"").toString().trim(),usarParalelo:!1,paralelo:"",sexo:"",edad:Number.isFinite(n)&&n>0?n:null})}abrirDetalleEstadisticasCursoParaleloEdad(e,t){let n=Number(t??0);this.abrirDetalleEstadisticas({curso:(e?.curso??"").toString().trim(),usarParalelo:!0,paralelo:(e?.paralelo??"").toString().trim(),sexo:"",edad:Number.isFinite(n)&&n>0?n:null})}abrirDetalleEstadisticasCursoInstrumento(e,t){let n=(t??"").toString().trim();if(!n){this._tools.MostrarMensaje("warning","No se pudo identificar el instrumento");return}this.abrirDetalleEstadisticas({curso:(e?.curso??"").toString().trim(),usarParalelo:!1,paralelo:"",sexo:"",edad:null,instrumento:n})}abrirDetalleEstadisticasCursoParaleloInstrumento(e,t){let n=(t??"").toString().trim();if(!n){this._tools.MostrarMensaje("warning","No se pudo identificar el instrumento");return}this.abrirDetalleEstadisticas({curso:(e?.curso??"").toString().trim(),usarParalelo:!0,paralelo:(e?.paralelo??"").toString().trim(),sexo:"",edad:null,instrumento:n})}abrirDetalleEstadisticas(e){if(this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){this._tools.MostrarMensaje("warning","Seleccione un a\xF1o");return}if(!e.curso){this._tools.MostrarMensaje("warning","No se pudo identificar el curso");return}this.detalleEstadisticasRows=[],this.detalleEstadisticasMeta={curso:e.curso,paralelo:e.usarParalelo?e.paralelo||"SIN DETERMINAR":null,sexo:e.sexo||"TODOS",edad:e.edad||null,instrumento:e.instrumento??null?String(e.instrumento).trim():null},this.modalDetalleEstadisticasRef=this._tools.openModal(this.modalDetalleEstadisticas,"lg"),this.isLoadingDetalleEstadisticas=!0;let t=this.getInstitucionIdParaReportes(),n=this.estadisticasModo==="both"||this.incluirSinAsignar?1:0;this._infoest.ObtenerEstadisticasInscripcionesDetalle({anio_id:Number(this.selectedAnioId),curso:e.curso,usar_paralelo:e.usarParalelo?1:0,paralelo:e.usarParalelo?e.paralelo:void 0,sexo:e.sexo,edad:e.edad??void 0,instrumento:e.instrumento??void 0?String(e.instrumento).trim():void 0,include_sin_asignar:n,anio_scope:this.estadisticasModo,instituciones_id:t??void 0}).subscribe({next:a=>{this.detalleEstadisticasRows=Array.isArray(a?.data)?a.data:[],this.detalleEstadisticasMeta=a?.meta??this.detalleEstadisticasMeta,this.isLoadingDetalleEstadisticas=!1},error:a=>{console.error("Error al cargar detalle de estad\xEDsticas",a),this.detalleEstadisticasRows=[],this.isLoadingDetalleEstadisticas=!1,this._tools.MostrarMensaje("error","No se pudo cargar el detalle de estudiantes")}})}formatearMapaConteo(e,t,n){return!Array.isArray(e)||e.length===0?"":e.map(a=>{let c=(a?.[t]??"").toString().trim(),m=Number(a?.total??0);if(!c||!Number.isFinite(m)||m<=0)return"";let v=n?.suffix??"";return`${c}${v} (${m})`}).filter(a=>a!=="").join(", ")}resumenEdades(e){return this.formatearMapaConteo(e,"edad",{suffix:" a\xF1os"})}resumenInstrumentos(e){return this.formatearMapaConteo(e,"instrumento")}hayInstrumentos(e){return Array.isArray(e)&&e.some(t=>Array.isArray(t?.instrumentos)&&t.instrumentos.length>0)}hayEdades(e){return Array.isArray(e)&&e.some(t=>Array.isArray(t?.edades)&&t.edades.length>0)}getSexoCount(e,t){return e?Number(e?.[t]??0):0}onSearchEnter(){this.searchAplicado=(this.filtertxtinfoestudiantesifas??"").toString(),this.paginainfoestudiantesifas=1,this.sortColumnsinfoestudiantesifas=[],this.sortByColumn="FechInsc",this.sortDir="desc",this.Cargarinfoestudiantesifas()}onPageChange(e){this.paginainfoestudiantesifas=e,this.Cargarinfoestudiantesifas()}CargarSegunModo(){this.estudianteId&&(this.newinfoestudiantesifas.patchValue({estudiantesifas_id:this.estudianteId}),this.cargarEstudianteSeleccionadoPorId(this.estudianteId)),this.Cargarinfoestudiantesifas()}setupBuscadorEstudiantes(){this.estudianteInput.valueChanges.subscribe(e=>{(e??"").toString()===""&&(this.estudiantesFiltrados=[],this.mostrarListaEstudiantes=!1,this.busquedaEstudiantesEjecutada=!1,this.estudiantesPage=1,this.estudianteId||(this.estudianteSeleccionado=null,this.newinfoestudiantesifas.patchValue({estudiantesifas_id:""})))})}get estudiantesTotalPages(){let e=this.estudiantesFiltrados?.length??0,t=Math.ceil(e/this.estudiantesPageSize);return Math.max(1,t||1)}get estudiantesPaginados(){let e=this.estudiantesFiltrados||[],n=(Math.min(Math.max(1,this.estudiantesPage),this.estudiantesTotalPages)-1)*this.estudiantesPageSize;return e.slice(n,n+this.estudiantesPageSize)}estudiantesPrevPage(){this.estudiantesPage=Math.max(1,this.estudiantesPage-1)}estudiantesNextPage(){this.estudiantesPage=Math.min(this.estudiantesTotalPages,this.estudiantesPage+1)}abrirRegistroEstudianteDesdeBuscador(){let e=(this.estudianteInput?.value??"").toString().trim();this.mostrarListaEstudiantes=!1,this.estudiantesFiltrados=[],this.busquedaEstudiantesEjecutada=!1,this.estudiantesPage=1,this.abrirModalRegistroEstudianteCompleto(e)}getNombreCompletoEstudiante(e){let t=(e?.Ap_Paterno??"").toString().trim(),n=(e?.Ap_Materno??"").toString().trim(),a=(e?.Nombre??"").toString().trim();return`${t} ${n} ${a}`.replace(/\s+/g," ").trim()}normalizarParaBusqueda(e){return(e??"").toString().toLowerCase().trim()}tokenizarPreservandoDuplicados(e){return e.split(/\s+/g).map(t=>t.trim()).filter(t=>t.length>0)}esTokenNumerico(e){return/^\d+$/.test(e)}contarOcurrencias(e,t){if(!t)return 0;let n=0,a=0;for(;;){let c=e.indexOf(t,a);if(c===-1)break;n+=1,a=c+t.length}return n}scoreEstudianteBusqueda(e,t){let n=(t??"").toString().trim().toLowerCase();if(!n)return 0;let a=this.normalizarParaBusqueda(this.getNombreCompletoEstudiante(e)),c=this.normalizarParaBusqueda(e?.CI),m=0;c&&n===c&&(m+=2e4),c&&n.length>=3&&c.startsWith(n)&&(m+=12e3),a&&n===a&&(m+=15e3),a&&a.startsWith(n)&&(m+=9e3);let v=this.tokenizarPreservandoDuplicados(n).map(S=>this.normalizarParaBusqueda(S));if(v.length===0)return m;for(let S of v)if(S)if(this.esTokenNumerico(S)){let w=this.contarOcurrencias(c,S);m+=w*1200}else{let w=this.contarOcurrencias(a,S);m+=w*700}let f=new Map;for(let S of v)f.set(S,(f.get(S)??0)+1);let C=!0;for(let[S,w]of f.entries())if(S){if(this.esTokenNumerico(S)){if(this.contarOcurrencias(c,S)<w){C=!1;break}}else if(this.contarOcurrencias(a,S)<w){C=!1;break}}return C&&(m+=5e3),m}filtrarEstudiantesPreciso(e,t){let n=(t??"").toString().trim();if(!n)return[];let a=this.tokenizarPreservandoDuplicados(n).map(m=>this.normalizarParaBusqueda(m));if(a.length===0)return[];let c=new Map;for(let m of a)c.set(m,(c.get(m)??0)+1);return(e||[]).filter(m=>{let v=this.normalizarParaBusqueda(this.getNombreCompletoEstudiante(m)),f=this.normalizarParaBusqueda(m?.CI);for(let[C,S]of c.entries())if(C){if(this.esTokenNumerico(C)){if(this.contarOcurrencias(f,C)<S)return!1}else if(this.contarOcurrencias(v,C)<S)return!1}return!0})}getTokensResaltadoEstudiante(e,t){let n=(e??"").toString().trim();if(!n)return[];let a=this.tokenizarPreservandoDuplicados(n).map(m=>this.normalizarParaBusqueda(m)).filter(m=>m.length>0),c=t==="ci"?a.filter(m=>this.esTokenNumerico(m)):a.filter(m=>!this.esTokenNumerico(m));return Array.from(new Set(c))}resaltarTextoConTokens(e,t){let n=(e??"").toString();if(!n)return this.sanitizer.bypassSecurityTrustHtml("");let a=this.escapeHtml(n);if(t.length>0){let c=t.map(v=>this.escapeRegExp(v)).sort((v,f)=>f.length-v.length),m=new RegExp(`(${c.join("|")})`,"gi");a=a.replace(m,v=>`<mark class="match-strong">${v}</mark>`)}return this.sanitizer.bypassSecurityTrustHtml(a)}resaltarNombreEnBuscadorEstudiante(e){let t=(this.estudianteInput?.value??"").toString(),n=this.getTokensResaltadoEstudiante(t,"nombre");return this.resaltarTextoConTokens(this.getNombreCompletoEstudiante(e),n)}resaltarCIEnBuscadorEstudiante(e){let t=(this.estudianteInput?.value??"").toString(),n=this.getTokensResaltadoEstudiante(t,"ci");return this.resaltarTextoConTokens((e??"").toString(),n)}getBackendSearchTermEstudiantes(e){let t=(e??"").toString().trim();if(!t)return"";let n=this.tokenizarPreservandoDuplicados(t).map(m=>(m??"").toString().trim()).filter(Boolean),a=n.filter(m=>this.esTokenNumerico(m)).sort((m,v)=>v.length-m.length);if(a.length>0)return a[0];let c=n.filter(m=>!this.esTokenNumerico(m)).sort((m,v)=>v.length-m.length);return c.length>0?c[0]:t}buscarEstudiantes(){if(this.estudianteId)return;let e=(this.estudianteInput.value??"").toString().trim();if(!e){this.estudiantesFiltrados=[];return}this.busquedaEstudiantesEjecutada=!0,this.estudiantesPage=1,this.mostrarListaEstudiantes=!0,this.isBuscandoEstudiante=!0;let n={page:1,per_page:200,search:this.getBackendSearchTermEstudiantes(e)||e,search_mode:"any",relevance:1,sort_by:"id",sort_dir:"desc"};this._est.Obtenerestudiantesifas(n).subscribe({next:a=>{let c=a?.data||[],v=(this.filtrarEstudiantesPreciso(c,e)||[]).slice().sort((f,C)=>{let S=this.scoreEstudianteBusqueda(C,e),w=this.scoreEstudianteBusqueda(f,e);if(S!==w)return S-w;let y=this.getNombreCompletoEstudiante(C).toLowerCase(),$=this.getNombreCompletoEstudiante(f).toLowerCase();return y!==$?y.localeCompare($):Number(C?.id??0)-Number(f?.id??0)});this.estudiantesFiltrados=v,this.mostrarListaEstudiantes=!0,this.isBuscandoEstudiante=!1},error:a=>{console.error("Error al buscar estudiantes",a),this.estudiantesFiltrados=[],this.mostrarListaEstudiantes=!0,this.isBuscandoEstudiante=!1}})}seleccionarEstudiante(e){e&&(this.estudianteSeleccionado=e,this.newinfoestudiantesifas.patchValue({estudiantesifas_id:e?.id??""}),this.estudianteInput.setValue(this.getNombreCompletoEstudiante(e),{emitEvent:!1}),this.mostrarListaEstudiantes=!1,this.estudiantesFiltrados=[],this.busquedaEstudiantesEjecutada=!1,this.estudiantesPage=1)}cargarEstudianteSeleccionadoPorId(e){e&&this._est.Seleccionarestudiantesifas(Number(e)).subscribe({next:t=>{this.estudianteSeleccionado=t?.data??null,!this.estudianteId&&this.estudianteSeleccionado&&this.estudianteInput.setValue(this.getNombreCompletoEstudiante(this.estudianteSeleccionado),{emitEvent:!1})},error:t=>{console.error("Error al cargar estudiante",t),this.estudianteId||(this.estudianteSeleccionado=null)}})}generarMatricula(){let e=this.estudianteSeleccionado,t=(e?.Ap_Paterno??"").toString().trim(),n=(e?.Ap_Materno??"").toString().trim(),a=(e?.Nombre??"").toString().trim(),c=(e?.CI??"").toString().trim(),m=t?t.charAt(0):"",v=n?n.charAt(0):"",f=a?a.charAt(0):"";return`${m}${v}${f}${c}`.toUpperCase()}Cargarinfoestudiantesifas(){console.log("ANIOS SELECCIONADO",this.selectedAnioId),this.isLoadinginfoestudiantesifas=!0;let e=(this.searchAplicado??"").toString().trim()!=="",t=Array.isArray(this.sortColumnsinfoestudiantesifas)&&this.sortColumnsinfoestudiantesifas.length>0,n=e&&!t;this._infoest.Obtenerinfoestudiantesifas({page:this.paginainfoestudiantesifas,per_page:this.pageSizeinfoestudiantesifas,anio_id:this.selectedAnioId===""?void 0:Number(this.selectedAnioId),include_sin_asignar:this.incluirSinAsignar?1:0,estudiante_id:this.estudianteId?Number(this.estudianteId):void 0,search:(this.searchAplicado??"").toString().trim(),search_mode:"any",relevance:n?1:0,sort_by:this.sortByColumn,sort_dir:this.sortDir}).subscribe({next:a=>{console.log("cargar estudiantes inscritos",a.data),this.infoestudiantesifas=a.data||[],this.collectionSizeinfoestudiantesifas=a.meta?.total??this.infoestudiantesifas.length,this.isLoadinginfoestudiantesifas=!1,!this.autoAbrioNuevoPorVacio&&this.modo==="estudiante"&&this.estudianteId&&(this.infoestudiantesifas?.length||0)===0&&(this.autoAbrioNuevoPorVacio=!0,this.abrirModalNuevoInfoestudiantesifas())},error:a=>{console.error("Error al cargar infoestudiantesifas",a),this.infoestudiantesifas=[],this.collectionSizeinfoestudiantesifas=0,this.isLoadinginfoestudiantesifas=!1}})}getTokensBusqueda(e){let t=(e??this.filtertxtinfoestudiantesifas??"").toString().trim();return t?Array.from(new Set(t.split(/\s+/g).map(n=>n.trim()).filter(n=>n.length>0))):[]}escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}resaltarTexto(e,t){let n=this.getTokensBusqueda(t),a=(e??"").toString();if(!a)return this.sanitizer.bypassSecurityTrustHtml("");let c=this.escapeHtml(a);if(n.length>0){let m=n.map(f=>this.escapeRegExp(f)).sort((f,C)=>C.length-f.length),v=new RegExp(`(${m.join("|")})`,"gi");c=c.replace(v,f=>`<mark class="match-strong">${f}</mark>`)}return this.sanitizer.bypassSecurityTrustHtml(c)}AgregarModificarinfoestudiantesifas(){if(this.newinfoestudiantesifas.invalid){this.ValidacionTodoElementoinfoestudiantesifas(),this._tools.MostrarMensajeFrmIncompleto(),this.AnimacionCargabtnModalinfoestudiantesifas=!1;return}else{this.AnimarCargaTablainfoestudiantesifas(),this.AnimacionCargabtnModalinfoestudiantesifas=!0,this._tools.MostrarMensajeLoading(),this.newinfoestudiantesifasAnteriorAccion.patchValue(this.snapshotFormValue(this.newinfoestudiantesifas));let e=this.newinfoestudiantesifas.controls.id.value;console.log("INFO A PROCESAR",this.newinfoestudiantesifas.value);let t=this.newinfoestudiantesifas.get("FotoPago")?.value??null,n=this.fotoPagoAnteriorPath,a=m=>{this._infoest.Agregarinfoestudiantesifas(this.newinfoestudiantesifas.value,{force:m}).subscribe(v=>{console.log("SE A\xD1ADIO CORRECTAMENTE infoestudiantesifas",v.data),this.Cargarinfoestudiantesifas(),this.fotoPagoTempPath=null,this.fotoPagoAnteriorPath=null,this.resetinfoestudiantesifas(),this.AnimacionCargabtnModalinfoestudiantesifas=!1,this._tools.MostrarMensajeSuccess()},v=>{let f=v?.status,C=!!v?.error?.requires_confirmation,S=v?.error?.anio;if(f===409&&C){this._tools.mostrarMensajeConfirm("Inscripci\xF3n duplicada",`Ya existe una inscripci\xF3n del estudiante en esta instituci\xF3n para la gesti\xF3n ${S??"actual"}. \xBFDesea continuar igualmente?`,"warning","S\xED, continuar","No, cancelar").then(w=>{w?a(!0):this.AnimacionCargabtnModalinfoestudiantesifas=!1});return}console.log("ERROR AL A\xD1ADIR infoestudiantesifas",v),this.AnimacionCargabtnModalinfoestudiantesifas=!1,this._tools.MostrarMensajeError()})},c=m=>{this._infoest.Modificarinfoestudiantesifas(this.newinfoestudiantesifas.value,this.newinfoestudiantesifas.value.id,{force:m}).subscribe(v=>{console.log("SE MODIFICO CORRECTAMENTE infoestudiantesifas",v.data),n&&t&&n!==t&&this._tools.EliminarArchivo(n),this.Cargarinfoestudiantesifas(),this.fotoPagoTempPath=null,this.fotoPagoAnteriorPath=null,this.resetinfoestudiantesifas(),this.AnimacionCargabtnModalinfoestudiantesifas=!1,this._tools.MostrarMensajeSuccess()},v=>{let f=v?.status,C=!!v?.error?.requires_confirmation,S=v?.error?.anio;if(f===409&&C){this._tools.mostrarMensajeConfirm("Inscripci\xF3n duplicada",`Ya existe una inscripci\xF3n del estudiante en esta instituci\xF3n para la gesti\xF3n ${S??"actual"}. \xBFDesea guardar igualmente?`,"warning","S\xED, guardar","No, cancelar").then(w=>{w?c(!0):this.AnimacionCargabtnModalinfoestudiantesifas=!1});return}console.log("ERROR AL MODIFICAR infoestudiantesifas",v),this.AnimacionCargabtnModalinfoestudiantesifas=!1,this._tools.MostrarMensajeError()})};e?c(!1):a(!1)}}Seleccionarinfoestudiantesifas(e){if(this._tools.MostrarMensajeLoading(),e){if(!this.infoestudiantesifas.find(n=>n.id===e))return;this._infoest.Seleccionarinfoestudiantesifas(e).subscribe(n=>{Object.keys(this.newinfoestudiantesifas.controls).forEach(c=>{this.newinfoestudiantesifas.controls[c].setValue(n.data[c])}),console.log("SELECCION DE infoestudiantesifas EXITOSA",this.newinfoestudiantesifas.value),this.newinfoestudiantesifasAnteriorAccion.patchValue(this.snapshotFormValue(this.newinfoestudiantesifas)),this.fotoPagoAnteriorPath=this.newinfoestudiantesifas.get("FotoPago")?.value??null,this.fotoPagoTempPath=null;let a=this.newinfoestudiantesifas.get("estudiantesifas_id")?.value;!this.estudianteId&&a&&this.cargarEstudianteSeleccionadoPorId(Number(a)),this.syncBuscadoresPlantelConForm(),this.modalGestioninfoestudiantesifasRef=this._tools.openModal(this.modalgestioninfoestudiantesifas,"xl"),this._tools.MostrarMensajeSuccess()},n=>{console.log("ERROR AL SELECCIONAR infoestudiantesifas",n),this._tools.MostrarMensajeError()})}}Eliminarinfoestudiantesifas(e){this._tools.mostrarMensajeConfirm("\xBFSEGURO QUE DESEA ELIMINAR?","SE ELIMINARA EL DATO Y NO SE PODR\xC1 RECUPERAR EL DATO","warning","SI, ESTOY SEGURO","NO").then(t=>{t&&(this._tools.MostrarMensajeLoading(),this._infoest.Eliminarinfoestudiantesifas(e).subscribe(n=>{console.log(n.data),this.Cargarinfoestudiantesifas(),this._tools.MostrarMensajeSuccess()},n=>{console.log("ERROR AL ELIMINAR infoestudiantesifas",n),this._tools.MostrarMensajeError()}))})}resetinfoestudiantesifas(){this.isCapturandoFotoPago&&this.cancelarEsperaCaptura(!0),this.fotoPagoTempPath&&this.fotoPagoTempPath!==this.fotoPagoAnteriorPath&&this._tools.EliminarArchivo(this.fotoPagoTempPath),this.fotoPagoTempPath=null,this.fotoPagoAnteriorPath=null,this.newinfoestudiantesifas=this._infoest.createFormGroupinfoestudiantesifas(),this.estudianteId?(this.newinfoestudiantesifas.patchValue({estudiantesifas_id:this.estudianteId}),this.cargarEstudianteSeleccionadoPorId(this.estudianteId)):(this.estudianteSeleccionado=null,this.estudianteInput.setValue("",{emitEvent:!1}),this.estudiantesFiltrados=[],this.mostrarListaEstudiantes=!1),this.docAdminInput.setValue("",{emitEvent:!1}),this.docPCInput.setValue("",{emitEvent:!1}),this.docOtrosInput.setValue("",{emitEvent:!1}),this.docentesFiltradosAdmin=[],this.docentesFiltradosPC=[],this.docentesFiltradosOtros=[],this.mostrarListaDocAdmin=!1,this.mostrarListaDocPC=!1,this.mostrarListaDocOtros=!1,this._tools.closeModal(this.modalGestioninfoestudiantesifasRef)}AutoCompletarLastinfoestudiantesifas(){this.newinfoestudiantesifasAnteriorAccion.patchValue({CantidadMateriasAsignadas:0}),this.newinfoestudiantesifas.patchValue(this.snapshotFormValue(this.newinfoestudiantesifasAnteriorAccion)),this.syncBuscadoresPlantelConForm(),this.newinfoestudiantesifas.patchValue({id:0}),console.log("listo",this.newinfoestudiantesifas.value)}AnimarCargaTablainfoestudiantesifas(){this.infoestudiantesifas=[],this.isLoadinginfoestudiantesifas=!0}ValidacioninfoestudiantesifasxElemento(e){return this._tools.obtenerValidationClass(this.newinfoestudiantesifas,e)}ValidacionTodoElementoinfoestudiantesifas(){Object.values(this.newinfoestudiantesifas.controls).forEach(e=>{e.markAsTouched(),e.markAsDirty()})}onPageSizeChangeinfoestudiantesifas(){this.paginainfoestudiantesifas=1,this.Cargarinfoestudiantesifas()}sortByinfoestudiantesifas(e,t){this.sortColumnsinfoestudiantesifas=this._tools.handleSort(e,t,this.sortColumnsinfoestudiantesifas);let n=this.sortColumnsinfoestudiantesifas?.[0];n?.column&&(this.sortByColumn=n.column,this.sortDir=n.direction,this.paginainfoestudiantesifas=1,this.Cargarinfoestudiantesifas())}isSortedinfoestudiantesifas(e){return this._tools.isSorted(this.sortColumnsinfoestudiantesifas,e)}getSortDirinfoestudiantesifas(e){return this._tools.getSortDirection(this.sortColumnsinfoestudiantesifas,e)}closeMenu(e){this._tools.close();let t=e?.target;t?.closest?.(".plantel-doc-buscador")||t?.closest?.(".estudiante-buscador")||(this.mostrarListaDocAdmin=!1,this.mostrarListaDocPC=!1,this.mostrarListaDocOtros=!1,this.mostrarListaEstudiantes=!1)}abrirMenuinfoestudiantesifas(e,t){e.preventDefault(),e.stopPropagation(),console.log("aS",t);let n=[{label:"\u{1F441} Ver Historial de Calificaciones",action:()=>this.abrirHistorialDesdeInscripcion(t,e)},{label:"+ Asignar Materias",action:()=>this.abrirAsignadorMateriasDesdeInscripcion(t)},{label:"\u270F Editar",action:()=>this.Seleccionarinfoestudiantesifas(t.id)},{label:"\u{1F5D1}\uFE0F Eliminar",action:()=>this.Eliminarinfoestudiantesifas(t.id)}];this._tools.open(e.clientX,e.clientY,n)}};It.\u0275fac=function(t){return new(t||It)(A(Et),A(vt),A(Zt),A(xt),A(ht),A(Se),A(ft),A(Kt),A(Ie),A(Jt),A(te),A(jt),A(he))},It.\u0275cmp=it({type:It,selectors:[["app-estudiantesinscritos"]],viewQuery:function(t,n){if(t&1&&(R(ha,7),R(xa,7),R(va,7),R(Ea,7),R(ba,7),R(Ca,7),R(Sa,7),R(Ia,7),R(ya,7),R(wa,7),R(Aa,7)),t&2){let a;D(a=L())&&(n.modalOtroComponentecalifhistorias=a.first),D(a=L())&&(n.modalRegistroEstudianteCompleto=a.first),D(a=L())&&(n.modalEsperaFotoCelular=a.first),D(a=L())&&(n.modalVincularCelular=a.first),D(a=L())&&(n.modalEsperaFotoPagoCelular=a.first),D(a=L())&&(n.modalgestioninfoestudiantesifas=a.first),D(a=L())&&(n.modalOtroComponenteEstadisticas=a.first),D(a=L())&&(n.modalDetalleEstadisticas=a.first),D(a=L())&&(n.modalOtroComponenteAsignacionesEstudiantes=a.first),D(a=L())&&(n.modalListasPreliminaresCursos=a.first),D(a=L())&&(n.modalOtroComponenteRegistrarpagos=a.first)}},hostBindings:function(t,n){t&1&&h("click",function(c){return n.closeMenu(c)},Rt)},inputs:{estudianteId:"estudianteId",nombreEstudiante:"nombreEstudiante",fotoEstudiante:"fotoEstudiante",sexoEstudiante:"sexoEstudiante",modo:"modo"},standalone:!1,features:[Ot],decls:116,vars:41,consts:[["modalListasPreliminaresCursos",""],["modalgestioninfoestudiantesifas",""],["modalRegistroEstudianteCompleto",""],["modalVincularCelular",""],["modalEsperaFotoCelular",""],["modalEsperaFotoPagoCelular",""],["modalOtroComponenteEstadisticas",""],["modalDetalleEstadisticas",""],["modalOtroComponenteAsignacionesEstudiantes",""],["modalOtroComponenteRegistrarpagos",""],["modalOtroComponentecalifhistorias",""],["sinFotoPago",""],["sinFotoEstudiante",""],["sinFotoEst",""],["fotoInputEst",""],[1,"container","mt-4"],[1,"row","align-items-center"],[1,"col-12",3,"ngClass"],[1,"display-4","fw-bold","titulosGlobales","text-center"],[1,"lead","text-secondary","subtitulosGlobales","text-center"],[1,"lead","text-primary","subtitulosGlobales","text-center"],["class","col-12 col-md-4 d-flex justify-content-center justify-content-md-end mt-3 mt-md-0",4,"ngIf"],[1,"row"],[1,"col-sm-5","d-flex","justify-content-start","button",2,"gap","10px"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","width","30px","height","30px"],["width","50px","height","50px",3,"options"],[1,"dir-part"],[1,"col-sm-4","d-flex","justify-content-end"],[1,"d-flex","align-items-center","w-100",2,"gap","12px"],[1,"form-floating","flex-grow-1"],[1,"form-select",3,"ngModelChange","change","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-sm-3","ms-auto","d-flex","justify-content-end"],["title","PRESIONAR TECLA ENTER PARA REALIZAR BUSQUEDA",1,"input-group"],[1,"input-group-text"],["width","30px","height","30px",3,"options"],[1,"form-floating"],["type","text","placeholder","Buscar","title","PRESIONAR TECLA ENTER PARA REALIZAR BUSQUEDA",1,"form-control",3,"keyup.enter","ngModelChange","ngModel"],[1,"d-flex","align-items-center",2,"gap","12px","white-space","nowrap"],[1,"form-check","m-0"],["type","checkbox","id","chkSinAsignar",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","chkSinAsignar",1,"form-check-label","text-danger","fw-bold"],["type","button",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-sm","align-middle"],[1,"text-center"],["style","user-select: none; -webkit-user-select: none; -moz-user-select: none;",3,"click",4,"ngIf"],[2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["class","bi",3,"ngClass",4,"ngIf"],[4,"ngIf"],["style","cursor: pointer;",3,"contextmenu",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["previousLabel","Anterior","nextLabel","Siguiente",3,"pageChange","page","collectionSize","pageSize","maxSize","rotate","ellipses","boundaryLinks"],[1,"form-select",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","context-menu",3,"ngStyle",4,"ngIf"],[1,"col-12","col-md-4","d-flex","justify-content-center","justify-content-md-end","mt-3","mt-md-0"],[2,"width","160px","height","160px","object-fit","cover",3,"options"],["alt","Foto del estudiante",1,"border","rounded",2,"width","160px","height","160px","object-fit","cover",3,"src"],[3,"ngValue"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"d-flex","align-items-center","justify-content-between",2,"gap","12px","flex-wrap","wrap"],[1,"d-flex","align-items-center",2,"gap","10px"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],["class","form-check m-0",4,"ngIf"],["class","mt-3",4,"ngIf"],["class","alert alert-warning mt-3",4,"ngIf"],["class","table-responsive mt-3","style","max-height: 55vh;",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["type","checkbox","id","chkEspListas",1,"form-check-input",3,"ngModelChange","ngModel"],["for","chkEspListas",1,"form-check-label"],[1,"mt-3"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"ms-2"],[1,"alert","alert-warning","mt-3"],[1,"table-responsive","mt-3",2,"max-height","55vh"],[1,"table","table-sm","table-striped","align-middle"],[1,"text-center",2,"width","40px"],[1,"text-center",2,"width","70px"],[1,"text-center",2,"width","110px"],[1,"text-center",2,"width","90px"],[4,"ngFor","ngForOf"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"bi",3,"ngClass"],[1,"text-center","py-4"],[1,"d-flex","flex-column","align-items-center","justify-content-center","gap-2"],[1,"text-muted"],[2,"width","min(200px, 40vw)","height","min(200px, 40vw)",3,"options"],[2,"cursor","pointer",3,"contextmenu"],["title","Ver historial de inscripci\xF3n",1,"btn","btn-outline-primary","btn-sm","w-100",2,"cursor","pointer",3,"click","ngClass"],[3,"innerHTML"],[1,"text-center","d-flex","justify-content-center","align-items-center",2,"gap","5px"],["title","Asignar materias al estudiante",1,"btn","btn-outline-light","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src",4,"ngIf"],["width","30px","height","35px",3,"options",4,"ngIf"],["title","Generar Reporte de inscripcion",1,"btn","btn-outline-light","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["title","Ver historial (califhistorias)",1,"btn","btn-outline-light","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["title","Registrar pagos del estudiante","class","btn btn-outline-light btn-sm d-flex justify-content-center align-items-center p-0","style","width: 40px; height: 40px; overflow: hidden;",3,"click","mouseenter","mouseleave",4,"ngIf"],["title","Modificar informaci\xF3n",1,"btn","btn-outline-warning","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["title","Eliminar informaci\xF3n",1,"btn","btn-outline-danger","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src"],["width","30px","height","35px",3,"options"],["title","Registrar pagos del estudiante",1,"btn","btn-outline-light","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],[3,"value"],["type","button","title","cerrar",1,"btn-close",3,"click"],["novalidate","",3,"formGroup"],["class","row",4,"ngIf"],[1,"mb-3","col-12","col-sm-6"],[1,"form-label","bold"],[4,"ngIf","ngIfElse"],[1,"mt-2","d-flex","justify-content-start"],["type","button",1,"btn","btn-outline-secondary","btn-sm","me-2",3,"click","disabled"],[1,"badge","align-self-center","me-2",3,"ngClass"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],["class","alert alert-info py-2 mt-2 d-flex justify-content-between align-items-center",4,"ngIf"],["class","col-12 col-sm-6",4,"ngIf"],[1,"form-floating","mb-3","col-sm-4"],["formControlName","Categoria",1,"form-control",3,"ngClass"],["disabled","",3,"value"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"invalid-feedback"],["type","date","placeholder","","formControlName","FechInsc",1,"form-control",3,"ngClass"],["formControlName","Verificacion",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-2"],["formControlName","Turno",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-3"],["formControlName","Curso_Solicitado",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","Paralelo_Solicitado",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Matricula",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"button","col-sm-2","d-flex","align-items-start"],["type","button",1,"btn","mouse-dir","primary","d-flex","align-items-center","flex-shrink-0",2,"gap","8px","height","58px","white-space","nowrap",3,"click"],[1,"row",2,"z-index","1"],["class","form-floating mb-3 col-sm-4",4,"ngIf"],["type","button","title","Ver historial (califhistorias) por CI",1,"btn","btn-outline-primary","btn-sm","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],["width","26px","height","26px",3,"options"],["type","button","title","Ver/Editar informaci\xF3n personal",1,"btn","btn-outline-warning","btn-sm","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],[1,"col-12","mb-2"],[1,"form-check"],["type","checkbox","id","chkMostrarObsAnoNotas",1,"form-check-input",3,"ngModelChange","ngModel","ngModelOptions"],["for","chkMostrarObsAnoNotas",1,"form-check-label","fw-semibold"],["class","button d-flex justify-content-start",4,"ngIf"],[1,"button","me-2"],["title","Cancelar y cerrar","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],[1,"button"],["class","btn mouse-dir success","title","Procesando informaci\xF3n",3,"disabled","click",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;","title","Accionar",3,"click",4,"ngIf"],[1,"form-floating","mb-3","col-sm-12"],["type","number","placeholder","","formControlName","instituciones_id",1,"form-control",3,"ngClass"],["alt","FotoPago",1,"img-thumbnail",2,"width","180px","height","180px","object-fit","cover",3,"src"],[2,"width","180px","height","180px","object-fit","cover",3,"options"],[1,"alert","alert-info","py-2","mt-2","d-flex","justify-content-between","align-items-center"],[1,"fw-semibold"],[1,"small"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"col-12","col-sm-6"],[1,"form-floating","mb-3","col-12","position-relative","estudiante-buscador",2,"z-index","1052"],["type","text","placeholder"," ","autocomplete","off",1,"form-control",3,"focus","keyup.enter","formControl"],["class","list-group position-absolute w-100","style","z-index: 1000;",4,"ngIf"],[1,"mb-3","col-12"],[1,"list-group","position-absolute","w-100",2,"z-index","1000"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"d-flex","w-100","justify-content-between","align-items-center",2,"gap","10px"],[1,"small","text-muted"],[1,"badge","bg-primary"],["class","list-group-item",4,"ngIf"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"d-flex","w-100","justify-content-between"],[1,"d-flex","justify-content-between","align-items-center",2,"gap","8px"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],["alt","Foto del estudiante",1,"img-thumbnail",2,"width","180px","height","180px","object-fit","cover",3,"src"],[3,"value","disabled"],[1,"form-floating","mb-3","col-sm-4","position-relative","plantel-doc-buscador",2,"z-index","1051"],["type","text","placeholder"," ","autocomplete","off",1,"form-control",3,"focus","formControl"],["class","list-group position-absolute w-100","style","z-index: 1060;",4,"ngIf"],["type","text","placeholder"," ","autocomplete","off","title","(agarra los docentes desde ac\xE1 cuando se usa Modo Pr\xE1ctica de Conjuntos)",1,"form-control",3,"focus","formControl"],["type","text","placeholder"," ","autocomplete","off","title","(agarra los docentes desde ac\xE1 cuando se usa Modo Instrumento Complementario)",1,"form-control",3,"focus","formControl"],[1,"list-group","position-absolute","w-100",2,"z-index","1060"],["class","list-group-item list-group-item-action",3,"disabled","opacity","pointerEvents","click",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["formControlName","InstrumentoMusical",1,"form-control",3,"ngClass"],["formControlName","InstrumentoMusicalSecundario",1,"form-control",3,"ngClass"],[1,"mb-3","col-sm-12"],["placeholder","","formControlName","Observacion",1,"quill-container-wrapper",2,"text-transform","uppercase",3,"modules","ngClass"],["placeholder","","formControlName","Anotaciones",1,"quill-container-wrapper",2,"text-transform","uppercase",3,"modules","ngClass"],["placeholder","","formControlName","Notas",1,"quill-container-wrapper",2,"text-transform","uppercase",3,"modules","ngClass"],[1,"button","d-flex","justify-content-start"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Cancelar y cerrar",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Procesando informaci\xF3n",1,"btn","mouse-dir","success",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["title","Accionar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[1,"mb-3","col-sm-6"],[1,"form-label"],[1,"border","rounded","p-3","text-center",3,"dragover","dragleave","drop","click"],["class","mt-2",4,"ngIf"],["type","file","accept","image/*",1,"d-none",3,"change"],["class","text-danger small",4,"ngIf"],["type","text","placeholder","","formControlName","Ap_Paterno",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Ap_Materno",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-6"],["type","text","placeholder","","formControlName","Nombre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","CI",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","Expedido",1,"form-control",3,"ngClass"],["formControlName","Sexo",1,"form-control",3,"ngClass"],["type","date","placeholder","","formControlName","FechaNac",1,"form-control",3,"change","ngClass"],["type","number","placeholder","","formControlName","Edad","readonly","","tabindex","-1",1,"form-control",2,"pointer-events","none","background-color","#e9ecef",3,"ngClass"],["type","text","placeholder","","formControlName","Celular",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-5"],["type","text","placeholder","","formControlName","Direccion",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Correo",1,"form-control",3,"ngClass"],[1,"mb-3","col-sm-4"],[1,"d-flex","align-items-end",2,"gap","10px"],["type","text","placeholder","","formControlName","Usuario",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","button","title","Generar Usuario","class","btn mouse-dir secondary d-flex align-items-center justify-content-center p-0","style","width: 58px; height: 58px;",3,"click",4,"ngIf"],["class","invalid-feedback d-block",4,"ngIf"],["placeholder","","formControlName","Contrasenia",1,"form-control",3,"type","ngClass"],["type","button","title","Mostrar/Ocultar Contrasenia","class","btn mouse-dir secondary d-flex align-items-center justify-content-center p-0","style","width: 58px; height: 58px;",3,"click",4,"ngIf"],["formControlName","Estado",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","Nombre_Padre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","OcupacionP",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","NumCelP",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Nombre_Madre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","OcupacionM",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","NumCelM",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","NColegio",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","TipoColegio",1,"form-control",3,"ngClass"],["formControlName","CNivel",1,"form-control",3,"ngClass"],["formControlName","CGrado",1,"form-control",3,"ngClass"],[1,"col-sm-12"],["placeholder","","formControlName","InformacionCompartidaIFAS",1,"quill-container-wrapper",3,"modules","ngClass"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;","title","Accionar",3,"disabled","click",4,"ngIf"],["alt","Foto",1,"img-thumbnail",2,"width","140px","height","140px","object-fit","cover",3,"src"],[1,"mt-2"],[1,"progress"],["role","progressbar",1,"progress-bar"],[1,"text-danger","small"],["type","button","title","Generar Usuario",1,"btn","mouse-dir","secondary","d-flex","align-items-center","justify-content-center","p-0",2,"width","58px","height","58px",3,"click"],["width","70px","height","70px",3,"options"],[1,"invalid-feedback","d-block"],["type","button","title","Mostrar/Ocultar Contrasenia",1,"btn","mouse-dir","secondary","d-flex","align-items-center","justify-content-center","p-0",2,"width","58px","height","58px",3,"click"],["title","Accionar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],[1,"mb-2","text-muted"],["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],["alt","QR",2,"max-width","260px","width","100%",3,"src"],["target","_blank","rel","noopener",3,"href"],[1,"mt-3","d-flex","justify-content-end"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[1,"row","g-2","align-items-end"],[1,"col-12","col-md-4"],["value","default"],["value","assigned"],["value","unassigned"],["value","both"],[1,"btn","btn-outline-primary","w-100",3,"click"],["class","col-12 col-md-4 text-md-end",4,"ngIf"],[1,"col-12","col-md-4","text-md-end"],[1,"text-secondary"],[1,"fs-5","fw-bold"],[1,"text-end"],[1,"text-secondary","mb-2"],["type","button",1,"btn","btn-link","text-dark","p-0",3,"click","disabled"],[1,"d-flex","flex-wrap",2,"gap","6px"],["type","button","class","btn btn-link text-dark p-0",3,"disabled","title","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-link","text-dark","p-0",3,"click","disabled","title"],["class","mb-2",4,"ngIf"],["class","table-responsive mt-3","style","max-height: 60vh;",4,"ngIf"],[1,"mb-2"],[1,"text-secondary","small"],["class","text-secondary small",4,"ngIf"],["class","fw-semibold",4,"ngIf"],[1,"table-responsive","mt-3",2,"max-height","60vh"],[3,"modo","estudianteId","nombreEstudiante","fotoEstudiante","sexoEstudiante","preferInfoId"],[3,"modo","infoId","estudianteId","nombreEstudiante","fotoEstudiante","sexoEstudiante","gestionPredeterminada"],[3,"modo","ciBusqueda","institucion"],[1,"context-menu",3,"ngStyle"],["class","context-item",3,"click",4,"ngFor","ngForOf"],[1,"context-item",3,"click"]],template:function(t,n){if(t&1){let a=b();o(0,"div",15)(1,"div",16)(2,"div",17)(3,"h1",18),d(4),s(),o(5,"p",19),d(6),s(),o(7,"p",20),d(8),s()(),g(9,Na,3,1,"div",21),s()(),o(10,"div",22)(11,"div",23)(12,"button",24),h("click",function(){return p(a),_(n.abrirModalNuevoInfoestudiantesifas())}),o(13,"span",25),x(14,"ng-lottie",26),s(),o(15,"span"),d(16,"A\xF1adir Inscripci\xF3n "),s(),x(17,"span",27),s(),o(18,"button",24),h("click",function(){return p(a),_(n.abrirModalEstadisticas())}),o(19,"span",25),x(20,"ng-lottie",26),s(),o(21,"span"),d(22,"VER ESTAD\xCDSTICAS DE INSCRIPCIONES"),s(),x(23,"span",27),s()(),o(24,"div",28)(25,"div",29)(26,"div",30)(27,"select",31),O("ngModelChange",function(m){return p(a),F(n.selectedAnioId,m)||(n.selectedAnioId=m),_(m)}),h("change",function(){return p(a),_(n.onAnioChange())}),g(28,Fa,2,2,"option",32),s(),o(29,"label"),d(30,"A\xF1o"),s()()()(),o(31,"div",33)(32,"div",34)(33,"span",35),x(34,"ng-lottie",36),s(),o(35,"div",37)(36,"input",38),h("keyup.enter",function(){return p(a),_(n.onSearchEnter())}),O("ngModelChange",function(m){return p(a),F(n.filtertxtinfoestudiantesifas,m)||(n.filtertxtinfoestudiantesifas=m),_(m)}),s(),o(37,"label"),d(38,"Buscar"),s()()()(),o(39,"div",33)(40,"div",39)(41,"div",40)(42,"input",41),O("ngModelChange",function(m){return p(a),F(n.incluirSinAsignar,m)||(n.incluirSinAsignar=m),_(m)}),h("change",function(){return p(a),_(n.onAnioChange())}),s(),o(43,"label",42),d(44,"INCLUIR LOS SIN ASIGNACIONES"),s()(),o(45,"button",43),h("click",function(){return p(a),_(n.abrirModalListasPreliminaresCursos())}),d(46," LISTAS POR CURSO "),s()()()(),g(47,Ua,21,7,"ng-template",null,0,M),o(49,"div",44)(50,"div",45)(51,"table",46)(52,"tr")(53,"th",47),d(54,"#"),s(),g(55,Ga,3,1,"th",48),o(56,"th",49),h("click",function(m){return p(a),_(n.sortByinfoestudiantesifas("Anio",m))}),d(57," Anio | Resoluci\xF3n "),g(58,qa,1,4,"i",50),s(),o(59,"th",49),h("click",function(m){return p(a),_(n.sortByinfoestudiantesifas("FechInsc",m))}),d(60," Fecha Inscripci\xF3n "),g(61,Ha,1,4,"i",50),s(),g(62,Wa,3,1,"th",48)(63,Ya,3,1,"th",48)(64,Za,3,1,"th",48)(65,ts,3,1,"th",48),o(66,"th",49),h("click",function(m){return p(a),_(n.sortByinfoestudiantesifas("Categoria",m))}),d(67," Categoria "),g(68,es,1,4,"i",50),s(),o(69,"th",49),h("click",function(m){return p(a),_(n.sortByinfoestudiantesifas("Curso_Solicitado",m))}),d(70," Curso_Solicitado "),g(71,is,1,4,"i",50),s(),o(72,"th",49),h("click",function(m){return p(a),_(n.sortByinfoestudiantesifas("Paralelo_Solicitado",m))}),d(73," Par. Sol. "),g(74,ns,1,4,"i",50),s(),o(75,"th",49),h("click",function(m){return p(a),_(n.sortByinfoestudiantesifas("Turno",m))}),d(76," Turno Sol. "),g(77,as,1,4,"i",50),s(),o(78,"th",49),h("click",function(m){return p(a),_(n.sortByinfoestudiantesifas("CantidadMateriasAsignadas",m))}),d(79," N\xB0 Asig. "),g(80,ss,1,4,"i",50),s(),o(81,"th",49),h("click",function(m){return p(a),_(n.sortByinfoestudiantesifas("Verificacion",m))}),d(82," Verificacion "),g(83,os,1,4,"i",50),s(),o(84,"th",47),d(85,"ACCIONES"),s()(),o(86,"tbody"),g(87,rs,5,1,"tr",51),me(88,ls,6,2,"tr"),g(89,As,43,30,"tr",52),s()()(),o(90,"div",53)(91,"ngb-pagination",54),h("pageChange",function(m){return p(a),_(n.onPageChange(m))}),s(),o(92,"select",55),O("ngModelChange",function(m){return p(a),F(n.pageSizeinfoestudiantesifas,m)||(n.pageSizeinfoestudiantesifas=m),_(m)}),h("change",function(){return p(a),_(n.onPageSizeChangeinfoestudiantesifas())}),g(93,Ts,2,2,"option",56),s()()(),g(94,uo,113,42,"ng-template",null,1,M)(96,Fo,224,62,"ng-template",null,2,M)(98,Do,14,3,"ng-template",null,3,M)(100,Lo,15,1,"ng-template",null,4,M)(102,$o,15,1,"ng-template",null,5,M)(104,ar,25,5,"ng-template",null,6,M)(106,xr,12,4,"ng-template",null,7,M)(108,vr,6,6,"ng-template",null,8,M)(110,Er,6,7,"ng-template",null,9,M)(112,br,6,3,"ng-template",null,10,M)(114,Sr,5,11,"div",57),q(115,"async")}if(t&2){let a;r(2),l("ngClass",n.modo==="estudiante"?"col-md-8 text-md-start":"text-center"),r(2),I(" ",n.modo==="estudiante"?"Inscripciones":"Inscripciones Estudiantiles"," "),r(2),I(" ",n.modo==="estudiante"?"Gestiona las Inscripciones del estudiante: ":"Gestiona la Informaci\xF3n de Inscripciones de sus estudiantes de manera sencilla y eficiente"," "),r(2),I(" ",n.modo==="estudiante"?""+n.nombreEstudiante:""," "),r(),l("ngIf",n.modo==="estudiante"),r(5),l("options",n._tools.optionsAdicionar),r(6),l("options",n._tools.optionsestadisticas),r(7),N("ngModel",n.selectedAnioId),r(),l("ngForOf",n.anios),r(6),l("options",n._tools.optionslupa),r(2),N("ngModel",n.filtertxtinfoestudiantesifas),r(6),N("ngModel",n.incluirSinAsignar),r(3),l("disabled",n.isLoadingCursosParaListas||n.isGenerandoListasPreliminares),r(10),l("ngIf",n.esSuperAdmin),r(3),l("ngIf",n.isSortedinfoestudiantesifas("Anio")),r(3),l("ngIf",n.isSortedinfoestudiantesifas("FechInsc")),r(),l("ngIf",!n.estudianteId),r(),l("ngIf",!n.estudianteId),r(),l("ngIf",!n.estudianteId),r(),l("ngIf",!n.estudianteId),r(3),l("ngIf",n.isSortedinfoestudiantesifas("Categoria")),r(3),l("ngIf",n.isSortedinfoestudiantesifas("Curso_Solicitado")),r(3),l("ngIf",n.isSortedinfoestudiantesifas("Paralelo_Solicitado")),r(3),l("ngIf",n.isSortedinfoestudiantesifas("Turno")),r(3),l("ngIf",n.isSortedinfoestudiantesifas("CantidadMateriasAsignadas")),r(3),l("ngIf",n.isSortedinfoestudiantesifas("Verificacion")),r(4),l("ngIf",n.isLoadinginfoestudiantesifas),r(),pe(!n.isLoadinginfoestudiantesifas&&(!n.infoestudiantesifas||n.infoestudiantesifas.length===0)?88:-1),r(),l("ngForOf",n.infoestudiantesifas),r(2),l("page",n.paginainfoestudiantesifas)("collectionSize",n.collectionSizeinfoestudiantesifas)("pageSize",n.pageSizeinfoestudiantesifas)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),r(),N("ngModel",n.pageSizeinfoestudiantesifas),r(),l("ngForOf",n.pageSizeOptionsinfoestudiantesifas),r(21),l("ngIf",(a=H(115,39,n.menuStateinfoestudiantesifas$))==null?null:a.visible)}},dependencies:[st,ot,rt,$t,qt,pt,_t,zt,Ht,Ut,mt,dt,Gt,ut,ve,Qt,Wt,Yt,gt,bt,Xt,ee,St,Bt,Ce],styles:["[_nghost-%COMP%]     mark.match-strong{background-color:rgba(var(--bs-warning-rgb),.55);color:var(--bs-dark);font-weight:800;padding:0 .15rem;border-radius:.2rem;box-decoration-break:clone;-webkit-box-decoration-break:clone;outline:1px solid rgba(var(--bs-warning-rgb),.9)}"]});var yt=It;var yr=["modalOtroComponentecalifhistorias"],wr=["modalOtroComponenteRegistrarpagos"],Ar=["modalVincularCelular"],Tr=["modalEsperaFotoCelular"],Mr=["modalgestionestudiantesifas"],X=(i,e)=>({"bi-caret-up":i,"bi-caret-down":e}),Vr=(i,e,t)=>({"bg-success":i,"bg-secondary":e,"bg-danger":t}),Pr=(i,e)=>({top:i,left:e});function kr(i,e){if(i&1&&x(0,"i",38),i&2){let t=u();l("ngClass",T(1,X,t.getSortDirestudiantesifas("Ap_Paterno")==="asc",t.getSortDirestudiantesifas("Ap_Paterno")==="desc"))}}function Nr(i,e){if(i&1&&x(0,"i",38),i&2){let t=u();l("ngClass",T(1,X,t.getSortDirestudiantesifas("Ap_Materno")==="asc",t.getSortDirestudiantesifas("Ap_Materno")==="desc"))}}function Fr(i,e){if(i&1&&x(0,"i",38),i&2){let t=u();l("ngClass",T(1,X,t.getSortDirestudiantesifas("Nombre")==="asc",t.getSortDirestudiantesifas("Nombre")==="desc"))}}function Or(i,e){if(i&1&&x(0,"i",38),i&2){let t=u();l("ngClass",T(1,X,t.getSortDirestudiantesifas("CI")==="asc",t.getSortDirestudiantesifas("CI")==="desc"))}}function Rr(i,e){if(i&1&&x(0,"i",38),i&2){let t=u();l("ngClass",T(1,X,t.getSortDirestudiantesifas("Expedido")==="asc",t.getSortDirestudiantesifas("Expedido")==="desc"))}}function Dr(i,e){if(i&1&&x(0,"i",38),i&2){let t=u();l("ngClass",T(1,X,t.getSortDirestudiantesifas("Sexo")==="asc",t.getSortDirestudiantesifas("Sexo")==="desc"))}}function Lr(i,e){if(i&1&&x(0,"i",38),i&2){let t=u();l("ngClass",T(1,X,t.getSortDirestudiantesifas("Edad")==="asc",t.getSortDirestudiantesifas("Edad")==="desc"))}}function $r(i,e){if(i&1&&x(0,"i",38),i&2){let t=u();l("ngClass",T(1,X,t.getSortDirestudiantesifas("Estado")==="asc",t.getSortDirestudiantesifas("Estado")==="desc"))}}function Br(i,e){i&1&&(o(0,"tr")(1,"td",28)(2,"div",39)(3,"span",40),d(4,"Cargando..."),s()()()()),i&2&&(r(),B("colspan",10))}function jr(i,e){i&1&&(o(0,"tr")(1,"td",28),d(2,"No hay datos disponibles"),s()()),i&2&&(r(),B("colspan",10))}function Ur(i,e){if(i&1&&x(0,"img",51),i&2){let t=u(2);l("src",t._tools.rutabtniconsanimaciones+"inscripcion.svg",P)}}function zr(i,e){if(i&1&&x(0,"ng-lottie",52),i&2){let t=u(2);l("options",t._tools.optionsAdicionar)}}function Gr(i,e){if(i&1&&x(0,"img",51),i&2){let t=u(2);l("src",t._tools.rutabtniconsanimaciones+"historial.svg",P)}}function qr(i,e){if(i&1&&x(0,"ng-lottie",52),i&2){let t=u(2);l("options",t._tools.optionsarchive)}}function Hr(i,e){if(i&1&&x(0,"img",51),i&2){let t=u(3);l("src",t._tools.rutabtniconsanimaciones+"money.svg",P)}}function Qr(i,e){if(i&1&&x(0,"ng-lottie",52),i&2){let t=u(3);l("options",t._tools.optionsmoney)}}function Wr(i,e){if(i&1){let t=b();o(0,"button",53),h("click",function(a){p(t);let c=u().$implicit,m=u();return _(m.abrirRegistroPagoDesdeEstudiante(c,a))})("mouseenter",function(){p(t);let a=u().$implicit,c=u();return _(c._tools.hoverBotonMap["pagosestudiantesifas-"+a.id]=!0)})("mouseleave",function(){p(t);let a=u().$implicit,c=u();return _(c._tools.hoverBotonMap["pagosestudiantesifas-"+a.id]=!1)}),g(1,Hr,1,1,"img",45)(2,Qr,1,1,"ng-lottie",46),s()}if(i&2){let t=u().$implicit,n=u();r(),l("ngIf",!n._tools.hoverBotonMap["pagosestudiantesifas-"+t.id]),r(),l("ngIf",n._tools.hoverBotonMap["pagosestudiantesifas-"+t.id])}}function Kr(i,e){if(i&1&&x(0,"img",51),i&2){let t=u(2);l("src",t._tools.rutabtniconsanimaciones+"pencil.svg",P)}}function Yr(i,e){if(i&1&&x(0,"ng-lottie",52),i&2){let t=u(2);l("options",t._tools.optionsEditar)}}function Xr(i,e){if(i&1&&x(0,"img",51),i&2){let t=u(2);l("src",t._tools.rutabtniconsanimaciones+"delete.svg",P)}}function Zr(i,e){if(i&1&&x(0,"ng-lottie",52),i&2){let t=u(2);l("options",t._tools.optionsEliminar)}}function Jr(i,e){if(i&1){let t=b();o(0,"tr",41),h("contextmenu",function(a){let c=p(t).$implicit,m=u();return _(m.abrirMenuestudiantesifas(a,c))}),o(1,"td",28),d(2),s(),o(3,"td"),x(4,"span",42),s(),o(5,"td"),x(6,"span",42),s(),o(7,"td"),x(8,"span",42),s(),o(9,"td"),x(10,"span",42),s(),o(11,"td"),x(12,"span",42),s(),o(13,"td"),x(14,"span",42),s(),o(15,"td"),d(16),s(),o(17,"td"),x(18,"span",42),s(),o(19,"td",43)(20,"button",44),h("click",function(){let a=p(t).$implicit,c=u(),m=j(73);return c.VisualizarInfoEstudiante(a.id),_(c._tools.openModal(m,"xl"))})("mouseenter",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["visualizacionestudiantesifas-"+a.id]=!0)})("mouseleave",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["visualizacionestudiantesifas-"+a.id]=!1)}),g(21,Ur,1,1,"img",45)(22,zr,1,1,"ng-lottie",46),s(),o(23,"button",47),h("click",function(a){let c=p(t).$implicit,m=u();return _(m.abrirHistorialDesdeEstudiante(c,a))})("mouseenter",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["historialestudiantesifas-"+a.id]=!0)})("mouseleave",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["historialestudiantesifas-"+a.id]=!1)}),g(24,Gr,1,1,"img",45)(25,qr,1,1,"ng-lottie",46),s(),g(26,Wr,3,2,"button",48),o(27,"button",49),h("click",function(){let a=p(t).$implicit,c=u();return _(c.Seleccionarestudiantesifas(a.id))})("mouseenter",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["edicionestudiantesifas-"+a.id]=!0)})("mouseleave",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["edicionestudiantesifas-"+a.id]=!1)}),g(28,Kr,1,1,"img",45)(29,Yr,1,1,"ng-lottie",46),s(),o(30,"button",50),h("click",function(){let a=p(t).$implicit,c=u();return _(c.Eliminarestudiantesifas(a.id))})("mouseenter",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["eliminacionestudiantesifas-"+a.id]=!0)})("mouseleave",function(){let a=p(t).$implicit,c=u();return _(c._tools.hoverBotonMap["eliminacionestudiantesifas-"+a.id]=!1)}),g(31,Xr,1,1,"img",45)(32,Zr,1,1,"ng-lottie",46),s()()()}if(i&2){let t=e.$implicit,n=e.index,a=u();r(2),E(a.rowIndexBaseestudiantesifas+(n+1)),r(2),l("innerHTML",a.highlightCell(t.Ap_Paterno),V),r(2),l("innerHTML",a.highlightCell(t.Ap_Materno),V),r(2),l("innerHTML",a.highlightCell(t.Nombre),V),r(2),l("innerHTML",a.highlightCell(t.CI),V),r(2),l("innerHTML",a.highlightCell(t.Expedido),V),r(2),l("innerHTML",a.highlightCell(t.Sexo),V),r(2),E(t.Edad),r(2),l("innerHTML",a.highlightCell(t.Estado),V),r(3),l("ngIf",!a._tools.hoverBotonMap["visualizacionestudiantesifas-"+t.id]),r(),l("ngIf",a._tools.hoverBotonMap["visualizacionestudiantesifas-"+t.id]),r(2),l("ngIf",!a._tools.hoverBotonMap["historialestudiantesifas-"+t.id]),r(),l("ngIf",a._tools.hoverBotonMap["historialestudiantesifas-"+t.id]),r(),l("ngIf",a.habilitarSistemaPagosCarreras),r(2),l("ngIf",!a._tools.hoverBotonMap["edicionestudiantesifas-"+t.id]),r(),l("ngIf",a._tools.hoverBotonMap["edicionestudiantesifas-"+t.id]),r(2),l("ngIf",!a._tools.hoverBotonMap["eliminacionestudiantesifas-"+t.id]),r(),l("ngIf",a._tools.hoverBotonMap["eliminacionestudiantesifas-"+t.id])}}function tl(i,e){if(i&1&&(o(0,"option",54),d(1),s()),i&2){let t=e.$implicit;l("value",t),r(),I("",t," por p\xE1gina")}}function el(i,e){if(i&1&&(o(0,"div"),x(1,"img",120),s()),i&2){let t,n=u(2);r(),l("src",n._tools.ruta+((t=n.newestudiantesifas.get("Foto"))==null?null:t.value),P)}}function il(i,e){i&1&&(o(0,"div",64),d(1,"SIN FOTO DE PERFIL"),s())}function nl(i,e){if(i&1&&(o(0,"div",121)(1,"div",122)(2,"div",123),d(3),s()()()),i&2){let t=u(2);r(2),Z("width",t.uploadProgressFoto,"%"),r(),I(" ",t.uploadProgressFoto,"% ")}}function al(i,e){if(i&1){let t=b();o(0,"div",124)(1,"div")(2,"div",125),d(3,"Esperando foto del celular..."),s(),o(4,"div",126),d(5),s()(),o(6,"button",127),h("click",function(){p(t);let a=u(2);return _(a.cancelarEsperaCaptura())}),d(7,"Cancelar"),s()()}if(i&2){let t=u(2);r(5),I("Estado: ",t.capturaStatus||"PENDING",". Puedes seguir llenando el formulario.")}}function sl(i,e){i&1&&(o(0,"div",128),d(1," Este campo es obligatorio* "),s())}function ol(i,e){if(i&1&&(o(0,"option",129),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function rl(i,e){if(i&1&&(o(0,"option",129),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function ll(i,e){if(i&1){let t=b();o(0,"button",130),h("click",function(){let a;p(t);let c=u(2);return _(c.newestudiantesifas.patchValue({Usuario:((a=c.newestudiantesifas.get("Ap_Paterno"))==null?null:a.value.charAt(0))+((a=c.newestudiantesifas.get("Ap_Materno"))==null?null:a.value.charAt(0))+((a=c.newestudiantesifas.get("Nombre"))==null?null:a.value.charAt(0))+((a=c.newestudiantesifas.get("CI"))==null?null:a.value)+"EST"}))}),x(1,"ng-lottie",131),s()}if(i&2){let t=u(2);r(),l("options",t._tools.optionstripleengranaje)}}function cl(i,e){i&1&&(o(0,"div",132),d(1," Este campo es obligatorio* "),s())}function dl(i,e){if(i&1){let t=b();o(0,"button",133),h("click",function(){p(t);let a=u(2);return _(a.mostrarContrasenia=!a.mostrarContrasenia)}),x(1,"ng-lottie",131),s()}if(i&2){let t=u(2);r(),l("options",t._tools.optionseye)}}function ul(i,e){i&1&&(o(0,"div",132),d(1," Este campo es obligatorio* "),s())}function ml(i,e){if(i&1&&(o(0,"option",129),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function pl(i,e){if(i&1&&(o(0,"option",129),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function _l(i,e){if(i&1&&(o(0,"option",129),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function fl(i,e){if(i&1&&(o(0,"option",129),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function gl(i,e){if(i&1&&(o(0,"option",129),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function hl(i,e){if(i&1&&(o(0,"option",129),d(1),s()),i&2){let t=e.$implicit;l("value",t.value)("disabled",t.disabled),r(),E(t.label)}}function xl(i,e){if(i&1){let t=b();o(0,"button",136),h("click",function(){p(t);let a=u(3);return _(a.AutoCompletarLastestudiantesifas())}),o(1,"span",15),x(2,"ng-lottie",16),s(),o(3,"span"),d(4,"AUTO COMPLETAR "),s(),x(5,"span",17),s()}if(i&2){let t=u(3);r(2),l("options",t._tools.optionsautocompletar)}}function vl(i,e){if(i&1&&(o(0,"div",134),g(1,xl,6,1,"button",135),s()),i&2){let t=u(2);r(),l("ngIf",!t.AnimacionCargabtnModalestudiantesifas)}}function El(i,e){if(i&1){let t=b();o(0,"button",137),h("click",function(){p(t);let a=u().$implicit,c=u();return a.dismiss(),_(c.resetestudiantesifas())}),o(1,"span",15),x(2,"ng-lottie",16),s(),o(3,"span"),d(4,"CANCELAR"),s(),x(5,"span",17),s()}if(i&2){let t=u(2);r(2),l("options",t._tools.optionscancelar)}}function bl(i,e){if(i&1){let t=b();o(0,"button",138),h("click",function(){p(t);let a=u(2);return _(a.AgregarModificarestudiantesifas())}),x(1,"span",139),s()}i&2&&l("disabled",!0)}function Cl(i,e){if(i&1){let t=b();o(0,"button",140),h("click",function(){p(t);let a=u(2);return _(a.AgregarModificarestudiantesifas())}),o(1,"span",15),x(2,"ng-lottie",16),s(),o(3,"span"),d(4),s(),x(5,"span",17),s()}if(i&2){let t,n,a=u(2);l("disabled",a.isUploadingFoto),r(2),l("options",(t=a.newestudiantesifas.get("id"))!=null&&t.value?a._tools.optionsEditar:a._tools.optionsAdicionar),r(2),E((n=a.newestudiantesifas.get("id"))!=null&&n.value?"MODIFICAR":"REGISTRAR")}}function Sl(i,e){if(i&1){let t=b();o(0,"div",55)(1,"h4",56),d(2),s(),o(3,"button",57),h("click",function(){let a=p(t).$implicit,c=u();return a.dismiss(),_(c.resetestudiantesifas())}),s()(),o(4,"div",58)(5,"form",59)(6,"div",9)(7,"div",60)(8,"label",61),d(9,"Foto actual"),s(),g(10,el,2,1,"div",62)(11,il,2,0,"ng-template",null,6,M),s(),o(13,"div",60)(14,"label",61),d(15,"SUBIR FOTO DE PERFIL (1 archivo)"),s(),o(16,"div",63),h("dragover",function(a){p(t);let c=u();return _(c.onFotoDragOver(a))})("dragleave",function(a){p(t);let c=u();return _(c.onFotoDragLeave(a))})("drop",function(a){p(t);let c=u();return _(c.onFotoDrop(a))})("click",function(){p(t);let a=j(21),c=u();return _(c.abrirSelectorFoto(a))}),o(17,"div",64),d(18,"Arrastra y suelta aqu\xED, o clic para seleccionar archivo"),s(),g(19,nl,4,3,"div",65),s(),o(20,"input",66,7),h("change",function(a){p(t);let c=u();return _(c.onFotoFileSelected(a))}),s(),o(22,"div",67)(23,"button",68),h("click",function(){p(t);let a=u();return _(a.abrirVinculacionCelular())}),d(24," Vincular celular (QR) "),s(),o(25,"span",69),d(26),s(),o(27,"button",70),h("click",function(){p(t);let a=u();return _(a.iniciarCapturaFotoPorCelular())}),d(28," Tomar foto con celular "),s()(),g(29,al,8,1,"div",71)(30,sl,2,0,"div",72),s()(),o(31,"div",9)(32,"div",73)(33,"input",74),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"Ap_Paterno"))}),s(),o(34,"label"),d(35,"Apellido Paterno"),s(),o(36,"div",75),d(37,"Este campo es obligatorio*"),s()(),o(38,"div",73)(39,"input",76),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"Ap_Materno"))}),s(),o(40,"label"),d(41,"Apellido Materno"),s(),o(42,"div",75),d(43,"Este campo es obligatorio*"),s()(),o(44,"div",77)(45,"input",78),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"Nombre"))}),s(),o(46,"label"),d(47,"Nombres"),s(),o(48,"div",75),d(49,"Este campo es obligatorio*"),s()()(),o(50,"div",9)(51,"div",73)(52,"input",79),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"CI"))}),s(),o(53,"label"),d(54,"C\xE9dula de Identidad"),s(),o(55,"div",75),d(56,"Este campo es obligatorio*"),s()(),o(57,"div",80)(58,"select",81)(59,"option",82),d(60,"Seleccione una opci\xF3n"),s(),g(61,ol,2,3,"option",83),s(),o(62,"label"),d(63,"Expedido"),s(),o(64,"div",75),d(65,"Este campo es obligatorio*"),s()(),o(66,"div",80)(67,"select",84)(68,"option",82),d(69,"Seleccione una opci\xF3n"),s(),g(70,rl,2,3,"option",83),s(),o(71,"label"),d(72,"Sexo"),s(),o(73,"div",75),d(74,"Este campo es obligatorio*"),s()(),o(75,"div",73)(76,"input",85),h("change",function(a){let c;p(t);let m=u();return _((c=m.newestudiantesifas.get("Edad"))==null?null:c.setValue(m._tools.CalcularEdad(a.target.value)))}),s(),o(77,"label"),d(78,"Fecha de Nacimiento"),s(),o(79,"div",75),d(80,"Este campo es obligatorio*"),s()(),o(81,"div",80),x(82,"input",86),o(83,"label"),d(84,"Edad"),s(),o(85,"div",75),d(86,"Este campo es obligatorio*"),s()()(),o(87,"div",9)(88,"div",73)(89,"input",87),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"Celular"))}),s(),o(90,"label"),d(91,"Celular"),s(),o(92,"div",75),d(93,"Este campo es obligatorio*"),s()(),o(94,"div",88)(95,"input",89),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"Direccion"))}),s(),o(96,"label"),d(97,"Direcci\xF3n"),s(),o(98,"div",75),d(99,"Este campo es obligatorio*"),s()(),o(100,"div",90),x(101,"input",91),o(102,"label"),d(103,"Correo"),s(),o(104,"div",75),d(105,"Este campo es obligatorio*"),s()()(),o(106,"div",9)(107,"div",92)(108,"div",93)(109,"div",94)(110,"input",95),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"Usuario"))}),s(),o(111,"label"),d(112,"Usuario"),s()(),g(113,ll,2,1,"button",96),s(),g(114,cl,2,0,"div",97),s(),o(115,"div",92)(116,"div",93)(117,"div",94),x(118,"input",98),o(119,"label"),d(120,"Contrase\xF1a"),s()(),g(121,dl,2,1,"button",99),s(),g(122,ul,2,0,"div",97),s(),o(123,"div",90)(124,"select",100)(125,"option",82),d(126,"Seleccione una opci\xF3n"),s(),g(127,ml,2,3,"option",83),s(),o(128,"label"),d(129,"Estado"),s(),o(130,"div",75),d(131,"Este campo es obligatorio*"),s()()(),x(132,"hr"),o(133,"div",9)(134,"div",90)(135,"input",101),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"Nombre_Padre"))}),s(),o(136,"label"),d(137,"Nombre Padre"),s(),o(138,"div",75),d(139,"Este campo es obligatorio*"),s()(),o(140,"div",73)(141,"select",102)(142,"option",82),d(143,"Seleccione una opci\xF3n"),s(),g(144,pl,2,3,"option",83),s(),o(145,"label"),d(146,"Ocupaci\xF3n del Padre"),s(),o(147,"div",75),d(148,"Este campo es obligatorio*"),s()(),o(149,"div",90)(150,"input",103),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"NumCelP"))}),s(),o(151,"label"),d(152,"N\xFAmero Celular del Padre"),s(),o(153,"div",75),d(154,"Este campo es obligatorio*"),s()()(),o(155,"div",9)(156,"div",90)(157,"input",104),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"Nombre_Madre"))}),s(),o(158,"label"),d(159,"Nombre Madre"),s(),o(160,"div",75),d(161,"Este campo es obligatorio*"),s()(),o(162,"div",73)(163,"select",105)(164,"option",82),d(165,"Seleccione una opci\xF3n"),s(),g(166,_l,2,3,"option",83),s(),o(167,"label"),d(168,"Ocupaci\xF3n de la Madre"),s(),o(169,"div",75),d(170,"Este campo es obligatorio*"),s()(),o(171,"div",90)(172,"input",106),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"NumCelM"))}),s(),o(173,"label"),d(174,"N\xFAmero Celular de la Madre"),s(),o(175,"div",75),d(176,"Este campo es obligatorio*"),s()()(),o(177,"div",9)(178,"div",73)(179,"input",107),h("change",function(a){p(t);let c=u();return _(c._tools.EscribirEnMayuscula(a,c.newestudiantesifas,"NColegio"))}),s(),o(180,"label"),d(181,"Nombre Colegio"),s(),o(182,"div",75),d(183,"Este campo es obligatorio*"),s()(),o(184,"div",73)(185,"select",108)(186,"option",82),d(187,"Seleccione una opci\xF3n"),s(),g(188,fl,2,3,"option",83),s(),o(189,"label"),d(190,"Tipo Colegio"),s(),o(191,"div",75),d(192,"Este campo es obligatorio*"),s()(),o(193,"div",73)(194,"select",109)(195,"option",82),d(196,"Seleccione una opci\xF3n"),s(),g(197,gl,2,3,"option",83),s(),o(198,"label"),d(199,"Nivel del Colegio"),s(),o(200,"div",75),d(201,"Este campo es obligatorio*"),s()(),o(202,"div",73)(203,"select",110)(204,"option",82),d(205,"Seleccione una opci\xF3n"),s(),g(206,hl,2,3,"option",83),s(),o(207,"label"),d(208,"Grado en Colegio"),s(),o(209,"div",75),d(210,"Este campo es obligatorio*"),s()()(),o(211,"div",111)(212,"label"),d(213,"Informaci\xF3n Compartida IFAS"),s(),x(214,"quill-editor",112),o(215,"div",75),d(216,"Este campo es obligatorio*"),s()()()(),o(217,"div",113),g(218,vl,2,1,"div",114),o(219,"div",115),g(220,El,6,1,"button",116),s(),o(221,"div",117),g(222,bl,2,1,"button",118)(223,Cl,6,3,"button",119),s()()}if(i&2){let t,n,a,c,m,v=j(12),f=u();r(2),I("",(t=f.newestudiantesifas.get("id"))!=null&&t.value?"Modificar":"Registrar"," Informaci\xF3n Personal Estudiante"),r(3),l("formGroup",f.newestudiantesifas),r(5),l("ngIf",(n=f.newestudiantesifas.get("Foto"))==null?null:n.value)("ngIfElse",v),r(6),G("border-primary",f.isDraggingFoto)("bg-light",f.isDraggingFoto),r(3),l("ngIf",f.isUploadingFoto),r(4),l("disabled",f.isUploadingFoto),r(2),l("ngClass",Vt(58,Vr,f.pairingStatus==="LINKED",!f.pairingStatus||f.pairingStatus==="PENDING",f.pairingStatus==="EXPIRED"||f.pairingStatus==="REVOKED")),r(),I(" ",f.pairingStatus==="LINKED"?"VINCULADO":f.pairingStatus||"NO VINCULADO"," "),r(),l("disabled",f.isUploadingFoto||f.isEsperandoCapturaFoto),r(2),l("ngIf",f.isEsperandoCapturaFoto&&f.capturaToken),r(),l("ngIf",((a=f.newestudiantesifas.get("Foto"))==null?null:a.touched)&&((a=f.newestudiantesifas.get("Foto"))==null?null:a.invalid)),r(3),l("ngClass",f.ValidacionestudiantesifasxElemento("Ap_Paterno")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("Ap_Materno")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("Nombre")),r(7),l("ngClass",f.ValidacionestudiantesifasxElemento("CI")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("Expedido")),r(3),l("ngForOf",f.expedidoOptions),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("Sexo")),r(3),l("ngForOf",f.sexoOptions),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("FechaNac")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("Edad")),r(7),l("ngClass",f.ValidacionestudiantesifasxElemento("Celular")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("Direccion")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("Correo")),r(9),l("ngClass",f.ValidacionestudiantesifasxElemento("Usuario")),r(3),l("ngIf",!f.AnimacionCargabtnModalplanteldocentes),r(),l("ngIf",((c=f.newestudiantesifas.get("Usuario"))==null?null:c.touched)&&((c=f.newestudiantesifas.get("Usuario"))==null?null:c.invalid)),r(4),l("type",f.mostrarContrasenia?"text":"password")("ngClass",f.ValidacionestudiantesifasxElemento("Contrasenia")),r(3),l("ngIf",!f.AnimacionCargabtnModalplanteldocentes),r(),l("ngIf",((m=f.newestudiantesifas.get("Contrasenia"))==null?null:m.touched)&&((m=f.newestudiantesifas.get("Contrasenia"))==null?null:m.invalid)),r(2),l("ngClass",f.ValidacionestudiantesifasxElemento("Estado")),r(3),l("ngForOf",f.estadoOptions),r(8),l("ngClass",f.ValidacionestudiantesifasxElemento("Nombre_Padre")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("OcupacionP")),r(3),l("ngForOf",f.OcupacionOptions),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("NumCelP")),r(7),l("ngClass",f.ValidacionestudiantesifasxElemento("Nombre_Madre")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("OcupacionM")),r(3),l("ngForOf",f.OcupacionOptions),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("NumCelM")),r(7),l("ngClass",f.ValidacionestudiantesifasxElemento("NColegio")),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("TipoColegio")),r(3),l("ngForOf",f.tipoColegioOptions),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("CNivel")),r(3),l("ngForOf",f.nivelColegioOptions),r(6),l("ngClass",f.ValidacionestudiantesifasxElemento("CGrado")),r(3),l("ngForOf",f.gradoColegioOptions),r(8),l("modules",f.modulesQuillEdicion)("ngClass",f.ValidacionestudiantesifasxElemento("InformacionCompartidaIFAS")),r(4),l("ngIf",!f.newestudiantesifas.get("id").value),r(2),l("ngIf",!f.AnimacionCargabtnModalestudiantesifas),r(2),l("ngIf",f.AnimacionCargabtnModalestudiantesifas),r(),l("ngIf",!f.AnimacionCargabtnModalestudiantesifas)}}function Il(i,e){if(i&1&&(o(0,"div",146),x(1,"img",147),s()),i&2){let t=u(2);r(),l("src",t.pairingQrDataUrl,P)}}function yl(i,e){if(i&1&&(o(0,"div",143)(1,"a",148),d(2,"Abrir link en el celular"),s()()),i&2){let t=u(2);r(),l("href",t.pairingUrl,P)}}function wl(i,e){if(i&1){let t=b();o(0,"div",55)(1,"h4",56),d(2,"Vincular celular"),s(),o(3,"button",57),h("click",function(){let a=p(t).$implicit;return _(a.dismiss())}),s()(),o(4,"div",58)(5,"div",141),d(6,"Escanea este QR una sola vez desde el celular."),s(),g(7,Il,2,1,"div",142),o(8,"div",143)(9,"div",144),d(10,"Estado"),s(),o(11,"div",125),d(12),s()(),g(13,yl,3,1,"div",145),s()}if(i&2){let t=u();r(7),l("ngIf",t.pairingQrDataUrl),r(5),E(t.pairingStatus||"..."),r(),l("ngIf",t.pairingUrl)}}function Al(i,e){if(i&1){let t=b();o(0,"div",55)(1,"h4",56),d(2,"Esperando foto..."),s(),o(3,"button",57),h("click",function(){let a=p(t).$implicit;return _(a.dismiss())}),s()(),o(4,"div",58)(5,"div",64),d(6,"En el celular entra a \u201CCaptura desde celular\u201D (ya vinculado) y toma la foto."),s(),o(7,"div",143)(8,"div",144),d(9,"Estado"),s(),o(10,"div",125),d(11),s()(),o(12,"div",149)(13,"button",127),h("click",function(){let a=p(t).$implicit;return u().cancelarEsperaCaptura(),_(a.close())}),d(14,"Cancelar espera"),s()()()}if(i&2){let t=u();r(11),E(t.capturaStatus||"PENDING")}}function Tl(i,e){if(i&1){let t=b();o(0,"button",152),h("click",function(){let a=p(t).$implicit;return _(a.action())}),d(1),s()}if(i&2){let t=e.$implicit;r(),I(" ",t.label," ")}}function Ml(i,e){if(i&1&&(o(0,"div",150),q(1,"async"),q(2,"async"),g(3,Tl,2,1,"button",151),q(4,"async"),s()),i&2){let t,n,a=u();l("ngStyle",T(8,Pr,((t=H(1,2,a.menuStateestudiantesifas$))==null?null:t.y)+"px",((t=H(2,4,a.menuStateestudiantesifas$))==null?null:t.x)+"px")),r(3),l("ngForOf",(n=H(4,6,a.menuStateestudiantesifas$))==null?null:n.items)}}function Vl(i,e){if(i&1){let t=b();o(0,"div",55)(1,"h5",56),d(2,"Inscripciones del estudiante"),s(),o(3,"button",153),h("click",function(){let a=p(t).$implicit;return _(a.dismiss())}),s()(),o(4,"div",58),x(5,"app-estudiantesinscritos",154),s()}if(i&2){let t=u();r(5),l("modo","estudiante")("estudianteId",t.estudianteSeleccionadoId)("nombreEstudiante",t.estudianteSeleccionadoNombre)("fotoEstudiante",t.estudianteSeleccionadoFoto)("sexoEstudiante",t.estudianteSeleccionadoSexo)}}function Pl(i,e){if(i&1){let t=b();o(0,"div",55)(1,"h5",56),d(2,"Componente Registro de pagos estudiantes de carrera"),s(),o(3,"button",153),h("click",function(){let a=p(t).$implicit;return _(a.dismiss())}),s()(),o(4,"div",58),x(5,"app-sistemapagoslcch",155),s()}if(i&2){let t=u();r(5),l("modo",t.pagosModo)("infoId",t.pagosInfoId)("estudianteId",t.pagosEstudianteId)("nombreEstudiante",t.pagosNombreEstudiante)("fotoEstudiante",t.pagosFotoEstudiante)("sexoEstudiante",t.pagosSexoEstudiante)("gestionPredeterminada",t.pagosGestionPredeterminada)}}function kl(i,e){if(i&1){let t=b();o(0,"div",55)(1,"h5",56),d(2,"Componente Historias"),s(),o(3,"button",153),h("click",function(){let a=p(t).$implicit;return _(a.dismiss())}),s()(),o(4,"div",58),x(5,"app-califhistorias",156),s()}if(i&2){let t=u();r(5),l("modo","modal_ci")("ciBusqueda",t.historialCiBusqueda)("institucion",t.historialInstitucionNombre)}}var wt=class wt{constructor(e,t,n,a,c,m,v,f,C){this._est=e;this._infoest=t;this._tools=n;this._controles=a;this._auth=c;this._inst=m;this._capture=v;this._pairing=f;this.router=C;this.modulesQuillEdicion={toolbar:[["bold","italic","underline","strike"],[{align:[]}],[{size:["small",!1,"large"]}],[{color:[]},{background:[]}],[{font:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","video"],["clean"]]};this.modulesQuillShow={toolbar:!1};this.habilitarSistemaPagosCarreras=!1;this.institucionCaractisticasActual="";this.institucionNombreActual="";this.historialCiBusqueda="";this.historialInstitucionNombre="";this.pagosModo="estudiante";this.pagosInfoId=null;this.pagosEstudianteId=null;this.pagosNombreEstudiante=null;this.pagosFotoEstudiante=null;this.pagosSexoEstudiante=null;this.pagosGestionPredeterminada=null;this.sexoOptions=[];this.expedidoOptions=[];this.estadoOptions=[];this.especialidadOptions=[];this.tipoColegioOptions=[];this.nivelColegioOptions=[];this.gradoColegioOptions=[];this.OcupacionOptions=[];this.pairingToken=null;this.pairingStatus=null;this.pairingUrl=null;this.pairingQrDataUrl=null;this.pairingIntervalId=null;this.capturaToken=null;this.capturaStatus=null;this.isEsperandoCapturaFoto=!1;this.capturaIntervalId=null;this.isDraggingFoto=!1;this.isUploadingFoto=!1;this.uploadProgressFoto=0;this.fotoAnteriorPath=null;this.fotoTempPath=null;this.estudiantesifas=[];this.paginaestudiantesifas=1;this.isLoadingestudiantesifas=!0;this.AnimacionCargabtnModalestudiantesifas=!1;this.filtertxtestudiantesifas="";this.sortByColumnestudiantesifas="id";this.sortDirestudiantesifas="desc";this.ordenManualestudiantesifas=!1;this.rowIndexBaseestudiantesifas=0;this.estudianteSeleccionadoId=null;this.estudianteSeleccionadoNombre=null;this.estudianteSeleccionadoFoto=null;this.estudianteSeleccionadoSexo=null;this.collectionSizeestudiantesifas=0;this.pageSizeestudiantesifas=10;this.pageSizeOptionsestudiantesifas=[5,10,20,50];this.menuStateestudiantesifas$=this._tools.state$;this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this.newestudiantesifasAnteriorAccion=this._est.createFormGroupestudiantesifas()}ngOnInit(){this.Cargarestudiantesifas(),this.cargarVinculacionDesdeStorage(),this.cargarOptionsDesdeControles(),this.cargarCaractisticasInstitucionActualDesdePerfil()}normalizarTexto(e){return(e??"").toString().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").toUpperCase().trim()}cargarCaractisticasInstitucionActualDesdePerfil(){this._auth.pedirPerfil().subscribe({next:e=>{let t=Number(e?.usuario?.instituciones_id??0);this.cargarCaractisticasInstitucionActual(Number.isFinite(t)&&t>0?t:null)},error:()=>{this.cargarCaractisticasInstitucionActual(null)}})}cargarCaractisticasInstitucionActual(e){if(!e){this.habilitarSistemaPagosCarreras=!1,this.institucionCaractisticasActual="",this.institucionNombreActual="";return}this._inst.Seleccionarinstituciones(e).subscribe({next:t=>{let n=t?.data??t??{};this.institucionCaractisticasActual=(n?.Caractisticas??"").toString(),this.habilitarSistemaPagosCarreras=this.normalizarTexto(this.institucionCaractisticasActual).includes("SISTEMA PAGOS CARRERAS");let a=(n?.NombreInstitucion??n?.Nombre??"").toString().trim();this.institucionNombreActual=a},error:()=>{this.habilitarSistemaPagosCarreras=!1,this.institucionCaractisticasActual="",this.institucionNombreActual=""}})}ciSoloNumeros(e){return(e??"").toString().replace(/\D+/g,"").trim()}institucionHistorialNombre(e){let t=(this.institucionNombreActual??"").toString().trim();return t||(e??"").toString().trim()||"INSTITUCI\xD3N"}abrirHistorialDesdeEstudiante(e,t){t?.preventDefault?.(),t?.stopPropagation?.(),this.historialCiBusqueda=this.ciSoloNumeros(e?.CI),this.historialInstitucionNombre=this.institucionHistorialNombre(e?.NombreInstitucion),this.modalCalifhistoriasRef=this._tools.openModal(this.modalOtroComponentecalifhistorias,"xl")}parseGestion(e){let n=(e??"").toString().trim().match(/^(\d{4})(?:\s*\/\s*(\d+))?$/);if(!n)return{year:-1,sub:-1};let a=Number(n[1]??-1),c=n[2]?Number(n[2]):0;return{year:Number.isFinite(a)?a:-1,sub:Number.isFinite(c)?c:0}}pickUltimaInscripcion(e){return!Array.isArray(e)||e.length===0?null:[...e].sort((n,a)=>{let c=this.parseGestion(n?.Anio),m=this.parseGestion(a?.Anio);if(m.year!==c.year)return m.year-c.year;if(m.sub!==c.sub)return m.sub-c.sub;let v=new Date(n?.FechInsc??0).getTime(),f=new Date(a?.FechInsc??0).getTime();return(Number.isFinite(f)?f:0)-(Number.isFinite(v)?v:0)})[0]??null}abrirRegistroPagoDesdeEstudiante(e,t){if(t?.preventDefault?.(),t?.stopPropagation?.(),!this.habilitarSistemaPagosCarreras){this._tools.MostrarMensaje("warning","Sistema de pagos no habilitado para esta instituci\xF3n");return}let n=Number(e?.id??0);if(!n)return;let a=(e?.Ap_Paterno??"").toString().trim(),c=(e?.Ap_Materno??"").toString().trim(),m=(e?.Nombre??"").toString().trim(),v=`${a} ${c} ${m}`.replace(/\s+/g," ").trim();this.pagosEstudianteId=n,this.pagosNombreEstudiante=v||`#${n}`,this.pagosFotoEstudiante=e?.Foto??null,this.pagosSexoEstudiante=e?.Sexo??null,this._tools.MostrarMensajeLoading(),this._infoest.ObtenerinfoestudiantesifasPorEstudiante(n).subscribe({next:f=>{let C=f?.data??[],S=this.pickUltimaInscripcion(C);if(!S?.id){this._tools.MostrarMensaje("warning","El estudiante no tiene inscripciones para registrar pagos");return}this.pagosInfoId=Number(S.id);let w=(S?.Anio??"").toString().trim();this.pagosGestionPredeterminada=w||null,this.modalRegistrarpagosRef=this._tools.openModal(this.modalOtroComponenteRegistrarpagos,"xl"),this._tools.MostrarMensajeSuccess()},error:()=>{this._tools.MostrarMensajeError()}})}cargarOptionsDesdeControles(){let e=["SEXO","EXPEDIDO","ESTADO","ESPECIALIDAD","TIPO COLEGIO","GRADO DE COLEGIO","NIVEL EN COLEGIO","OCUPACIONES PADRES"];this._controles.ObtenerOptionsSelectPorCategorias(e).subscribe({next:t=>{this.sexoOptions=t?.SEXO||[],this.expedidoOptions=t?.EXPEDIDO||[],this.estadoOptions=t?.ESTADO||[],this.especialidadOptions=t?.ESPECIALIDAD||[],this.tipoColegioOptions=t?.["TIPO COLEGIO"]||[],this.nivelColegioOptions=t?.["NIVEL EN COLEGIO"]||[],this.gradoColegioOptions=t?.["GRADO DE COLEGIO"]||[],this.OcupacionOptions=t?.["OCUPACIONES PADRES"]||[]},error:()=>{this.sexoOptions=[],this.expedidoOptions=[],this.estadoOptions=[],this.especialidadOptions=[],this.tipoColegioOptions=[],this.nivelColegioOptions=[],this.gradoColegioOptions=[],this.OcupacionOptions=[]}})}abrirModalNuevoEstudiantesifas(){this.modalGestionestudiantesifasRef=this._tools.openModal(this.modalgestionestudiantesifas,"xl")}ngOnDestroy(){this.isEsperandoCapturaFoto&&this.cancelarEsperaCaptura(!0),this.detenerPollingCaptura(),this.detenerPollingVinculacion()}cargarVinculacionDesdeStorage(){let e=localStorage.getItem("lcch_capture_pairing_token");e&&(this.pairingToken=e,this.refrescarEstadoVinculacion(!1))}refrescarEstadoVinculacion(e){this.pairingToken&&this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:t=>{let n=t?.data?.status??this.pairingStatus;if(this.pairingStatus=n,n==="REVOKED"||n==="EXPIRED"){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null;return}e&&this._tools.MostrarMensaje("success","Vinculaci\xF3n actualizada")},error:t=>{t?.status===404&&(localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null)}})}abrirVinculacionCelular(){return k(this,null,function*(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida actual");return}this._tools.MostrarMensajeLoading();let e=()=>new Promise((t,n)=>{let a=()=>{this._pairing.crearVinculacion().subscribe({next:c=>{let m=c?.data?.token;if(!m)return n(new Error("No token"));this.pairingToken=m,this.pairingStatus=c?.data?.status??null,localStorage.setItem("lcch_capture_pairing_token",m),t(m)},error:c=>n(c)})};if(this.pairingToken){this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:c=>{let m=c?.data?.status??null;if(this.pairingStatus=m,m==="EXPIRED"||m==="REVOKED"){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null,a();return}t(this.pairingToken)},error:c=>{if(c?.status===404){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null,a();return}n(c)}});return}a()});try{let t=yield e(),n=this.router.serializeUrl(this.router.createUrlTree(["/captura-celular",t])),a=window.location.hostname,m=(a==="localhost"||a==="127.0.0.1")&&ct.frontendPublicBaseUrl?ct.frontendPublicBaseUrl:document.baseURI;this.pairingUrl=new URL(n,m).toString();try{this.pairingQrDataUrl=yield Ge.toDataURL(this.pairingUrl,{width:240,margin:1})}catch{this.pairingQrDataUrl=null}this.modalVincularCelularRef=this._tools.openModal(this.modalVincularCelular,"md"),this.modalVincularCelularRef.result.finally(()=>{this.detenerPollingVinculacion()}),this.iniciarPollingVinculacion(),this._tools.MostrarMensajeSuccess()}catch(t){console.log("ERROR creando vinculaci\xF3n",t),this._tools.MostrarMensajeError()}})}iniciarPollingVinculacion(){this.detenerPollingVinculacion(),this.pairingToken&&(this.pairingIntervalId=setInterval(()=>{this.pairingToken&&this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:e=>{let t=e?.data?.status;this.pairingStatus=t??this.pairingStatus,t==="LINKED"&&this.detenerPollingVinculacion()},error:()=>{}})},2e3))}detenerPollingVinculacion(){this.pairingIntervalId&&(clearInterval(this.pairingIntervalId),this.pairingIntervalId=null)}iniciarCapturaFotoPorCelular(){return k(this,null,function*(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida actual");return}if(!this.pairingToken||this.pairingStatus!=="LINKED"){this._tools.MostrarMensaje("info","Primero vincule el celular (QR)"),yield this.abrirVinculacionCelular();return}this._tools.MostrarMensajeLoading();let e=this.newestudiantesifas.get("id")?.value?Number(this.newestudiantesifas.get("id")?.value):null;this._pairing.solicitarCaptura(this.pairingToken,e,"Foto").subscribe({next:t=>{let n=t?.data?.token;if(!n){this._tools.MostrarMensajeError();return}this.capturaToken=n,this.capturaStatus=t?.data?.status??"PENDING",this.isEsperandoCapturaFoto=!0,this.iniciarPollingCaptura(),this._tools.MostrarMensajeSuccess()},error:t=>{console.log("ERROR solicitando captura",t),this._tools.MostrarMensajeError()}})})}iniciarPollingCaptura(){this.detenerPollingCaptura(),this.capturaToken&&(this.capturaIntervalId=setInterval(()=>{this.capturaToken&&this._capture.estadoSesion(this.capturaToken).subscribe({next:e=>{let t=e?.data?.status,n=e?.data?.file_path;if(this.capturaStatus=t??this.capturaStatus,t==="UPLOADED"&&n){let a=this.fotoTempPath;this.newestudiantesifas.patchValue({Foto:n}),this.fotoTempPath=n,a&&a!==n&&a!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(a),this.isUploadingFoto=!1,this.uploadProgressFoto=0,this.isEsperandoCapturaFoto=!1,this.detenerPollingCaptura(),this._tools.MostrarMensaje("success","Foto recibida desde el celular")}},error:()=>{}})},2e3))}detenerPollingCaptura(){this.capturaIntervalId&&(clearInterval(this.capturaIntervalId),this.capturaIntervalId=null)}cancelarEsperaCaptura(e=!1){let t=this.capturaStatus;this.detenerPollingCaptura(),this.capturaStatus=null,this.capturaToken=null,this.isEsperandoCapturaFoto=!1,this.pairingToken&&t!=="UPLOADED"&&this._pairing.cancelarCaptura(this.pairingToken).subscribe({next:()=>{e||this._tools.MostrarMensaje("info","Espera cancelada")},error:()=>{}})}abrirSelectorFoto(e){e.click()}onFotoDragOver(e){e.preventDefault(),this.isDraggingFoto=!0}onFotoDragLeave(e){e.preventDefault(),this.isDraggingFoto=!1}onFotoDrop(e){e.preventDefault(),this.isDraggingFoto=!1;let t=e.dataTransfer?.files;t&&this.handleFotoFiles(t)}onFotoFileSelected(e){let t=e.target,n=t.files;n&&this.handleFotoFiles(n),t.value=""}handleFotoFiles(e){let t=e.item(0);t&&(e.length>1&&this._tools.MostrarMensaje("warning","Solo se permite 1 archivo"),this.subirFoto(t))}subirFoto(e){this.isUploadingFoto=!0,this.uploadProgressFoto=0,this._tools.SubirArchivo(e,"Foto").subscribe({next:t=>{if(t.type===lt.UploadProgress&&t.total){this.uploadProgressFoto=Math.round(t.loaded/t.total*100);return}if(t.type===lt.Response){let a=t.body?.filePath;if(a){let c=this.fotoTempPath;this.newestudiantesifas.patchValue({Foto:a}),this.fotoTempPath=a,c&&c!==a&&c!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(c)}this.isUploadingFoto=!1}},error:t=>{console.error("Error subiendo foto",t),this.isUploadingFoto=!1,this.uploadProgressFoto=0,this._tools.MostrarMensajeError()}})}limpiarFotoTemporalSiCorresponde(){this.fotoTempPath&&this.fotoTempPath!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(this.fotoTempPath),this.fotoTempPath=null,this.fotoAnteriorPath=null,this.isDraggingFoto=!1,this.isUploadingFoto=!1,this.uploadProgressFoto=0}Cargarestudiantesifas(){this.isLoadingestudiantesifas=!0;let e=(this.filtertxtestudiantesifas??"").toString().trim(),t=e!==""&&!this.ordenManualestudiantesifas,n={page:this.paginaestudiantesifas,per_page:this.pageSizeestudiantesifas,search:e,search_mode:"any",relevance:t?1:0,sort_by:this.sortByColumnestudiantesifas,sort_dir:this.sortDirestudiantesifas};this._est.Obtenerestudiantesifas(n).subscribe({next:a=>{console.log("data estudiantes",a.data),this.estudiantesifas=a.data||[],this.collectionSizeestudiantesifas=a?.meta?.total??this.estudiantesifas.length;let c=a?.meta?.from;this.rowIndexBaseestudiantesifas=typeof c=="number"&&c>0?c-1:0,this.isLoadingestudiantesifas=!1},error:a=>{console.error("Error al cargar estudiantesifas",a),this.estudiantesifas=[],this.collectionSizeestudiantesifas=0,this.rowIndexBaseestudiantesifas=0,this.isLoadingestudiantesifas=!1}})}AgregarModificarestudiantesifas(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida de la foto");return}if(this.newestudiantesifas.invalid){this.ValidacionTodoElementoestudiantesifas(),this._tools.MostrarMensajeFrmIncompleto(),this.AnimacionCargabtnModalestudiantesifas=!1;return}else{this.AnimarCargaTablaestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!0,this._tools.MostrarMensajeLoading(),this.newestudiantesifasAnteriorAccion.setValue(this.newestudiantesifas.value);let e=this.newestudiantesifas.controls.id.value;console.log("INFO A PROCESAR",this.newestudiantesifas.value);let t=this.newestudiantesifas.get("Foto")?.value??null,n=this.fotoAnteriorPath;e?this._est.Modificarestudiantesifas(this.newestudiantesifas.value,this.newestudiantesifas.value.id).subscribe(a=>{console.log("SE MODIFICO CORRECTAMENTE estudiantesifas",a.data),n&&t&&n!==t&&this._tools.EliminarArchivo(n),this.Cargarestudiantesifas(),this.fotoTempPath=null,this.fotoAnteriorPath=null,this.resetestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!1,this._tools.MostrarMensajeSuccess()},a=>{let c=a?.status,m=a?.error?.message;c===409?this._tools.MensajeInformacion("CI duplicado",m||"Ya existe un estudiante con ese CI.","warning"):(console.log("ERROR AL MODIFICAR estudiantesifas",a),this._tools.MostrarMensajeError()),this.AnimacionCargabtnModalestudiantesifas=!1}):this._est.Agregarestudiantesifas(this.newestudiantesifas.value).subscribe(a=>{console.log("SE A\xD1ADIO CORRECTAMENTE estudiantesifas",a.data),this.Cargarestudiantesifas(),this.fotoTempPath=null,this.fotoAnteriorPath=null,this.resetestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!1,this._tools.MostrarMensajeSuccess()},a=>{let c=a?.status,m=a?.error?.message;c===409?this._tools.MensajeInformacion("CI duplicado",m||"Ya existe un estudiante con ese CI.","warning"):(console.log("ERROR AL A\xD1ADIR estudiantesifas",a),this._tools.MostrarMensajeError()),this.AnimacionCargabtnModalestudiantesifas=!1})}}Seleccionarestudiantesifas(e){if(this._tools.MostrarMensajeLoading(),e){if(!this.estudiantesifas.find(n=>n.id===e))return;this._est.Seleccionarestudiantesifas(e).subscribe(n=>{Object.keys(this.newestudiantesifas.controls).forEach(a=>{this.newestudiantesifas.controls[a].setValue(n.data[a])}),console.log("SELECCION DE estudiantesifas EXITOSA",this.newestudiantesifas.value),this.newestudiantesifasAnteriorAccion.setValue(this.newestudiantesifas.value),this.fotoAnteriorPath=this.newestudiantesifas.get("Foto")?.value??null,this.fotoTempPath=null,this.isUploadingFoto=!1,this.uploadProgressFoto=0,this.modalGestionestudiantesifasRef=this._tools.openModal(this.modalgestionestudiantesifas,"xl"),this._tools.MostrarMensajeSuccess()},n=>{console.log("ERROR AL SELECCIONAR estudiantesifas",n),this._tools.MostrarMensajeError()})}}Eliminarestudiantesifas(e){this._tools.mostrarMensajeConfirm("\xBFSEGURO QUE DESEA ELIMINAR?","SE ELIMINARA EL DATO Y NO SE PODR\xC1 RECUPERAR EL DATO","warning","SI, ESTOY SEGURO","NO").then(t=>{t&&(this._tools.MostrarMensajeLoading(),this._est.Eliminarestudiantesifas(e).subscribe(n=>{console.log(n.data),this.Cargarestudiantesifas(),this._tools.MostrarMensajeSuccess()},n=>{console.log("ERROR AL ELIMINAR estudiantesifas",n),this._tools.MostrarMensajeError()}))})}resetestudiantesifas(){this.isEsperandoCapturaFoto&&this.cancelarEsperaCaptura(!0),this.limpiarFotoTemporalSiCorresponde(),this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this._tools.closeModal(this.modalGestionestudiantesifasRef)}AutoCompletarLastestudiantesifas(){this.newestudiantesifas.setValue(this.newestudiantesifasAnteriorAccion.value),this.newestudiantesifas.patchValue({id:0}),console.log("listo",this.newestudiantesifas.value)}AnimarCargaTablaestudiantesifas(){this.estudiantesifas=[],this.isLoadingestudiantesifas=!0}ValidacionestudiantesifasxElemento(e){return this._tools.obtenerValidationClass(this.newestudiantesifas,e)}ValidacionTodoElementoestudiantesifas(){Object.values(this.newestudiantesifas.controls).forEach(e=>{e.markAsTouched(),e.markAsDirty()})}onPageSizeChangeestudiantesifas(){this.paginaestudiantesifas=1,this.Cargarestudiantesifas()}onPageChangeestudiantesifas(e){this.paginaestudiantesifas=e,this.Cargarestudiantesifas()}onSearchChangeestudiantesifas(){this.estudiantesifas=[],this.paginaestudiantesifas=1,this.ordenManualestudiantesifas=!1,this.Cargarestudiantesifas()}escapeHtml(e){return(e??"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}highlightCell(e){let t=(e??"").toString(),n=(this.filtertxtestudiantesifas??"").toString().trim();if(!n)return this.escapeHtml(t);let a=n.split(/\s+/).map(f=>f.trim()).filter(Boolean).sort((f,C)=>C.length-f.length);if(a.length===0)return this.escapeHtml(t);let c=this.escapeHtml(t),m=a.map(f=>this.escapeRegExp(f)).join("|"),v=new RegExp(m,"gi");return c.replace(v,f=>`<mark class="bg-warning text-dark fw-bold px-1 rounded">${f}</mark>`)}sortByestudiantesifas(e,t){t.preventDefault(),this.ordenManualestudiantesifas=!0,this.sortByColumnestudiantesifas===e?this.sortDirestudiantesifas=this.sortDirestudiantesifas==="asc"?"desc":"asc":(this.sortByColumnestudiantesifas=e,this.sortDirestudiantesifas="asc"),this.paginaestudiantesifas=1,this.Cargarestudiantesifas()}isSortedestudiantesifas(e){return this.sortByColumnestudiantesifas===e}getSortDirestudiantesifas(e){return this.sortByColumnestudiantesifas===e?this.sortDirestudiantesifas:null}VisualizarInfoEstudiante(e){this.estudianteSeleccionadoId=e;let t=Array.isArray(this.estudiantesifas)?this.estudiantesifas.find(v=>Number(v?.id)===Number(e)):null,n=(t?.Ap_Paterno??"").toString().trim(),a=(t?.Ap_Materno??"").toString().trim(),c=(t?.Nombre??"").toString().trim(),m=`${n} ${a} ${c}`.replace(/\s+/g," ").trim();this.estudianteSeleccionadoNombre=m||`#${e}`,this.estudianteSeleccionadoFoto=t?.Foto??null,this.estudianteSeleccionadoSexo=t?.Sexo??null}closeMenu(){this._tools.close()}abrirMenuestudiantesifas(e,t){e.preventDefault(),e.stopPropagation(),console.log("aS",t);let n=[{label:"\u270F Editar",action:()=>this.Seleccionarestudiantesifas(t.id)},{label:"\u{1F5D1}\uFE0F Eliminar",action:()=>this.Eliminarestudiantesifas(t.id)}];this._tools.open(e.clientX,e.clientY,n)}};wt.\u0275fac=function(t){return new(t||wt)(A(vt),A(Et),A(ht),A(xt),A(ft),A(Kt),A(Jt),A(te),A(jt))},wt.\u0275cmp=it({type:wt,selectors:[["app-estudiantesifas"]],viewQuery:function(t,n){if(t&1&&(R(yr,7),R(wr,7),R(Ar,7),R(Tr,7),R(Mr,7)),t&2){let a;D(a=L())&&(n.modalOtroComponentecalifhistorias=a.first),D(a=L())&&(n.modalOtroComponenteRegistrarpagos=a.first),D(a=L())&&(n.modalVincularCelular=a.first),D(a=L())&&(n.modalEsperaFotoCelular=a.first),D(a=L())&&(n.modalgestionestudiantesifas=a.first)}},hostBindings:function(t,n){t&1&&h("click",function(){return n.closeMenu()},Rt)},standalone:!1,decls:78,vars:26,consts:[["modalgestionestudiantesifas",""],["modalVincularCelular",""],["modalEsperaFotoCelular",""],["modalOtroComponenteinfoestudiantes",""],["modalOtroComponenteRegistrarpagos",""],["modalOtroComponentecalifhistorias",""],["sinFotoEst",""],["fotoInputEst",""],[1,"container","mt-4"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"lead","text-secondary","subtitulosGlobales"],[1,"button","col-sm-3","d-flex","justify-content-start"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","width","30px","height","30px"],["width","50px","height","50px",3,"options"],[1,"dir-part"],[1,"col-sm-3","ms-auto","d-flex","justify-content-end"],["title","PRESIONAR TECLA ENTER PARA REALIZAR BUSQUEDA",1,"input-group"],[1,"input-group-text"],["width","30px","height","30px",3,"options"],[1,"form-floating"],["type","text","placeholder","Buscar","title","PRESIONAR TECLA ENTER PARA REALIZAR BUSQUEDA",1,"form-control",3,"keyup.enter","ngModelChange","ngModel"],[1,"mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-sm","align-middle"],[1,""],[1,"text-center"],[2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["class","bi",3,"ngClass",4,"ngIf"],[4,"ngIf"],["style","cursor: pointer;",3,"contextmenu",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["previousLabel","Anterior","nextLabel","Siguiente",3,"pageChange","page","collectionSize","pageSize","maxSize","rotate","ellipses","boundaryLinks"],[1,"form-select",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","context-menu",3,"ngStyle",4,"ngIf"],[1,"bi",3,"ngClass"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[2,"cursor","pointer",3,"contextmenu"],[3,"innerHTML"],[1,"text-center","d-flex","justify-content-center","align-items-center",2,"gap","5px"],["title","Visualizar Inscripciones",1,"btn","btn-outline-light","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src",4,"ngIf"],["width","30px","height","35px",3,"options",4,"ngIf"],["title","Ver historial (califhistorias)",1,"btn","btn-outline-light","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["title","Registrar pagos del estudiante","class","btn btn-outline-light btn-sm d-flex justify-content-center align-items-center p-0","style","width: 40px; height: 40px; overflow: hidden;",3,"click","mouseenter","mouseleave",4,"ngIf"],["title","Modificar informaci\xF3n",1,"btn","btn-outline-warning","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["title","Eliminar informaci\xF3n",1,"btn","btn-outline-danger","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src"],["width","30px","height","35px",3,"options"],["title","Registrar pagos del estudiante",1,"btn","btn-outline-light","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],[3,"value"],[1,"modal-header"],[1,"modal-title"],["type","button","title","cerrar",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup"],[1,"mb-3","col-sm-6"],[1,"form-label"],[4,"ngIf","ngIfElse"],[1,"border","rounded","p-3","text-center",3,"dragover","dragleave","drop","click"],[1,"text-muted"],["class","mt-2",4,"ngIf"],["type","file","accept","image/*",1,"d-none",3,"change"],[1,"mt-2","d-flex","justify-content-start"],["type","button",1,"btn","btn-outline-secondary","btn-sm","me-2",3,"click","disabled"],[1,"badge","align-self-center","me-2",3,"ngClass"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],["class","alert alert-info py-2 mt-2 d-flex justify-content-between align-items-center",4,"ngIf"],["class","text-danger small",4,"ngIf"],[1,"form-floating","mb-3","col-sm-3"],["type","text","placeholder","","formControlName","Ap_Paterno",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"invalid-feedback"],["type","text","placeholder","","formControlName","Ap_Materno",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-6"],["type","text","placeholder","","formControlName","Nombre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","CI",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-2"],["formControlName","Expedido",1,"form-control",3,"ngClass"],["disabled","",3,"value"],[3,"value","disabled",4,"ngFor","ngForOf"],["formControlName","Sexo",1,"form-control",3,"ngClass"],["type","date","placeholder","","formControlName","FechaNac",1,"form-control",3,"change","ngClass"],["type","number","placeholder","","formControlName","Edad","readonly","","tabindex","-1",1,"form-control",2,"pointer-events","none","background-color","#e9ecef",3,"ngClass"],["type","text","placeholder","","formControlName","Celular",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-5"],["type","text","placeholder","","formControlName","Direccion",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-4"],["type","text","placeholder","","formControlName","Correo",1,"form-control",3,"ngClass"],[1,"mb-3","col-sm-4"],[1,"d-flex","align-items-end",2,"gap","10px"],[1,"form-floating","flex-grow-1"],["type","text","placeholder","","formControlName","Usuario",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","button","title","Generar Usuario","class","btn mouse-dir secondary d-flex align-items-center justify-content-center p-0","style","width: 58px; height: 58px;",3,"click",4,"ngIf"],["class","invalid-feedback d-block",4,"ngIf"],["placeholder","","formControlName","Contrasenia",1,"form-control",3,"type","ngClass"],["type","button","title","Mostrar/Ocultar Contrasenia","class","btn mouse-dir secondary d-flex align-items-center justify-content-center p-0","style","width: 58px; height: 58px;",3,"click",4,"ngIf"],["formControlName","Estado",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","Nombre_Padre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","OcupacionP",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","NumCelP",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Nombre_Madre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","OcupacionM",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","NumCelM",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","NColegio",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","TipoColegio",1,"form-control",3,"ngClass"],["formControlName","CNivel",1,"form-control",3,"ngClass"],["formControlName","CGrado",1,"form-control",3,"ngClass"],[1,"col-sm-12"],["placeholder","","formControlName","InformacionCompartidaIFAS",1,"quill-container-wrapper",3,"modules","ngClass"],[1,"modal-footer"],["class","button d-flex justify-content-start",4,"ngIf"],[1,"button","me-2"],["title","Cancelar y cerrar","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],[1,"button"],["class","btn mouse-dir success","title","Procesando informaci\xF3n",3,"disabled","click",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;","title","Accionar",3,"disabled","click",4,"ngIf"],["alt","Foto",1,"img-thumbnail",2,"width","140px","height","140px","object-fit","cover",3,"src"],[1,"mt-2"],[1,"progress"],["role","progressbar",1,"progress-bar"],[1,"alert","alert-info","py-2","mt-2","d-flex","justify-content-between","align-items-center"],[1,"fw-semibold"],[1,"small"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"text-danger","small"],[3,"value","disabled"],["type","button","title","Generar Usuario",1,"btn","mouse-dir","secondary","d-flex","align-items-center","justify-content-center","p-0",2,"width","58px","height","58px",3,"click"],["width","70px","height","70px",3,"options"],[1,"invalid-feedback","d-block"],["type","button","title","Mostrar/Ocultar Contrasenia",1,"btn","mouse-dir","secondary","d-flex","align-items-center","justify-content-center","p-0",2,"width","58px","height","58px",3,"click"],[1,"button","d-flex","justify-content-start"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Cancelar y cerrar",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Procesando informaci\xF3n",1,"btn","mouse-dir","success",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["title","Accionar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],[1,"mb-2","text-muted"],["class","d-flex justify-content-center",4,"ngIf"],[1,"mt-3"],[1,"small","text-muted"],["class","mt-3",4,"ngIf"],[1,"d-flex","justify-content-center"],["alt","QR",2,"max-width","260px","width","100%",3,"src"],["target","_blank","rel","noopener",3,"href"],[1,"mt-3","d-flex","justify-content-end"],[1,"context-menu",3,"ngStyle"],["class","context-item",3,"click",4,"ngFor","ngForOf"],[1,"context-item",3,"click"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[3,"modo","estudianteId","nombreEstudiante","fotoEstudiante","sexoEstudiante"],[3,"modo","infoId","estudianteId","nombreEstudiante","fotoEstudiante","sexoEstudiante","gestionPredeterminada"],[3,"modo","ciBusqueda","institucion"]],template:function(t,n){if(t&1){let a=b();o(0,"div",8)(1,"div",9)(2,"div",10)(3,"h1",11),d(4,"Gesti\xF3n de la Informaci\xF3n Personal de los estudiantes"),s(),o(5,"p",12),d(6,"Administra la informaci\xF3n Personal de los estudiantes de manera sencilla y eficiente"),s()()()(),o(7,"div",9)(8,"div",13)(9,"button",14),h("click",function(){return p(a),_(n.abrirModalNuevoEstudiantesifas())}),o(10,"span",15),x(11,"ng-lottie",16),s(),o(12,"span"),d(13,"A\xF1adir estudiantesifas "),s(),x(14,"span",17),s()(),o(15,"div",18)(16,"div",19)(17,"span",20),x(18,"ng-lottie",21),s(),o(19,"div",22)(20,"input",23),h("keyup.enter",function(){return p(a),_(n.onSearchChangeestudiantesifas())}),O("ngModelChange",function(m){return p(a),F(n.filtertxtestudiantesifas,m)||(n.filtertxtestudiantesifas=m),_(m)}),s(),o(21,"label"),d(22,"Buscar"),s()()()()(),o(23,"div",24)(24,"div",25)(25,"table",26)(26,"thead",27)(27,"tr")(28,"th",28),d(29,"#"),s(),o(30,"th",29),h("click",function(m){return p(a),_(n.sortByestudiantesifas("Ap_Paterno",m))}),d(31," Ap_Paterno "),g(32,kr,1,4,"i",30),s(),o(33,"th",29),h("click",function(m){return p(a),_(n.sortByestudiantesifas("Ap_Materno",m))}),d(34," Ap_Materno "),g(35,Nr,1,4,"i",30),s(),o(36,"th",29),h("click",function(m){return p(a),_(n.sortByestudiantesifas("Nombre",m))}),d(37," Nombre "),g(38,Fr,1,4,"i",30),s(),o(39,"th",29),h("click",function(m){return p(a),_(n.sortByestudiantesifas("CI",m))}),d(40," CI "),g(41,Or,1,4,"i",30),s(),o(42,"th",29),h("click",function(m){return p(a),_(n.sortByestudiantesifas("Expedido",m))}),d(43," Exp. "),g(44,Rr,1,4,"i",30),s(),o(45,"th",29),h("click",function(m){return p(a),_(n.sortByestudiantesifas("Sexo",m))}),d(46," Sexo "),g(47,Dr,1,4,"i",30),s(),o(48,"th",29),h("click",function(m){return p(a),_(n.sortByestudiantesifas("Edad",m))}),d(49," Edad "),g(50,Lr,1,4,"i",30),s(),o(51,"th",29),h("click",function(m){return p(a),_(n.sortByestudiantesifas("Estado",m))}),d(52," Estado "),g(53,$r,1,4,"i",30),s(),o(54,"th",28),d(55,"ACCIONES"),s()()(),o(56,"tbody"),g(57,Br,5,1,"tr",31)(58,jr,3,1,"tr",31)(59,Jr,33,18,"tr",32),s()()(),o(60,"div",33)(61,"ngb-pagination",34),O("pageChange",function(m){return p(a),F(n.paginaestudiantesifas,m)||(n.paginaestudiantesifas=m),_(m)}),h("pageChange",function(m){return p(a),_(n.onPageChangeestudiantesifas(m))}),s(),o(62,"select",35),O("ngModelChange",function(m){return p(a),F(n.pageSizeestudiantesifas,m)||(n.pageSizeestudiantesifas=m),_(m)}),h("change",function(){return p(a),_(n.onPageSizeChangeestudiantesifas())}),g(63,tl,2,2,"option",36),s()()(),g(64,Sl,224,62,"ng-template",null,0,M)(66,wl,14,3,"ng-template",null,1,M)(68,Al,15,1,"ng-template",null,2,M)(70,Ml,5,11,"div",37),q(71,"async"),g(72,Vl,6,5,"ng-template",null,3,M)(74,Pl,6,7,"ng-template",null,4,M)(76,kl,6,3,"ng-template",null,5,M)}if(t&2){let a;r(11),l("options",n._tools.optionsAdicionar),r(7),l("options",n._tools.optionslupa),r(2),N("ngModel",n.filtertxtestudiantesifas),r(12),l("ngIf",n.isSortedestudiantesifas("Ap_Paterno")),r(3),l("ngIf",n.isSortedestudiantesifas("Ap_Materno")),r(3),l("ngIf",n.isSortedestudiantesifas("Nombre")),r(3),l("ngIf",n.isSortedestudiantesifas("CI")),r(3),l("ngIf",n.isSortedestudiantesifas("Expedido")),r(3),l("ngIf",n.isSortedestudiantesifas("Sexo")),r(3),l("ngIf",n.isSortedestudiantesifas("Edad")),r(3),l("ngIf",n.isSortedestudiantesifas("Estado")),r(4),l("ngIf",n.isLoadingestudiantesifas),r(),l("ngIf",!n.isLoadingestudiantesifas&&(!n.estudiantesifas||n.estudiantesifas.length===0)),r(),l("ngForOf",n.estudiantesifas),r(2),N("page",n.paginaestudiantesifas),l("collectionSize",n.collectionSizeestudiantesifas)("pageSize",n.pageSizeestudiantesifas)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),r(),N("ngModel",n.pageSizeestudiantesifas),r(),l("ngForOf",n.pageSizeOptionsestudiantesifas),r(7),l("ngIf",(a=H(71,24,n.menuStateestudiantesifas$))==null?null:a.visible)}},dependencies:[st,ot,rt,$t,qt,pt,_t,zt,Ht,mt,dt,Gt,ut,Qt,Wt,Yt,gt,bt,Xt,ee,yt,Bt],encapsulation:2});var ae=wt;var Nl=[{path:"estudiantes",component:ae},{path:"asignarestudiantes",component:St},{path:"estudiantesinscritos",component:yt}],J=class J{};J.\u0275fac=function(t){return new(t||J)},J.\u0275mod=Dt({type:J}),J.\u0275inj=Ft({imports:[_e.forChild(Nl),_e]});var se=J;var tt=class tt{};tt.\u0275fac=function(t){return new(t||tt)},tt.\u0275mod=Dt({type:tt}),tt.\u0275inj=Ft({imports:[ge,be,se,Ve,Ee,we]});var qe=tt;export{qe as TiemposinscripcionesModule};
