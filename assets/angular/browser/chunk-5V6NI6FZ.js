import{a as X,b as qe,c as xt}from"./chunk-UXPBWYK2.js";import{a as Ee}from"./chunk-OGQYWQQ4.js";import{a as gt,b as ft}from"./chunk-CLWIE2HP.js";import{a as _t}from"./chunk-NVHTGLLS.js";import{a as Se}from"./chunk-NIYGNZSD.js";import{b as Q}from"./chunk-JE6LV5ZR.js";import{b as J}from"./chunk-LTFYI7W4.js";import{a as Ct}from"./chunk-S3DBHG6W.js";import{b as Y}from"./chunk-AOSTFOLC.js";import{a as Ue}from"./chunk-KFXCIGMC.js";import{g as ve}from"./chunk-VZTZK4BY.js";import{c as fe,e as N,f as U,g as Ce,h as He,i as A,j as H,k as xe,l as We,m as ut,n as he,o as be,p as W,q,r as K}from"./chunk-F4ZU2PK6.js";import{$a as Ge,Da as l,Ea as o,Fa as n,Ga as C,J as Fe,K as ke,Ka as Ze,La as et,M as Le,Na as h,Nb as B,P as u,Pb as z,Q as _,Qa as g,Qb as $,Rb as ue,Sa as m,Tb as _e,Wa as ne,Xa as oe,Ya as re,Yb as ge,Zb as pt,bb as Be,bc as ze,ca as F,da as me,ea as s,eb as c,fb as x,fc as $e,gb as w,h as ee,hb as tt,ib as mt,k as te,kb as E,la as S,lb as y,mb as M,n as Re,na as G,oa as je,qb as it,rb as v,rc as nt,sa as f,va as k,vb as T,w as ie,wb as V,yb as pe,zb as L}from"./chunk-LW4OU2FI.js";import{a as Ne,b as Pe,g as Xe}from"./chunk-ATDPNAVO.js";var wt=["modalgestioncarreras"],j=(r,i)=>({"bi-caret-up":r,"bi-caret-down":i}),At=(r,i)=>({top:r,left:i});function It(r,i){if(r&1&&C(0,"i",32),r&2){let e=m(2);l("ngClass",v(1,j,e.getSortDircarreras("NombreInstitucion")==="asc",e.getSortDircarreras("NombreInstitucion")==="desc"))}}function Ot(r,i){if(r&1){let e=h();o(0,"th",23),g("click",function(a){u(e);let d=m();return _(d.sortBycarreras("NombreInstitucion",a))}),c(1," Instituci\xF3n "),f(2,It,1,4,"i",24),n()}if(r&2){let e=m();s(2),l("ngIf",e.isSortedcarreras("NombreInstitucion"))}}function Tt(r,i){if(r&1&&C(0,"i",32),r&2){let e=m();l("ngClass",v(1,j,e.getSortDircarreras("NombreCarrera")==="asc",e.getSortDircarreras("NombreCarrera")==="desc"))}}function Vt(r,i){if(r&1&&C(0,"i",32),r&2){let e=m();l("ngClass",v(1,j,e.getSortDircarreras("Area")==="asc",e.getSortDircarreras("Area")==="desc"))}}function Dt(r,i){if(r&1&&C(0,"i",32),r&2){let e=m();l("ngClass",v(1,j,e.getSortDircarreras("Mencion")==="asc",e.getSortDircarreras("Mencion")==="desc"))}}function Nt(r,i){if(r&1&&C(0,"i",32),r&2){let e=m();l("ngClass",v(1,j,e.getSortDircarreras("Resolucion")==="asc",e.getSortDircarreras("Resolucion")==="desc"))}}function Pt(r,i){if(r&1&&C(0,"i",32),r&2){let e=m();l("ngClass",v(1,j,e.getSortDircarreras("Nivel")==="asc",e.getSortDircarreras("Nivel")==="desc"))}}function Rt(r,i){if(r&1&&C(0,"i",32),r&2){let e=m();l("ngClass",v(1,j,e.getSortDircarreras("HorasTotales")==="asc",e.getSortDircarreras("HorasTotales")==="desc"))}}function Ft(r,i){if(r&1&&C(0,"i",32),r&2){let e=m();l("ngClass",v(1,j,e.getSortDircarreras("Visibilidad")==="asc",e.getSortDircarreras("Visibilidad")==="desc"))}}function kt(r,i){if(r&1&&C(0,"i",32),r&2){let e=m();l("ngClass",v(1,j,e.getSortDircarreras("Estado")==="asc",e.getSortDircarreras("Estado")==="desc"))}}function Lt(r,i){if(r&1&&(o(0,"tr")(1,"td",21)(2,"div",33)(3,"span",34),c(4,"Cargando..."),n()()()()),r&2){let e=m();s(),k("colspan",e.esSuperAdmin?11:10)}}function jt(r,i){if(r&1&&(o(0,"tr")(1,"td",21),c(2,"No hay datos disponibles"),n()()),r&2){let e=m();s(),k("colspan",e.esSuperAdmin?11:10)}}function Gt(r,i){if(r&1&&(o(0,"td"),c(1),n()),r&2){let e=m().$implicit;s(),x(e.NombreInstitucion)}}function Bt(r,i){if(r&1&&C(0,"img",41),r&2){let e=m(2);l("src",e._tools.rutabtniconsanimaciones+"pencil.svg",F)}}function zt(r,i){if(r&1&&C(0,"ng-lottie",42),r&2){let e=m(2);l("options",e._tools.optionsEditar)}}function $t(r,i){if(r&1&&C(0,"img",41),r&2){let e=m(2);l("src",e._tools.rutabtniconsanimaciones+"delete.svg",F)}}function Ut(r,i){if(r&1&&C(0,"ng-lottie",42),r&2){let e=m(2);l("options",e._tools.optionsEliminar)}}function Ht(r,i){if(r&1){let e=h();o(0,"tr",35),g("contextmenu",function(a){let d=u(e).$implicit,p=m();return _(p.abrirMenucarreras(a,d))}),o(1,"td",21),c(2),n(),f(3,Gt,2,1,"td",25),o(4,"td"),c(5),n(),o(6,"td"),c(7),n(),o(8,"td"),c(9),n(),o(10,"td"),c(11),n(),o(12,"td"),c(13),n(),o(14,"td"),c(15),n(),o(16,"td"),c(17),n(),o(18,"td"),c(19),n(),o(20,"td",36)(21,"button",37),g("click",function(){let a=u(e).$implicit,d=m();return _(d.Seleccionarcarreras(a.id))})("mouseenter",function(){let a=u(e).$implicit,d=m();return _(d._tools.hoverBotonMap["edicioncarreras-"+a.id]=!0)})("mouseleave",function(){let a=u(e).$implicit,d=m();return _(d._tools.hoverBotonMap["edicioncarreras-"+a.id]=!1)}),f(22,Bt,1,1,"img",38)(23,zt,1,1,"ng-lottie",39),n(),o(24,"button",40),g("click",function(){let a=u(e).$implicit,d=m();return _(d.Eliminarcarreras(a.id))})("mouseenter",function(){let a=u(e).$implicit,d=m();return _(d._tools.hoverBotonMap["eliminacioncarreras-"+a.id]=!0)})("mouseleave",function(){let a=u(e).$implicit,d=m();return _(d._tools.hoverBotonMap["eliminacioncarreras-"+a.id]=!1)}),f(25,$t,1,1,"img",38)(26,Ut,1,1,"ng-lottie",39),n()()()}if(r&2){let e=i.index,t=i.$implicit,a=m();s(2),x((a.paginacarreras-1)*a.pageSizecarreras+(e+1)),s(),l("ngIf",a.esSuperAdmin),s(2),x(t.NombreCarrera),s(2),x(t.Area),s(2),x(t.Mencion),s(2),x(t.Resolucion),s(2),x(t.Nivel),s(2),x(t.HorasTotales),s(2),x(t.Visibilidad),s(2),x(t.Estado),s(3),l("ngIf",!a._tools.hoverBotonMap["edicioncarreras-"+t.id]),s(),l("ngIf",a._tools.hoverBotonMap["edicioncarreras-"+t.id]),s(2),l("ngIf",!a._tools.hoverBotonMap["eliminacioncarreras-"+t.id]),s(),l("ngIf",a._tools.hoverBotonMap["eliminacioncarreras-"+t.id])}}function Wt(r,i){if(r&1&&(o(0,"option",43),c(1),n()),r&2){let e=i.$implicit;l("value",e),s(),w("",e," por p\xE1gina")}}function qt(r,i){if(r&1&&(o(0,"option",43),c(1),n()),r&2){let e=i.$implicit;l("value",e.id),s(),x(e.Nombre)}}function Kt(r,i){if(r&1&&(o(0,"div",84)(1,"select",85),f(2,qt,2,2,"option",30),n(),o(3,"label"),c(4,"Instituci\xF3n"),n(),o(5,"div",52),c(6,"Este campo es obligatorio*"),n()()),r&2){let e=m(2);s(),l("ngClass",e.ValidacioncarrerasxElemento("instituciones_id")),s(),l("ngForOf",e.instituciones)}}function Qt(r,i){if(r&1&&(o(0,"option",86),c(1),n()),r&2){let e=i.$implicit;l("value",e.value)("disabled",e.disabled),s(),x(e.label)}}function Yt(r,i){if(r&1&&(o(0,"option",86),c(1),n()),r&2){let e=i.$implicit;l("value",e.value)("disabled",e.disabled),s(),x(e.label)}}function Jt(r,i){if(r&1&&(o(0,"option",86),c(1),n()),r&2){let e=i.$implicit;l("value",e.value)("disabled",e.disabled),s(),x(e.label)}}function Xt(r,i){if(r&1&&(o(0,"option",86),c(1),n()),r&2){let e=i.$implicit;l("value",e.value)("disabled",e.disabled),s(),x(e.label)}}function Zt(r,i){if(r&1&&(o(0,"option",86),c(1),n()),r&2){let e=i.$implicit;l("value",e.value)("disabled",e.disabled),s(),x(e.label)}}function ei(r,i){if(r&1&&(o(0,"option",86),c(1),n()),r&2){let e=i.$implicit;l("value",e.value)("disabled",e.disabled),s(),x(e.label)}}function ti(r,i){if(r&1){let e=h();o(0,"button",89),g("click",function(){u(e);let a=m(3);return _(a.AutoCompletarLastcarreras())}),o(1,"span",8),C(2,"ng-lottie",9),n(),o(3,"span"),c(4,"AUTO COMPLETAR "),n(),C(5,"span",10),n()}if(r&2){let e=m(3);s(2),l("options",e._tools.optionsautocompletar)}}function ii(r,i){if(r&1&&(o(0,"div",87),f(1,ti,6,1,"button",88),n()),r&2){let e=m(2);s(),l("ngIf",!e.AnimacionCargabtnModalcarreras)}}function ni(r,i){if(r&1){let e=h();o(0,"button",90),g("click",function(){u(e);let a=m().$implicit,d=m();return a.dismiss(),_(d.resetcarreras())}),o(1,"span",8),C(2,"ng-lottie",9),n(),o(3,"span"),c(4,"CANCELAR"),n(),C(5,"span",10),n()}if(r&2){let e=m(2);s(2),l("options",e._tools.optionscancelar)}}function oi(r,i){if(r&1){let e=h();o(0,"button",91),g("click",function(){u(e);let a=m(2);return _(a.AgregarModificarcarreras())}),C(1,"span",92),n()}r&2&&l("disabled",!0)}function ri(r,i){if(r&1){let e=h();o(0,"button",93),g("click",function(){u(e);let a=m(2);return _(a.AgregarModificarcarreras())}),o(1,"span",8),C(2,"ng-lottie",9),n(),o(3,"span"),c(4),n(),C(5,"span",10),n()}if(r&2){let e,t,a=m(2);s(2),l("options",(e=a.newcarreras.get("id"))!=null&&e.value?a._tools.optionsEditar:a._tools.optionsAdicionar),s(2),x((t=a.newcarreras.get("id"))!=null&&t.value?"MODIFICAR":"REGISTRAR")}}function ai(r,i){if(r&1){let e=h();o(0,"div",44)(1,"h4",45),c(2),n(),o(3,"button",46),g("click",function(){let a=u(e).$implicit,d=m();return a.dismiss(),_(d.resetcarreras())}),n()(),o(4,"div",47)(5,"form",48),f(6,Kt,7,2,"div",49),o(7,"div",2)(8,"div",50)(9,"input",51),g("change",function(a){u(e);let d=m();return _(d._tools.EscribirEnMayuscula(a,d.newcarreras,"Area"))}),n(),o(10,"label"),c(11,"Area"),n(),o(12,"div",52),c(13,"Este campo es obligatorio*"),n()(),o(14,"div",50)(15,"input",53),g("change",function(a){u(e);let d=m();return _(d._tools.EscribirEnMayuscula(a,d.newcarreras,"Mencion"))}),n(),o(16,"label"),c(17,"Mencion"),n(),o(18,"div",52),c(19,"Este campo es obligatorio*"),n()(),o(20,"div",50)(21,"input",54),g("change",function(a){u(e);let d=m();return _(d._tools.EscribirEnMayuscula(a,d.newcarreras,"Resolucion"))}),n(),o(22,"label"),c(23,"Resolucion"),n(),o(24,"div",52),c(25,"Este campo es obligatorio*"),n()(),o(26,"div",50)(27,"input",55),g("change",function(a){u(e);let d=m();return _(d._tools.EscribirEnMayuscula(a,d.newcarreras,"NombreCarrera"))}),n(),o(28,"label"),c(29,"Nombre de Carrera"),n(),o(30,"div",52),c(31,"Este campo es obligatorio*"),n()()(),o(32,"div",2)(33,"div",56)(34,"input",57),g("change",function(a){u(e);let d=m();return _(d._tools.EscribirEnMayuscula(a,d.newcarreras,"HorasTotales"))}),n(),o(35,"label"),c(36,"Horas Totales"),n(),o(37,"div",52),c(38,"Este campo es obligatorio*"),n()(),o(39,"div",56)(40,"select",58)(41,"option",59),c(42,"Seleccione una opci\xF3n"),n(),f(43,Qt,2,3,"option",60),n(),o(44,"label"),c(45,"Nivel"),n(),o(46,"div",52),c(47,"Este campo es obligatorio*"),n()(),o(48,"div",56)(49,"select",61)(50,"option",59),c(51,"Seleccione una opci\xF3n"),n(),f(52,Yt,2,3,"option",60),n(),o(53,"label"),c(54,"Cantidad Evaluaciones"),n(),o(55,"div",52),c(56,"Este campo es obligatorio*"),n()()(),o(57,"div",2)(58,"div",50),C(59,"input",62),o(60,"label"),c(61,"Limite M\xE1ximo Te\xF3rico"),n(),o(62,"div",52),c(63,"Este campo es obligatorio*"),n()(),o(64,"div",50),C(65,"input",63),o(66,"label"),c(67,"Limite M\xE1ximo Pr\xE1ctico"),n(),o(68,"div",52),c(69,"Este campo es obligatorio*"),n()(),o(70,"div",50),C(71,"input",64),o(72,"label"),c(73,"Nota M\xEDnima Aprobaci\xF3n"),n(),o(74,"div",52),c(75,"Este campo es obligatorio*"),n()(),o(76,"div",50),C(77,"input",65),o(78,"label"),c(79,"Nota M\xEDnima 2da Instancia"),n(),o(80,"div",52),c(81,"Este campo es obligatorio*"),n()()(),o(82,"div",2)(83,"div",56)(84,"input",66),g("change",function(a){u(e);let d=m();return _(d._tools.EscribirEnMayuscula(a,d.newcarreras,"TituloOficial"))}),n(),o(85,"label"),c(86,"Titulo Oficial"),n(),o(87,"div",52),c(88,"Este campo es obligatorio*"),n()(),o(89,"div",56)(90,"select",67)(91,"option",59),c(92,"Seleccione una opci\xF3n"),n(),f(93,Jt,2,3,"option",60),n(),o(94,"label"),c(95,"Programa"),n(),o(96,"div",52),c(97,"Este campo es obligatorio*"),n()(),o(98,"div",56)(99,"input",68),g("change",function(a){u(e);let d=m();return _(d._tools.EscribirEnMayuscula(a,d.newcarreras,"Duracion"))}),n(),o(100,"label"),c(101,"Duracion"),n(),o(102,"div",52),c(103,"Este campo es obligatorio*"),n()()(),o(104,"div",2)(105,"div",69)(106,"input",70),g("change",function(a){u(e);let d=m();return _(d._tools.EscribirEnMayuscula(a,d.newcarreras,"Capacitacion"))}),n(),o(107,"label"),c(108,"Capacitaci\xF3n"),n(),o(109,"div",52),c(110,"Este campo es obligatorio*"),n()(),o(111,"div",69)(112,"input",71),g("change",function(a){u(e);let d=m();return _(d._tools.EscribirEnMayuscula(a,d.newcarreras,"CarreraProfesional"))}),n(),o(113,"label"),c(114,"Carrera Profesional"),n(),o(115,"div",52),c(116,"Este campo es obligatorio*"),n()()(),o(117,"div",2)(118,"div",56)(119,"select",72)(120,"option",59),c(121,"Seleccione una opci\xF3n"),n(),f(122,Xt,2,3,"option",60),n(),o(123,"label"),c(124,"Modalidad"),n(),o(125,"div",52),c(126,"Este campo es obligatorio*"),n()(),o(127,"div",56)(128,"select",73)(129,"option",59),c(130,"Seleccione una opci\xF3n"),n(),f(131,Zt,2,3,"option",60),n(),o(132,"label"),c(133,"Visibilidad"),n(),o(134,"div",52),c(135,"Este campo es obligatorio*"),n()(),o(136,"div",56)(137,"select",74)(138,"option",59),c(139,"Seleccione una opci\xF3n"),n(),f(140,ei,2,3,"option",60),n(),o(141,"label"),c(142,"Estado"),n(),o(143,"div",52),c(144,"Este campo es obligatorio*"),n()(),o(145,"div",75)(146,"label"),c(147,"Descripci\xF3n"),n(),C(148,"quill-editor",76),o(149,"div",52),c(150,"Este campo es obligatorio*"),n()()()()(),o(151,"div",77),f(152,ii,2,1,"div",78),o(153,"div",79),f(154,ni,6,1,"button",80),n(),o(155,"div",81),f(156,oi,2,1,"button",82)(157,ri,6,2,"button",83),n()()}if(r&2){let e,t=m();s(2),w("",(e=t.newcarreras.get("id"))!=null&&e.value?"Modificar":"Registrar"," carreras"),s(3),l("formGroup",t.newcarreras),s(),l("ngIf",t.esSuperAdmin),s(3),l("ngClass",t.ValidacioncarrerasxElemento("Area")),s(6),l("ngClass",t.ValidacioncarrerasxElemento("Mencion")),s(6),l("ngClass",t.ValidacioncarrerasxElemento("Resolucion")),s(6),l("ngClass",t.ValidacioncarrerasxElemento("NombreCarrera")),s(7),l("ngClass",t.ValidacioncarrerasxElemento("HorasTotales")),s(6),l("ngClass",t.ValidacioncarrerasxElemento("Nivel")),s(3),l("ngForOf",t.nivelcarreraOptions),s(6),l("ngClass",t.ValidacioncarrerasxElemento("CantidadEvaluaciones")),s(3),l("ngForOf",t.cantidadevaluacionesOptions),s(7),l("ngClass",t.ValidacioncarrerasxElemento("LimiteMaxTeorico")),s(6),l("ngClass",t.ValidacioncarrerasxElemento("LimiteMaxPractico")),s(6),l("ngClass",t.ValidacioncarrerasxElemento("NotaAprobacion")),s(6),l("ngClass",t.ValidacioncarrerasxElemento("NotaMinRevalida")),s(7),l("ngClass",t.ValidacioncarrerasxElemento("TituloOficial")),s(6),l("ngClass",t.ValidacioncarrerasxElemento("Programa")),s(3),l("ngForOf",t.programaOptions),s(6),l("ngClass",t.ValidacioncarrerasxElemento("Duracion")),s(7),l("ngClass",t.ValidacioncarrerasxElemento("Capacitacion")),s(6),l("ngClass",t.ValidacioncarrerasxElemento("CarreraProfesional")),s(7),l("ngClass",t.ValidacioncarrerasxElemento("Modalidad")),s(3),l("ngForOf",t.modalidadOptions),s(6),l("ngClass",t.ValidacioncarrerasxElemento("Visibilidad")),s(3),l("ngForOf",t.visibilidadOptions),s(6),l("ngClass",t.ValidacioncarrerasxElemento("Estado")),s(3),l("ngForOf",t.estadoOptions),s(8),l("modules",t.modulesQuillEdicion)("ngClass",t.ValidacioncarrerasxElemento("Descripcion")),s(4),l("ngIf",!t.newcarreras.get("id").value),s(2),l("ngIf",!t.AnimacionCargabtnModalcarreras),s(2),l("ngIf",t.AnimacionCargabtnModalcarreras),s(),l("ngIf",!t.AnimacionCargabtnModalcarreras)}}function si(r,i){if(r&1){let e=h();o(0,"button",96),g("click",function(){let a=u(e).$implicit;return _(a.action())}),c(1),n()}if(r&2){let e=i.$implicit;s(),w(" ",e.label," ")}}function li(r,i){if(r&1&&(o(0,"div",94),T(1,"async"),T(2,"async"),f(3,si,2,1,"button",95),T(4,"async"),n()),r&2){let e,t,a=m();l("ngStyle",v(8,At,((e=V(1,2,a.menuStatecarreras$))==null?null:e.y)+"px",((e=V(2,4,a.menuStatecarreras$))==null?null:e.x)+"px")),s(3),l("ngForOf",(t=V(4,6,a.menuStatecarreras$))==null?null:t.items)}}var ye=class ye{constructor(i,e,t,a,d){this._carr=i;this._tools=e;this._inst=t;this._controles=a;this._auth=d;this.modulesQuillEdicion={toolbar:[["bold","italic","underline","strike"],[{align:[]}],[{size:["small",!1,"large"]}],[{color:[]},{background:[]}],[{font:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","video"],["clean"]]};this.modulesQuillShow={toolbar:!1};this.esSuperAdmin=!1;this.estadoOptions=[];this.visibilidadOptions=[];this.programaOptions=[];this.modalidadOptions=[];this.nivelcarreraOptions=[];this.cantidadevaluacionesOptions=[];this.carreras=[];this.paginacarreras=1;this.isLoadingcarreras=!0;this.AnimacionCargabtnModalcarreras=!1;this.filtertxtcarreras="";this.collectionSizecarreras=0;this.pageSizecarreras=10;this.pageSizeOptionscarreras=[5,10,20,50];this.sortColumnscarreras=[];this.menuStatecarreras$=this._tools.state$;this.instituciones=[];this.newcarreras=this._carr.createFormGroupcarreras(),this.newcarrerasAnteriorAccion=this._carr.createFormGroupcarreras()}ngOnInit(){this.Cargarcarreras(),this.cargarInstituciones(),this.cargarOptionsDesdeControles(),this._auth.revisarSiEsSuperAdmin().subscribe(i=>this.esSuperAdmin=i)}cargarOptionsDesdeControles(){let i=["ESTADO","VISIBILIDAD","PROGRAMA","MODALIDAD","NIVEL DE CARRERA","CANTIDAD DE EVALUACIONES"];this._controles.ObtenerOptionsSelectPorCategorias(i).subscribe({next:e=>{this.estadoOptions=e?.ESTADO||[],this.visibilidadOptions=e?.VISIBILIDAD||[],this.programaOptions=e?.PROGRAMA||[],this.modalidadOptions=e?.MODALIDAD||[],this.nivelcarreraOptions=e?.["NIVEL DE CARRERA"]||[],this.cantidadevaluacionesOptions=e?.["CANTIDAD DE EVALUACIONES"]||[]},error:()=>{this.estadoOptions=[],this.visibilidadOptions=[],this.programaOptions=[],this.modalidadOptions=[],this.nivelcarreraOptions=[],this.cantidadevaluacionesOptions=[]}})}abrirModalNuevoCarreras(){this.modalGestioncarrerasRef=this._tools.openModal(this.modalgestioncarreras,"xl")}Cargarcarreras(){this.isLoadingcarreras=!0,this._carr.Obtenercarreras().subscribe({next:i=>{console.log(i),this.carreras=i.data||[],this.collectionSizecarreras=this.carreras.length,this.isLoadingcarreras=!1},error:i=>{console.error("Error al cargar carreras",i),this.isLoadingcarreras=!1}})}AgregarModificarcarreras(){if(this.newcarreras.invalid){this.ValidacionTodoElementocarreras(),this._tools.MostrarMensajeFrmIncompleto(),this.AnimacionCargabtnModalcarreras=!1;return}else{this.AnimarCargaTablacarreras(),this.AnimacionCargabtnModalcarreras=!0,this._tools.MostrarMensajeLoading(),this.newcarrerasAnteriorAccion.setValue(this.newcarreras.value);let i=this.newcarreras.controls.id.value;console.log("INFO A PROCESAR",this.newcarreras.value),i?this._carr.Modificarcarreras(this.newcarreras.value,this.newcarreras.value.id).subscribe(e=>{console.log("SE MODIFICO CORRECTAMENTE carreras",e.data),this.Cargarcarreras(),this.resetcarreras(),this.AnimacionCargabtnModalcarreras=!1,this._tools.MostrarMensajeSuccess()},e=>{console.log("ERROR AL MODIFICAR carreras",e),this.AnimacionCargabtnModalcarreras=!1,this._tools.MostrarMensajeError()}):this._carr.Agregarcarreras(this.newcarreras.value).subscribe(e=>{console.log("SE A\xD1ADIO CORRECTAMENTE carreras",e.data),this.Cargarcarreras(),this.resetcarreras(),this.AnimacionCargabtnModalcarreras=!1,this._tools.MostrarMensajeSuccess()},e=>{console.log("ERROR AL A\xD1ADIR carreras",e),this.AnimacionCargabtnModalcarreras=!1,this._tools.MostrarMensajeError()})}}Seleccionarcarreras(i){if(this._tools.MostrarMensajeLoading(),i){if(!this.carreras.find(t=>t.id===i))return;this._carr.Seleccionarcarreras(i).subscribe(t=>{Object.keys(this.newcarreras.controls).forEach(a=>{this.newcarreras.controls[a].setValue(t.data[a])}),console.log("SELECCION DE carreras EXITOSA",this.newcarreras.value),this.newcarrerasAnteriorAccion.setValue(this.newcarreras.value),this.modalGestioncarrerasRef=this._tools.openModal(this.modalgestioncarreras,"xl"),this._tools.MostrarMensajeSuccess()},t=>{console.log("ERROR AL SELECCIONAR carreras",t),this._tools.MostrarMensajeError()})}}Eliminarcarreras(i){this._tools.mostrarMensajeConfirm("\xBFSEGURO QUE DESEA ELIMINAR?","SE ELIMINARA EL DATO Y NO SE PODR\xC1 RECUPERAR EL DATO","warning","SI, ESTOY SEGURO","NO").then(e=>{e&&(this._tools.MostrarMensajeLoading(),this._carr.Eliminarcarreras(i).subscribe(t=>{console.log(t.data),this.Cargarcarreras(),this._tools.MostrarMensajeSuccess()},t=>{console.log("ERROR AL ELIMINAR carreras",t),this._tools.MostrarMensajeError()}))})}resetcarreras(){this.newcarreras=this._carr.createFormGroupcarreras(),this._tools.closeModal(this.modalGestioncarrerasRef)}AutoCompletarLastcarreras(){this.newcarreras.setValue(this.newcarrerasAnteriorAccion.value),this.newcarreras.patchValue({id:0}),console.log("listo",this.newcarreras.value)}AnimarCargaTablacarreras(){this.carreras=[],this.isLoadingcarreras=!0}ValidacioncarrerasxElemento(i){return this._tools.obtenerValidationClass(this.newcarreras,i)}ValidacionTodoElementocarreras(){Object.values(this.newcarreras.controls).forEach(i=>{i.markAsTouched(),i.markAsDirty()})}onPageSizeChangecarreras(){this.paginacarreras=1}sortBycarreras(i,e){this.sortColumnscarreras=this._tools.handleSort(i,e,this.sortColumnscarreras),this.carreras=this._tools.applyMultiSort(this.carreras,this.sortColumnscarreras)}isSortedcarreras(i){return this._tools.isSorted(this.sortColumnscarreras,i)}getSortDircarreras(i){return this._tools.getSortDirection(this.sortColumnscarreras,i)}closeMenu(){this._tools.close()}abrirMenucarreras(i,e){i.preventDefault(),i.stopPropagation(),console.log("aS",e);let t=[{label:"\u270F Editar",action:()=>this.Seleccionarcarreras(e.id)},{label:"\u{1F5D1}\uFE0F Eliminar",action:()=>this.Eliminarcarreras(e.id)}];this._tools.open(i.clientX,i.clientY,t)}cargarInstituciones(){this._inst.Obtenerinstituciones().subscribe({next:i=>{console.log(i),this.instituciones=i.data||[]},error:i=>{console.error("Error al cargar instituciones",i)}})}};ye.\u0275fac=function(e){return new(e||ye)(S(X),S(J),S(_t),S(Se),S(Q))},ye.\u0275cmp=G({type:ye,selectors:[["app-carreras"]],viewQuery:function(e,t){if(e&1&&ne(wt,7),e&2){let a;oe(a=re())&&(t.modalgestioncarreras=a.first)}},hostBindings:function(e,t){e&1&&g("click",function(){return t.closeMenu()},me)},standalone:!1,decls:70,vars:31,consts:[["modalgestioncarreras",""],[1,"container","mt-4"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"lead","text-secondary","subtitulosGlobales"],[1,"button","col-sm-3","d-flex","justify-content-start"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","width","30px","height","30px"],["width","50px","height","50px",3,"options"],[1,"dir-part"],[1,"col-sm-3","ms-auto","d-flex","justify-content-end"],[1,"input-group"],[1,"input-group-text"],["width","30px","height","30px",3,"options"],[1,"form-floating"],["type","text","placeholder","Buscar","title","Filtrar/Buscar",1,"form-control",3,"input","ngModelChange","ngModel"],[1,"mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-sm","align-middle"],[1,""],[1,"text-center"],["style","user-select: none; -webkit-user-select: none; -moz-user-select: none;",3,"click",4,"ngIf"],[2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["class","bi",3,"ngClass",4,"ngIf"],[4,"ngIf"],["style","cursor: pointer;",3,"contextmenu",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["previousLabel","Anterior","nextLabel","Siguiente",3,"pageChange","page","collectionSize","pageSize","maxSize","rotate","ellipses","boundaryLinks"],[1,"form-select",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","context-menu",3,"ngStyle",4,"ngIf"],[1,"bi",3,"ngClass"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[2,"cursor","pointer",3,"contextmenu"],[1,"text-center","d-flex","justify-content-center","align-items-center",2,"gap","5px"],["title","Modificar informaci\xF3n",1,"btn","btn-outline-warning","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src",4,"ngIf"],["width","30px","height","35px",3,"options",4,"ngIf"],["title","Eliminar informaci\xF3n",1,"btn","btn-outline-danger","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src"],["width","30px","height","35px",3,"options"],[3,"value"],[1,"modal-header"],[1,"modal-title"],["type","button","title","cerrar",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup"],["class","form-floating mb-3 col-sm-12",4,"ngIf"],[1,"form-floating","mb-3","col-sm-3"],["type","text","placeholder","","formControlName","Area",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"invalid-feedback"],["type","text","placeholder","","formControlName","Mencion",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Resolucion",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","NombreCarrera",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-4"],["type","text","placeholder","","formControlName","HorasTotales",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","Nivel",1,"form-control",3,"ngClass"],["disabled","",3,"value"],[3,"value","disabled",4,"ngFor","ngForOf"],["formControlName","CantidadEvaluaciones",1,"form-control",3,"ngClass"],["type","number","placeholder","","formControlName","LimiteMaxTeorico",1,"form-control",3,"ngClass"],["type","number","placeholder","","formControlName","LimiteMaxPractico",1,"form-control",3,"ngClass"],["type","number","placeholder","","formControlName","NotaAprobacion",1,"form-control",3,"ngClass"],["type","number","placeholder","","formControlName","NotaMinRevalida",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","TituloOficial",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","Programa",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","Duracion",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-6"],["type","text","placeholder","","formControlName","Capacitacion",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","CarreraProfesional",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","Modalidad",1,"form-control",3,"ngClass"],["formControlName","Visibilidad",1,"form-control",3,"ngClass"],["formControlName","Estado",1,"form-control",3,"ngClass"],[1,"mb-3","col-sm-12"],["placeholder","","formControlName","Descripcion",1,"quill-container-wrapper",2,"text-transform","uppercase",3,"modules","ngClass"],[1,"modal-footer"],["class","button d-flex justify-content-start",4,"ngIf"],[1,"button","me-2"],["title","Cancelar y cerrar","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],[1,"button"],["class","btn mouse-dir success","title","Procesando informaci\xF3n",3,"disabled","click",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;","title","Accionar",3,"click",4,"ngIf"],[1,"form-floating","mb-3","col-sm-12"],["formControlName","instituciones_id",1,"form-control",3,"ngClass"],[3,"value","disabled"],[1,"button","d-flex","justify-content-start"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Cancelar y cerrar",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Procesando informaci\xF3n",1,"btn","mouse-dir","success",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["title","Accionar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[1,"context-menu",3,"ngStyle"],["class","context-item",3,"click",4,"ngFor","ngForOf"],[1,"context-item",3,"click"]],template:function(e,t){if(e&1){let a=h();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),c(4,"Gesti\xF3n de carreras"),n(),o(5,"p",5),c(6,"Administra la informaci\xF3n de los carreras de manera sencilla y eficiente"),n()()()(),o(7,"div",2)(8,"div",6)(9,"button",7),g("click",function(){return u(a),_(t.abrirModalNuevoCarreras())}),o(10,"span",8),C(11,"ng-lottie",9),n(),o(12,"span"),c(13,"A\xF1adir carreras "),n(),C(14,"span",10),n()(),o(15,"div",11)(16,"div",12)(17,"span",13),C(18,"ng-lottie",14),n(),o(19,"div",15)(20,"input",16),g("input",function(){return u(a),_(t.paginacarreras=1)}),M("ngModelChange",function(p){return u(a),y(t.filtertxtcarreras,p)||(t.filtertxtcarreras=p),_(p)}),n(),o(21,"label"),c(22,"Buscar"),n()()()()(),o(23,"div",17)(24,"div",18)(25,"table",19)(26,"thead",20)(27,"tr")(28,"th",21),c(29,"#"),n(),f(30,Ot,3,1,"th",22),o(31,"th",23),g("click",function(p){return u(a),_(t.sortBycarreras("NombreCarrera",p))}),c(32," NombreCarrera "),f(33,Tt,1,4,"i",24),n(),o(34,"th",23),g("click",function(p){return u(a),_(t.sortBycarreras("Area",p))}),c(35," Area "),f(36,Vt,1,4,"i",24),n(),o(37,"th",23),g("click",function(p){return u(a),_(t.sortBycarreras("Mencion",p))}),c(38," Mencion "),f(39,Dt,1,4,"i",24),n(),o(40,"th",23),g("click",function(p){return u(a),_(t.sortBycarreras("Resolucion",p))}),c(41," Resolucion "),f(42,Nt,1,4,"i",24),n(),o(43,"th",23),g("click",function(p){return u(a),_(t.sortBycarreras("Nivel",p))}),c(44," Nivel "),f(45,Pt,1,4,"i",24),n(),o(46,"th",23),g("click",function(p){return u(a),_(t.sortBycarreras("HorasTotales",p))}),c(47," HorasTotales "),f(48,Rt,1,4,"i",24),n(),o(49,"th",23),g("click",function(p){return u(a),_(t.sortBycarreras("Visibilidad",p))}),c(50," Visibilidad "),f(51,Ft,1,4,"i",24),n(),o(52,"th",23),g("click",function(p){return u(a),_(t.sortBycarreras("Estado",p))}),c(53," Estado "),f(54,kt,1,4,"i",24),n(),o(55,"th",21),c(56,"ACCIONES"),n()()(),o(57,"tbody"),f(58,Lt,5,1,"tr",25)(59,jt,3,1,"tr",25)(60,Ht,27,14,"tr",26),T(61,"slice"),n()()(),o(62,"div",27)(63,"ngb-pagination",28),M("pageChange",function(p){return u(a),y(t.paginacarreras,p)||(t.paginacarreras=p),_(p)}),n(),o(64,"select",29),M("ngModelChange",function(p){return u(a),y(t.pageSizecarreras,p)||(t.pageSizecarreras=p),_(p)}),g("change",function(){return u(a),_(t.onPageSizeChangecarreras())}),f(65,Wt,2,2,"option",30),n()()(),f(66,ai,158,34,"ng-template",null,0,L)(68,li,5,11,"div",31),T(69,"async")}if(e&2){let a;s(11),l("options",t._tools.optionsAdicionar),s(7),l("options",t._tools.optionslupa),s(2),E("ngModel",t.filtertxtcarreras),s(10),l("ngIf",t.esSuperAdmin),s(3),l("ngIf",t.isSortedcarreras("NombreCarrera")),s(3),l("ngIf",t.isSortedcarreras("Area")),s(3),l("ngIf",t.isSortedcarreras("Mencion")),s(3),l("ngIf",t.isSortedcarreras("Resolucion")),s(3),l("ngIf",t.isSortedcarreras("Nivel")),s(3),l("ngIf",t.isSortedcarreras("HorasTotales")),s(3),l("ngIf",t.isSortedcarreras("Visibilidad")),s(3),l("ngIf",t.isSortedcarreras("Estado")),s(4),l("ngIf",t.isLoadingcarreras),s(),l("ngIf",!t.isLoadingcarreras&&(!t.carreras||t.carreras.length===0)),s(),l("ngForOf",pe(61,25,t.carreras,(t.paginacarreras-1)*t.pageSizecarreras,t.paginacarreras*t.pageSizecarreras)),s(3),E("page",t.paginacarreras),l("collectionSize",t.collectionSizecarreras)("pageSize",t.pageSizecarreras)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),s(),E("ngModel",t.pageSizecarreras),s(),l("ngForOf",t.pageSizeOptionscarreras),s(3),l("ngIf",(a=V(69,29,t.menuStatecarreras$))==null?null:a.visible)}},dependencies:[B,z,$,ue,xe,q,K,fe,We,W,U,Ce,H,he,be,ve,Y,gt,_e,ge],encapsulation:2});var Me=ye;var se=class se{constructor(i){this.http=i;this.ruta=Ue.ruta}Obtenerplandeestudios(i){let e=new ze,t=i||{};return t?.anio_id&&(e=e.set("anio_id",String(t.anio_id))),t?.resolucion&&(e=e.set("resolucion",String(t.resolucion))),t?.instituciones_id&&(e=e.set("instituciones_id",String(t.instituciones_id))),this.http.get(this.ruta+"api/plandeestudios/",{params:e})}Agregarplandeestudios(i){return this.http.post(this.ruta+"api/plandeestudios/",i)}Modificarplandeestudios(i,e){return this.http.put(this.ruta+"api/plandeestudios/"+e,i)}Seleccionarplandeestudios(i){return this.http.get(this.ruta+"api/plandeestudios/"+i)}Eliminarplandeestudios(i){return this.http.delete(this.ruta+"api/plandeestudios/"+i)}createFormGroupplandeestudios(){return new He({id:new A(0),carreras_id:new A("",[N.required]),Rango:new A("",[N.required]),RangoLvlCurso:new A("",[N.required]),LvlCurso:new A("",[N.required]),Horas:new A("",[N.required]),anio_id:new A("",[N.required]),ModoMateria:new A("1 DOCENTE x MATERIA",[N.required]),NombreMateria:new A("",[N.required]),SiglaMateria:new A("",[N.required]),Prerrequisitos:new A(""),SiglasPrerrequisitos:new A(""),TipoMateria:new A("TE\xD3RICO",[N.required]),RelacionDocenteCursoAEstudiante:new A("NINGUNA",[N.required])})}};se.\u0275fac=function(e){return new(e||se)(Le($e))},se.\u0275prov=Fe({token:se,factory:se.\u0275fac,providedIn:"root"});var we=se;var pi=["modalAccionesMaterias"],ui=["modalgestionmaterias"],De=(r,i)=>({"bi-caret-up":r,"bi-caret-down":i}),_i=(r,i)=>({top:r,left:i});function gi(r,i){if(r&1&&(o(0,"option",15),c(1),n()),r&2){let e=i.$implicit;l("ngValue",e.id),s(),x(e.Anio)}}function fi(r,i){if(r&1&&(o(0,"option",15),c(1),n()),r&2){let e=i.$implicit;l("ngValue",e.key),s(),x(e.label)}}function Ci(r,i){if(r&1&&C(0,"i",39),r&2){let e=m();l("ngClass",v(1,De,e.getSortDirmaterias("LvlCurso")==="asc",e.getSortDirmaterias("LvlCurso")==="desc"))}}function xi(r,i){if(r&1&&C(0,"i",39),r&2){let e=m();l("ngClass",v(1,De,e.getSortDirmaterias("Paralelo")==="asc",e.getSortDirmaterias("Paralelo")==="desc"))}}function hi(r,i){if(r&1&&C(0,"i",39),r&2){let e=m();l("ngClass",v(1,De,e.getSortDirmaterias("NombreMateria")==="asc",e.getSortDirmaterias("NombreMateria")==="desc"))}}function bi(r,i){if(r&1&&C(0,"i",39),r&2){let e=m();l("ngClass",v(1,De,e.getSortDirmaterias("EstadoHabilitacion")==="asc",e.getSortDirmaterias("EstadoHabilitacion")==="desc"))}}function vi(r,i){if(r&1&&C(0,"i",39),r&2){let e=m();l("ngClass",v(1,De,e.getSortDirmaterias("EstadoEnvio")==="asc",e.getSortDirmaterias("EstadoEnvio")==="desc"))}}function Si(r,i){r&1&&(o(0,"tr")(1,"td",29)(2,"div",40)(3,"span",41),c(4,"Cargando..."),n()()()()),r&2&&(s(),k("colspan",7))}function Ei(r,i){r&1&&(o(0,"tr")(1,"td",29),c(2,"No hay datos disponibles"),n()()),r&2&&(s(),k("colspan",7))}function yi(r,i){if(r&1&&C(0,"img",48),r&2){let e=m(2);l("src",e._tools.rutabtniconsanimaciones+"pencil.svg",F)}}function Mi(r,i){if(r&1&&C(0,"ng-lottie",49),r&2){let e=m(2);l("options",e._tools.optionsEditar)}}function wi(r,i){if(r&1&&C(0,"img",48),r&2){let e=m(2);l("src",e._tools.rutabtniconsanimaciones+"delete.svg",F)}}function Ai(r,i){if(r&1&&C(0,"ng-lottie",49),r&2){let e=m(2);l("options",e._tools.optionsEliminar)}}function Ii(r,i){if(r&1){let e=h();o(0,"tr",42),g("contextmenu",function(a){let d=u(e).$implicit,p=m();return _(p.abrirMenumaterias(a,d))}),o(1,"td",29),c(2),n(),o(3,"td"),c(4),n(),o(5,"td"),c(6),n(),o(7,"td"),c(8),n(),o(9,"td"),c(10),n(),o(11,"td"),c(12),n(),o(13,"td",43)(14,"button",44),g("click",function(){let a=u(e).$implicit,d=m();return _(d.Seleccionarmaterias(a.id))})("mouseenter",function(){let a=u(e).$implicit,d=m();return _(d._tools.hoverBotonMap["edicionmaterias-"+a.id]=!0)})("mouseleave",function(){let a=u(e).$implicit,d=m();return _(d._tools.hoverBotonMap["edicionmaterias-"+a.id]=!1)}),f(15,yi,1,1,"img",45)(16,Mi,1,1,"ng-lottie",46),n(),o(17,"button",47),g("click",function(){let a=u(e).$implicit,d=m();return _(d.Eliminarmaterias(a.id))})("mouseenter",function(){let a=u(e).$implicit,d=m();return _(d._tools.hoverBotonMap["eliminacionmaterias-"+a.id]=!0)})("mouseleave",function(){let a=u(e).$implicit,d=m();return _(d._tools.hoverBotonMap["eliminacionmaterias-"+a.id]=!1)}),f(18,wi,1,1,"img",45)(19,Ai,1,1,"ng-lottie",46),n()()()}if(r&2){let e=i.index,t=i.$implicit,a=m();s(2),x((a.paginamaterias-1)*a.pageSizematerias+(e+1)),s(2),x(t.LvlCurso),s(2),x(t.Paralelo),s(2),x(t.NombreMateria),s(2),x(t.EstadoHabilitacion),s(2),x(t.EstadoEnvio),s(3),l("ngIf",!a._tools.hoverBotonMap["edicionmaterias-"+t.id]),s(),l("ngIf",a._tools.hoverBotonMap["edicionmaterias-"+t.id]),s(2),l("ngIf",!a._tools.hoverBotonMap["eliminacionmaterias-"+t.id]),s(),l("ngIf",a._tools.hoverBotonMap["eliminacionmaterias-"+t.id])}}function Oi(r,i){if(r&1&&(o(0,"option",50),c(1),n()),r&2){let e=i.$implicit;l("value",e),s(),w("",e," por p\xE1gina")}}function Ti(r,i){if(r&1){let e=h();o(0,"div",76),g("click",function(){let a=u(e).$implicit,d=m(3);return _(d.seleccionarPlan(a))}),o(1,"div",77)(2,"h6",78),c(3),n(),o(4,"small"),c(5),n()(),o(6,"p",78),c(7),n()()}if(r&2){let e=i.$implicit;s(3),mt(" ",e.RangoLvlCurso," | ",e.NombreMateria," (",e.SiglaMateria,") "),s(2),x(e.Anio),s(2),w(" Resoluci\xF3n: ",e.Resolucion," ")}}function Vi(r,i){if(r&1&&(o(0,"div",74),f(1,Ti,8,5,"div",75),n()),r&2){let e=m(2);s(),l("ngForOf",e.planesFiltrados)}}function Di(r,i){r&1&&(o(0,"div",79),c(1," Este campo es obligatorio* "),n())}function Ni(r,i){if(r&1&&(o(0,"option",80),c(1),n()),r&2){let e=i.$implicit;l("value",e.value)("disabled",e.disabled),s(),x(e.label)}}function Pi(r,i){if(r&1&&(o(0,"option",80),c(1),n()),r&2){let e=i.$implicit;l("value",e.value)("disabled",e.disabled),s(),x(e.label)}}function Ri(r,i){if(r&1){let e=h();o(0,"button",83),g("click",function(){u(e);let a=m(3);return _(a.AutoCompletarLastmaterias())}),o(1,"span",9),C(2,"ng-lottie",10),n(),o(3,"span"),c(4,"AUTO COMPLETAR "),n(),C(5,"span",11),n()}if(r&2){let e=m(3);s(2),l("options",e._tools.optionsautocompletar)}}function Fi(r,i){if(r&1&&(o(0,"div",81),f(1,Ri,6,1,"button",82),n()),r&2){let e=m(2);s(),l("ngIf",!e.AnimacionCargabtnModalmaterias)}}function ki(r,i){if(r&1){let e=h();o(0,"button",84),g("click",function(){u(e);let a=m().$implicit,d=m();return a.dismiss(),_(d.resetmaterias())}),o(1,"span",9),C(2,"ng-lottie",10),n(),o(3,"span"),c(4,"CANCELAR"),n(),C(5,"span",11),n()}if(r&2){let e=m(2);s(2),l("options",e._tools.optionscancelar)}}function Li(r,i){if(r&1){let e=h();o(0,"button",85),g("click",function(){u(e);let a=m(2);return _(a.AgregarModificarmaterias())}),C(1,"span",86),n()}r&2&&l("disabled",!0)}function ji(r,i){if(r&1){let e=h();o(0,"button",87),g("click",function(){u(e);let a=m(2);return _(a.AgregarModificarmaterias())}),o(1,"span",9),C(2,"ng-lottie",10),n(),o(3,"span"),c(4),n(),C(5,"span",11),n()}if(r&2){let e,t,a=m(2);s(2),l("options",(e=a.newmaterias.get("id"))!=null&&e.value?a._tools.optionsEditar:a._tools.optionsAdicionar),s(2),x((t=a.newmaterias.get("id"))!=null&&t.value?"MODIFICAR":"REGISTRAR")}}function Gi(r,i){if(r&1){let e=h();o(0,"div",51)(1,"h4",52),c(2),n(),o(3,"button",53),g("click",function(){let a=u(e).$implicit,d=m();return a.dismiss(),_(d.resetmaterias())}),n()(),o(4,"div",54)(5,"form",55)(6,"div",56)(7,"input",57),g("focus",function(){u(e);let a=m();return _(a.mostrarLista=!0)}),n(),f(8,Vi,2,1,"div",58)(9,Di,2,0,"div",59),n(),o(10,"div",60)(11,"input",61),g("change",function(a){u(e);let d=m();return _(d._tools.EscribirEnMayuscula(a,d.newmaterias,"Paralelo"))}),n(),o(12,"label"),c(13,"Paralelo"),n(),o(14,"div",62),c(15,"Este campo es obligatorio*"),n()(),o(16,"div",60)(17,"select",63)(18,"option",64),c(19,"Seleccione una opci\xF3n"),n(),f(20,Ni,2,3,"option",65),n(),o(21,"label"),c(22,"EstadoHabilitacion"),n(),o(23,"div",62),c(24,"Este campo es obligatorio*"),n()(),o(25,"div",60)(26,"select",66)(27,"option",64),c(28,"Seleccione una opci\xF3n"),n(),f(29,Pi,2,3,"option",65),n(),o(30,"label"),c(31,"EstadoEnvio"),n(),o(32,"div",62),c(33,"Este campo es obligatorio*"),n()()()(),o(34,"div",67),f(35,Fi,2,1,"div",68),o(36,"div",69),f(37,ki,6,1,"button",70),n(),o(38,"div",71),f(39,Li,2,1,"button",72)(40,ji,6,2,"button",73),n()()}if(r&2){let e,t,a=m();s(2),w("",(e=a.newmaterias.get("id"))!=null&&e.value?"Modificar":"Registrar"," materias"),s(3),l("formGroup",a.newmaterias),s(2),l("formControl",a.planInput),s(),l("ngIf",a.mostrarLista&&a.planInput.value),s(),l("ngIf",(t=a.newmaterias.get("plandeestudios_id"))==null?null:t.invalid),s(2),l("ngClass",a.ValidacionmateriasxElemento("Paralelo")),s(6),l("ngClass",a.ValidacionmateriasxElemento("EstadoHabilitacion")),s(3),l("ngForOf",a.estadoHabilitacionOptions),s(6),l("ngClass",a.ValidacionmateriasxElemento("EstadoEnvio")),s(3),l("ngForOf",a.estadoEnvioOptions),s(6),l("ngIf",!a.newmaterias.get("id").value),s(2),l("ngIf",!a.AnimacionCargabtnModalmaterias),s(2),l("ngIf",a.AnimacionCargabtnModalmaterias),s(),l("ngIf",!a.AnimacionCargabtnModalmaterias)}}function Bi(r,i){if(r&1){let e=h();o(0,"button",90),g("click",function(){let a=u(e).$implicit;return _(a.action())}),c(1),n()}if(r&2){let e=i.$implicit;s(),w(" ",e.label," ")}}function zi(r,i){if(r&1&&(o(0,"div",88),T(1,"async"),T(2,"async"),f(3,Bi,2,1,"button",89),T(4,"async"),n()),r&2){let e,t,a=m();l("ngStyle",v(8,_i,((e=V(1,2,a.menuStatematerias$))==null?null:e.y)+"px",((e=V(2,4,a.menuStatematerias$))==null?null:e.x)+"px")),s(3),l("ngForOf",(t=V(4,6,a.menuStatematerias$))==null?null:t.items)}}function $i(r,i){if(r&1&&(o(0,"option",15),c(1),n()),r&2){let e=i.$implicit;l("ngValue",e),s(),x(e)}}function Ui(r,i){if(r&1&&(o(0,"option",15),c(1),n()),r&2){let e=i.$implicit;l("ngValue",e),s(),x(e)}}function Hi(r,i){if(r&1){let e=h();o(0,"div",93)(1,"div",23)(2,"select",100),M("ngModelChange",function(a){u(e);let d=m(2);return y(d.paraleloActualGrupal,a)||(d.paraleloActualGrupal=a),_(a)}),o(3,"option",15),c(4,"Seleccione una opci\xF3n"),n(),f(5,Ui,2,2,"option",16),n(),o(6,"label"),c(7,"Paralelo actual"),n()()()}if(r&2){let e=m(2);s(2),E("ngModel",e.paraleloActualGrupal),s(),l("ngValue",""),s(2),l("ngForOf",e.paralelosGrupalOptions)}}function Wi(r,i){if(r&1){let e=h();o(0,"div",93)(1,"div",23)(2,"input",101),M("ngModelChange",function(a){u(e);let d=m(2);return y(d.paraleloNuevoGrupal,a)||(d.paraleloNuevoGrupal=a),_(a)}),n(),o(3,"label"),c(4,"Nuevo paralelo"),n()(),o(5,"div",102),c(6,"Se valida que no exista en el mismo A\xF1o + Resoluci\xF3n."),n()()}if(r&2){let e=m(2);s(2),E("ngModel",e.paraleloNuevoGrupal)}}function qi(r,i){r&1&&(o(0,"button",103),C(1,"span",86),n()),r&2&&l("disabled",!0)}function Ki(r,i){if(r&1){let e=h();o(0,"button",104),g("click",function(){u(e);let a=m(2);return _(a.ejecutarAccionGrupal())}),o(1,"span",9),C(2,"ng-lottie",10),n(),o(3,"span"),c(4,"EJECUTAR"),n(),C(5,"span",11),n()}if(r&2){let e=m(2);s(2),l("options",e._tools.optionstrengranaje)}}function Qi(r,i){if(r&1){let e=h();o(0,"div",51)(1,"h5",52),c(2,"Acciones grupales de materias"),n(),o(3,"button",91),g("click",function(){let a=u(e).$implicit;return _(a.dismiss())}),n()(),o(4,"div",54)(5,"div",92),c(6,"Se aplicar\xE1 sobre el filtro actual (A\xF1o + Resoluci\xF3n)."),n(),o(7,"div",3)(8,"div",93)(9,"div",23)(10,"select",94),M("ngModelChange",function(a){u(e);let d=m();return y(d.accionGrupal,a)||(d.accionGrupal=a),_(a)}),o(11,"option",15),c(12,"A\xF1adir todas las materias del curso"),n(),o(13,"option",15),c(14,"Modificar paralelo del curso"),n(),o(15,"option",15),c(16,"Eliminar materias del curso (por paralelo)"),n()(),o(17,"label"),c(18,"Acci\xF3n"),n()()(),o(19,"div",93)(20,"div",23)(21,"select",95),M("ngModelChange",function(a){u(e);let d=m();return y(d.cursoGrupal,a)||(d.cursoGrupal=a),_(a)}),g("ngModelChange",function(){u(e);let a=m();return _(a.onCursoGrupalChange())}),o(22,"option",15),c(23,"Seleccione una opci\xF3n"),n(),f(24,$i,2,2,"option",16),n(),o(25,"label"),c(26,"Curso (LvlCurso)"),n()()(),f(27,Hi,8,3,"div",96)(28,Wi,7,1,"div",96),n()(),o(29,"div",67)(30,"div",69)(31,"button",97),g("click",function(){let a=u(e).$implicit;return _(a.dismiss())}),o(32,"span",9),C(33,"ng-lottie",10),n(),o(34,"span"),c(35,"CANCELAR"),n(),C(36,"span",11),n()(),o(37,"div",71),f(38,qi,2,1,"button",98)(39,Ki,6,1,"button",99),n()()}if(r&2){let e=m();s(10),E("ngModel",e.accionGrupal),s(),l("ngValue","agregar"),s(2),l("ngValue","modificar"),s(2),l("ngValue","eliminar"),s(6),E("ngModel",e.cursoGrupal),s(),l("ngValue",""),s(2),l("ngForOf",e.cursosGrupalOptions),s(3),l("ngIf",e.accionGrupal!=="agregar"),s(),l("ngIf",e.accionGrupal!=="eliminar"),s(3),l("disabled",e.isProcesandoAccionGrupal),s(2),l("options",e._tools.optionscancelar),s(5),l("ngIf",e.isProcesandoAccionGrupal),s(),l("ngIf",!e.isProcesandoAccionGrupal)}}var Ae=class Ae{constructor(i,e,t,a,d,p,b){this._mat=i;this._tools=e;this._planest=t;this._controles=a;this._carr=d;this._anios=p;this._auth=b;this.esSuperAdmin=!1;this.estadoHabilitacionOptions=[];this.estadoEnvioOptions=[];this.accionGrupal="agregar";this.cursoGrupal="";this.paraleloActualGrupal="";this.paraleloNuevoGrupal="";this.cursosGrupalOptions=[];this.paralelosGrupalOptions=[];this.planesFiltroActual=[];this.isProcesandoAccionGrupal=!1;this.materias=[];this.paginamaterias=1;this.isLoadingmaterias=!1;this.AnimacionCargabtnModalmaterias=!1;this.filtertxtmaterias="";this.filtroAnioId=null;this.filtroResolucionKey="";this.filtroResolucion=null;this.filtroInstitucionId=null;this.resolucionOptions=[];this.collectionSizematerias=0;this.pageSizematerias=10;this.pageSizeOptionsmaterias=[5,10,20,50];this.sortColumnsmaterias=[];this.menuStatematerias$=this._tools.state$;this.carreras=[];this.anios=[];this.plandeestudios=[];this.planInput=new A("");this.planesFiltrados=[];this.mostrarLista=!1;this.newmaterias=this._mat.createFormGroupmaterias(),this.newmateriasAnteriorAccion=this._mat.createFormGroupmaterias()}ngOnInit(){this.cargarCarreras(),this.cargarAnios(),this.cargarplandeestudios(),this.cargarOptionsDesdeControles(),this._auth.revisarSiEsSuperAdmin().subscribe(i=>{this.esSuperAdmin=i,this.rebuildResolucionOptions(),this.onFiltroChange()}),this.planesFiltrados=[],this.planInput.valueChanges.subscribe(i=>{let e=i?.toLowerCase()||"";if(!e){this.planesFiltrados=[];return}this.planesFiltrados=this.plandeestudios.filter(t=>`${t.RangoLvlCurso} ${t.NombreMateria} ${t.SiglaMateria} ${t.Anio} ${t.Resolucion}`.toLowerCase().includes(e))})}cargarOptionsDesdeControles(){let i=["ESTADO DE HABILITACI\xD3N","ESTADO DE ENVIO"];this._controles.ObtenerOptionsSelectPorCategorias(i).subscribe({next:e=>{this.estadoHabilitacionOptions=e?.["ESTADO DE HABILITACI\xD3N"]||[],this.estadoEnvioOptions=e?.["ESTADO DE ENVIO"]||[]},error:()=>{this.estadoHabilitacionOptions=[],this.estadoEnvioOptions=[]}})}abrirModalNuevoMaterias(){this.modalGestionmateriasRef=this._tools.openModal(this.modalgestionmaterias,"xl")}abrirModalAccionesMaterias(){let i=this.getFiltroParams();if(!i){this._tools.MostrarMensaje("warning","Seleccione A\xF1o y Resoluci\xF3n para continuar");return}this.isProcesandoAccionGrupal=!0,this._tools.MostrarMensajeLoading(),Re({materias:this._mat.Obtenermaterias(i).pipe(te(e=>e?.data||[]),ie(e=>(console.error("Error cargando materias (modal grupal)",e),ee([])))),planes:this._planest.Obtenerplandeestudios(i).pipe(te(e=>e?.data||[]),ie(e=>(console.error("Error cargando planes (modal grupal)",e),ee([]))))}).subscribe({next:({materias:e,planes:t})=>{this.materias=e||[],this.collectionSizematerias=this.materias.length,this.planesFiltroActual=t||[];let a=new Set;for(let d of this.planesFiltroActual){let p=(d?.LvlCurso??"").toString().trim();p&&a.add(p)}this.cursosGrupalOptions=Array.from(a.values()).sort((d,p)=>d.localeCompare(p)),this.accionGrupal="agregar",this.cursoGrupal="",this.paraleloActualGrupal="",this.paraleloNuevoGrupal="",this.paralelosGrupalOptions=[],this.modalAccionesMateriasRef=this._tools.openModal(this.modalAccionesMaterias,"xl")},error:e=>{console.error(e),this._tools.MostrarMensajeError()},complete:()=>{this.isProcesandoAccionGrupal=!1}})}onCursoGrupalChange(){let i=this.upper(this.cursoGrupal),e=new Set;for(let t of this.materias||[]){let a=this.upper(t?.LvlCurso),d=this.upper(t?.Paralelo);i&&a===i&&d&&e.add(d)}this.paralelosGrupalOptions=Array.from(e.values()).sort((t,a)=>t.localeCompare(a)),this.paraleloActualGrupal=""}ejecutarAccionGrupal(){let i=this.getFiltroParams();if(!i){this._tools.MostrarMensaje("warning","Seleccione A\xF1o y Resoluci\xF3n para continuar");return}let e=this.upper(this.cursoGrupal),t=this.upper(this.paraleloNuevoGrupal),a=this.upper(this.paraleloActualGrupal);if(!e){this._tools.MostrarMensaje("warning","Seleccione un curso (LvlCurso)");return}if(this.accionGrupal!=="eliminar"&&!t){this._tools.MostrarMensaje("warning","Ingrese el nuevo paralelo");return}if(this.accionGrupal!=="agregar"&&!a){this._tools.MostrarMensaje("warning","Seleccione el paralelo actual");return}this.isProcesandoAccionGrupal=!0,this._tools.MostrarMensajeLoading(),this._mat.Obtenermaterias(i).pipe(te(d=>d?.data||[]),ie(d=>(console.error("Error refrescando materias (acci\xF3n grupal)",d),ee([])))).subscribe({next:d=>{let p=(D,I,P=[])=>{let Ve=new Set(P.map(Z=>Number(Z)));return(d||[]).some(Z=>{let Mt=Number(Z?.id);return Ve.has(Mt)?!1:this.upper(Z?.LvlCurso)===I&&this.upper(Z?.Paralelo)===D})},b=D=>(d||[]).filter(I=>this.upper(I?.LvlCurso)===e&&this.upper(I?.Paralelo)===D);if(this.accionGrupal==="agregar"){if(p(t,e)){this.isProcesandoAccionGrupal=!1,this._tools.MostrarMensaje("warning","Ese paralelo ya existe para el mismo A\xF1o y Resoluci\xF3n");return}this._mat.AgregarMateriasGrupal({anio_id:i.anio_id,resolucion:i.resolucion,instituciones_id:i.instituciones_id,lvlcurso:e,paralelo_nuevo:t}).subscribe({next:()=>{this._tools.MostrarMensajeSuccess(),this.Cargarmaterias(),this._tools.closeModal(this.modalAccionesMateriasRef)},error:D=>{console.error("Error en alta grupal de materias (bulk)",D);let I=D?.error?.message;I?this._tools.MostrarMensaje("warning",I):this._tools.MostrarMensajeError(),this.isProcesandoAccionGrupal=!1},complete:()=>{this.isProcesandoAccionGrupal=!1}});return}let O=b(a);if(!O.length){this.isProcesandoAccionGrupal=!1,this._tools.MostrarMensaje("warning","No hay materias para ese curso y paralelo");return}if(this.accionGrupal==="modificar"){let D=O.map(I=>Number(I?.id)).filter(I=>Number.isFinite(I));if(p(t,e,D)){this.isProcesandoAccionGrupal=!1,this._tools.MostrarMensaje("warning","Ese paralelo ya existe para el mismo A\xF1o y Resoluci\xF3n");return}this._mat.ActualizarParaleloGrupal({anio_id:i.anio_id,resolucion:i.resolucion,instituciones_id:i.instituciones_id,lvlcurso:e,paralelo_actual:a,paralelo_nuevo:t}).subscribe({next:()=>{this._tools.MostrarMensajeSuccess(),this.Cargarmaterias(),this._tools.closeModal(this.modalAccionesMateriasRef)},error:I=>{console.error("Error en modificaci\xF3n grupal de paralelo (bulk)",I);let P=I?.error?.message;P?this._tools.MostrarMensaje("warning",P):this._tools.MostrarMensajeError(),this.isProcesandoAccionGrupal=!1},complete:()=>{this.isProcesandoAccionGrupal=!1}});return}this._tools.mostrarMensajeConfirm("\xBFSEGURO QUE DESEA ELIMINAR?","Se eliminar\xE1n todas las materias del curso/paralelo seleccionado","warning","SI, ESTOY SEGURO","NO").then(D=>{if(!D){this.isProcesandoAccionGrupal=!1;return}this._mat.EliminarMateriasGrupal({anio_id:i.anio_id,resolucion:i.resolucion,instituciones_id:i.instituciones_id,lvlcurso:e,paralelo_actual:a}).subscribe({next:()=>{this._tools.MostrarMensajeSuccess(),this.Cargarmaterias(),this._tools.closeModal(this.modalAccionesMateriasRef)},error:I=>{console.error("Error en eliminaci\xF3n grupal de materias (bulk)",I);let P=I?.error?.message;P?this._tools.MostrarMensaje("warning",P):this._tools.MostrarMensajeError(),this.isProcesandoAccionGrupal=!1},complete:()=>{this.isProcesandoAccionGrupal=!1}})})},error:()=>{this.isProcesandoAccionGrupal=!1,this._tools.MostrarMensajeError()}})}upper(i){return(i??"").toString().trim().toUpperCase()}getFiltroParams(){let i=this.filtroAnioId,e=!!(this.filtroResolucionKey&&this.filtroResolucionKey.toString().trim());return!i||!e||(this.parseResolucionKey(),!this.filtroResolucion)?null:{anio_id:i,resolucion:this.filtroResolucion,instituciones_id:this.esSuperAdmin?this.filtroInstitucionId??void 0:void 0}}rebuildResolucionOptions(){let i=new Map;for(let e of this.carreras){let t=(e?.Resolucion??"").toString().trim();if(!t)continue;let a=e?.instituciones_id,d=a!=null&&a!==""?Number(a):null,p=(e?.NombreInstitucion??"").toString().trim(),b=this.esSuperAdmin&&d?`${d}|${t}`:t,O=this.esSuperAdmin&&d?`${t}${p?" ("+p+")":""}`:t;i.has(b)||i.set(b,{key:b,label:O,resolucion:t,instituciones_id:d})}this.resolucionOptions=Array.from(i.values()).sort((e,t)=>e.label.localeCompare(t.label))}onFiltroChange(){this.paginamaterias=1;let i=!!this.filtroAnioId,e=!!(this.filtroResolucionKey&&this.filtroResolucionKey.toString().trim());if(!i||!e){this.materias=[],this.collectionSizematerias=0;return}this.parseResolucionKey(),this.Cargarmaterias()}parseResolucionKey(){let i=(this.filtroResolucionKey??"").toString();if(!i){this.filtroResolucion=null,this.filtroInstitucionId=null;return}let e=i.split("|");if(e.length>=2){let t=Number(e[0]),a=e.slice(1).join("|");this.filtroInstitucionId=Number.isFinite(t)?t:null,this.filtroResolucion=a||null}else this.filtroInstitucionId=null,this.filtroResolucion=i}Cargarmaterias(){let i=this.filtroAnioId,e=this.filtroResolucion;if(!i||!e){this.materias=[],this.collectionSizematerias=0;return}this.isLoadingmaterias=!0,this._mat.Obtenermaterias({anio_id:i,resolucion:e,instituciones_id:this.esSuperAdmin?this.filtroInstitucionId??void 0:void 0}).subscribe({next:t=>{console.log(t),this.materias=t.data||[],this.collectionSizematerias=this.materias.length,this.isLoadingmaterias=!1},error:t=>{console.error("Error al cargar materias",t),this.isLoadingmaterias=!1}})}AgregarModificarmaterias(){if(this.newmaterias.invalid){this.ValidacionTodoElementomaterias(),this._tools.MostrarMensajeFrmIncompleto(),this.AnimacionCargabtnModalmaterias=!1;return}else{this.AnimarCargaTablamaterias(),this.AnimacionCargabtnModalmaterias=!0,this._tools.MostrarMensajeLoading(),this.newmateriasAnteriorAccion.setValue(this.newmaterias.value);let i=this.newmaterias.controls.id.value;console.log("INFO A PROCESAR",this.newmaterias.value),i?this._mat.Modificarmaterias(this.newmaterias.value,this.newmaterias.value.id).subscribe(e=>{console.log("SE MODIFICO CORRECTAMENTE materias",e.data),this.Cargarmaterias(),this.resetmaterias(),this.AnimacionCargabtnModalmaterias=!1,this._tools.MostrarMensajeSuccess()},e=>{console.log("ERROR AL MODIFICAR materias",e),this.AnimacionCargabtnModalmaterias=!1,this._tools.MostrarMensajeError()}):this._mat.Agregarmaterias(this.newmaterias.value).subscribe(e=>{console.log("SE A\xD1ADIO CORRECTAMENTE materias",e.data),this.Cargarmaterias(),this.resetmaterias(),this.AnimacionCargabtnModalmaterias=!1,this._tools.MostrarMensajeSuccess()},e=>{console.log("ERROR AL A\xD1ADIR materias",e),this.AnimacionCargabtnModalmaterias=!1,this._tools.MostrarMensajeError()})}}Seleccionarmaterias(i){if(this._tools.MostrarMensajeLoading(),i){if(!this.materias.find(t=>t.id===i))return;this._mat.Seleccionarmaterias(i).subscribe(t=>{Object.keys(this.newmaterias.controls).forEach(a=>{this.newmaterias.controls[a].setValue(t.data[a])}),console.log("SELECCION DE materias EXITOSA",this.newmaterias.value),this.newmateriasAnteriorAccion.setValue(this.newmaterias.value),this.modalGestionmateriasRef=this._tools.openModal(this.modalgestionmaterias,"xl"),this._tools.MostrarMensajeSuccess()},t=>{console.log("ERROR AL SELECCIONAR materias",t),this._tools.MostrarMensajeError()})}}Eliminarmaterias(i){this._tools.mostrarMensajeConfirm("\xBFSEGURO QUE DESEA ELIMINAR?","SE ELIMINARA EL DATO Y NO SE PODR\xC1 RECUPERAR EL DATO","warning","SI, ESTOY SEGURO","NO").then(e=>{e&&(this._tools.MostrarMensajeLoading(),this._mat.Eliminarmaterias(i).subscribe(t=>{console.log(t.data),this.Cargarmaterias(),this._tools.MostrarMensajeSuccess()},t=>{console.log("ERROR AL ELIMINAR materias",t),this._tools.MostrarMensajeError()}))})}resetmaterias(){this.newmaterias=this._mat.createFormGroupmaterias(),this._tools.closeModal(this.modalGestionmateriasRef)}AutoCompletarLastmaterias(){this.newmaterias.setValue(this.newmateriasAnteriorAccion.value),this.newmaterias.patchValue({id:0}),console.log("listo",this.newmaterias.value)}AnimarCargaTablamaterias(){this.materias=[],this.isLoadingmaterias=!0}ValidacionmateriasxElemento(i){return this._tools.obtenerValidationClass(this.newmaterias,i)}ValidacionTodoElementomaterias(){Object.values(this.newmaterias.controls).forEach(i=>{i.markAsTouched(),i.markAsDirty()})}onPageSizeChangematerias(){this.paginamaterias=1}sortBymaterias(i,e){this.sortColumnsmaterias=this._tools.handleSort(i,e,this.sortColumnsmaterias),this.materias=this._tools.applyMultiSort(this.materias,this.sortColumnsmaterias)}isSortedmaterias(i){return this._tools.isSorted(this.sortColumnsmaterias,i)}getSortDirmaterias(i){return this._tools.getSortDirection(this.sortColumnsmaterias,i)}closeMenu(){this._tools.close()}abrirMenumaterias(i,e){i.preventDefault(),i.stopPropagation(),console.log("aS",e);let t=[{label:"\u270F Editar",action:()=>this.Seleccionarmaterias(e.id)},{label:"\u{1F5D1}\uFE0F Eliminar",action:()=>this.Eliminarmaterias(e.id)}];this._tools.open(i.clientX,i.clientY,t)}cargarCarreras(){this._carr.Obtenercarreras().subscribe({next:i=>{this.carreras=i.data||[],this.rebuildResolucionOptions()},error:i=>{console.error("Error al cargar carreras",i)}})}cargarAnios(){this._anios.Obteneranios().subscribe({next:i=>{this.anios=i.data||[]},error:i=>{console.error("Error al cargar anios",i)}})}cargarplandeestudios(){this._planest.Obtenerplandeestudios().subscribe({next:i=>{console.log(i.data),this.plandeestudios=i.data||[]},error:i=>{console.error("Error al cargar plandeestudios",i)}})}seleccionarPlan(i){this.planInput.setValue(`${i.NombreMateria} (${i.SiglaMateria})`,{emitEvent:!1}),this.newmaterias.get("plandeestudios_id")?.setValue(i.id),this.mostrarLista=!1}};Ae.\u0275fac=function(e){return new(e||Ae)(S(qe),S(J),S(we),S(Se),S(X),S(Ee),S(Q))},Ae.\u0275cmp=G({type:Ae,selectors:[["app-materias"]],viewQuery:function(e,t){if(e&1&&(ne(pi,7),ne(ui,7)),e&2){let a;oe(a=re())&&(t.modalAccionesMaterias=a.first),oe(a=re())&&(t.modalgestionmaterias=a.first)}},hostBindings:function(e,t){e&1&&g("click",function(){return t.closeMenu()},me)},standalone:!1,decls:83,vars:34,consts:[["modalgestionmaterias",""],["modalAccionesMaterias",""],[1,"container","mt-4"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"lead","text-secondary","subtitulosGlobales"],[1,"col-sm-6","d-flex","justify-content-start","button",2,"gap","10px"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","width","30px","height","30px"],["width","50px","height","50px",3,"options"],[1,"dir-part"],[1,"col-sm-3","d-flex","justify-content-end",2,"gap","10px"],[1,"form-floating",2,"min-width","140px"],["title","Filtrar por A\xF1o",1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-floating",2,"min-width","180px"],["title","Filtrar por Resoluci\xF3n",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-sm-3","ms-auto","d-flex","justify-content-end"],[1,"input-group"],[1,"input-group-text"],["width","30px","height","30px",3,"options"],[1,"form-floating"],["type","text","placeholder","Buscar","title","Filtrar/Buscar",1,"form-control",3,"input","ngModelChange","ngModel"],[1,"mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-sm","align-middle"],[1,""],[1,"text-center"],[2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["class","bi",3,"ngClass",4,"ngIf"],[4,"ngIf"],["style","cursor: pointer;",3,"contextmenu",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["previousLabel","Anterior","nextLabel","Siguiente",3,"pageChange","page","collectionSize","pageSize","maxSize","rotate","ellipses","boundaryLinks"],[1,"form-select",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","context-menu",3,"ngStyle",4,"ngIf"],[1,"bi",3,"ngClass"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[2,"cursor","pointer",3,"contextmenu"],[1,"text-center","d-flex","justify-content-center","align-items-center",2,"gap","5px"],["title","Modificar informaci\xF3n",1,"btn","btn-outline-warning","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src",4,"ngIf"],["width","30px","height","35px",3,"options",4,"ngIf"],["title","Eliminar informaci\xF3n",1,"btn","btn-outline-danger","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src"],["width","30px","height","35px",3,"options"],[3,"value"],[1,"modal-header"],[1,"modal-title"],["type","button","title","cerrar",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup"],[1,"col-sm-12","mb-3","position-relative"],["type","text","placeholder","Buscar plan de estudios","autocomplete","off",1,"form-control",3,"focus","formControl"],["class","list-group position-absolute w-100","style","z-index: 1000;",4,"ngIf"],["class","invalid-feedback d-block",4,"ngIf"],[1,"form-floating","mb-3","col-sm-12"],["type","text","placeholder","","formControlName","Paralelo",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"invalid-feedback"],["formControlName","EstadoHabilitacion",1,"form-control",3,"ngClass"],["disabled","",3,"value"],[3,"value","disabled",4,"ngFor","ngForOf"],["formControlName","EstadoEnvio",1,"form-control",3,"ngClass"],[1,"modal-footer"],["class","button d-flex justify-content-start",4,"ngIf"],[1,"button","me-2"],["title","Cancelar y cerrar","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],[1,"button"],["class","btn mouse-dir success","title","Procesando informaci\xF3n",3,"disabled","click",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;","title","Accionar",3,"click",4,"ngIf"],[1,"list-group","position-absolute","w-100",2,"z-index","1000"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"d-flex","w-100","justify-content-between"],[1,"mb-1"],[1,"invalid-feedback","d-block"],[3,"value","disabled"],[1,"button","d-flex","justify-content-start"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Cancelar y cerrar",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Procesando informaci\xF3n",1,"btn","mouse-dir","success",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["title","Accionar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[1,"context-menu",3,"ngStyle"],["class","context-item",3,"click",4,"ngFor","ngForOf"],[1,"context-item",3,"click"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[1,"text-muted","mb-3"],[1,"col-sm-6","mb-3"],["title","Acci\xF3n",1,"form-control",3,"ngModelChange","ngModel"],["title","Curso",1,"form-control",3,"ngModelChange","ngModel"],["class","col-sm-6 mb-3",4,"ngIf"],["title","Cancelar",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],["class","btn mouse-dir success","title","Procesando",3,"disabled",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style","gap: 8px;","title","Ejecutar",3,"click",4,"ngIf"],["title","Paralelo actual",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","",1,"form-control",2,"text-transform","uppercase",3,"ngModelChange","ngModel"],[1,"form-text"],["title","Procesando",1,"btn","mouse-dir","success",3,"disabled"],["title","Ejecutar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"]],template:function(e,t){if(e&1){let a=h();o(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1",5),c(4,"Gesti\xF3n de materias"),n(),o(5,"p",6),c(6,"Administra la informaci\xF3n de los materias de manera sencilla y eficiente"),n()()()(),o(7,"div",3)(8,"div",7)(9,"button",8),g("click",function(){return u(a),_(t.abrirModalNuevoMaterias())}),o(10,"span",9),C(11,"ng-lottie",10),n(),o(12,"span"),c(13,"A\xF1adir materias "),n(),C(14,"span",11),n(),o(15,"button",8),g("click",function(){return u(a),_(t.abrirModalAccionesMaterias())}),o(16,"span",9),C(17,"ng-lottie",10),n(),o(18,"span"),c(19,"Mostrar Acciones"),n(),C(20,"span",11),n()(),o(21,"div",12)(22,"div",13)(23,"select",14),M("ngModelChange",function(p){return u(a),y(t.filtroAnioId,p)||(t.filtroAnioId=p),_(p)}),g("ngModelChange",function(){return u(a),t.paginamaterias=1,_(t.onFiltroChange())}),o(24,"option",15),c(25,"Seleccione una opci\xF3n"),n(),f(26,gi,2,2,"option",16),n(),o(27,"label"),c(28,"A\xF1o"),n()(),o(29,"div",17)(30,"select",18),M("ngModelChange",function(p){return u(a),y(t.filtroResolucionKey,p)||(t.filtroResolucionKey=p),_(p)}),g("ngModelChange",function(){return u(a),t.paginamaterias=1,_(t.onFiltroChange())}),o(31,"option",15),c(32,"Seleccione una opci\xF3n"),n(),f(33,fi,2,2,"option",16),n(),o(34,"label"),c(35,"Resoluci\xF3n"),n()()(),o(36,"div",19)(37,"div",20)(38,"span",21),C(39,"ng-lottie",22),n(),o(40,"div",23)(41,"input",24),g("input",function(){return u(a),_(t.paginamaterias=1)}),M("ngModelChange",function(p){return u(a),y(t.filtertxtmaterias,p)||(t.filtertxtmaterias=p),_(p)}),n(),o(42,"label"),c(43,"Buscar"),n()()()()(),o(44,"div",25)(45,"div",26)(46,"table",27)(47,"thead",28)(48,"tr")(49,"th",29),c(50,"#"),n(),o(51,"th",30),g("click",function(p){return u(a),_(t.sortBymaterias("LvlCurso",p))}),c(52," LvlCurso "),f(53,Ci,1,4,"i",31),n(),o(54,"th",30),g("click",function(p){return u(a),_(t.sortBymaterias("Paralelo",p))}),c(55," Paralelo "),f(56,xi,1,4,"i",31),n(),o(57,"th",30),g("click",function(p){return u(a),_(t.sortBymaterias("NombreMateria",p))}),c(58," NombreMateria "),f(59,hi,1,4,"i",31),n(),o(60,"th",30),g("click",function(p){return u(a),_(t.sortBymaterias("EstadoHabilitacion",p))}),c(61," EstadoHabilitacion "),f(62,bi,1,4,"i",31),n(),o(63,"th",30),g("click",function(p){return u(a),_(t.sortBymaterias("EstadoEnvio",p))}),c(64," EstadoEnvio "),f(65,vi,1,4,"i",31),n(),o(66,"th",29),c(67,"ACCIONES"),n()()(),o(68,"tbody"),f(69,Si,5,1,"tr",32)(70,Ei,3,1,"tr",32)(71,Ii,20,10,"tr",33),T(72,"slice"),n()()(),o(73,"div",34)(74,"ngb-pagination",35),M("pageChange",function(p){return u(a),y(t.paginamaterias,p)||(t.paginamaterias=p),_(p)}),n(),o(75,"select",36),M("ngModelChange",function(p){return u(a),y(t.pageSizematerias,p)||(t.pageSizematerias=p),_(p)}),g("change",function(){return u(a),_(t.onPageSizeChangematerias())}),f(76,Oi,2,2,"option",37),n()()(),f(77,Gi,41,14,"ng-template",null,0,L)(79,zi,5,11,"div",38),T(80,"async"),f(81,Qi,40,13,"ng-template",null,1,L)}if(e&2){let a;s(11),l("options",t._tools.optionsAdicionar),s(6),l("options",t._tools.optionssubgestion),s(6),E("ngModel",t.filtroAnioId),s(),l("ngValue",null),s(2),l("ngForOf",t.anios),s(4),E("ngModel",t.filtroResolucionKey),s(),l("ngValue",null),s(2),l("ngForOf",t.resolucionOptions),s(6),l("options",t._tools.optionslupa),s(2),E("ngModel",t.filtertxtmaterias),s(12),l("ngIf",t.isSortedmaterias("LvlCurso")),s(3),l("ngIf",t.isSortedmaterias("Paralelo")),s(3),l("ngIf",t.isSortedmaterias("NombreMateria")),s(3),l("ngIf",t.isSortedmaterias("EstadoHabilitacion")),s(3),l("ngIf",t.isSortedmaterias("EstadoEnvio")),s(4),l("ngIf",t.isLoadingmaterias),s(),l("ngIf",!t.isLoadingmaterias&&(!t.materias||t.materias.length===0)),s(),l("ngForOf",pe(72,28,t.materias,(t.paginamaterias-1)*t.pageSizematerias,t.paginamaterias*t.pageSizematerias)),s(3),E("page",t.paginamaterias),l("collectionSize",t.collectionSizematerias)("pageSize",t.pageSizematerias)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),s(),E("ngModel",t.pageSizematerias),s(),l("ngForOf",t.pageSizeOptionsmaterias),s(3),l("ngIf",(a=V(80,32,t.menuStatematerias$))==null?null:a.visible)}},dependencies:[B,z,$,ue,xe,q,K,fe,W,U,Ce,H,ut,he,be,ve,Y,_e,ge],styles:[".dropdown-list[_ngcontent-%COMP%]{position:absolute;width:100%;max-height:280px;overflow-y:auto;background:#fff;border:1px solid #ced4da;z-index:1000}.dropdown-item[_ngcontent-%COMP%]{padding:8px 12px;cursor:pointer}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.row-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 80px 140px;gap:12px;align-items:center}.center[_ngcontent-%COMP%]{text-align:center;font-weight:500}.right[_ngcontent-%COMP%]{text-align:right;white-space:nowrap}"]});var Ie=Ae;var Ji=["modalgestionplandeestudios"],R=(r,i)=>({"bi-caret-up":r,"bi-caret-down":i}),Xi=(r,i)=>({top:r,left:i});function Zi(r,i){if(r&1&&(o(0,"option",16),c(1),n()),r&2){let e=i.$implicit;l("ngValue",e.id),s(),x(e.Anio)}}function en(r,i){if(r&1&&(o(0,"option",16),c(1),n()),r&2){let e=i.$implicit;l("ngValue",e.key),s(),x(e.label)}}function tn(r,i){if(r&1&&C(0,"i",42),r&2){let e=m(2);l("ngClass",v(1,R,e.getSortDirplandeestudios("NombreInstitucion")==="asc",e.getSortDirplandeestudios("NombreInstitucion")==="desc"))}}function nn(r,i){if(r&1){let e=h();o(0,"th",32),g("click",function(a){u(e);let d=m();return _(d.sortByplandeestudios("NombreInstitucion",a))}),c(1," Nombre Institucion "),f(2,tn,1,4,"i",33),n()}if(r&2){let e=m();s(2),l("ngIf",e.isSortedplandeestudios("NombreInstitucion"))}}function on(r,i){if(r&1&&C(0,"i",42),r&2){let e=m();l("ngClass",v(1,R,e.getSortDirplandeestudios("RangoLvlCurso")==="asc",e.getSortDirplandeestudios("RangoLvlCurso")==="desc"))}}function rn(r,i){if(r&1&&C(0,"i",42),r&2){let e=m();l("ngClass",v(1,R,e.getSortDirplandeestudios("Rango")==="asc",e.getSortDirplandeestudios("Rango")==="desc"))}}function an(r,i){if(r&1&&C(0,"i",42),r&2){let e=m();l("ngClass",v(1,R,e.getSortDirplandeestudios("LvlCurso")==="asc",e.getSortDirplandeestudios("LvlCurso")==="desc"))}}function sn(r,i){if(r&1&&C(0,"i",42),r&2){let e=m();l("ngClass",v(1,R,e.getSortDirplandeestudios("NombreMateria")==="asc",e.getSortDirplandeestudios("NombreMateria")==="desc"))}}function ln(r,i){if(r&1&&C(0,"i",42),r&2){let e=m();l("ngClass",v(1,R,e.getSortDirplandeestudios("Horas")==="asc",e.getSortDirplandeestudios("Horas")==="desc"))}}function cn(r,i){if(r&1&&C(0,"i",42),r&2){let e=m();l("ngClass",v(1,R,e.getSortDirplandeestudios("ModoMateria")==="asc",e.getSortDirplandeestudios("ModoMateria")==="desc"))}}function dn(r,i){if(r&1&&C(0,"i",42),r&2){let e=m();l("ngClass",v(1,R,e.getSortDirplandeestudios("SiglaMateria")==="asc",e.getSortDirplandeestudios("SiglaMateria")==="desc"))}}function mn(r,i){if(r&1&&C(0,"i",42),r&2){let e=m();l("ngClass",v(1,R,e.getSortDirplandeestudios("SiglasPrerrequisitos")==="asc",e.getSortDirplandeestudios("SiglasPrerrequisitos")==="desc"))}}function pn(r,i){if(r&1&&C(0,"i",42),r&2){let e=m();l("ngClass",v(1,R,e.getSortDirplandeestudios("TipoMateria")==="asc",e.getSortDirplandeestudios("TipoMateria")==="desc"))}}function un(r,i){if(r&1&&(o(0,"tr")(1,"td",30)(2,"div",43)(3,"span",44),c(4,"Cargando..."),n()()()()),r&2){let e=m();s(),k("colspan",e.esSuperAdmin?14:13)}}function _n(r,i){if(r&1&&(o(0,"tr")(1,"td",30),c(2,"No hay datos disponibles"),n()()),r&2){let e=m();s(),k("colspan",e.esSuperAdmin?14:13)}}function gn(r,i){if(r&1&&(o(0,"td"),c(1),n()),r&2){let e=m().$implicit;s(),x(e.NombreInstitucion)}}function fn(r,i){if(r&1&&C(0,"img",51),r&2){let e=m(2);l("src",e._tools.rutabtniconsanimaciones+"pencil.svg",F)}}function Cn(r,i){if(r&1&&C(0,"ng-lottie",52),r&2){let e=m(2);l("options",e._tools.optionsEditar)}}function xn(r,i){if(r&1&&C(0,"img",51),r&2){let e=m(2);l("src",e._tools.rutabtniconsanimaciones+"delete.svg",F)}}function hn(r,i){if(r&1&&C(0,"ng-lottie",52),r&2){let e=m(2);l("options",e._tools.optionsEliminar)}}function bn(r,i){if(r&1){let e=h();o(0,"tr",45),g("contextmenu",function(a){let d=u(e).$implicit,p=m();return _(p.abrirMenuplandeestudios(a,d))}),o(1,"td",30),c(2),n(),f(3,gn,2,1,"td",35),o(4,"td",30),c(5),n(),o(6,"td",30),c(7),n(),o(8,"td"),c(9),n(),o(10,"td"),c(11),n(),o(12,"td",30),c(13),n(),o(14,"td"),c(15),n(),o(16,"td"),c(17),n(),o(18,"td"),c(19),n(),o(20,"td"),c(21),n(),o(22,"td",46)(23,"button",47),g("click",function(){let a=u(e).$implicit,d=m();return _(d.Seleccionarplandeestudios(a.id))})("mouseenter",function(){let a=u(e).$implicit,d=m();return _(d._tools.hoverBotonMap["edicionplandeestudios-"+a.id]=!0)})("mouseleave",function(){let a=u(e).$implicit,d=m();return _(d._tools.hoverBotonMap["edicionplandeestudios-"+a.id]=!1)}),f(24,fn,1,1,"img",48)(25,Cn,1,1,"ng-lottie",49),n(),o(26,"button",50),g("click",function(){let a=u(e).$implicit,d=m();return _(d.Eliminarplandeestudios(a.id))})("mouseenter",function(){let a=u(e).$implicit,d=m();return _(d._tools.hoverBotonMap["eliminacionplandeestudios-"+a.id]=!0)})("mouseleave",function(){let a=u(e).$implicit,d=m();return _(d._tools.hoverBotonMap["eliminacionplandeestudios-"+a.id]=!1)}),f(27,xn,1,1,"img",48)(28,hn,1,1,"ng-lottie",49),n()()()}if(r&2){let e=i.index,t=i.$implicit,a=m();s(2),x((a.paginaplandeestudios-1)*a.pageSizeplandeestudios+(e+1)),s(),l("ngIf",a.esSuperAdmin),s(2),x(t.RangoLvlCurso),s(2),x(t.Rango),s(2),x(t.LvlCurso),s(2),x(t.NombreMateria),s(2),x(t.Horas),s(2),x(t.ModoMateria),s(2),x(t.SiglaMateria),s(2),x(t.SiglasPrerrequisitos),s(2),x(t.TipoMateria),s(3),l("ngIf",!a._tools.hoverBotonMap["edicionplandeestudios-"+t.id]),s(),l("ngIf",a._tools.hoverBotonMap["edicionplandeestudios-"+t.id]),s(2),l("ngIf",!a._tools.hoverBotonMap["eliminacionplandeestudios-"+t.id]),s(),l("ngIf",a._tools.hoverBotonMap["eliminacionplandeestudios-"+t.id])}}function vn(r,i){if(r&1&&(o(0,"option",53),c(1),n()),r&2){let e=i.$implicit;l("value",e),s(),w("",e," por p\xE1gina")}}function Sn(r,i){if(r&1&&(o(0,"option",53),c(1),n()),r&2){let e=i.$implicit;l("value",e.id),s(),x(e.Anio)}}function En(r,i){if(r&1&&(o(0,"option",53),c(1),n()),r&2){let e=i.$implicit,t=m(2);l("value",e.id),s(),x(t.esSuperAdmin?e.NombreCarrera+" ("+e.NombreInstitucion+" | "+e.Resolucion+")":e.NombreCarrera+" ("+e.Resolucion+")")}}function yn(r,i){if(r&1&&(o(0,"option",88),c(1),n()),r&2){let e=i.$implicit;l("value",e.value)("disabled",e.disabled),s(),x(e.label)}}function Mn(r,i){if(r&1&&(o(0,"option",88),c(1),n()),r&2){let e=i.$implicit;l("value",e.value)("disabled",e.disabled),s(),x(e.label)}}function wn(r,i){if(r&1&&(o(0,"option",88),c(1),n()),r&2){let e=i.$implicit;l("value",e.value)("disabled",e.disabled),s(),x(e.label)}}function An(r,i){if(r&1&&(o(0,"option",88),c(1),n()),r&2){let e=i.$implicit;l("value",e.value)("disabled",e.disabled),s(),x(e.label)}}function In(r,i){if(r&1){let e=h();o(0,"button",91),g("click",function(){u(e);let a=m(3);return _(a.AutoCompletarLastplandeestudios())}),o(1,"span",10),C(2,"ng-lottie",11),n(),o(3,"span"),c(4,"AUTO COMPLETAR "),n(),C(5,"span",12),n()}if(r&2){let e=m(3);s(2),l("options",e._tools.optionsautocompletar)}}function On(r,i){if(r&1&&(o(0,"div",89),f(1,In,6,1,"button",90),n()),r&2){let e=m(2);s(),l("ngIf",!e.AnimacionCargabtnModalplandeestudios)}}function Tn(r,i){if(r&1){let e=h();o(0,"button",92),g("click",function(){u(e);let a=m().$implicit,d=m();return a.dismiss(),_(d.resetplandeestudios())}),o(1,"span",10),C(2,"ng-lottie",11),n(),o(3,"span"),c(4,"CANCELAR"),n(),C(5,"span",12),n()}if(r&2){let e=m(2);s(2),l("options",e._tools.optionscancelar)}}function Vn(r,i){if(r&1){let e=h();o(0,"button",93),g("click",function(){u(e);let a=m(2);return _(a.AgregarModificarplandeestudios())}),C(1,"span",94),n()}r&2&&l("disabled",!0)}function Dn(r,i){if(r&1){let e=h();o(0,"button",95),g("click",function(){u(e);let a=m(2);return _(a.AgregarModificarplandeestudios())}),o(1,"span",10),C(2,"ng-lottie",11),n(),o(3,"span"),c(4),n(),C(5,"span",12),n()}if(r&2){let e,t,a=m(2);s(2),l("options",(e=a.newplandeestudios.get("id"))!=null&&e.value?a._tools.optionsEditar:a._tools.optionsAdicionar),s(2),x((t=a.newplandeestudios.get("id"))!=null&&t.value?"MODIFICAR":"REGISTRAR")}}function Nn(r,i){if(r&1){let e=h();o(0,"div",54)(1,"h4",55),c(2),n(),o(3,"button",56),g("click",function(){let a=u(e).$implicit,d=m();return a.dismiss(),_(d.resetplandeestudios())}),n()(),o(4,"div",57)(5,"form",58)(6,"div",4)(7,"div",59)(8,"select",60)(9,"option",61),c(10,"Seleccione una opci\xF3n"),n(),f(11,Sn,2,2,"option",40),n(),o(12,"label"),c(13,"A\xF1o"),n(),o(14,"div",62),c(15,"Este campo es obligatorio*"),n()(),o(16,"div",59)(17,"select",63)(18,"option",61),c(19,"Seleccione una opci\xF3n"),n(),f(20,En,2,2,"option",40),n(),o(21,"label"),c(22,"Carrera"),n(),o(23,"div",62),c(24,"Este campo es obligatorio*"),n()()(),o(25,"div",4)(26,"div",64),C(27,"input",65),o(28,"label"),c(29,"Nivel"),n(),o(30,"div",62),c(31,"Este campo es obligatorio*"),n()(),o(32,"div",64),C(33,"input",66),o(34,"label"),c(35,"Rango"),n(),o(36,"div",62),c(37,"Este campo es obligatorio*"),n()(),o(38,"div",67),C(39,"input",68),o(40,"label"),c(41,"Horas"),n(),o(42,"div",62),c(43,"Este campo es obligatorio*"),n()(),o(44,"div",69)(45,"select",70)(46,"option",71),c(47,"Seleccione una opci\xF3n"),n(),f(48,yn,2,3,"option",72),n(),o(49,"label"),c(50,"Nivel del Curso"),n(),o(51,"div",62),c(52,"Este campo es obligatorio*"),n()()(),o(53,"div",4)(54,"div",59)(55,"input",73),g("change",function(a){u(e);let d=m();return _(d._tools.EscribirEnMayuscula(a,d.newplandeestudios,"NombreMateria"))}),n(),o(56,"label"),c(57,"Nombre Materia"),n(),o(58,"div",62),c(59,"Este campo es obligatorio*"),n()(),o(60,"div",59)(61,"input",74),g("change",function(a){u(e);let d=m();return _(d._tools.EscribirEnMayuscula(a,d.newplandeestudios,"SiglaMateria"))}),n(),o(62,"label"),c(63,"Sigla Materia"),n(),o(64,"div",62),c(65,"Este campo es obligatorio*"),n()()(),o(66,"div",4)(67,"div",59)(68,"input",75),g("change",function(a){u(e);let d=m();return _(d._tools.EscribirEnMayuscula(a,d.newplandeestudios,"Prerrequisitos"))}),n(),o(69,"label"),c(70,"Prerrequisitos"),n(),o(71,"div",62),c(72,"Este campo es obligatorio*"),n()(),o(73,"div",59)(74,"input",76),g("change",function(a){u(e);let d=m();return _(d._tools.EscribirEnMayuscula(a,d.newplandeestudios,"SiglasPrerrequisitos"))}),n(),o(75,"label"),c(76,"Siglas Prerrequisitos"),n(),o(77,"div",62),c(78,"Este campo es obligatorio*"),n()()(),o(79,"div",4)(80,"div",64)(81,"select",77)(82,"option",71),c(83,"Seleccione una opci\xF3n"),n(),f(84,Mn,2,3,"option",72),n(),o(85,"label"),c(86,"Tipo de Materia"),n(),o(87,"div",62),c(88,"Este campo es obligatorio*"),n()(),o(89,"div",78)(90,"select",79)(91,"option",71),c(92,"Seleccione una opci\xF3n"),n(),f(93,wn,2,3,"option",72),n(),o(94,"label"),c(95,"Modo de Materia"),n(),o(96,"div",62),c(97,"Este campo es obligatorio*"),n()(),o(98,"div",59)(99,"select",80)(100,"option",71),c(101,"Seleccione una opci\xF3n"),n(),f(102,An,2,3,"option",72),n(),o(103,"label"),c(104,"Relaci\xF3n Docente Estudiante"),n(),o(105,"div",62),c(106,"Este campo es obligatorio*"),n()()()()(),o(107,"div",81),f(108,On,2,1,"div",82),o(109,"div",83),f(110,Tn,6,1,"button",84),n(),o(111,"div",85),f(112,Vn,2,1,"button",86)(113,Dn,6,2,"button",87),n()()}if(r&2){let e,t=m();s(2),w("",(e=t.newplandeestudios.get("id"))!=null&&e.value?"Modificar":"Registrar"," plandeestudios"),s(3),l("formGroup",t.newplandeestudios),s(3),l("ngClass",t.ValidacionplandeestudiosxElemento("anio_id")),s(3),l("ngForOf",t.anios),s(6),l("ngClass",t.ValidacionplandeestudiosxElemento("carreras_id")),s(3),l("ngForOf",t.carreras),s(7),l("ngClass",t.ValidacionplandeestudiosxElemento("RangoLvlCurso")),s(6),l("ngClass",t.ValidacionplandeestudiosxElemento("Rango")),s(6),l("ngClass",t.ValidacionplandeestudiosxElemento("Horas")),s(6),l("ngClass",t.ValidacionplandeestudiosxElemento("LvlCurso")),s(3),l("ngForOf",t.LvlCursoOptions),s(7),l("ngClass",t.ValidacionplandeestudiosxElemento("NombreMateria")),s(6),l("ngClass",t.ValidacionplandeestudiosxElemento("SiglaMateria")),s(7),l("ngClass",t.ValidacionplandeestudiosxElemento("Prerrequisitos")),s(6),l("ngClass",t.ValidacionplandeestudiosxElemento("SiglasPrerrequisitos")),s(7),l("ngClass",t.ValidacionplandeestudiosxElemento("TipoMateria")),s(3),l("ngForOf",t.tipoMateriaOptions),s(6),l("ngClass",t.ValidacionplandeestudiosxElemento("ModoMateria")),s(3),l("ngForOf",t.modoMateriaOptions),s(6),l("disabled",t.isRelacionDocenteEstudianteLocked)("ngClass",t.ValidacionplandeestudiosxElemento("RelacionDocenteCursoAEstudiante")),s(3),l("ngForOf",t.relacionDocenteEstudianteOptionsView),s(6),l("ngIf",!t.newplandeestudios.get("id").value),s(2),l("ngIf",!t.AnimacionCargabtnModalplandeestudios),s(2),l("ngIf",t.AnimacionCargabtnModalplandeestudios),s(),l("ngIf",!t.AnimacionCargabtnModalplandeestudios)}}function Pn(r,i){if(r&1){let e=h();o(0,"button",98),g("click",function(){let a=u(e).$implicit;return _(a.action())}),c(1),n()}if(r&2){let e=i.$implicit;s(),w(" ",e.label," ")}}function Rn(r,i){if(r&1&&(o(0,"div",96),T(1,"async"),T(2,"async"),f(3,Pn,2,1,"button",97),T(4,"async"),n()),r&2){let e,t,a=m();l("ngStyle",v(8,Xi,((e=V(1,2,a.menuStateplandeestudios$))==null?null:e.y)+"px",((e=V(2,4,a.menuStateplandeestudios$))==null?null:e.x)+"px")),s(3),l("ngForOf",(t=V(4,6,a.menuStateplandeestudios$))==null?null:t.items)}}function Fn(r,i){if(r&1){let e=h();o(0,"div",54)(1,"h5",55),c(2,"Componente Gestion de Carreras"),n(),o(3,"button",99),g("click",function(){let a=u(e).$implicit;return _(a.dismiss())}),n()(),o(4,"div",57),C(5,"app-carreras",100),n()}r&2&&(s(5),l("modo","uno")("idAnio","ASDASD"))}function kn(r,i){if(r&1){let e=h();o(0,"div",54)(1,"h5",55),c(2,"Componente Gestion de Materias"),n(),o(3,"button",99),g("click",function(){let a=u(e).$implicit;return _(a.dismiss())}),n()(),o(4,"div",57),C(5,"app-materias",100),n()}r&2&&(s(5),l("modo","uno")("idAnio","ASDASD"))}var Oe=class Oe{constructor(i,e,t,a,d,p){this._controles=i;this._planest=e;this._tools=t;this._carr=a;this._anios=d;this._auth=p;this.isRelacionDocenteEstudianteLocked=!1;this.relacionDocenteEstudianteOptionsView=[];this.tipoMateriaOptions=[];this.modoMateriaOptions=[];this.relacionDocenteEstudianteOptions=[];this.LvlCursoOptions=[];this.esSuperAdmin=!1;this.plandeestudios=[];this.paginaplandeestudios=1;this.isLoadingplandeestudios=!1;this.AnimacionCargabtnModalplandeestudios=!1;this.filtertxtplandeestudios="";this.filtroAnioId=null;this.filtroResolucionKey="";this.filtroResolucion=null;this.filtroInstitucionId=null;this.resolucionOptions=[];this.collectionSizeplandeestudios=0;this.pageSizeplandeestudios=10;this.pageSizeOptionsplandeestudios=[5,10,20,50];this.sortColumnsplandeestudios=[];this.menuStateplandeestudios$=this._tools.state$;this.carreras=[];this.anios=[];this.newplandeestudios=this._planest.createFormGroupplandeestudios(),this.newplandeestudiosAnteriorAccion=this._planest.createFormGroupplandeestudios(),this.initModoMateriaWatcher()}ngOnInit(){this.cargarCarreras(),this.cargarAnios(),this.cargarOptionsDesdeControles(),this._auth.revisarSiEsSuperAdmin().subscribe(i=>{this.esSuperAdmin=i,this.rebuildResolucionOptions(),this.onFiltroChange()})}cargarOptionsDesdeControles(){let i=["TIPOS MATERIAS","MODOS MATERIAS","RELACI\xD3N DOCENTE ESTUDIANTES","LVLCURSO"];this._controles.ObtenerOptionsSelectPorCategorias(i).subscribe({next:e=>{this.tipoMateriaOptions=e?.["TIPOS MATERIAS"]||[],this.modoMateriaOptions=e?.["MODOS MATERIAS"]||[],this.relacionDocenteEstudianteOptions=e?.["RELACI\xD3N DOCENTE ESTUDIANTES"]||[],this.LvlCursoOptions=e?.LVLCURSO||[],this.applyRelacionDocenteRules(this.newplandeestudios?.get("ModoMateria")?.value)},error:()=>{this.tipoMateriaOptions=[],this.modoMateriaOptions=[],this.relacionDocenteEstudianteOptions=[],this.LvlCursoOptions=[],this.relacionDocenteEstudianteOptionsView=[],this.isRelacionDocenteEstudianteLocked=!1}})}initModoMateriaWatcher(){this.modoMateriaSub?.unsubscribe();let i=this.newplandeestudios?.get("ModoMateria");i&&(this.modoMateriaSub=i.valueChanges.subscribe(e=>{this.applyRelacionDocenteRules(e)}),this.applyRelacionDocenteRules(i.value))}normalizeText(i){return(i??"").toString().trim().toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}findOptionValueApprox(i,e){let t=this.normalizeText(i);return(e||[]).find(d=>this.normalizeText(d?.value)===t||this.normalizeText(d?.label)===t)?.value??null}buildAllowedValues(i){let e=new Set;for(let t of i){let a=this.findOptionValueApprox(t,this.relacionDocenteEstudianteOptions);e.add(a??t)}return e}isModoMateria(i,e){return this.normalizeText(i)===this.normalizeText(e)}applyRelacionDocenteRules(i){let e=this.newplandeestudios?.get("RelacionDocenteCursoAEstudiante"),t=(e?.value??"").toString(),a=null,d=!1;this.isModoMateria(i,"1 DOCENTE x MATERIA")||this.isModoMateria(i,"MULTIPLES DOCENTES x MATERIA")?(d=!0,a=this.buildAllowedValues(["NINGUNA"])):this.isModoMateria(i,"MODO INSTRUMENTOS DE ESPECIALIDAD")?a=this.buildAllowedValues(["1 DOCENTE DE ESPECIALIDAD x ESTUDIANTE","2 DOCENTES DE ESPECIALIDAD x ESTUDIANTE","NINGUNA"]):(this.isModoMateria(i,"MODO PR\xC1CTICA DE CONJUNTOS")||this.isModoMateria(i,"MODO PRACTICA DE CONJUNTOS"))&&(a=this.buildAllowedValues(["1 DOCENTE DE PR\xC1CTICA DE CONJUNTO x ESTUDIANTE","1 DOCENTE DE PRACTICA DE CONJUNTO x ESTUDIANTE","NINGUNA"])),this.isRelacionDocenteEstudianteLocked=d;let p=this.relacionDocenteEstudianteOptions||[];if(this.relacionDocenteEstudianteOptionsView=p.map(b=>{let O=a?a.has(b.value):!0;return Pe(Ne({},b),{disabled:!!b.disabled||!O})}),e){let b=this.findOptionValueApprox("NINGUNA",p)??"NINGUNA",O=a?a.has(t):!0;(d||!O)&&t!==b&&e.setValue(b)}}rebuildResolucionOptions(){let i=new Map;for(let e of this.carreras){let t=(e?.Resolucion??"").toString().trim();if(!t)continue;let a=e?.instituciones_id,d=a!=null&&a!==""?Number(a):null,p=(e?.NombreInstitucion??"").toString().trim(),b=this.esSuperAdmin&&d?`${d}|${t}`:t,O=this.esSuperAdmin&&d?`${t}${p?" \xB7 "+p:""}`:t;i.has(b)||i.set(b,{key:b,label:O,resolucion:t,instituciones_id:d})}this.resolucionOptions=Array.from(i.values()).sort((e,t)=>e.label.localeCompare(t.label))}onFiltroChange(){this.paginaplandeestudios=1;let i=!!this.filtroAnioId,e=!!(this.filtroResolucionKey&&this.filtroResolucionKey.trim());if(!i||!e){this.plandeestudios=[],this.collectionSizeplandeestudios=0;return}this.parseResolucionKey(),this.Cargarplandeestudios()}parseResolucionKey(){let i=(this.filtroResolucionKey??"").toString();if(!i){this.filtroResolucion=null,this.filtroInstitucionId=null;return}let e=i.split("|");if(e.length>=2){let t=Number(e[0]),a=e.slice(1).join("|");this.filtroInstitucionId=Number.isFinite(t)?t:null,this.filtroResolucion=a||null}else this.filtroInstitucionId=null,this.filtroResolucion=i}Cargarplandeestudios(){let i=this.filtroAnioId,e=this.filtroResolucion;if(!i||!e){this.plandeestudios=[],this.collectionSizeplandeestudios=0;return}this.isLoadingplandeestudios=!0,this._planest.Obtenerplandeestudios({anio_id:i,resolucion:e,instituciones_id:this.esSuperAdmin?this.filtroInstitucionId??void 0:void 0}).subscribe({next:t=>{console.log("planes de estudio",t.data),this.plandeestudios=t.data||[],this.collectionSizeplandeestudios=this.plandeestudios.length,this.isLoadingplandeestudios=!1},error:t=>{console.error("Error al cargar plandeestudios",t),this.isLoadingplandeestudios=!1}})}AgregarModificarplandeestudios(){if(this.newplandeestudios.invalid){this.ValidacionTodoElementoplandeestudios(),this._tools.MostrarMensajeFrmIncompleto(),this.AnimacionCargabtnModalplandeestudios=!1;return}else{this.AnimarCargaTablaplandeestudios(),this.AnimacionCargabtnModalplandeestudios=!0,this._tools.MostrarMensajeLoading(),this.newplandeestudiosAnteriorAccion.setValue(this.newplandeestudios.value);let i=this.newplandeestudios.controls.id.value;console.log("INFO A PROCESAR",this.newplandeestudios.value),i?this._planest.Modificarplandeestudios(this.newplandeestudios.value,this.newplandeestudios.value.id).subscribe(e=>{console.log("SE MODIFICO CORRECTAMENTE plandeestudios",e.data),this.Cargarplandeestudios(),this.resetplandeestudios(),this.AnimacionCargabtnModalplandeestudios=!1,this._tools.MostrarMensajeSuccess()},e=>{console.log("ERROR AL MODIFICAR plandeestudios",e),this.AnimacionCargabtnModalplandeestudios=!1,this._tools.MostrarMensajeError()}):this._planest.Agregarplandeestudios(this.newplandeestudios.value).subscribe(e=>{console.log("SE A\xD1ADIO CORRECTAMENTE plandeestudios",e.data),this.Cargarplandeestudios(),this.resetplandeestudios(),this.AnimacionCargabtnModalplandeestudios=!1,this._tools.MostrarMensajeSuccess()},e=>{console.log("ERROR AL A\xD1ADIR plandeestudios",e),this.AnimacionCargabtnModalplandeestudios=!1,this._tools.MostrarMensajeError()})}}Seleccionarplandeestudios(i){if(this._tools.MostrarMensajeLoading(),i){if(!this.plandeestudios.find(t=>t.id===i))return;this._planest.Seleccionarplandeestudios(i).subscribe(t=>{Object.keys(this.newplandeestudios.controls).forEach(a=>{this.newplandeestudios.controls[a].setValue(t.data[a])}),console.log("SELECCION DE plandeestudios EXITOSA",this.newplandeestudios.value),this.newplandeestudiosAnteriorAccion.setValue(this.newplandeestudios.value),this.modalGestionplandeestudiosRef=this._tools.openModal(this.modalgestionplandeestudios,"xl"),this._tools.MostrarMensajeSuccess()},t=>{console.log("ERROR AL SELECCIONAR plandeestudios",t),this._tools.MostrarMensajeError()})}}Eliminarplandeestudios(i){this._tools.mostrarMensajeConfirm("\xBFSEGURO QUE DESEA ELIMINAR?","SE ELIMINARA EL DATO Y NO SE PODR\xC1 RECUPERAR EL DATO","warning","SI, ESTOY SEGURO","NO").then(e=>{e&&(this._tools.MostrarMensajeLoading(),this._planest.Eliminarplandeestudios(i).subscribe(t=>{console.log(t.data),this.Cargarplandeestudios(),this._tools.MostrarMensajeSuccess()},t=>{console.log("ERROR AL ELIMINAR plandeestudios",t),this._tools.MostrarMensajeError()}))})}resetplandeestudios(){this.newplandeestudios=this._planest.createFormGroupplandeestudios(),this.initModoMateriaWatcher(),this._tools.closeModal(this.modalGestionplandeestudiosRef)}AutoCompletarLastplandeestudios(){this.newplandeestudios.setValue(this.newplandeestudiosAnteriorAccion.value),this.newplandeestudios.patchValue({id:0}),console.log("listo",this.newplandeestudios.value)}AnimarCargaTablaplandeestudios(){this.plandeestudios=[],this.isLoadingplandeestudios=!0}ValidacionplandeestudiosxElemento(i){return this._tools.obtenerValidationClass(this.newplandeestudios,i)}ValidacionTodoElementoplandeestudios(){Object.values(this.newplandeestudios.controls).forEach(i=>{i.markAsTouched(),i.markAsDirty()})}onPageSizeChangeplandeestudios(){this.paginaplandeestudios=1}sortByplandeestudios(i,e){this.sortColumnsplandeestudios=this._tools.handleSort(i,e,this.sortColumnsplandeestudios),this.plandeestudios=this._tools.applyMultiSort(this.plandeestudios,this.sortColumnsplandeestudios)}isSortedplandeestudios(i){return this._tools.isSorted(this.sortColumnsplandeestudios,i)}getSortDirplandeestudios(i){return this._tools.getSortDirection(this.sortColumnsplandeestudios,i)}closeMenu(){this._tools.close()}abrirMenuplandeestudios(i,e){i.preventDefault(),i.stopPropagation();let t=[{label:"\u270F Editar",action:()=>this.Seleccionarplandeestudios(e.id)},{label:"\u{1F5D1}\uFE0F Eliminar",action:()=>this.Eliminarplandeestudios(e.id)}];this._tools.open(i.clientX,i.clientY,t)}cargarCarreras(){this._carr.Obtenercarreras().subscribe({next:i=>{console.log("data carreras",i),this.carreras=i.data||[],this.rebuildResolucionOptions()},error:i=>{console.error("Error al cargar carreras",i),this.resolucionOptions=[]}})}cargarAnios(){this._anios.Obteneranios().subscribe({next:i=>{console.log("data anios",i),this.anios=i.data||[]},error:i=>{console.error("Error al cargar anios",i)}})}};Oe.\u0275fac=function(e){return new(e||Oe)(S(Se),S(we),S(J),S(X),S(Ee),S(Q))},Oe.\u0275cmp=G({type:Oe,selectors:[["app-plandeestudios"]],viewQuery:function(e,t){if(e&1&&ne(Ji,7),e&2){let a;oe(a=re())&&(t.modalgestionplandeestudios=a.first)}},hostBindings:function(e,t){e&1&&g("click",function(){return t.closeMenu()},me)},standalone:!1,decls:104,vars:40,consts:[["modalgestionplandeestudios",""],["modalOtroComponentecarreras",""],["modalOtroComponentematerias",""],[1,"container","mt-4"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"lead","text-secondary","subtitulosGlobales"],[1,"col-sm-6","d-flex","justify-content-start","button",2,"gap","10px"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","width","30px","height","30px"],["width","50px","height","50px",3,"options"],[1,"dir-part"],[1,"col-sm-3","d-flex","justify-content-end",2,"gap","10px"],[1,"form-floating",2,"min-width","140px"],["title","Filtrar por A\xF1o",1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-floating",2,"min-width","180px"],["title","Filtrar por Resoluci\xF3n",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-sm-3","d-flex","justify-content-end"],[1,"input-group"],[1,"input-group-text"],["width","30px","height","30px",3,"options"],[1,"form-floating"],["type","text","placeholder","Buscar","title","Filtrar/Buscar",1,"form-control",3,"input","ngModelChange","ngModel"],[1,"mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-sm","align-middle"],[1,""],[1,"text-center"],["style","user-select: none; -webkit-user-select: none; -moz-user-select: none;",3,"click",4,"ngIf"],[2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["class","bi",3,"ngClass",4,"ngIf"],["title","Sigla Prerrequisitos",2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],[4,"ngIf"],["style","cursor: pointer;",3,"contextmenu",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["previousLabel","Anterior","nextLabel","Siguiente",3,"pageChange","page","collectionSize","pageSize","maxSize","rotate","ellipses","boundaryLinks"],[1,"form-select",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","context-menu",3,"ngStyle",4,"ngIf"],[1,"bi",3,"ngClass"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[2,"cursor","pointer",3,"contextmenu"],[1,"text-center","d-flex","justify-content-center","align-items-center",2,"gap","5px"],["title","Modificar informaci\xF3n",1,"btn","btn-outline-warning","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src",4,"ngIf"],["width","30px","height","35px",3,"options",4,"ngIf"],["title","Eliminar informaci\xF3n",1,"btn","btn-outline-danger","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src"],["width","30px","height","35px",3,"options"],[3,"value"],[1,"modal-header"],[1,"modal-title"],["type","button","title","cerrar",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup"],[1,"form-floating","mb-3","col-sm-6"],["formControlName","anio_id",1,"form-control",3,"ngClass"],["disabled","","selected","",3,"value"],[1,"invalid-feedback"],["formControlName","carreras_id",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-2"],["type","number","placeholder","","formControlName","RangoLvlCurso",1,"form-control",3,"ngClass"],["type","number","placeholder","","formControlName","Rango",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-3"],["type","number","placeholder","","formControlName","Horas",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-5"],["formControlName","LvlCurso",1,"form-control",3,"ngClass"],["disabled","",3,"value"],[3,"value","disabled",4,"ngFor","ngForOf"],["type","text","placeholder","","formControlName","NombreMateria",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","SiglaMateria",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Prerrequisitos",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","SiglasPrerrequisitos",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","TipoMateria",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-4"],["formControlName","ModoMateria",1,"form-control",3,"ngClass"],["formControlName","RelacionDocenteCursoAEstudiante",1,"form-control",3,"disabled","ngClass"],[1,"modal-footer"],["class","button d-flex justify-content-start",4,"ngIf"],[1,"button","me-2"],["title","Cancelar y cerrar","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],[1,"button"],["class","btn mouse-dir success","title","Procesando informaci\xF3n",3,"disabled","click",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;","title","Accionar",3,"click",4,"ngIf"],[3,"value","disabled"],[1,"button","d-flex","justify-content-start"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Cancelar y cerrar",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Procesando informaci\xF3n",1,"btn","mouse-dir","success",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["title","Accionar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[1,"context-menu",3,"ngStyle"],["class","context-item",3,"click",4,"ngFor","ngForOf"],[1,"context-item",3,"click"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[3,"modo","idAnio"]],template:function(e,t){if(e&1){let a=h();o(0,"div",3)(1,"div",4)(2,"div",5)(3,"h1",6),c(4,"Gesti\xF3n de Plan de Estudios"),n(),o(5,"p",7),c(6,'Administra la informaci\xF3n de los "Planes de estudios", "Materias" y "Carreras" de manera sencilla y eficiente'),n()()()(),o(7,"div",4)(8,"div",8)(9,"button",9),g("click",function(){u(a);let p=Ge(97);return _(t.modalGestionplandeestudiosRef=t._tools.openModal(p,"xl"))}),o(10,"span",10),C(11,"ng-lottie",11),n(),o(12,"span"),c(13,"A\xF1adir plandeestudios "),n(),C(14,"span",12),n(),o(15,"button",9),g("click",function(){u(a);let p=Ge(101);return _(t._tools.openModal(p,"xl"))}),o(16,"span",10),C(17,"ng-lottie",11),n(),o(18,"span"),c(19,"GESTIONAR CARRERAS"),n(),C(20,"span",12),n(),o(21,"button",9),g("click",function(){u(a);let p=Ge(103);return _(t._tools.openModal(p,"xl"))}),o(22,"span",10),C(23,"ng-lottie",11),n(),o(24,"span"),c(25,"GESTIONAR MATERIAS"),n(),C(26,"span",12),n()(),o(27,"div",13)(28,"div",14)(29,"select",15),M("ngModelChange",function(p){return u(a),y(t.filtroAnioId,p)||(t.filtroAnioId=p),_(p)}),g("ngModelChange",function(){return u(a),t.paginaplandeestudios=1,_(t.onFiltroChange())}),o(30,"option",16),c(31,"Seleccione una opci\xF3n"),n(),f(32,Zi,2,2,"option",17),n(),o(33,"label"),c(34,"A\xF1o"),n()(),o(35,"div",18)(36,"select",19),M("ngModelChange",function(p){return u(a),y(t.filtroResolucionKey,p)||(t.filtroResolucionKey=p),_(p)}),g("ngModelChange",function(){return u(a),t.paginaplandeestudios=1,_(t.onFiltroChange())}),o(37,"option",16),c(38,"Seleccione una opci\xF3n"),n(),f(39,en,2,2,"option",17),n(),o(40,"label"),c(41,"Resoluci\xF3n"),n()()(),o(42,"div",20)(43,"div",21)(44,"span",22),C(45,"ng-lottie",23),n(),o(46,"div",24)(47,"input",25),g("input",function(){return u(a),_(t.paginaplandeestudios=1)}),M("ngModelChange",function(p){return u(a),y(t.filtertxtplandeestudios,p)||(t.filtertxtplandeestudios=p),_(p)}),n(),o(48,"label"),c(49,"Buscar"),n()()()()(),o(50,"div",26)(51,"div",27)(52,"table",28)(53,"thead",29)(54,"tr")(55,"th",30),c(56,"#"),n(),f(57,nn,3,1,"th",31),o(58,"th",32),g("click",function(p){return u(a),_(t.sortByplandeestudios("RangoLvlCurso",p))}),c(59," Nivel "),f(60,on,1,4,"i",33),n(),o(61,"th",32),g("click",function(p){return u(a),_(t.sortByplandeestudios("Rango",p))}),c(62," Rango "),f(63,rn,1,4,"i",33),n(),o(64,"th",32),g("click",function(p){return u(a),_(t.sortByplandeestudios("LvlCurso",p))}),c(65," Nivel Curso "),f(66,an,1,4,"i",33),n(),o(67,"th",32),g("click",function(p){return u(a),_(t.sortByplandeestudios("NombreMateria",p))}),c(68," NombreMateria "),f(69,sn,1,4,"i",33),n(),o(70,"th",32),g("click",function(p){return u(a),_(t.sortByplandeestudios("Horas",p))}),c(71," Horas "),f(72,ln,1,4,"i",33),n(),o(73,"th",32),g("click",function(p){return u(a),_(t.sortByplandeestudios("ModoMateria",p))}),c(74," Modo Materia "),f(75,cn,1,4,"i",33),n(),o(76,"th",32),g("click",function(p){return u(a),_(t.sortByplandeestudios("SiglaMateria",p))}),c(77," Sigla "),f(78,dn,1,4,"i",33),n(),o(79,"th",34),g("click",function(p){return u(a),_(t.sortByplandeestudios("SiglasPrerrequisitos",p))}),c(80," Sigla Pre. "),f(81,mn,1,4,"i",33),n(),o(82,"th",32),g("click",function(p){return u(a),_(t.sortByplandeestudios("TipoMateria",p))}),c(83," TipoMateria "),f(84,pn,1,4,"i",33),n(),o(85,"th",30),c(86,"ACCIONES"),n()()(),o(87,"tbody"),f(88,un,5,1,"tr",35)(89,_n,3,1,"tr",35)(90,bn,29,15,"tr",36),T(91,"slice"),n()()(),o(92,"div",37)(93,"ngb-pagination",38),M("pageChange",function(p){return u(a),y(t.paginaplandeestudios,p)||(t.paginaplandeestudios=p),_(p)}),n(),o(94,"select",39),M("ngModelChange",function(p){return u(a),y(t.pageSizeplandeestudios,p)||(t.pageSizeplandeestudios=p),_(p)}),g("change",function(){return u(a),_(t.onPageSizeChangeplandeestudios())}),f(95,vn,2,2,"option",40),n()()(),f(96,Nn,114,26,"ng-template",null,0,L)(98,Rn,5,11,"div",41),T(99,"async"),f(100,Fn,6,2,"ng-template",null,1,L)(102,kn,6,2,"ng-template",null,2,L)}if(e&2){let a;s(11),l("options",t._tools.optionsAdicionar),s(6),l("options",t._tools.optionssubgestion),s(6),l("options",t._tools.optionssubgestion),s(6),E("ngModel",t.filtroAnioId),s(),l("ngValue",null),s(2),l("ngForOf",t.anios),s(4),E("ngModel",t.filtroResolucionKey),s(),l("ngValue",null),s(2),l("ngForOf",t.resolucionOptions),s(6),l("options",t._tools.optionslupa),s(2),E("ngModel",t.filtertxtplandeestudios),s(10),l("ngIf",t.esSuperAdmin),s(3),l("ngIf",t.isSortedplandeestudios("RangoLvlCurso")),s(3),l("ngIf",t.isSortedplandeestudios("Rango")),s(3),l("ngIf",t.isSortedplandeestudios("LvlCurso")),s(3),l("ngIf",t.isSortedplandeestudios("NombreMateria")),s(3),l("ngIf",t.isSortedplandeestudios("Horas")),s(3),l("ngIf",t.isSortedplandeestudios("ModoMateria")),s(3),l("ngIf",t.isSortedplandeestudios("SiglaMateria")),s(3),l("ngIf",t.isSortedplandeestudios("SiglasPrerrequisitos")),s(3),l("ngIf",t.isSortedplandeestudios("TipoMateria")),s(4),l("ngIf",t.isLoadingplandeestudios),s(),l("ngIf",!t.isLoadingplandeestudios&&(!t.plandeestudios||t.plandeestudios.length===0)),s(),l("ngForOf",pe(91,34,t.plandeestudios,(t.paginaplandeestudios-1)*t.pageSizeplandeestudios,t.paginaplandeestudios*t.pageSizeplandeestudios)),s(3),E("page",t.paginaplandeestudios),l("collectionSize",t.collectionSizeplandeestudios)("pageSize",t.pageSizeplandeestudios)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),s(),E("ngModel",t.pageSizeplandeestudios),s(),l("ngForOf",t.pageSizeOptionsplandeestudios),s(3),l("ngIf",(a=V(99,38,t.menuStateplandeestudios$))==null?null:a.visible)}},dependencies:[B,z,$,ue,xe,q,K,fe,We,W,U,Ce,H,he,be,ve,Y,Me,Ie,_e,ge],encapsulation:2});var Ke=Oe;var le=class le{constructor(i){this.http=i;this.ruta=Ue.ruta}Obtenerplanteldocentesmaterias(i){let e=new ze,t=i;return t?.planteldocentes_id&&(e=e.set("planteldocentes_id",String(t.planteldocentes_id))),t?.anio_id&&(e=e.set("anio_id",String(t.anio_id))),t?.resolucion&&(e=e.set("resolucion",String(t.resolucion))),t?.instituciones_id&&(e=e.set("instituciones_id",String(t.instituciones_id))),this.http.get(this.ruta+"api/planteldocentesmaterias/",{params:e})}ObtenerplanteldocentesmateriasPorDocente(i){return this.Obtenerplanteldocentesmaterias({planteldocentes_id:i})}AsignarMateriaADocente(i){return this.http.post(this.ruta+"api/planteldocentesmaterias/assign",i)}QuitarMateriaADocente(i){return this.http.post(this.ruta+"api/planteldocentesmaterias/unassign",i)}Agregarplanteldocentesmaterias(i){return this.http.post(this.ruta+"api/planteldocentesmaterias/",i)}Modificarplanteldocentesmaterias(i,e){return this.http.put(this.ruta+"api/planteldocentesmaterias/"+e,i)}Seleccionarplanteldocentesmaterias(i){return this.http.get(this.ruta+"api/planteldocentesmaterias/"+i)}Eliminarplanteldocentesmaterias(i){return this.http.delete(this.ruta+"api/planteldocentesmaterias/"+i)}createFormGroupplanteldocentesmaterias(){return new He({id:new A(0),planteldocentes_id:new A(""),materias_id:new A("")})}};le.\u0275fac=function(e){return new(e||le)(Le($e))},le.\u0275prov=Fe({token:le,factory:le.\u0275fac,providedIn:"root"});var Qe=le;var Et=r=>({checked:r,"custom-border":!0});function jn(r,i){if(r&1&&(o(0,"option",12),c(1),n()),r&2){let e=i.$implicit;l("ngValue",e.id),s(),x(e.Anio)}}function Gn(r,i){if(r&1&&(o(0,"option",12),c(1),n()),r&2){let e=i.$implicit;l("ngValue",e.key),s(),x(e.label)}}function Bn(r,i){if(r&1){let e=h();o(0,"tr")(1,"td"),c(2),n(),o(3,"td"),c(4),n(),o(5,"td")(6,"button",49),g("click",function(){let a=u(e).$implicit,d=m(2);return _(d.seleccionarDocenteDemo(a))}),c(7," Seleccionar "),n()()()}if(r&2){let e=i.$implicit,t=m(2);s(2),tt("",e.nombre," (#",e.id,")"),s(2),x(e.cantMaterias||0),s(2),l("disabled",!t.esDocenteSeleccionable(e))}}function zn(r,i){r&1&&(o(0,"tr")(1,"td",50),c(2,"Sin pendientes"),n()())}function $n(r,i){if(r&1){let e=h();o(0,"div",41)(1,"div",42)(2,"span"),c(3,"DOCENTES SIN ASIGNACIONES (sin materias asignadas)"),n()(),o(4,"div",23)(5,"div",7)(6,"span",8),C(7,"i",27),n(),o(8,"div",10)(9,"input",43),g("input",function(a){u(e);let d=m();return _(d.filterPendientesDocentes=a.target.value)}),n(),o(10,"label"),c(11,"Buscar (nombre)"),n()()()(),o(12,"div",44)(13,"table",45)(14,"thead")(15,"tr")(16,"th"),c(17,"Docente"),n(),o(18,"th",46),c(19,"Materias asignadas"),n(),o(20,"th",47),c(21,"Acci\xF3n"),n()()(),o(22,"tbody"),f(23,Bn,8,4,"tr",48)(24,zn,3,0,"tr",39),n()()()()}if(r&2){let e=m();s(9),l("value",e.filterPendientesDocentes),s(14),l("ngForOf",e.docentesPendientesFiltrados())("ngForTrackBy",e.trackById),s(),l("ngIf",e.docentesPendientesFiltrados().length===0)}}function Un(r,i){if(r&1){let e=h();o(0,"button",51),g("click",function(){let a=u(e).$implicit,d=m();return _(d.seleccionarDocenteDemo(a))}),c(1),o(2,"span",52),c(3),n()()}if(r&2){let e=i.$implicit,t=m();Be("active",(t.docenteSeleccionadoDemo==null?null:t.docenteSeleccionadoDemo.id)===e.id),l("disabled",!t.esDocenteSeleccionable(e)),s(),tt(" ",e.nombre," (#",e.id,") "),s(2),w(" - ",e.cantMaterias||0," materias")}}function Hn(r,i){r&1&&(o(0,"small",52),c(1,"Selecciona un docente para habilitar los toggles."),n())}function Wn(r,i){if(r&1&&(o(0,"h3",53),c(1," Docente Seleccionado: "),o(2,"b"),c(3),n()()),r&2){let e=m();s(3),x(e.docenteSeleccionadoDemo.nombre)}}function qn(r,i){if(r&1&&(o(0,"option",12),c(1),n()),r&2){let e=i.$implicit;l("ngValue",e.id),s(),x(e.Anio)}}function Kn(r,i){if(r&1&&(o(0,"option",12),c(1),n()),r&2){let e=i.$implicit;l("ngValue",e.key),s(),x(e.label)}}function Qn(r,i){if(r&1){let e=h();o(0,"div",54)(1,"div",6)(2,"div",7)(3,"span",8),C(4,"i",9),n(),o(5,"div",10)(6,"select",55),M("ngModelChange",function(a){u(e);let d=m();return y(d.filtroAnioId,a)||(d.filtroAnioId=a),_(a)}),g("change",function(){u(e);let a=m();return _(a.onCambioFiltrosAsignacion())}),o(7,"option",12),c(8,"-- Seleccione --"),n(),f(9,qn,2,2,"option",13),n(),o(10,"label",56),c(11,"A\xF1o (Gesti\xF3n)"),n()()()(),o(12,"div",57)(13,"div",7)(14,"span",8),C(15,"i",15),n(),o(16,"div",10)(17,"select",58),M("ngModelChange",function(a){u(e);let d=m();return y(d.filtroResolucionKey,a)||(d.filtroResolucionKey=a),_(a)}),g("change",function(){u(e);let a=m();return _(a.onCambioFiltrosAsignacion())}),o(18,"option",12),c(19,"-- Seleccione --"),n(),f(20,Kn,2,2,"option",13),n(),o(21,"label",59),c(22,"Resoluci\xF3n"),n()()()()()}if(r&2){let e=m();s(6),E("ngModel",e.filtroAnioId),s(),l("ngValue",null),s(2),l("ngForOf",e.aniosOptions),s(8),E("ngModel",e.filtroResolucionKey),s(),l("ngValue",""),s(2),l("ngForOf",e.resolucionOptions)}}function Yn(r,i){if(r&1){let e=h();o(0,"button",71),g("click",function(){let a=u(e).$implicit,d=m(2);return _(d.toggleLvlCurso(a))}),c(1),n()}if(r&2){let e=i.$implicit,t=m(2);Be("active",t.isLvlCursoSeleccionado(e)),s(),w(" ",e," ")}}function Jn(r,i){if(r&1){let e=h();o(0,"button",72),g("click",function(){let a=u(e).$implicit,d=m(2);return _(d.toggleParalelo(a))}),c(1),n()}if(r&2){let e=i.$implicit,t=m(2);Be("active",t.isParaleloSeleccionado(e)),s(),w(" ",e," ")}}function Xn(r,i){if(r&1&&(o(0,"div",82),c(1),n()),r&2){let e=i.ngIf;s(),w(" Docentes: ",e," ")}}function Zn(r,i){r&1&&(o(0,"div",83)(1,"span",84),c(2,"Cargando..."),n()())}function eo(r,i){if(r&1){let e=h();o(0,"div",77)(1,"button",78),g("click",function(a){let d=u(e).$implicit,p=m(4);return _(p.toggleAsignacionDemo(d,a))}),o(2,"span",79),c(3),n(),o(4,"span"),c(5),n()(),f(6,Xn,2,1,"div",80)(7,Zn,3,0,"div",81),n()}if(r&2){let e=i.$implicit,t=m(4);l("ngClass",it(7,Et,t.isAsignadaDemo(e.id))),s(),l("disabled",!t.docenteSeleccionadoDemo||t.isLoadingMateria[e.id]),s(),l("ngClass",t.isAsignadaDemo(e.id)?"bg-success":"bg-secondary"),s(),w(" ",t.isAsignadaDemo(e.id)?"ASIGNADO":"NO"," "),s(2),x((e.sigla?e.sigla+" - ":"")+e.nombre),s(),l("ngIf",t.docentesAsignadosEnMateriaTexto(e.id)),s(),l("ngIf",t.isLoadingMateria[e.id])}}function to(r,i){if(r&1&&(o(0,"div")(1,"h5",74),c(2),n(),o(3,"div",75),f(4,eo,8,9,"div",76),n(),C(5,"hr"),n()),r&2){let e=i.$implicit,t=m(3);s(2),x(e),s(2),l("ngForOf",t.materiasPorCategoria(e))}}function io(r,i){if(r&1&&(Ze(0),f(1,to,6,2,"div",73),et()),r&2){let e=m(2);s(),l("ngForOf",e.categoriasDemo())}}function no(r,i){if(r&1&&(o(0,"span"),c(1),n()),r&2){let e=m().$implicit;s(),x(e.lvlCurso)}}function oo(r,i){if(r&1&&(o(0,"span"),c(1),n()),r&2){let e=m().$implicit;s(),w(" - ",e.paralelo)}}function ro(r,i){if(r&1&&(o(0,"div",82),c(1),n()),r&2){let e=i.ngIf;s(),w(" Docentes: ",e," ")}}function ao(r,i){r&1&&(o(0,"div",83)(1,"span",84),c(2,"Cargando..."),n()())}function so(r,i){if(r&1){let e=h();o(0,"div",77)(1,"button",78),g("click",function(a){let d=u(e).$implicit,p=m(3);return _(p.toggleAsignacionDemo(d,a))}),o(2,"span",79),c(3),n(),o(4,"span"),c(5),n()(),o(6,"div",82),f(7,no,2,1,"span",39)(8,oo,2,1,"span",39),n(),f(9,ro,2,1,"div",80)(10,ao,3,0,"div",81),n()}if(r&2){let e=i.$implicit,t=m(3);l("ngClass",it(9,Et,t.isAsignadaDemo(e.id))),s(),l("disabled",!t.docenteSeleccionadoDemo||t.isLoadingMateria[e.id]),s(),l("ngClass",t.isAsignadaDemo(e.id)?"bg-success":"bg-secondary"),s(),w(" ",t.isAsignadaDemo(e.id)?"ASIGNADO":"NO"," "),s(2),x((e.sigla?e.sigla+" - ":"")+e.nombre),s(2),l("ngIf",e.lvlCurso),s(),l("ngIf",e.paralelo),s(),l("ngIf",t.docentesAsignadosEnMateriaTexto(e.id)),s(),l("ngIf",t.isLoadingMateria[e.id])}}function lo(r,i){if(r&1&&(Ze(0),o(1,"div",75),f(2,so,11,11,"div",76),n(),et()),r&2){let e=m(2);s(2),l("ngForOf",e.materiasFiltradasDemo())}}function co(r,i){if(r&1){let e=h();o(0,"div")(1,"div",54)(2,"div",60)(3,"div",7)(4,"span",8),C(5,"i",61),n(),o(6,"div",10)(7,"input",62),g("input",function(a){u(e);let d=m();return _(d.filterMateria=a.target.value)}),n(),o(8,"label"),c(9,"Buscar materia (sigla/nombre/ID)"),n()()()(),o(10,"div",63)(11,"div",64)(12,"input",65),g("change",function(){u(e);let a=m();return _(a.toggleModoCategorias())}),n(),o(13,"label",66),c(14,"Con categor\xEDas"),n()(),o(15,"div",67)(16,"small",68),c(17,"Cursos:"),n(),f(18,Yn,2,3,"button",69),n(),o(19,"div",67)(20,"small",68),c(21,"Paralelos:"),n(),f(22,Jn,2,3,"button",70),n()()(),f(23,io,2,1,"ng-container",39)(24,lo,3,1,"ng-container",39),n()}if(r&2){let e=m();s(7),l("value",e.filterMateria),s(5),l("checked",e.modoCategorias),s(6),l("ngForOf",e.lvlCursosDetectados()),s(4),l("ngForOf",e.paralelosDetectados()),s(),l("ngIf",e.modoCategorias),s(),l("ngIf",!e.modoCategorias)}}function mo(r,i){r&1&&(o(0,"tr")(1,"td",87),c(2," Selecciona un docente para ver asignaciones. "),n()())}function po(r,i){if(r&1){let e=h();o(0,"tr")(1,"td"),c(2),n(),o(3,"td"),c(4),n(),o(5,"td"),c(6),n(),o(7,"td"),c(8),n(),o(9,"td"),c(10),n(),o(11,"td")(12,"button",88),g("click",function(){let a=u(e).$implicit,d=m(2);return _(d.quitarAsignacionTabla(a.materiaId))}),c(13," Quitar "),n()()()}if(r&2){let e=i.$implicit,t=i.index,a=m(2);s(2),x(t+1),s(2),x(e.docente),s(2),x(e.categoria),s(2),x(e.materia),s(2),x(e.paralelo),s(2),l("disabled",!a.docenteSeleccionadoDemo||a.isLoadingMateria[e.materiaId])}}function uo(r,i){r&1&&(o(0,"tr")(1,"td",89),c(2,"Sin asignaciones (demo)"),n()())}function _o(r,i){if(r&1&&(o(0,"div",44)(1,"table",85)(2,"thead")(3,"tr")(4,"th"),c(5,"#"),n(),o(6,"th"),c(7,"Docente"),n(),o(8,"th"),c(9,"Categoria"),n(),o(10,"th"),c(11,"Materia"),n(),o(12,"th"),c(13,"Paralelo"),n(),o(14,"th"),c(15,"Acci\xF3n"),n()()(),o(16,"tbody",86),f(17,mo,3,0,"tr",39)(18,po,14,6,"tr",73)(19,uo,3,0,"tr",39),n()()()),r&2){let e=m();s(17),l("ngIf",!e.docenteSeleccionadoDemo),s(),l("ngForOf",e.tablaAsignacionesDemo()),s(),l("ngIf",e.docenteSeleccionadoDemo&&e.tablaAsignacionesDemo().length===0)}}var Te=class Te{constructor(i,e,t,a,d,p,b){this._mat=i;this._tools=e;this._planteldoc=t;this._planteldocmat=a;this._carreras=d;this._anios=p;this._auth=b;this.ModoBoolean=!1;this.filterDocente="";this.filterMateria="";this.docentesDemo=[];this.materiasDemo=[];this.docenteSeleccionadoDemo=null;this.paraleloDemo="";this.modoCategorias=!0;this.aniosOptions=[];this.filtroAnioId=null;this.filtroResolucionKey="";this.filtroResolucion=null;this.filtroInstitucionId=null;this.resolucionOptions=[];this.esSuperAdmin=!1;this.carreras=[];this.verPendientesDocentes=!1;this.filterPendientesDocentes="";this.selectedLvlCursos=new Set;this.selectedParalelos=new Set;this.asignacionesDemo=new Map;this.docentesPorMateria=new Map;this.isLoadingMateria={};this.docentes=[];this.materias=[]}ngOnInit(){this.cargarFiltrosAsignacion(),this.cargardocentes(),this._auth.revisarSiEsSuperAdmin().subscribe(i=>{this.esSuperAdmin=i,this.rebuildResolucionOptions(),this.onCambioFiltrosAsignacion()})}cargarFiltrosAsignacion(){this._anios.Obteneranios().subscribe({next:i=>{let e=Array.isArray(i?.data)?i.data:[];this.aniosOptions=e.map(t=>({id:Number(t?.id),Anio:String(t?.Anio??"").trim()})).filter(t=>Number.isFinite(t.id)&&t.id>0&&t.Anio)},error:()=>{this.aniosOptions=[]}}),this._carreras.Obtenercarreras().subscribe({next:i=>{this.carreras=Array.isArray(i?.data)?i.data:[],this.rebuildResolucionOptions()},error:()=>{this.carreras=[],this.rebuildResolucionOptions()}})}rebuildResolucionOptions(){let i=new Map;for(let e of this.carreras||[]){let t=(e?.Resolucion??"").toString().trim();if(!t)continue;let a=e?.instituciones_id,d=a!=null&&a!==""?Number(a):null,p=(e?.NombreInstitucion??"").toString().trim(),b=this.esSuperAdmin&&d?`${d}|${t}`:t,O=this.esSuperAdmin&&d?`${t}${p?" ("+p+")":""}`:t;i.has(b)||i.set(b,{key:b,label:O,resolucion:t,instituciones_id:d})}this.resolucionOptions=Array.from(i.values()).sort((e,t)=>e.label.localeCompare(t.label))}onCambioFiltrosAsignacion(){this.selectedLvlCursos.clear(),this.selectedParalelos.clear(),this.recargarDatosPorFiltro()}togglePendientesDocentes(){this.verPendientesDocentes=!this.verPendientesDocentes}docentesPendientesFiltrados(){let i=(this.filterPendientesDocentes??"").trim().toLowerCase(),e=this.docentesDemo.filter(t=>(t.cantMaterias??0)===0);return i?e.filter(t=>`${t.id} ${t.nombre}`.toLowerCase().includes(i)):e}esDocenteSeleccionable(i){return i?(i.estado??"").toString().trim().toUpperCase()!=="INACTIVO":!1}cargardocentes(){this._planteldoc.Obtenerplanteldocentes().subscribe({next:i=>{if(console.log("data plantel docente",i.data),this.docentes=i.data,this.docentesDemo=(Array.isArray(i.data)?i.data:[]).map(e=>{let t=(e?.Nombres??"").toString().trim(),a=(e?.Apellidos??"").toString().trim(),d=`${t} ${a}`.trim()||`Docente #${e?.id}`,p=(e?.Visibilidad??"").toString().trim().toUpperCase(),b=(e?.Estado??"").toString().trim().toUpperCase();return{id:Number(e?.id),nombre:d,cantMaterias:0,visibilidad:p,estado:b}}).filter(e=>Number.isFinite(e.id)&&(e.visibilidad??"").toString().trim().toUpperCase()==="VISIBLE"),this.docenteSeleccionadoDemo){let e=this.docentesDemo.find(t=>t.id===this.docenteSeleccionadoDemo?.id);(!e||!this.esDocenteSeleccionable(e))&&(this.docenteSeleccionadoDemo=null)}this.recalcularConteosDocentes()},error:i=>{console.error("Error al cargar los docentes:",i)}})}parseResolucionKey(){let i=(this.filtroResolucionKey??"").toString();if(!i){this.filtroResolucion=null,this.filtroInstitucionId=null;return}let e=i.split("|");if(e.length>=2){let t=Number(e[0]),a=e.slice(1).join("|");this.filtroInstitucionId=Number.isFinite(t)?t:null,this.filtroResolucion=a||null}else this.filtroInstitucionId=null,this.filtroResolucion=i}getFiltroParams(){let i=this.filtroAnioId,e=!!(this.filtroResolucionKey&&this.filtroResolucionKey.toString().trim());return!i||!e||(this.parseResolucionKey(),!this.filtroResolucion)?null:{anio_id:i,resolucion:this.filtroResolucion,instituciones_id:this.esSuperAdmin?this.filtroInstitucionId??void 0:void 0}}recargarDatosPorFiltro(){let i=this.getFiltroParams();if(!i){this.materias=[],this.materiasDemo=[],this.asignacionesDemo.clear(),this.docentesPorMateria.clear(),this.recalcularConteosDocentes();return}Re({materias:this._mat.Obtenermaterias(i).pipe(te(e=>e?.data||[]),ie(e=>(console.error("Error al cargar materias (filtro global)",e),ee([])))),asignaciones:this._planteldocmat.Obtenerplanteldocentesmaterias(i).pipe(te(e=>e?.data||[]),ie(e=>(console.error("Error al cargar asignaciones (filtro global)",e),ee([]))))}).subscribe({next:({materias:e,asignaciones:t})=>{this.materias=e||[],this.materiasDemo=(Array.isArray(e)?e:[]).map(d=>{let p=(d?.NombreMateria??"").toString().trim()||`Materia #${d?.id}`,b=(d?.SiglaMateria??"").toString().trim()||void 0,O=(d?.ModoMateria??"").toString().trim()||void 0,D=(d?.Anio??"SIN ASIGNAR").toString().trim()||"SIN ASIGNAR",I=(d?.Resolucion??"SIN RESOLUCION").toString().trim()||"SIN RESOLUCION",P=(d?.LvlCurso??"SIN CURSO").toString().trim()||"SIN CURSO",Ve=(d?.Paralelo??"").toString().trim(),Z=Ve?`${P} ${Ve}`:P;return{id:Number(d?.id),categoria:Z,sigla:b,nombre:p,modoMateria:O,lvlCurso:P,paralelo:Ve,anio:D,resolucion:I}}).filter(d=>Number.isFinite(d.id));let a=new Set(this.materiasDemo.map(d=>d.id));this.asignacionesDemo.clear(),this.docentesPorMateria.clear();for(let d of Array.isArray(t)?t:[]){let p=Number(d.planteldocentes_id??d.planteldocente_id),b=Number(d.materias_id??d.materia_id);!Number.isFinite(p)||!Number.isFinite(b)||a.has(b)&&(this.asignacionesDemo.has(p)||this.asignacionesDemo.set(p,new Set),this.asignacionesDemo.get(p)?.add(b),this.docentesPorMateria.has(b)||this.docentesPorMateria.set(b,new Set),this.docentesPorMateria.get(b)?.add(p))}this.recalcularConteosDocentes()},error:e=>{console.error(e)}})}recalcularConteosDocentes(){Array.isArray(this.docentesDemo)&&(this.docentesDemo=this.docentesDemo.map(i=>{let e=(this.asignacionesDemo.get(i.id)??new Set).size;return Pe(Ne({},i),{cantMaterias:e})}))}trackById(i,e){return e.id}onToggleChange(i){let e=i.target.checked;this.ModoBoolean=e}docentesFiltradosDemo(){let i=(this.filterDocente??"").trim().toLowerCase();return i?this.docentesDemo.filter(e=>`${e.id} ${e.nombre}`.toLowerCase().includes(i)):this.docentesDemo}seleccionarDocenteDemo(i){this.esDocenteSeleccionable(i)&&(this.docenteSeleccionadoDemo=i)}limpiarDocenteDemo(){this.docenteSeleccionadoDemo=null}materiasFiltradasDemo(){let i=(this.filterMateria??"").trim().toLowerCase(),e=this.materiasDemo;return i&&(e=e.filter(t=>`${t.id} ${t.sigla??""} ${t.nombre} ${t.categoria} ${t.lvlCurso??""} ${t.paralelo??""} ${this.docentesAsignadosEnMateriaTexto(t.id)}`.toLowerCase().includes(i))),this.selectedLvlCursos.size>0&&(e=e.filter(t=>this.selectedLvlCursos.has((t.lvlCurso??"").toString()))),this.selectedParalelos.size>0&&(e=e.filter(t=>this.selectedParalelos.has((t.paralelo??"").toString()))),e}materiasPorCategoria(i){return this.materiasFiltradasDemo().filter(e=>e.categoria===i)}categoriasDemo(){return Array.from(new Set(this.materiasFiltradasDemo().map(i=>i.categoria))).sort((i,e)=>i.localeCompare(e))}toggleModoCategorias(){this.modoCategorias=!this.modoCategorias}lvlCursosDetectados(){return Array.from(new Set(this.materiasDemo.map(i=>i.lvlCurso).filter(Boolean))).sort((i,e)=>i.localeCompare(e))}paralelosDetectados(){return Array.from(new Set(this.materiasDemo.map(i=>i.paralelo).filter(i=>!!i))).sort((i,e)=>i.localeCompare(e))}isLvlCursoSeleccionado(i){return this.selectedLvlCursos.has(i)}toggleLvlCurso(i){this.selectedLvlCursos.has(i)?this.selectedLvlCursos.delete(i):this.selectedLvlCursos.add(i)}isParaleloSeleccionado(i){return this.selectedParalelos.has(i)}toggleParalelo(i){this.selectedParalelos.has(i)?this.selectedParalelos.delete(i):this.selectedParalelos.add(i)}docentesAsignadosEnMateriaTexto(i){let e=this.docentesPorMateria.get(i);return!e||e.size===0?"":Array.from(e).map(a=>this.docentesDemo.find(d=>d.id===a)?.nombre??`#${a}`).filter(Boolean).join(", ")}normalizeModoMateria(i){return(i??"").toString().trim().toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}esModoInstrumentoEspecialidad(i){let e=this.normalizeModoMateria(i.modoMateria);return e.includes("INSTRUMENT")&&e.includes("ESPECIAL")}esModoPracticaConjuntos(i){let e=this.normalizeModoMateria(i.modoMateria);return e.includes("PRACTICA")&&e.includes("CONJUNTO")}esModoUnDocentePorMateria(i){let e=this.normalizeModoMateria(i.modoMateria);return e.includes("1")&&e.includes("DOCENTE")}isAsignadaDemo(i){let e=this.docenteSeleccionadoDemo;return e?(this.asignacionesDemo.get(e.id)??new Set).has(i):!1}toggleAsignacionDemo(i,e){return Xe(this,null,function*(){if(e?.preventDefault(),!this.docenteSeleccionadoDemo)return;let t=this.docenteSeleccionadoDemo.id,a=this.asignacionesDemo.get(t)??new Set;this.asignacionesDemo.set(t,a),this.isLoadingMateria[i.id]=!0;try{if(a.has(i.id)){yield new Promise((b,O)=>{this._planteldocmat.QuitarMateriaADocente({planteldocentes_id:t,materias_id:i.id}).subscribe({next:()=>b(),error:D=>O(D)})}),a.delete(i.id);let p=this.docentesPorMateria.get(i.id);p?.delete(t),p&&p.size===0&&this.docentesPorMateria.delete(i.id)}else{if(this.esModoInstrumentoEspecialidad(i)){this._tools.MostrarMensaje("info","NO ES NECESARIO ASIGNAR MATERIAS DE INSTRUMENTO DE ESPECIALIDAD PORQUE LA DETECCION DE ESTUDIANTES SE HACE AUTOMATICO DESDE INSCRIPCIONES DE ESTUDIANTES.");return}if(this.esModoPracticaConjuntos(i)){this._tools.MostrarMensaje("info","NO ES NECESARIO ASIGNAR MATERIAS DE PR\xC1CTICA DE CONJUNTOS PORQUE LA DETECCION DE ESTUDIANTES SE HACE AUTOMATICO DESDE INSCRIPCIONES DE ESTUDIANTES.");return}if(this.esModoUnDocentePorMateria(i)){let p=this.docentesPorMateria.get(i.id);if(p&&p.size>0){let b=this.docentesAsignadosEnMateriaTexto(i.id);this._tools.MostrarMensaje("warning",`No se puede asignar: esta materia es "1 DOCENTE x MATERIA" y ya tiene docente asignado${b?": "+b:"."}`);return}}yield new Promise((p,b)=>{this._planteldocmat.AsignarMateriaADocente({planteldocentes_id:t,materias_id:i.id,Paralelo:this.paraleloDemo||null}).subscribe({next:()=>p(),error:O=>b(O)})}),a.add(i.id),this.docentesPorMateria.has(i.id)||this.docentesPorMateria.set(i.id,new Set),this.docentesPorMateria.get(i.id)?.add(t)}}catch(d){console.error("Error al alternar asignaci\xF3n:",d);let p=d,b=(p?.error?.message??p?.message??"").toString().trim();b?this._tools.MostrarMensaje("error",b):this._tools.MostrarMensajeError()}finally{this.isLoadingMateria[i.id]=!1,this.recalcularConteosDocentes()}})}quitarAsignacionTabla(i){return Xe(this,null,function*(){if(!this.docenteSeleccionadoDemo)return;let e=this.materiasDemo.find(t=>t.id===i);e&&(yield this.toggleAsignacionDemo(e))})}tablaAsignacionesDemo(){let i=this.docenteSeleccionadoDemo;if(!i)return[];let e=this.asignacionesDemo.get(i.id)??new Set,t=[];for(let a of e){let d=this.materiasDemo.find(p=>p.id===a);d&&t.push({materiaId:d.id,docente:i.nombre,materia:`${d.sigla?d.sigla+" - ":""}${d.nombre}`,categoria:d.categoria,paralelo:d.paralelo||"-"})}return t}};Te.\u0275fac=function(e){return new(e||Te)(S(qe),S(J),S(xt),S(Qe),S(X),S(Ee),S(Q))},Te.\u0275cmp=G({type:Te,selectors:[["app-asignadormaterias"]],standalone:!1,decls:61,vars:17,consts:[[1,"container","mt-4"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"card"],[1,"row","align-items-end","g-2","mb-2"],[1,"col-sm-3"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-calendar"],[1,"form-floating","flex-grow-1"],["id","filtroAnio",1,"form-select",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","filtroAnio"],[1,"bi","bi-bookmark"],["id","filtroResolucion",1,"form-select",3,"ngModelChange","change","ngModel"],["for","filtroResolucion"],[1,"button","col-sm-6","d-flex","justify-content-end"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","width","30px","height","30px"],["width","50px","height","50px",3,"options"],[1,"dir-part"],[1,"card-body"],["class","card mb-3",4,"ngIf"],[1,"row","align-items-end","g-2"],[1,"col-sm-12"],[1,"bi","bi-search"],["type","text","placeholder","Buscar docente",1,"form-control",3,"input","value"],[1,"mt-2","d-flex","flex-wrap","gap-2"],["class","btn btn-outline-secondary btn-sm",3,"active","disabled","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mt-2"],["class","text-muted",4,"ngIf"],["class","text-primary",4,"ngIf"],[1,"col-sm-4","d-flex","justify-content-end","gap-2"],[1,"form-check","mt-2"],["type","checkbox","id","toggleModo",1,"form-check-input",3,"change"],["for","toggleModo",1,"form-check-label"],["class","row mb-2",4,"ngIf"],[4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"card","mb-3"],[1,"card-header","d-flex","align-items-center","justify-content-between","flex-wrap","gap-2","text-danger"],["type","text","placeholder","Buscar docente pendiente",1,"form-control",3,"input","value"],[1,"table-responsive"],[1,"table","table-sm","table-striped","align-middle","mb-0"],[2,"width","140px"],[2,"width","120px"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","button",1,"btn","btn-sm","btn-outline-success",3,"click","disabled"],["colspan","3",1,"text-center","py-3"],[1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"text-muted"],[1,"text-primary"],[1,"row","mb-2"],["id","filtroAnioTabla",1,"form-select",3,"ngModelChange","change","ngModel"],["for","filtroAnioTabla"],[1,"col-sm-3","mt-2","mt-sm-0"],["id","filtroResolucionTabla",1,"form-select",3,"ngModelChange","change","ngModel"],["for","filtroResolucionTabla"],[1,"col-sm-6"],[1,"bi","bi-filter"],["type","text","placeholder","Buscar materia",1,"form-control",3,"input","value"],[1,"col-sm-6","d-flex","justify-content-end","flex-wrap","gap-2","mt-2","mt-sm-0"],[1,"form-check","mt-1"],["type","checkbox","id","toggleCategorias",1,"form-check-input",3,"change","checked"],["for","toggleCategorias",1,"form-check-label"],[1,"d-flex","align-items-center","flex-wrap","gap-1"],[1,"text-muted","me-1"],["type","button","class","btn btn-outline-primary btn-sm",3,"active","click",4,"ngFor","ngForOf"],["type","button","class","btn btn-outline-secondary btn-sm",3,"active","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[4,"ngFor","ngForOf"],[1,"text-center","mt-3"],[1,"d-flex","flex-wrap"],["class","list-group-item col-sm-3 custom-border position-relative",3,"ngClass",4,"ngFor","ngForOf"],[1,"list-group-item","col-sm-3","custom-border","position-relative",3,"ngClass"],["type","button",1,"btn","btn-sm","w-100","text-start",3,"click","disabled"],[1,"me-2","badge",3,"ngClass"],["class","small text-muted mt-1",4,"ngIf"],["class","spinner-border spinner-border-sm text-primary position-absolute top-50 start-50 translate-middle","role","status",4,"ngIf"],[1,"small","text-muted","mt-1"],["role","status",1,"spinner-border","spinner-border-sm","text-primary","position-absolute","top-50","start-50","translate-middle"],[1,"visually-hidden"],[1,"table","align-middle","table-hover","table-sm"],[1,"table-group-divider"],["colspan","6",1,"text-center","text-muted"],[1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],["colspan","6",1,"text-center"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),c(4,"Asignador de MATERIAS - DOCENTES"),n()()()(),o(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"span",8),C(10,"i",9),n(),o(11,"div",10)(12,"select",11),M("ngModelChange",function(d){return y(t.filtroAnioId,d)||(t.filtroAnioId=d),d}),g("change",function(){return t.onCambioFiltrosAsignacion()}),o(13,"option",12),c(14,"-- Seleccione --"),n(),f(15,jn,2,2,"option",13),n(),o(16,"label",14),c(17,"A\xF1o (Gesti\xF3n)"),n()()()(),o(18,"div",6)(19,"div",7)(20,"span",8),C(21,"i",15),n(),o(22,"div",10)(23,"select",16),M("ngModelChange",function(d){return y(t.filtroResolucionKey,d)||(t.filtroResolucionKey=d),d}),g("change",function(){return t.onCambioFiltrosAsignacion()}),o(24,"option",12),c(25,"-- Seleccione --"),n(),f(26,Gn,2,2,"option",13),n(),o(27,"label",17),c(28,"Resoluci\xF3n"),n()()()(),o(29,"div",18)(30,"button",19),g("click",function(){return t.togglePendientesDocentes()}),o(31,"span",20),C(32,"ng-lottie",21),n(),o(33,"span"),c(34),n(),C(35,"span",22),n()()(),o(36,"div",23),f(37,$n,25,4,"div",24),o(38,"div",25)(39,"div",26)(40,"div",7)(41,"span",8),C(42,"i",27),n(),o(43,"div",10)(44,"input",28),g("input",function(d){return t.filterDocente=d.target.value}),n(),o(45,"label"),c(46,"Buscar docente (nombre o ID)"),n()()(),o(47,"div",29),f(48,Un,4,6,"button",30),n(),o(49,"div",31),f(50,Hn,2,0,"small",32)(51,Wn,4,1,"h3",33),n()(),o(52,"div",34)(53,"div",35)(54,"input",36),g("change",function(d){return t.onToggleChange(d)}),n(),o(55,"label",37),c(56,"Modo tabla"),n()()()(),C(57,"hr"),f(58,Qn,23,6,"div",38)(59,co,25,6,"div",39)(60,_o,20,3,"div",40),n()()),e&2&&(s(12),E("ngModel",t.filtroAnioId),s(),l("ngValue",null),s(2),l("ngForOf",t.aniosOptions),s(8),E("ngModel",t.filtroResolucionKey),s(),l("ngValue",""),s(2),l("ngForOf",t.resolucionOptions),s(6),l("options",t._tools.optionseye),s(2),w("",t.verPendientesDocentes?"Ocultar pendientes":"Ver docentes pendientes de asignaci\xF3n"," "),s(3),l("ngIf",t.verPendientesDocentes),s(7),l("value",t.filterDocente),s(4),l("ngForOf",t.docentesFiltradosDemo())("ngForTrackBy",t.trackById),s(2),l("ngIf",!t.docenteSeleccionadoDemo),s(),l("ngIf",t.docenteSeleccionadoDemo),s(7),l("ngIf",t.ModoBoolean),s(),l("ngIf",!t.ModoBoolean),s(),l("ngIf",t.ModoBoolean))},dependencies:[B,z,$,q,K,W,U,H,Y],styles:[".wrap[_ngcontent-%COMP%]{padding:16px}.head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.card[_ngcontent-%COMP%]{border:1px solid #e6e6e6;border-radius:10px;padding:12px;background:#fff}.card.full[_ngcontent-%COMP%]{grid-column:1/-1}.row3[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr}.row4[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr auto}.lbl[_ngcontent-%COMP%]{font-size:12px;color:#444;margin-bottom:6px}.inp[_ngcontent-%COMP%]{width:100%;padding:8px 10px;border:1px solid #dadada;border-radius:8px}.inp.mini[_ngcontent-%COMP%]{padding:6px 8px}.actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end}button[_ngcontent-%COMP%]{padding:8px 10px;border:1px solid #dadada;border-radius:8px;background:#fafafa;cursor:pointer}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.danger[_ngcontent-%COMP%]{border-color:#ffb4b4;background:#fff5f5}.muted[_ngcontent-%COMP%]{opacity:.8}.hint[_ngcontent-%COMP%]{margin-top:8px;font-size:12px;color:#666}.msg[_ngcontent-%COMP%]{margin:10px 0;padding:10px 12px;border-radius:10px}.msg.err[_ngcontent-%COMP%]{background:#fff5f5;border:1px solid #ffb4b4;color:#7a0012}.msg.ok[_ngcontent-%COMP%]{background:#f3fff5;border:1px solid #a7f3b6;color:#0b4b1f}.chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}.chip[_ngcontent-%COMP%]{border-radius:999px}.chip.on[_ngcontent-%COMP%]{border-color:#2563eb;background:#eaf1ff}.table[_ngcontent-%COMP%]{margin-top:8px;overflow:auto}.tr[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 220px 1fr 110px 160px 1fr 210px;gap:8px;align-items:center;padding:8px;border-top:1px solid #f0f0f0}.th[_ngcontent-%COMP%]{font-weight:700;background:#fafafa;border-top:none;position:sticky;top:0}.mono[_ngcontent-%COMP%]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.custom-border[_ngcontent-%COMP%]{border:1px solid #e6e6e6;border-radius:10px;padding:8px;background:#fff}.custom-border[_ngcontent-%COMP%]:hover{border-color:#2563eb;background:#eaf1ff}.checked[_ngcontent-%COMP%]{border-color:#22c55e!important;background:#f3fff5}.list-group-item[_ngcontent-%COMP%]{cursor:pointer}.btn.active[_ngcontent-%COMP%]{border-color:#2563eb;background:#eaf1ff;color:#0300a3;font-weight:700}@media (max-width: 1100px){.grid[_ngcontent-%COMP%], .row[_ngcontent-%COMP%], .row3[_ngcontent-%COMP%], .row4[_ngcontent-%COMP%]{grid-template-columns:1fr}.tr[_ngcontent-%COMP%]{grid-template-columns:70px 1fr}.th[_ngcontent-%COMP%]{display:none}}"]});var Ye=Te;var go=[{path:"carreras",component:Me},{path:"materias",component:Ie},{path:"plandeestudios",component:Ke},{path:"asignadormaterias",component:Ye}],ce=class ce{};ce.\u0275fac=function(e){return new(e||ce)},ce.\u0275mod=je({type:ce}),ce.\u0275inj=ke({imports:[nt.forChild(go),nt]});var Je=ce;var de=class de{};de.\u0275fac=function(e){return new(e||de)},de.\u0275mod=je({type:de}),de.\u0275inj=ke({imports:[pt,Ct,ft,Je]});var yt=de;export{Ye as a,yt as b};
