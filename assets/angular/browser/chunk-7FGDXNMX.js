import{a as Pe,b as Rt}from"./chunk-JYEWOYFW.js";import{a as rt,b as lt}from"./chunk-OP3XF47H.js";import{a as Pt}from"./chunk-44R4R5AU.js";import{a as Vt,b as ct,c as Nt}from"./chunk-PDJTQLYJ.js";import{a as kt}from"./chunk-3KLMOQKQ.js";import{a as dt,b as Ft}from"./chunk-JD6BS3PO.js";import{a as Mt}from"./chunk-MYCZOKUI.js";import{a as Me}from"./chunk-AINANROM.js";import{a as Te}from"./chunk-GKBKEJCN.js";import{a as wt}from"./chunk-633ZKBKW.js";import{a as ot}from"./chunk-SDTEYBFQ.js";import{a as Tt}from"./chunk-YJY6DP6Y.js";import{a as nt}from"./chunk-XILPAHEE.js";import{a as we}from"./chunk-SVDENQU6.js";import{b as ye}from"./chunk-ZODOWL6N.js";import{b as At}from"./chunk-ZPE3UOEJ.js";import{b as Ie}from"./chunk-IOMHTJQE.js";import"./chunk-GXCTSUUI.js";import{a as st,b as It}from"./chunk-R7WDWIDH.js";import"./chunk-NCIXDP2C.js";import{g as Ke,k as vt}from"./chunk-O3DH7IF3.js";import{a as Zt,b as Ae}from"./chunk-L3EZDEDO.js";import{g as at}from"./chunk-XJCOF3T3.js";import{b as Ye,c as Xe,e as St,f as ve,g as Ze,j as je,k as Ee,l as Je,m as et,o as yt,p as tt,q as it,r as be,s as Ce,t as Se}from"./chunk-RY6BQWSI.js";import{a as xe}from"./chunk-JISGPZ2J.js";import{$b as N,Aa as F,Bb as D,Cb as L,Da as ze,Db as j,Dc as _e,Ea as r,F as $e,Fc as fe,Gb as z,Gc as ge,Hb as ce,Hc as We,Ib as G,Jc as Qe,Lb as c,Ma as P,Mb as E,Nb as I,Ob as J,Oc as bt,Pb as He,Ra as me,Sa as qe,Sb as Et,Tb as w,Ub as M,Vb as T,Wa as h,Wc as he,Xb as De,Zb as ae,_ as Ge,_b as pe,ab as U,ac as Le,bb as ht,bd as Ct,db as xt,dc as W,ec as Q,ga as p,ha as _,hc as V,ib as d,jb as o,k as le,kb as a,lb as x,pb as te,q as Be,qb as ie,ra as Ue,sb as b,vb as g,w as gt,xb as u,za as k}from"./chunk-K6WFP5KF.js";import{a as Z,b as ne,f as ft,m as $}from"./chunk-GG76335P.js";var Yt=ft(Pt());var Qt=ft(Pt());var H=ft(Zt());var ti=(s,t)=>({border:s,"border-primary":t}),Ht=s=>({checked:s,"custom-border":!0}),ii=()=>({standalone:!0});function ni(s,t){s&1&&(o(0,"div",27)(1,"div",28)(2,"h1",29),c(3,"Asignador de Materias - ESTUDIANTES"),a(),o(4,"p",30),c(5,"Asigne materias a estudiantes de manera sencilla y eficiente"),a()()())}function ai(s,t){if(s&1&&x(0,"img",42),s&2){let e=u(2);d("src",e._tools.ruta+e.fotoEstudiante,F)}}function si(s,t){if(s&1&&x(0,"ng-lottie",43),s&2){let e=u(2);d("options",e.sexoEstudiante==="MASCULINO"?e._tools.optionsavatarmasculinoanimado:e._tools.optionsavatarfemenino2)}}function oi(s,t){if(s&1&&(o(0,"span",44),c(1),a()),s&2){let e=u(2);r(),I("ID: ",e.estudianteId)}}function ri(s,t){if(s&1&&(o(0,"span",45),c(1),a()),s&2){let e=u(2);r(),I("Inscripci\xF3n: #",e.preferInfoId)}}function li(s,t){if(s&1&&(o(0,"div",27)(1,"div",31)(2,"div",32)(3,"div",33)(4,"div",34),h(5,ai,1,1,"img",35)(6,si,1,1,"ng-lottie",36),a(),o(7,"div")(8,"div",37),c(9,"Estudiante seleccionado"),a(),o(10,"div",38),c(11),a()()(),o(12,"div",39),h(13,oi,2,1,"span",40)(14,ri,2,1,"span",41),a()()()()),s&2){let e=u();r(5),d("ngIf",e.fotoEstudiante),r(),d("ngIf",!e.fotoEstudiante),r(5),E(e.nombreEstudiante||(e.estudianteSeleccionado==null?null:e.estudianteSeleccionado.nombre)),r(2),d("ngIf",e.estudianteId),r(),d("ngIf",e.preferInfoId)}}function ci(s,t){if(s&1&&(o(0,"option",14),c(1),a()),s&2){let e=t.$implicit;d("ngValue",e.id),r(),E(e.Anio)}}function di(s,t){if(s&1&&(o(0,"option",14),c(1),a()),s&2){let e=t.$implicit;d("ngValue",e.key),r(),E(e.label)}}function ui(s,t){if(s&1&&(o(0,"small",64),x(1,"ng-lottie",65),o(2,"span"),c(3,"Cargando..."),a()()),s&2){let e=u(2);r(),d("options",e._tools.optionsengranaje)}}function mi(s,t){if(s&1&&x(0,"ng-lottie",65),s&2){let e=u(2);d("options",e._tools.optionslupa)}}function pi(s,t){if(s&1){let e=b();o(0,"div",66)(1,"button",67),g("click",function(){p(e);let i=u(2);return _(i.pendPrev())}),c(2,"Anterior"),a(),o(3,"small",68),c(4),a(),o(5,"button",67),g("click",function(){p(e);let i=u(2);return _(i.pendNext())}),c(6,"Siguiente"),a()()}if(s&2){let e=u(2);r(),d("disabled",!e.pendTienePrev()||e.isLoadingPendientes),r(3),He(" P\xE1gina ",e.pendMeta.current_page," / ",e.pendMeta.last_page," (",e.pendMeta.total," resultados) "),r(),d("disabled",!e.pendTieneNext()||e.isLoadingPendientes)}}function _i(s,t){s&1&&(o(0,"th"),c(1,"Instituci\xF3n"),a())}function fi(s,t){if(s&1&&(o(0,"tr")(1,"td",69)(2,"div",70),x(3,"ng-lottie",71),o(4,"span",68),c(5,"Cargando pendientes..."),a()()()()),s&2){let e=u(2);r(),U("colspan",e.esSuperAdmin?10:9),r(2),d("options",e._tools.optionsengranaje)}}function gi(s,t){if(s&1&&(o(0,"td"),c(1),a()),s&2){let e=u().$implicit;r(),E(e.NombreInstitucion||"-")}}function hi(s,t){if(s&1){let e=b();o(0,"tr",72)(1,"td"),c(2),a(),o(3,"td"),c(4),a(),h(5,gi,2,1,"td",26),o(6,"td"),c(7),a(),o(8,"td"),c(9),a(),o(10,"td"),c(11),a(),o(12,"td"),c(13),a(),o(14,"td"),c(15),a(),o(16,"td"),c(17),a(),o(18,"td")(19,"button",73),g("click",function(){let i=p(e).$implicit,l=u(2);return _(l.seleccionarPendiente(i))}),c(20," Asignar "),a()()()}if(s&2){let e=t.$implicit,n=u(2);d("hidden",n.isLoadingPendientes),r(2),I("#",e.id),r(2),E(e.FechInsc||"-"),r(),d("ngIf",n.esSuperAdmin),r(2),He("",e.Ap_Paterno," ",e.Ap_Materno," ",e.Nombre),r(2),E(e.CI||"-"),r(2),E(e.Matricula||"-"),r(2),E(e.Curso_Solicitado||"-"),r(2),E(e.Paralelo_Solicitado||"-"),r(2),E(e.Turno||"-")}}function xi(s,t){if(s&1&&(o(0,"tr")(1,"td",69),c(2,"Sin registros"),a()()),s&2){let e=u(2);r(),U("colspan",e.esSuperAdmin?10:9)}}function vi(s,t){if(s&1){let e=b();o(0,"div",46)(1,"div",47)(2,"span"),c(3,"Inscritos pendientes de asignaci\xF3n (sin materias asignadas)"),a(),h(4,ui,4,1,"small",48),a(),o(5,"div",6)(6,"div",49)(7,"div",50)(8,"div",9)(9,"span",10),x(10,"i",51),a(),o(11,"div",12)(12,"input",52),g("input",function(i){p(e);let l=u();return _(l.filterPendientes=i.target.value)})("keyup.enter",function(){p(e);let i=u();return _(i.cargarPendientes(1))}),a(),o(13,"label"),c(14,"Buscar (nombre/CI/matr\xEDcula/curso/paralelo/turno)"),a()(),o(15,"button",53),g("click",function(){p(e);let i=u();return _(i.cargarPendientes(1))}),o(16,"span",54),h(17,mi,1,1,"ng-lottie",55),o(18,"span"),c(19),a()()()(),h(20,pi,7,5,"div",56),a(),o(21,"div",57)(22,"label",58),c(23,"Total pendientes"),a(),x(24,"input",59),a()()(),o(25,"div",60)(26,"table",61)(27,"thead")(28,"tr")(29,"th"),c(30,"Inscripci\xF3n"),a(),o(31,"th"),c(32,"Fecha inscripci\xF3n"),a(),h(33,_i,2,0,"th",26),o(34,"th"),c(35,"Estudiante"),a(),o(36,"th"),c(37,"CI"),a(),o(38,"th"),c(39,"Matr\xEDcula"),a(),o(40,"th"),c(41,"Curso solicitado"),a(),o(42,"th"),c(43,"Paralelo"),a(),o(44,"th"),c(45,"Turno"),a(),o(46,"th",62),c(47,"Acci\xF3n"),a()()(),o(48,"tbody"),h(49,fi,6,2,"tr",26)(50,hi,21,12,"tr",63)(51,xi,3,1,"tr",26),a()()()()}if(s&2){let e=u();r(4),d("ngIf",e.isLoadingPendientes),r(8),d("value",e.filterPendientes),r(3),d("disabled",e.isLoadingPendientes),r(2),d("ngIf",e.isLoadingPendientes),r(2),E(e.isLoadingPendientes?"Buscando...":"Buscar"),r(),d("ngIf",e.pendMeta),r(4),d("value",(e.pendMeta==null?null:e.pendMeta.total)||0),r(9),d("ngIf",e.esSuperAdmin),r(16),d("ngIf",e.isLoadingPendientes),r(),d("ngForOf",e.pendientes),r(),d("ngIf",e.pendientes.length===0&&!e.isLoadingPendientes)}}function Ei(s,t){if(s&1&&x(0,"ng-lottie",65),s&2){let e=u(2);d("options",e._tools.optionslupa)}}function bi(s,t){if(s&1&&(o(0,"small",86),x(1,"ng-lottie",65),o(2,"span"),c(3,"Buscando..."),a()()),s&2){let e=u(2);r(),d("options",e._tools.optionslupa)}}function Ci(s,t){if(s&1){let e=b();o(0,"div",66)(1,"button",87),g("click",function(){p(e);let i=u(2);return _(i.estPrev())}),c(2,"Anterior"),a(),o(3,"small",68),c(4),a(),o(5,"button",87),g("click",function(){p(e);let i=u(2);return _(i.estNext())}),c(6,"Siguiente"),a()()}if(s&2){let e=u(2);r(),d("disabled",!e.estTienePrev()||e.isLoadingEstudiantes),r(3),He(" P\xE1gina ",e.estMeta.current_page," / ",e.estMeta.last_page," (",e.estMeta.total," resultados) "),r(),d("disabled",!e.estTieneNext()||e.isLoadingEstudiantes)}}function Si(s,t){if(s&1&&(o(0,"span"),c(1,"CI: "),x(2,"span",89),a()),s&2){let e=u().$implicit,n=u(2);r(2),d("innerHTML",n.highlightHtml(e.ci),k)}}function yi(s,t){if(s&1&&(o(0,"span"),c(1," \xA0|\xA0 Matr\xEDcula: "),x(2,"span",89),a()),s&2){let e=u().$implicit,n=u(2);r(2),d("innerHTML",n.highlightHtml(e.matricula),k)}}function Ii(s,t){if(s&1&&x(0,"span",89),s&2){let e=u().$implicit,n=u(2);d("innerHTML",n.highlightHtml(n.formatoCursoParalelo(e)),k)}}function Ai(s,t){if(s&1&&(o(0,"div",90),c(1),a()),s&2){let e=u().$implicit;r(),I("Instituci\xF3n: ",e.institucionNombre)}}function wi(s,t){if(s&1&&(o(0,"div",90),c(1),a()),s&2){let e=u().$implicit;r(),I("Fecha: ",e.fechInsc)}}function Mi(s,t){if(s&1){let e=b();o(0,"button",88),g("click",function(){let i=p(e).$implicit,l=u(2);return _(l.seleccionarEstudiante(i))}),x(1,"div",89),o(2,"div",90),h(3,Si,3,1,"span",26)(4,yi,3,1,"span",26),a(),o(5,"div",91)(6,"span",92),c(7),a(),h(8,Ii,1,1,"span",93),a(),h(9,Ai,2,1,"div",94)(10,wi,2,1,"div",94),a()}if(s&2){let e=t.$implicit,n=u(2);G("active",n.selectedSearchInfoId&&e.infoId&&n.selectedSearchInfoId===e.infoId),d("disabled",n.isLoadingEstudiantes)("hidden",n.isLoadingEstudiantes),r(),d("innerHTML",n.highlightHtml(e.nombre),k),r(2),d("ngIf",e.ci),r(),d("ngIf",e.matricula),r(3),I("Asignaciones: ",e.cantAsignaciones??0),r(),d("ngIf",n.formatoCursoParalelo(e)),r(),d("ngIf",n.esSuperAdmin&&e.institucionNombre),r(),d("ngIf",e.fechInsc)}}function Ti(s,t){if(s&1){let e=b();o(0,"div",82)(1,"input",95),T("ngModelChange",function(i){p(e);let l=u(2);return M(l.mostrarDetalleCalificaciones,i)||(l.mostrarDetalleCalificaciones=i),_(i)}),a(),o(2,"label",96),c(3,"Detalle"),a()()}if(s&2){let e=u(2);r(),w("ngModel",e.mostrarDetalleCalificaciones)}}function Pi(s,t){if(s&1){let e=b();o(0,"div",49)(1,"div",74)(2,"div",75)(3,"div",76)(4,"span",10),x(5,"i",51),a(),o(6,"div",12)(7,"input",77),g("input",function(i){p(e);let l=u();return _(l.filterEstudiante=i.target.value)})("keyup.enter",function(){p(e);let i=u();return _(i.buscarEstudiantes(1))}),a(),o(8,"label"),c(9,"Buscar estudiante (m\xEDn. 2 caracteres)"),a()(),o(10,"button",53),g("click",function(){p(e);let i=u();return _(i.buscarEstudiantes(1))}),o(11,"span",54),h(12,Ei,1,1,"ng-lottie",55),o(13,"span"),c(14),a()()()()(),h(15,bi,4,1,"small",78)(16,Ci,7,5,"div",56),o(17,"div",79),h(18,Mi,11,11,"button",80),a()(),o(19,"div",81)(20,"div",82)(21,"input",83),g("change",function(i){p(e);let l=u();return _(l.onToggleChange(i))}),a(),o(22,"label",84),c(23,"Modo tabla"),a()(),h(24,Ti,4,1,"div",85),a()()}if(s&2){let e=u();r(7),d("ngClass",N(10,ti,e.isLoadingEstudiantes,e.isLoadingEstudiantes))("value",e.filterEstudiante),r(3),d("disabled",e.isLoadingEstudiantes),r(2),d("ngIf",e.isLoadingEstudiantes),r(2),E(e.isLoadingEstudiantes?"Buscando...":"Buscar"),r(),d("ngIf",e.isLoadingEstudiantes),r(),d("ngIf",e.estMeta),r(2),d("ngForOf",e.estudiantes)("ngForTrackBy",e.trackById),r(6),d("ngIf",e.ModoBoolean)}}function Vi(s,t){if(s&1&&(o(0,"span",103),c(1),a()),s&2){let e=t.$implicit;r(),E(e)}}function Ni(s,t){if(s&1&&(o(0,"div",101)(1,"span",68),c(2,"Materias asignadas en:"),a(),h(3,Vi,2,1,"span",102),a()),s&2){let e=u(2);r(3),d("ngForOf",e.cursosConMateriasAsignadasList)}}function ki(s,t){s&1&&(o(0,"div",101)(1,"span",68),c(2,"Sin materias asignadas (en sus inscripciones)"),a()())}function Fi(s,t){if(s&1&&(te(0),o(1,"div",97)(2,"div",98)(3,"span",44),c(4,"Estudiante"),a(),o(5,"span",99),c(6),a()(),h(7,Ni,4,1,"div",100)(8,ki,3,0,"ng-template",null,2,V),a(),ie()),s&2){let e=z(9),n=u();r(6),E(n.estudianteSeleccionado.nombre),r(),d("ngIf",n.cursosConMateriasAsignadasList.length>0)("ngIfElse",e)}}function Ri(s,t){if(s&1&&(o(0,"small",68),c(1),a()),s&2){let e=u();r(),I(" ",e.modo==="estudiante"?"Cargando estudiante...":"Busca y selecciona un estudiante para continuar."," ")}}function Oi(s,t){if(s&1&&(o(0,"div",107),x(1,"ng-lottie",108),o(2,"span"),c(3,"Cargando inscripciones..."),a()()),s&2){let e=u(2);r(),d("options",e._tools.optionsengranaje)}}function Di(s,t){s&1&&(o(0,"small",68),c(1,"Sin inscripciones."),a())}function Li(s,t){s&1&&(o(0,"h3",68),c(1,"Seleccione una inscripci\xF3n."),a())}function ji(s,t){if(s&1){let e=b();o(0,"div",109)(1,"h4",110),c(2," CURSO SOLICITADO: "),o(3,"b"),c(4),a()(),o(5,"button",111),g("click",function(){p(e);let i=u(2),l=z(42);return _(i._tools.openModal(l,"xl"))}),x(6,"ng-lottie",108),o(7,"span"),c(8,"Historial"),a()()()}if(s&2){let e=u(2);r(4),J("",e.inscripcionSeleccionada.Curso_Solicitado||"-"," ",e.inscripcionSeleccionada.Paralelo_Solicitado?"- "+e.inscripcionSeleccionada.Paralelo_Solicitado:""),r(),d("disabled",!e.ciEstudianteNumerico()),r(),d("options",e._tools.optionsAdicionar)}}function Bi(s,t){if(s&1&&(o(0,"div")(1,"div",24),h(2,Oi,4,1,"div",104)(3,Di,2,0,"small",105)(4,Li,2,0,"h3",105)(5,ji,9,4,"div",106),a()()),s&2){let e=u();r(2),d("ngIf",e.isLoadingInscripciones),r(),d("ngIf",!e.isLoadingInscripciones&&e.inscripciones.length===0),r(),d("ngIf",!e.isLoadingInscripciones&&e.inscripciones.length>0&&!e.inscripcionSeleccionada),r(),d("ngIf",e.inscripcionSeleccionada)}}function $i(s,t){s&1&&x(0,"hr")}function Gi(s,t){if(s&1){let e=b();o(0,"div",117)(1,"input",118),T("ngModelChange",function(i){p(e);let l=u(3);return M(l.mostrarDetalleCalificaciones,i)||(l.mostrarDetalleCalificaciones=i),_(i)}),a(),o(2,"label",119),c(3,"Detalle"),a()()}if(s&2){let e=u(3);r(),w("ngModel",e.mostrarDetalleCalificaciones)}}function Ui(s,t){if(s&1){let e=b();o(0,"button",120),g("click",function(){p(e);let i=u(3);return _(i.abrirOpcionesAsignacion())}),c(1," Asignar... "),a()}}function zi(s,t){if(s&1&&(o(0,"div",114)(1,"div",68)(2,"b"),c(3,"Calificaciones"),a(),c(4," de materias asignadas (vista r\xE1pida) "),a(),o(5,"div",33),h(6,Gi,4,1,"div",115)(7,Ui,2,0,"button",116),a()()),s&2){let e=u(2);r(6),d("ngIf",!e.mostrarOpcionesAsignacion),r(),d("ngIf",!e.mostrarOpcionesAsignacion)}}function qi(s,t){s&1&&(o(0,"th",123),c(1,"T1"),a())}function Hi(s,t){s&1&&(o(0,"th",123),c(1,"T2"),a())}function Wi(s,t){s&1&&(o(0,"th",123),c(1,"T3"),a())}function Qi(s,t){s&1&&(o(0,"th",123),c(1,"T4"),a())}function Ki(s,t){s&1&&(o(0,"th",123),c(1,"P1"),a())}function Yi(s,t){s&1&&(o(0,"th",123),c(1,"P2"),a())}function Xi(s,t){s&1&&(o(0,"th",123),c(1,"P3"),a())}function Zi(s,t){s&1&&(o(0,"th",123),c(1,"P4"),a())}function Ji(s,t){if(s&1&&(o(0,"tr")(1,"td",125)(2,"div",70),x(3,"ng-lottie",71),o(4,"span",68),c(5,"Cargando calificaciones..."),a()()()()),s&2){let e=u(3);r(),U("colspan",e.mostrarDetalleCalificaciones?15:7),r(2),d("options",e._tools.optionsengranaje)}}function en(s,t){if(s&1&&(o(0,"tr")(1,"td",127),c(2,"Sin asignaciones"),a()()),s&2){let e=u(4);r(),U("colspan",e.mostrarDetalleCalificaciones?15:7)}}function tn(s,t){if(s&1&&(o(0,"div",129),c(1),a()),s&2){let e=u().$implicit,n=u(4);r(),I(" ",n.materiaMetaSmall(e.materiaId)," ")}}function nn(s,t){if(s&1&&(o(0,"td",123),c(1),a()),s&2){let e=u().$implicit,n=u(4);r(),E(n.califValor(e.materiaId,"Teorico1"))}}function an(s,t){if(s&1&&(o(0,"td",123),c(1),a()),s&2){let e=u().$implicit,n=u(4);r(),E(n.califValor(e.materiaId,"Teorico2"))}}function sn(s,t){if(s&1&&(o(0,"td",123),c(1),a()),s&2){let e=u().$implicit,n=u(4);r(),E(n.califValor(e.materiaId,"Teorico3"))}}function on(s,t){if(s&1&&(o(0,"td",123),c(1),a()),s&2){let e=u().$implicit,n=u(4);r(),E(n.califValor(e.materiaId,"Teorico4"))}}function rn(s,t){if(s&1&&(o(0,"td",123),c(1),a()),s&2){let e=u().$implicit,n=u(4);r(),E(n.califValor(e.materiaId,"Practico1"))}}function ln(s,t){if(s&1&&(o(0,"td",123),c(1),a()),s&2){let e=u().$implicit,n=u(4);r(),E(n.califValor(e.materiaId,"Practico2"))}}function cn(s,t){if(s&1&&(o(0,"td",123),c(1),a()),s&2){let e=u().$implicit,n=u(4);r(),E(n.califValor(e.materiaId,"Practico3"))}}function dn(s,t){if(s&1&&(o(0,"td",123),c(1),a()),s&2){let e=u().$implicit,n=u(4);r(),E(n.califValor(e.materiaId,"Practico4"))}}function un(s,t){if(s&1&&(o(0,"tr",72)(1,"td"),c(2),a(),o(3,"td")(4,"div"),c(5),a(),h(6,tn,2,1,"div",128),a(),h(7,nn,2,1,"td",122)(8,an,2,1,"td",122)(9,sn,2,1,"td",122)(10,on,2,1,"td",122)(11,rn,2,1,"td",122)(12,ln,2,1,"td",122)(13,cn,2,1,"td",122)(14,dn,2,1,"td",122),o(15,"td",123),c(16),a(),o(17,"td",123),c(18),a(),o(19,"td",123),c(20),a(),o(21,"td",123),c(22),a(),o(23,"td"),c(24),a()()),s&2){let e=t.$implicit,n=t.index,i=u(4);d("hidden",i.isLoadingAsignaciones),r(2),E(n+1),r(3),E(e.materia),r(),d("ngIf",i.materiaMetaSmall(e.materiaId)),r(),d("ngIf",i.mostrarDetalleCalificaciones),r(),d("ngIf",i.mostrarDetalleCalificaciones),r(),d("ngIf",i.mostrarDetalleCalificaciones),r(),d("ngIf",i.mostrarDetalleCalificaciones),r(),d("ngIf",i.mostrarDetalleCalificaciones),r(),d("ngIf",i.mostrarDetalleCalificaciones),r(),d("ngIf",i.mostrarDetalleCalificaciones),r(),d("ngIf",i.mostrarDetalleCalificaciones),r(2),E(i.califValor(e.materiaId,"PromTeorico")),r(2),E(i.califValor(e.materiaId,"PromPractico")),r(2),E(i.califValor(e.materiaId,"Promedio")),r(2),E(i.califValor(e.materiaId,"PruebaRecuperacion")),r(2),E(i.estadoRegistroMateria(e.materiaId))}}function mn(s,t){if(s&1&&(te(0),h(1,en,3,1,"tr",26)(2,un,25,17,"tr",126),ie()),s&2){let e=t.ngIf,n=u(3);r(),d("ngIf",!n.isLoadingAsignaciones&&e.length===0),r(),d("ngForOf",e)("ngForTrackBy",n.trackByMateriaId)}}function pn(s,t){if(s&1&&(o(0,"div",60)(1,"table",121)(2,"thead")(3,"tr")(4,"th"),c(5,"#"),a(),o(6,"th"),c(7,"Materia"),a(),h(8,qi,2,0,"th",122)(9,Hi,2,0,"th",122)(10,Wi,2,0,"th",122)(11,Qi,2,0,"th",122)(12,Ki,2,0,"th",122)(13,Yi,2,0,"th",122)(14,Xi,2,0,"th",122)(15,Zi,2,0,"th",122),o(16,"th",123),c(17,"PromT"),a(),o(18,"th",123),c(19,"PromP"),a(),o(20,"th",123),c(21,"Prom"),a(),o(22,"th",123),c(23,"Rec"),a(),o(24,"th"),c(25,"Estado"),a()()(),o(26,"tbody",124),h(27,Ji,6,2,"tr",26)(28,mn,3,3,"ng-container",26),a()()()),s&2){let e=u(2);r(8),d("ngIf",e.mostrarDetalleCalificaciones),r(),d("ngIf",e.mostrarDetalleCalificaciones),r(),d("ngIf",e.mostrarDetalleCalificaciones),r(),d("ngIf",e.mostrarDetalleCalificaciones),r(),d("ngIf",e.mostrarDetalleCalificaciones),r(),d("ngIf",e.mostrarDetalleCalificaciones),r(),d("ngIf",e.mostrarDetalleCalificaciones),r(),d("ngIf",e.mostrarDetalleCalificaciones),r(12),d("ngIf",e.isLoadingAsignaciones),r(),d("ngIf",e.tablaAsignacionesRows)}}function _n(s,t){if(s&1&&(o(0,"div",153)(1,"div",107),x(2,"ng-lottie",108),o(3,"span"),c(4,"Cargando materias/asignaciones..."),a()()()),s&2){let e=u(4);r(2),d("options",e._tools.optionsengranaje)}}function fn(s,t){if(s&1&&(o(0,"option",14),c(1,"REGULAR"),a()),s&2){let e=u(4);d("ngValue",e.tipoRegistroMateria)}}function gn(s,t){if(s&1&&(o(0,"option",154),c(1),a()),s&2){let e=t.$implicit;d("ngValue",e.value)("disabled",e.disabled),r(),E(e.label)}}function hn(s,t){if(s&1){let e=b();o(0,"button",21),g("click",function(){let i=p(e).$implicit,l=u(4);return _(l.toggleLvlCurso(i))}),c(1),a()}if(s&2){let e=t.$implicit,n=u(4);G("active",n.isLvlCursoSeleccionado(e)),r(),I(" ",e," ")}}function xn(s,t){if(s&1){let e=b();o(0,"button",155),g("click",function(){let i=p(e).$implicit,l=u(4);return _(l.toggleParalelo(i))}),c(1),a()}if(s&2){let e=t.$implicit,n=u(4);G("active",n.isParaleloSeleccionado(e)),r(),I(" ",e," ")}}function vn(s,t){if(s&1&&x(0,"ng-lottie",65),s&2){let e=u(5);d("options",e._tools.optionsengranaje)}}function En(s,t){if(s&1){let e=b();o(0,"button",156),g("click",function(){p(e);let i=u(4);return _(i.asignarCursoCompleto())}),o(1,"span",54),h(2,vn,1,1,"ng-lottie",55),o(3,"span"),c(4),a()()()}if(s&2){let e=u(4);d("disabled",e.isBulkLoading),r(2),d("ngIf",e.isBulkLoading),r(2),E(e.isBulkLoading?"Procesando...":"Asignar todo (A\xF1o/Resoluci\xF3n)")}}function bn(s,t){if(s&1&&x(0,"ng-lottie",65),s&2){let e=u(5);d("options",e._tools.optionsengranaje)}}function Cn(s,t){if(s&1){let e=b();o(0,"button",157),g("click",function(){p(e);let i=u(4);return _(i.quitarTodasAsignaciones())}),o(1,"span",54),h(2,bn,1,1,"ng-lottie",55),o(3,"span"),c(4),a()()()}if(s&2){let e=u(4);d("disabled",e.isBulkLoading),r(2),d("ngIf",e.isBulkLoading),r(2),E(e.isBulkLoading?"Procesando...":"Quitar todas")}}function Sn(s,t){if(s&1&&x(0,"ng-lottie",65),s&2){let e=u(6);d("options",e._tools.optionsengranaje)}}function yn(s,t){if(s&1&&x(0,"ng-lottie",65),s&2){let e=u(6);d("options",e._tools.optionsengranaje)}}function In(s,t){if(s&1&&(o(0,"span"),c(1),a()),s&2){let e=u().$implicit;r(),E(e.lvlCurso)}}function An(s,t){if(s&1&&(o(0,"span"),c(1),a()),s&2){let e=u().$implicit;r(),I(" - ",e.paralelo)}}function wn(s,t){s&1&&(o(0,"span",176),c(1,"Tiene calificaciones"),a())}function Mn(s,t){s&1&&(o(0,"span",176),c(1,"Sin calificaciones"),a())}function Tn(s,t){if(s&1){let e=b();o(0,"div",172)(1,"div",173)(2,"span")(3,"b"),c(4,"Calificaciones:"),a(),h(5,wn,2,0,"span",174)(6,Mn,2,0,"span",174),a(),o(7,"span",175)(8,"b"),c(9,"Tipo de registro:"),a(),o(10,"span",176),c(11),a()()(),o(12,"button",177),g("click",function(i){p(e);let l=u().$implicit,m=u(6);return _(m.verCalificaciones(l,i))}),c(13," Ver "),a()()}if(s&2){let e=u().$implicit,n=u(6);r(5),d("ngIf",n.tieneCalificaciones(e.id)),r(),d("ngIf",!n.tieneCalificaciones(e.id)),r(5),E(n.estadoRegistroMateria(e.id)),r(),d("disabled",!n.tieneCalificaciones(e.id))}}function Pn(s,t){if(s&1&&(o(0,"div",178),x(1,"ng-lottie",71),a()),s&2){let e=u(7);r(),d("options",e._tools.optionsengranaje)}}function Vn(s,t){if(s&1){let e=b();o(0,"div",166)(1,"button",167),g("click",function(i){let l=p(e).$implicit,m=u(6);return _(m.toggleAsignacion(l,i))}),o(2,"span",168),c(3),a(),o(4,"span"),c(5),a()(),o(6,"div",169),h(7,In,2,1,"span",26)(8,An,2,1,"span",26),a(),h(9,Tn,14,4,"div",170)(10,Pn,2,1,"div",171),a()}if(s&2){let e=t.$implicit,n=u(6);d("ngClass",pe(9,Ht,n.isAsignada(e.id))),r(),d("disabled",n.isLoadingMateria[e.id]),r(),d("ngClass",n.isAsignada(e.id)?"bg-success":"bg-secondary"),r(),I(" ",n.isAsignada(e.id)?"ASIGNADO":"NO"," "),r(2),E((e.sigla?e.sigla+" - ":"")+e.nombre),r(2),d("ngIf",e.lvlCurso),r(),d("ngIf",e.paralelo),r(),d("ngIf",n.isAsignada(e.id)),r(),d("ngIf",n.isLoadingMateria[e.id])}}function Nn(s,t){if(s&1){let e=b();o(0,"div")(1,"div",159)(2,"h5",160),c(3),a(),o(4,"div",161)(5,"button",162),g("click",function(i){let l=p(e).$implicit,m=u(5);return _(m.asignarCategoriaCompleta(l,i))}),o(6,"span",54),h(7,Sn,1,1,"ng-lottie",55),o(8,"span"),c(9),a()()(),o(10,"button",163),g("click",function(i){let l=p(e).$implicit,m=u(5);return _(m.quitarCategoriaCompleta(l,i))}),o(11,"span",54),h(12,yn,1,1,"ng-lottie",55),o(13,"span"),c(14),a()()()()(),o(15,"div",164),h(16,Vn,11,11,"div",165),a(),x(17,"hr"),a()}if(s&2){let e=t.$implicit,n=u(5);r(3),E(e),r(2),d("disabled",n.isBulkLoading),r(2),d("ngIf",n.isBulkLoading),r(2),E(n.isBulkLoading?"Procesando...":"Asignar este curso"),r(),d("disabled",n.isBulkLoading),r(2),d("ngIf",n.isBulkLoading),r(2),E(n.isBulkLoading?"Procesando...":"Quitar este curso"),r(2),d("ngForOf",n.materiasPorCategoria(e))("ngForTrackBy",n.trackById)}}function kn(s,t){if(s&1&&(te(0),h(1,Nn,18,9,"div",158),ie()),s&2){let e=u(4);r(),d("ngForOf",e.categorias())}}function Fn(s,t){if(s&1&&(o(0,"span"),c(1),a()),s&2){let e=u().$implicit;r(),E(e.lvlCurso)}}function Rn(s,t){if(s&1&&(o(0,"span"),c(1),a()),s&2){let e=u().$implicit;r(),I(" - ",e.paralelo)}}function On(s,t){if(s&1&&(o(0,"div",90),c(1," Tipo de registro (al asignar): "),o(2,"b"),c(3),a()()),s&2){let e=u(6);r(3),E(e.tipoRegistroMateria||"REGULAR")}}function Dn(s,t){s&1&&(o(0,"span",176),c(1,"Tiene calificaciones"),a())}function Ln(s,t){s&1&&(o(0,"span",176),c(1,"Sin calificaciones"),a())}function jn(s,t){if(s&1){let e=b();o(0,"div",172)(1,"div",173)(2,"span")(3,"b"),c(4,"Calificaciones:"),a(),h(5,Dn,2,0,"span",174)(6,Ln,2,0,"span",174),a(),o(7,"span",175)(8,"b"),c(9,"Tipo de registro:"),a(),o(10,"span",176),c(11),a()()(),o(12,"button",177),g("click",function(i){p(e);let l=u().$implicit,m=u(5);return _(m.verCalificaciones(l,i))}),c(13," Ver "),a()()}if(s&2){let e=u().$implicit,n=u(5);r(5),d("ngIf",n.tieneCalificaciones(e.id)),r(),d("ngIf",!n.tieneCalificaciones(e.id)),r(5),E(n.estadoRegistroMateria(e.id)),r(),d("disabled",!n.tieneCalificaciones(e.id))}}function Bn(s,t){if(s&1&&(o(0,"div",178),x(1,"ng-lottie",71),a()),s&2){let e=u(6);r(),d("options",e._tools.optionsengranaje)}}function $n(s,t){if(s&1){let e=b();o(0,"div",166)(1,"button",167),g("click",function(i){let l=p(e).$implicit,m=u(5);return _(m.toggleAsignacion(l,i))}),o(2,"span",168),c(3),a(),o(4,"span"),c(5),a()(),o(6,"div",169),h(7,Fn,2,1,"span",26)(8,Rn,2,1,"span",26),a(),h(9,On,4,1,"div",94)(10,jn,14,4,"div",170)(11,Bn,2,1,"div",171),a()}if(s&2){let e=t.$implicit,n=u(5);d("ngClass",pe(10,Ht,n.isAsignada(e.id))),r(),d("disabled",n.isLoadingMateria[e.id]),r(),d("ngClass",n.isAsignada(e.id)?"bg-success":"bg-secondary"),r(),I(" ",n.isAsignada(e.id)?"ASIGNADO":"NO"," "),r(2),E((e.sigla?e.sigla+" - ":"")+e.nombre),r(2),d("ngIf",e.lvlCurso),r(),d("ngIf",e.paralelo),r(),d("ngIf",!n.isAsignada(e.id)),r(),d("ngIf",n.isAsignada(e.id)),r(),d("ngIf",n.isLoadingMateria[e.id])}}function Gn(s,t){if(s&1&&(te(0),o(1,"div",164),h(2,$n,12,12,"div",165),a(),ie()),s&2){let e=u(4);r(2),d("ngForOf",e.materiasFiltradas())("ngForTrackBy",e.trackById)}}function Un(s,t){if(s&1){let e=b();o(0,"div"),h(1,_n,5,1,"div",130),o(2,"div",131)(3,"div",132)(4,"div",9)(5,"span",10),x(6,"i",133),a(),o(7,"div",12)(8,"input",134),g("input",function(i){p(e);let l=u(3);return _(l.filterMateria=i.target.value)}),a(),o(9,"label"),c(10,"Buscar materia (sigla/nombre/ID)"),a()()()(),o(11,"div",135)(12,"div",136)(13,"input",137),g("change",function(){p(e);let i=u(3);return _(i.toggleModoCategorias())}),a(),o(14,"label",138),c(15,"Con categor\xEDas"),a()(),o(16,"div",136)(17,"input",139),g("change",function(){p(e);let i=u(3);return _(i.onToggleMostrarTodasMaterias())}),a(),o(18,"label",140),c(19,"Mostrar todas (manual)"),a()(),o(20,"div",141)(21,"span",10),x(22,"i",142),a(),o(23,"div",12)(24,"select",143),T("ngModelChange",function(i){p(e);let l=u(3);return M(l.tipoRegistroMateria,i)||(l.tipoRegistroMateria=i),_(i)}),h(25,fn,2,1,"option",144)(26,gn,2,3,"option",145),a(),o(27,"label",146),c(28,"Tipo de registro"),a()()(),o(29,"div",147)(30,"small",148),c(31,"Cursos:"),a(),h(32,hn,2,3,"button",149),a(),o(33,"div",147)(34,"small",148),c(35,"Paralelos:"),a(),h(36,xn,2,3,"button",150),a(),h(37,En,5,3,"button",151)(38,Cn,5,3,"button",152),a()(),h(39,kn,2,1,"ng-container",26)(40,Gn,3,2,"ng-container",26),a()}if(s&2){let e=u(3);r(),d("ngIf",e.isLoadingMateriasAsignables||e.isLoadingAsignaciones),r(7),d("value",e.filterMateria),r(5),d("checked",e.modoCategorias),r(4),d("checked",e.mostrarTodasMaterias),r(7),w("ngModel",e.tipoRegistroMateria),d("disabled",e.isLoadingTipoRegistroMateria),r(),d("ngIf",e.tipoRegistroMateriaOptions.length===0),r(),d("ngForOf",e.tipoRegistroMateriaOptions),r(6),d("ngForOf",e.lvlCursosDetectados()),r(4),d("ngForOf",e.paralelosDetectados()),r(),d("ngIf",!e.modoCategorias),r(),d("ngIf",!e.modoCategorias),r(),d("ngIf",e.modoCategorias),r(),d("ngIf",!e.modoCategorias)}}function zn(s,t){s&1&&(o(0,"th",123),c(1,"T1"),a())}function qn(s,t){s&1&&(o(0,"th",123),c(1,"T2"),a())}function Hn(s,t){s&1&&(o(0,"th",123),c(1,"T3"),a())}function Wn(s,t){s&1&&(o(0,"th",123),c(1,"T4"),a())}function Qn(s,t){s&1&&(o(0,"th",123),c(1,"P1"),a())}function Kn(s,t){s&1&&(o(0,"th",123),c(1,"P2"),a())}function Yn(s,t){s&1&&(o(0,"th",123),c(1,"P3"),a())}function Xn(s,t){s&1&&(o(0,"th",123),c(1,"P4"),a())}function Zn(s,t){if(s&1&&(o(0,"tr")(1,"td",125)(2,"div",70),x(3,"ng-lottie",71),o(4,"span",68),c(5,"Cargando asignaciones..."),a()()()()),s&2){let e=u(4);r(),U("colspan",e.mostrarDetalleCalificaciones?19:11),r(2),d("options",e._tools.optionsengranaje)}}function Jn(s,t){if(s&1&&(o(0,"tr")(1,"td",127),c(2,"Sin asignaciones"),a()()),s&2){let e=u(5);r(),U("colspan",e.mostrarDetalleCalificaciones?19:11)}}function ea(s,t){if(s&1&&(o(0,"div",129),c(1),a()),s&2){let e=u().$implicit,n=u(5);r(),I(" ",n.materiaMetaSmall(e.materiaId)," ")}}function ta(s,t){if(s&1&&(o(0,"td",123),c(1),a()),s&2){let e=u().$implicit,n=u(5);r(),E(n.califValor(e.materiaId,"Teorico1"))}}function ia(s,t){if(s&1&&(o(0,"td",123),c(1),a()),s&2){let e=u().$implicit,n=u(5);r(),E(n.califValor(e.materiaId,"Teorico2"))}}function na(s,t){if(s&1&&(o(0,"td",123),c(1),a()),s&2){let e=u().$implicit,n=u(5);r(),E(n.califValor(e.materiaId,"Teorico3"))}}function aa(s,t){if(s&1&&(o(0,"td",123),c(1),a()),s&2){let e=u().$implicit,n=u(5);r(),E(n.califValor(e.materiaId,"Teorico4"))}}function sa(s,t){if(s&1&&(o(0,"td",123),c(1),a()),s&2){let e=u().$implicit,n=u(5);r(),E(n.califValor(e.materiaId,"Practico1"))}}function oa(s,t){if(s&1&&(o(0,"td",123),c(1),a()),s&2){let e=u().$implicit,n=u(5);r(),E(n.califValor(e.materiaId,"Practico2"))}}function ra(s,t){if(s&1&&(o(0,"td",123),c(1),a()),s&2){let e=u().$implicit,n=u(5);r(),E(n.califValor(e.materiaId,"Practico3"))}}function la(s,t){if(s&1&&(o(0,"td",123),c(1),a()),s&2){let e=u().$implicit,n=u(5);r(),E(n.califValor(e.materiaId,"Practico4"))}}function ca(s,t){if(s&1&&(o(0,"option",181),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),I(" ",e.value," ")}}function da(s,t){if(s&1){let e=b();o(0,"tr",72)(1,"td"),c(2),a(),o(3,"td"),c(4),a(),o(5,"td"),c(6),a(),o(7,"td")(8,"div"),c(9),a(),h(10,ea,2,1,"div",128),a(),o(11,"td"),c(12),a(),h(13,ta,2,1,"td",122)(14,ia,2,1,"td",122)(15,na,2,1,"td",122)(16,aa,2,1,"td",122)(17,sa,2,1,"td",122)(18,oa,2,1,"td",122)(19,ra,2,1,"td",122)(20,la,2,1,"td",122),o(21,"td",123),c(22),a(),o(23,"td",123),c(24),a(),o(25,"td",123),c(26),a(),o(27,"td",123),c(28),a(),o(29,"td")(30,"select",179),g("change",function(i){let l=p(e).$implicit,m=u(5);return _(m.onEstadoRegistroMateriaChange(l.materiaId,i.target.value))})("click",function(i){return p(e),_(i.stopPropagation())}),h(31,ca,2,3,"option",180),a()(),o(32,"td")(33,"button",157),g("click",function(){let i=p(e).$implicit,l=u(5);return _(l.quitarAsignacionTabla(i.materiaId))}),c(34," Quitar "),a()()()}if(s&2){let e=t.$implicit,n=t.index,i=u(5);d("hidden",i.isLoadingAsignaciones),r(2),E(n+1),r(2),E(e.estudiante),r(2),E(e.categoria),r(3),E(e.materia),r(),d("ngIf",i.materiaMetaSmall(e.materiaId)),r(2),E(e.paralelo),r(),d("ngIf",i.mostrarDetalleCalificaciones),r(),d("ngIf",i.mostrarDetalleCalificaciones),r(),d("ngIf",i.mostrarDetalleCalificaciones),r(),d("ngIf",i.mostrarDetalleCalificaciones),r(),d("ngIf",i.mostrarDetalleCalificaciones),r(),d("ngIf",i.mostrarDetalleCalificaciones),r(),d("ngIf",i.mostrarDetalleCalificaciones),r(),d("ngIf",i.mostrarDetalleCalificaciones),r(2),E(i.califValor(e.materiaId,"PromTeorico")),r(2),E(i.califValor(e.materiaId,"PromPractico")),r(2),E(i.califValor(e.materiaId,"Promedio")),r(2),E(i.califValor(e.materiaId,"PruebaRecuperacion")),r(2),d("ngModel",i.estadoRegistroMateria(e.materiaId))("ngModelOptions",ae(24,ii))("disabled",i.isLoadingMateria[e.materiaId]),r(),d("ngForOf",i.estadoRegistroMateriaOptions()),r(2),d("disabled",i.isLoadingMateria[e.materiaId])}}function ua(s,t){if(s&1&&(te(0),h(1,Jn,3,1,"tr",26)(2,da,35,25,"tr",126),ie()),s&2){let e=t.ngIf,n=u(4);r(),d("ngIf",!n.isLoadingAsignaciones&&e.length===0),r(),d("ngForOf",e)("ngForTrackBy",n.trackByMateriaId)}}function ma(s,t){if(s&1&&(o(0,"div",60)(1,"table",121)(2,"thead")(3,"tr")(4,"th"),c(5,"#"),a(),o(6,"th"),c(7,"Estudiante"),a(),o(8,"th"),c(9,"Categoria"),a(),o(10,"th"),c(11,"Materia"),a(),o(12,"th"),c(13,"Paralelo"),a(),h(14,zn,2,0,"th",122)(15,qn,2,0,"th",122)(16,Hn,2,0,"th",122)(17,Wn,2,0,"th",122)(18,Qn,2,0,"th",122)(19,Kn,2,0,"th",122)(20,Yn,2,0,"th",122)(21,Xn,2,0,"th",122),o(22,"th",123),c(23,"PromT"),a(),o(24,"th",123),c(25,"PromP"),a(),o(26,"th",123),c(27,"Prom"),a(),o(28,"th",123),c(29,"Rec"),a(),o(30,"th"),c(31,"Estado"),a(),o(32,"th"),c(33,"Acci\xF3n"),a()()(),o(34,"tbody",124),h(35,Zn,6,2,"tr",26)(36,ua,3,3,"ng-container",26),a()()()),s&2){let e=u(3);r(14),d("ngIf",e.mostrarDetalleCalificaciones),r(),d("ngIf",e.mostrarDetalleCalificaciones),r(),d("ngIf",e.mostrarDetalleCalificaciones),r(),d("ngIf",e.mostrarDetalleCalificaciones),r(),d("ngIf",e.mostrarDetalleCalificaciones),r(),d("ngIf",e.mostrarDetalleCalificaciones),r(),d("ngIf",e.mostrarDetalleCalificaciones),r(),d("ngIf",e.mostrarDetalleCalificaciones),r(14),d("ngIf",e.isLoadingAsignaciones),r(),d("ngIf",e.tablaAsignacionesRows)}}function pa(s,t){if(s&1&&(o(0,"div"),h(1,Un,41,14,"div",26)(2,ma,37,10,"div",113),a()),s&2){let e=u(2);r(),d("ngIf",!e.ModoBoolean),r(),d("ngIf",e.ModoBoolean)}}function _a(s,t){if(s&1&&(o(0,"div"),h(1,zi,8,2,"div",112)(2,pn,29,10,"div",113)(3,pa,3,2,"div",26),a()),s&2){let e=u();r(),d("ngIf",e.modo==="estudiante"),r(),d("ngIf",e.modo==="estudiante"&&!e.mostrarOpcionesAsignacion),r(),d("ngIf",e.modo!=="estudiante"||e.mostrarOpcionesAsignacion)}}function fa(s,t){if(s&1){let e=b();o(0,"div",182)(1,"h5",183),c(2,"Componente Historias"),a(),o(3,"button",184),g("click",function(){let i=p(e).$implicit;return _(i.dismiss())}),a()(),o(4,"div",185),x(5,"app-califhistorias",186),a()}if(s&2){let e=u();r(5),d("modo","modal_ci")("ciBusqueda",e.ciEstudianteNumerico())("institucion",e.institucionHistorialNombre())}}var Ve=class Ve{constructor(t,e,n,i,l,m,v,f,C){this._calif=t;this._carreras=e;this._mat=n;this._controles=i;this._est=l;this._info=m;this._anios=v;this._auth=f;this._tools=C;this.modo="general";this.estudianteId=null;this.nombreEstudiante=null;this.fotoEstudiante=null;this.sexoEstudiante=null;this.preferInfoId=null;this.lastAppliedEstudianteId=null;this.mostrarOpcionesAsignacion=!0;this.mostrarDetalleCalificaciones=!1;this.ModoBoolean=!1;this.filterEstudiante="";this.filterMateria="";this.busquedaAnioScope="mixed";this.selectedSearchInfoId=null;this.mostrarTodasMaterias=!1;this.tipoRegistroMateriaOptions=[];this.tipoRegistroMateria="REGULAR";this.isLoadingTipoRegistroMateria=!1;this.estudiantes=[];this.estMeta=null;this.estPage=1;this.estPerPage=10;this.isLoadingEstudiantes=!1;this.estudianteSeleccionado=null;this.inscripciones=[];this.inscripcionSeleccionada=null;this.isLoadingInscripciones=!1;this.isLoadingMateriasAsignables=!1;this.isLoadingAsignaciones=!1;this.materiasReqToken=0;this.asignacionesReqToken=0;this.inscripcionesReqToken=0;this.verPendientes=!1;this.filterPendientes="";this.pendientes=[];this.pendMeta=null;this.pendPage=1;this.pendPerPage=10;this.isLoadingPendientes=!1;this.materias=[];this.modoCategorias=!0;this.selectedLvlCursos=new Set;this.selectedParalelos=new Set;this.aniosOptions=[];this.filtroAnioId=null;this.filtroResolucionKey="";this.filtroResolucion=null;this.filtroNivelCarrera=null;this.filtroInstitucionId=null;this.resolucionOptions=[];this.esSuperAdmin=!1;this.perfilInstitucionNombre="";this.carreras=[];this.asignadas=new Set;this.isLoadingMateria={};this.isBulkLoading=!1;this.tablaAsignacionesRows=[];this.cursosConMateriasAsignadasList=[];this.califPorMateria=new Map;this.estadoRegistroMateriaFallbackOptions=[{value:"REGULAR"},{value:"ARRASTRE"},{value:"CONVALIDADO"},{value:"CORRELATIVO"}];this.materiaMetaCache=new Map;this.materiaMetaReqToken=0;this.camposCalificacion=[{key:"Teorico1",label:"Teorico1"},{key:"Teorico2",label:"Teorico2"},{key:"Teorico3",label:"Teorico3"},{key:"Teorico4",label:"Teorico4"},{key:"Practico1",label:"Practico1"},{key:"Practico2",label:"Practico2"},{key:"Practico3",label:"Practico3"},{key:"Practico4",label:"Practico4"},{key:"PromTeorico",label:"PromTeorico"},{key:"PromPractico",label:"PromPractico"},{key:"Promedio",label:"Promedio"},{key:"PruebaRecuperacion",label:"PruebaRecuperacion"}]}ngOnInit(){this.cargarFiltrosAsignacion(),this.cargarTipoRegistroMateriaDesdeControles(),this._auth.pedirPerfil().subscribe({next:t=>{this.perfilInstitucionNombre=String(t?.nameInst??"").trim()},error:()=>{this.perfilInstitucionNombre=""}}),this._auth.revisarSiEsSuperAdmin().subscribe(t=>{this.esSuperAdmin=t,this.rebuildResolucionOptions()}),this.tryApplyModoEstudiante()}upperTrim(t){return(t??"").toString().trim().toUpperCase()}estadoRegistroMateriaOptions(){let t=Array.isArray(this.tipoRegistroMateriaOptions)?this.tipoRegistroMateriaOptions:[];if(t.length===0)return this.estadoRegistroMateriaFallbackOptions;let e=t.map(l=>({value:this.upperTrim(l?.value),disabled:!!l?.disabled})).filter(l=>!!l.value),n=new Set,i=e.filter(l=>n.has(l.value)?!1:(n.add(l.value),!0));return i.length>0?i:this.estadoRegistroMateriaFallbackOptions}onEstadoRegistroMateriaChange(t,e){return $(this,null,function*(){let n=this.califDeMateria(t),i=Number(n?.id??0);if(!Number.isFinite(i)||i<=0)return;let l=this.upperTrim(e),m=this.upperTrim(n?.EstadoRegistroMateria),v=l||"REGULAR";if(m!==v){this.isLoadingMateria[t]=!0;try{yield new Promise((C,S)=>{this._calif.ActualizarEstadoRegistroMateria({id:i,EstadoRegistroMateria:v}).subscribe({next:()=>C(),error:y=>S(y)})});let f=ne(Z({},n??{}),{EstadoRegistroMateria:v});this.califPorMateria.set(t,f)}catch(f){console.error("No se pudo actualizar el tipo de registro:",f),this.inscripcionSeleccionada&&this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}finally{this.isLoadingMateria[t]=!1}}})}cargarTipoRegistroMateriaDesdeControles(){this.isLoadingTipoRegistroMateria=!0,this._controles.ObtenerOptionsSelectPorCategorias(["TIPO REGISTRO DE MATERIA"]).subscribe({next:t=>{this.tipoRegistroMateriaOptions=t?.["TIPO REGISTRO DE MATERIA"]||[];let e=this.upperTrim(this.tipoRegistroMateria),n=(this.tipoRegistroMateriaOptions||[]).map(l=>this.upperTrim(l?.value));if(!(e&&n.includes(e))){let l=(this.tipoRegistroMateriaOptions||[]).find(v=>this.upperTrim(v?.value)==="REGULAR"&&!v.disabled),m=(this.tipoRegistroMateriaOptions||[]).find(v=>!v.disabled);this.tipoRegistroMateria=(l?.value??m?.value??"REGULAR").toString()}},error:()=>{this.tipoRegistroMateriaOptions=[],this.tipoRegistroMateria="REGULAR"},complete:()=>{this.isLoadingTipoRegistroMateria=!1}})}estadoRegistroMateriaParaAsignar(){return this.upperTrim(this.tipoRegistroMateria)||"REGULAR"}ngOnChanges(t){(t.modo||t.estudianteId||t.preferInfoId||t.nombreEstudiante||t.fotoEstudiante||t.sexoEstudiante)&&this.tryApplyModoEstudiante()}tryApplyModoEstudiante(){if(this.modo!=="estudiante")return;let t=Number(this.estudianteId??0);if(!Number.isFinite(t)||t<=0||this.lastAppliedEstudianteId===t&&this.estudianteSeleccionado?.id===t)return;this.verPendientes=!1,this.mostrarOpcionesAsignacion=!1,this.filterEstudiante="",this.estudiantes=[],this.estMeta=null;let e=(this.nombreEstudiante??"").toString().trim()||`Estudiante #${t}`,n=this.preferInfoId?Number(this.preferInfoId):null;this.lastAppliedEstudianteId=t,this.seleccionarEstudiante({id:t,nombre:e,infoId:n??void 0}),this._est.Seleccionarestudiantesifas(t).subscribe({next:i=>{let l=i?.data;!l||!this.estudianteSeleccionado||this.estudianteSeleccionado.id!==t||(this.estudianteSeleccionado=ne(Z({},this.estudianteSeleccionado),{ci:(l?.CI??"").toString()}))},error:()=>{}})}abrirOpcionesAsignacion(){this.mostrarOpcionesAsignacion=!0}cargarFiltrosAsignacion(){this._anios.ObtenerAniosConPredeterminado().subscribe({next:t=>{let e=Array.isArray(t?.anios)?t.anios:[];this.aniosOptions=e.map(i=>({id:Number(i?.id),Anio:String(i?.Anio??"").trim()})).filter(i=>Number.isFinite(i.id)&&i.id>0&&i.Anio);let n=this.filtroAnioId;if(this.filtroAnioId===null||this.filtroAnioId===void 0){let i=t?.predeterminado;i?.id?this.filtroAnioId=Number(i.id):this.aniosOptions.length&&(this.filtroAnioId=this.aniosOptions[0].id)}this.inscripcionSeleccionada&&this.filtroAnioId&&n!==this.filtroAnioId&&this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)},error:()=>{this.aniosOptions=[]}}),this._carreras.Obtenercarreras().subscribe({next:t=>{this.carreras=Array.isArray(t?.data)?t.data:[],this.rebuildResolucionOptions()},error:()=>{this.carreras=[],this.rebuildResolucionOptions()}})}rebuildResolucionOptions(){let t=new Map;for(let e of this.carreras||[]){let n=(e?.Resolucion??"").toString().trim();if(!n)continue;let i=(e?.Nivel??"").toString().trim(),l=(e?.Area??"").toString().trim(),m=e?.instituciones_id,v=m!=null&&m!==""?Number(m):null,f=(e?.NombreInstitucion??"").toString().trim(),C=i||"SIN NIVEL",S=`${n}|${C}`,y=this.esSuperAdmin&&v?`${v}|${S}`:S,A=`${l?l+" \xB7 ":""}${n} (${C})`,R=this.esSuperAdmin&&v?`${A}${f?" \xB7 "+f:""}`:A;t.has(y)||t.set(y,{key:y,label:R,resolucion:n,nivel:C,instituciones_id:v})}this.resolucionOptions=Array.from(t.values()).sort((e,n)=>e.label.localeCompare(n.label))}parseResolucionKey(){let t=(this.filtroResolucionKey??"").toString();if(!t){this.filtroResolucion=null,this.filtroNivelCarrera=null,this.filtroInstitucionId=null;return}let e=t.split("|");if(e.length>=3){let n=Number(e[0]),i=(e[1]??"").toString(),l=e.slice(2).join("|");this.filtroInstitucionId=Number.isFinite(n)?n:null,this.filtroResolucion=i||null,this.filtroNivelCarrera=l||null;return}if(e.length===2){let n=(e[0]??"").toString(),i=(e[1]??"").toString();this.filtroInstitucionId=null,this.filtroResolucion=n||null,this.filtroNivelCarrera=i||null;return}this.filtroInstitucionId=null,this.filtroResolucion=t,this.filtroNivelCarrera=null}onCambioFiltrosAsignacion(){this.parseResolucionKey(),this.inscripcionSeleccionada&&this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}trackById(t,e){return e.id}trackByMateriaId(t,e){return e.materiaId}onToggleChange(t){let e=t.target.checked;this.ModoBoolean=e}rebuildDerivedViews(){if(!this.estudianteSeleccionado||!this.inscripcionSeleccionada)this.tablaAsignacionesRows=[];else{let t=[];for(let e of this.asignadas){let n=this.materias.find(i=>i.id===e);n&&t.push({materiaId:n.id,estudiante:this.estudianteSeleccionado.nombre,materia:`${n.sigla?n.sigla+" - ":""}${n.nombre}`,categoria:n.categoria,paralelo:n.paralelo||"-"})}this.tablaAsignacionesRows=t}this.cursosConMateriasAsignadasList=this.buildCursosConMateriasAsignadas()}toggleModoCategorias(){this.modoCategorias=!this.modoCategorias}togglePendientes(){this.verPendientes=!this.verPendientes,this.verPendientes&&this.cargarPendientes(1)}cargarPendientes(t=1){if(this.isLoadingPendientes)return;let e=(this.filterPendientes??"").trim();this.isLoadingPendientes=!0,this._info.ObtenerPendientesAsignacion({page:t,per_page:this.pendPerPage,instituciones_id:this.esSuperAdmin?this.filtroInstitucionId??void 0:void 0,search:e||void 0}).subscribe({next:n=>{this.pendientes=Array.isArray(n?.data)?n.data:[],this.pendMeta=n?.meta??null,this.pendPage=this.pendMeta?.current_page??t},error:n=>{console.error("Error al cargar pendientes:",n),this.pendientes=[],this.pendMeta=null,this.pendPage=1},complete:()=>{this.isLoadingPendientes=!1}})}pendTienePrev(){return(this.pendMeta?.current_page??1)>1}pendTieneNext(){let t=this.pendMeta?.current_page??1,e=this.pendMeta?.last_page??1;return t<e}pendPrev(){this.pendTienePrev()&&this.cargarPendientes((this.pendMeta?.current_page??1)-1)}pendNext(){this.pendTieneNext()&&this.cargarPendientes((this.pendMeta?.current_page??1)+1)}seleccionarPendiente(t){let e=Number(t?.estudiantesifas_id??0),n=Number(t?.id??0);if(!e||!n)return;let i=(t?.Ap_Paterno??"").toString().trim(),l=(t?.Ap_Materno??"").toString().trim(),m=(t?.Nombre??"").toString().trim(),v=`${i} ${l} ${m}`.replace(/\s+/g," ").trim()||`Estudiante #${e}`;this.seleccionarEstudiante({id:e,nombre:v,ci:(t?.CI??"").toString(),matricula:(t?.Matricula??"").toString(),infoId:n,institucionId:Number(t?.instituciones_id??0)||void 0,institucionNombre:(t?.NombreInstitucion??"").toString().trim()||void 0})}buscarEstudiantes(t=1){if(this.isLoadingEstudiantes)return;let e=(this.filterEstudiante??"").trim();if(!e||e.length<2){this.estudiantes=[],this.estMeta=null,this.estPage=1;return}if((this.busquedaAnioScope==="assigned"||this.busquedaAnioScope==="mixed")&&!this.filtroAnioId){H.default.fire("Falta gesti\xF3n","Selecciona el A\xF1o (Gesti\xF3n) para buscar por gesti\xF3n.","info");return}let n=this.busquedaAnioScope==="mixed"?"default":this.busquedaAnioScope;this.isLoadingEstudiantes=!0,this._info.Obtenerinfoestudiantesifas({page:t,per_page:this.estPerPage,search:e,sort_by:"Ap_Paterno",sort_dir:"asc",instituciones_id:this.esSuperAdmin?this.filtroInstitucionId??void 0:void 0,anio_id:this.busquedaAnioScope==="unassigned"?void 0:this.filtroAnioId??void 0,include_sin_asignar:this.busquedaAnioScope==="mixed"?1:0,anio_scope:n}).subscribe({next:i=>{let m=(Array.isArray(i?.data)?i.data:[]).map(v=>{let f=(v?.Ap_Paterno??"").toString().trim(),C=(v?.Ap_Materno??"").toString().trim(),S=(v?.Nombre??"").toString().trim(),y=`${f} ${C} ${S}`.replace(/\s+/g," ").trim()||`Estudiante #${v?.id}`,A=Number(v?.estudiantesifas_id??0),R=Number(v?.id??0),O=(v?.FechInsc??v?.fechInsc??"").toString().trim(),K=(v?.Curso_Solicitado??"").toString().trim(),ee=(v?.Paralelo_Solicitado??"").toString().trim(),Y=Number(v?.CantidadMateriasAsignadas??0),X=(v?.NombreInstitucion??"").toString().trim(),oe=Number(v?.instituciones_id??0);return{id:A,nombre:y,ci:(v?.CI??"").toString(),matricula:(v?.Matricula??"").toString(),infoId:R,fechInsc:O||void 0,cursoSolicitado:K||void 0,paraleloSolicitado:ee||void 0,cantAsignaciones:Number.isFinite(Y)?Y:0,institucionId:Number.isFinite(oe)&&oe>0?oe:void 0,institucionNombre:X||void 0}}).filter(v=>Number.isFinite(v.id)&&v.id>0);this.estudiantes=m,this.estMeta=i?.meta??null,this.estPage=this.estMeta?.current_page??t},error:i=>{console.error("Error al buscar estudiantes:",i),this.estudiantes=[],this.estMeta=null},complete:()=>{this.isLoadingEstudiantes=!1}})}estTienePrev(){return(this.estMeta?.current_page??1)>1}estTieneNext(){let t=this.estMeta?.current_page??1,e=this.estMeta?.last_page??1;return t<e}estPrev(){this.estTienePrev()&&this.buscarEstudiantes((this.estMeta?.current_page??1)-1)}estNext(){this.estTieneNext()&&this.buscarEstudiantes((this.estMeta?.current_page??1)+1)}seleccionarEstudiante(t){this.selectedSearchInfoId=t.infoId??null,this.estudianteSeleccionado=t,this.inscripcionSeleccionada=null,this.inscripciones=[],this.materias=[],this.asignadas.clear(),this.filterMateria="",this.mostrarTodasMaterias=!1,this.selectedLvlCursos.clear(),this.selectedParalelos.clear(),this.modoCategorias=!0,this.rebuildDerivedViews(),this.cargarInscripciones(t.id,t.infoId??null)}limpiarEstudiante(){this.estudianteSeleccionado=null,this.inscripcionSeleccionada=null,this.inscripciones=[],this.materias=[],this.asignadas.clear(),this.filterMateria="",this.mostrarTodasMaterias=!1,this.selectedLvlCursos.clear(),this.selectedParalelos.clear(),this.modoCategorias=!0,this.rebuildDerivedViews()}buildCursosConMateriasAsignadas(){if(this.inscripcionSeleccionada){let n=new Map;for(let i of this.asignadas){let m=(this.materias.find(v=>v.id===i)?.categoria??"SIN CATEGORIA").toString().trim()||"SIN CATEGORIA";n.set(m,(n.get(m)??0)+1)}return Array.from(n.entries()).sort(([i],[l])=>i.localeCompare(l)).map(([i,l])=>`${i} (${l})`)}let t=new Set,e=[];for(let n of this.inscripciones??[]){let i=Number(n?.CantidadMateriasAsignadas??0);if(!Number.isFinite(i)||i<=0)continue;let l=(n?.Curso_Solicitado??"SIN CURSO").toString().trim()||"SIN CURSO",m=(n?.Paralelo_Solicitado??"").toString().trim(),v=m?`${l} - ${m} (${i})`:`${l} (${i})`;t.has(v)||(t.add(v),e.push(v))}return e.sort((n,i)=>n.localeCompare(i))}cargarInscripciones(t,e=null){let n=++this.inscripcionesReqToken;this.isLoadingInscripciones=!0,this._info.ObtenerinfoestudiantesifasPorEstudiante(t).subscribe({next:i=>{if(n!==this.inscripcionesReqToken)return;let l=Array.isArray(i?.data)?i.data:[];if(this.inscripciones=l.map(m=>({id:Number(m?.id),FechInsc:m?.FechInsc,Curso_Solicitado:m?.Curso_Solicitado,Paralelo_Solicitado:m?.Paralelo_Solicitado,Categoria:m?.Categoria,Turno:m?.Turno,CantidadMateriasAsignadas:m?.CantidadMateriasAsignadas,institucionId:Number(m?.instituciones_id??0)||void 0,institucionNombre:(m?.NombreInstitucion??"").toString().trim()||void 0})).filter(m=>Number.isFinite(m.id)),this.inscripciones.length>0){let m=e?this.inscripciones.find(v=>v.id===e):null;this.seleccionarInscripcion(m??this.inscripciones[0],!0)}},error:i=>{n===this.inscripcionesReqToken&&(console.error("Error al cargar inscripciones:",i),this.inscripciones=[])},complete:()=>{n===this.inscripcionesReqToken&&(this.isLoadingInscripciones=!1)}})}seleccionarInscripcion(t,e=!1){this.inscripcionSeleccionada=t,this.materias=[],this.asignadas.clear(),this.califPorMateria.clear(),this.filterMateria="",this.cargarMateriasYAsignaciones(t.id),this.parseResolucionKey(),(!this.filtroAnioId||!this.filtroResolucion)&&!e&&H.default.fire("Filtros incompletos","Selecciona A\xF1o (Gesti\xF3n) y Resoluci\xF3n para cargar materias asignables. Mientras tanto, se muestran las asignadas actuales.","info")}syncCantidadMateriasAsignadas(t,e){this.inscripcionSeleccionada?.id===t&&(this.inscripcionSeleccionada=ne(Z({},this.inscripcionSeleccionada),{CantidadMateriasAsignadas:e})),this.inscripciones=(this.inscripciones??[]).map(n=>n.id===t?ne(Z({},n),{CantidadMateriasAsignadas:e}):n)}anioSeleccionadoTexto(){let t=this.filtroAnioId;return t&&((this.aniosOptions??[]).find(i=>Number(i?.id)===Number(t))?.Anio??"").toString().trim()||null}filtrarCalificacionesPorAnio(t){let e=this.filtroAnioId;if(!e)return t;let n=this.anioSeleccionadoTexto();return(t??[]).filter(i=>{let l=Number(i?.anios_id??i?.anio_id??i?.aniosId??i?.anioId??0);if(Number.isFinite(l)&&l>0)return l===Number(e);let m=(i?.Anio??i?.anio??"").toString().trim();return n&&m?m===n:!1})}pickString(t){return String(t??"").trim()}normalizeMeta(t){let e=(t??"").toString().trim();if(!e)return"";let n=e.toUpperCase();return n==="SIN RESOLUCION"||n==="SIN RESOLUCI\xD3N"?"":e}hydrateMateriasMeta(t){let e=Array.from(new Set((t??[]).filter(i=>Number.isFinite(i)&&i>0)));if(e.length===0)return;let n=++this.materiaMetaReqToken;for(let i of e)this.materiaMetaCache.has(i)||this._mat.Seleccionarmaterias(i).subscribe({next:l=>{if(n!==this.materiaMetaReqToken)return;let m=l?.data??l;if(!m)return;let v=this.pickString(m?.Anio)||this.pickString(m?.anio)||this.pickString(m?.plandeestudios?.Anio)||this.pickString(m?.plan?.Anio)||this.pickString(m?.Plan?.Anio),f=this.pickString(m?.Resolucion)||this.pickString(m?.resolucion)||this.pickString(m?.plandeestudios?.Resolucion)||this.pickString(m?.carrera?.Resolucion)||this.pickString(m?.Carrera?.Resolucion),C={anio:this.normalizeMeta(v)||void 0,resolucion:this.normalizeMeta(f)||void 0};this.materiaMetaCache.set(i,C);let S=(this.materias??[]).findIndex(y=>y.id===i);if(S>=0){let y=this.materias[S];this.materias=(this.materias??[]).map(A=>A.id===i?ne(Z({},A),{anio:C.anio??A.anio,resolucion:C.resolucion??A.resolucion}):A)}},error:()=>{}})}cargarMateriasYAsignaciones(t){if(this.parseResolucionKey(),!!this.filtroAnioId&&!!this.filtroResolucion&&!!this.filtroNivelCarrera){let i=++this.materiasReqToken;this.isLoadingMateriasAsignables=!0,this._mat.ObtenermateriasPorInfo(t,{all:this.mostrarTodasMaterias,anio_id:this.filtroAnioId??void 0,resolucion:this.filtroResolucion||void 0,nivel:this.filtroNivelCarrera||void 0}).subscribe({next:l=>{if(i!==this.materiasReqToken)return;let m=Array.isArray(l?.data)?l.data:[];this.materias=m.map(v=>{let f=(v?.NombreMateria??"").toString().trim()||`Materia #${v?.id}`,C=(v?.SiglaMateria??"").toString().trim()||void 0,S=(v?.Anio??"SIN ASIGNAR").toString().trim()||"SIN ASIGNAR",y=(v?.Resolucion??"SIN RESOLUCION").toString().trim()||"SIN RESOLUCION",A=(v?.LvlCurso??"SIN CURSO").toString().trim()||"SIN CURSO",R=(v?.Paralelo??"").toString().trim(),O=R?`${A} ${R}`:A;return{id:Number(v?.id),categoria:O,sigla:C,nombre:f,lvlCurso:A,paralelo:R,anio:S,resolucion:y}}).filter(v=>Number.isFinite(v.id))},error:l=>{i===this.materiasReqToken&&(console.error("Error al cargar materias:",l),this.materias=[])},complete:()=>{i===this.materiasReqToken&&(this.isLoadingMateriasAsignables=!1)}})}else this.materiasReqToken++,this.isLoadingMateriasAsignables=!1,this.materias=[];let n=++this.asignacionesReqToken;this.isLoadingAsignaciones=!0,this._calif.ObtenerCalificacionesPorInfo(t).subscribe({next:i=>{if(n!==this.asignacionesReqToken)return;let l=Array.isArray(i?.data)?i.data:[],m=this.filtrarCalificacionesPorAnio(l);this.asignadas.clear(),this.califPorMateria.clear();let v=[];for(let f of m){let C=Number(f?.materias_id??f?.materia_id);if(Number.isFinite(C)){this.asignadas.add(C),this.califPorMateria.set(C,f);let S=this.normalizeMeta(this.pickString(f?.Resolucion)),y=this.normalizeMeta(this.pickString(f?.Anio));if((!S||!y)&&v.push(C),!this.materias.some(A=>A.id===C)){let A=(f?.NombreMateria??"").toString().trim()||`Materia #${C}`,R=(f?.SiglaMateria??"").toString().trim()||void 0,O=(f?.LvlCurso??"SIN CURSO").toString().trim()||"SIN CURSO",K=(f?.MateriaParalelo??"").toString().trim(),ee=this.pickString(f?.Anio)||"SIN ASIGNAR",Y=this.pickString(f?.Resolucion)||"SIN RESOLUCION",X=K?`${O} ${K}`:O;this.materias=[...this.materias,{id:C,categoria:X,sigla:R,nombre:A,lvlCurso:O,paralelo:K,anio:ee,resolucion:Y}]}}}this.hydrateMateriasMeta(v),this.syncCantidadMateriasAsignadas(t,this.asignadas.size),this.rebuildDerivedViews()},error:i=>{n===this.asignacionesReqToken&&(console.error("Error al cargar asignaciones:",i),this.asignadas.clear(),this.califPorMateria.clear(),this.syncCantidadMateriasAsignadas(t,0),this.rebuildDerivedViews())},complete:()=>{n===this.asignacionesReqToken&&(this.isLoadingAsignaciones=!1)}})}materiasFiltradas(){let t=(this.filterMateria??"").trim().toLowerCase(),e=this.materias;if(this.inscripcionSeleccionada&&!this.mostrarTodasMaterias){let n=(this.inscripcionSeleccionada.Curso_Solicitado??"").toString().trim(),i=(this.inscripcionSeleccionada.Paralelo_Solicitado??"").toString().trim();n&&(e=e.filter(l=>this.asignadas.has(l.id)||(l.lvlCurso??"").toString().trim()===n),i&&(e=e.filter(l=>this.asignadas.has(l.id)||(l.paralelo??"").toString().trim()===i)))}return t&&(e=e.filter(n=>`${n.id} ${n.sigla??""} ${n.nombre} ${n.categoria} ${n.lvlCurso??""} ${n.paralelo??""}`.toLowerCase().includes(t))),this.selectedLvlCursos.size>0&&(e=e.filter(n=>this.selectedLvlCursos.has((n.lvlCurso??"").toString()))),this.selectedParalelos.size>0&&(e=e.filter(n=>this.selectedParalelos.has((n.paralelo??"").toString()))),e}lvlCursosDetectados(){return Array.from(new Set(this.materias.map(t=>(t.lvlCurso??"").toString()).filter(Boolean))).sort((t,e)=>t.localeCompare(e))}paralelosDetectados(){return Array.from(new Set(this.materias.map(t=>(t.paralelo??"").toString()).filter(t=>!!t))).sort((t,e)=>t.localeCompare(e))}isLvlCursoSeleccionado(t){return this.selectedLvlCursos.has(t)}toggleLvlCurso(t){this.selectedLvlCursos.has(t)?this.selectedLvlCursos.delete(t):this.selectedLvlCursos.add(t)}isParaleloSeleccionado(t){return this.selectedParalelos.has(t)}toggleParalelo(t){this.selectedParalelos.has(t)?this.selectedParalelos.delete(t):this.selectedParalelos.add(t)}categorias(){return Array.from(new Set(this.materiasFiltradas().map(t=>t.categoria))).sort((t,e)=>t.localeCompare(e))}materiasPorCategoria(t){return this.materiasFiltradas().filter(e=>e.categoria===t)}isAsignada(t){return this.asignadas.has(t)}toggleAsignacion(t,e){return $(this,null,function*(){if(e?.preventDefault(),!this.inscripcionSeleccionada)return;let n=this.inscripcionSeleccionada.id;this.isLoadingMateria[t.id]=!0;try{if(this.asignadas.has(t.id)){if(!(yield this.confirmarQuitarMateriaSiTieneCalificaciones(t)))return;yield new Promise((m,v)=>{this._calif.QuitarMateriaAEstudiante({infoestudiantesifas_id:n,materias_id:t.id}).subscribe({next:()=>m(),error:f=>v(f)})}),this.asignadas.delete(t.id),this.syncCantidadMateriasAsignadas(n,this.asignadas.size)}else yield new Promise((l,m)=>{this._calif.AsignarMateriaAEstudiante({infoestudiantesifas_id:n,materias_id:t.id,EstadoRegistroMateria:this.estadoRegistroMateriaParaAsignar(),forzar:!0}).subscribe({next:()=>l(),error:v=>m(v)})}),this.asignadas.add(t.id),this.syncCantidadMateriasAsignadas(n,this.asignadas.size);this.cargarMateriasYAsignaciones(n)}catch(i){console.error("Error al alternar asignaci\xF3n:",i)}finally{this.isLoadingMateria[t.id]=!1}})}onToggleMostrarTodasMaterias(){this.mostrarTodasMaterias=!this.mostrarTodasMaterias,this.inscripcionSeleccionada&&this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}fmtCal(t){return t==null||t===""?"NULL":String(t)}califDeMateria(t){return this.califPorMateria.get(t)}tieneCalificaciones(t){let e=this.califDeMateria(t);return e?this.camposCalificacion.some(({key:n})=>{let i=e?.[n];return i!=null&&i!==""}):!1}verCalificaciones(t,e){return $(this,null,function*(){e?.preventDefault(),e?.stopPropagation?.();let n=this.califDeMateria(t.id),i=`${t.sigla?t.sigla+" - ":""}${t.nombre}`,l=`
      <div style="text-align:left">
        <div><b>Materia:</b> ${this.escapeHtml(i)}</div>
        <div style="margin-top:8px">
          <table class="table table-sm" style="margin:0">
            <tbody>
              ${this.camposCalificacion.map(({key:m,label:v})=>{let f=this.fmtCal(n?.[m]);return`<tr><td style="width:45%"><b>${this.escapeHtml(v)}</b></td><td>${this.escapeHtml(f)}</td></tr>`}).join("")}
            </tbody>
          </table>
        </div>
      </div>
    `;yield H.default.fire({title:"Calificaciones",html:l,icon:"info",confirmButtonText:"Cerrar",width:720})})}verCalificacionesPorId(t,e){return $(this,null,function*(){let n=this.materias.find(i=>i.id===t);n&&(yield this.verCalificaciones(n,e))})}confirmarQuitarMateriaSiTieneCalificaciones(t){return $(this,null,function*(){if(!this.tieneCalificaciones(t.id))return!0;let e=`${t.sigla?t.sigla+" - ":""}${t.nombre}`;return!!(yield H.default.fire({title:"Confirmar",text:`Esta materia ya tiene calificaciones (${e}). \xBFSeguro que deseas quitarla?`,icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, quitar",cancelButtonText:"Cancelar"})).isConfirmed})}escapeHtml(t){return String(t??"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}tokensBusqueda(){let t=(this.filterEstudiante??"").toString().trim();if(!t)return[];let e=t.split(/\s+/).map(n=>n.trim()).filter(n=>n!=="");return Array.from(new Set(e)).sort((n,i)=>i.length-n.length)}highlightHtml(t){let e=this.escapeHtml(t??""),n=this.tokensBusqueda();if(n.length===0)return e;let i=e;for(let l of n){if(!l)continue;let m=new RegExp(this.escapeRegExp(l),"gi");i=i.replace(m,v=>`<strong class="fw-bold">${v}</strong>`)}return i}formatoCursoParalelo(t){let e=(t?.cursoSolicitado??"").toString().trim(),n=(t?.paraleloSolicitado??"").toString().trim();return!e&&!n?"":n?`${e} - ${n}`:e}ciSoloNumeros(t){return String(t??"").replace(/\D+/g,"")}ciEstudianteNumerico(){return this.ciSoloNumeros(this.estudianteSeleccionado?.ci??"")}institucionHistorialNombre(){let t=(this.perfilInstitucionNombre??"").toString().trim();if(t)return t;let e=(this.estudianteSeleccionado?.institucionNombre??"").toString().trim();if(e)return e;let n=(this.inscripcionSeleccionada?.institucionNombre??"").toString().trim();if(n)return n;if(this.esSuperAdmin&&this.filtroInstitucionId){let l=((this.carreras??[]).find(m=>Number(m?.instituciones_id??0)===Number(this.filtroInstitucionId))?.NombreInstitucion??"").toString().trim();if(l)return l}return""}califValor(t,e){let n=this.califDeMateria(t),i=n?n?.[e]:null;return i==null||i===""?"-":String(i)}estadoRegistroMateria(t){let e=this.califDeMateria(t),n=e?e?.EstadoRegistroMateria:null;return this.upperTrim(n)||"REGULAR"}materiaMetaSmall(t){let e=this.materias.find(f=>f.id===t),n=this.califDeMateria(t),i=this.materiaMetaCache.get(t),l=this.normalizeMeta(this.pickString(e?.anio))||this.normalizeMeta(this.pickString(n?.Anio))||this.normalizeMeta(this.pickString(i?.anio)),m=this.normalizeMeta(this.pickString(e?.resolucion))||this.normalizeMeta(this.pickString(n?.Resolucion))||this.normalizeMeta(this.pickString(i?.resolucion)),v=[];return l&&v.push(l),m&&v.push(m),v.join(" | ")}asignarCursoCompleto(){return $(this,null,function*(){if(this.inscripcionSeleccionada){if(this.parseResolucionKey(),!this.filtroAnioId||!this.filtroResolucion){yield H.default.fire({title:"Faltan filtros",text:"Selecciona A\xF1o y Resoluci\xF3n para asignaci\xF3n masiva.",icon:"warning",confirmButtonText:"Cerrar"});return}this.isBulkLoading=!0;try{yield new Promise((t,e)=>{this._calif.AsignarAnioResolucionCompleto({infoestudiantesifas_id:this.inscripcionSeleccionada.id,anio_id:this.filtroAnioId,resolucion:this.filtroResolucion,EstadoRegistroMateria:this.estadoRegistroMateriaParaAsignar()}).subscribe({next:()=>t(),error:n=>e(n)})}),this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}catch(t){console.error("Error al asignar curso completo:",t)}finally{this.isBulkLoading=!1}}})}asignarCategoriaCompleta(t,e){return $(this,null,function*(){if(e?.preventDefault(),e?.stopPropagation?.(),!this.inscripcionSeleccionada)return;let n=this.inscripcionSeleccionada.id;if(this.parseResolucionKey(),!this.filtroAnioId||!this.filtroResolucion){yield H.default.fire({title:"Faltan filtros",text:"Selecciona A\xF1o y Resoluci\xF3n para asignaci\xF3n masiva.",icon:"warning",confirmButtonText:"Cerrar"});return}let i=this.materiasPorCategoria(t);if(i.length===0)return;let l=i.map(C=>C.id);for(let C of l)this.isLoadingMateria[C]=!0;let m=(i[0]?.lvlCurso??"").toString().trim(),v=(i[0]?.paralelo??"").toString().trim(),f=v||null;this.isBulkLoading=!0;try{yield new Promise((C,S)=>{this._calif.AsignarCategoriaCompleta({infoestudiantesifas_id:n,curso:m,paralelo:f,forzar:!1,EstadoRegistroMateria:this.estadoRegistroMateriaParaAsignar()}).subscribe({next:()=>C(),error:y=>S(y)})}),this.cargarMateriasYAsignaciones(n)}catch(C){console.error("Error al asignar curso/paralelo (bulk):",C),yield H.default.fire({title:"Error",text:"No se pudo asignar el curso/paralelo.",icon:"error",confirmButtonText:"Cerrar"})}finally{this.isBulkLoading=!1;for(let C of l)this.isLoadingMateria[C]=!1}})}quitarCategoriaCompleta(t,e){return $(this,null,function*(){if(e?.preventDefault(),e?.stopPropagation?.(),!this.inscripcionSeleccionada)return;let n=this.inscripcionSeleccionada.id;if(this.parseResolucionKey(),!this.filtroAnioId||!this.filtroResolucion){yield H.default.fire({title:"Faltan filtros",text:"Selecciona A\xF1o y Resoluci\xF3n para desasignaci\xF3n masiva.",icon:"warning",confirmButtonText:"Cerrar"});return}let i=this.materiasPorCategoria(t);if(i.length===0)return;let l=i.filter(A=>this.asignadas.has(A.id));if(l.length===0)return;let m=l.some(A=>this.tieneCalificaciones(A.id));if(!(yield H.default.fire({title:"Confirmar",text:m?"Hay materias con calificaciones en este curso/paralelo. \xBFSeguro que deseas quitar todas sus asignaciones?":"\xBFSeguro que deseas quitar todas las asignaciones de este curso/paralelo?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, quitar",cancelButtonText:"Cancelar"})).isConfirmed)return;let f=i.map(A=>A.id);for(let A of f)this.isLoadingMateria[A]=!0;let C=(i[0]?.lvlCurso??"").toString().trim(),S=(i[0]?.paralelo??"").toString().trim(),y=S||null;this.isBulkLoading=!0;try{yield new Promise((A,R)=>{this._calif.QuitarCategoriaCompleta({infoestudiantesifas_id:n,curso:C,paralelo:y,forzar:!1}).subscribe({next:()=>A(),error:O=>R(O)})}),this.cargarMateriasYAsignaciones(n)}catch(A){console.error("Error al quitar curso/paralelo (bulk):",A),yield H.default.fire({title:"Error",text:"No se pudo quitar el curso/paralelo.",icon:"error",confirmButtonText:"Cerrar"})}finally{this.isBulkLoading=!1;for(let A of f)this.isLoadingMateria[A]=!1}})}quitarTodasAsignaciones(){return $(this,null,function*(){if(!this.inscripcionSeleccionada)return;let t=Array.from(this.asignadas).some(n=>this.tieneCalificaciones(n));if((yield H.default.fire({title:"Confirmar",text:t?"Hay materias con calificaciones. \xBFSeguro que deseas quitar todas las asignaciones?":"\xBFSeguro que deseas quitar todas las asignaciones?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, quitar todas",cancelButtonText:"Cancelar"})).isConfirmed){this.isBulkLoading=!0;try{yield new Promise((n,i)=>{this._calif.QuitarTodasLasMaterias({infoestudiantesifas_id:this.inscripcionSeleccionada.id}).subscribe({next:()=>n(),error:l=>i(l)})}),this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}catch(n){console.error("Error al quitar todas las asignaciones:",n)}finally{this.isBulkLoading=!1}}})}quitarAsignacionTabla(t){return $(this,null,function*(){let e=this.materias.find(n=>n.id===t);e&&(yield this.toggleAsignacion(e))})}tablaAsignaciones(){return this.tablaAsignacionesRows}};Ve.\u0275fac=function(e){return new(e||Ve)(P(kt),P(dt),P(Ft),P(we),P(Me),P(Te),P(ot),P(ye),P(Ae))},Ve.\u0275cmp=me({type:Ve,selectors:[["app-asignadormateriasestudiantes"]],inputs:{modo:"modo",estudianteId:"estudianteId",nombreEstudiante:"nombreEstudiante",fotoEstudiante:"fotoEstudiante",sexoEstudiante:"sexoEstudiante",preferInfoId:"preferInfoId"},standalone:!1,features:[Ue],decls:43,vars:16,consts:[["sinEstudianteSeleccionado",""],["modalOtroComponentecalifhistorias",""],["sinCursosAsignados",""],[1,"container","mt-4"],["class","row",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"row","align-items-end","g-2","mb-3"],[1,"col-sm-3"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-calendar"],[1,"form-floating","flex-grow-1"],["id","filtroAnioGlobal",1,"form-select",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","filtroAnioGlobal"],[1,"bi","bi-bookmark"],["id","filtroResolucionGlobal",1,"form-select",3,"ngModelChange","change","ngModel"],["for","filtroResolucionGlobal"],[1,"col-sm-6","d-flex","justify-content-end"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],["class","card mb-3",4,"ngIf"],["class","row align-items-end g-2",4,"ngIf"],[1,"mt-2"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"lead","text-secondary","subtitulosGlobales"],[1,"col-12"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-center",2,"gap","16px"],[1,"d-flex","align-items-center",2,"gap","12px"],[2,"width","70px","height","70px","border-radius","50%","overflow","hidden","border","3px solid #0d6efd","display","flex","align-items","center","justify-content","center","background","#fff"],["style","width: 100%; height: 100%; object-fit: cover;",3,"src",4,"ngIf"],["style","width: 70px; height: 70px;",3,"options",4,"ngIf"],[1,"text-muted",2,"font-size","13px"],[1,"fw-bold",2,"font-size","18px"],[1,"d-flex","align-items-center",2,"gap","8px"],["class","badge bg-primary",4,"ngIf"],["class","badge bg-secondary",4,"ngIf"],[2,"width","100%","height","100%","object-fit","cover",3,"src"],[2,"width","70px","height","70px",3,"options"],[1,"badge","bg-primary"],[1,"badge","bg-secondary"],[1,"card","mb-3"],[1,"card-header","d-flex","align-items-center","justify-content-between","flex-wrap","gap-2"],["class","text-muted loading-inline",4,"ngIf"],[1,"row","align-items-end","g-2"],[1,"col-lg-8"],[1,"bi","bi-search"],["type","text","placeholder","Buscar pendiente",1,"form-control",3,"input","keyup.enter","value"],["type","button",1,"btn","btn-outline-primary",3,"click","disabled"],[1,"d-inline-flex","align-items-center","gap-2"],["width","22px","height","22px",3,"options",4,"ngIf"],["class","mt-2 d-flex align-items-center gap-2",4,"ngIf"],[1,"col-lg-4"],[1,"form-label"],["readonly","",1,"form-control",3,"value"],[1,"table-responsive"],[1,"table","table-sm","table-striped","align-middle","mb-0"],[2,"width","140px"],[3,"hidden",4,"ngFor","ngForOf"],[1,"text-muted","loading-inline"],["width","22px","height","22px",3,"options"],[1,"mt-2","d-flex","align-items-center","gap-2"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"text-muted"],[1,"text-center","py-3"],[1,"loading-row"],["width","34px","height","34px",3,"options"],[3,"hidden"],["type","button",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"col-sm-10"],[1,"mb-2"],[1,"input-group","buscador-estudiante"],["type","text","placeholder","Buscar estudiante",1,"form-control",3,"input","keyup.enter","ngClass","value"],["class","text-primary loading-inline",4,"ngIf"],[1,"mt-2","d-flex","flex-wrap","gap-2"],["class","btn btn-outline-secondary btn-sm",3,"active","disabled","hidden","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-sm-2","d-flex","justify-content-end","gap-2"],[1,"form-check","mt-2"],["type","checkbox","id","toggleModo",1,"form-check-input",3,"change"],["for","toggleModo",1,"form-check-label"],["class","form-check mt-2",4,"ngIf"],[1,"text-primary","loading-inline"],[1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled","hidden"],[3,"innerHTML"],[1,"small","text-muted"],[1,"small"],[1,"badge","bg-secondary","me-1"],[3,"innerHTML",4,"ngIf"],["class","small text-muted",4,"ngIf"],["type","checkbox","id","toggleDetalleCalifGeneral",1,"form-check-input",3,"ngModelChange","ngModel"],["for","toggleDetalleCalifGeneral",1,"form-check-label"],[1,"seleccion-resumen"],[1,"seleccion-titulo"],[1,"fw-semibold"],["class","seleccion-extra",4,"ngIf","ngIfElse"],[1,"seleccion-extra"],["class","badge bg-success",4,"ngFor","ngForOf"],[1,"badge","bg-success"],["class","loading-inline text-muted",4,"ngIf"],["class","text-muted",4,"ngIf"],["class","d-flex align-items-center justify-content-between flex-wrap gap-2",4,"ngIf"],[1,"loading-inline","text-muted"],["width","26px","height","26px",3,"options"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap","gap-2"],[1,"text-success","m-0"],["type","button","title","Ver historial (califhistorias) por CI",1,"btn","btn-outline-primary","btn-sm","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],["class","d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap","gap-2","mb-2"],["class","form-check form-switch m-0",4,"ngIf"],["type","button","class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"form-check","form-switch","m-0"],["type","checkbox","id","toggleDetalleCalifEst",1,"form-check-input",3,"ngModelChange","ngModel"],["for","toggleDetalleCalifEst",1,"form-check-label","small","text-muted"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"table","align-middle","table-hover","table-sm"],["class","text-center",4,"ngIf"],[1,"text-center"],[1,"table-group-divider"],[1,"text-center","text-muted","py-3"],[3,"hidden",4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-center","text-muted"],["class","text-muted","style","font-size: 11px; line-height: 1.1;",4,"ngIf"],[1,"text-muted",2,"font-size","11px","line-height","1.1"],["class","alert alert-light d-flex align-items-center justify-content-between flex-wrap gap-2",4,"ngIf"],[1,"row","mb-2"],[1,"col-sm-6"],[1,"bi","bi-filter"],["type","text","placeholder","Buscar materia",1,"form-control",3,"input","value"],[1,"col-sm-6","d-flex","justify-content-end","flex-wrap","gap-2","mt-2","mt-sm-0"],[1,"form-check","mt-1"],["type","checkbox","id","toggleCategorias",1,"form-check-input",3,"change","checked"],["for","toggleCategorias",1,"form-check-label"],["type","checkbox","id","toggleTodas",1,"form-check-input",3,"change","checked"],["for","toggleTodas",1,"form-check-label"],[1,"input-group","input-group-sm",2,"width","260px"],[1,"bi","bi-journal-check"],["id","tipoRegistroMateriaSelect",1,"form-select",3,"ngModelChange","ngModel","disabled"],[3,"ngValue",4,"ngIf"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],["for","tipoRegistroMateriaSelect"],[1,"d-flex","align-items-center","flex-wrap","gap-1"],[1,"text-muted","me-1"],["type","button","class","btn btn-outline-primary btn-sm",3,"active","click",4,"ngFor","ngForOf"],["type","button","class","btn btn-outline-secondary btn-sm",3,"active","click",4,"ngFor","ngForOf"],["class","btn btn-outline-success btn-sm",3,"disabled","click",4,"ngIf"],["class","btn btn-outline-danger btn-sm",3,"disabled","click",4,"ngIf"],[1,"alert","alert-light","d-flex","align-items-center","justify-content-between","flex-wrap","gap-2"],[3,"ngValue","disabled"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"btn","btn-outline-success","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","justify-content-between","mt-3","gap-2"],[1,"m-0","flex-grow-1","text-center"],[1,"d-flex","align-items-center","gap-2"],["type","button","title","Asigna todas las materias de este curso/paralelo",1,"btn","btn-outline-success","btn-sm",3,"click","disabled"],["type","button","title","Quita todas las materias asignadas de este curso/paralelo",1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],[1,"d-flex","flex-wrap"],["class","list-group-item col-sm-3 custom-border position-relative",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"list-group-item","col-sm-3","custom-border","position-relative",3,"ngClass"],["type","button",1,"btn","btn-sm","w-100","text-start",3,"click","disabled"],[1,"me-2","badge",3,"ngClass"],[1,"small","text-muted","mt-1"],["class","small text-muted mt-2 d-flex align-items-start justify-content-between gap-2",4,"ngIf"],["class","position-absolute top-50 start-50 translate-middle",4,"ngIf"],[1,"small","text-muted","mt-2","d-flex","align-items-start","justify-content-between","gap-2"],[1,"d-flex","flex-column"],["class","ms-1",4,"ngIf"],[1,"mt-1"],[1,"ms-1"],["type","button","title","Ver detalle",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"position-absolute","top-50","start-50","translate-middle"],[1,"form-select","form-select-sm",3,"change","click","ngModel","ngModelOptions","disabled"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[1,"modal-body"],[3,"modo","ciBusqueda","institucion"]],template:function(e,n){if(e&1){let i=b();o(0,"div",3),h(1,ni,6,0,"div",4)(2,li,15,5,"div",4),a(),o(3,"div",5)(4,"div",6)(5,"div",7)(6,"div",8)(7,"div",9)(8,"span",10),x(9,"i",11),a(),o(10,"div",12)(11,"select",13),T("ngModelChange",function(m){return p(i),M(n.filtroAnioId,m)||(n.filtroAnioId=m),_(m)}),g("change",function(){return p(i),_(n.onCambioFiltrosAsignacion())}),o(12,"option",14),c(13,"-- Seleccione --"),a(),h(14,ci,2,2,"option",15),a(),o(15,"label",16),c(16,"A\xF1o (Gesti\xF3n)"),a()()()(),o(17,"div",8)(18,"div",9)(19,"span",10),x(20,"i",17),a(),o(21,"div",12)(22,"select",18),T("ngModelChange",function(m){return p(i),M(n.filtroResolucionKey,m)||(n.filtroResolucionKey=m),_(m)}),g("change",function(){return p(i),_(n.onCambioFiltrosAsignacion())}),o(23,"option",14),c(24,"-- Seleccione --"),a(),h(25,di,2,2,"option",15),a(),o(26,"label",19),c(27,"Resoluci\xF3n"),a()()()(),o(28,"div",20)(29,"button",21),g("click",function(){return p(i),_(n.togglePendientes())}),c(30),a()()(),h(31,vi,52,11,"div",22)(32,Pi,25,13,"div",23),o(33,"div",24),h(34,Fi,10,3,"ng-container",25)(35,Ri,2,1,"ng-template",null,0,V),a(),x(37,"hr"),h(38,Bi,6,4,"div",26)(39,$i,1,0,"hr",26)(40,_a,4,3,"div",26),a()(),h(41,fa,6,3,"ng-template",null,1,V)}if(e&2){let i=z(36);r(),d("ngIf",n.modo!=="estudiante"),r(),d("ngIf",n.modo==="estudiante"),r(9),w("ngModel",n.filtroAnioId),r(),d("ngValue",null),r(2),d("ngForOf",n.aniosOptions),r(8),w("ngModel",n.filtroResolucionKey),r(),d("ngValue",""),r(2),d("ngForOf",n.resolucionOptions),r(5),I(" ",n.verPendientes?"Ocultar pendientes":"Ver pendientes de asignaci\xF3n"," "),r(),d("ngIf",n.verPendientes&&n.modo!=="estudiante"),r(),d("ngIf",n.modo!=="estudiante"),r(2),d("ngIf",n.estudianteSeleccionado)("ngIfElse",i),r(4),d("ngIf",n.estudianteSeleccionado),r(),d("ngIf",n.inscripcionSeleccionada),r(),d("ngIf",n.inscripcionSeleccionada)}},dependencies:[_e,fe,ge,Ce,Se,Ye,be,ve,Ee,Ie,Pe],styles:[".custom-border[_ngcontent-%COMP%]{border:1px solid #e6e6e6;border-radius:10px;padding:8px;background:#fff;transition:background-color .16s ease,border-color .16s ease}.custom-border[_ngcontent-%COMP%]:hover{border-color:#2563eb;background:#eaf1ff}.checked[_ngcontent-%COMP%]{border-color:#22c55e!important;background:#f3fff5}.btn.active[_ngcontent-%COMP%]{border-color:#2563eb;background:#eaf1ff;color:#0335a0;font-weight:700}.loading-row[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:10px}.loading-inline[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px}.buscador-estudiante[_ngcontent-%COMP%]{max-width:100%}.seleccion-resumen[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.08);background:#0d6efd0f;border-radius:12px;padding:10px 12px;display:flex;flex-wrap:wrap;align-items:center;gap:10px}.seleccion-titulo[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:10px}.seleccion-extra[_ngcontent-%COMP%]{display:inline-flex;align-items:center;flex-wrap:wrap;gap:8px}"]});var Ne=Ve;var ya=["modalOtroComponentecalifhistorias"],Ia=["modalRegistroEstudianteCompleto"],Aa=["modalEsperaFotoCelular"],wa=["modalVincularCelular"],Ma=["modalEsperaFotoPagoCelular"],Ta=["modalgestioninfoestudiantesifas"],Pa=["modalOtroComponenteEstadisticas"],Va=["modalDetalleEstadisticas"],Na=["modalOtroComponenteAsignacionesEstudiantes"],ka=["modalListasPreliminaresCursos"],Fa=["modalVerificacionAsignacion"],Ra=["modalAccionesGrupalesCursos"],Oa=["modalAccionesGrupalesModificacion"],Da=["modalOtroComponenteRegistrarpagos"],La=["verifTableScroll"],Wt=(s,t)=>[s,t],q=(s,t)=>({"bi-caret-up":s,"bi-caret-down":t}),ja=s=>({active:s}),Ba=s=>({"deuda-glow":s}),Kt=(s,t,e)=>({"bg-success":s,"bg-secondary":t,"bg-danger":e}),$a=()=>({standalone:!0}),mt=()=>[],Ga=(s,t)=>({top:s,left:t});function Ua(s,t){if(s&1&&(o(0,"option",68),c(1),a()),s&2){let e=t.$implicit;d("ngValue",e.id),r(),E(e.Anio)}}function za(s,t){if(s&1&&x(0,"ng-lottie",70),s&2){let e=u(2);d("options",e.sexoEstudiante==="MASCULINO"?e._tools.optionsavatarmasculinoanimado:e._tools.optionsavatarfemenino2)}}function qa(s,t){if(s&1&&x(0,"img",71),s&2){let e=u(2);d("src",e._tools.ruta+e.fotoEstudiante,F)}}function Ha(s,t){if(s&1&&(o(0,"div",69),ht(1,za,1,1,"ng-lottie",70)(2,qa,1,1,"img",71),a()),s&2){let e=u();r(),xt(e.fotoEstudiante==null||e.fotoEstudiante==""?1:2)}}function Wa(s,t){if(s&1){let e=b();o(0,"button",34),g("click",function(){p(e);let i=u();return _(i.abrirModalAccionesGrupalesCursos())}),o(1,"span",35),x(2,"ng-lottie",36),a(),o(3,"span"),c(4,"ASIGNACIONES GRUPALES"),a(),x(5,"span",37),a()}if(s&2){let e=u();r(2),d("options",e._tools.optionssubgestion)}}function Qa(s,t){if(s&1){let e=b();o(0,"button",34),g("click",function(){p(e);let i=u();return _(i.abrirModalAccionesGrupalesModificacion())}),o(1,"span",35),x(2,"ng-lottie",36),a(),o(3,"span"),c(4,"ACCIONES GRUPALES"),a(),x(5,"span",37),a()}if(s&2){let e=u();r(2),d("options",e._tools.optionssubgestion)}}function Ka(s,t){if(s&1){let e=b();o(0,"div",48)(1,"input",72),T("ngModelChange",function(i){p(e);let l=u();return M(l.soloDeudores,i)||(l.soloDeudores=i),_(i)}),g("change",function(){p(e);let i=u();return _(i.onAnioChange())}),a(),o(2,"label",73),c(3,"SOLO DEUDORES"),a()()}if(s&2){let e=u();r(),w("ngModel",e.soloDeudores)}}function Ya(s,t){if(s&1&&(o(0,"option",68),c(1),a()),s&2){let e=t.$implicit;d("ngValue",e.id),r(),E(e.Anio)}}function Xa(s,t){s&1&&(o(0,"span"),c(1,"Actualizar verificaci\xF3n"),a())}function Za(s,t){s&1&&(o(0,"span"),c(1,"Cargando..."),a())}function Ja(s,t){if(s&1){let e=b();o(0,"button",110),g("click",function(){let i=p(e).$implicit,l=u(3);return _(l.toggleVerifParalelo(i))}),c(1),a()}if(s&2){let e=t.$implicit,n=u(3);G("active",n.verifParaleloSelected(e)),r(),I(" ",e," ")}}function es(s,t){if(s&1){let e=b();o(0,"button",110),g("click",function(){let i=p(e).$implicit,l=u(3);return _(l.toggleVerifTurno(i))}),c(1),a()}if(s&2){let e=t.$implicit,n=u(3);G("active",n.verifTurnoSelected(e)),r(),I(" ",e," ")}}function ts(s,t){if(s&1){let e=b();o(0,"button",110),g("click",function(){let i=p(e).$implicit,l=u(3);return _(l.toggleVerifCurso(i))}),c(1),a()}if(s&2){let e=t.$implicit,n=u(3);G("active",n.verifCursoSelected(e)),r(),I(" ",e," ")}}function is(s,t){if(s&1&&(o(0,"div",103)(1,"div",104)(2,"div",105)(3,"div",106),c(4,"Paralelos (a\xF1o)"),a(),o(5,"div",107),h(6,Ja,2,3,"button",108),a()(),o(7,"div",105)(8,"div",106),c(9,"Turnos (a\xF1o)"),a(),o(10,"div",107),h(11,es,2,3,"button",108),a()(),o(12,"div",109)(13,"div",106),c(14,"Cursos (a\xF1o)"),a(),o(15,"div",107),h(16,ts,2,3,"button",108),a()()()()),s&2){let e=u(2);r(6),d("ngForOf",e.verifParaleloOptions),r(5),d("ngForOf",e.verifTurnoOptions),r(5),d("ngForOf",e.verifCursoOptions)}}function ns(s,t){s&1&&(o(0,"div",111)(1,"div",112)(2,"span",113),c(3,"Cargando..."),a()(),o(4,"span",114),c(5,"Cargando verificaci\xF3n..."),a()())}function as(s,t){s&1&&(o(0,"div",115),c(1," Sin datos para el a\xF1o seleccionado. "),a())}function ss(s,t){s&1&&(o(0,"div",116),c(1," No hay filas para los filtros actuales (OK/NO/MIXTO o curso/paralelo/turno). "),a())}function os(s,t){if(s&1&&x(0,"img",133),s&2){let e=u(4);d("src",e._tools.rutabtniconsanimaciones+"pencil.svg",F)}}function rs(s,t){if(s&1&&x(0,"ng-lottie",134),s&2){let e=u(4);d("options",e._tools.optionsEditar)}}function ls(s,t){if(s&1){let e=b();o(0,"tr",127)(1,"td",57),c(2),a(),o(3,"td"),c(4),o(5,"div",85),c(6),a()(),o(7,"td",57),c(8),a(),o(9,"td",57),c(10),o(11,"div",85),c(12),a()(),o(13,"td",57),c(14),o(15,"div",85),c(16),a()(),o(17,"td"),c(18),a(),o(19,"td",128)(20,"button",129),g("click",function(i){let l=p(e).$implicit,m=u(2).$implicit,v=u();return _(v.editarDesdeVerificacion(l,m,i))})("mouseenter",function(){let i=p(e).$implicit,l=u(3);return _(l._tools.hoverBotonMap["edicionverif-"+i.id]=!0)})("mouseleave",function(){let i=p(e).$implicit,l=u(3);return _(l._tools.hoverBotonMap["edicionverif-"+i.id]=!1)}),h(21,os,1,1,"img",130)(22,rs,1,1,"ng-lottie",131),a(),o(23,"button",132),g("click",function(){let i=p(e).$implicit,l=u(3);return _(l.abrirAsignadorMateriasDesdeInscripcion(i))}),c(24,"Asignador"),a()()()}if(s&2){let e=t.$implicit,n=t.index,i=u(3);d("ngClass",i.getVerifRowNgClass(e)),U("id","verif-row-"+e.id),r(2),E((i.verifPage-1)*i.verifPerPage+n+1),r(2),I(" ",(e.Ap_Paterno||"")+" "+(e.Ap_Materno||"")+" "+(e.Nombre||"")," "),r(2),I("Carnet: ",e.CI),r(2),E(e.Verificacion),r(2),J("",e.Curso_Solicitado," ",e.Paralelo_Solicitado||""||"SIN DETERMINAR"," "),r(2),I("Turno: ",e.Turno),r(2),J("",e.oficial==null?null:e.oficial.Curso," ",(e.oficial==null?null:e.oficial.Paralelo)||""||"SIN DETERMINAR"," "),r(2),I("Turno: ",e.oficial==null?null:e.oficial.Turno),r(2),E(e.detalle),r(3),d("ngIf",!i._tools.hoverBotonMap["edicionverif-"+e.id]),r(),d("ngIf",i._tools.hoverBotonMap["edicionverif-"+e.id])}}function cs(s,t){if(s&1&&(o(0,"div",117,14)(2,"table",118)(3,"thead",119)(4,"tr")(5,"th",120),c(6,"#"),a(),o(7,"th",121),c(8,"Estudiante"),a(),o(9,"th",122),c(10,"Verificaci\xF3n"),a(),o(11,"th",123),c(12,"Curso (Sol.)"),a(),o(13,"th",124),c(14,"Curso (Of.)"),a(),o(15,"th"),c(16,"Detalle"),a(),o(17,"th",125),c(18,"Acciones"),a()()(),o(19,"tbody"),h(20,ls,25,15,"tr",126),a()()()),s&2){let e=u(2);r(20),d("ngForOf",e.verifRowsFiltradas)}}function ds(s,t){if(s&1){let e=b();o(0,"div",74)(1,"h5",75),c(2,"Verificaci\xF3n de la correcta asignaci\xF3n e inscripci\xF3n"),a(),o(3,"button",76),g("click",function(){let i=p(e).$implicit;return _(i.dismiss("close"))}),a()(),o(4,"div",77)(5,"div",78)(6,"div",79)(7,"label",80),c(8,"A\xF1o"),a(),o(9,"select",81),T("ngModelChange",function(i){p(e);let l=u();return M(l.verifAnioId,i)||(l.verifAnioId=i),_(i)}),g("ngModelChange",function(){p(e);let i=u();return _(i.onVerifAnioChange())}),o(10,"option",82),c(11,"-- Seleccione --"),a(),h(12,Ya,2,2,"option",27),a()(),o(13,"div",83)(14,"button",53),g("click",function(){p(e);let i=u();return _(i.cargarVerificacionAsignacion(i.verifPage,{preserveScroll:!0}))}),h(15,Xa,2,0,"span",61)(16,Za,2,0,"span",61),a()()(),o(17,"div",84)(18,"div",85),c(19),a(),o(20,"div",86)(21,"label",87),c(22,"Filtro"),a(),o(23,"div",88)(24,"button",89),g("click",function(){p(e);let i=u();return _(i.setVerifFiltroEstado("MIXTO"))}),c(25,"MIXTO"),a(),o(26,"button",90),g("click",function(){p(e);let i=u();return _(i.setVerifFiltroEstado("OK"))}),c(27,"SOLO COINCIDEN"),a(),o(28,"button",91),g("click",function(){p(e);let i=u();return _(i.setVerifFiltroEstado("NO"))}),c(29,"SOLO NO COINCIDEN"),a()(),o(30,"button",92),g("click",function(){p(e);let i=u();return _(i.limpiarFiltrosVerificacion())}),c(31," Limpiar filtros "),a()()(),h(32,is,17,3,"div",93)(33,ns,6,0,"div",94)(34,as,2,0,"div",95)(35,ss,2,0,"div",96)(36,cs,21,1,"div",97),a(),o(37,"div",98)(38,"div",99)(39,"div",100)(40,"ngb-pagination",64),g("pageChange",function(i){p(e);let l=u();return _(l.onVerifPageChange(i))}),a(),o(41,"select",101),T("ngModelChange",function(i){p(e);let l=u();return M(l.verifPerPage,i)||(l.verifPerPage=i),_(i)}),g("change",function(){p(e);let i=u();return _(i.onVerifPerPageChange())}),o(42,"option",68),c(43,"20 por p\xE1gina"),a(),o(44,"option",68),c(45,"50 por p\xE1gina"),a(),o(46,"option",68),c(47,"100 por p\xE1gina"),a(),o(48,"option",68),c(49,"200 por p\xE1gina"),a()()(),o(50,"button",102),g("click",function(){let i=p(e).$implicit;return _(i.dismiss("close"))}),c(51,"Cerrar"),a()()()}if(s&2){let e=u();r(9),w("ngModel",e.verifAnioId),r(3),d("ngForOf",e.anios),r(2),d("disabled",e.isLoadingVerificacionAsignacion),r(),d("ngIf",!e.isLoadingVerificacionAsignacion),r(),d("ngIf",e.isLoadingVerificacionAsignacion),r(3),Et(" Total (a\xF1o): ",e.verifStats.totalYear," \xB7 Filtrados: ",e.verifStats.totalFiltrado," \xB7 P\xE1gina: ",e.verifPage,"/",e.verifLastPage," \xB7 En p\xE1gina: ",e.verifStats.totalPagina," (Coinciden ",e.verifStats.okPagina," / No coinciden ",e.verifStats.noPagina,") \xB7 Mostrando: ",e.verifRows.length," "),r(5),G("active",e.verifFiltroEstado==="MIXTO"),r(2),G("active",e.verifFiltroEstado==="OK"),r(2),G("active",e.verifFiltroEstado==="NO"),r(4),d("ngIf",!e.isLoadingVerificacionAsignacion&&e.verifStats.totalYear>0),r(),d("ngIf",e.isLoadingVerificacionAsignacion),r(),d("ngIf",!e.isLoadingVerificacionAsignacion&&e.verifRows.length===0),r(),d("ngIf",!e.isLoadingVerificacionAsignacion&&e.verifStats.totalYear>0&&e.verifStats.totalFiltrado===0),r(),d("ngIf",!e.isLoadingVerificacionAsignacion&&e.verifRows.length>0),r(4),d("page",e.verifPage)("collectionSize",e.verifStats.totalFiltrado)("pageSize",e.verifPerPage)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),r(),w("ngModel",e.verifPerPage),r(),d("ngValue",20),r(2),d("ngValue",50),r(2),d("ngValue",100),r(2),d("ngValue",200)}}function us(s,t){if(s&1){let e=b();o(0,"div",45)(1,"input",139),T("ngModelChange",function(i){p(e);let l=u(2);return M(l.incluirEspecialidadListas,i)||(l.incluirEspecialidadListas=i),_(i)}),a(),o(2,"label",140),c(3,"Incluir especialidad"),a()()}if(s&2){let e=u(2);r(),w("ngModel",e.incluirEspecialidadListas)}}function ms(s,t){s&1&&(o(0,"div",111)(1,"div",112)(2,"span",113),c(3,"Cargando..."),a()(),o(4,"span",114),c(5,"Cargando cursos..."),a()())}function ps(s,t){s&1&&(o(0,"div",115),c(1," No se encontraron cursos para el filtro actual. "),a())}function _s(s,t){if(s&1){let e=b();o(0,"tr")(1,"td",57),c(2),a(),o(3,"td",57)(4,"input",147),T("ngModelChange",function(i){let l=p(e).$implicit;return M(l.selected,i)||(l.selected=i),_(i)}),a()(),o(5,"td"),c(6),a(),o(7,"td",57),c(8),a(),o(9,"td",57),c(10),a()()}if(s&2){let e=t.$implicit,n=t.index;r(2),E(n+1),r(2),w("ngModel",e.selected),r(2),E(e.curso),r(2),E(e.paraleloLabel),r(2),E(e.total)}}function fs(s,t){if(s&1&&(o(0,"div",141)(1,"table",142)(2,"thead")(3,"tr")(4,"th",120),c(5,"#"),a(),o(6,"th",143),c(7,"Sel"),a(),o(8,"th"),c(9,"Curso"),a(),o(10,"th",144),c(11,"Paralelo"),a(),o(12,"th",145),c(13,"Total"),a()()(),o(14,"tbody"),h(15,_s,11,5,"tr",146),a()()()),s&2){let e=u(2);r(15),d("ngForOf",e.cursosParaListas)}}function gs(s,t){s&1&&(o(0,"span"),c(1,"Generar PDF"),a())}function hs(s,t){s&1&&(o(0,"span"),c(1,"Generando..."),a())}function xs(s,t){if(s&1){let e=b();o(0,"div",74)(1,"h5",75),c(2,"Generar listas preliminares por curso"),a(),o(3,"button",76),g("click",function(){let i=p(e).$implicit;return _(i.dismiss("close"))}),a()(),o(4,"div",77)(5,"div",135)(6,"div",100)(7,"button",110),g("click",function(){p(e);let i=u();return _(i.seleccionarTodosCursosListas(!0))}),c(8,"Seleccionar todos"),a(),o(9,"button",110),g("click",function(){p(e);let i=u();return _(i.seleccionarTodosCursosListas(!1))}),c(10,"Limpiar"),a()(),h(11,us,4,1,"div",136),a(),h(12,ms,6,0,"div",94)(13,ps,2,0,"div",95)(14,fs,16,1,"div",137),a(),o(15,"div",98)(16,"button",102),g("click",function(){let i=p(e).$implicit;return _(i.dismiss("cancel"))}),c(17,"Cancelar"),a(),o(18,"button",138),g("click",function(){let i=p(e).$implicit,l=u();return _(l.generarListasPreliminaresSeleccionadas(i))}),h(19,gs,2,0,"span",61)(20,hs,2,0,"span",61),a()()}if(s&2){let e=u();r(11),d("ngIf",e.habilitarCamposMusicales),r(),d("ngIf",e.isLoadingCursosParaListas),r(),d("ngIf",!e.isLoadingCursosParaListas&&e.cursosParaListas.length===0),r(),d("ngIf",!e.isLoadingCursosParaListas&&e.cursosParaListas.length>0),r(4),d("disabled",e.isGenerandoListasPreliminares||e.cursosSeleccionadosCount()===0),r(),d("ngIf",!e.isGenerandoListasPreliminares),r(),d("ngIf",e.isGenerandoListasPreliminares)}}function vs(s,t){if(s&1&&(o(0,"option",68),c(1),a()),s&2){let e=t.$implicit;d("ngValue",e.id),r(),E(e.Anio)}}function Es(s,t){if(s&1&&(o(0,"option",68),c(1),a()),s&2){let e=t.$implicit;d("ngValue",e.key),r(),E(e.label)}}function bs(s,t){s&1&&(o(0,"div",111)(1,"div",112)(2,"span",113),c(3,"Cargando..."),a()(),o(4,"span",114),c(5,"Cargando cursos..."),a()())}function Cs(s,t){s&1&&(o(0,"div",115),c(1," Seleccione un modo para listar cursos. "),a())}function Ss(s,t){s&1&&(o(0,"div",115),c(1," No se encontraron cursos para el filtro actual. "),a())}function ys(s,t){if(s&1){let e=b();o(0,"tr")(1,"td",57),c(2),a(),o(3,"td",57)(4,"input",147),T("ngModelChange",function(i){let l=p(e).$implicit;return M(l.selected,i)||(l.selected=i),_(i)}),a()(),o(5,"td"),c(6),a(),o(7,"td",57),c(8),a(),o(9,"td",57),c(10),a()()}if(s&2){let e=t.$implicit,n=t.index;r(2),E(n+1),r(2),w("ngModel",e.selected),r(2),E(e.curso),r(2),E(e.paraleloLabel),r(2),E(e.total)}}function Is(s,t){if(s&1&&(o(0,"div",141)(1,"table",142)(2,"thead")(3,"tr")(4,"th",120),c(5,"#"),a(),o(6,"th",143),c(7,"Sel"),a(),o(8,"th"),c(9,"Curso"),a(),o(10,"th",144),c(11,"Paralelo"),a(),o(12,"th",145),c(13,"Total"),a()()(),o(14,"tbody"),h(15,ys,11,5,"tr",146),a()()()),s&2){let e=u(2);r(15),d("ngForOf",e.cursosParaAcciones)}}function As(s,t){if(s&1){let e=b();o(0,"button",159),g("click",function(){p(e);let i=u(2);return _(i.ejecutarAccionGrupalAsignacion())}),x(1,"span",160),a()}s&2&&d("disabled",!0)}function ws(s,t){if(s&1){let e=b();o(0,"button",161),g("click",function(){p(e);let i=u(2);return _(i.ejecutarAccionGrupalAsignacion())}),o(1,"span",35),x(2,"ng-lottie",36),a(),o(3,"span"),c(4,"EJECUTAR ASIGNACI\xD3N"),a(),x(5,"span",37),a()}if(s&2){let e=u(2);d("disabled",e.accionModo===""||e.cursosAccionesSeleccionadosCount()===0),r(2),d("options",e._tools.optionsAdicionar)}}function Ms(s,t){if(s&1){let e=b();o(0,"div",74)(1,"h5",75),c(2,"Asignaciones grupales \xB7 Asignaci\xF3n autom\xE1tica de materias"),a(),o(3,"button",76),g("click",function(){let i=p(e).$implicit;return _(i.dismiss("close"))}),a()(),o(4,"div",77)(5,"div",78)(6,"div",148)(7,"div",25)(8,"select",149),T("ngModelChange",function(i){p(e);let l=u();return M(l.accionAnioId,i)||(l.accionAnioId=i),_(i)}),g("change",function(){p(e);let i=u();return _(i.onCambioAccionAnio())}),h(9,vs,2,2,"option",27),a(),o(10,"label"),c(11,"A\xF1o (plan de estudios)"),a()()(),o(12,"div",148)(13,"div",25)(14,"select",149),T("ngModelChange",function(i){p(e);let l=u();return M(l.accionResolucionKey,i)||(l.accionResolucionKey=i),_(i)}),g("change",function(){p(e);let i=u();return _(i.onCambioAccionResolucion())}),o(15,"option",68),c(16,"Seleccione resoluci\xF3n"),a(),h(17,Es,2,2,"option",27),a(),o(18,"label"),c(19,"Resoluci\xF3n"),a()()(),o(20,"div",148)(21,"div",25)(22,"select",149),T("ngModelChange",function(i){p(e);let l=u();return M(l.accionModo,i)||(l.accionModo=i),_(i)}),g("change",function(){p(e);let i=u();return _(i.onCambioAccionModo())}),o(23,"option",68),c(24,"Seleccione modo"),a(),o(25,"option",68),c(26,"Modo superior (solo cursos con SUPERIOR)"),a(),o(27,"option",68),c(28,"Modo capacitaci\xF3n (no SUPERIOR)"),a()(),o(29,"label"),c(30,"Modo"),a()()(),o(31,"div",150)(32,"div",151)(33,"div",100)(34,"button",110),g("click",function(){p(e);let i=u();return _(i.seleccionarTodosCursosAcciones(!0))}),c(35,"Seleccionar todos"),a(),o(36,"button",110),g("click",function(){p(e);let i=u();return _(i.seleccionarTodosCursosAcciones(!1))}),c(37,"Limpiar"),a()(),o(38,"div",152),c(39),a()()()(),h(40,bs,6,0,"div",94)(41,Cs,2,0,"div",95)(42,Ss,2,0,"div",95)(43,Is,16,1,"div",137),a(),o(44,"div",98)(45,"div",153)(46,"button",154),g("click",function(){let i=p(e).$implicit;return _(i.dismiss("cancel"))}),o(47,"span",35),x(48,"ng-lottie",36),a(),o(49,"span"),c(50,"CERRAR"),a(),x(51,"span",37),a()(),o(52,"div",153)(53,"button",155),g("click",function(){p(e);let i=u();return _(i.rollbackAccionGrupal())}),o(54,"span",35),x(55,"ng-lottie",36),a(),o(56,"span"),c(57,"RETROCEDER ACCIONES"),a(),x(58,"span",37),a()(),o(59,"div",156),h(60,As,2,1,"button",157)(61,ws,6,2,"button",158),a()()}if(s&2){let e=u();r(8),w("ngModel",e.accionAnioId),r(),d("ngForOf",e.anios),r(5),w("ngModel",e.accionResolucionKey),r(),d("ngValue",""),r(2),d("ngForOf",e.resolucionOptionsAcciones),r(5),w("ngModel",e.accionModo),r(),d("ngValue",""),r(2),d("ngValue","superior"),r(2),d("ngValue","capacitacion"),r(12),I("Seleccionados: ",e.cursosAccionesSeleccionadosCount()),r(),d("ngIf",e.isLoadingCursosParaAcciones),r(),d("ngIf",!e.isLoadingCursosParaAcciones&&e.accionModo===""),r(),d("ngIf",!e.isLoadingCursosParaAcciones&&e.accionModo!==""&&e.cursosParaAcciones.length===0),r(),d("ngIf",!e.isLoadingCursosParaAcciones&&e.cursosParaAcciones.length>0),r(5),d("options",e._tools.optionscancelar),r(5),d("disabled",e.isEjecutandoAccionGrupal),r(2),d("options",e._tools.optionsautocompletar),r(5),d("ngIf",e.isEjecutandoAccionGrupal),r(),d("ngIf",!e.isEjecutandoAccionGrupal)}}function Ts(s,t){if(s&1&&(o(0,"option",178),c(1),a()),s&2){let e=t.$implicit;d("ngValue",e.value)("disabled",e.disabled),r(),E(e.label)}}function Ps(s,t){s&1&&(o(0,"span"),c(1,"Cargar lista"),a())}function Vs(s,t){s&1&&(o(0,"span"),c(1,"Cargando..."),a())}function Ns(s,t){s&1&&(o(0,"div",111)(1,"div",112)(2,"span",113),c(3,"Cargando..."),a()(),o(4,"span",114),c(5,"Cargando lista de estudiantes..."),a()())}function ks(s,t){s&1&&(o(0,"div",115),c(1," Seleccione los datos actuales y presione "),o(2,"b"),c(3,"Cargar lista"),a(),c(4,". "),a())}function Fs(s,t){if(s&1&&(o(0,"option",178),c(1),a()),s&2){let e=t.$implicit;d("ngValue",e.value)("disabled",e.disabled),r(),E(e.label)}}function Rs(s,t){if(s&1&&(o(0,"option",178),c(1),a()),s&2){let e=t.$implicit;d("ngValue",e.value)("disabled",e.disabled),r(),E(e.label)}}function Os(s,t){if(s&1&&(o(0,"option",68),c(1),a()),s&2){let e=t.$implicit;d("ngValue",e.id),r(),E(e.Anio)}}function Ds(s,t){if(s&1&&(o(0,"option",68),c(1),a()),s&2){let e=t.$implicit;d("ngValue",e.key),r(),E(e.label)}}function Ls(s,t){if(s&1){let e=b();o(0,"div",199)(1,"div",148)(2,"div",25)(3,"select",149),T("ngModelChange",function(i){p(e);let l=u(3);return M(l.modAnioAsignacionesId,i)||(l.modAnioAsignacionesId=i),_(i)}),g("change",function(){p(e);let i=u(3);return _(i.onCambioFiltrosModificacion())}),o(4,"option",68),c(5,"Seleccione a\xF1o"),a(),h(6,Os,2,2,"option",27),a(),o(7,"label"),c(8,"Gesti\xF3n (plan de estudios)"),a()()(),o(9,"div",200)(10,"div",25)(11,"select",149),T("ngModelChange",function(i){p(e);let l=u(3);return M(l.modResolucionKey,i)||(l.modResolucionKey=i),_(i)}),g("change",function(){p(e);let i=u(3);return i.onCambioModResolucion(),_(i.onCambioFiltrosModificacion())}),o(12,"option",68),c(13,"Seleccione resoluci\xF3n"),a(),h(14,Ds,2,2,"option",27),a(),o(15,"label"),c(16,"Resoluci\xF3n"),a()()()()}if(s&2){let e=u(3);r(3),w("ngModel",e.modAnioAsignacionesId),r(),d("ngValue",""),r(2),d("ngForOf",e.anios),r(5),w("ngModel",e.modResolucionKey),r(),d("ngValue",""),r(2),d("ngForOf",e.resolucionOptionsAcciones)}}function js(s,t){s&1&&(o(0,"div",152),c(1,"Fuera de rango de edad"),a())}function Bs(s,t){if(s&1&&(te(0),o(1,"div")(2,"span",152),c(3,"Curso:"),a(),c(4),a(),o(5,"div")(6,"span",152),c(7,"Paralelo:"),a(),c(8),a(),o(9,"div")(10,"span",152),c(11,"Turno:"),a(),c(12),a(),ie()),s&2){let e=u().$implicit;r(4),I(" ",e.cursoActual),r(4),I(" ",e.paraleloActual),r(4),I(" ",e.turnoActual)}}function $s(s,t){if(s&1&&(te(0),o(1,"div")(2,"span",152),c(3,"Curso:"),a(),c(4),a(),o(5,"div")(6,"span",152),c(7,"Paralelo:"),a(),c(8),a(),o(9,"div")(10,"span",152),c(11,"Turno:"),a(),c(12),a(),ie()),s&2){let e=u().$implicit;r(4),I(" ",e.cursoNuevo),r(4),I(" ",e.paraleloNuevo),r(4),I(" ",e.turnoNuevo)}}function Gs(s,t){if(s&1){let e=b();o(0,"tr",201),g("click",function(){let i=p(e).$implicit,l=u(3);return _(l.toggleCheckPreviewRow(i))}),o(1,"td",202)(2,"input",203),T("ngModelChange",function(i){let l=p(e).$implicit;return M(l.checked,i)||(l.checked=i),_(i)}),g("click",function(i){return p(e),_(i.stopPropagation())}),a()(),o(3,"td",127)(4,"div",204),c(5),a(),h(6,js,2,0,"div",205),a(),o(7,"td",202),c(8),a(),o(9,"td",202),c(10),a(),o(11,"td",202)(12,"button",206),g("click",function(i){let l=p(e).$implicit,m=u(3);return i.stopPropagation(),_(m.abrirAsignadorMateriasDesdeInscripcion(l.row))}),c(13),a()(),o(14,"td",127),h(15,Bs,13,3,"ng-container",61),a(),o(16,"td",202),c(17),a(),o(18,"td",127),h(19,$s,13,3,"ng-container",61),a()()}if(s&2){let e=t.$implicit,n=u(3);d("ngClass",N(20,Wt,n.getTurnoRowClass(e.turnoActual),e.fueraRangoEdad?"opacity-50":"")),r(),d("ngClass",n.getTurnoRowClass(e.turnoActual)),r(),w("ngModel",e.checked),d("disabled",e.fueraRangoEdad),r(),d("ngClass",n.getTurnoRowClass(e.turnoActual)),r(2),E(e.nombre),r(),d("ngIf",e.fueraRangoEdad),r(),d("ngClass",n.getTurnoRowClass(e.turnoActual)),r(),E(e.ci),r(),d("ngClass",n.getTurnoRowClass(e.turnoActual)),r(),E(e.edad??"-"),r(),d("ngClass",N(23,Wt,n.getTurnoRowClass(e.turnoActual),e.cantidadAsignaciones>0?"asig-has":"")),r(),d("ngClass",e.cantidadAsignaciones>0?"text-danger fw-bold":"text-muted"),r(),I(" ",e.cantidadAsignaciones," "),r(),d("ngClass",n.getTurnoRowClass(e.turnoActual)),r(),d("ngIf",e.checked),r(),d("ngClass",n.getTurnoRowClass(e.turnoActual)),r(),E(e.checked?"\u2192":""),r(),d("ngClass",n.getTurnoRowClass(e.turnoActual)),r(),d("ngIf",e.checked)}}function Us(s,t){if(s&1){let e=b();o(0,"div"),x(1,"hr",179),o(2,"div",104)(3,"div",180)(4,"button",110),g("click",function(){p(e);let i=u(2);return _(i.seleccionarTodosModificacion(!0))}),c(5,"Seleccionar todos"),a(),o(6,"button",110),g("click",function(){p(e);let i=u(2);return _(i.seleccionarTodosModificacion(!1))}),c(7,"Limpiar"),a(),o(8,"div",152),c(9),a()(),o(10,"div",181),c(11),a()(),o(12,"div",182)(13,"div",105)(14,"div",183)(15,"input",184),T("ngModelChange",function(i){p(e);let l=u(2);return M(l.modCambiarCurso,i)||(l.modCambiarCurso=i),_(i)}),g("change",function(){p(e);let i=u(2);return _(i.onCambioFiltrosModificacion())}),a(),o(16,"label",185),c(17,"Cambiar curso solicitado"),a()(),o(18,"div",186)(19,"select",187),T("ngModelChange",function(i){p(e);let l=u(2);return M(l.modNuevoCurso,i)||(l.modNuevoCurso=i),_(i)}),g("change",function(){p(e);let i=u(2);return _(i.onCambioFiltrosModificacion())}),o(20,"option",68),c(21,"Seleccione curso"),a(),h(22,Fs,2,3,"option",165),a(),o(23,"label"),c(24,"Nuevo curso solicitado"),a()()(),o(25,"div",105)(26,"div",183)(27,"input",188),T("ngModelChange",function(i){p(e);let l=u(2);return M(l.modCambiarParalelo,i)||(l.modCambiarParalelo=i),_(i)}),g("change",function(){p(e);let i=u(2);return _(i.onCambioFiltrosModificacion())}),a(),o(28,"label",189),c(29,"Cambiar paralelo solicitado"),a()(),o(30,"div",186)(31,"input",190),T("ngModelChange",function(i){p(e);let l=u(2);return M(l.modNuevoParalelo,i)||(l.modNuevoParalelo=i),_(i)}),g("ngModelChange",function(i){p(e);let l=u(2);return l.modNuevoParalelo=(i??"").toString().toUpperCase(),_(l.onCambioFiltrosModificacion())}),a(),o(32,"label"),c(33,"Nuevo paralelo (vac\xEDo = SIN DETERMINAR)"),a()()(),o(34,"div",105)(35,"div",183)(36,"input",191),T("ngModelChange",function(i){p(e);let l=u(2);return M(l.modCambiarTurno,i)||(l.modCambiarTurno=i),_(i)}),g("change",function(){p(e);let i=u(2);return _(i.onCambioFiltrosModificacion())}),a(),o(37,"label",192),c(38,"Cambiar turno"),a()(),o(39,"div",186)(40,"select",187),T("ngModelChange",function(i){p(e);let l=u(2);return M(l.modNuevoTurno,i)||(l.modNuevoTurno=i),_(i)}),g("change",function(){p(e);let i=u(2);return _(i.onCambioFiltrosModificacion())}),o(41,"option",68),c(42,"Seleccione turno"),a(),h(43,Rs,2,3,"option",165),a(),o(44,"label"),c(45,"Nuevo turno"),a()()()(),o(46,"div",111)(47,"div",183)(48,"input",193),T("ngModelChange",function(i){p(e);let l=u(2);return M(l.modQuitarAsignaciones,i)||(l.modQuitarAsignaciones=i),_(i)}),g("change",function(){p(e);let i=u(2);return _(i.onCambioFiltrosModificacion())}),a(),o(49,"label",194),c(50,"Quitar todas sus asignaciones (gesti\xF3n + resoluci\xF3n seleccionadas)"),a()(),h(51,Ls,17,6,"div",195),a(),o(52,"div",141)(53,"table",118)(54,"thead")(55,"tr")(56,"th",196),c(57,"Sel"),a(),o(58,"th"),c(59,"Nombre"),a(),o(60,"th",197),c(61,"CI"),a(),o(62,"th",143),c(63,"Edad"),a(),o(64,"th",143),c(65,"Asig"),a(),o(66,"th"),c(67,"Actual"),a(),o(68,"th",120),c(69,"\u2192"),a(),o(70,"th"),c(71,"Nuevo"),a()()(),o(72,"tbody"),h(73,Gs,20,26,"tr",198),a()()()()}if(s&2){let e=u(2);r(9),I("Seleccionados: ",e.modSeleccionadosCount()),r(2),I(" Total cargados: ",e.modPreviewRows.length," "),r(4),w("ngModel",e.modCambiarCurso),r(4),w("ngModel",e.modNuevoCurso),d("disabled",!e.modCambiarCurso),r(),d("ngValue",""),r(2),d("ngForOf",e.cursoOptions),r(5),w("ngModel",e.modCambiarParalelo),r(4),w("ngModel",e.modNuevoParalelo),d("disabled",!e.modCambiarParalelo),r(5),w("ngModel",e.modCambiarTurno),r(4),w("ngModel",e.modNuevoTurno),d("disabled",!e.modCambiarTurno),r(),d("ngValue",""),r(2),d("ngForOf",e.turnoOptions),r(5),w("ngModel",e.modQuitarAsignaciones),r(3),d("ngIf",e.modQuitarAsignaciones),r(22),d("ngForOf",e.modPreviewRows)}}function zs(s,t){s&1&&(o(0,"span"),c(1,"Ejecutar"),a())}function qs(s,t){s&1&&(o(0,"span"),c(1,"Procesando..."),a())}function Hs(s,t){if(s&1){let e=b();o(0,"div",74)(1,"h5",75),c(2,"Acciones grupales \xB7 Modificaci\xF3n de inscripciones"),a(),o(3,"button",76),g("click",function(){let i=p(e).$implicit;return _(i.dismiss("close"))}),a()(),o(4,"div",77)(5,"div",162),c(6," 1) Seleccione los "),o(7,"b"),c(8,"datos actuales"),a(),c(9," (curso + paralelo) y presione "),o(10,"b"),c(11,"Cargar lista"),a(),c(12,". 2) Defina los "),o(13,"b"),c(14,"nuevos datos"),a(),c(15,". 3) Ejecute solo a los que est\xE9n tickeados. "),a(),o(16,"div",78)(17,"div",163)(18,"div",25)(19,"select",164),T("ngModelChange",function(i){p(e);let l=u();return M(l.modCursoActual,i)||(l.modCursoActual=i),_(i)}),o(20,"option",68),c(21,"Seleccione curso (actual)"),a(),h(22,Ts,2,3,"option",165),a(),o(23,"label"),c(24,"Curso solicitado (actual)"),a()()(),o(25,"div",163)(26,"div",166)(27,"div",167)(28,"input",168),T("ngModelChange",function(i){p(e);let l=u();return M(l.modParaleloActual,i)||(l.modParaleloActual=i),_(i)}),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l,"modParaleloActual"))}),a(),o(29,"label"),c(30,"Paralelo (actual)"),a()(),o(31,"div",45)(32,"input",169),T("ngModelChange",function(i){p(e);let l=u();return M(l.modParaleloActualEsVacio,i)||(l.modParaleloActualEsVacio=i),_(i)}),a(),o(33,"label",170),c(34,"SIN DETERMINAR"),a()()(),o(35,"div",171),c(36,"(El turno se ignora al cargar la lista; se diferencian filas por color)"),a()()(),o(37,"div",172)(38,"div",79)(39,"div",25)(40,"input",173),T("ngModelChange",function(i){p(e);let l=u();return M(l.modEdadMin,i)||(l.modEdadMin=i),_(i)}),g("change",function(){p(e);let i=u();return _(i.onCambioFiltrosModificacion())}),a(),o(41,"label"),c(42,"Edad m\xEDnima"),a()()(),o(43,"div",79)(44,"div",25)(45,"input",174),T("ngModelChange",function(i){p(e);let l=u();return M(l.modEdadMax,i)||(l.modEdadMax=i),_(i)}),g("change",function(){p(e);let i=u();return _(i.onCambioFiltrosModificacion())}),a(),o(46,"label"),c(47,"Edad m\xE1xima"),a()()(),o(48,"div",175)(49,"button",176),g("click",function(){p(e);let i=u();return _(i.cargarListaModificacion())}),h(50,Ps,2,0,"span",61)(51,Vs,2,0,"span",61),a(),o(52,"button",177),g("click",function(){p(e);let i=u();return _(i.limpiarListaModificacion())}),c(53,"Limpiar lista"),a()()(),h(54,Ns,6,0,"div",94)(55,ks,5,0,"div",95)(56,Us,74,18,"div",61),a(),o(57,"div",98)(58,"button",102),g("click",function(){let i=p(e).$implicit;return _(i.dismiss("cancel"))}),c(59,"Cancelar"),a(),o(60,"button",138),g("click",function(){let i=p(e).$implicit,l=u();return _(l.ejecutarModificacionGrupal(i))}),h(61,zs,2,0,"span",61)(62,qs,2,0,"span",61),a()()}if(s&2){let e=u();r(19),w("ngModel",e.modCursoActual),r(),d("ngValue",""),r(2),d("ngForOf",e.cursoOptions),r(6),w("ngModel",e.modParaleloActual),d("disabled",e.modParaleloActualEsVacio),r(4),w("ngModel",e.modParaleloActualEsVacio),r(8),w("ngModel",e.modEdadMin),r(5),w("ngModel",e.modEdadMax),r(4),d("disabled",e.isLoadingListaModificacion),r(),d("ngIf",!e.isLoadingListaModificacion),r(),d("ngIf",e.isLoadingListaModificacion),r(),d("disabled",e.isLoadingListaModificacion),r(2),d("ngIf",e.isLoadingListaModificacion),r(),d("ngIf",!e.isLoadingListaModificacion&&e.modPreviewRows.length===0),r(),d("ngIf",e.modPreviewRows.length>0),r(4),d("disabled",!e.puedeEjecutarModificacion()),r(),d("ngIf",!e.isEjecutandoModificacionGrupal),r(),d("ngIf",e.isEjecutandoModificacionGrupal)}}function Ws(s,t){if(s&1&&x(0,"i",207),s&2){let e=u(2);d("ngClass",N(1,q,e.getSortDirinfoestudiantesifas("NombreInstitucion")==="asc",e.getSortDirinfoestudiantesifas("NombreInstitucion")==="desc"))}}function Qs(s,t){if(s&1){let e=b();o(0,"th",59),g("click",function(i){p(e);let l=u();return _(l.sortByinfoestudiantesifas("NombreInstitucion",i))}),c(1," NombreInstitucion "),h(2,Ws,1,4,"i",60),a()}if(s&2){let e=u();r(2),d("ngIf",e.isSortedinfoestudiantesifas("NombreInstitucion"))}}function Ks(s,t){if(s&1&&x(0,"i",207),s&2){let e=u();d("ngClass",N(1,q,e.getSortDirinfoestudiantesifas("Anio")==="asc",e.getSortDirinfoestudiantesifas("Anio")==="desc"))}}function Ys(s,t){if(s&1&&x(0,"i",207),s&2){let e=u();d("ngClass",N(1,q,e.getSortDirinfoestudiantesifas("FechInsc")==="asc",e.getSortDirinfoestudiantesifas("FechInsc")==="desc"))}}function Xs(s,t){if(s&1&&x(0,"i",207),s&2){let e=u(2);d("ngClass",N(1,q,e.getSortDirinfoestudiantesifas("Ap_Paterno")==="asc",e.getSortDirinfoestudiantesifas("Ap_Paterno")==="desc"))}}function Zs(s,t){if(s&1){let e=b();o(0,"th",59),g("click",function(i){p(e);let l=u();return _(l.sortByinfoestudiantesifas("Ap_Paterno",i))}),c(1," Ap_Paterno "),h(2,Xs,1,4,"i",60),a()}if(s&2){let e=u();r(2),d("ngIf",e.isSortedinfoestudiantesifas("Ap_Paterno"))}}function Js(s,t){if(s&1&&x(0,"i",207),s&2){let e=u(2);d("ngClass",N(1,q,e.getSortDirinfoestudiantesifas("Ap_Materno")==="asc",e.getSortDirinfoestudiantesifas("Ap_Materno")==="desc"))}}function eo(s,t){if(s&1){let e=b();o(0,"th",59),g("click",function(i){p(e);let l=u();return _(l.sortByinfoestudiantesifas("Ap_Materno",i))}),c(1," Ap_Materno "),h(2,Js,1,4,"i",60),a()}if(s&2){let e=u();r(2),d("ngIf",e.isSortedinfoestudiantesifas("Ap_Materno"))}}function to(s,t){if(s&1&&x(0,"i",207),s&2){let e=u(2);d("ngClass",N(1,q,e.getSortDirinfoestudiantesifas("Nombre")==="asc",e.getSortDirinfoestudiantesifas("Nombre")==="desc"))}}function io(s,t){if(s&1){let e=b();o(0,"th",59),g("click",function(i){p(e);let l=u();return _(l.sortByinfoestudiantesifas("Nombre",i))}),c(1," Nombre "),h(2,to,1,4,"i",60),a()}if(s&2){let e=u();r(2),d("ngIf",e.isSortedinfoestudiantesifas("Nombre"))}}function no(s,t){if(s&1&&x(0,"i",207),s&2){let e=u(2);d("ngClass",N(1,q,e.getSortDirinfoestudiantesifas("CI")==="asc",e.getSortDirinfoestudiantesifas("CI")==="desc"))}}function ao(s,t){if(s&1){let e=b();o(0,"th",59),g("click",function(i){p(e);let l=u();return _(l.sortByinfoestudiantesifas("CI",i))}),c(1," Carnet "),h(2,no,1,4,"i",60),a()}if(s&2){let e=u();r(2),d("ngIf",e.isSortedinfoestudiantesifas("CI"))}}function so(s,t){if(s&1&&x(0,"i",207),s&2){let e=u();d("ngClass",N(1,q,e.getSortDirinfoestudiantesifas("Categoria")==="asc",e.getSortDirinfoestudiantesifas("Categoria")==="desc"))}}function oo(s,t){if(s&1&&x(0,"i",207),s&2){let e=u();d("ngClass",N(1,q,e.getSortDirinfoestudiantesifas("Curso_Solicitado")==="asc",e.getSortDirinfoestudiantesifas("Curso_Solicitado")==="desc"))}}function ro(s,t){if(s&1&&x(0,"i",207),s&2){let e=u();d("ngClass",N(1,q,e.getSortDirinfoestudiantesifas("Paralelo_Solicitado")==="asc",e.getSortDirinfoestudiantesifas("Paralelo_Solicitado")==="desc"))}}function lo(s,t){if(s&1&&x(0,"i",207),s&2){let e=u();d("ngClass",N(1,q,e.getSortDirinfoestudiantesifas("Turno")==="asc",e.getSortDirinfoestudiantesifas("Turno")==="desc"))}}function co(s,t){if(s&1&&x(0,"i",207),s&2){let e=u();d("ngClass",N(1,q,e.getSortDirinfoestudiantesifas("CantidadMateriasAsignadas")==="asc",e.getSortDirinfoestudiantesifas("CantidadMateriasAsignadas")==="desc"))}}function uo(s,t){if(s&1&&x(0,"i",207),s&2){let e=u();d("ngClass",N(1,q,e.getSortDirinfoestudiantesifas("Verificacion")==="asc",e.getSortDirinfoestudiantesifas("Verificacion")==="desc"))}}function mo(s,t){if(s&1&&(o(0,"tr")(1,"td",57)(2,"div",112)(3,"span",113),c(4,"Cargando..."),a()()()()),s&2){let e=u();r(),U("colspan",e.getTableColspan())}}function po(s,t){if(s&1&&(o(0,"tr")(1,"td",208)(2,"div",209)(3,"div",152),c(4,"No hay datos disponibles"),a(),x(5,"ng-lottie",210),a()()()),s&2){let e=u();r(),U("colspan",e.getTableColspan()),r(4),d("options",e._tools.optionsnohayinformacion)}}function _o(s,t){if(s&1&&(o(0,"td"),c(1),a()),s&2){let e=u().$implicit;r(),E(e.NombreInstitucion)}}function fo(s,t){if(s&1&&(o(0,"td"),x(1,"span",213),a()),s&2){let e=u().$implicit,n=u();r(),d("innerHTML",n.resaltarTexto(e.Ap_Paterno),k)}}function go(s,t){if(s&1&&(o(0,"td"),x(1,"span",213),a()),s&2){let e=u().$implicit,n=u();r(),d("innerHTML",n.resaltarTexto(e.Ap_Materno),k)}}function ho(s,t){if(s&1&&(o(0,"td"),x(1,"span",213),o(2,"div",85),c(3),a()()),s&2){let e=u().$implicit,n=u();r(),d("innerHTML",n.resaltarTexto(e.Nombre),k),r(2),I("edad: ",e.Edad," a\xF1os")}}function xo(s,t){if(s&1&&(o(0,"td"),x(1,"span",213),a()),s&2){let e=u().$implicit,n=u();r(),d("innerHTML",n.resaltarTexto(e.CI),k)}}function vo(s,t){if(s&1&&x(0,"img",133),s&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"asignacion.svg",F)}}function Eo(s,t){if(s&1&&x(0,"ng-lottie",134),s&2){let e=u(2);d("options",e._tools.optionssubgestion)}}function bo(s,t){if(s&1&&x(0,"img",133),s&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"pdf.svg",F)}}function Co(s,t){if(s&1&&x(0,"ng-lottie",134),s&2){let e=u(2);d("options",e._tools.optionsarchivopdf)}}function So(s,t){if(s&1&&x(0,"img",133),s&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"historial.svg",F)}}function yo(s,t){if(s&1&&x(0,"ng-lottie",134),s&2){let e=u(2);d("options",e._tools.optionsarchive)}}function Io(s,t){if(s&1&&x(0,"img",133),s&2){let e=u(3);d("src",e._tools.rutabtniconsanimaciones+"money.svg",F)}}function Ao(s,t){if(s&1&&x(0,"ng-lottie",134),s&2){let e=u(3);d("options",e._tools.optionsmoney)}}function wo(s,t){if(s&1){let e=b();o(0,"button",221),g("click",function(){p(e);let i=u().$implicit,l=u();return _(l.abrirRegistroPagoDesdeInscripcion(i))})("mouseenter",function(){p(e);let i=u().$implicit,l=u();return _(l._tools.hoverBotonMap["visualizacioninfoestudiantesifas1-"+i.id]=!0)})("mouseleave",function(){p(e);let i=u().$implicit,l=u();return _(l._tools.hoverBotonMap["visualizacioninfoestudiantesifas1-"+i.id]=!1)}),x(1,"span",222),h(2,Io,1,1,"img",130)(3,Ao,1,1,"ng-lottie",131),a()}if(s&2){let e=u().$implicit,n=u();r(),d("ngClass",pe(3,Ba,e._tieneDeuda)),r(),d("ngIf",!n._tools.hoverBotonMap["visualizacioninfoestudiantesifas1-"+e.id]),r(),d("ngIf",n._tools.hoverBotonMap["visualizacioninfoestudiantesifas1-"+e.id])}}function Mo(s,t){if(s&1&&x(0,"img",133),s&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"pencil.svg",F)}}function To(s,t){if(s&1&&x(0,"ng-lottie",134),s&2){let e=u(2);d("options",e._tools.optionsEditar)}}function Po(s,t){if(s&1&&x(0,"img",133),s&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"delete.svg",F)}}function Vo(s,t){if(s&1&&x(0,"ng-lottie",134),s&2){let e=u(2);d("options",e._tools.optionsEliminar)}}function No(s,t){if(s&1){let e=b();o(0,"tr",211),g("contextmenu",function(i){let l=p(e).$implicit,m=u();return _(m.abrirMenuinfoestudiantesifas(i,l))}),o(1,"td",57),c(2),a(),h(3,_o,2,1,"td",61),o(4,"td")(5,"button",212),g("click",function(i){let l=p(e).$implicit,m=u();return _(m.abrirHistorialDesdeInscripcion(l,i))}),c(6),a()(),o(7,"td"),c(8),W(9,"dateFormat"),a(),h(10,fo,2,1,"td",61)(11,go,2,1,"td",61)(12,ho,4,2,"td",61)(13,xo,2,1,"td",61),o(14,"td"),x(15,"span",213),a(),o(16,"td"),x(17,"span",213),a(),o(18,"td"),x(19,"span",213),a(),o(20,"td"),x(21,"span",213),a(),o(22,"td",57),x(23,"span",213),a(),o(24,"td"),x(25,"span",213),a(),o(26,"td",214)(27,"button",215),g("click",function(){let i=p(e).$implicit,l=u();return _(l.abrirAsignadorMateriasDesdeInscripcion(i))})("mouseenter",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["visualizacioninfoestudiantesifas-"+i.id]=!0)})("mouseleave",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["visualizacioninfoestudiantesifas-"+i.id]=!1)}),h(28,vo,1,1,"img",130)(29,Eo,1,1,"ng-lottie",131),a(),o(30,"button",216),g("click",function(){let i=p(e).$implicit,l=u();return _(l.generarReporteInscripcion(i))})("mouseenter",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["visualizacioninfoestudiantesifaspdf-"+i.id]=!0)})("mouseleave",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["visualizacioninfoestudiantesifaspdf-"+i.id]=!1)}),h(31,bo,1,1,"img",130)(32,Co,1,1,"ng-lottie",131),a(),o(33,"button",217),g("click",function(i){let l=p(e).$implicit,m=u();return _(m.abrirHistorialDesdeInscripcion(l,i))})("mouseenter",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["visualizacioninfoestudiantesifas12-"+i.id]=!0)})("mouseleave",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["visualizacioninfoestudiantesifas12-"+i.id]=!1)}),h(34,So,1,1,"img",130)(35,yo,1,1,"ng-lottie",131),a(),h(36,wo,4,5,"button",218),o(37,"button",219),g("click",function(){let i=p(e).$implicit,l=u();return _(l.Seleccionarinfoestudiantesifas(i.id))})("mouseenter",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["edicioninfoestudiantesifas-"+i.id]=!0)})("mouseleave",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["edicioninfoestudiantesifas-"+i.id]=!1)}),h(38,Mo,1,1,"img",130)(39,To,1,1,"ng-lottie",131),a(),o(40,"button",220),g("click",function(){let i=p(e).$implicit,l=u();return _(l.Eliminarinfoestudiantesifas(i.id))})("mouseenter",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["eliminacioninfoestudiantesifas-"+i.id]=!0)})("mouseleave",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["eliminacioninfoestudiantesifas-"+i.id]=!1)}),h(41,Po,1,1,"img",130)(42,Vo,1,1,"ng-lottie",131),a()()()}if(s&2){let e=t.$implicit,n=t.index,i=u();r(2),E((i.paginainfoestudiantesifas-1)*i.pageSizeinfoestudiantesifas+(n+1)),r(),d("ngIf",i.esSuperAdmin),r(2),d("ngClass",pe(28,ja,e.seleccionado)),r(),I(" ",e.Anio+" | "+(e.Resolucion||"INACTIVO")," "),r(2),E(Q(9,26,e.FechInsc)),r(2),d("ngIf",!i.estudianteId),r(),d("ngIf",!i.estudianteId),r(),d("ngIf",!i.estudianteId),r(),d("ngIf",!i.estudianteId),r(2),d("innerHTML",i.resaltarTexto(e.Categoria),k),r(2),d("innerHTML",i.resaltarTexto(e.Curso_Solicitado),k),r(2),d("innerHTML",i.resaltarTexto(e.Paralelo_Solicitado==null?" ":e.Paralelo_Solicitado),k),r(2),d("innerHTML",i.resaltarTexto(e.Turno),k),r(2),d("innerHTML",i.resaltarTexto(e.CantidadMateriasAsignadas),k),r(2),d("innerHTML",i.resaltarTexto(e.Verificacion),k),r(3),d("ngIf",!i._tools.hoverBotonMap["visualizacioninfoestudiantesifas-"+e.id]),r(),d("ngIf",i._tools.hoverBotonMap["visualizacioninfoestudiantesifas-"+e.id]),r(2),d("ngIf",!i._tools.hoverBotonMap["visualizacioninfoestudiantesifaspdf-"+e.id]),r(),d("ngIf",i._tools.hoverBotonMap["visualizacioninfoestudiantesifaspdf-"+e.id]),r(2),d("ngIf",!i._tools.hoverBotonMap["visualizacioninfoestudiantesifas12-"+e.id]),r(),d("ngIf",i._tools.hoverBotonMap["visualizacioninfoestudiantesifas12-"+e.id]),r(),d("ngIf",i.habilitarSistemaPagosCarreras),r(2),d("ngIf",!i._tools.hoverBotonMap["edicioninfoestudiantesifas-"+e.id]),r(),d("ngIf",i._tools.hoverBotonMap["edicioninfoestudiantesifas-"+e.id]),r(2),d("ngIf",!i._tools.hoverBotonMap["eliminacioninfoestudiantesifas-"+e.id]),r(),d("ngIf",i._tools.hoverBotonMap["eliminacioninfoestudiantesifas-"+e.id])}}function ko(s,t){if(s&1&&(o(0,"option",223),c(1),a()),s&2){let e=t.$implicit;d("value",e),r(),I("",e," por p\xE1gina")}}function Fo(s,t){if(s&1&&(o(0,"div",32)(1,"div",261),x(2,"input",262),o(3,"label"),c(4,"Instituci\xF3n"),a(),o(5,"div",239),c(6,"Este campo es obligatorio*"),a()()()),s&2){let e=u(2);r(2),d("ngClass",e.ValidacioninfoestudiantesifasxElemento("instituciones_id"))}}function Ro(s,t){if(s&1&&(o(0,"div"),x(1,"img",263),a()),s&2){let e,n=u(2);r(),d("src",n._tools.ruta+((e=n.newinfoestudiantesifas.get("FotoPago"))==null?null:e.value),F)}}function Oo(s,t){if(s&1&&(o(0,"div",32)(1,"div",152),c(2,"NO SE DISPONE DE FOTO COMPROBANTE DE PAGO EN DIGITAL"),a(),x(3,"ng-lottie",264),a()),s&2){let e=u(2);r(3),d("options",e._tools.optionsmoney)}}function Do(s,t){if(s&1){let e=b();o(0,"div",265)(1,"div")(2,"div",266),c(3,"Esperando FotoPago del celular..."),a(),o(4,"div",267),c(5),a()(),o(6,"button",268),g("click",function(){p(e);let i=u(2);return _(i.cancelarEsperaCaptura())}),c(7,"Cancelar"),a()()}if(s&2){let e=u(2);r(5),I("Estado: ",e.capturaStatus||"PENDING",". Puedes seguir llenando el formulario.")}}function Lo(s,t){s&1&&(o(0,"div",280),x(1,"span",281),c(2," Buscando... "),a())}function jo(s,t){if(s&1){let e=b();o(0,"div",275),g("click",function(){let i=p(e).$implicit,l=u(4);return _(l.seleccionarEstudiante(i))}),o(1,"div",282),x(2,"span",213),o(3,"small",152),c(4,"CI: "),x(5,"span",213),a()()()}if(s&2){let e=t.$implicit,n=u(4);r(2),d("innerHTML",n.resaltarNombreEnBuscadorEstudiante(e),k),r(3),d("innerHTML",n.resaltarCIEnBuscadorEstudiante(e.CI),k)}}function Bo(s,t){if(s&1){let e=b();o(0,"div",280)(1,"div",283)(2,"button",177),g("click",function(i){return p(e),u(4).estudiantesPrevPage(),_(i.stopPropagation())}),c(3," Anterior "),a(),o(4,"span",85),c(5),a(),o(6,"button",177),g("click",function(i){return p(e),u(4).estudiantesNextPage(),_(i.stopPropagation())}),c(7," Siguiente "),a()()()}if(s&2){let e=u(4);r(2),d("disabled",e.estudiantesPage<=1),r(3),J("P\xE1gina ",e.estudiantesPage," de ",e.estudiantesTotalPages),r(),d("disabled",e.estudiantesPage>=e.estudiantesTotalPages)}}function $o(s,t){if(s&1){let e=b();o(0,"div",274)(1,"div",275),g("click",function(){p(e);let i=u(3);return _(i.abrirRegistroEstudianteDesdeBuscador())}),o(2,"div",276)(3,"div")(4,"div",266),c(5,"\xBFNO ENCONTR\xD3 AL ESTUDIANTE?, REG\xCDSTRE SU INFO. PERSONAL."),a(),o(6,"div",85),c(7,"Click para registrar y continuar con la inscripci\xF3n."),a()(),o(8,"span",277),c(9,"REGISTRAR"),a()()(),h(10,Lo,3,0,"div",278)(11,jo,6,2,"div",279)(12,Bo,8,4,"div",278),a()}if(s&2){let e=u(3);r(10),d("ngIf",e.isBuscandoEstudiante),r(),d("ngForOf",e.estudiantesPaginados),r(),d("ngIf",!e.isBuscandoEstudiante&&((e.estudiantesFiltrados==null?null:e.estudiantesFiltrados.length)||0)>e.estudiantesPageSize)}}function Go(s,t){if(s&1&&(o(0,"div"),x(1,"img",284),a()),s&2){let e=u(3);r(),d("src",e._tools.ruta+e.estudianteSeleccionado.Foto,F)}}function Uo(s,t){if(s&1&&(o(0,"div",32)(1,"div",152),c(2,"NO SE DISPONE DE FOTO DEL ESTUDIANTE"),a(),x(3,"ng-lottie",264),a()),s&2){let e=u(3);r(3),d("options",e._tools.optionsavatarmasculinoanimado)}}function zo(s,t){if(s&1){let e=b();o(0,"div",269)(1,"div",32)(2,"div",270)(3,"input",271),g("focus",function(){p(e);let i=u(2);return _(i.mostrarListaEstudiantes=!0)})("keyup.enter",function(){p(e);let i=u(2);return _(i.buscarEstudiantes())}),a(),o(4,"label"),c(5,"Buscar estudiante (CI / Apellidos / Nombre)"),a(),h(6,$o,13,3,"div",272),a(),o(7,"div",273),h(8,Go,2,1,"div",229)(9,Uo,4,1,"ng-template",null,16,V),a()()()}if(s&2){let e=z(10),n=u(2);r(3),d("formControl",n.estudianteInput),r(3),d("ngIf",n.mostrarListaEstudiantes&&(n.estudianteInput.value||"").toString().trim()!==""&&n.busquedaEstudiantesEjecutada),r(2),d("ngIf",n.estudianteSeleccionado==null?null:n.estudianteSeleccionado.Foto)("ngIfElse",e)}}function qo(s,t){if(s&1&&(o(0,"option",285),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Ho(s,t){if(s&1&&(o(0,"option",285),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Wo(s,t){if(s&1&&(o(0,"option",285),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Qo(s,t){if(s&1&&(o(0,"option",285),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Ko(s,t){s&1&&(o(0,"small",294),c(1,"INACTIVO"),a())}function Yo(s,t){if(s&1){let e=b();o(0,"div",275),g("click",function(){let i=p(e).$implicit,l=u(4);return _(l.seleccionarDocenteAdmin(i))}),o(1,"div",282)(2,"span"),c(3),a(),h(4,Ko,2,0,"small",293),a()()}if(s&2){let e=t.$implicit,n=u(4);ce("opacity",n.docenteInactivo(e)?"0.65":"1")("pointer-events",n.docenteInactivo(e)?"none":"auto"),G("disabled",n.docenteInactivo(e)),r(3),E(n.getNombreCompletoDocente(e)),r(),d("ngIf",n.docenteInactivo(e))}}function Xo(s,t){if(s&1&&(o(0,"div",291),h(1,Yo,5,8,"div",292),a()),s&2){let e=u(3);r(),d("ngForOf",e.docentesFiltradosAdmin)}}function Zo(s,t){s&1&&(o(0,"small",294),c(1,"INACTIVO"),a())}function Jo(s,t){if(s&1){let e=b();o(0,"div",275),g("click",function(){let i=p(e).$implicit,l=u(4);return _(l.seleccionarDocentePC(i))}),o(1,"div",282)(2,"span"),c(3),a(),h(4,Zo,2,0,"small",293),a()()}if(s&2){let e=t.$implicit,n=u(4);ce("opacity",n.docenteInactivo(e)?"0.65":"1")("pointer-events",n.docenteInactivo(e)?"none":"auto"),G("disabled",n.docenteInactivo(e)),r(3),E(n.getNombreCompletoDocente(e)),r(),d("ngIf",n.docenteInactivo(e))}}function er(s,t){if(s&1&&(o(0,"div",291),h(1,Jo,5,8,"div",292),a()),s&2){let e=u(3);r(),d("ngForOf",e.docentesFiltradosPC)}}function tr(s,t){s&1&&(o(0,"small",294),c(1,"INACTIVO"),a())}function ir(s,t){if(s&1){let e=b();o(0,"div",275),g("click",function(){let i=p(e).$implicit,l=u(4);return _(l.seleccionarDocenteOtros(i))}),o(1,"div",282)(2,"span"),c(3),a(),h(4,tr,2,0,"small",293),a()()}if(s&2){let e=t.$implicit,n=u(4);ce("opacity",n.docenteInactivo(e)?"0.65":"1")("pointer-events",n.docenteInactivo(e)?"none":"auto"),G("disabled",n.docenteInactivo(e)),r(3),E(n.getNombreCompletoDocente(e)),r(),d("ngIf",n.docenteInactivo(e))}}function nr(s,t){if(s&1&&(o(0,"div",291),h(1,ir,5,8,"div",292),a()),s&2){let e=u(3);r(),d("ngForOf",e.docentesFiltradosOtros)}}function ar(s,t){if(s&1){let e=b();o(0,"div",32)(1,"div",286)(2,"input",287),g("focus",function(){p(e);let i=u(2);return _(i.mostrarListaDocAdmin=!0)}),a(),o(3,"label"),c(4,"Docente (Especialidad)"),a(),h(5,Xo,2,1,"div",288),a(),o(6,"div",286)(7,"input",289),g("focus",function(){p(e);let i=u(2);return _(i.mostrarListaDocPC=!0)}),a(),o(8,"label"),c(9,"Docente Pr\xE1ctica de Conjuntos "),a(),h(10,er,2,1,"div",288),a(),o(11,"div",286)(12,"input",290),g("focus",function(){p(e);let i=u(2);return _(i.mostrarListaDocOtros=!0)}),a(),o(13,"label"),c(14,"Docente Instrumento Complementario"),a(),h(15,nr,2,1,"div",288),a()()}if(s&2){let e=u(2);r(2),d("formControl",e.docAdminInput),r(3),d("ngIf",e.mostrarListaDocAdmin&&e.docAdminInput.value),r(2),d("formControl",e.docPCInput),r(3),d("ngIf",e.mostrarListaDocPC&&e.docPCInput.value),r(2),d("formControl",e.docOtrosInput),r(3),d("ngIf",e.mostrarListaDocOtros&&e.docOtrosInput.value)}}function sr(s,t){if(s&1&&(o(0,"option",285),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function or(s,t){if(s&1&&(o(0,"div",235)(1,"select",295)(2,"option",237),c(3,"Seleccione una opci\xF3n"),a(),h(4,sr,2,3,"option",238),a(),o(5,"label"),c(6,"Instrumento Musical"),a(),o(7,"div",239),c(8,"Este campo es obligatorio*"),a()()),s&2){let e=u(2);r(),d("ngClass",e.ValidacioninfoestudiantesifasxElemento("InstrumentoMusical")),r(3),d("ngForOf",e.InstrumentoMusicalOptions)}}function rr(s,t){if(s&1&&(o(0,"option",285),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function lr(s,t){if(s&1&&(o(0,"div",235)(1,"select",296)(2,"option",237),c(3,"Seleccione una opci\xF3n"),a(),h(4,rr,2,3,"option",238),a(),o(5,"label"),c(6,"Instrumento Musical Secundario"),a(),o(7,"div",239),c(8,"Este campo es obligatorio*"),a()()),s&2){let e=u(2);r(),d("ngClass",e.ValidacioninfoestudiantesifasxElemento("InstrumentoMusicalSecundario")),r(3),d("ngForOf",e.InstrumentoMusicalSecundarioOptions)}}function cr(s,t){if(s&1&&(o(0,"div",32)(1,"div",297)(2,"label"),c(3,"Observacion"),a(),x(4,"quill-editor",298),o(5,"div",239),c(6,"Este campo es obligatorio*"),a()(),o(7,"div",297)(8,"label"),c(9,"Anotaciones"),a(),x(10,"quill-editor",299),o(11,"div",239),c(12,"Este campo es obligatorio*"),a()(),o(13,"div",297)(14,"label"),c(15,"Notas"),a(),x(16,"quill-editor",300),o(17,"div",239),c(18,"Este campo es obligatorio*"),a()()()),s&2){let e=u(2);r(4),d("modules",e.modulesQuillEdicion)("ngClass",e.ValidacioninfoestudiantesifasxElemento("Observacion")),r(6),d("modules",e.modulesQuillEdicion)("ngClass",e.ValidacioninfoestudiantesifasxElemento("Anotaciones")),r(6),d("modules",e.modulesQuillEdicion)("ngClass",e.ValidacioninfoestudiantesifasxElemento("Notas"))}}function dr(s,t){if(s&1){let e=b();o(0,"button",303),g("click",function(){p(e);let i=u(3);return _(i.AutoCompletarLastinfoestudiantesifas())}),o(1,"span",35),x(2,"ng-lottie",36),a(),o(3,"span"),c(4,"AUTO COMPLETAR "),a(),x(5,"span",37),a()}if(s&2){let e=u(3);r(2),d("options",e._tools.optionsautocompletar)}}function ur(s,t){if(s&1&&(o(0,"div",301),h(1,dr,6,1,"button",302),a()),s&2){let e=u(2);r(),d("ngIf",!e.AnimacionCargabtnModalinfoestudiantesifas)}}function mr(s,t){if(s&1){let e=b();o(0,"button",154),g("click",function(){p(e);let i=u().$implicit,l=u();return i.dismiss(),_(l.resetinfoestudiantesifas())}),o(1,"span",35),x(2,"ng-lottie",36),a(),o(3,"span"),c(4,"CANCELAR"),a(),x(5,"span",37),a()}if(s&2){let e=u(2);r(2),d("options",e._tools.optionscancelar)}}function pr(s,t){if(s&1){let e=b();o(0,"button",159),g("click",function(){p(e);let i=u(2);return _(i.AgregarModificarinfoestudiantesifas())}),x(1,"span",160),a()}s&2&&d("disabled",!0)}function _r(s,t){if(s&1){let e=b();o(0,"button",304),g("click",function(){p(e);let i=u(2);return _(i.AgregarModificarinfoestudiantesifas())}),o(1,"span",35),x(2,"ng-lottie",36),a(),o(3,"span"),c(4),a(),x(5,"span",37),a()}if(s&2){let e,n,i=u(2);r(2),d("options",(e=i.newinfoestudiantesifas.get("id"))!=null&&e.value?i._tools.optionsEditar:i._tools.optionsAdicionar),r(2),E((n=i.newinfoestudiantesifas.get("id"))!=null&&n.value?"MODIFICAR":"REGISTRAR")}}function fr(s,t){if(s&1){let e=b();o(0,"div",74)(1,"h4",75),c(2),a(),o(3,"button",224),g("click",function(){let i=p(e).$implicit,l=u();return i.dismiss(),_(l.resetinfoestudiantesifas())}),a()(),o(4,"div",77)(5,"form",225),h(6,Fo,7,1,"div",226),o(7,"div",32)(8,"div",227)(9,"label",228),c(10,"COMPROBANTE DE PAGO EN DIGITAL"),a(),h(11,Ro,2,1,"div",229)(12,Oo,4,1,"ng-template",null,15,V),o(14,"div",230)(15,"button",231),g("click",function(){p(e);let i=u();return _(i.abrirVinculacionCelular())}),c(16," Vincular celular (QR) "),a(),o(17,"span",232),c(18),a(),o(19,"button",176),g("click",function(){p(e);let i=u();return _(i.iniciarCapturaFotoPagoPorCelular())}),c(20," Obtener Comprobante con celular "),a()(),h(21,Do,8,1,"div",233),a(),h(22,zo,11,4,"div",234),a(),o(23,"div",32)(24,"div",235)(25,"select",236)(26,"option",237),c(27,"Seleccione una opci\xF3n"),a(),h(28,qo,2,3,"option",238),a(),o(29,"label"),c(30,"Categoria"),a(),o(31,"div",239),c(32,"Este campo es obligatorio*"),a()(),o(33,"div",235),x(34,"input",240),o(35,"label"),c(36,"Fecha de Inscripci\xF3n"),a(),o(37,"div",239),c(38,"Este campo es obligatorio*"),a()(),o(39,"div",235)(40,"select",241)(41,"option",237),c(42,"Seleccione una opci\xF3n"),a(),h(43,Ho,2,3,"option",238),a(),o(44,"label"),c(45,"Verificacion"),a(),o(46,"div",239),c(47,"Este campo es obligatorio*"),a()()(),o(48,"div",32)(49,"div",242)(50,"select",243)(51,"option",237),c(52,"Seleccione una opci\xF3n"),a(),h(53,Wo,2,3,"option",238),a(),o(54,"label"),c(55,"Turno"),a(),o(56,"div",239),c(57,"Este campo es obligatorio*"),a()(),o(58,"div",244)(59,"select",245)(60,"option",237),c(61,"Seleccione una opci\xF3n"),a(),h(62,Qo,2,3,"option",238),a(),o(63,"label"),c(64,"Curso Solicitado"),a(),o(65,"div",239),c(66,"Este campo es obligatorio*"),a()(),o(67,"div",242)(68,"input",246),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newinfoestudiantesifas,"Paralelo_Solicitado"))}),a(),o(69,"label"),c(70,"Paralelo Solicitado"),a(),o(71,"div",239),c(72,"Este campo es obligatorio*"),a()(),o(73,"div",244)(74,"input",247),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newinfoestudiantesifas,"Matricula"))}),a(),o(75,"label"),c(76,"Matricula"),a(),o(77,"div",239),c(78,"Este campo es obligatorio*"),a()(),o(79,"div",248)(80,"button",249),g("click",function(){p(e);let i=u();return _(i.newinfoestudiantesifas.patchValue({Matricula:i.generarMatricula()}))}),o(81,"span",35),x(82,"ng-lottie",36),a(),o(83,"span"),c(84,"Generar"),a(),x(85,"span",37),a()()(),h(86,ar,16,6,"div",226),o(87,"div",250),h(88,or,9,2,"div",251)(89,lr,9,2,"div",251),o(90,"div",242)(91,"button",252),g("click",function(i){p(e);let l=u();return _(l.abrirHistorialDesdeFormulario(i))}),x(92,"ng-lottie",253),o(93,"span"),c(94,"VER HISTORIAL CALIFICACIONES"),a()()(),o(95,"div",242)(96,"button",254),g("click",function(i){p(e);let l=u();return _(l.abrirPerfilEstudianteActual(i))}),x(97,"ng-lottie",253),o(98,"span"),c(99,"VER PERFIL"),a()()()(),o(100,"div",255)(101,"div",183)(102,"input",256),T("ngModelChange",function(i){p(e);let l=u();return M(l.mostrarObsAnoNotas,i)||(l.mostrarObsAnoNotas=i),_(i)}),a(),o(103,"label",257),c(104," Mostrar Observaci\xF3n / Anotaciones / Notas "),a()()(),h(105,cr,19,6,"div",226),a()(),o(106,"div",98),h(107,ur,2,1,"div",258),o(108,"div",153),h(109,mr,6,1,"button",259),a(),o(110,"div",156),h(111,pr,2,1,"button",157)(112,_r,6,2,"button",260),a()()}if(s&2){let e,n,i=z(13),l=u();r(2),I("",(e=l.newinfoestudiantesifas.get("id"))!=null&&e.value?"Modificar":"Registrar"," Inscripci\xF3n"),r(3),d("formGroup",l.newinfoestudiantesifas),r(),d("ngIf",l.esSuperAdmin),r(5),d("ngIf",(n=l.newinfoestudiantesifas.get("FotoPago"))==null?null:n.value)("ngIfElse",i),r(4),d("disabled",l.isCapturandoFotoPago),r(2),d("ngClass",Le(37,Kt,l.pairingStatus==="LINKED",!l.pairingStatus||l.pairingStatus==="PENDING",l.pairingStatus==="EXPIRED"||l.pairingStatus==="REVOKED")),r(),I(" ",l.pairingStatus==="LINKED"?"VINCULADO":l.pairingStatus||"NO VINCULADO"," "),r(),d("disabled",l.isCapturandoFotoPago),r(2),d("ngIf",l.isCapturandoFotoPago&&l.capturaToken),r(),d("ngIf",!l.estudianteId),r(3),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("Categoria")),r(3),d("ngForOf",l.categoriaOptions),r(6),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("FechInsc")),r(6),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("Verificacion")),r(3),d("ngForOf",l.VerificacionInscripciones),r(7),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("Turno")),r(3),d("ngForOf",l.turnoOptions),r(6),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("Curso_Solicitado")),r(3),d("ngForOf",l.cursoOptions),r(6),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("Paralelo_Solicitado")),r(6),d("ngClass",l.ValidacioninfoestudiantesifasxElemento("Matricula")),r(8),d("options",l._tools.optionsautocompletar),r(4),d("ngIf",l.habilitarCamposMusicales),r(2),d("ngIf",l.habilitarCamposMusicales),r(),d("ngIf",l.habilitarCamposMusicales),r(2),d("disabled",!l.ciEstudianteNumerico()),r(),d("options",l._tools.optionseye),r(4),d("disabled",!l.puedeAbrirPerfilEstudiante()),r(),d("options",l._tools.optionsEditar),r(5),w("ngModel",l.mostrarObsAnoNotas),d("ngModelOptions",ae(41,$a)),r(3),d("ngIf",l.mostrarObsAnoNotas),r(2),d("ngIf",!l.newinfoestudiantesifas.get("id").value),r(2),d("ngIf",!l.AnimacionCargabtnModalinfoestudiantesifas),r(2),d("ngIf",l.AnimacionCargabtnModalinfoestudiantesifas),r(),d("ngIf",!l.AnimacionCargabtnModalinfoestudiantesifas)}}function gr(s,t){if(s&1&&(o(0,"div"),x(1,"img",344),a()),s&2){let e,n=u(2);r(),d("src",n._tools.ruta+((e=n.newestudiantesifas.get("Foto"))==null?null:e.value),F)}}function hr(s,t){s&1&&(o(0,"div",152),c(1,"SIN FOTO DE PERFIL"),a())}function xr(s,t){if(s&1&&(o(0,"div",103)(1,"div",345)(2,"div",346),c(3),a()()()),s&2){let e=u(2);r(2),ce("width",e.uploadProgressFoto,"%"),r(),I(" ",e.uploadProgressFoto,"% ")}}function vr(s,t){if(s&1){let e=b();o(0,"div",265)(1,"div")(2,"div",266),c(3,"Esperando foto de perfil del celular..."),a(),o(4,"div",267),c(5),a()(),o(6,"button",268),g("click",function(){p(e);let i=u(2);return _(i.cancelarEsperaCapturaFotoPerfil())}),c(7,"Cancelar"),a()()}if(s&2){let e=u(2);r(5),I("Estado: ",e.capturaStatusFotoPerfil||"PENDING",". Puedes seguir llenando el formulario.")}}function Er(s,t){s&1&&(o(0,"div",347),c(1," Este campo es obligatorio* "),a())}function br(s,t){if(s&1&&(o(0,"option",285),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Cr(s,t){if(s&1&&(o(0,"option",285),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Sr(s,t){if(s&1){let e=b();o(0,"button",348),g("click",function(){let i;p(e);let l=u(2);return _(l.newestudiantesifas.patchValue({Usuario:((i=l.newestudiantesifas.get("Ap_Paterno"))==null?null:i.value.charAt(0))+((i=l.newestudiantesifas.get("Ap_Materno"))==null?null:i.value.charAt(0))+((i=l.newestudiantesifas.get("Nombre"))==null?null:i.value.charAt(0))+((i=l.newestudiantesifas.get("CI"))==null?null:i.value)+"EST"}))}),x(1,"ng-lottie",349),a()}if(s&2){let e=u(2);r(),d("options",e._tools.optionstripleengranaje)}}function yr(s,t){s&1&&(o(0,"div",350),c(1," Este campo es obligatorio* "),a())}function Ir(s,t){if(s&1){let e=b();o(0,"button",351),g("click",function(){p(e);let i=u(2);return _(i.mostrarContrasenia=!i.mostrarContrasenia)}),x(1,"ng-lottie",349),a()}if(s&2){let e=u(2);r(),d("options",e._tools.optionseye)}}function Ar(s,t){s&1&&(o(0,"div",350),c(1," Este campo es obligatorio* "),a())}function wr(s,t){if(s&1&&(o(0,"option",285),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Mr(s,t){if(s&1&&(o(0,"option",285),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Tr(s,t){if(s&1&&(o(0,"option",285),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Pr(s,t){if(s&1&&(o(0,"option",285),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Vr(s,t){if(s&1&&(o(0,"option",285),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Nr(s,t){if(s&1&&(o(0,"option",285),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function kr(s,t){if(s&1){let e=b();o(0,"button",303),g("click",function(){p(e);let i=u(3);return _(i.AutoCompletarLastestudiantesifas())}),o(1,"span",35),x(2,"ng-lottie",36),a(),o(3,"span"),c(4,"AUTO COMPLETAR "),a(),x(5,"span",37),a()}if(s&2){let e=u(3);r(2),d("options",e._tools.optionsautocompletar)}}function Fr(s,t){if(s&1&&(o(0,"div",301),h(1,kr,6,1,"button",302),a()),s&2){let e=u(2);r(),d("ngIf",!e.AnimacionCargabtnModalestudiantesifas)}}function Rr(s,t){if(s&1){let e=b();o(0,"button",154),g("click",function(){p(e);let i=u().$implicit,l=u();return i.dismiss(),_(l.resetestudiantesifas())}),o(1,"span",35),x(2,"ng-lottie",36),a(),o(3,"span"),c(4,"CANCELAR"),a(),x(5,"span",37),a()}if(s&2){let e=u(2);r(2),d("options",e._tools.optionscancelar)}}function Or(s,t){if(s&1){let e=b();o(0,"button",159),g("click",function(){p(e);let i=u(2);return _(i.AgregarModificarestudiantesifas())}),x(1,"span",160),a()}s&2&&d("disabled",!0)}function Dr(s,t){if(s&1){let e=b();o(0,"button",352),g("click",function(){p(e);let i=u(2);return _(i.AgregarModificarestudiantesifas())}),o(1,"span",35),x(2,"ng-lottie",36),a(),o(3,"span"),c(4),a(),x(5,"span",37),a()}if(s&2){let e,n,i=u(2);d("disabled",i.isUploadingFoto),r(2),d("options",(e=i.newestudiantesifas.get("id"))!=null&&e.value?i._tools.optionsEditar:i._tools.optionsAdicionar),r(2),E((n=i.newestudiantesifas.get("id"))!=null&&n.value?"MODIFICAR":"REGISTRAR")}}function Lr(s,t){if(s&1){let e=b();o(0,"div",74)(1,"h4",75),c(2),a(),o(3,"button",224),g("click",function(){let i=p(e).$implicit,l=u();return i.dismiss(),_(l.resetestudiantesifas())}),a()(),o(4,"div",77)(5,"form",225)(6,"div",32)(7,"div",305)(8,"label",80),c(9,"Foto actual"),a(),h(10,gr,2,1,"div",229)(11,hr,2,0,"ng-template",null,17,V),a(),o(13,"div",305)(14,"label",80),c(15,"SUBIR FOTO DE PERFIL (1 archivo)"),a(),o(16,"div",306),g("dragover",function(i){p(e);let l=u();return _(l.onFotoDragOver(i))})("dragleave",function(i){p(e);let l=u();return _(l.onFotoDragLeave(i))})("drop",function(i){p(e);let l=u();return _(l.onFotoDrop(i))})("click",function(){p(e);let i=z(21),l=u();return _(l.abrirSelectorFoto(i))}),o(17,"div",152),c(18,"Arrastra y suelta aqu\xED, o clic para seleccionar archivo"),a(),h(19,xr,4,3,"div",93),a(),o(20,"input",307,18),g("change",function(i){p(e);let l=u();return _(l.onFotoFileSelected(i))}),a(),o(22,"div",230)(23,"button",231),g("click",function(){p(e);let i=u();return _(i.abrirVinculacionCelular())}),c(24," Vincular celular (QR) "),a(),o(25,"span",232),c(26),a(),o(27,"button",176),g("click",function(){p(e);let i=u();return _(i.iniciarCapturaFotoPorCelular())}),c(28," Tomar foto con celular "),a()(),h(29,vr,8,1,"div",233)(30,Er,2,0,"div",308),a()(),o(31,"div",32)(32,"div",244)(33,"input",309),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"Ap_Paterno"))}),a(),o(34,"label"),c(35,"Apellido Paterno"),a(),o(36,"div",239),c(37,"Este campo es obligatorio*"),a()(),o(38,"div",244)(39,"input",310),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"Ap_Materno"))}),a(),o(40,"label"),c(41,"Apellido Materno"),a(),o(42,"div",239),c(43,"Este campo es obligatorio*"),a()(),o(44,"div",311)(45,"input",312),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"Nombre"))}),a(),o(46,"label"),c(47,"Nombres"),a(),o(48,"div",239),c(49,"Este campo es obligatorio*"),a()()(),o(50,"div",32)(51,"div",244)(52,"input",313),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"CI"))}),a(),o(53,"label"),c(54,"C\xE9dula de Identidad"),a(),o(55,"div",239),c(56,"Este campo es obligatorio*"),a()(),o(57,"div",242)(58,"select",314)(59,"option",237),c(60,"Seleccione una opci\xF3n"),a(),h(61,br,2,3,"option",238),a(),o(62,"label"),c(63,"Expedido"),a(),o(64,"div",239),c(65,"Este campo es obligatorio*"),a()(),o(66,"div",242)(67,"select",315)(68,"option",237),c(69,"Seleccione una opci\xF3n"),a(),h(70,Cr,2,3,"option",238),a(),o(71,"label"),c(72,"Sexo"),a(),o(73,"div",239),c(74,"Este campo es obligatorio*"),a()(),o(75,"div",244)(76,"input",316),g("change",function(i){let l;p(e);let m=u();return _((l=m.newestudiantesifas.get("Edad"))==null?null:l.setValue(m._tools.CalcularEdad(i.target.value)))}),a(),o(77,"label"),c(78,"Fecha de Nacimiento"),a(),o(79,"div",239),c(80,"Este campo es obligatorio*"),a()(),o(81,"div",242),x(82,"input",317),o(83,"label"),c(84,"Edad"),a(),o(85,"div",239),c(86,"Este campo es obligatorio*"),a()()(),o(87,"div",32)(88,"div",244)(89,"input",318),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"Celular"))}),a(),o(90,"label"),c(91,"Celular"),a(),o(92,"div",239),c(93,"Este campo es obligatorio*"),a()(),o(94,"div",319)(95,"input",320),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"Direccion"))}),a(),o(96,"label"),c(97,"Direcci\xF3n"),a(),o(98,"div",239),c(99,"Este campo es obligatorio*"),a()(),o(100,"div",235),x(101,"input",321),o(102,"label"),c(103,"Correo"),a(),o(104,"div",239),c(105,"Este campo es obligatorio*"),a()()(),o(106,"div",32)(107,"div",322)(108,"div",323)(109,"div",324)(110,"input",325),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"Usuario"))}),a(),o(111,"label"),c(112,"Usuario"),a()(),h(113,Sr,2,1,"button",326),a(),h(114,yr,2,0,"div",327),a(),o(115,"div",322)(116,"div",323)(117,"div",324),x(118,"input",328),o(119,"label"),c(120,"Contrase\xF1a"),a()(),h(121,Ir,2,1,"button",329),a(),h(122,Ar,2,0,"div",327),a(),o(123,"div",235)(124,"select",330)(125,"option",237),c(126,"Seleccione una opci\xF3n"),a(),h(127,wr,2,3,"option",238),a(),o(128,"label"),c(129,"Estado"),a(),o(130,"div",239),c(131,"Este campo es obligatorio*"),a()()(),x(132,"hr"),o(133,"div",32)(134,"div",235)(135,"input",331),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"Nombre_Padre"))}),a(),o(136,"label"),c(137,"Nombre Padre"),a(),o(138,"div",239),c(139,"Este campo es obligatorio*"),a()(),o(140,"div",244)(141,"select",332)(142,"option",237),c(143,"Seleccione una opci\xF3n"),a(),h(144,Mr,2,3,"option",238),a(),o(145,"label"),c(146,"Ocupaci\xF3n del Padre"),a(),o(147,"div",239),c(148,"Este campo es obligatorio*"),a()(),o(149,"div",235)(150,"input",333),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"NumCelP"))}),a(),o(151,"label"),c(152,"N\xFAmero Celular del Padre"),a(),o(153,"div",239),c(154,"Este campo es obligatorio*"),a()()(),o(155,"div",32)(156,"div",235)(157,"input",334),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"Nombre_Madre"))}),a(),o(158,"label"),c(159,"Nombre Madre"),a(),o(160,"div",239),c(161,"Este campo es obligatorio*"),a()(),o(162,"div",244)(163,"select",335)(164,"option",237),c(165,"Seleccione una opci\xF3n"),a(),h(166,Tr,2,3,"option",238),a(),o(167,"label"),c(168,"Ocupaci\xF3n de la Madre"),a(),o(169,"div",239),c(170,"Este campo es obligatorio*"),a()(),o(171,"div",235)(172,"input",336),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"NumCelM"))}),a(),o(173,"label"),c(174,"N\xFAmero Celular de la Madre"),a(),o(175,"div",239),c(176,"Este campo es obligatorio*"),a()()(),o(177,"div",32)(178,"div",244)(179,"input",337),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"NColegio"))}),a(),o(180,"label"),c(181,"Nombre Colegio"),a(),o(182,"div",239),c(183,"Este campo es obligatorio*"),a()(),o(184,"div",244)(185,"select",338)(186,"option",237),c(187,"Seleccione una opci\xF3n"),a(),h(188,Pr,2,3,"option",238),a(),o(189,"label"),c(190,"Tipo Colegio"),a(),o(191,"div",239),c(192,"Este campo es obligatorio*"),a()(),o(193,"div",244)(194,"select",339)(195,"option",237),c(196,"Seleccione una opci\xF3n"),a(),h(197,Vr,2,3,"option",238),a(),o(198,"label"),c(199,"Nivel del Colegio"),a(),o(200,"div",239),c(201,"Este campo es obligatorio*"),a()(),o(202,"div",244)(203,"select",340)(204,"option",237),c(205,"Seleccione una opci\xF3n"),a(),h(206,Nr,2,3,"option",238),a(),o(207,"label"),c(208,"Grado en Colegio"),a(),o(209,"div",239),c(210,"Este campo es obligatorio*"),a()()(),o(211,"div",341)(212,"label"),c(213,"Informaci\xF3n Compartida IFAS"),a(),x(214,"quill-editor",342),o(215,"div",239),c(216,"Este campo es obligatorio*"),a()()()(),o(217,"div",98),h(218,Fr,2,1,"div",258),o(219,"div",153),h(220,Rr,6,1,"button",259),a(),o(221,"div",156),h(222,Or,2,1,"button",157)(223,Dr,6,3,"button",343),a()()}if(s&2){let e,n,i,l,m,v=z(12),f=u();r(2),I("",(e=f.newestudiantesifas.get("id"))!=null&&e.value?"Modificar":"Registrar"," Informaci\xF3n Personal Estudiante"),r(3),d("formGroup",f.newestudiantesifas),r(5),d("ngIf",(n=f.newestudiantesifas.get("Foto"))==null?null:n.value)("ngIfElse",v),r(6),G("border-primary",f.isDraggingFoto)("bg-light",f.isDraggingFoto),r(3),d("ngIf",f.isUploadingFoto),r(4),d("disabled",f.isUploadingFoto),r(2),d("ngClass",Le(58,Kt,f.pairingStatus==="LINKED",!f.pairingStatus||f.pairingStatus==="PENDING",f.pairingStatus==="EXPIRED"||f.pairingStatus==="REVOKED")),r(),I(" ",f.pairingStatus==="LINKED"?"VINCULADO":f.pairingStatus||"NO VINCULADO"," "),r(),d("disabled",f.isUploadingFoto||f.isEsperandoFotoPerfil),r(2),d("ngIf",f.isEsperandoFotoPerfil&&f.capturaTokenFotoPerfil),r(),d("ngIf",((i=f.newestudiantesifas.get("Foto"))==null?null:i.touched)&&((i=f.newestudiantesifas.get("Foto"))==null?null:i.invalid)),r(3),d("ngClass",f.ValidacionestudiantesifasxElemento("Ap_Paterno")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Ap_Materno")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Nombre")),r(7),d("ngClass",f.ValidacionestudiantesifasxElemento("CI")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Expedido")),r(3),d("ngForOf",f.expedidoOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Sexo")),r(3),d("ngForOf",f.sexoOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("FechaNac")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Edad")),r(7),d("ngClass",f.ValidacionestudiantesifasxElemento("Celular")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Direccion")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Correo")),r(9),d("ngClass",f.ValidacionestudiantesifasxElemento("Usuario")),r(3),d("ngIf",!f.AnimacionCargabtnModalestudiantesifas),r(),d("ngIf",((l=f.newestudiantesifas.get("Usuario"))==null?null:l.touched)&&((l=f.newestudiantesifas.get("Usuario"))==null?null:l.invalid)),r(4),d("type",f.mostrarContrasenia?"text":"password")("ngClass",f.ValidacionestudiantesifasxElemento("Contrasenia")),r(3),d("ngIf",!f.AnimacionCargabtnModalestudiantesifas),r(),d("ngIf",((m=f.newestudiantesifas.get("Contrasenia"))==null?null:m.touched)&&((m=f.newestudiantesifas.get("Contrasenia"))==null?null:m.invalid)),r(2),d("ngClass",f.ValidacionestudiantesifasxElemento("Estado")),r(3),d("ngForOf",f.estadoOptions),r(8),d("ngClass",f.ValidacionestudiantesifasxElemento("Nombre_Padre")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("OcupacionP")),r(3),d("ngForOf",f.OcupacionOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("NumCelP")),r(7),d("ngClass",f.ValidacionestudiantesifasxElemento("Nombre_Madre")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("OcupacionM")),r(3),d("ngForOf",f.OcupacionOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("NumCelM")),r(7),d("ngClass",f.ValidacionestudiantesifasxElemento("NColegio")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("TipoColegio")),r(3),d("ngForOf",f.tipoColegioOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("CNivel")),r(3),d("ngForOf",f.nivelColegioOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("CGrado")),r(3),d("ngForOf",f.gradoColegioOptions),r(8),d("modules",f.modulesQuillEdicion)("ngClass",f.ValidacionestudiantesifasxElemento("InformacionCompartidaIFAS")),r(4),d("ngIf",!f.newestudiantesifas.get("id").value),r(2),d("ngIf",!f.AnimacionCargabtnModalestudiantesifas),r(2),d("ngIf",f.AnimacionCargabtnModalestudiantesifas),r(),d("ngIf",!f.AnimacionCargabtnModalestudiantesifas)}}function jr(s,t){if(s&1&&(o(0,"div",355),x(1,"img",356),a()),s&2){let e=u(2);r(),d("src",e.pairingQrDataUrl,F)}}function Br(s,t){if(s&1&&(o(0,"div",111)(1,"a",357),c(2,"Abrir link en el celular"),a()()),s&2){let e=u(2);r(),d("href",e.pairingUrl,F)}}function $r(s,t){if(s&1){let e=b();o(0,"div",74)(1,"h4",75),c(2,"Vincular celular"),a(),o(3,"button",224),g("click",function(){let i=p(e).$implicit;return _(i.dismiss())}),a()(),o(4,"div",77)(5,"div",353),c(6,"Escanea este QR una sola vez desde el celular."),a(),h(7,jr,2,1,"div",354),o(8,"div",111)(9,"div",85),c(10,"Estado"),a(),o(11,"div",266),c(12),a()(),h(13,Br,3,1,"div",94),a()}if(s&2){let e=u();r(7),d("ngIf",e.pairingQrDataUrl),r(5),E(e.pairingStatus||"..."),r(),d("ngIf",e.pairingUrl)}}function Gr(s,t){if(s&1){let e=b();o(0,"div",74)(1,"h4",75),c(2,"Esperando foto..."),a(),o(3,"button",224),g("click",function(){let i=p(e).$implicit;return _(i.dismiss())}),a()(),o(4,"div",77)(5,"div",152),c(6,"En el celular entra a \u201CCaptura desde celular\u201D (ya vinculado) y toma la foto del estudiante."),a(),o(7,"div",111)(8,"div",85),c(9,"Estado"),a(),o(10,"div",266),c(11),a()(),o(12,"div",358)(13,"button",268),g("click",function(){let i=p(e).$implicit;return u().cancelarEsperaCapturaFotoPerfil(),_(i.close())}),c(14,"Cancelar espera"),a()()()}if(s&2){let e=u();r(11),E(e.capturaStatusFotoPerfil||"PENDING")}}function Ur(s,t){if(s&1){let e=b();o(0,"div",74)(1,"h4",75),c(2,"Esperando FotoPago..."),a(),o(3,"button",224),g("click",function(){let i=p(e).$implicit;return _(i.dismiss())}),a()(),o(4,"div",77)(5,"div",152),c(6,"En el celular entra a \u201CCaptura desde celular\u201D (ya vinculado) y toma la foto del comprobante."),a(),o(7,"div",111)(8,"div",85),c(9,"Estado"),a(),o(10,"div",266),c(11),a()(),o(12,"div",358)(13,"button",268),g("click",function(){let i=p(e).$implicit;return u().cancelarEsperaCaptura(),_(i.close())}),c(14,"Cancelar espera"),a()()()}if(s&2){let e=u();r(11),E(e.capturaStatus||"PENDING")}}function zr(s,t){if(s&1&&(o(0,"div",365)(1,"div",366),c(2,"Total:"),a(),o(3,"div",367),c(4),a()()),s&2){let e=u(2);r(4),E(e.estadisticasInscripciones==null||e.estadisticasInscripciones.meta==null?null:e.estadisticasInscripciones.meta.total)}}function qr(s,t){s&1&&(o(0,"div",111),c(1," Cargando estad\xEDsticas... "),a())}function Hr(s,t){s&1&&(o(0,"div",111),c(1," No hay estad\xEDsticas para mostrar. "),a())}function Wr(s,t){s&1&&(o(0,"th"),c(1,"Edades"),a())}function Qr(s,t){s&1&&(o(0,"th"),c(1,"Instrumentos"),a())}function Kr(s,t){if(s&1){let e=b();o(0,"button",371),g("click",function(){let i=p(e).$implicit,l=u(2).$implicit,m=u(3);return _(m.abrirDetalleEstadisticasCursoEdad(l,i==null?null:i.edad))}),c(1),a()}if(s&2){let e=t.$implicit;d("title",De("Ver estudiantes de ",e==null?null:e.edad," a\xF1os"))("disabled",((e==null?null:e.total)??0)<=0),r(),J(" ",e==null?null:e.edad," A\xF1os (",e==null?null:e.total,") ")}}function Yr(s,t){if(s&1&&(o(0,"td")(1,"div",107),h(2,Kr,2,5,"button",370),a()()),s&2){let e=u().$implicit;r(2),d("ngForOf",e.edades||ae(1,mt))}}function Xr(s,t){if(s&1){let e=b();o(0,"button",371),g("click",function(){let i=p(e).$implicit,l=u(2).$implicit,m=u(3);return _(m.abrirDetalleEstadisticasCursoInstrumento(l,i==null?null:i.instrumento))}),c(1),a()}if(s&2){let e=t.$implicit;d("title",De("Ver estudiantes de ",e==null?null:e.instrumento))("disabled",((e==null?null:e.total)??0)<=0),r(),J(" ",e==null?null:e.instrumento," (",e==null?null:e.total,") ")}}function Zr(s,t){if(s&1&&(o(0,"td")(1,"div",107),h(2,Xr,2,5,"button",370),a()()),s&2){let e=u().$implicit;r(2),d("ngForOf",e.instrumentos||ae(1,mt))}}function Jr(s,t){if(s&1){let e=b();o(0,"tr")(1,"td"),c(2),a(),o(3,"td",128)(4,"button",369),g("click",function(){let i=p(e).$implicit,l=u(3);return _(l.abrirDetalleEstadisticasCurso(i,""))}),c(5),a()(),o(6,"td",128)(7,"button",369),g("click",function(){let i=p(e).$implicit,l=u(3);return _(l.abrirDetalleEstadisticasCurso(i,"MASCULINO"))}),c(8),a()(),o(9,"td",128)(10,"button",369),g("click",function(){let i=p(e).$implicit,l=u(3);return _(l.abrirDetalleEstadisticasCurso(i,"FEMENINO"))}),c(11),a()(),h(12,Yr,3,2,"td",61)(13,Zr,3,2,"td",61),a()}if(s&2){let e=t.$implicit,n=u(3);r(2),E(e.curso),r(2),d("disabled",(e.total??0)<=0),r(),I(" ",e.total," "),r(2),d("disabled",n.getSexoCount(e.sexo,"MASCULINO")<=0),r(),I(" ",n.getSexoCount(e.sexo,"MASCULINO")," "),r(2),d("disabled",n.getSexoCount(e.sexo,"FEMENINO")<=0),r(),I(" ",n.getSexoCount(e.sexo,"FEMENINO")," "),r(),d("ngIf",n.hayEdades(n.estadisticasInscripciones==null?null:n.estadisticasInscripciones.por_curso)),r(),d("ngIf",n.hayInstrumentos(n.estadisticasInscripciones==null?null:n.estadisticasInscripciones.por_curso))}}function el(s,t){s&1&&(o(0,"th"),c(1,"Edades"),a())}function tl(s,t){s&1&&(o(0,"th"),c(1,"Instrumentos"),a())}function il(s,t){if(s&1){let e=b();o(0,"button",371),g("click",function(){let i=p(e).$implicit,l=u(2).$implicit,m=u(3);return _(m.abrirDetalleEstadisticasCursoParaleloEdad(l,i==null?null:i.edad))}),c(1),a()}if(s&2){let e=t.$implicit;d("title",De("Ver estudiantes de ",e==null?null:e.edad," a\xF1os"))("disabled",((e==null?null:e.total)??0)<=0),r(),J(" ",e==null?null:e.edad," A\xF1os (",e==null?null:e.total,") ")}}function nl(s,t){if(s&1&&(o(0,"td")(1,"div",107),h(2,il,2,5,"button",370),a()()),s&2){let e=u().$implicit;r(2),d("ngForOf",e.edades||ae(1,mt))}}function al(s,t){if(s&1){let e=b();o(0,"button",371),g("click",function(){let i=p(e).$implicit,l=u(2).$implicit,m=u(3);return _(m.abrirDetalleEstadisticasCursoParaleloInstrumento(l,i==null?null:i.instrumento))}),c(1),a()}if(s&2){let e=t.$implicit;d("title",De("Ver estudiantes de ",e==null?null:e.instrumento))("disabled",((e==null?null:e.total)??0)<=0),r(),J(" ",e==null?null:e.instrumento," (",e==null?null:e.total,") ")}}function sl(s,t){if(s&1&&(o(0,"td")(1,"div",107),h(2,al,2,5,"button",370),a()()),s&2){let e=u().$implicit;r(2),d("ngForOf",e.instrumentos||ae(1,mt))}}function ol(s,t){if(s&1){let e=b();o(0,"tr")(1,"td"),c(2),a(),o(3,"td"),c(4),a(),o(5,"td",128)(6,"button",369),g("click",function(){let i=p(e).$implicit,l=u(3);return _(l.abrirDetalleEstadisticasCursoParalelo(i,""))}),c(7),a()(),o(8,"td",128)(9,"button",369),g("click",function(){let i=p(e).$implicit,l=u(3);return _(l.abrirDetalleEstadisticasCursoParalelo(i,"MASCULINO"))}),c(10),a()(),o(11,"td",128)(12,"button",369),g("click",function(){let i=p(e).$implicit,l=u(3);return _(l.abrirDetalleEstadisticasCursoParalelo(i,"FEMENINO"))}),c(13),a()(),h(14,nl,3,2,"td",61)(15,sl,3,2,"td",61),a()}if(s&2){let e=t.$implicit,n=u(3);r(2),E(e.curso),r(2),E(e.paralelo),r(2),d("disabled",(e.total??0)<=0),r(),I(" ",e.total," "),r(2),d("disabled",n.getSexoCount(e.sexo,"MASCULINO")<=0),r(),I(" ",n.getSexoCount(e.sexo,"MASCULINO")," "),r(2),d("disabled",n.getSexoCount(e.sexo,"FEMENINO")<=0),r(),I(" ",n.getSexoCount(e.sexo,"FEMENINO")," "),r(),d("ngIf",n.hayEdades(n.estadisticasInscripciones==null?null:n.estadisticasInscripciones.por_curso_paralelo)),r(),d("ngIf",n.hayInstrumentos(n.estadisticasInscripciones==null?null:n.estadisticasInscripciones.por_curso_paralelo))}}function rl(s,t){if(s&1&&(o(0,"div",111)(1,"h6"),c(2,"Por Curso_Solicitado"),a(),o(3,"div",55)(4,"table",142)(5,"thead")(6,"tr")(7,"th"),c(8,"Curso"),a(),o(9,"th",128),c(10,"Total"),a(),o(11,"th",128),c(12,"Varones"),a(),o(13,"th",128),c(14,"Mujeres"),a(),h(15,Wr,2,0,"th",61)(16,Qr,2,0,"th",61),a()(),o(17,"tbody"),h(18,Jr,14,9,"tr",146),a()()(),o(19,"h6",54),c(20,"Por Curso_Solicitado + Paralelo_Solicitado"),a(),o(21,"div",368),c(22,"(Solo se muestra cuando existe Paralelo_Solicitado)"),a(),o(23,"div",55)(24,"table",142)(25,"thead")(26,"tr")(27,"th"),c(28,"Curso"),a(),o(29,"th"),c(30,"Paralelo"),a(),o(31,"th",128),c(32,"Total"),a(),o(33,"th",128),c(34,"Varones"),a(),o(35,"th",128),c(36,"Mujeres"),a(),h(37,el,2,0,"th",61)(38,tl,2,0,"th",61),a()(),o(39,"tbody"),h(40,ol,16,10,"tr",146),a()()()()),s&2){let e=u(2);r(15),d("ngIf",e.hayEdades(e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso)),r(),d("ngIf",e.hayInstrumentos(e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso)),r(2),d("ngForOf",e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso),r(19),d("ngIf",e.hayEdades(e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso_paralelo)),r(),d("ngIf",e.hayInstrumentos(e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso_paralelo)),r(2),d("ngForOf",e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso_paralelo)}}function ll(s,t){if(s&1){let e=b();o(0,"div",74)(1,"h5",75),c(2,"Componente Estadisticas de Inscripciones"),a(),o(3,"button",359),g("click",function(){let i=p(e).$implicit;return _(i.dismiss())}),a()(),o(4,"div",77)(5,"div",78)(6,"div",148)(7,"label",80),c(8,"Modo"),a(),o(9,"select",149),T("ngModelChange",function(i){p(e);let l=u();return M(l.estadisticasModo,i)||(l.estadisticasModo=i),_(i)}),g("change",function(){p(e);let i=u();return _(i.cargarEstadisticasInscripciones())}),o(10,"option",360),c(11,"SOLO ASIGNADOS"),a(),o(12,"option",361),c(13,"SOLO SIN ASIGNAR"),a(),o(14,"option",362),c(15,"ASIGNADOS + SIN ASIGNAR (DEL A\xD1O)"),a()()(),o(16,"div",148)(17,"button",363),g("click",function(){p(e);let i=u();return _(i.cargarEstadisticasInscripciones())}),c(18," ACTUALIZAR "),a()(),h(19,zr,5,1,"div",364),a(),h(20,qr,2,0,"div",94)(21,Hr,2,0,"div",94)(22,rl,41,6,"div",94),a()}if(s&2){let e=u();r(9),w("ngModel",e.estadisticasModo),r(10),d("ngIf",e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.meta),r(),d("ngIf",e.isLoadingEstadisticas),r(),d("ngIf",!e.isLoadingEstadisticas&&!e.estadisticasInscripciones),r(),d("ngIf",!e.isLoadingEstadisticas&&e.estadisticasInscripciones)}}function cl(s,t){s&1&&(o(0,"div",375),c(1,"Paralelo"),a())}function dl(s,t){if(s&1&&(o(0,"div",266),c(1),a()),s&2){let e=u(3);r(),E(e.detalleEstadisticasMeta==null?null:e.detalleEstadisticasMeta.paralelo)}}function ul(s,t){s&1&&(o(0,"div",375),c(1,"Instrumento"),a())}function ml(s,t){if(s&1&&(o(0,"div",266),c(1),a()),s&2){let e=u(3);r(),E(e.detalleEstadisticasMeta==null?null:e.detalleEstadisticasMeta.instrumento)}}function pl(s,t){s&1&&(o(0,"div",375),c(1,"Edad"),a())}function _l(s,t){if(s&1&&(o(0,"div",266),c(1),a()),s&2){let e=u(3);r(),I("",e.detalleEstadisticasMeta==null?null:e.detalleEstadisticasMeta.edad," a\xF1os")}}function fl(s,t){s&1&&(o(0,"div",375),c(1,"Total"),a())}function gl(s,t){if(s&1&&(o(0,"div",266),c(1),a()),s&2){let e=u(3);r(),E(e.detalleEstadisticasMeta==null?null:e.detalleEstadisticasMeta.total)}}function hl(s,t){if(s&1&&(o(0,"div",374)(1,"div",375),c(2,"Curso"),a(),o(3,"div",266),c(4),a(),h(5,cl,2,0,"div",376)(6,dl,2,1,"div",377),o(7,"div",375),c(8,"Sexo"),a(),o(9,"div",266),c(10),a(),h(11,ul,2,0,"div",376)(12,ml,2,1,"div",377)(13,pl,2,0,"div",376)(14,_l,2,1,"div",377)(15,fl,2,0,"div",376)(16,gl,2,1,"div",377),a()),s&2){let e=u(2);r(4),E(e.detalleEstadisticasMeta==null?null:e.detalleEstadisticasMeta.curso),r(),d("ngIf",(e.detalleEstadisticasMeta==null?null:e.detalleEstadisticasMeta.paralelo)!=null),r(),d("ngIf",(e.detalleEstadisticasMeta==null?null:e.detalleEstadisticasMeta.paralelo)!=null),r(4),E((e.detalleEstadisticasMeta==null?null:e.detalleEstadisticasMeta.sexo)||"TODOS"),r(),d("ngIf",e.detalleEstadisticasMeta==null?null:e.detalleEstadisticasMeta.instrumento),r(),d("ngIf",e.detalleEstadisticasMeta==null?null:e.detalleEstadisticasMeta.instrumento),r(),d("ngIf",e.detalleEstadisticasMeta==null?null:e.detalleEstadisticasMeta.edad),r(),d("ngIf",e.detalleEstadisticasMeta==null?null:e.detalleEstadisticasMeta.edad),r(),d("ngIf",(e.detalleEstadisticasMeta==null?null:e.detalleEstadisticasMeta.total)!=null),r(),d("ngIf",(e.detalleEstadisticasMeta==null?null:e.detalleEstadisticasMeta.total)!=null)}}function xl(s,t){s&1&&(o(0,"div",111),c(1," Cargando estudiantes... "),a())}function vl(s,t){s&1&&(o(0,"div",111),c(1," No hay estudiantes para mostrar. "),a())}function El(s,t){if(s&1&&(o(0,"tr")(1,"td"),c(2),a(),o(3,"td"),c(4),a(),o(5,"td"),c(6),a(),o(7,"td"),c(8),a(),o(9,"td"),c(10),a(),o(11,"td",128),c(12),a()()),s&2){let e=t.$implicit,n=t.index;r(2),E(n+1),r(2),E(((e==null?null:e.Ap_Paterno)||"")+" "+((e==null?null:e.Ap_Materno)||"")),r(2),E(e==null?null:e.Nombre),r(2),E(e==null?null:e.CI),r(2),E(e==null?null:e.Sexo),r(2),E(e==null?null:e.Edad)}}function bl(s,t){if(s&1&&(o(0,"div",378)(1,"table",142)(2,"thead")(3,"tr")(4,"th"),c(5,"#"),a(),o(6,"th"),c(7,"Apellidos"),a(),o(8,"th"),c(9,"Nombres"),a(),o(10,"th"),c(11,"CI"),a(),o(12,"th"),c(13,"Sexo"),a(),o(14,"th",128),c(15,"Edad"),a()()(),o(16,"tbody"),h(17,El,13,6,"tr",146),a()()()),s&2){let e=u(2);r(17),d("ngForOf",e.detalleEstadisticasRows)}}function Cl(s,t){if(s&1){let e=b();o(0,"div",74)(1,"h5",75),c(2,"Detalle de estudiantes"),a(),o(3,"button",359),g("click",function(){let i=p(e).$implicit;return _(i.dismiss())}),a()(),o(4,"div",77),h(5,hl,17,10,"div",372)(6,xl,2,0,"div",94)(7,vl,2,0,"div",94)(8,bl,18,1,"div",373),a(),o(9,"div",98)(10,"button",102),g("click",function(){let i=p(e).$implicit;return _(i.close())}),c(11,"Cerrar"),a()()}if(s&2){let e=u();r(5),d("ngIf",e.detalleEstadisticasMeta),r(),d("ngIf",e.isLoadingDetalleEstadisticas),r(),d("ngIf",!e.isLoadingDetalleEstadisticas&&(!e.detalleEstadisticasRows||e.detalleEstadisticasRows.length===0)),r(),d("ngIf",!e.isLoadingDetalleEstadisticas&&e.detalleEstadisticasRows&&e.detalleEstadisticasRows.length>0)}}function Sl(s,t){if(s&1){let e=b();o(0,"div",74)(1,"h5",75),c(2,"Componente Asignacion de estudiante"),a(),o(3,"button",359),g("click",function(){let i=p(e).$implicit;return _(i.dismiss())}),a()(),o(4,"div",77),x(5,"app-asignadormateriasestudiantes",379),a()}if(s&2){let e=u();r(5),d("modo",e.asignadorModo)("estudianteId",e.asignadorEstudianteId)("nombreEstudiante",e.asignadorNombreEstudiante)("fotoEstudiante",e.asignadorFotoEstudiante)("sexoEstudiante",e.asignadorSexoEstudiante)("preferInfoId",e.asignadorPreferInfoId)}}function yl(s,t){if(s&1){let e=b();o(0,"div",74)(1,"h5",75),c(2,"Componente Registro de pagos estudiantes de carrera"),a(),o(3,"button",359),g("click",function(){let i=p(e).$implicit;return _(i.dismiss())}),a()(),o(4,"div",77),x(5,"app-sistemapagoslcch",380),a()}if(s&2){let e=u();r(5),d("modo",e.pagosModo)("infoId",e.pagosInfoId)("estudianteId",e.pagosEstudianteId)("nombreEstudiante",e.pagosNombreEstudiante)("fotoEstudiante",e.pagosFotoEstudiante)("sexoEstudiante",e.pagosSexoEstudiante)("gestionPredeterminada",e.pagosGestionPredeterminada)}}function Il(s,t){if(s&1){let e=b();o(0,"div",74)(1,"h5",75),c(2,"Componente Historias"),a(),o(3,"button",359),g("click",function(){let i=p(e).$implicit;return _(i.dismiss())}),a()(),o(4,"div",77),x(5,"app-califhistorias",381),a()}if(s&2){let e=u();r(5),d("modo","modal_ci")("ciBusqueda",e.historialCiBusqueda)("institucion",e.historialInstitucionNombre)}}function Al(s,t){if(s&1){let e=b();o(0,"button",384),g("click",function(){let i=p(e).$implicit;return _(i.action())}),c(1),a()}if(s&2){let e=t.$implicit;r(),I(" ",e.label," ")}}function wl(s,t){if(s&1&&(o(0,"div",382),W(1,"async"),W(2,"async"),h(3,Al,2,1,"button",383),W(4,"async"),a()),s&2){let e,n,i=u();d("ngStyle",N(8,Ga,((e=Q(1,2,i.menuStateinfoestudiantesifas$))==null?null:e.y)+"px",((e=Q(2,4,i.menuStateinfoestudiantesifas$))==null?null:e.x)+"px")),r(3),d("ngForOf",(n=Q(4,6,i.menuStateinfoestudiantesifas$))==null?null:n.items)}}var ke=class ke{constructor(t,e,n,i,l,m,v,f,C,S,y,A,R,O,K){this._infoest=t;this._est=e;this._anios=n;this._controles=i;this._tools=l;this._reportes=m;this._pagos=v;this._auth=f;this._inst=C;this._planteldoc=S;this._carreras=y;this._capture=A;this._pairing=R;this.router=O;this.sanitizer=K;this.modulesQuillEdicion={toolbar:[["bold","italic","underline","strike"],[{align:[]}],[{size:["small",!1,"large"]}],[{color:[]},{background:[]}],[{font:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","video"],["clean"]]};this.modulesQuillShow={toolbar:!1};this.estudianteId=null;this.nombreEstudiante=null;this.fotoEstudiante=null;this.sexoEstudiante=null;this.modo=null;this.habilitarSistemaPagosCarreras=!1;this.habilitarCamposMusicales=!1;this.institucionCaractisticasActual="";this.institucionNombreActual="";this.historialCiBusqueda="";this.historialInstitucionNombre="";this.AnimacionCargabtnModalestudiantesifas=!1;this.mostrarContrasenia=!1;this.sexoOptions=[];this.expedidoOptions=[];this.estadoOptions=[];this.especialidadOptions=[];this.tipoColegioOptions=[];this.nivelColegioOptions=[];this.gradoColegioOptions=[];this.OcupacionOptions=[];this.modoEdicionPerfilEstudiante=!1;this.capturaTokenFotoPerfil=null;this.capturaStatusFotoPerfil=null;this.isEsperandoFotoPerfil=!1;this.capturaIntervalIdFotoPerfil=null;this.isDraggingFoto=!1;this.isUploadingFoto=!1;this.uploadProgressFoto=0;this.fotoAnteriorPath=null;this.fotoTempPath=null;this.pairingToken=null;this.pairingStatus=null;this.pairingUrl=null;this.pairingQrDataUrl=null;this.pairingIntervalId=null;this.capturaToken=null;this.capturaStatus=null;this.capturaIntervalId=null;this.isCapturandoFotoPago=!1;this.fotoPagoAnteriorPath=null;this.fotoPagoTempPath=null;this.esSuperAdmin=!1;this.esPlantelAdministrativo=!1;this.plantelDocentes=[];this.docAdminInput=new je("");this.docPCInput=new je("");this.docOtrosInput=new je("");this.mostrarListaDocAdmin=!1;this.mostrarListaDocPC=!1;this.mostrarListaDocOtros=!1;this.docentesFiltradosAdmin=[];this.docentesFiltradosPC=[];this.docentesFiltradosOtros=[];this.categoriaOptions=[];this.turnoOptions=[];this.cursoOptions=[];this.InstrumentoMusicalOptions=[];this.InstrumentoMusicalSecundarioOptions=[];this.VerificacionInscripciones=[];this.infoestudiantesifas=[];this.autoAbrioNuevoPorVacio=!1;this.paginainfoestudiantesifas=1;this.isLoadinginfoestudiantesifas=!1;this.AnimacionCargabtnModalinfoestudiantesifas=!1;this.filtertxtinfoestudiantesifas="";this.searchAplicado="";this.anios=[];this.selectedAnioId="";this.incluirSinAsignar=!0;this.soloSinAsignaciones=!1;this.soloDeudores=!1;this.isGenerandoCuadroInscripciones=!1;this.deudaCache=new Map;this.estadisticasModo="both";this.isLoadingEstadisticas=!1;this.estadisticasInscripciones=null;this.isLoadingDetalleEstadisticas=!1;this.detalleEstadisticasRows=[];this.detalleEstadisticasMeta=null;this.cursosParaListas=[];this.isLoadingCursosParaListas=!1;this.isGenerandoListasPreliminares=!1;this.incluirEspecialidadListas=!1;this.isVerifModalOpen=!1;this.verifAnioId="";this.verifFiltroEstado="MIXTO";this.isLoadingVerificacionAsignacion=!1;this.verifRows=[];this.verifStats={totalPagina:0,okPagina:0,noPagina:0,totalFiltrado:0,totalYear:0};this.verifPage=1;this.verifLastPage=1;this.verifPerPage=20;this.verifFilterOptions={cursos:[],paralelos:[],turnos:[]};this.verifCursosSel=[];this.verifParalelosSel=[];this.verifTurnosSel=[];this.cursosParaAcciones=[];this.cursosParaAccionesAll=[];this.isLoadingCursosParaAcciones=!1;this.isEjecutandoAccionGrupal=!1;this.accionModo="";this.accionAnioId="";this.carrerasAcciones=[];this.accionResolucionKey="";this.accionResolucion=null;this.accionNivelCarrera=null;this.accionInstitucionId=null;this.resolucionOptionsAcciones=[];this.ultimoLoteAccionGrupalUuid=null;this.modEdadMin=null;this.modEdadMax=null;this.modCursoActual="";this.modParaleloActual="";this.modParaleloActualEsVacio=!1;this.isLoadingListaModificacion=!1;this.modFuenteRows=[];this.modCambiarCurso=!1;this.modNuevoCurso="";this.modCambiarParalelo=!1;this.modNuevoParalelo="";this.modCambiarTurno=!1;this.modNuevoTurno="";this.modQuitarAsignaciones=!1;this.modAnioAsignacionesId="";this.modResolucionKey="";this.modResolucion=null;this.modPreviewRows=[];this.isEjecutandoModificacionGrupal=!1;this.asignadorModo="general";this.asignadorEstudianteId=null;this.asignadorNombreEstudiante=null;this.asignadorFotoEstudiante=null;this.asignadorSexoEstudiante=null;this.asignadorPreferInfoId=null;this.pagosModo="general";this.pagosInfoId=null;this.pagosEstudianteId=null;this.pagosNombreEstudiante=null;this.pagosFotoEstudiante=null;this.pagosSexoEstudiante=null;this.pagosGestionPredeterminada=null;this.sortByColumn="FechInsc";this.sortDir="desc";this.verifPendingRestoreScrollTop=null;this.verifPendingFocusRowId=null;this.estudianteInput=new je("");this.mostrarListaEstudiantes=!1;this.estudiantesFiltrados=[];this.isBuscandoEstudiante=!1;this.estudianteSeleccionado=null;this.busquedaEstudiantesEjecutada=!1;this.estudiantesPage=1;this.estudiantesPageSize=10;this.collectionSizeinfoestudiantesifas=0;this.pageSizeinfoestudiantesifas=10;this.pageSizeOptionsinfoestudiantesifas=[5,10,20,50];this.sortColumnsinfoestudiantesifas=[];this.menuStateinfoestudiantesifas$=this._tools.state$;this.newinfoestudiantesifas=this._infoest.createFormGroupinfoestudiantesifas(),this.newinfoestudiantesifasAnteriorAccion=this._infoest.createFormGroupinfoestudiantesifas(),this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this.newestudiantesifasAnteriorAccion=this._est.createFormGroupestudiantesifas()}ngOnInit(){console.log("foto",this.fotoEstudiante),this.cargarAnios(),this.cargarOptionsDesdeControles(),this.cargarOptionsEstudiantesDesdeControles(),this._auth.revisarSiEsSuperAdmin().subscribe(t=>{this.esSuperAdmin=t;let e=this.newinfoestudiantesifas.get("instituciones_id");if(e&&(t?e.setValidators([St.required]):e.clearValidators(),e.updateValueAndValidity({emitEvent:!1})),t&&e){e.valueChanges.subscribe(i=>{let l=Number(i??0);this.cargarCaractisticasInstitucionActual(Number.isFinite(l)&&l>0?l:null)});let n=Number(e.value??0);this.cargarCaractisticasInstitucionActual(Number.isFinite(n)&&n>0?n:null)}}),this._auth.pedirPerfil().subscribe({next:t=>{if(this.esPlantelAdministrativo=t?.tipo==="planteladministrativos",this.esSuperAdmin)return;let e=Number(t?.usuario?.instituciones_id??0);this.cargarCaractisticasInstitucionActual(Number.isFinite(e)&&e>0?e:null)},error:()=>{}}),this.setupBuscadoresPlantel(),this.cargarPlantelDocentes(),this.setupBuscadorEstudiantes(),this.cargarVinculacionDesdeStorage()}generarReporteInscripcion(t,e){let n=!!e?.ocultarDatosFamiliares,i=Number(t?.estudiantesifas_id??t?.estudianteifas_id??0);if(!Number.isFinite(i)||i<=0){this._tools.MostrarMensaje("warning","No se pudo identificar el estudiante para el reporte");return}try{this._tools.MostrarMensajeLoading?.()}catch{}let l=this._est.Seleccionarestudiantesifas(i).pipe(Be(f=>f?.data??f??null),$e(()=>le(null))),m=Number(t?.planteldocadmins_id??0),v=Number.isFinite(m)&&m>0?this._planteldoc.Seleccionarplanteldocentes(m).pipe(Be(f=>f?.data??f??null),$e(()=>le(null))):le(null);gt({estudiante:l,docente:v}).subscribe({next:({estudiante:f,docente:C})=>{try{this._tools.OcultarMensajeLoading?.()}catch{}let S=Z(Z({},t??{}),f??{});S.FechNac=S.FechNac??S.FechaNac??"",S.Especialidad=S.Especialidad??S.InstrumentoMusical??"",S.CI=S.CI??S.Carnet??"";let y=C?String([C?.Nombres,C?.Apellidos].filter(Boolean).join(" ")).trim():"";this._reportes.GenerarFormularioInscripcion(S,y,n).catch(A=>{console.error(A),this._tools.MostrarMensaje("error","No se pudo generar el reporte de inscripci\xF3n")})},error:f=>{console.error(f);try{this._tools.OcultarMensajeLoading?.()}catch{}this._tools.MostrarMensaje("error","No se pudo preparar la informaci\xF3n para el reporte")}})}normalizarTexto(t){return(t??"").toString().trim().toUpperCase()}ciSoloNumeros(t){return String(t??"").replace(/\D+/g,"")}ciEstudianteNumerico(){return this.ciSoloNumeros(this.estudianteSeleccionado?.CI??"")}institucionHistorialNombre(){let t=(this.institucionNombreActual??"").toString().trim();if(t)return t;let e=(this.estudianteSeleccionado?.NombreInstitucion??this.estudianteSeleccionado?.Nombre??"").toString().trim();return e||""}abrirHistorialDesdeFormulario(t){t&&(t.preventDefault?.(),t.stopPropagation?.());let e=this.ciEstudianteNumerico();if(!e){this._tools.MostrarMensaje("warning","No se pudo identificar el CI del estudiante");return}this.historialCiBusqueda=e,this.historialInstitucionNombre=this.institucionHistorialNombre(),this.modalCalifhistoriasRef=this._tools.openModal(this.modalOtroComponentecalifhistorias,"xl")}abrirHistorialDesdeInscripcion(t,e){e&&(e.preventDefault?.(),e.stopPropagation?.());let n=this.ciSoloNumeros(t?.CI??t?.ci??"");if(!n){this._tools.MostrarMensaje("warning","No se pudo identificar el CI del estudiante");return}let i=(t?.NombreInstitucion??t?.nombre_institucion??"").toString().trim();this.historialCiBusqueda=n,this.historialInstitucionNombre=i||this.institucionHistorialNombre(),this.modalCalifhistoriasRef=this._tools.openModal(this.modalOtroComponentecalifhistorias,"xl")}cargarCaractisticasInstitucionActual(t){if(!t){this.institucionCaractisticasActual="",this.habilitarSistemaPagosCarreras=!1,this.habilitarCamposMusicales=!1,this.institucionNombreActual="";return}this._inst.Seleccionarinstituciones(t).subscribe({next:e=>{let n=e?.data?.Caractisticas;this.institucionCaractisticasActual=(n??"").toString(),this.habilitarSistemaPagosCarreras=this.normalizarTexto(this.institucionCaractisticasActual).includes("SISTEMA PAGOS CARRERAS"),this.habilitarCamposMusicales=this.normalizarTexto(this.institucionCaractisticasActual).includes("INSTITUTO MUSICAL");let i=(e?.data?.NombreInstitucion??e?.data?.Nombre??"").toString().trim();this.institucionNombreActual=i},error:()=>{this.institucionCaractisticasActual="",this.habilitarSistemaPagosCarreras=!1,this.habilitarCamposMusicales=!1,this.institucionNombreActual=""}})}cargarOptionsEstudiantesDesdeControles(){let t=["SEXO","EXPEDIDO","ESTADO","ESPECIALIDAD","TIPO COLEGIO","GRADO DE COLEGIO","NIVEL EN COLEGIO","OCUPACIONES PADRES"];this._controles.ObtenerOptionsSelectPorCategorias(t).subscribe({next:e=>{this.sexoOptions=e?.SEXO||[],this.expedidoOptions=e?.EXPEDIDO||[],this.estadoOptions=e?.ESTADO||[],this.especialidadOptions=e?.ESPECIALIDAD||[],this.tipoColegioOptions=e?.["TIPO COLEGIO"]||[],this.nivelColegioOptions=e?.["NIVEL EN COLEGIO"]||[],this.gradoColegioOptions=e?.["GRADO DE COLEGIO"]||[],this.OcupacionOptions=e?.["OCUPACIONES PADRES"]||[]},error:()=>{this.sexoOptions=[],this.expedidoOptions=[],this.estadoOptions=[],this.especialidadOptions=[],this.tipoColegioOptions=[],this.nivelColegioOptions=[],this.gradoColegioOptions=[],this.OcupacionOptions=[]}})}abrirModalRegistroEstudianteCompleto(t){this.limpiarFotoTemporalSiCorresponde(),this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!1,this.mostrarContrasenia=!1,this.modoEdicionPerfilEstudiante=!1;let e=(t??"").toString().trim();e&&this.newestudiantesifas.patchValue({CI:e}),this.newestudiantesifas.get("Estado")?.value||this.newestudiantesifas.patchValue({Estado:"ACTIVO"}),this.modalRegistroEstudianteCompletoRef=this._tools.openModal(this.modalRegistroEstudianteCompleto,"xl")}getEstudianteIdActual(){let t=Number(this.estudianteSeleccionado?.id??0);if(t)return t;let e=Number(this.newinfoestudiantesifas?.get("estudiantesifas_id")?.value??0);if(e)return e;let n=Number(this.estudianteId??0);return n||0}puedeAbrirPerfilEstudiante(){return this.getEstudianteIdActual()>0}abrirPerfilEstudianteActual(t){t&&(t.preventDefault?.(),t.stopPropagation?.());let e=this.getEstudianteIdActual();if(!e){this._tools.MostrarMensaje("warning","Seleccione un estudiante primero");return}this.abrirModalEdicionEstudianteCompleto(e)}abrirModalEdicionEstudianteCompleto(t){this.limpiarFotoTemporalSiCorresponde(),this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!1,this.mostrarContrasenia=!1,this.modoEdicionPerfilEstudiante=!0,this._tools.MostrarMensajeLoading(),this._est.Seleccionarestudiantesifas(Number(t)).subscribe({next:e=>{let n=e?.data??null;n&&this.newestudiantesifas.patchValue(n),this.newestudiantesifas.get("Estado")?.value||this.newestudiantesifas.patchValue({Estado:"ACTIVO"}),this.modalRegistroEstudianteCompletoRef=this._tools.openModal(this.modalRegistroEstudianteCompleto,"xl"),this._tools.MostrarMensajeSuccess()},error:()=>{this._tools.MostrarMensajeError(),this.modoEdicionPerfilEstudiante=!1}})}resetestudiantesifas(){this.isEsperandoFotoPerfil&&this.cancelarEsperaCapturaFotoPerfil(!0),this.limpiarFotoTemporalSiCorresponde(),this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!1,this.mostrarContrasenia=!1,this.modoEdicionPerfilEstudiante=!1,this.modalRegistroEstudianteCompletoRef&&this._tools.closeModal(this.modalRegistroEstudianteCompletoRef)}AutoCompletarLastestudiantesifas(){this.newestudiantesifas.setValue(this.newestudiantesifasAnteriorAccion.value),this.newestudiantesifas.patchValue({id:0})}ValidacionestudiantesifasxElemento(t){return this._tools.obtenerValidationClass(this.newestudiantesifas,t)}ValidacionTodoElementoestudiantesifas(){Object.values(this.newestudiantesifas.controls).forEach(t=>{t.markAsTouched(),t.markAsDirty()})}AgregarModificarestudiantesifas(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida de la foto");return}if(this.newestudiantesifas.invalid){this.ValidacionTodoElementoestudiantesifas(),this._tools.MostrarMensajeFrmIncompleto(),this.AnimacionCargabtnModalestudiantesifas=!1;return}this.AnimacionCargabtnModalestudiantesifas=!0,this._tools.MostrarMensajeLoading(),this.newestudiantesifasAnteriorAccion.setValue(this.newestudiantesifas.value);let t=this.newestudiantesifas.controls.id?.value;if(t){if(!this.modoEdicionPerfilEstudiante){this._tools.MensajeInformacion("Acci\xF3n no permitida","Desde inscripci\xF3n solo se registra (no se modifica).","info"),this.AnimacionCargabtnModalestudiantesifas=!1;return}this._est.Modificarestudiantesifas(this.newestudiantesifas.value,t).subscribe({next:e=>{let n=e?.data??null;n&&(this.estudianteSeleccionado=n,this.estudianteId||this.estudianteInput.setValue(this.getNombreCompletoEstudiante(n),{emitEvent:!1})),this.AnimacionCargabtnModalestudiantesifas=!1,this._tools.MostrarMensajeSuccess(),this.resetestudiantesifas()},error:e=>{let n=e?.status,i=e?.error?.message;n===409?this._tools.MensajeInformacion("CI duplicado",i||"Ya existe un estudiante con ese CI.","warning"):this._tools.MostrarMensajeError(),this.AnimacionCargabtnModalestudiantesifas=!1}});return}this._est.Agregarestudiantesifas(this.newestudiantesifas.value).subscribe({next:e=>{let n=e?.data;this.fotoTempPath=null,this.fotoAnteriorPath=null,n?.id&&this.seleccionarEstudiante(n),this.AnimacionCargabtnModalestudiantesifas=!1,this._tools.MostrarMensajeSuccess(),this.resetestudiantesifas()},error:e=>{let n=e?.status,i=e?.error?.message;n===409?this._tools.MensajeInformacion("CI duplicado",i||"Ya existe un estudiante con ese CI.","warning"):this._tools.MostrarMensajeError(),this.AnimacionCargabtnModalestudiantesifas=!1}})}iniciarCapturaFotoPorCelular(){return $(this,null,function*(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida actual");return}if(!this.pairingToken||this.pairingStatus!=="LINKED"){this._tools.MostrarMensaje("info","Primero vincule el celular (QR)"),yield this.abrirVinculacionCelular();return}this._tools.MostrarMensajeLoading();let t=this.newestudiantesifas.get("id")?.value?Number(this.newestudiantesifas.get("id")?.value):null;this._pairing.solicitarCaptura(this.pairingToken,t,"Foto").subscribe({next:e=>{let n=e?.data?.token;if(!n){this._tools.MostrarMensajeError();return}this.capturaTokenFotoPerfil=n,this.capturaStatusFotoPerfil=e?.data?.status??"PENDING",this.isEsperandoFotoPerfil=!0,this.iniciarPollingCapturaFotoPerfil(),this._tools.MostrarMensajeSuccess()},error:e=>{console.log("ERROR solicitando captura",e),this._tools.MostrarMensajeError()}})})}iniciarPollingCapturaFotoPerfil(){this.detenerPollingCapturaFotoPerfil(),this.capturaTokenFotoPerfil&&(this.capturaIntervalIdFotoPerfil=setInterval(()=>{this.capturaTokenFotoPerfil&&this._capture.estadoSesion(this.capturaTokenFotoPerfil).subscribe({next:t=>{let e=t?.data?.status,n=t?.data?.file_path;if(this.capturaStatusFotoPerfil=e??this.capturaStatusFotoPerfil,e==="UPLOADED"&&n){let i=this.fotoTempPath;this.newestudiantesifas.patchValue({Foto:n}),this.fotoTempPath=n,i&&i!==n&&i!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(i),this.isUploadingFoto=!1,this.uploadProgressFoto=0,this.isEsperandoFotoPerfil=!1,this.detenerPollingCapturaFotoPerfil(),this._tools.MostrarMensaje("success","Foto recibida desde el celular")}},error:()=>{}})},2e3))}detenerPollingCapturaFotoPerfil(){this.capturaIntervalIdFotoPerfil&&(clearInterval(this.capturaIntervalIdFotoPerfil),this.capturaIntervalIdFotoPerfil=null)}cancelarEsperaCapturaFotoPerfil(t=!1){let e=this.capturaStatusFotoPerfil;this.detenerPollingCapturaFotoPerfil(),this.capturaStatusFotoPerfil=null,this.capturaTokenFotoPerfil=null,this.isEsperandoFotoPerfil=!1,this.pairingToken&&e!=="UPLOADED"&&this._pairing.cancelarCaptura(this.pairingToken).subscribe({next:()=>{t||this._tools.MostrarMensaje("info","Espera cancelada")},error:()=>{}})}abrirSelectorFoto(t){t.click()}onFotoDragOver(t){t.preventDefault(),this.isDraggingFoto=!0}onFotoDragLeave(t){t.preventDefault(),this.isDraggingFoto=!1}onFotoDrop(t){t.preventDefault(),this.isDraggingFoto=!1;let e=t.dataTransfer?.files;e&&this.handleFotoFiles(e)}onFotoFileSelected(t){let e=t.target,n=e.files;n&&this.handleFotoFiles(n),e.value=""}handleFotoFiles(t){let e=t.item(0);e&&(t.length>1&&this._tools.MostrarMensaje("warning","Solo se permite 1 archivo"),this.subirFoto(e))}subirFoto(t){this.isUploadingFoto=!0,this.uploadProgressFoto=0,this._tools.SubirArchivo(t,"Foto").subscribe({next:e=>{if(e.type===he.UploadProgress&&e.total){this.uploadProgressFoto=Math.round(e.loaded/e.total*100);return}if(e.type===he.Response){let i=e.body?.filePath;if(i){let l=this.fotoTempPath;this.newestudiantesifas.patchValue({Foto:i}),this.fotoTempPath=i,l&&l!==i&&l!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(l)}this.isUploadingFoto=!1}},error:e=>{console.error("Error subiendo foto",e),this.isUploadingFoto=!1,this.uploadProgressFoto=0,this._tools.MostrarMensajeError()}})}limpiarFotoTemporalSiCorresponde(){this.fotoTempPath&&this.fotoTempPath!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(this.fotoTempPath),this.fotoTempPath=null,this.fotoAnteriorPath=null,this.isDraggingFoto=!1,this.isUploadingFoto=!1,this.uploadProgressFoto=0}ngOnDestroy(){this.isEsperandoFotoPerfil&&this.cancelarEsperaCapturaFotoPerfil(!0),this.isCapturandoFotoPago&&this.cancelarEsperaCaptura(!0),this.detenerPollingVinculacion(),this.detenerPollingCaptura(),this.detenerPollingCapturaFotoPerfil()}cargarVinculacionDesdeStorage(){let t=localStorage.getItem("lcch_capture_pairing_token");t&&(this.pairingToken=t,this.refrescarEstadoVinculacion(!1))}refrescarEstadoVinculacion(t){this.pairingToken&&this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:e=>{let n=e?.data?.status??this.pairingStatus;if(this.pairingStatus=n,n==="REVOKED"||n==="EXPIRED"){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null;return}t&&this._tools.MostrarMensaje("success","Vinculaci\xF3n actualizada")},error:e=>{e?.status===404&&(localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null)}})}abrirVinculacionCelular(){return $(this,null,function*(){this._tools.MostrarMensajeLoading();let t=()=>new Promise((e,n)=>{let i=()=>{this._pairing.crearVinculacion().subscribe({next:l=>{let m=l?.data?.token;if(!m)return n(new Error("No token"));this.pairingToken=m,this.pairingStatus=l?.data?.status??null,localStorage.setItem("lcch_capture_pairing_token",m),e(m)},error:l=>n(l)})};if(this.pairingToken){this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:l=>{let m=l?.data?.status??null;if(this.pairingStatus=m,m==="EXPIRED"||m==="REVOKED"){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null,i();return}e(this.pairingToken)},error:l=>{if(l?.status===404){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null,i();return}n(l)}});return}i()});try{let e=yield t(),n=this.router.serializeUrl(this.router.createUrlTree(["/captura-celular",e])),i=window.location.hostname,m=(i==="localhost"||i==="127.0.0.1")&&xe.frontendPublicBaseUrl?xe.frontendPublicBaseUrl:document.baseURI;this.pairingUrl=new URL(n,m).toString();try{this.pairingQrDataUrl=yield Qt.toDataURL(this.pairingUrl,{width:240,margin:1})}catch{this.pairingQrDataUrl=null}this.modalVincularCelularRef=this._tools.openModal(this.modalVincularCelular,"md"),this.modalVincularCelularRef.result.finally(()=>{this.detenerPollingVinculacion()}),this.iniciarPollingVinculacion(),this._tools.MostrarMensajeSuccess()}catch(e){console.log("ERROR creando vinculaci\xF3n",e),this._tools.MostrarMensajeError()}})}iniciarPollingVinculacion(){this.detenerPollingVinculacion(),this.pairingToken&&(this.pairingIntervalId=setInterval(()=>{this.pairingToken&&this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:t=>{let e=t?.data?.status;this.pairingStatus=e??this.pairingStatus,e==="LINKED"&&this.detenerPollingVinculacion()},error:()=>{}})},2e3))}detenerPollingVinculacion(){this.pairingIntervalId&&(clearInterval(this.pairingIntervalId),this.pairingIntervalId=null)}iniciarCapturaFotoPagoPorCelular(){return $(this,null,function*(){if(!this.pairingToken||this.pairingStatus!=="LINKED"){this._tools.MostrarMensaje("info","Primero vincule el celular (QR)"),yield this.abrirVinculacionCelular();return}this._tools.MostrarMensajeLoading();let t=this.estudianteId?Number(this.estudianteId):this.newinfoestudiantesifas.get("estudiantesifas_id")?.value?Number(this.newinfoestudiantesifas.get("estudiantesifas_id")?.value):null;this._pairing.solicitarCaptura(this.pairingToken,t,"pagosAnualesUnicos").subscribe({next:e=>{let n=e?.data?.token;if(!n){this._tools.MostrarMensajeError();return}this.capturaToken=n,this.capturaStatus=e?.data?.status??"PENDING",this.isCapturandoFotoPago=!0,this.iniciarPollingCaptura(),this._tools.MostrarMensajeSuccess()},error:e=>{console.log("ERROR solicitando captura",e),this._tools.MostrarMensajeError()}})})}iniciarPollingCaptura(){this.detenerPollingCaptura(),this.capturaToken&&(this.capturaIntervalId=setInterval(()=>{this.capturaToken&&this._capture.estadoSesion(this.capturaToken).subscribe({next:t=>{let e=t?.data?.status,n=t?.data?.file_path;if(this.capturaStatus=e??this.capturaStatus,e==="UPLOADED"&&n){let i=this.fotoPagoTempPath;this.newinfoestudiantesifas.patchValue({FotoPago:n}),this.fotoPagoTempPath=n,i&&i!==n&&i!==this.fotoPagoAnteriorPath&&this._tools.EliminarArchivo(i),this.isCapturandoFotoPago=!1,this.detenerPollingCaptura(),this._tools.MostrarMensaje("success","FotoPago recibida desde el celular")}},error:()=>{}})},2e3))}detenerPollingCaptura(){this.capturaIntervalId&&(clearInterval(this.capturaIntervalId),this.capturaIntervalId=null)}cancelarEsperaCaptura(t=!1){let e=this.capturaStatus;this.detenerPollingCaptura(),this.capturaStatus=null,this.capturaToken=null,this.isCapturandoFotoPago=!1,this.pairingToken&&e!=="UPLOADED"&&this._pairing.cancelarCaptura(this.pairingToken).subscribe({next:()=>{t||this._tools.MostrarMensaje("info","Espera cancelada")},error:()=>{}})}ngOnChanges(t){t.estudianteId&&!t.estudianteId.firstChange&&this.CargarSegunModo()}snapshotFormValue(t){let e=t;return typeof e.getRawValue=="function"?e.getRawValue():t.value}getTableColspan(){let t=10;return this.esSuperAdmin&&(t+=1),this.estudianteId||(t+=3),t}setupBuscadoresPlantel(){this.docAdminInput.valueChanges.subscribe(t=>{let e=(t??"").toString();if(e===""){this.docentesFiltradosAdmin=[],this.newinfoestudiantesifas.patchValue({planteldocadmins_id:""});return}if(e.trim()===""){this.docentesFiltradosAdmin=this.filtrarPlantelDocentes("",!0);return}this.newinfoestudiantesifas.patchValue({planteldocadmins_id:""}),this.docentesFiltradosAdmin=this.filtrarPlantelDocentes(e.toLowerCase().trim())}),this.docPCInput.valueChanges.subscribe(t=>{let e=(t??"").toString();if(e===""){this.docentesFiltradosPC=[],this.newinfoestudiantesifas.patchValue({planteldocadmins_idPC:""});return}if(e.trim()===""){this.docentesFiltradosPC=this.filtrarPlantelDocentes("",!0);return}this.newinfoestudiantesifas.patchValue({planteldocadmins_idPC:""}),this.docentesFiltradosPC=this.filtrarPlantelDocentes(e.toLowerCase().trim())}),this.docOtrosInput.valueChanges.subscribe(t=>{let e=(t??"").toString();if(e===""){this.docentesFiltradosOtros=[],this.newinfoestudiantesifas.patchValue({planteldocadmins_idOtros:""});return}if(e.trim()===""){this.docentesFiltradosOtros=this.filtrarPlantelDocentes("",!0);return}this.newinfoestudiantesifas.patchValue({planteldocadmins_idOtros:""}),this.docentesFiltradosOtros=this.filtrarPlantelDocentes(e.toLowerCase().trim())})}cargarPlantelDocentes(){this._planteldoc.Obtenerplanteldocentes().subscribe({next:t=>{let e=t?.data||[];this.plantelDocentes=e.filter(n=>this.normalizar(n?.Visibilidad)!=="OCULTO"),this.syncBuscadoresPlantelConForm()},error:t=>{console.error("Error al cargar planteldocentes",t),this.plantelDocentes=[]}})}getInstitucionFiltroId(){let t=this.newinfoestudiantesifas.get("instituciones_id")?.value;return t==null||String(t).trim()===""?null:String(t)}filtrarPlantelDocentes(t,e=!1){let n=this.getInstitucionFiltroId(),i=(this.plantelDocentes||[]).filter(l=>!(n&&String(l?.instituciones_id)!==n)).sort((l,m)=>this.getNombreCompletoDocente(l).localeCompare(this.getNombreCompletoDocente(m)));return e?i.slice(0,50):t?i.filter(l=>this.getNombreCompletoDocente(l).toLowerCase().includes(t)).slice(0,25):[]}normalizar(t){return(t??"").toString().trim().toUpperCase()}getNombreCompletoDocente(t){let e=(t?.Nombres??"").toString().trim(),n=(t?.Apellidos??"").toString().trim();return`${e} ${n}`.trim()}docenteInactivo(t){return this.normalizar(t?.Estado)==="INACTIVO"}seleccionarDocenteAdmin(t){!t||this.docenteInactivo(t)||(this.newinfoestudiantesifas.patchValue({planteldocadmins_id:t?.id??""}),this.docAdminInput.setValue(this.getNombreCompletoDocente(t),{emitEvent:!1}),this.mostrarListaDocAdmin=!1,this.docentesFiltradosAdmin=[])}seleccionarDocentePC(t){!t||this.docenteInactivo(t)||(this.newinfoestudiantesifas.patchValue({planteldocadmins_idPC:t?.id??""}),this.docPCInput.setValue(this.getNombreCompletoDocente(t),{emitEvent:!1}),this.mostrarListaDocPC=!1,this.docentesFiltradosPC=[])}seleccionarDocenteOtros(t){!t||this.docenteInactivo(t)||(this.newinfoestudiantesifas.patchValue({planteldocadmins_idOtros:t?.id??""}),this.docOtrosInput.setValue(this.getNombreCompletoDocente(t),{emitEvent:!1}),this.mostrarListaDocOtros=!1,this.docentesFiltradosOtros=[])}syncBuscadoresPlantelConForm(){if(!this.plantelDocentes?.length)return;let t=this.newinfoestudiantesifas.get("planteldocadmins_id")?.value,e=this.newinfoestudiantesifas.get("planteldocadmins_idPC")?.value,n=this.newinfoestudiantesifas.get("planteldocadmins_idOtros")?.value,i=f=>(this.plantelDocentes||[]).find(C=>String(C?.id)===String(f)),l=t?i(t):null,m=e?i(e):null,v=n?i(n):null;l&&this.docAdminInput.setValue(this.getNombreCompletoDocente(l),{emitEvent:!1}),m&&this.docPCInput.setValue(this.getNombreCompletoDocente(m),{emitEvent:!1}),v&&this.docOtrosInput.setValue(this.getNombreCompletoDocente(v),{emitEvent:!1})}cargarOptionsDesdeControles(){let t=["TIPO DE ESTUDIANTE","TURNO","LVLCURSO","ESPECIALIDAD","ESPECIALIDAD SECUNDARIA","VERIFICACI\xD3N INSCRIPCIONES"];this._controles.ObtenerOptionsSelectPorCategorias(t).subscribe({next:e=>{this.categoriaOptions=e?.["TIPO DE ESTUDIANTE"]||[],this.turnoOptions=e?.TURNO||[],this.cursoOptions=e?.LVLCURSO||[],this.InstrumentoMusicalOptions=e?.ESPECIALIDAD||[],this.InstrumentoMusicalSecundarioOptions=e?.["ESPECIALIDAD SECUNDARIA"]||[],this.VerificacionInscripciones=e?.["VERIFICACI\xD3N INSCRIPCIONES"]||[]},error:()=>{this.categoriaOptions=[],this.turnoOptions=[],this.cursoOptions=[],this.InstrumentoMusicalOptions=[],this.InstrumentoMusicalSecundarioOptions=[],this.VerificacionInscripciones=[]}})}abrirModalNuevoInfoestudiantesifas(){this.modalGestioninfoestudiantesifasRef=this._tools.openModal(this.modalgestioninfoestudiantesifas,"xl")}getGestionPagoActual(){let t=this.selectedAnioId===""?0:Number(this.selectedAnioId);return((Array.isArray(this.anios)?this.anios.find(i=>Number(i?.id??0)===t):null)?.Anio??"").toString().trim()||String(new Date().getFullYear())}normalizeVerifCurso(t){return(t??"").toString().trim()}normalizeVerifParalelo(t){let e=(t??"").toString().trim();return e||"SIN DETERMINAR"}normalizeVerifTurno(t){let e=(t??"").toString().trim();return e||"SIN DETERMINAR"}get verifCursoOptions(){return Array.isArray(this.verifFilterOptions?.cursos)?this.verifFilterOptions.cursos:[]}get verifParaleloOptions(){return Array.isArray(this.verifFilterOptions?.paralelos)?this.verifFilterOptions.paralelos:[]}get verifTurnoOptions(){return Array.isArray(this.verifFilterOptions?.turnos)?this.verifFilterOptions.turnos:[]}pruneVerifSelections(){let t=new Set(this.verifCursoOptions),e=new Set(this.verifParaleloOptions),n=new Set(this.verifTurnoOptions);this.verifCursosSel=(this.verifCursosSel||[]).filter(i=>t.has(i)),this.verifParalelosSel=(this.verifParalelosSel||[]).filter(i=>e.has(i)),this.verifTurnosSel=(this.verifTurnosSel||[]).filter(i=>n.has(i))}verifCursoSelected(t){return Array.isArray(this.verifCursosSel)&&this.verifCursosSel.includes(t)}verifParaleloSelected(t){return Array.isArray(this.verifParalelosSel)&&this.verifParalelosSel.includes(t)}verifTurnoSelected(t){return Array.isArray(this.verifTurnosSel)&&this.verifTurnosSel.includes(t)}toggleVerifCurso(t){let e=(t??"").toString();if(!e)return;Array.isArray(this.verifCursosSel)||(this.verifCursosSel=[]);let n=this.verifCursosSel.indexOf(e);n>=0?this.verifCursosSel.splice(n,1):this.verifCursosSel.push(e),this.verifPage=1,this.cargarVerificacionAsignacion(1)}toggleVerifParalelo(t){let e=(t??"").toString();if(!e)return;Array.isArray(this.verifParalelosSel)||(this.verifParalelosSel=[]);let n=this.verifParalelosSel.indexOf(e);n>=0?this.verifParalelosSel.splice(n,1):this.verifParalelosSel.push(e),this.verifPage=1,this.cargarVerificacionAsignacion(1)}toggleVerifTurno(t){let e=(t??"").toString();if(!e)return;Array.isArray(this.verifTurnosSel)||(this.verifTurnosSel=[]);let n=this.verifTurnosSel.indexOf(e);n>=0?this.verifTurnosSel.splice(n,1):this.verifTurnosSel.push(e),this.verifPage=1,this.cargarVerificacionAsignacion(1)}limpiarFiltrosVerificacion(t){let e=t?.reload!==!1;this.verifCursosSel=[],this.verifParalelosSel=[],this.verifTurnosSel=[],e&&(this.verifPage=1,this.cargarVerificacionAsignacion(1))}setVerifFiltroEstado(t){this.verifFiltroEstado=t,this.verifPage=1,this.cargarVerificacionAsignacion(1)}normalizeText(t){return(t??"").toString().trim().toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}getTurnoRowClass(t){let e=this.normalizeText(t);return e?e.includes("MANANA")||e.includes("MA\xD1ANA")||e.includes("DIURNO")?"turno-manana":e.includes("TARDE")?"turno-tarde":e.includes("NOCHE")||e.includes("VESPERTINO")?"turno-noche":"":""}toggleCheckPreviewRow(t){if(t){if(t.fueraRangoEdad){t.checked=!1;return}t.checked=!t.checked}}cargarAnios(){this._anios.ObtenerAniosConPredeterminado().subscribe({next:t=>{if(this.anios=t?.anios||[],this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){let e=t?.predeterminado;e?.id?this.selectedAnioId=e.id:this.anios?.length&&(this.selectedAnioId=this.anios[0]?.id??"")}this.CargarSegunModo()},error:t=>{console.error("Error al cargar anios",t),this.CargarSegunModo()}})}buildNombreCompleto(t,e,n){return`${(t??"").toString().trim()} ${(e??"").toString().trim()} ${(n??"").toString().trim()}`.replace(/\s+/g," ").trim()}abrirAsignadorMateriasGeneral(){this.asignadorModo="general",this.asignadorEstudianteId=null,this.asignadorNombreEstudiante=null,this.asignadorFotoEstudiante=null,this.asignadorSexoEstudiante=null,this.asignadorPreferInfoId=null,this.modalAsignacionesEstudiantesRef=this._tools.openModal(this.modalOtroComponenteAsignacionesEstudiantes,"xl"),this.modalAsignacionesEstudiantesRef?.result?.finally(()=>{this.Cargarinfoestudiantesifas(),this.isVerifModalOpen&&this.cargarVerificacionAsignacion(this.verifPage,{preserveScroll:!0})})}abrirAsignadorMateriasDesdeInscripcion(t){this.asignadorModo="estudiante",this.asignadorPreferInfoId=Number(t?.id??0)||null;let e=this.estudianteId?Number(this.estudianteId):Number(t?.estudiantesifas_id??0);this.asignadorEstudianteId=Number.isFinite(e)&&e>0?e:null,this.estudianteId?(this.asignadorNombreEstudiante=this.nombreEstudiante,this.asignadorFotoEstudiante=this.fotoEstudiante,this.asignadorSexoEstudiante=this.sexoEstudiante):(this.asignadorNombreEstudiante=this.buildNombreCompleto(t?.Ap_Paterno,t?.Ap_Materno,t?.Nombre)||(this.asignadorEstudianteId?`Estudiante #${this.asignadorEstudianteId}`:null),this.asignadorFotoEstudiante=null,this.asignadorSexoEstudiante=null,this.asignadorEstudianteId&&this._est.Seleccionarestudiantesifas(this.asignadorEstudianteId).subscribe({next:n=>{let i=n?.data;if(!i)return;this.asignadorFotoEstudiante=i?.Foto??i?.foto??this.asignadorFotoEstudiante,this.asignadorSexoEstudiante=i?.Sexo??i?.sexo??this.asignadorSexoEstudiante;let l=this.buildNombreCompleto(i?.Ap_Paterno,i?.Ap_Materno,i?.Nombre);l&&(this.asignadorNombreEstudiante=l)},error:()=>{}})),this.modalAsignacionesEstudiantesRef=this._tools.openModal(this.modalOtroComponenteAsignacionesEstudiantes,"xl"),this.modalAsignacionesEstudiantesRef?.result?.finally(()=>{this.Cargarinfoestudiantesifas(),this.isVerifModalOpen&&this.cargarVerificacionAsignacion(this.verifPage,{preserveScroll:!0})})}abrirRegistroPagoDesdeInscripcion(t){this.pagosModo="estudiante";let e=Number(t?.id??0);this.pagosInfoId=Number.isFinite(e)&&e>0?e:null;let n=this.estudianteId?Number(this.estudianteId):Number(t?.estudiantesifas_id??0);this.pagosEstudianteId=Number.isFinite(n)&&n>0?n:null;let i=String(t?.Anio??"").trim();if(this.pagosGestionPredeterminada=i||String(new Date().getFullYear()),this.estudianteId?(this.pagosNombreEstudiante=this.nombreEstudiante,this.pagosFotoEstudiante=this.fotoEstudiante,this.pagosSexoEstudiante=this.sexoEstudiante):(this.pagosNombreEstudiante=this.buildNombreCompleto(t?.Ap_Paterno,t?.Ap_Materno,t?.Nombre)||(this.pagosEstudianteId?`Estudiante #${this.pagosEstudianteId}`:null),this.pagosFotoEstudiante=null,this.pagosSexoEstudiante=null,this.pagosEstudianteId&&this._est.Seleccionarestudiantesifas(this.pagosEstudianteId).subscribe({next:l=>{let m=l?.data;if(!m)return;this.pagosFotoEstudiante=m?.Foto??m?.foto??this.pagosFotoEstudiante,this.pagosSexoEstudiante=m?.Sexo??m?.sexo??this.pagosSexoEstudiante;let v=this.buildNombreCompleto(m?.Ap_Paterno,m?.Ap_Materno,m?.Nombre);v&&(this.pagosNombreEstudiante=v)},error:()=>{}})),!this.pagosInfoId){this._tools.MostrarMensaje("warning","No se pudo identificar la inscripci\xF3n del estudiante");return}this.modalRegistrarpagosRef=this._tools.openModal(this.modalOtroComponenteRegistrarpagos,"xl")}onAnioChange(){this.paginainfoestudiantesifas=1,this.Cargarinfoestudiantesifas(),this.modalEstadisticasRef&&this.cargarEstadisticasInscripciones()}generarCuadroInscripciones(){if(this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){this._tools.MostrarMensaje("warning","Seleccione un a\xF1o para generar el cuadro");return}if(!this.isGenerandoCuadroInscripciones){this.isGenerandoCuadroInscripciones=!0;try{let t=this.getInstitucionIdParaReportes();this._reportes.GenerarCuadroInscripciones2026(1,Number(this.selectedAnioId),"MIXTO",this.incluirSinAsignar,t)}catch(t){console.error(t),this._tools.MostrarMensaje("error","No se pudo generar el cuadro de inscripciones")}finally{setTimeout(()=>{this.isGenerandoCuadroInscripciones=!1},1200)}}}getInstitucionIdParaReportes(){let t=this.getInstitucionFiltroId();if(!t)return null;let e=Number(t);return Number.isFinite(e)&&e>0?e:null}abrirModalListasPreliminaresCursos(){if(this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){this._tools.MostrarMensaje("warning","Seleccione un a\xF1o para generar las listas");return}this.cursosParaListas=[],this.isLoadingCursosParaListas=!0,this.incluirEspecialidadListas=!1,this.modalListasPreliminaresCursosRef=this._tools.openModal(this.modalListasPreliminaresCursos,"lg");let t=this.getInstitucionIdParaReportes();this._infoest.ObtenerEstadisticasInscripciones({anio_id:Number(this.selectedAnioId),include_sin_asignar:this.incluirSinAsignar?1:0,anio_scope:"default",instituciones_id:t??void 0}).subscribe({next:e=>{let n=Array.isArray(e?.por_curso_paralelo)?e.por_curso_paralelo:[];this.cursosParaListas=n.map(i=>({curso:(i?.curso??"").toString().trim(),paralelo:(i?.paralelo??"").toString().trim(),paraleloLabel:(i?.paralelo_label??i?.paralelo??"").toString().trim()||"SIN DETERMINAR",total:Number(i?.total??0)||0,selected:!0})).filter(i=>i.curso!=="").sort((i,l)=>{let m=i.curso.localeCompare(l.curso);return m!==0?m:i.paraleloLabel.localeCompare(l.paraleloLabel)}),this.isLoadingCursosParaListas=!1},error:e=>{console.error("Error al cargar cursos para listas",e),this.cursosParaListas=[],this.isLoadingCursosParaListas=!1}})}get verifRowsFiltradas(){return Array.isArray(this.verifRows)?this.verifRows:[]}getVerifRowNgClass(t){let e=Number(t?.ok??0)===1;return{"bg-success-subtle":e,"border-start":!0,"border-4":!0,"border-success":e,"bg-danger-subtle":!e,"border-danger":!e}}editarDesdeVerificacion(t,e,n){try{n?.stopPropagation?.(),n?.preventDefault?.()}catch{}let i=Number(t?.id??0);this.Seleccionarinfoestudiantesifas(i,{afterClose:()=>{this.cargarVerificacionAsignacion(this.verifPage,{preserveScroll:!0,focusRowId:i})}})}onVerifAnioChange(){let t=this.verifAnioId===""?0:Number(this.verifAnioId);if(!Number.isFinite(t)||t<=0){this.verifRows=[],this.verifStats={totalPagina:0,okPagina:0,noPagina:0,totalFiltrado:0,totalYear:0},this.verifPage=1,this.verifLastPage=1,this.verifFiltroEstado="MIXTO",this.limpiarFiltrosVerificacion({reload:!1});return}this.verifPage=1,this.verifFiltroEstado="MIXTO",this.limpiarFiltrosVerificacion({reload:!1}),this.cargarVerificacionAsignacion(1)}abrirModalVerificacionAsignacion(){if(this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){this._tools.MostrarMensaje("warning","Seleccione un a\xF1o");return}this.verifAnioId=this.selectedAnioId,this.verifFiltroEstado="MIXTO",this.verifRows=[],this.verifStats={totalPagina:0,okPagina:0,noPagina:0,totalFiltrado:0,totalYear:0},this.verifPerPage=20,this.verifPage=1,this.verifLastPage=1,this.isLoadingVerificacionAsignacion=!1,this.verifCursosSel=[],this.verifParalelosSel=[],this.verifTurnosSel=[],this.verifFilterOptions={cursos:[],paralelos:[],turnos:[]},this.modalVerificacionAsignacionRef=this._tools.openModal(this.modalVerificacionAsignacion,"xl"),this.isVerifModalOpen=!0,this.modalVerificacionAsignacionRef?.result?.finally(()=>{this.isVerifModalOpen=!1,this.Cargarinfoestudiantesifas()}),setTimeout(()=>{this.cargarVerificacionAsignacion(1)},0)}restoreVerifScrollAfterLoad(){let t=this.verifTableScroll?.nativeElement;if(!t){this.verifPendingRestoreScrollTop=null,this.verifPendingFocusRowId=null;return}let e=this.verifPendingFocusRowId,n=this.verifPendingRestoreScrollTop;this.verifPendingRestoreScrollTop=null,this.verifPendingFocusRowId=null,setTimeout(()=>{try{if(Number.isFinite(Number(e))&&Number(e)>0){let i=document.getElementById(`verif-row-${Number(e)}`);if(i){i.scrollIntoView({block:"center"});return}}n!==null&&(t.scrollTop=n)}catch{}},0)}cargarVerificacionAsignacion(t=1,e){let n=this.verifAnioId===""?0:Number(this.verifAnioId);if(!Number.isFinite(n)||n<=0){this._tools.MostrarMensaje("warning","Seleccione un a\xF1o");return}if(this.isLoadingVerificacionAsignacion)return;e?.preserveScroll===!0&&this.verifTableScroll?.nativeElement&&(this.verifRows?.length||0)>0?this.verifPendingRestoreScrollTop=this.verifTableScroll.nativeElement.scrollTop:this.verifPendingRestoreScrollTop=null;let l=e?.focusRowId,m=Number(l??0);this.verifPendingFocusRowId=Number.isFinite(m)&&m>0?m:null,this.isLoadingVerificacionAsignacion=!0,this.verifPage=Number.isFinite(Number(t))&&Number(t)>0?Number(t):1;let f=this.getInstitucionIdParaReportes();this._infoest.AccionesGrupalesVerificarAsignacion({anio_id:n,instituciones_id:f??void 0,estudiante_id:this.estudianteId?Number(this.estudianteId):void 0,page:this.verifPage,per_page:this.verifPerPage,filtro_estado:this.verifFiltroEstado,cursos:Array.isArray(this.verifCursosSel)?this.verifCursosSel:[],paralelos:Array.isArray(this.verifParalelosSel)?this.verifParalelosSel:[],turnos:Array.isArray(this.verifTurnosSel)?this.verifTurnosSel:[]}).subscribe({next:C=>{let S=Array.isArray(C?.data)?C.data:[];this.verifRows=S;let y=C?.meta??{};this.verifPage=Number(y?.current_page??this.verifPage)||this.verifPage,this.verifLastPage=Number(y?.last_page??1)||1;let A=Number(y?.total??S.length)||S.length,R=Number(y?.total_year??0)||0,O=y?.filter_options??{},K=Array.isArray(O?.cursos)?O.cursos.map(B=>(B??"").toString().trim()).filter(B=>B!==""):[],ee=Array.isArray(O?.paralelos)?O.paralelos.map(B=>(B??"").toString().trim()).filter(B=>B!==""):[],Y=Array.isArray(O?.turnos)?O.turnos.map(B=>(B??"").toString().trim()).filter(B=>B!==""):[];this.verifFilterOptions={cursos:K.sort((B,re)=>B.localeCompare(re)),paralelos:ee.sort((B,re)=>B.localeCompare(re)),turnos:Y.sort((B,re)=>B.localeCompare(re))};let X=S.filter(B=>Number(B?.ok??0)===1).length,oe=S.length-X;this.verifStats={totalPagina:S.length,okPagina:X,noPagina:oe,totalFiltrado:A,totalYear:R},this.pruneVerifSelections(),this.restoreVerifScrollAfterLoad(),this.isLoadingVerificacionAsignacion=!1},error:C=>{console.error(C);let S=C?.error?.message??"No se pudo cargar la verificaci\xF3n";this._tools.MostrarMensaje("error",S),this.verifRows=[],this.verifStats={totalPagina:0,okPagina:0,noPagina:0,totalFiltrado:0,totalYear:0},this.verifLastPage=1,this.isLoadingVerificacionAsignacion=!1,this.verifPendingRestoreScrollTop=null,this.verifPendingFocusRowId=null}})}onVerifPageChange(t){this.cargarVerificacionAsignacion(t)}onVerifPerPageChange(){this.verifPage=1,this.cargarVerificacionAsignacion(1)}rebuildResolucionOptionsAcciones(){let t=new Map;for(let e of this.carrerasAcciones||[]){let n=(e?.Resolucion??"").toString().trim();if(!n)continue;let i=(e?.Nivel??"").toString().trim(),l=(e?.Area??"").toString().trim(),m=e?.instituciones_id,v=m!=null&&m!==""?Number(m):null,f=(e?.NombreInstitucion??"").toString().trim(),C=i||"SIN NIVEL",S=`${n}|${C}`,y=this.esSuperAdmin&&v?`${v}|${S}`:S,A=`${l?l+" \xB7 ":""}${n} (${C})`,R=this.esSuperAdmin&&v?`${A}${f?" \xB7 "+f:""}`:A;t.has(y)||t.set(y,{key:y,label:R,resolucion:n,nivel:C,instituciones_id:v})}this.resolucionOptionsAcciones=Array.from(t.values()).sort((e,n)=>e.label.localeCompare(n.label))}parseAccionResolucionKey(){let t=(this.accionResolucionKey??"").toString();if(!t){this.accionResolucion=null,this.accionNivelCarrera=null,this.accionInstitucionId=null;return}let e=t.split("|");if(e.length>=3){let n=Number(e[0]),i=(e[1]??"").toString(),l=e.slice(2).join("|");this.accionInstitucionId=Number.isFinite(n)?n:null,this.accionResolucion=i||null,this.accionNivelCarrera=l||null;return}if(e.length===2){let n=(e[0]??"").toString(),i=(e[1]??"").toString();this.accionInstitucionId=null,this.accionResolucion=n||null,this.accionNivelCarrera=i||null;return}this.accionInstitucionId=null,this.accionResolucion=t,this.accionNivelCarrera=null}parseModResolucionKey(){let t=(this.modResolucionKey??"").toString();if(!t){this.modResolucion=null;return}let e=t.split("|");if(e.length>=3){let n=(e[1]??"").toString();this.modResolucion=n||null;return}if(e.length===2){let n=(e[0]??"").toString();this.modResolucion=n||null;return}this.modResolucion=t}onCambioModResolucion(){this.parseModResolucionKey()}getEdadFromRow(t){let e=t?.Edad??t?.edad??null;if(e==null||e==="")return null;let n=Number(e);return!Number.isFinite(n)||n<=0?null:Math.trunc(n)}buildModPreviewRows(){let t=Array.isArray(this.modFuenteRows)?this.modFuenteRows:[],e=this.modEdadMin!==null&&this.modEdadMin!==void 0?Number(this.modEdadMin):null,n=this.modEdadMax!==null&&this.modEdadMax!==void 0?Number(this.modEdadMax):null,i=e!==null&&Number.isFinite(e)||n!==null&&Number.isFinite(n),l=(this.modNuevoCurso??"").toString().trim(),m=(this.modNuevoParalelo??"").toString().trim(),v=(this.modNuevoTurno??"").toString().trim(),f=t.map(y=>{let A=this.buildNombreCompleto(y?.Ap_Paterno,y?.Ap_Materno,y?.Nombre),R=(y?.CI??"").toString().trim(),O=this.getEdadFromRow(y),K=Number(y?.CantidadMateriasAsignadas??y?.cantidadAsignaciones??0)||0,ee=(y?.Curso_Solicitado??"").toString().trim(),Y=(y?.Paralelo_Solicitado??"").toString().trim(),X=(y?.Turno??"").toString().trim(),oe=this.modCambiarCurso&&l||ee,B=this.modCambiarParalelo?m:Y,re=this.modCambiarTurno&&v||X,Oe=!1;return i&&(O===null?Oe=!0:(e!==null&&Number.isFinite(e)&&O<e&&(Oe=!0),n!==null&&Number.isFinite(n)&&O>n&&(Oe=!0))),{row:y,checked:!Oe,nombre:A||"(SIN NOMBRE)",ci:R,edad:O,cantidadAsignaciones:K,cursoActual:ee,paraleloActual:Y||"SIN DETERMINAR",turnoActual:X,cursoNuevo:oe,paraleloNuevo:this.modCambiarParalelo?B||"SIN DETERMINAR":Y||"SIN DETERMINAR",turnoNuevo:re,fueraRangoEdad:Oe}}),C=new Map,S=new Map;(this.modPreviewRows||[]).forEach(y=>{let A=Number(y?.row?.id??0);A>0&&(C.set(A,!!y.checked),S.set(A,!!y.fueraRangoEdad))}),f.forEach(y=>{let A=Number(y?.row?.id??0);if(y.fueraRangoEdad){y.checked=!1;return}A>0&&C.has(A)&&(S.get(A)||(y.checked=!!C.get(A)))}),this.modPreviewRows=f}seleccionarTodosModificacion(t){(this.modPreviewRows||[]).forEach(e=>{e.fueraRangoEdad?e.checked=!1:e.checked=t})}modSeleccionadosCount(){return(this.modPreviewRows||[]).filter(t=>!!t.checked).length}abrirModalAccionesGrupalesModificacion(){if(!this.esPlantelAdministrativo){this._tools.MostrarMensaje("warning","Solo planteladministrativos pueden ejecutar acciones grupales");return}this.modEdadMin=null,this.modEdadMax=null,this.modCursoActual="",this.modParaleloActual="",this.modParaleloActualEsVacio=!1,this.isLoadingListaModificacion=!1,this.modFuenteRows=[],this.modPreviewRows=[],this.modCambiarCurso=!1,this.modNuevoCurso="",this.modCambiarParalelo=!1,this.modNuevoParalelo="",this.modCambiarTurno=!1,this.modNuevoTurno="",this.modQuitarAsignaciones=!1,this.modAnioAsignacionesId=this.selectedAnioId,this.modResolucionKey="",this.modResolucion=null,this.isEjecutandoModificacionGrupal=!1,this._carreras.Obtenercarreras().subscribe({next:t=>{this.carrerasAcciones=Array.isArray(t?.data)?t.data:[],this.rebuildResolucionOptionsAcciones()},error:()=>{this.carrerasAcciones=[],this.resolucionOptionsAcciones=[]}}),this.modalAccionesGrupalesModificacionRef=this._tools.openModal(this.modalAccionesGrupalesModificacion,"xl")}onCambioFiltrosModificacion(){(this.modFuenteRows||[]).length>0&&this.buildModPreviewRows()}limpiarListaModificacion(){this.modFuenteRows=[],this.modPreviewRows=[]}buildParamsListaModificacion(t){let e=this.selectedAnioId===""?void 0:Number(this.selectedAnioId),n=this.getInstitucionIdParaReportes(),i={page:t,per_page:200,anio_id:e,include_sin_asignar:this.incluirSinAsignar||this.soloSinAsignaciones?1:0,anio_scope:this.soloSinAsignaciones?"unassigned":"default",instituciones_id:n??void 0,estudiante_id:this.estudianteId?Number(this.estudianteId):void 0,sort_by:"Ap_Paterno",sort_dir:"asc"},l=(this.modCursoActual??"").toString().trim();if(l&&(i.Curso_Solicitado=l),this.modParaleloActualEsVacio)i.Paralelo_Solicitado_empty=1;else{let m=(this.modParaleloActual??"").toString().trim();m&&(i.Paralelo_Solicitado=m)}return i}cargarListaModificacion(){if(!(this.modCursoActual??"").toString().trim()){this._tools.MostrarMensaje("warning","Seleccione el Curso solicitado (actual)");return}if(!this.modParaleloActualEsVacio&&!(this.modParaleloActual??"").toString().trim()){this._tools.MostrarMensaje("warning",'Indique el Paralelo actual o marque "SIN DETERMINAR"');return}if(this.isLoadingListaModificacion)return;this.isLoadingListaModificacion=!0,this.modFuenteRows=[],this.modPreviewRows=[];let e=[],n=i=>{this._infoest.Obtenerinfoestudiantesifas(this.buildParamsListaModificacion(i)).subscribe({next:l=>{let m=Array.isArray(l?.data)?l.data:[];e.push(...m);let v=l?.meta??{},f=Number(v?.current_page??i)||i,C=Number(v?.last_page??f)||f;if(f<C){n(f+1);return}this.modFuenteRows=e,this.buildModPreviewRows(),this.isLoadingListaModificacion=!1},error:l=>{console.error(l),this.modFuenteRows=[],this.modPreviewRows=[],this.isLoadingListaModificacion=!1,this._tools.MostrarMensaje("error","No se pudo cargar la lista para modificaci\xF3n")}})};n(1)}puedeEjecutarModificacion(){if(this.isEjecutandoModificacionGrupal||this.modSeleccionadosCount()===0)return!1;let t=this.modCambiarCurso||this.modCambiarParalelo||this.modCambiarTurno,e=!!this.modQuitarAsignaciones;if(!t&&!e||this.modCambiarCurso&&!(this.modNuevoCurso??"").toString().trim()||this.modCambiarTurno&&!(this.modNuevoTurno??"").toString().trim())return!1;if(e){let n=this.modAnioAsignacionesId===""?0:Number(this.modAnioAsignacionesId);if(!Number.isFinite(n)||n<=0||(this.parseModResolucionKey(),!this.modResolucion))return!1}return!0}ejecutarModificacionGrupal(t){if(!this.puedeEjecutarModificacion()){this._tools.MostrarMensaje("warning","Complete la selecci\xF3n antes de ejecutar");return}let e=(this.modPreviewRows||[]).filter(i=>!!i.checked).map(i=>Number(i?.row?.id??0)).filter(i=>Number.isFinite(i)&&i>0);if(e.length===0){this._tools.MostrarMensaje("warning","No hay inscripciones seleccionadas");return}let n={ids:e,cambiar_curso:this.modCambiarCurso?1:0,nuevo_curso:this.modCambiarCurso?(this.modNuevoCurso??"").toString().trim():null,cambiar_paralelo:this.modCambiarParalelo?1:0,nuevo_paralelo:this.modCambiarParalelo?(this.modNuevoParalelo??"").toString().trim():null,cambiar_turno:this.modCambiarTurno?1:0,nuevo_turno:this.modCambiarTurno?(this.modNuevoTurno??"").toString().trim():null,quitar_asignaciones:this.modQuitarAsignaciones?1:0};if(this.modQuitarAsignaciones){let i=this.modAnioAsignacionesId===""?0:Number(this.modAnioAsignacionesId);this.parseModResolucionKey(),n.anio_id_asignaciones=i,n.resolucion=this.modResolucion}this.isEjecutandoModificacionGrupal=!0,this._infoest.AccionesGrupalesModificarInscripciones(n).subscribe({next:i=>{let l=i?.stats??null,m=Number(l?.total_actualizadas??0)||0,v=Number(l?.deleted_calificaciones??0)||0;this._tools.MostrarMensaje("success",`Acci\xF3n completada. Inscripciones actualizadas: ${m}. Asignaciones eliminadas: ${v}.`),this.isEjecutandoModificacionGrupal=!1;try{t?.close?.("ok")}catch{}this.Cargarinfoestudiantesifas()},error:i=>{console.error(i);let l=i?.error?.message??"No se pudo ejecutar la modificaci\xF3n grupal";this._tools.MostrarMensaje("error",l),this.isEjecutandoModificacionGrupal=!1}})}onCambioAccionResolucion(){this.parseAccionResolucionKey()}abrirModalAccionesGrupalesCursos(){if(!this.esPlantelAdministrativo){this._tools.MostrarMensaje("warning","Solo planteladministrativos pueden ejecutar acciones grupales");return}if(this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){this._tools.MostrarMensaje("warning","Seleccione un a\xF1o");return}this.accionModo="",this.accionAnioId=this.selectedAnioId,this.cursosParaAcciones=[],this.cursosParaAccionesAll=[],this.isLoadingCursosParaAcciones=!0,this.ultimoLoteAccionGrupalUuid=null,this._carreras.Obtenercarreras().subscribe({next:t=>{this.carrerasAcciones=Array.isArray(t?.data)?t.data:[],this.rebuildResolucionOptionsAcciones()},error:()=>{this.carrerasAcciones=[],this.resolucionOptionsAcciones=[]}}),this.modalAccionesGrupalesCursosRef=this._tools.openModal(this.modalAccionesGrupalesCursos,"lg"),this.reloadCursosParaAcciones()}onCambioAccionAnio(){this.reloadCursosParaAcciones()}reloadCursosParaAcciones(){let t=this.accionAnioId===""?0:Number(this.accionAnioId);if(!Number.isFinite(t)||t<=0){this.cursosParaAcciones=[],this.cursosParaAccionesAll=[],this.isLoadingCursosParaAcciones=!1;return}this.isLoadingCursosParaAcciones=!0;let e=this.getInstitucionIdParaReportes();this._infoest.ObtenerEstadisticasInscripciones({anio_id:t,include_sin_asignar:this.incluirSinAsignar||this.soloSinAsignaciones?1:0,anio_scope:this.soloSinAsignaciones?"unassigned":"default",instituciones_id:e??void 0}).subscribe({next:n=>{let i=Array.isArray(n?.por_curso_paralelo)?n.por_curso_paralelo:[];this.cursosParaAccionesAll=i.map(l=>({curso:(l?.curso??"").toString().trim(),paralelo:(l?.paralelo??"").toString().trim(),paraleloLabel:(l?.paralelo_label??l?.paralelo??"").toString().trim()||"SIN DETERMINAR",total:Number(l?.total??0)||0,selected:!0})).filter(l=>l.curso!=="").sort((l,m)=>{let v=l.curso.localeCompare(m.curso);return v!==0?v:l.paraleloLabel.localeCompare(m.paraleloLabel)}),this.rebuildCursosParaAccionesFiltered(),this.isLoadingCursosParaAcciones=!1},error:n=>{console.error("Error al cargar cursos para acciones grupales",n),this.cursosParaAcciones=[],this.cursosParaAccionesAll=[],this.isLoadingCursosParaAcciones=!1}})}onCambioAccionModo(){this.rebuildCursosParaAccionesFiltered()}rebuildCursosParaAccionesFiltered(){let t=this.accionModo,e=Array.isArray(this.cursosParaAccionesAll)?this.cursosParaAccionesAll:[];if(t===""){this.cursosParaAcciones=[];return}let n=l=>(l||"").toUpperCase().includes("SUPERIOR"),i=e;t==="superior"?i=e.filter(l=>n(l.curso)):t==="capacitacion"?i=e.filter(l=>!n(l.curso)):i=[],this.cursosParaAcciones=i.map(l=>ne(Z({},l),{selected:!0}))}seleccionarTodosCursosAcciones(t){(this.cursosParaAcciones||[]).forEach(e=>e.selected=t)}cursosAccionesSeleccionadosCount(){return(this.cursosParaAcciones||[]).filter(t=>!!t.selected).length}ejecutarAccionGrupalAsignacion(){let t=this.accionAnioId===""?0:Number(this.accionAnioId);if(!Number.isFinite(t)||t<=0){this._tools.MostrarMensaje("warning","Seleccione un a\xF1o");return}if(this.accionModo===""){this._tools.MostrarMensaje("warning","Debe seleccionar un modo");return}if(this.parseAccionResolucionKey(),!this.accionResolucion||!this.accionNivelCarrera){this._tools.MostrarMensaje("warning","Seleccione una Resoluci\xF3n");return}let e=(this.cursosParaAcciones||[]).filter(i=>!!i.selected).map(i=>({curso:i.curso,paralelo:i.paralelo}));if(e.length===0){this._tools.MostrarMensaje("warning","Seleccione al menos un curso");return}if(this.isEjecutandoAccionGrupal)return;this.isEjecutandoAccionGrupal=!0;let n=this.getInstitucionIdParaReportes();this._infoest.AccionesGrupalesAsignarMaterias({anio_id:t,instituciones_id:n??void 0,resolucion:this.accionResolucion,nivel:this.accionNivelCarrera,modo:this.accionModo,cursos:e}).subscribe({next:i=>{this.ultimoLoteAccionGrupalUuid=i?.uuid??null?String(i.uuid):null;let l=Number(i?.stats?.total_creadas??0)||0,m=Number(i?.stats?.total_anotados??0)||0,v=Number(i?.stats?.total_infos??0)||0;this._tools.MostrarMensaje("success",`Acci\xF3n completada. Inscripciones: ${v}. Asignaciones creadas: ${l}. Anotados: ${m}.`),this.Cargarinfoestudiantesifas(),this.isEjecutandoAccionGrupal=!1},error:i=>{console.error(i);let l=i?.error?.message??"No se pudo ejecutar la acci\xF3n grupal";this._tools.MostrarMensaje("error",l),this.isEjecutandoAccionGrupal=!1}})}rollbackAccionGrupal(){this.isEjecutandoAccionGrupal||(this.isEjecutandoAccionGrupal=!0,this._infoest.AccionesGrupalesRollbackAsignacion({uuid:this.ultimoLoteAccionGrupalUuid}).subscribe({next:t=>{let e=Number(t?.deleted_calificaciones??0)||0;this._tools.MostrarMensaje("success",`Rollback completado. Asignaciones eliminadas: ${e}.`),this.ultimoLoteAccionGrupalUuid=null,this.Cargarinfoestudiantesifas(),this.isEjecutandoAccionGrupal=!1},error:t=>{console.error(t);let e=t?.error?.message??"No se pudo revertir la acci\xF3n";this._tools.MostrarMensaje("error",e),this.isEjecutandoAccionGrupal=!1}}))}seleccionarTodosCursosListas(t){(this.cursosParaListas||[]).forEach(e=>e.selected=t)}cursosSeleccionadosCount(){return(this.cursosParaListas||[]).filter(t=>!!t.selected).length}generarListasPreliminaresSeleccionadas(t){return $(this,null,function*(){if(this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){this._tools.MostrarMensaje("warning","Seleccione un a\xF1o");return}let e=(this.cursosParaListas||[]).filter(n=>!!n.selected).map(n=>({curso:n.curso,paralelo:n.paralelo}));if(e.length===0){this._tools.MostrarMensaje("warning","Seleccione al menos un curso");return}if(!this.isGenerandoListasPreliminares){this.isGenerandoListasPreliminares=!0;try{let n=this.getInstitucionIdParaReportes();yield this._reportes.GenerarListaPreliminarAlumnos2026(Number(this.selectedAnioId),e,n,this.incluirSinAsignar,this.incluirEspecialidadListas);try{t?.close?.("ok")}catch{}}catch(n){console.error(n),this._tools.MostrarMensaje("error","No se pudo generar las listas")}finally{this.isGenerandoListasPreliminares=!1}}})}abrirModalEstadisticas(){this.modalEstadisticasRef=this._tools.openModal(this.modalOtroComponenteEstadisticas,"xl"),this.cargarEstadisticasInscripciones(),this.modalEstadisticasRef.result.finally(()=>{this.isLoadingEstadisticas=!1})}cargarEstadisticasInscripciones(){if(this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){this.estadisticasInscripciones=null;return}this.isLoadingEstadisticas=!0;let t=this.getInstitucionIdParaReportes(),e=this.estadisticasModo==="both"||this.estadisticasModo==="unassigned"?1:0;this._infoest.ObtenerEstadisticasInscripciones({anio_id:Number(this.selectedAnioId),include_sin_asignar:e,anio_scope:this.estadisticasModo,instituciones_id:t??void 0}).subscribe({next:n=>{this.estadisticasInscripciones=n??null,this.isLoadingEstadisticas=!1},error:n=>{console.error("Error al cargar estad\xEDsticas",n),this.estadisticasInscripciones=null,this.isLoadingEstadisticas=!1}})}getOtrosCount(t,e){let n=Number(t??0),i=this.getSexoCount(e,"MASCULINO"),l=this.getSexoCount(e,"FEMENINO"),m=n-i-l;return Number.isFinite(m)&&m>0?m:0}abrirDetalleEstadisticasCurso(t,e){this.abrirDetalleEstadisticas({curso:(t?.curso??"").toString().trim(),usarParalelo:!1,paralelo:"",sexo:e??"",edad:null})}abrirDetalleEstadisticasCursoParalelo(t,e){this.abrirDetalleEstadisticas({curso:(t?.curso??"").toString().trim(),usarParalelo:!0,paralelo:(t?.paralelo??"").toString().trim(),sexo:e??"",edad:null})}abrirDetalleEstadisticasCursoEdad(t,e){let n=Number(e??0);this.abrirDetalleEstadisticas({curso:(t?.curso??"").toString().trim(),usarParalelo:!1,paralelo:"",sexo:"",edad:Number.isFinite(n)&&n>0?n:null})}abrirDetalleEstadisticasCursoParaleloEdad(t,e){let n=Number(e??0);this.abrirDetalleEstadisticas({curso:(t?.curso??"").toString().trim(),usarParalelo:!0,paralelo:(t?.paralelo??"").toString().trim(),sexo:"",edad:Number.isFinite(n)&&n>0?n:null})}abrirDetalleEstadisticasCursoInstrumento(t,e){let n=(e??"").toString().trim();if(!n){this._tools.MostrarMensaje("warning","No se pudo identificar el instrumento");return}this.abrirDetalleEstadisticas({curso:(t?.curso??"").toString().trim(),usarParalelo:!1,paralelo:"",sexo:"",edad:null,instrumento:n})}abrirDetalleEstadisticasCursoParaleloInstrumento(t,e){let n=(e??"").toString().trim();if(!n){this._tools.MostrarMensaje("warning","No se pudo identificar el instrumento");return}this.abrirDetalleEstadisticas({curso:(t?.curso??"").toString().trim(),usarParalelo:!0,paralelo:(t?.paralelo??"").toString().trim(),sexo:"",edad:null,instrumento:n})}abrirDetalleEstadisticas(t){if(this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){this._tools.MostrarMensaje("warning","Seleccione un a\xF1o");return}if(!t.curso){this._tools.MostrarMensaje("warning","No se pudo identificar el curso");return}this.detalleEstadisticasRows=[],this.detalleEstadisticasMeta={curso:t.curso,paralelo:t.usarParalelo?t.paralelo||"SIN DETERMINAR":null,sexo:t.sexo||"TODOS",edad:t.edad||null,instrumento:t.instrumento??null?String(t.instrumento).trim():null},this.modalDetalleEstadisticasRef=this._tools.openModal(this.modalDetalleEstadisticas,"lg"),this.isLoadingDetalleEstadisticas=!0;let e=this.getInstitucionIdParaReportes(),n=this.estadisticasModo==="both"||this.estadisticasModo==="unassigned"?1:0;this._infoest.ObtenerEstadisticasInscripcionesDetalle({anio_id:Number(this.selectedAnioId),curso:t.curso,usar_paralelo:t.usarParalelo?1:0,paralelo:t.usarParalelo?t.paralelo:void 0,sexo:t.sexo,edad:t.edad??void 0,instrumento:t.instrumento??void 0?String(t.instrumento).trim():void 0,include_sin_asignar:n,anio_scope:this.estadisticasModo,instituciones_id:e??void 0}).subscribe({next:i=>{this.detalleEstadisticasRows=Array.isArray(i?.data)?i.data:[],this.detalleEstadisticasMeta=i?.meta??this.detalleEstadisticasMeta,this.isLoadingDetalleEstadisticas=!1},error:i=>{console.error("Error al cargar detalle de estad\xEDsticas",i),this.detalleEstadisticasRows=[],this.isLoadingDetalleEstadisticas=!1,this._tools.MostrarMensaje("error","No se pudo cargar el detalle de estudiantes")}})}formatearMapaConteo(t,e,n){return!Array.isArray(t)||t.length===0?"":t.map(i=>{let l=(i?.[e]??"").toString().trim(),m=Number(i?.total??0);if(!l||!Number.isFinite(m)||m<=0)return"";let v=n?.suffix??"";return`${l}${v} (${m})`}).filter(i=>i!=="").join(", ")}resumenEdades(t){return this.formatearMapaConteo(t,"edad",{suffix:" a\xF1os"})}resumenInstrumentos(t){return this.formatearMapaConteo(t,"instrumento")}hayInstrumentos(t){return Array.isArray(t)&&t.some(e=>Array.isArray(e?.instrumentos)&&e.instrumentos.length>0)}hayEdades(t){return Array.isArray(t)&&t.some(e=>Array.isArray(e?.edades)&&e.edades.length>0)}getSexoCount(t,e){return t?Number(t?.[e]??0):0}onSearchEnter(){this.searchAplicado=(this.filtertxtinfoestudiantesifas??"").toString(),this.paginainfoestudiantesifas=1,this.sortColumnsinfoestudiantesifas=[],this.sortByColumn="FechInsc",this.sortDir="desc",this.Cargarinfoestudiantesifas()}onPageChange(t){this.paginainfoestudiantesifas=t,this.Cargarinfoestudiantesifas()}CargarSegunModo(){this.estudianteId&&(this.newinfoestudiantesifas.patchValue({estudiantesifas_id:this.estudianteId}),this.cargarEstudianteSeleccionadoPorId(this.estudianteId)),this.Cargarinfoestudiantesifas()}setupBuscadorEstudiantes(){this.estudianteInput.valueChanges.subscribe(t=>{(t??"").toString()===""&&(this.estudiantesFiltrados=[],this.mostrarListaEstudiantes=!1,this.busquedaEstudiantesEjecutada=!1,this.estudiantesPage=1,this.estudianteId||(this.estudianteSeleccionado=null,this.newinfoestudiantesifas.patchValue({estudiantesifas_id:""})))})}get estudiantesTotalPages(){let t=this.estudiantesFiltrados?.length??0,e=Math.ceil(t/this.estudiantesPageSize);return Math.max(1,e||1)}get estudiantesPaginados(){let t=this.estudiantesFiltrados||[],n=(Math.min(Math.max(1,this.estudiantesPage),this.estudiantesTotalPages)-1)*this.estudiantesPageSize;return t.slice(n,n+this.estudiantesPageSize)}estudiantesPrevPage(){this.estudiantesPage=Math.max(1,this.estudiantesPage-1)}estudiantesNextPage(){this.estudiantesPage=Math.min(this.estudiantesTotalPages,this.estudiantesPage+1)}abrirRegistroEstudianteDesdeBuscador(){let t=(this.estudianteInput?.value??"").toString().trim();this.mostrarListaEstudiantes=!1,this.estudiantesFiltrados=[],this.busquedaEstudiantesEjecutada=!1,this.estudiantesPage=1,this.abrirModalRegistroEstudianteCompleto(t)}getNombreCompletoEstudiante(t){let e=(t?.Ap_Paterno??"").toString().trim(),n=(t?.Ap_Materno??"").toString().trim(),i=(t?.Nombre??"").toString().trim();return`${e} ${n} ${i}`.replace(/\s+/g," ").trim()}normalizarParaBusqueda(t){return(t??"").toString().toLowerCase().trim()}tokenizarPreservandoDuplicados(t){return t.split(/\s+/g).map(e=>e.trim()).filter(e=>e.length>0)}esTokenNumerico(t){return/^\d+$/.test(t)}contarOcurrencias(t,e){if(!e)return 0;let n=0,i=0;for(;;){let l=t.indexOf(e,i);if(l===-1)break;n+=1,i=l+e.length}return n}scoreEstudianteBusqueda(t,e){let n=(e??"").toString().trim().toLowerCase();if(!n)return 0;let i=this.normalizarParaBusqueda(this.getNombreCompletoEstudiante(t)),l=this.normalizarParaBusqueda(t?.CI),m=0;l&&n===l&&(m+=2e4),l&&n.length>=3&&l.startsWith(n)&&(m+=12e3),i&&n===i&&(m+=15e3),i&&i.startsWith(n)&&(m+=9e3);let v=this.tokenizarPreservandoDuplicados(n).map(S=>this.normalizarParaBusqueda(S));if(v.length===0)return m;for(let S of v)if(S)if(this.esTokenNumerico(S)){let y=this.contarOcurrencias(l,S);m+=y*1200}else{let y=this.contarOcurrencias(i,S);m+=y*700}let f=new Map;for(let S of v)f.set(S,(f.get(S)??0)+1);let C=!0;for(let[S,y]of f.entries())if(S){if(this.esTokenNumerico(S)){if(this.contarOcurrencias(l,S)<y){C=!1;break}}else if(this.contarOcurrencias(i,S)<y){C=!1;break}}return C&&(m+=5e3),m}filtrarEstudiantesPreciso(t,e){let n=(e??"").toString().trim();if(!n)return[];let i=this.tokenizarPreservandoDuplicados(n).map(m=>this.normalizarParaBusqueda(m));if(i.length===0)return[];let l=new Map;for(let m of i)l.set(m,(l.get(m)??0)+1);return(t||[]).filter(m=>{let v=this.normalizarParaBusqueda(this.getNombreCompletoEstudiante(m)),f=this.normalizarParaBusqueda(m?.CI);for(let[C,S]of l.entries())if(C){if(this.esTokenNumerico(C)){if(this.contarOcurrencias(f,C)<S)return!1}else if(this.contarOcurrencias(v,C)<S)return!1}return!0})}getTokensResaltadoEstudiante(t,e){let n=(t??"").toString().trim();if(!n)return[];let i=this.tokenizarPreservandoDuplicados(n).map(m=>this.normalizarParaBusqueda(m)).filter(m=>m.length>0),l=e==="ci"?i.filter(m=>this.esTokenNumerico(m)):i.filter(m=>!this.esTokenNumerico(m));return Array.from(new Set(l))}resaltarTextoConTokens(t,e){let n=(t??"").toString();if(!n)return this.sanitizer.bypassSecurityTrustHtml("");let i=this.escapeHtml(n);if(e.length>0){let l=e.map(v=>this.escapeRegExp(v)).sort((v,f)=>f.length-v.length),m=new RegExp(`(${l.join("|")})`,"gi");i=i.replace(m,v=>`<mark class="match-strong">${v}</mark>`)}return this.sanitizer.bypassSecurityTrustHtml(i)}resaltarNombreEnBuscadorEstudiante(t){let e=(this.estudianteInput?.value??"").toString(),n=this.getTokensResaltadoEstudiante(e,"nombre");return this.resaltarTextoConTokens(this.getNombreCompletoEstudiante(t),n)}resaltarCIEnBuscadorEstudiante(t){let e=(this.estudianteInput?.value??"").toString(),n=this.getTokensResaltadoEstudiante(e,"ci");return this.resaltarTextoConTokens((t??"").toString(),n)}getBackendSearchTermEstudiantes(t){let e=(t??"").toString().trim();if(!e)return"";let n=this.tokenizarPreservandoDuplicados(e).map(m=>(m??"").toString().trim()).filter(Boolean),i=n.filter(m=>this.esTokenNumerico(m)).sort((m,v)=>v.length-m.length);if(i.length>0)return i[0];let l=n.filter(m=>!this.esTokenNumerico(m)).sort((m,v)=>v.length-m.length);return l.length>0?l[0]:e}buscarEstudiantes(){if(this.estudianteId)return;let t=(this.estudianteInput.value??"").toString().trim();if(!t){this.estudiantesFiltrados=[];return}this.busquedaEstudiantesEjecutada=!0,this.estudiantesPage=1,this.mostrarListaEstudiantes=!0,this.isBuscandoEstudiante=!0;let n={page:1,per_page:200,search:this.getBackendSearchTermEstudiantes(t)||t,search_mode:"any",relevance:1,sort_by:"id",sort_dir:"desc"};this._est.Obtenerestudiantesifas(n).subscribe({next:i=>{let l=i?.data||[],v=(this.filtrarEstudiantesPreciso(l,t)||[]).slice().sort((f,C)=>{let S=this.scoreEstudianteBusqueda(C,t),y=this.scoreEstudianteBusqueda(f,t);if(S!==y)return S-y;let A=this.getNombreCompletoEstudiante(C).toLowerCase(),R=this.getNombreCompletoEstudiante(f).toLowerCase();return A!==R?A.localeCompare(R):Number(C?.id??0)-Number(f?.id??0)});this.estudiantesFiltrados=v,this.mostrarListaEstudiantes=!0,this.isBuscandoEstudiante=!1},error:i=>{console.error("Error al buscar estudiantes",i),this.estudiantesFiltrados=[],this.mostrarListaEstudiantes=!0,this.isBuscandoEstudiante=!1}})}seleccionarEstudiante(t){t&&(this.estudianteSeleccionado=t,this.newinfoestudiantesifas.patchValue({estudiantesifas_id:t?.id??""}),this.estudianteInput.setValue(this.getNombreCompletoEstudiante(t),{emitEvent:!1}),this.mostrarListaEstudiantes=!1,this.estudiantesFiltrados=[],this.busquedaEstudiantesEjecutada=!1,this.estudiantesPage=1)}cargarEstudianteSeleccionadoPorId(t){t&&this._est.Seleccionarestudiantesifas(Number(t)).subscribe({next:e=>{this.estudianteSeleccionado=e?.data??null,!this.estudianteId&&this.estudianteSeleccionado&&this.estudianteInput.setValue(this.getNombreCompletoEstudiante(this.estudianteSeleccionado),{emitEvent:!1})},error:e=>{console.error("Error al cargar estudiante",e),this.estudianteId||(this.estudianteSeleccionado=null)}})}generarMatricula(){let t=this.estudianteSeleccionado,e=(t?.Ap_Paterno??"").toString().trim(),n=(t?.Ap_Materno??"").toString().trim(),i=(t?.Nombre??"").toString().trim(),l=(t?.CI??"").toString().trim(),m=e?e.charAt(0):"",v=n?n.charAt(0):"",f=i?i.charAt(0):"";return`${m}${v}${f}${l}`.toUpperCase()}Cargarinfoestudiantesifas(){console.log("ANIOS SELECCIONADO",this.selectedAnioId),this.isLoadinginfoestudiantesifas=!0;let t=(this.searchAplicado??"").toString().trim()!=="",e=Array.isArray(this.sortColumnsinfoestudiantesifas)&&this.sortColumnsinfoestudiantesifas.length>0,n=t&&!e,i=(m,v)=>{this.infoestudiantesifas=m||[],this.collectionSizeinfoestudiantesifas=Number.isFinite(Number(v))?Number(v):this.infoestudiantesifas.length,this.isLoadinginfoestudiantesifas=!1,this.habilitarSistemaPagosCarreras&&!this.soloDeudores&&this.marcarDeudaEnFilasActuales(),!this.autoAbrioNuevoPorVacio&&this.modo==="estudiante"&&this.estudianteId&&(this.infoestudiantesifas?.length||0)===0&&(this.autoAbrioNuevoPorVacio=!0,this.abrirModalNuevoInfoestudiantesifas())},l=m=>{console.error("Error al cargar infoestudiantesifas",m),this.infoestudiantesifas=[],this.collectionSizeinfoestudiantesifas=0,this.isLoadinginfoestudiantesifas=!1};if(this.soloDeudores){let m=this.soloSinAsignaciones?"SIN ASIGNAR":this.getGestionPagoActual(),v=this.getGestionPagoActual();this._pagos.ObtenerDeudores({gestion:m,gestion_pago:v,page:this.paginainfoestudiantesifas,per_page:this.pageSizeinfoestudiantesifas,search:(this.searchAplicado??"").toString().trim()||void 0}).subscribe({next:f=>{let C=Array.isArray(f?.data)?f.data:[];C.forEach(S=>{S._deudaMeses=Array.isArray(S?.meses_deuda)?S.meses_deuda:[],S._tieneDeuda=(S._deudaMeses?.length??0)>0}),i(C,f?.meta?.total??C.length)},error:l});return}this._infoest.Obtenerinfoestudiantesifas({page:this.paginainfoestudiantesifas,per_page:this.pageSizeinfoestudiantesifas,anio_id:this.selectedAnioId===""?void 0:Number(this.selectedAnioId),include_sin_asignar:this.incluirSinAsignar||this.soloSinAsignaciones?1:0,anio_scope:this.soloSinAsignaciones?"unassigned":"default",estudiante_id:this.estudianteId?Number(this.estudianteId):void 0,search:(this.searchAplicado??"").toString().trim(),search_mode:"any",relevance:n?1:0,sort_by:this.sortByColumn,sort_dir:this.sortDir}).subscribe({next:m=>{console.log("cargar estudiantes inscritos",m.data),i(m.data||[],m.meta?.total??(m.data||[]).length)},error:l})}marcarDeudaEnFilasActuales(){let t=Array.isArray(this.infoestudiantesifas)?this.infoestudiantesifas:[];if(t.length===0)return;let e=this.getGestionPagoActual(),n=t.map(i=>{let l=Number(i?.id??0);if(!Number.isFinite(l)||l<=0)return le({infoId:0,tieneDeuda:!1,meses:[]});let m=`${l}|${e}`,v=this.deudaCache.get(m);return v?le({infoId:l,tieneDeuda:v.tieneDeuda,meses:v.meses}):this._pagos.ObtenerDeudaPorInfo(l,e).pipe(Be(f=>{let C=Array.isArray(f?.data?.meses_deuda)?f.data.meses_deuda:[],S=(C?.length??0)>0;return this.deudaCache.set(m,{tieneDeuda:S,meses:C}),{infoId:l,tieneDeuda:S,meses:C}}),$e(()=>le({infoId:l,tieneDeuda:!1,meses:[]})))});gt(n).subscribe(i=>{for(let l of i){let m=Number(l?.infoId??0),v=t.find(f=>Number(f?.id??0)===m);v&&(v._tieneDeuda=!!l?.tieneDeuda,v._deudaMeses=Array.isArray(l?.meses)?l.meses:[])}})}getTokensBusqueda(t){let e=(t??this.filtertxtinfoestudiantesifas??"").toString().trim();if(!e)return[];let n=[],i=/"([^"]+)"/g,l;for(;(l=i.exec(e))!==null;){let f=(l[1]??"").toString().trim();f&&n.push(f)}let m=e.replace(/"[^"]+"/g," ").trim(),v=m?m.split(/\s+/g).map(f=>f.trim()).filter(f=>f.length>0):[];return Array.from(new Set([...n,...v]))}escapeHtml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}resaltarTexto(t,e){let n=this.getTokensBusqueda(e),i=(t??"").toString();if(!i)return this.sanitizer.bypassSecurityTrustHtml("");let l=this.escapeHtml(i);if(n.length>0){let m=n.map(f=>this.escapeRegExp(f)).sort((f,C)=>C.length-f.length),v=new RegExp(`(${m.join("|")})`,"gi");l=l.replace(v,f=>`<mark class="match-strong">${f}</mark>`)}return this.sanitizer.bypassSecurityTrustHtml(l)}AgregarModificarinfoestudiantesifas(){if(this.newinfoestudiantesifas.invalid){this.ValidacionTodoElementoinfoestudiantesifas(),this._tools.MostrarMensajeFrmIncompleto(),this.AnimacionCargabtnModalinfoestudiantesifas=!1;return}else{this.AnimarCargaTablainfoestudiantesifas(),this.AnimacionCargabtnModalinfoestudiantesifas=!0,this._tools.MostrarMensajeLoading(),this.newinfoestudiantesifasAnteriorAccion.patchValue(this.snapshotFormValue(this.newinfoestudiantesifas));let t=this.newinfoestudiantesifas.controls.id.value;console.log("INFO A PROCESAR",this.newinfoestudiantesifas.value);let e=this.newinfoestudiantesifas.get("FotoPago")?.value??null,n=this.fotoPagoAnteriorPath,i=m=>{this._infoest.Agregarinfoestudiantesifas(this.newinfoestudiantesifas.value,{force:m}).subscribe(v=>{console.log("SE A\xD1ADIO CORRECTAMENTE infoestudiantesifas",v.data),this.Cargarinfoestudiantesifas(),this.fotoPagoTempPath=null,this.fotoPagoAnteriorPath=null,this.resetinfoestudiantesifas(),this.AnimacionCargabtnModalinfoestudiantesifas=!1,this._tools.MostrarMensajeSuccess()},v=>{let f=v?.status,C=!!v?.error?.requires_confirmation,S=v?.error?.anio;if(f===409&&C){this._tools.mostrarMensajeConfirm("Inscripci\xF3n duplicada",`Ya existe una inscripci\xF3n del estudiante en esta instituci\xF3n para la gesti\xF3n ${S??"actual"}. \xBFDesea continuar igualmente?`,"warning","S\xED, continuar","No, cancelar").then(y=>{y?i(!0):this.AnimacionCargabtnModalinfoestudiantesifas=!1});return}console.log("ERROR AL A\xD1ADIR infoestudiantesifas",v),this.AnimacionCargabtnModalinfoestudiantesifas=!1,this._tools.MostrarMensajeError()})},l=m=>{this._infoest.Modificarinfoestudiantesifas(this.newinfoestudiantesifas.value,this.newinfoestudiantesifas.value.id,{force:m}).subscribe(v=>{console.log("SE MODIFICO CORRECTAMENTE infoestudiantesifas",v.data),n&&e&&n!==e&&this._tools.EliminarArchivo(n),this.Cargarinfoestudiantesifas(),this.fotoPagoTempPath=null,this.fotoPagoAnteriorPath=null,this.resetinfoestudiantesifas(),this.AnimacionCargabtnModalinfoestudiantesifas=!1,this._tools.MostrarMensajeSuccess()},v=>{let f=v?.status,C=!!v?.error?.requires_confirmation,S=v?.error?.anio;if(f===409&&C){this._tools.mostrarMensajeConfirm("Inscripci\xF3n duplicada",`Ya existe una inscripci\xF3n del estudiante en esta instituci\xF3n para la gesti\xF3n ${S??"actual"}. \xBFDesea guardar igualmente?`,"warning","S\xED, guardar","No, cancelar").then(y=>{y?l(!0):this.AnimacionCargabtnModalinfoestudiantesifas=!1});return}console.log("ERROR AL MODIFICAR infoestudiantesifas",v),this.AnimacionCargabtnModalinfoestudiantesifas=!1,this._tools.MostrarMensajeError()})};t?l(!1):i(!1)}}Seleccionarinfoestudiantesifas(t,e){this._tools.MostrarMensajeLoading();let n=Number(t??0);Number.isFinite(n)&&n>0&&this._infoest.Seleccionarinfoestudiantesifas(n).subscribe(i=>{Object.keys(this.newinfoestudiantesifas.controls).forEach(m=>{this.newinfoestudiantesifas.controls[m].setValue(i.data[m])}),console.log("SELECCION DE infoestudiantesifas EXITOSA",this.newinfoestudiantesifas.value),this.newinfoestudiantesifasAnteriorAccion.patchValue(this.snapshotFormValue(this.newinfoestudiantesifas)),this.fotoPagoAnteriorPath=this.newinfoestudiantesifas.get("FotoPago")?.value??null,this.fotoPagoTempPath=null;let l=this.newinfoestudiantesifas.get("estudiantesifas_id")?.value;!this.estudianteId&&l&&this.cargarEstudianteSeleccionadoPorId(Number(l)),this.syncBuscadoresPlantelConForm(),this.modalGestioninfoestudiantesifasRef=this._tools.openModal(this.modalgestioninfoestudiantesifas,"xl"),this.modalGestioninfoestudiantesifasRef?.result?.finally(()=>{try{e?.afterClose?.()}catch{}}),this._tools.MostrarMensajeSuccess()},i=>{console.log("ERROR AL SELECCIONAR infoestudiantesifas",i),this._tools.MostrarMensajeError()})}Eliminarinfoestudiantesifas(t){this._tools.mostrarMensajeConfirm("\xBFSEGURO QUE DESEA ELIMINAR?","SE ELIMINARA EL DATO Y NO SE PODR\xC1 RECUPERAR EL DATO","warning","SI, ESTOY SEGURO","NO").then(e=>{e&&(this._tools.MostrarMensajeLoading(),this._infoest.Eliminarinfoestudiantesifas(t).subscribe(n=>{console.log(n.data),this.Cargarinfoestudiantesifas(),this._tools.MostrarMensajeSuccess()},n=>{console.log("ERROR AL ELIMINAR infoestudiantesifas",n),this._tools.MostrarMensajeError()}))})}resetinfoestudiantesifas(){this.isCapturandoFotoPago&&this.cancelarEsperaCaptura(!0),this.fotoPagoTempPath&&this.fotoPagoTempPath!==this.fotoPagoAnteriorPath&&this._tools.EliminarArchivo(this.fotoPagoTempPath),this.fotoPagoTempPath=null,this.fotoPagoAnteriorPath=null,this.newinfoestudiantesifas=this._infoest.createFormGroupinfoestudiantesifas(),this.estudianteId?(this.newinfoestudiantesifas.patchValue({estudiantesifas_id:this.estudianteId}),this.cargarEstudianteSeleccionadoPorId(this.estudianteId)):(this.estudianteSeleccionado=null,this.estudianteInput.setValue("",{emitEvent:!1}),this.estudiantesFiltrados=[],this.mostrarListaEstudiantes=!1),this.docAdminInput.setValue("",{emitEvent:!1}),this.docPCInput.setValue("",{emitEvent:!1}),this.docOtrosInput.setValue("",{emitEvent:!1}),this.docentesFiltradosAdmin=[],this.docentesFiltradosPC=[],this.docentesFiltradosOtros=[],this.mostrarListaDocAdmin=!1,this.mostrarListaDocPC=!1,this.mostrarListaDocOtros=!1,this._tools.closeModal(this.modalGestioninfoestudiantesifasRef)}AutoCompletarLastinfoestudiantesifas(){this.newinfoestudiantesifasAnteriorAccion.patchValue({CantidadMateriasAsignadas:0}),this.newinfoestudiantesifas.patchValue(this.snapshotFormValue(this.newinfoestudiantesifasAnteriorAccion)),this.syncBuscadoresPlantelConForm(),this.newinfoestudiantesifas.patchValue({id:0}),console.log("listo",this.newinfoestudiantesifas.value)}AnimarCargaTablainfoestudiantesifas(){this.infoestudiantesifas=[],this.isLoadinginfoestudiantesifas=!0}ValidacioninfoestudiantesifasxElemento(t){return this._tools.obtenerValidationClass(this.newinfoestudiantesifas,t)}ValidacionTodoElementoinfoestudiantesifas(){Object.values(this.newinfoestudiantesifas.controls).forEach(t=>{t.markAsTouched(),t.markAsDirty()})}onPageSizeChangeinfoestudiantesifas(){this.paginainfoestudiantesifas=1,this.Cargarinfoestudiantesifas()}sortByinfoestudiantesifas(t,e){this.sortColumnsinfoestudiantesifas=this._tools.handleSort(t,e,this.sortColumnsinfoestudiantesifas);let n=this.sortColumnsinfoestudiantesifas?.[0];n?.column&&(this.sortByColumn=n.column,this.sortDir=n.direction,this.paginainfoestudiantesifas=1,this.Cargarinfoestudiantesifas())}isSortedinfoestudiantesifas(t){return this._tools.isSorted(this.sortColumnsinfoestudiantesifas,t)}getSortDirinfoestudiantesifas(t){return this._tools.getSortDirection(this.sortColumnsinfoestudiantesifas,t)}closeMenu(t){this._tools.close();let e=t?.target;e?.closest?.(".plantel-doc-buscador")||e?.closest?.(".estudiante-buscador")||(this.mostrarListaDocAdmin=!1,this.mostrarListaDocPC=!1,this.mostrarListaDocOtros=!1,this.mostrarListaEstudiantes=!1)}abrirMenuinfoestudiantesifas(t,e){t.preventDefault(),t.stopPropagation(),console.log("aS",e);let n=[{label:"\u{1F441} Ver Historial de Calificaciones",action:()=>this.abrirHistorialDesdeInscripcion(e,t)},{label:"+ Asignar Materias",action:()=>this.abrirAsignadorMateriasDesdeInscripcion(e)},{label:"\u270F Editar",action:()=>this.Seleccionarinfoestudiantesifas(e.id)},{label:"\u{1F5D1}\uFE0F Eliminar",action:()=>this.Eliminarinfoestudiantesifas(e.id)}];this._tools.open(t.clientX,t.clientY,n)}};ke.\u0275fac=function(e){return new(e||ke)(P(Te),P(Me),P(ot),P(we),P(Ae),P(Mt),P(Vt),P(ye),P(nt),P(Tt),P(dt),P(rt),P(lt),P(Ke),P(Ct))},ke.\u0275cmp=me({type:ke,selectors:[["app-estudiantesinscritos"]],viewQuery:function(e,n){if(e&1&&(D(ya,7),D(Ia,7),D(Aa,7),D(wa,7),D(Ma,7),D(Ta,7),D(Pa,7),D(Va,7),D(Na,7),D(ka,7),D(Fa,7),D(Ra,7),D(Oa,7),D(Da,7),D(La,5)),e&2){let i;L(i=j())&&(n.modalOtroComponentecalifhistorias=i.first),L(i=j())&&(n.modalRegistroEstudianteCompleto=i.first),L(i=j())&&(n.modalEsperaFotoCelular=i.first),L(i=j())&&(n.modalVincularCelular=i.first),L(i=j())&&(n.modalEsperaFotoPagoCelular=i.first),L(i=j())&&(n.modalgestioninfoestudiantesifas=i.first),L(i=j())&&(n.modalOtroComponenteEstadisticas=i.first),L(i=j())&&(n.modalDetalleEstadisticas=i.first),L(i=j())&&(n.modalOtroComponenteAsignacionesEstudiantes=i.first),L(i=j())&&(n.modalListasPreliminaresCursos=i.first),L(i=j())&&(n.modalVerificacionAsignacion=i.first),L(i=j())&&(n.modalAccionesGrupalesCursos=i.first),L(i=j())&&(n.modalAccionesGrupalesModificacion=i.first),L(i=j())&&(n.modalOtroComponenteRegistrarpagos=i.first),L(i=j())&&(n.verifTableScroll=i.first)}},hostBindings:function(e,n){e&1&&g("click",function(l){return n.closeMenu(l)},ze)},inputs:{estudianteId:"estudianteId",nombreEstudiante:"nombreEstudiante",fotoEstudiante:"fotoEstudiante",sexoEstudiante:"sexoEstudiante",modo:"modo"},standalone:!1,features:[Ue],decls:132,vars:46,consts:[["modalVerificacionAsignacion",""],["modalListasPreliminaresCursos",""],["modalAccionesGrupalesCursos",""],["modalAccionesGrupalesModificacion",""],["modalgestioninfoestudiantesifas",""],["modalRegistroEstudianteCompleto",""],["modalVincularCelular",""],["modalEsperaFotoCelular",""],["modalEsperaFotoPagoCelular",""],["modalOtroComponenteEstadisticas",""],["modalDetalleEstadisticas",""],["modalOtroComponenteAsignacionesEstudiantes",""],["modalOtroComponenteRegistrarpagos",""],["modalOtroComponentecalifhistorias",""],["verifTableScroll",""],["sinFotoPago",""],["sinFotoEstudiante",""],["sinFotoEst",""],["fotoInputEst",""],[1,"container","mt-4"],[1,"row","align-items-center"],[1,"col-12",3,"ngClass"],[1,"display-4","fw-bold","titulosGlobales","text-center"],[1,"d-flex","align-items-center","justify-content-center","flex-wrap"],[1,"ms-md-4","mt-2","mt-md-0",2,"min-width","160px"],[1,"form-floating"],[1,"form-select","fs-5",2,"font-weight","normal","font-size","1.25rem",3,"ngModelChange","change","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[2,"font-weight","normal","font-size","1.25rem"],[1,"lead","text-secondary","subtitulosGlobales","text-center"],[1,"lead","text-primary","subtitulosGlobales","text-center"],["class","col-12 col-md-4 d-flex justify-content-center justify-content-md-end mt-3 mt-md-0",4,"ngIf"],[1,"row"],[1,"col-sm-9","d-flex","justify-content-start","button",2,"gap","10px"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","width","30px","height","30px"],["width","50px","height","50px",3,"options"],[1,"dir-part"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],[1,"col-sm-3","ms-auto","d-flex","justify-content-end"],["title","PRESIONAR TECLA ENTER PARA REALIZAR BUSQUEDA",1,"input-group"],[1,"input-group-text"],["width","30px","height","30px",3,"options"],["type","text","placeholder","Buscar","title","PRESIONAR TECLA ENTER PARA REALIZAR BUSQUEDA",1,"form-control",3,"keyup.enter","ngModelChange","ngModel"],[1,"d-flex","align-items-center",2,"gap","12px","white-space","nowrap"],[1,"form-check","m-0"],["type","checkbox","id","chkSinAsignar",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","chkSinAsignar",1,"form-check-label","text-danger","fw-bold"],[1,"form-check","m-0","ms-3"],["type","checkbox","id","chkSoloSinAsignar",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","chkSoloSinAsignar",1,"form-check-label","text-danger","fw-bold"],["class","form-check m-0 ms-3",4,"ngIf"],["type","button","title","USADO PARA SABER SI LA ASIGNACION DE MATERIAS COINCIDEN CON EL CURSO SOLICITADO",1,"btn","btn-primary","btn-sm",3,"click","disabled"],["type","button",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-sm","align-middle"],[1,"text-center"],["style","user-select: none; -webkit-user-select: none; -moz-user-select: none;",3,"click",4,"ngIf"],[2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["class","bi",3,"ngClass",4,"ngIf"],[4,"ngIf"],["style","cursor: pointer;",3,"contextmenu",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["previousLabel","Anterior","nextLabel","Siguiente",3,"pageChange","page","collectionSize","pageSize","maxSize","rotate","ellipses","boundaryLinks"],[1,"form-select",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","context-menu",3,"ngStyle",4,"ngIf"],[3,"ngValue"],[1,"col-12","col-md-4","d-flex","justify-content-center","justify-content-md-end","mt-3","mt-md-0"],[2,"width","160px","height","160px","object-fit","cover",3,"options"],["alt","Foto del estudiante",1,"border","rounded",2,"width","160px","height","160px","object-fit","cover",3,"src"],["type","checkbox","id","chkSoloDeudores",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","chkSoloDeudores",1,"form-check-label","text-danger","fw-bold"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row","g-2","align-items-end"],[1,"col-12","col-md-3"],[1,"form-label"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value",""],[1,"col-12","col-md-3","d-grid","ms-auto"],[1,"d-flex","align-items-center","justify-content-between","mt-3",2,"gap","12px","flex-wrap","wrap"],[1,"small","text-muted"],[1,"d-flex","align-items-center",2,"gap","8px","flex-wrap","wrap"],[1,"form-label","m-0"],["role","group","aria-label","Filtro coincidencia",1,"btn-group","btn-group-sm"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-outline-success",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","button","title","Quitar filtros por curso/paralelo/turno",1,"btn","btn-outline-secondary","btn-sm",3,"click"],["class","mt-2",4,"ngIf"],["class","mt-3",4,"ngIf"],["class","alert alert-warning mt-3",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],["class","table-responsive mt-3","style","max-height: 60vh; overflow-y: auto;",4,"ngIf"],[1,"modal-footer"],[1,"d-flex","align-items-center","justify-content-between","w-100",2,"gap","12px","flex-wrap","wrap"],[1,"d-flex","align-items-center",2,"gap","10px"],[1,"form-select","form-select-sm",2,"width","auto",3,"ngModelChange","change","ngModel"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"mt-2"],[1,"row","g-2"],[1,"col-12","col-lg-4"],[1,"small","text-muted","mb-1"],[1,"d-flex","flex-wrap",2,"gap","6px"],["type","button","class","btn btn-outline-secondary btn-sm",3,"active","click",4,"ngFor","ngForOf"],[1,"col-12","col-lg-12"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"mt-3"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"ms-2"],[1,"alert","alert-warning","mt-3"],[1,"alert","alert-info","mt-3"],[1,"table-responsive","mt-3",2,"max-height","60vh","overflow-y","auto"],[1,"table","table-sm","align-middle"],[1,"table-light",2,"position","sticky","top","0","z-index","1"],[1,"text-center",2,"width","40px"],[2,"width","300px"],[1,"text-center",2,"width","160px"],["title","INFORMACI\xD3N SOLICITADA",1,"text-center",2,"width","160px"],["title","INFORMACI\xD3N ASIGNADA (OFICIAL)",1,"text-center",2,"width","160px"],[1,"text-end",2,"width","190px"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"text-end"],["title","Modificar informaci\xF3n",1,"btn","btn-outline-warning","btn-sm","d-inline-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src",4,"ngIf"],["width","30px","height","35px",3,"options",4,"ngIf"],["type","button",1,"btn","btn-outline-primary","btn-sm","ms-1",3,"click"],["width","20",3,"src"],["width","30px","height","35px",3,"options"],[1,"d-flex","align-items-center","justify-content-between",2,"gap","12px","flex-wrap","wrap"],["class","form-check m-0",4,"ngIf"],["class","table-responsive mt-3","style","max-height: 55vh;",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["type","checkbox","id","chkEspListas",1,"form-check-input",3,"ngModelChange","ngModel"],["for","chkEspListas",1,"form-check-label"],[1,"table-responsive","mt-3",2,"max-height","55vh"],[1,"table","table-sm","table-striped","align-middle"],[1,"text-center",2,"width","70px"],[1,"text-center",2,"width","110px"],[1,"text-center",2,"width","90px"],[4,"ngFor","ngForOf"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"col-12","col-md-4"],[1,"form-select",3,"ngModelChange","change","ngModel"],[1,"col-12","col-md-6"],[1,"d-flex","align-items-center","justify-content-between",2,"gap","10px","flex-wrap","wrap"],[1,"text-muted"],[1,"button","me-2"],["title","Cancelar y cerrar",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Retroceder acciones",1,"btn","mouse-dir","danger","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],[1,"button"],["class","btn mouse-dir success","title","Procesando informaci\xF3n",3,"disabled","click",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style","gap: 8px;","title","Ejecutar asignaci\xF3n",3,"disabled","click",4,"ngIf"],["title","Procesando informaci\xF3n",1,"btn","mouse-dir","success",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["title","Ejecutar asignaci\xF3n",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],[1,"alert","alert-info"],[1,"col-12","col-lg-6"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center",2,"gap","10px","flex-wrap","wrap"],[1,"form-floating","flex-grow-1",2,"min-width","220px"],["placeholder","Paralelo actual",1,"form-control",2,"text-transform","uppercase",3,"ngModelChange","change","ngModel","disabled"],["type","checkbox","id","chkParActualVacio",1,"form-check-input",3,"ngModelChange","ngModel"],["for","chkParActualVacio",1,"form-check-label"],[1,"small","text-muted","mt-1"],[1,"row","g-2","mt-2","align-items-end"],["type","number","placeholder","Edad m\xEDnima",1,"form-control",3,"ngModelChange","change","ngModel"],["type","number","placeholder","Edad m\xE1xima",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"col-12","col-md-6","d-flex","justify-content-end",2,"gap","10px","flex-wrap","wrap"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[3,"ngValue","disabled"],[1,"my-3"],[1,"col-12","col-md-6","d-flex","align-items-center",2,"gap","10px","flex-wrap","wrap"],[1,"col-12","col-md-6","text-md-end","text-muted"],[1,"row","g-2","align-items-end","mt-2"],[1,"form-check"],["type","checkbox","id","chkModCurso",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","chkModCurso",1,"form-check-label"],[1,"form-floating","mt-2"],[1,"form-select",3,"ngModelChange","change","ngModel","disabled"],["type","checkbox","id","chkModPar",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","chkModPar",1,"form-check-label"],["placeholder","Nuevo paralelo",1,"form-control",2,"text-transform","uppercase",3,"ngModelChange","ngModel","disabled"],["type","checkbox","id","chkModTurno",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","chkModTurno",1,"form-check-label"],["type","checkbox","id","chkQuitarAsig",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","chkQuitarAsig",1,"form-check-label","text-danger","fw-bold"],["class","row g-2 mt-2",4,"ngIf"],[1,"text-center",2,"width","60px"],[1,"text-center",2,"width","120px"],["style","cursor: pointer;",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"row","g-2","mt-2"],[1,"col-12","col-md-8"],[2,"cursor","pointer",3,"click","ngClass"],[1,"text-center",3,"ngClass"],["type","checkbox",3,"ngModelChange","click","ngModel","disabled"],[1,"fw-bold"],["class","text-muted",4,"ngIf"],["type","button","title","Ver materias asignadas",1,"btn","btn-link","btn-sm","p-0",3,"click","ngClass"],[1,"bi",3,"ngClass"],[1,"text-center","py-4"],[1,"d-flex","flex-column","align-items-center","justify-content-center","gap-2"],[2,"width","min(200px, 40vw)","height","min(200px, 40vw)",3,"options"],[2,"cursor","pointer",3,"contextmenu"],["title","Ver historial de inscripci\xF3n",1,"btn","btn-outline-primary","btn-sm","w-100",2,"cursor","pointer",3,"click","ngClass"],[3,"innerHTML"],[1,"text-center","d-flex","justify-content-center","align-items-center",2,"gap","5px"],["title","Asignar materias al estudiante",1,"btn","btn-outline-light","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["title","Generar Reporte de inscripcion",1,"btn","btn-outline-light","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["title","Ver historial (califhistorias)",1,"btn","btn-outline-light","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["title","Registrar pagos del estudiante","class","btn btn-outline-light btn-sm d-flex justify-content-center align-items-center p-0","style","width: 40px; height: 40px; overflow: hidden; position: relative;",3,"click","mouseenter","mouseleave",4,"ngIf"],["title","Modificar informaci\xF3n",1,"btn","btn-outline-warning","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["title","Eliminar informaci\xF3n",1,"btn","btn-outline-danger","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["title","Registrar pagos del estudiante",1,"btn","btn-outline-light","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden","position","relative",3,"click","mouseenter","mouseleave"],[1,"deuda-glow-wrap",3,"ngClass"],[3,"value"],["type","button","title","cerrar",1,"btn-close",3,"click"],["novalidate","",3,"formGroup"],["class","row",4,"ngIf"],[1,"mb-3","col-12","col-sm-6"],[1,"form-label","bold"],[4,"ngIf","ngIfElse"],[1,"mt-2","d-flex","justify-content-start"],["type","button",1,"btn","btn-outline-secondary","btn-sm","me-2",3,"click","disabled"],[1,"badge","align-self-center","me-2",3,"ngClass"],["class","alert alert-info py-2 mt-2 d-flex justify-content-between align-items-center",4,"ngIf"],["class","col-12 col-sm-6",4,"ngIf"],[1,"form-floating","mb-3","col-sm-4"],["formControlName","Categoria",1,"form-control",3,"ngClass"],["disabled","",3,"value"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"invalid-feedback"],["type","date","placeholder","","formControlName","FechInsc",1,"form-control",3,"ngClass"],["formControlName","Verificacion",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-2"],["formControlName","Turno",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-3"],["formControlName","Curso_Solicitado",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","Paralelo_Solicitado",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Matricula",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"button","col-sm-2","d-flex","align-items-start"],["type","button",1,"btn","mouse-dir","primary","d-flex","align-items-center","flex-shrink-0",2,"gap","8px","height","58px","white-space","nowrap",3,"click"],[1,"row",2,"z-index","1"],["class","form-floating mb-3 col-sm-4",4,"ngIf"],["type","button","title","Ver historial (califhistorias) por CI",1,"btn","btn-outline-primary","btn-sm","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],["width","26px","height","26px",3,"options"],["type","button","title","Ver/Editar informaci\xF3n personal",1,"btn","btn-outline-warning","btn-sm","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],[1,"col-12","mb-2"],["type","checkbox","id","chkMostrarObsAnoNotas",1,"form-check-input",3,"ngModelChange","ngModel","ngModelOptions"],["for","chkMostrarObsAnoNotas",1,"form-check-label","fw-semibold"],["class","button d-flex justify-content-start",4,"ngIf"],["title","Cancelar y cerrar","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;","title","Accionar",3,"click",4,"ngIf"],[1,"form-floating","mb-3","col-sm-12"],["type","number","placeholder","","formControlName","instituciones_id",1,"form-control",3,"ngClass"],["alt","FotoPago",1,"img-thumbnail",2,"width","180px","height","180px","object-fit","cover",3,"src"],[2,"width","180px","height","180px","object-fit","cover",3,"options"],[1,"alert","alert-info","py-2","mt-2","d-flex","justify-content-between","align-items-center"],[1,"fw-semibold"],[1,"small"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"col-12","col-sm-6"],[1,"form-floating","mb-3","col-12","position-relative","estudiante-buscador",2,"z-index","1052"],["type","text","placeholder"," ","autocomplete","off",1,"form-control",3,"focus","keyup.enter","formControl"],["class","list-group position-absolute w-100","style","z-index: 1000;",4,"ngIf"],[1,"mb-3","col-12"],[1,"list-group","position-absolute","w-100",2,"z-index","1000"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"d-flex","w-100","justify-content-between","align-items-center",2,"gap","10px"],[1,"badge","bg-primary"],["class","list-group-item",4,"ngIf"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"d-flex","w-100","justify-content-between"],[1,"d-flex","justify-content-between","align-items-center",2,"gap","8px"],["alt","Foto del estudiante",1,"img-thumbnail",2,"width","180px","height","180px","object-fit","cover",3,"src"],[3,"value","disabled"],[1,"form-floating","mb-3","col-sm-4","position-relative","plantel-doc-buscador",2,"z-index","1051"],["type","text","placeholder"," ","autocomplete","off",1,"form-control",3,"focus","formControl"],["class","list-group position-absolute w-100","style","z-index: 1060;",4,"ngIf"],["type","text","placeholder"," ","autocomplete","off","title","(agarra los docentes desde ac\xE1 cuando se usa Modo Pr\xE1ctica de Conjuntos)",1,"form-control",3,"focus","formControl"],["type","text","placeholder"," ","autocomplete","off","title","(agarra los docentes desde ac\xE1 cuando se usa Modo Instrumento Complementario)",1,"form-control",3,"focus","formControl"],[1,"list-group","position-absolute","w-100",2,"z-index","1060"],["class","list-group-item list-group-item-action",3,"disabled","opacity","pointerEvents","click",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["formControlName","InstrumentoMusical",1,"form-control",3,"ngClass"],["formControlName","InstrumentoMusicalSecundario",1,"form-control",3,"ngClass"],[1,"mb-3","col-sm-12"],["placeholder","","formControlName","Observacion",1,"quill-container-wrapper",2,"text-transform","uppercase",3,"modules","ngClass"],["placeholder","","formControlName","Anotaciones",1,"quill-container-wrapper",2,"text-transform","uppercase",3,"modules","ngClass"],["placeholder","","formControlName","Notas",1,"quill-container-wrapper",2,"text-transform","uppercase",3,"modules","ngClass"],[1,"button","d-flex","justify-content-start"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Accionar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[1,"mb-3","col-sm-6"],[1,"border","rounded","p-3","text-center",3,"dragover","dragleave","drop","click"],["type","file","accept","image/*",1,"d-none",3,"change"],["class","text-danger small",4,"ngIf"],["type","text","placeholder","","formControlName","Ap_Paterno",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Ap_Materno",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-6"],["type","text","placeholder","","formControlName","Nombre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","CI",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","Expedido",1,"form-control",3,"ngClass"],["formControlName","Sexo",1,"form-control",3,"ngClass"],["type","date","placeholder","","formControlName","FechaNac",1,"form-control",3,"change","ngClass"],["type","number","placeholder","","formControlName","Edad","readonly","","tabindex","-1",1,"form-control",2,"pointer-events","none","background-color","#e9ecef",3,"ngClass"],["type","text","placeholder","","formControlName","Celular",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-5"],["type","text","placeholder","","formControlName","Direccion",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Correo",1,"form-control",3,"ngClass"],[1,"mb-3","col-sm-4"],[1,"d-flex","align-items-end",2,"gap","10px"],[1,"form-floating","flex-grow-1"],["type","text","placeholder","","formControlName","Usuario",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","button","title","Generar Usuario","class","btn mouse-dir secondary d-flex align-items-center justify-content-center p-0","style","width: 58px; height: 58px;",3,"click",4,"ngIf"],["class","invalid-feedback d-block",4,"ngIf"],["placeholder","","formControlName","Contrasenia",1,"form-control",3,"type","ngClass"],["type","button","title","Mostrar/Ocultar Contrasenia","class","btn mouse-dir secondary d-flex align-items-center justify-content-center p-0","style","width: 58px; height: 58px;",3,"click",4,"ngIf"],["formControlName","Estado",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","Nombre_Padre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","OcupacionP",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","NumCelP",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Nombre_Madre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","OcupacionM",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","NumCelM",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","NColegio",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","TipoColegio",1,"form-control",3,"ngClass"],["formControlName","CNivel",1,"form-control",3,"ngClass"],["formControlName","CGrado",1,"form-control",3,"ngClass"],[1,"col-sm-12"],["placeholder","","formControlName","InformacionCompartidaIFAS",1,"quill-container-wrapper",3,"modules","ngClass"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;","title","Accionar",3,"disabled","click",4,"ngIf"],["alt","Foto",1,"img-thumbnail",2,"width","140px","height","140px","object-fit","cover",3,"src"],[1,"progress"],["role","progressbar",1,"progress-bar"],[1,"text-danger","small"],["type","button","title","Generar Usuario",1,"btn","mouse-dir","secondary","d-flex","align-items-center","justify-content-center","p-0",2,"width","58px","height","58px",3,"click"],["width","70px","height","70px",3,"options"],[1,"invalid-feedback","d-block"],["type","button","title","Mostrar/Ocultar Contrasenia",1,"btn","mouse-dir","secondary","d-flex","align-items-center","justify-content-center","p-0",2,"width","58px","height","58px",3,"click"],["title","Accionar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],[1,"mb-2","text-muted"],["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],["alt","QR",2,"max-width","260px","width","100%",3,"src"],["target","_blank","rel","noopener",3,"href"],[1,"mt-3","d-flex","justify-content-end"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],["value","assigned"],["value","unassigned"],["value","both"],[1,"btn","btn-outline-primary","w-100",3,"click"],["class","col-12 col-md-4 text-md-end",4,"ngIf"],[1,"col-12","col-md-4","text-md-end"],[1,"text-secondary"],[1,"fs-5","fw-bold"],[1,"text-secondary","mb-2"],["type","button",1,"btn","btn-link","text-dark","p-0",3,"click","disabled"],["type","button","class","btn btn-link text-dark p-0",3,"disabled","title","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-link","text-dark","p-0",3,"click","disabled","title"],["class","mb-2",4,"ngIf"],["class","table-responsive mt-3","style","max-height: 60vh;",4,"ngIf"],[1,"mb-2"],[1,"text-secondary","small"],["class","text-secondary small",4,"ngIf"],["class","fw-semibold",4,"ngIf"],[1,"table-responsive","mt-3",2,"max-height","60vh"],[3,"modo","estudianteId","nombreEstudiante","fotoEstudiante","sexoEstudiante","preferInfoId"],[3,"modo","infoId","estudianteId","nombreEstudiante","fotoEstudiante","sexoEstudiante","gestionPredeterminada"],[3,"modo","ciBusqueda","institucion"],[1,"context-menu",3,"ngStyle"],["class","context-item",3,"click",4,"ngFor","ngForOf"],[1,"context-item",3,"click"]],template:function(e,n){if(e&1){let i=b();o(0,"div",19)(1,"div",20)(2,"div",21)(3,"h1",22)(4,"div",23)(5,"span"),c(6),a(),o(7,"div",24)(8,"div",25)(9,"select",26),T("ngModelChange",function(m){return p(i),M(n.selectedAnioId,m)||(n.selectedAnioId=m),_(m)}),g("change",function(){return p(i),_(n.onAnioChange())}),h(10,Ua,2,2,"option",27),a(),o(11,"label",28),c(12,"A\xF1o"),a()()()()(),o(13,"p",29),c(14),a(),o(15,"p",30),c(16),a()(),h(17,Ha,3,1,"div",31),a()(),o(18,"div",32)(19,"div",33)(20,"button",34),g("click",function(){return p(i),_(n.abrirModalNuevoInfoestudiantesifas())}),o(21,"span",35),x(22,"ng-lottie",36),a(),o(23,"span"),c(24,"A\xF1adir Inscripci\xF3n "),a(),x(25,"span",37),a(),o(26,"button",34),g("click",function(){return p(i),_(n.abrirModalEstadisticas())}),o(27,"span",35),x(28,"ng-lottie",36),a(),o(29,"span"),c(30,"VER ESTAD\xCDSTICAS DE INSCRIPCIONES"),a(),x(31,"span",37),a(),h(32,Wa,6,1,"button",38)(33,Qa,6,1,"button",38),a(),o(34,"div",39)(35,"div",40)(36,"span",41),x(37,"ng-lottie",42),a(),o(38,"div",25)(39,"input",43),g("keyup.enter",function(){return p(i),_(n.onSearchEnter())}),T("ngModelChange",function(m){return p(i),M(n.filtertxtinfoestudiantesifas,m)||(n.filtertxtinfoestudiantesifas=m),_(m)}),a(),o(40,"label"),c(41,"Buscar"),a()()()(),o(42,"div",39)(43,"div",44)(44,"div",45)(45,"input",46),T("ngModelChange",function(m){return p(i),M(n.incluirSinAsignar,m)||(n.incluirSinAsignar=m),_(m)}),g("change",function(){return p(i),_(n.onAnioChange())}),a(),o(46,"label",47),c(47,"INCLUIR LOS SIN ASIGNACIONES"),a()(),o(48,"div",48)(49,"input",49),T("ngModelChange",function(m){return p(i),M(n.soloSinAsignaciones,m)||(n.soloSinAsignaciones=m),_(m)}),g("change",function(){return p(i),_(n.onAnioChange())}),a(),o(50,"label",50),c(51,"SOLO SIN ASIGNACIONES"),a()(),h(52,Ka,4,1,"div",51),o(53,"button",52),g("click",function(){return p(i),_(n.abrirModalVerificacionAsignacion())}),c(54," VERIFICACI\xD3N DE LA CORRECTA ASIGNACI\xD3N E INSCRIPCI\xD3N "),a(),o(55,"button",53),g("click",function(){return p(i),_(n.abrirModalListasPreliminaresCursos())}),c(56," LISTAS POR CURSO "),a()()()(),h(57,ds,52,36,"ng-template",null,0,V)(59,xs,21,7,"ng-template",null,1,V)(61,Ms,62,19,"ng-template",null,2,V)(63,Hs,63,18,"ng-template",null,3,V),o(65,"div",54)(66,"div",55)(67,"table",56)(68,"tr")(69,"th",57),c(70,"#"),a(),h(71,Qs,3,1,"th",58),o(72,"th",59),g("click",function(m){return p(i),_(n.sortByinfoestudiantesifas("Anio",m))}),c(73," Anio | Resoluci\xF3n "),h(74,Ks,1,4,"i",60),a(),o(75,"th",59),g("click",function(m){return p(i),_(n.sortByinfoestudiantesifas("FechInsc",m))}),c(76," Fecha Inscripci\xF3n "),h(77,Ys,1,4,"i",60),a(),h(78,Zs,3,1,"th",58)(79,eo,3,1,"th",58)(80,io,3,1,"th",58)(81,ao,3,1,"th",58),o(82,"th",59),g("click",function(m){return p(i),_(n.sortByinfoestudiantesifas("Categoria",m))}),c(83," Categoria "),h(84,so,1,4,"i",60),a(),o(85,"th",59),g("click",function(m){return p(i),_(n.sortByinfoestudiantesifas("Curso_Solicitado",m))}),c(86," Curso_Solicitado "),h(87,oo,1,4,"i",60),a(),o(88,"th",59),g("click",function(m){return p(i),_(n.sortByinfoestudiantesifas("Paralelo_Solicitado",m))}),c(89," Par. Sol. "),h(90,ro,1,4,"i",60),a(),o(91,"th",59),g("click",function(m){return p(i),_(n.sortByinfoestudiantesifas("Turno",m))}),c(92," Turno Sol. "),h(93,lo,1,4,"i",60),a(),o(94,"th",59),g("click",function(m){return p(i),_(n.sortByinfoestudiantesifas("CantidadMateriasAsignadas",m))}),c(95," N\xB0 Asig. "),h(96,co,1,4,"i",60),a(),o(97,"th",59),g("click",function(m){return p(i),_(n.sortByinfoestudiantesifas("Verificacion",m))}),c(98," Verificacion "),h(99,uo,1,4,"i",60),a(),o(100,"th",57),c(101,"ACCIONES"),a()(),o(102,"tbody"),h(103,mo,5,1,"tr",61),ht(104,po,6,2,"tr"),h(105,No,43,30,"tr",62),a()()(),o(106,"div",63)(107,"ngb-pagination",64),g("pageChange",function(m){return p(i),_(n.onPageChange(m))}),a(),o(108,"select",65),T("ngModelChange",function(m){return p(i),M(n.pageSizeinfoestudiantesifas,m)||(n.pageSizeinfoestudiantesifas=m),_(m)}),g("change",function(){return p(i),_(n.onPageSizeChangeinfoestudiantesifas())}),h(109,ko,2,2,"option",66),a()()(),h(110,fr,113,42,"ng-template",null,4,V)(112,Lr,224,62,"ng-template",null,5,V)(114,$r,14,3,"ng-template",null,6,V)(116,Gr,15,1,"ng-template",null,7,V)(118,Ur,15,1,"ng-template",null,8,V)(120,ll,23,5,"ng-template",null,9,V)(122,Cl,12,4,"ng-template",null,10,V)(124,Sl,6,6,"ng-template",null,11,V)(126,yl,6,7,"ng-template",null,12,V)(128,Il,6,3,"ng-template",null,13,V)(130,wl,5,11,"div",67),W(131,"async")}if(e&2){let i;r(2),d("ngClass",n.modo==="estudiante"?"col-md-8 text-md-start":"text-center"),r(4),E(n.modo==="estudiante"?"Inscripciones":"Inscripciones Estudiantiles"),r(3),w("ngModel",n.selectedAnioId),r(),d("ngForOf",n.anios),r(4),I(" ",n.modo==="estudiante"?"Gestiona las Inscripciones del estudiante: ":"Gestiona la Informaci\xF3n de Inscripciones de sus estudiantes de manera sencilla y eficiente"," "),r(2),I(" ",n.modo==="estudiante"?""+n.nombreEstudiante:""," "),r(),d("ngIf",n.modo==="estudiante"),r(5),d("options",n._tools.optionsAdicionar),r(6),d("options",n._tools.optionsestadisticas),r(4),d("ngIf",n.esPlantelAdministrativo),r(),d("ngIf",n.esPlantelAdministrativo),r(4),d("options",n._tools.optionslupa),r(2),w("ngModel",n.filtertxtinfoestudiantesifas),r(6),w("ngModel",n.incluirSinAsignar),r(4),w("ngModel",n.soloSinAsignaciones),r(3),d("ngIf",n.habilitarSistemaPagosCarreras),r(),d("disabled",n.isLoadingVerificacionAsignacion),r(2),d("disabled",n.isLoadingCursosParaListas||n.isGenerandoListasPreliminares),r(16),d("ngIf",n.esSuperAdmin),r(3),d("ngIf",n.isSortedinfoestudiantesifas("Anio")),r(3),d("ngIf",n.isSortedinfoestudiantesifas("FechInsc")),r(),d("ngIf",!n.estudianteId),r(),d("ngIf",!n.estudianteId),r(),d("ngIf",!n.estudianteId),r(),d("ngIf",!n.estudianteId),r(3),d("ngIf",n.isSortedinfoestudiantesifas("Categoria")),r(3),d("ngIf",n.isSortedinfoestudiantesifas("Curso_Solicitado")),r(3),d("ngIf",n.isSortedinfoestudiantesifas("Paralelo_Solicitado")),r(3),d("ngIf",n.isSortedinfoestudiantesifas("Turno")),r(3),d("ngIf",n.isSortedinfoestudiantesifas("CantidadMateriasAsignadas")),r(3),d("ngIf",n.isSortedinfoestudiantesifas("Verificacion")),r(4),d("ngIf",n.isLoadinginfoestudiantesifas),r(),xt(!n.isLoadinginfoestudiantesifas&&(!n.infoestudiantesifas||n.infoestudiantesifas.length===0)?104:-1),r(),d("ngForOf",n.infoestudiantesifas),r(2),d("page",n.paginainfoestudiantesifas)("collectionSize",n.collectionSizeinfoestudiantesifas)("pageSize",n.pageSizeinfoestudiantesifas)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),r(),w("ngModel",n.pageSizeinfoestudiantesifas),r(),d("ngForOf",n.pageSizeOptionsinfoestudiantesifas),r(21),d("ngIf",(i=Q(131,44,n.menuStateinfoestudiantesifas$))==null?null:i.visible)}},dependencies:[_e,fe,ge,We,Je,Ce,Se,Xe,et,Ye,be,ve,Ze,Ee,yt,tt,it,at,Ie,Pe,st,ct,Ne,Qe,wt],styles:[".deuda-glow-wrap[_ngcontent-%COMP%]{position:absolute;inset:-2px;border-radius:10px;pointer-events:none}.deuda-glow[_ngcontent-%COMP%]{box-shadow:0 0 0 .25rem rgba(var(--bs-danger-rgb),.25);animation:_ngcontent-%COMP%_deudaGlowPulse 1.2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_deudaGlowPulse{0%{box-shadow:0 0 0 .15rem rgba(var(--bs-danger-rgb),.15)}50%{box-shadow:0 0 0 .35rem rgba(var(--bs-danger-rgb),.28)}to{box-shadow:0 0 0 .15rem rgba(var(--bs-danger-rgb),.15)}}[_nghost-%COMP%]     mark.match-strong{background-color:rgba(var(--bs-warning-rgb),.55);color:var(--bs-dark);font-weight:800;padding:0 .15rem;border-radius:.2rem;box-decoration-break:clone;-webkit-box-decoration-break:clone;outline:1px solid rgba(var(--bs-warning-rgb),.9)}.turno-manana[_ngcontent-%COMP%]{background-color:rgba(var(--bs-warning-rgb),.22)!important}.turno-tarde[_ngcontent-%COMP%]{background-color:rgba(var(--bs-success-rgb),.18)!important}.turno-noche[_ngcontent-%COMP%]{background-color:rgba(var(--bs-info-rgb),.2)!important}.asig-has[_ngcontent-%COMP%]{background-color:rgba(var(--bs-danger-rgb),.18)!important}"]});var Fe=ke;var Tl=["modalOtroComponentecalifhistorias"],Pl=["modalOtroComponenteRegistrarpagos"],Vl=["modalVincularCelular"],Nl=["modalEsperaFotoCelular"],kl=["modalgestionestudiantesifas"],se=(s,t)=>({"bi-caret-up":s,"bi-caret-down":t}),Fl=(s,t,e)=>({"bg-success":s,"bg-secondary":t,"bg-danger":e}),Rl=(s,t)=>({top:s,left:t});function Ol(s,t){if(s&1&&x(0,"i",38),s&2){let e=u();d("ngClass",N(1,se,e.getSortDirestudiantesifas("Ap_Paterno")==="asc",e.getSortDirestudiantesifas("Ap_Paterno")==="desc"))}}function Dl(s,t){if(s&1&&x(0,"i",38),s&2){let e=u();d("ngClass",N(1,se,e.getSortDirestudiantesifas("Ap_Materno")==="asc",e.getSortDirestudiantesifas("Ap_Materno")==="desc"))}}function Ll(s,t){if(s&1&&x(0,"i",38),s&2){let e=u();d("ngClass",N(1,se,e.getSortDirestudiantesifas("Nombre")==="asc",e.getSortDirestudiantesifas("Nombre")==="desc"))}}function jl(s,t){if(s&1&&x(0,"i",38),s&2){let e=u();d("ngClass",N(1,se,e.getSortDirestudiantesifas("CI")==="asc",e.getSortDirestudiantesifas("CI")==="desc"))}}function Bl(s,t){if(s&1&&x(0,"i",38),s&2){let e=u();d("ngClass",N(1,se,e.getSortDirestudiantesifas("Expedido")==="asc",e.getSortDirestudiantesifas("Expedido")==="desc"))}}function $l(s,t){if(s&1&&x(0,"i",38),s&2){let e=u();d("ngClass",N(1,se,e.getSortDirestudiantesifas("Sexo")==="asc",e.getSortDirestudiantesifas("Sexo")==="desc"))}}function Gl(s,t){if(s&1&&x(0,"i",38),s&2){let e=u();d("ngClass",N(1,se,e.getSortDirestudiantesifas("Edad")==="asc",e.getSortDirestudiantesifas("Edad")==="desc"))}}function Ul(s,t){if(s&1&&x(0,"i",38),s&2){let e=u();d("ngClass",N(1,se,e.getSortDirestudiantesifas("Estado")==="asc",e.getSortDirestudiantesifas("Estado")==="desc"))}}function zl(s,t){s&1&&(o(0,"tr")(1,"td",28)(2,"div",39)(3,"span",40),c(4,"Cargando..."),a()()()()),s&2&&(r(),U("colspan",10))}function ql(s,t){s&1&&(o(0,"tr")(1,"td",28),c(2,"No hay datos disponibles"),a()()),s&2&&(r(),U("colspan",10))}function Hl(s,t){if(s&1&&x(0,"img",51),s&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"inscripcion.svg",F)}}function Wl(s,t){if(s&1&&x(0,"ng-lottie",52),s&2){let e=u(2);d("options",e._tools.optionsAdicionar)}}function Ql(s,t){if(s&1&&x(0,"img",51),s&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"historial.svg",F)}}function Kl(s,t){if(s&1&&x(0,"ng-lottie",52),s&2){let e=u(2);d("options",e._tools.optionsarchive)}}function Yl(s,t){if(s&1&&x(0,"img",51),s&2){let e=u(3);d("src",e._tools.rutabtniconsanimaciones+"money.svg",F)}}function Xl(s,t){if(s&1&&x(0,"ng-lottie",52),s&2){let e=u(3);d("options",e._tools.optionsmoney)}}function Zl(s,t){if(s&1){let e=b();o(0,"button",53),g("click",function(i){p(e);let l=u().$implicit,m=u();return _(m.abrirRegistroPagoDesdeEstudiante(l,i))})("mouseenter",function(){p(e);let i=u().$implicit,l=u();return _(l._tools.hoverBotonMap["pagosestudiantesifas-"+i.id]=!0)})("mouseleave",function(){p(e);let i=u().$implicit,l=u();return _(l._tools.hoverBotonMap["pagosestudiantesifas-"+i.id]=!1)}),h(1,Yl,1,1,"img",45)(2,Xl,1,1,"ng-lottie",46),a()}if(s&2){let e=u().$implicit,n=u();r(),d("ngIf",!n._tools.hoverBotonMap["pagosestudiantesifas-"+e.id]),r(),d("ngIf",n._tools.hoverBotonMap["pagosestudiantesifas-"+e.id])}}function Jl(s,t){if(s&1&&x(0,"img",51),s&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"pencil.svg",F)}}function ec(s,t){if(s&1&&x(0,"ng-lottie",52),s&2){let e=u(2);d("options",e._tools.optionsEditar)}}function tc(s,t){if(s&1&&x(0,"img",51),s&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"delete.svg",F)}}function ic(s,t){if(s&1&&x(0,"ng-lottie",52),s&2){let e=u(2);d("options",e._tools.optionsEliminar)}}function nc(s,t){if(s&1){let e=b();o(0,"tr",41),g("contextmenu",function(i){let l=p(e).$implicit,m=u();return _(m.abrirMenuestudiantesifas(i,l))}),o(1,"td",28),c(2),a(),o(3,"td"),x(4,"span",42),a(),o(5,"td"),x(6,"span",42),a(),o(7,"td"),x(8,"span",42),a(),o(9,"td"),x(10,"span",42),a(),o(11,"td"),x(12,"span",42),a(),o(13,"td"),x(14,"span",42),a(),o(15,"td"),c(16),a(),o(17,"td"),x(18,"span",42),a(),o(19,"td",43)(20,"button",44),g("click",function(){let i=p(e).$implicit,l=u(),m=z(73);return l.VisualizarInfoEstudiante(i.id),_(l._tools.openModal(m,"xl"))})("mouseenter",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["visualizacionestudiantesifas-"+i.id]=!0)})("mouseleave",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["visualizacionestudiantesifas-"+i.id]=!1)}),h(21,Hl,1,1,"img",45)(22,Wl,1,1,"ng-lottie",46),a(),o(23,"button",47),g("click",function(i){let l=p(e).$implicit,m=u();return _(m.abrirHistorialDesdeEstudiante(l,i))})("mouseenter",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["historialestudiantesifas-"+i.id]=!0)})("mouseleave",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["historialestudiantesifas-"+i.id]=!1)}),h(24,Ql,1,1,"img",45)(25,Kl,1,1,"ng-lottie",46),a(),h(26,Zl,3,2,"button",48),o(27,"button",49),g("click",function(){let i=p(e).$implicit,l=u();return _(l.Seleccionarestudiantesifas(i.id))})("mouseenter",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["edicionestudiantesifas-"+i.id]=!0)})("mouseleave",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["edicionestudiantesifas-"+i.id]=!1)}),h(28,Jl,1,1,"img",45)(29,ec,1,1,"ng-lottie",46),a(),o(30,"button",50),g("click",function(){let i=p(e).$implicit,l=u();return _(l.Eliminarestudiantesifas(i.id))})("mouseenter",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["eliminacionestudiantesifas-"+i.id]=!0)})("mouseleave",function(){let i=p(e).$implicit,l=u();return _(l._tools.hoverBotonMap["eliminacionestudiantesifas-"+i.id]=!1)}),h(31,tc,1,1,"img",45)(32,ic,1,1,"ng-lottie",46),a()()()}if(s&2){let e=t.$implicit,n=t.index,i=u();r(2),E(i.rowIndexBaseestudiantesifas+(n+1)),r(2),d("innerHTML",i.highlightCell(e.Ap_Paterno),k),r(2),d("innerHTML",i.highlightCell(e.Ap_Materno),k),r(2),d("innerHTML",i.highlightCell(e.Nombre),k),r(2),d("innerHTML",i.highlightCell(e.CI),k),r(2),d("innerHTML",i.highlightCell(e.Expedido),k),r(2),d("innerHTML",i.highlightCell(e.Sexo),k),r(2),E(e.Edad),r(2),d("innerHTML",i.highlightCell(e.Estado),k),r(3),d("ngIf",!i._tools.hoverBotonMap["visualizacionestudiantesifas-"+e.id]),r(),d("ngIf",i._tools.hoverBotonMap["visualizacionestudiantesifas-"+e.id]),r(2),d("ngIf",!i._tools.hoverBotonMap["historialestudiantesifas-"+e.id]),r(),d("ngIf",i._tools.hoverBotonMap["historialestudiantesifas-"+e.id]),r(),d("ngIf",i.habilitarSistemaPagosCarreras),r(2),d("ngIf",!i._tools.hoverBotonMap["edicionestudiantesifas-"+e.id]),r(),d("ngIf",i._tools.hoverBotonMap["edicionestudiantesifas-"+e.id]),r(2),d("ngIf",!i._tools.hoverBotonMap["eliminacionestudiantesifas-"+e.id]),r(),d("ngIf",i._tools.hoverBotonMap["eliminacionestudiantesifas-"+e.id])}}function ac(s,t){if(s&1&&(o(0,"option",54),c(1),a()),s&2){let e=t.$implicit;d("value",e),r(),I("",e," por p\xE1gina")}}function sc(s,t){if(s&1&&(o(0,"div"),x(1,"img",120),a()),s&2){let e,n=u(2);r(),d("src",n._tools.ruta+((e=n.newestudiantesifas.get("Foto"))==null?null:e.value),F)}}function oc(s,t){s&1&&(o(0,"div",64),c(1,"SIN FOTO DE PERFIL"),a())}function rc(s,t){if(s&1&&(o(0,"div",121)(1,"div",122)(2,"div",123),c(3),a()()()),s&2){let e=u(2);r(2),ce("width",e.uploadProgressFoto,"%"),r(),I(" ",e.uploadProgressFoto,"% ")}}function lc(s,t){if(s&1){let e=b();o(0,"div",124)(1,"div")(2,"div",125),c(3,"Esperando foto del celular..."),a(),o(4,"div",126),c(5),a()(),o(6,"button",127),g("click",function(){p(e);let i=u(2);return _(i.cancelarEsperaCaptura())}),c(7,"Cancelar"),a()()}if(s&2){let e=u(2);r(5),I("Estado: ",e.capturaStatus||"PENDING",". Puedes seguir llenando el formulario.")}}function cc(s,t){s&1&&(o(0,"div",128),c(1," Este campo es obligatorio* "),a())}function dc(s,t){if(s&1&&(o(0,"option",129),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function uc(s,t){if(s&1&&(o(0,"option",129),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function mc(s,t){if(s&1){let e=b();o(0,"button",130),g("click",function(){let i;p(e);let l=u(2);return _(l.newestudiantesifas.patchValue({Usuario:((i=l.newestudiantesifas.get("Ap_Paterno"))==null?null:i.value.charAt(0))+((i=l.newestudiantesifas.get("Ap_Materno"))==null?null:i.value.charAt(0))+((i=l.newestudiantesifas.get("Nombre"))==null?null:i.value.charAt(0))+((i=l.newestudiantesifas.get("CI"))==null?null:i.value)+"EST"}))}),x(1,"ng-lottie",131),a()}if(s&2){let e=u(2);r(),d("options",e._tools.optionstripleengranaje)}}function pc(s,t){s&1&&(o(0,"div",132),c(1," Este campo es obligatorio* "),a())}function _c(s,t){if(s&1){let e=b();o(0,"button",133),g("click",function(){p(e);let i=u(2);return _(i.mostrarContrasenia=!i.mostrarContrasenia)}),x(1,"ng-lottie",131),a()}if(s&2){let e=u(2);r(),d("options",e._tools.optionseye)}}function fc(s,t){s&1&&(o(0,"div",132),c(1," Este campo es obligatorio* "),a())}function gc(s,t){if(s&1&&(o(0,"option",129),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function hc(s,t){if(s&1&&(o(0,"option",129),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function xc(s,t){if(s&1&&(o(0,"option",129),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function vc(s,t){if(s&1&&(o(0,"option",129),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Ec(s,t){if(s&1&&(o(0,"option",129),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function bc(s,t){if(s&1&&(o(0,"option",129),c(1),a()),s&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),E(e.label)}}function Cc(s,t){if(s&1){let e=b();o(0,"button",136),g("click",function(){p(e);let i=u(3);return _(i.AutoCompletarLastestudiantesifas())}),o(1,"span",15),x(2,"ng-lottie",16),a(),o(3,"span"),c(4,"AUTO COMPLETAR "),a(),x(5,"span",17),a()}if(s&2){let e=u(3);r(2),d("options",e._tools.optionsautocompletar)}}function Sc(s,t){if(s&1&&(o(0,"div",134),h(1,Cc,6,1,"button",135),a()),s&2){let e=u(2);r(),d("ngIf",!e.AnimacionCargabtnModalestudiantesifas)}}function yc(s,t){if(s&1){let e=b();o(0,"button",137),g("click",function(){p(e);let i=u().$implicit,l=u();return i.dismiss(),_(l.resetestudiantesifas())}),o(1,"span",15),x(2,"ng-lottie",16),a(),o(3,"span"),c(4,"CANCELAR"),a(),x(5,"span",17),a()}if(s&2){let e=u(2);r(2),d("options",e._tools.optionscancelar)}}function Ic(s,t){if(s&1){let e=b();o(0,"button",138),g("click",function(){p(e);let i=u(2);return _(i.AgregarModificarestudiantesifas())}),x(1,"span",139),a()}s&2&&d("disabled",!0)}function Ac(s,t){if(s&1){let e=b();o(0,"button",140),g("click",function(){p(e);let i=u(2);return _(i.AgregarModificarestudiantesifas())}),o(1,"span",15),x(2,"ng-lottie",16),a(),o(3,"span"),c(4),a(),x(5,"span",17),a()}if(s&2){let e,n,i=u(2);d("disabled",i.isUploadingFoto),r(2),d("options",(e=i.newestudiantesifas.get("id"))!=null&&e.value?i._tools.optionsEditar:i._tools.optionsAdicionar),r(2),E((n=i.newestudiantesifas.get("id"))!=null&&n.value?"MODIFICAR":"REGISTRAR")}}function wc(s,t){if(s&1){let e=b();o(0,"div",55)(1,"h4",56),c(2),a(),o(3,"button",57),g("click",function(){let i=p(e).$implicit,l=u();return i.dismiss(),_(l.resetestudiantesifas())}),a()(),o(4,"div",58)(5,"form",59)(6,"div",9)(7,"div",60)(8,"label",61),c(9,"Foto actual"),a(),h(10,sc,2,1,"div",62)(11,oc,2,0,"ng-template",null,6,V),a(),o(13,"div",60)(14,"label",61),c(15,"SUBIR FOTO DE PERFIL (1 archivo)"),a(),o(16,"div",63),g("dragover",function(i){p(e);let l=u();return _(l.onFotoDragOver(i))})("dragleave",function(i){p(e);let l=u();return _(l.onFotoDragLeave(i))})("drop",function(i){p(e);let l=u();return _(l.onFotoDrop(i))})("click",function(){p(e);let i=z(21),l=u();return _(l.abrirSelectorFoto(i))}),o(17,"div",64),c(18,"Arrastra y suelta aqu\xED, o clic para seleccionar archivo"),a(),h(19,rc,4,3,"div",65),a(),o(20,"input",66,7),g("change",function(i){p(e);let l=u();return _(l.onFotoFileSelected(i))}),a(),o(22,"div",67)(23,"button",68),g("click",function(){p(e);let i=u();return _(i.abrirVinculacionCelular())}),c(24," Vincular celular (QR) "),a(),o(25,"span",69),c(26),a(),o(27,"button",70),g("click",function(){p(e);let i=u();return _(i.iniciarCapturaFotoPorCelular())}),c(28," Tomar foto con celular "),a()(),h(29,lc,8,1,"div",71)(30,cc,2,0,"div",72),a()(),o(31,"div",9)(32,"div",73)(33,"input",74),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"Ap_Paterno"))}),a(),o(34,"label"),c(35,"Apellido Paterno"),a(),o(36,"div",75),c(37,"Este campo es obligatorio*"),a()(),o(38,"div",73)(39,"input",76),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"Ap_Materno"))}),a(),o(40,"label"),c(41,"Apellido Materno"),a(),o(42,"div",75),c(43,"Este campo es obligatorio*"),a()(),o(44,"div",77)(45,"input",78),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"Nombre"))}),a(),o(46,"label"),c(47,"Nombres"),a(),o(48,"div",75),c(49,"Este campo es obligatorio*"),a()()(),o(50,"div",9)(51,"div",73)(52,"input",79),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"CI"))}),a(),o(53,"label"),c(54,"C\xE9dula de Identidad"),a(),o(55,"div",75),c(56,"Este campo es obligatorio*"),a()(),o(57,"div",80)(58,"select",81)(59,"option",82),c(60,"Seleccione una opci\xF3n"),a(),h(61,dc,2,3,"option",83),a(),o(62,"label"),c(63,"Expedido"),a(),o(64,"div",75),c(65,"Este campo es obligatorio*"),a()(),o(66,"div",80)(67,"select",84)(68,"option",82),c(69,"Seleccione una opci\xF3n"),a(),h(70,uc,2,3,"option",83),a(),o(71,"label"),c(72,"Sexo"),a(),o(73,"div",75),c(74,"Este campo es obligatorio*"),a()(),o(75,"div",73)(76,"input",85),g("change",function(i){let l;p(e);let m=u();return _((l=m.newestudiantesifas.get("Edad"))==null?null:l.setValue(m._tools.CalcularEdad(i.target.value)))}),a(),o(77,"label"),c(78,"Fecha de Nacimiento"),a(),o(79,"div",75),c(80,"Este campo es obligatorio*"),a()(),o(81,"div",80),x(82,"input",86),o(83,"label"),c(84,"Edad"),a(),o(85,"div",75),c(86,"Este campo es obligatorio*"),a()()(),o(87,"div",9)(88,"div",73)(89,"input",87),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"Celular"))}),a(),o(90,"label"),c(91,"Celular"),a(),o(92,"div",75),c(93,"Este campo es obligatorio*"),a()(),o(94,"div",88)(95,"input",89),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"Direccion"))}),a(),o(96,"label"),c(97,"Direcci\xF3n"),a(),o(98,"div",75),c(99,"Este campo es obligatorio*"),a()(),o(100,"div",90),x(101,"input",91),o(102,"label"),c(103,"Correo"),a(),o(104,"div",75),c(105,"Este campo es obligatorio*"),a()()(),o(106,"div",9)(107,"div",92)(108,"div",93)(109,"div",94)(110,"input",95),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"Usuario"))}),a(),o(111,"label"),c(112,"Usuario"),a()(),h(113,mc,2,1,"button",96),a(),h(114,pc,2,0,"div",97),a(),o(115,"div",92)(116,"div",93)(117,"div",94),x(118,"input",98),o(119,"label"),c(120,"Contrase\xF1a"),a()(),h(121,_c,2,1,"button",99),a(),h(122,fc,2,0,"div",97),a(),o(123,"div",90)(124,"select",100)(125,"option",82),c(126,"Seleccione una opci\xF3n"),a(),h(127,gc,2,3,"option",83),a(),o(128,"label"),c(129,"Estado"),a(),o(130,"div",75),c(131,"Este campo es obligatorio*"),a()()(),x(132,"hr"),o(133,"div",9)(134,"div",90)(135,"input",101),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"Nombre_Padre"))}),a(),o(136,"label"),c(137,"Nombre Padre"),a(),o(138,"div",75),c(139,"Este campo es obligatorio*"),a()(),o(140,"div",73)(141,"select",102)(142,"option",82),c(143,"Seleccione una opci\xF3n"),a(),h(144,hc,2,3,"option",83),a(),o(145,"label"),c(146,"Ocupaci\xF3n del Padre"),a(),o(147,"div",75),c(148,"Este campo es obligatorio*"),a()(),o(149,"div",90)(150,"input",103),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"NumCelP"))}),a(),o(151,"label"),c(152,"N\xFAmero Celular del Padre"),a(),o(153,"div",75),c(154,"Este campo es obligatorio*"),a()()(),o(155,"div",9)(156,"div",90)(157,"input",104),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"Nombre_Madre"))}),a(),o(158,"label"),c(159,"Nombre Madre"),a(),o(160,"div",75),c(161,"Este campo es obligatorio*"),a()(),o(162,"div",73)(163,"select",105)(164,"option",82),c(165,"Seleccione una opci\xF3n"),a(),h(166,xc,2,3,"option",83),a(),o(167,"label"),c(168,"Ocupaci\xF3n de la Madre"),a(),o(169,"div",75),c(170,"Este campo es obligatorio*"),a()(),o(171,"div",90)(172,"input",106),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"NumCelM"))}),a(),o(173,"label"),c(174,"N\xFAmero Celular de la Madre"),a(),o(175,"div",75),c(176,"Este campo es obligatorio*"),a()()(),o(177,"div",9)(178,"div",73)(179,"input",107),g("change",function(i){p(e);let l=u();return _(l._tools.EscribirEnMayuscula(i,l.newestudiantesifas,"NColegio"))}),a(),o(180,"label"),c(181,"Nombre Colegio"),a(),o(182,"div",75),c(183,"Este campo es obligatorio*"),a()(),o(184,"div",73)(185,"select",108)(186,"option",82),c(187,"Seleccione una opci\xF3n"),a(),h(188,vc,2,3,"option",83),a(),o(189,"label"),c(190,"Tipo Colegio"),a(),o(191,"div",75),c(192,"Este campo es obligatorio*"),a()(),o(193,"div",73)(194,"select",109)(195,"option",82),c(196,"Seleccione una opci\xF3n"),a(),h(197,Ec,2,3,"option",83),a(),o(198,"label"),c(199,"Nivel del Colegio"),a(),o(200,"div",75),c(201,"Este campo es obligatorio*"),a()(),o(202,"div",73)(203,"select",110)(204,"option",82),c(205,"Seleccione una opci\xF3n"),a(),h(206,bc,2,3,"option",83),a(),o(207,"label"),c(208,"Grado en Colegio"),a(),o(209,"div",75),c(210,"Este campo es obligatorio*"),a()()(),o(211,"div",111)(212,"label"),c(213,"Informaci\xF3n Compartida IFAS"),a(),x(214,"quill-editor",112),o(215,"div",75),c(216,"Este campo es obligatorio*"),a()()()(),o(217,"div",113),h(218,Sc,2,1,"div",114),o(219,"div",115),h(220,yc,6,1,"button",116),a(),o(221,"div",117),h(222,Ic,2,1,"button",118)(223,Ac,6,3,"button",119),a()()}if(s&2){let e,n,i,l,m,v=z(12),f=u();r(2),I("",(e=f.newestudiantesifas.get("id"))!=null&&e.value?"Modificar":"Registrar"," Informaci\xF3n Personal Estudiante"),r(3),d("formGroup",f.newestudiantesifas),r(5),d("ngIf",(n=f.newestudiantesifas.get("Foto"))==null?null:n.value)("ngIfElse",v),r(6),G("border-primary",f.isDraggingFoto)("bg-light",f.isDraggingFoto),r(3),d("ngIf",f.isUploadingFoto),r(4),d("disabled",f.isUploadingFoto),r(2),d("ngClass",Le(58,Fl,f.pairingStatus==="LINKED",!f.pairingStatus||f.pairingStatus==="PENDING",f.pairingStatus==="EXPIRED"||f.pairingStatus==="REVOKED")),r(),I(" ",f.pairingStatus==="LINKED"?"VINCULADO":f.pairingStatus||"NO VINCULADO"," "),r(),d("disabled",f.isUploadingFoto||f.isEsperandoCapturaFoto),r(2),d("ngIf",f.isEsperandoCapturaFoto&&f.capturaToken),r(),d("ngIf",((i=f.newestudiantesifas.get("Foto"))==null?null:i.touched)&&((i=f.newestudiantesifas.get("Foto"))==null?null:i.invalid)),r(3),d("ngClass",f.ValidacionestudiantesifasxElemento("Ap_Paterno")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Ap_Materno")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Nombre")),r(7),d("ngClass",f.ValidacionestudiantesifasxElemento("CI")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Expedido")),r(3),d("ngForOf",f.expedidoOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Sexo")),r(3),d("ngForOf",f.sexoOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("FechaNac")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Edad")),r(7),d("ngClass",f.ValidacionestudiantesifasxElemento("Celular")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Direccion")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Correo")),r(9),d("ngClass",f.ValidacionestudiantesifasxElemento("Usuario")),r(3),d("ngIf",!f.AnimacionCargabtnModalplanteldocentes),r(),d("ngIf",((l=f.newestudiantesifas.get("Usuario"))==null?null:l.touched)&&((l=f.newestudiantesifas.get("Usuario"))==null?null:l.invalid)),r(4),d("type",f.mostrarContrasenia?"text":"password")("ngClass",f.ValidacionestudiantesifasxElemento("Contrasenia")),r(3),d("ngIf",!f.AnimacionCargabtnModalplanteldocentes),r(),d("ngIf",((m=f.newestudiantesifas.get("Contrasenia"))==null?null:m.touched)&&((m=f.newestudiantesifas.get("Contrasenia"))==null?null:m.invalid)),r(2),d("ngClass",f.ValidacionestudiantesifasxElemento("Estado")),r(3),d("ngForOf",f.estadoOptions),r(8),d("ngClass",f.ValidacionestudiantesifasxElemento("Nombre_Padre")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("OcupacionP")),r(3),d("ngForOf",f.OcupacionOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("NumCelP")),r(7),d("ngClass",f.ValidacionestudiantesifasxElemento("Nombre_Madre")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("OcupacionM")),r(3),d("ngForOf",f.OcupacionOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("NumCelM")),r(7),d("ngClass",f.ValidacionestudiantesifasxElemento("NColegio")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("TipoColegio")),r(3),d("ngForOf",f.tipoColegioOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("CNivel")),r(3),d("ngForOf",f.nivelColegioOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("CGrado")),r(3),d("ngForOf",f.gradoColegioOptions),r(8),d("modules",f.modulesQuillEdicion)("ngClass",f.ValidacionestudiantesifasxElemento("InformacionCompartidaIFAS")),r(4),d("ngIf",!f.newestudiantesifas.get("id").value),r(2),d("ngIf",!f.AnimacionCargabtnModalestudiantesifas),r(2),d("ngIf",f.AnimacionCargabtnModalestudiantesifas),r(),d("ngIf",!f.AnimacionCargabtnModalestudiantesifas)}}function Mc(s,t){if(s&1&&(o(0,"div",146),x(1,"img",147),a()),s&2){let e=u(2);r(),d("src",e.pairingQrDataUrl,F)}}function Tc(s,t){if(s&1&&(o(0,"div",143)(1,"a",148),c(2,"Abrir link en el celular"),a()()),s&2){let e=u(2);r(),d("href",e.pairingUrl,F)}}function Pc(s,t){if(s&1){let e=b();o(0,"div",55)(1,"h4",56),c(2,"Vincular celular"),a(),o(3,"button",57),g("click",function(){let i=p(e).$implicit;return _(i.dismiss())}),a()(),o(4,"div",58)(5,"div",141),c(6,"Escanea este QR una sola vez desde el celular."),a(),h(7,Mc,2,1,"div",142),o(8,"div",143)(9,"div",144),c(10,"Estado"),a(),o(11,"div",125),c(12),a()(),h(13,Tc,3,1,"div",145),a()}if(s&2){let e=u();r(7),d("ngIf",e.pairingQrDataUrl),r(5),E(e.pairingStatus||"..."),r(),d("ngIf",e.pairingUrl)}}function Vc(s,t){if(s&1){let e=b();o(0,"div",55)(1,"h4",56),c(2,"Esperando foto..."),a(),o(3,"button",57),g("click",function(){let i=p(e).$implicit;return _(i.dismiss())}),a()(),o(4,"div",58)(5,"div",64),c(6,"En el celular entra a \u201CCaptura desde celular\u201D (ya vinculado) y toma la foto."),a(),o(7,"div",143)(8,"div",144),c(9,"Estado"),a(),o(10,"div",125),c(11),a()(),o(12,"div",149)(13,"button",127),g("click",function(){let i=p(e).$implicit;return u().cancelarEsperaCaptura(),_(i.close())}),c(14,"Cancelar espera"),a()()()}if(s&2){let e=u();r(11),E(e.capturaStatus||"PENDING")}}function Nc(s,t){if(s&1){let e=b();o(0,"button",152),g("click",function(){let i=p(e).$implicit;return _(i.action())}),c(1),a()}if(s&2){let e=t.$implicit;r(),I(" ",e.label," ")}}function kc(s,t){if(s&1&&(o(0,"div",150),W(1,"async"),W(2,"async"),h(3,Nc,2,1,"button",151),W(4,"async"),a()),s&2){let e,n,i=u();d("ngStyle",N(8,Rl,((e=Q(1,2,i.menuStateestudiantesifas$))==null?null:e.y)+"px",((e=Q(2,4,i.menuStateestudiantesifas$))==null?null:e.x)+"px")),r(3),d("ngForOf",(n=Q(4,6,i.menuStateestudiantesifas$))==null?null:n.items)}}function Fc(s,t){if(s&1){let e=b();o(0,"div",55)(1,"h5",56),c(2,"Inscripciones del estudiante"),a(),o(3,"button",153),g("click",function(){let i=p(e).$implicit;return _(i.dismiss())}),a()(),o(4,"div",58),x(5,"app-estudiantesinscritos",154),a()}if(s&2){let e=u();r(5),d("modo","estudiante")("estudianteId",e.estudianteSeleccionadoId)("nombreEstudiante",e.estudianteSeleccionadoNombre)("fotoEstudiante",e.estudianteSeleccionadoFoto)("sexoEstudiante",e.estudianteSeleccionadoSexo)}}function Rc(s,t){if(s&1){let e=b();o(0,"div",55)(1,"h5",56),c(2,"Componente Registro de pagos estudiantes de carrera"),a(),o(3,"button",153),g("click",function(){let i=p(e).$implicit;return _(i.dismiss())}),a()(),o(4,"div",58),x(5,"app-sistemapagoslcch",155),a()}if(s&2){let e=u();r(5),d("modo",e.pagosModo)("infoId",e.pagosInfoId)("estudianteId",e.pagosEstudianteId)("nombreEstudiante",e.pagosNombreEstudiante)("fotoEstudiante",e.pagosFotoEstudiante)("sexoEstudiante",e.pagosSexoEstudiante)("gestionPredeterminada",e.pagosGestionPredeterminada)}}function Oc(s,t){if(s&1){let e=b();o(0,"div",55)(1,"h5",56),c(2,"Componente Historias"),a(),o(3,"button",153),g("click",function(){let i=p(e).$implicit;return _(i.dismiss())}),a()(),o(4,"div",58),x(5,"app-califhistorias",156),a()}if(s&2){let e=u();r(5),d("modo","modal_ci")("ciBusqueda",e.historialCiBusqueda)("institucion",e.historialInstitucionNombre)}}var Re=class Re{constructor(t,e,n,i,l,m,v,f,C){this._est=t;this._infoest=e;this._tools=n;this._controles=i;this._auth=l;this._inst=m;this._capture=v;this._pairing=f;this.router=C;this.modulesQuillEdicion={toolbar:[["bold","italic","underline","strike"],[{align:[]}],[{size:["small",!1,"large"]}],[{color:[]},{background:[]}],[{font:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","video"],["clean"]]};this.modulesQuillShow={toolbar:!1};this.habilitarSistemaPagosCarreras=!1;this.institucionCaractisticasActual="";this.institucionNombreActual="";this.historialCiBusqueda="";this.historialInstitucionNombre="";this.pagosModo="estudiante";this.pagosInfoId=null;this.pagosEstudianteId=null;this.pagosNombreEstudiante=null;this.pagosFotoEstudiante=null;this.pagosSexoEstudiante=null;this.pagosGestionPredeterminada=null;this.sexoOptions=[];this.expedidoOptions=[];this.estadoOptions=[];this.especialidadOptions=[];this.tipoColegioOptions=[];this.nivelColegioOptions=[];this.gradoColegioOptions=[];this.OcupacionOptions=[];this.pairingToken=null;this.pairingStatus=null;this.pairingUrl=null;this.pairingQrDataUrl=null;this.pairingIntervalId=null;this.capturaToken=null;this.capturaStatus=null;this.isEsperandoCapturaFoto=!1;this.capturaIntervalId=null;this.isDraggingFoto=!1;this.isUploadingFoto=!1;this.uploadProgressFoto=0;this.fotoAnteriorPath=null;this.fotoTempPath=null;this.estudiantesifas=[];this.paginaestudiantesifas=1;this.isLoadingestudiantesifas=!0;this.AnimacionCargabtnModalestudiantesifas=!1;this.filtertxtestudiantesifas="";this.sortByColumnestudiantesifas="id";this.sortDirestudiantesifas="desc";this.ordenManualestudiantesifas=!1;this.rowIndexBaseestudiantesifas=0;this.estudianteSeleccionadoId=null;this.estudianteSeleccionadoNombre=null;this.estudianteSeleccionadoFoto=null;this.estudianteSeleccionadoSexo=null;this.collectionSizeestudiantesifas=0;this.pageSizeestudiantesifas=10;this.pageSizeOptionsestudiantesifas=[5,10,20,50];this.menuStateestudiantesifas$=this._tools.state$;this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this.newestudiantesifasAnteriorAccion=this._est.createFormGroupestudiantesifas()}ngOnInit(){this.Cargarestudiantesifas(),this.cargarVinculacionDesdeStorage(),this.cargarOptionsDesdeControles(),this.cargarCaractisticasInstitucionActualDesdePerfil()}normalizarTexto(t){return(t??"").toString().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").toUpperCase().trim()}cargarCaractisticasInstitucionActualDesdePerfil(){this._auth.pedirPerfil().subscribe({next:t=>{let e=Number(t?.usuario?.instituciones_id??0);this.cargarCaractisticasInstitucionActual(Number.isFinite(e)&&e>0?e:null)},error:()=>{this.cargarCaractisticasInstitucionActual(null)}})}cargarCaractisticasInstitucionActual(t){if(!t){this.habilitarSistemaPagosCarreras=!1,this.institucionCaractisticasActual="",this.institucionNombreActual="";return}this._inst.Seleccionarinstituciones(t).subscribe({next:e=>{let n=e?.data??e??{};this.institucionCaractisticasActual=(n?.Caractisticas??"").toString(),this.habilitarSistemaPagosCarreras=this.normalizarTexto(this.institucionCaractisticasActual).includes("SISTEMA PAGOS CARRERAS");let i=(n?.NombreInstitucion??n?.Nombre??"").toString().trim();this.institucionNombreActual=i},error:()=>{this.habilitarSistemaPagosCarreras=!1,this.institucionCaractisticasActual="",this.institucionNombreActual=""}})}ciSoloNumeros(t){return(t??"").toString().replace(/\D+/g,"").trim()}institucionHistorialNombre(t){let e=(this.institucionNombreActual??"").toString().trim();return e||(t??"").toString().trim()||"INSTITUCI\xD3N"}abrirHistorialDesdeEstudiante(t,e){e?.preventDefault?.(),e?.stopPropagation?.(),this.historialCiBusqueda=this.ciSoloNumeros(t?.CI),this.historialInstitucionNombre=this.institucionHistorialNombre(t?.NombreInstitucion),this.modalCalifhistoriasRef=this._tools.openModal(this.modalOtroComponentecalifhistorias,"xl")}parseGestion(t){let n=(t??"").toString().trim().match(/^(\d{4})(?:\s*\/\s*(\d+))?$/);if(!n)return{year:-1,sub:-1};let i=Number(n[1]??-1),l=n[2]?Number(n[2]):0;return{year:Number.isFinite(i)?i:-1,sub:Number.isFinite(l)?l:0}}pickUltimaInscripcion(t){return!Array.isArray(t)||t.length===0?null:[...t].sort((n,i)=>{let l=this.parseGestion(n?.Anio),m=this.parseGestion(i?.Anio);if(m.year!==l.year)return m.year-l.year;if(m.sub!==l.sub)return m.sub-l.sub;let v=new Date(n?.FechInsc??0).getTime(),f=new Date(i?.FechInsc??0).getTime();return(Number.isFinite(f)?f:0)-(Number.isFinite(v)?v:0)})[0]??null}abrirRegistroPagoDesdeEstudiante(t,e){if(e?.preventDefault?.(),e?.stopPropagation?.(),!this.habilitarSistemaPagosCarreras){this._tools.MostrarMensaje("warning","Sistema de pagos no habilitado para esta instituci\xF3n");return}let n=Number(t?.id??0);if(!n)return;let i=(t?.Ap_Paterno??"").toString().trim(),l=(t?.Ap_Materno??"").toString().trim(),m=(t?.Nombre??"").toString().trim(),v=`${i} ${l} ${m}`.replace(/\s+/g," ").trim();this.pagosEstudianteId=n,this.pagosNombreEstudiante=v||`#${n}`,this.pagosFotoEstudiante=t?.Foto??null,this.pagosSexoEstudiante=t?.Sexo??null,this._tools.MostrarMensajeLoading(),this._infoest.ObtenerinfoestudiantesifasPorEstudiante(n).subscribe({next:f=>{let C=f?.data??[],S=this.pickUltimaInscripcion(C);if(!S?.id){this._tools.MostrarMensaje("warning","El estudiante no tiene inscripciones para registrar pagos");return}this.pagosInfoId=Number(S.id);let y=(S?.Anio??"").toString().trim();this.pagosGestionPredeterminada=y||null,this.modalRegistrarpagosRef=this._tools.openModal(this.modalOtroComponenteRegistrarpagos,"xl"),this._tools.MostrarMensajeSuccess()},error:()=>{this._tools.MostrarMensajeError()}})}cargarOptionsDesdeControles(){let t=["SEXO","EXPEDIDO","ESTADO","ESPECIALIDAD","TIPO COLEGIO","GRADO DE COLEGIO","NIVEL EN COLEGIO","OCUPACIONES PADRES"];this._controles.ObtenerOptionsSelectPorCategorias(t).subscribe({next:e=>{this.sexoOptions=e?.SEXO||[],this.expedidoOptions=e?.EXPEDIDO||[],this.estadoOptions=e?.ESTADO||[],this.especialidadOptions=e?.ESPECIALIDAD||[],this.tipoColegioOptions=e?.["TIPO COLEGIO"]||[],this.nivelColegioOptions=e?.["NIVEL EN COLEGIO"]||[],this.gradoColegioOptions=e?.["GRADO DE COLEGIO"]||[],this.OcupacionOptions=e?.["OCUPACIONES PADRES"]||[]},error:()=>{this.sexoOptions=[],this.expedidoOptions=[],this.estadoOptions=[],this.especialidadOptions=[],this.tipoColegioOptions=[],this.nivelColegioOptions=[],this.gradoColegioOptions=[],this.OcupacionOptions=[]}})}abrirModalNuevoEstudiantesifas(){this.modalGestionestudiantesifasRef=this._tools.openModal(this.modalgestionestudiantesifas,"xl")}ngOnDestroy(){this.isEsperandoCapturaFoto&&this.cancelarEsperaCaptura(!0),this.detenerPollingCaptura(),this.detenerPollingVinculacion()}cargarVinculacionDesdeStorage(){let t=localStorage.getItem("lcch_capture_pairing_token");t&&(this.pairingToken=t,this.refrescarEstadoVinculacion(!1))}refrescarEstadoVinculacion(t){this.pairingToken&&this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:e=>{let n=e?.data?.status??this.pairingStatus;if(this.pairingStatus=n,n==="REVOKED"||n==="EXPIRED"){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null;return}t&&this._tools.MostrarMensaje("success","Vinculaci\xF3n actualizada")},error:e=>{e?.status===404&&(localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null)}})}abrirVinculacionCelular(){return $(this,null,function*(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida actual");return}this._tools.MostrarMensajeLoading();let t=()=>new Promise((e,n)=>{let i=()=>{this._pairing.crearVinculacion().subscribe({next:l=>{let m=l?.data?.token;if(!m)return n(new Error("No token"));this.pairingToken=m,this.pairingStatus=l?.data?.status??null,localStorage.setItem("lcch_capture_pairing_token",m),e(m)},error:l=>n(l)})};if(this.pairingToken){this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:l=>{let m=l?.data?.status??null;if(this.pairingStatus=m,m==="EXPIRED"||m==="REVOKED"){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null,i();return}e(this.pairingToken)},error:l=>{if(l?.status===404){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null,i();return}n(l)}});return}i()});try{let e=yield t(),n=this.router.serializeUrl(this.router.createUrlTree(["/captura-celular",e])),i=window.location.hostname,m=(i==="localhost"||i==="127.0.0.1")&&xe.frontendPublicBaseUrl?xe.frontendPublicBaseUrl:document.baseURI;this.pairingUrl=new URL(n,m).toString();try{this.pairingQrDataUrl=yield Yt.toDataURL(this.pairingUrl,{width:240,margin:1})}catch{this.pairingQrDataUrl=null}this.modalVincularCelularRef=this._tools.openModal(this.modalVincularCelular,"md"),this.modalVincularCelularRef.result.finally(()=>{this.detenerPollingVinculacion()}),this.iniciarPollingVinculacion(),this._tools.MostrarMensajeSuccess()}catch(e){console.log("ERROR creando vinculaci\xF3n",e),this._tools.MostrarMensajeError()}})}iniciarPollingVinculacion(){this.detenerPollingVinculacion(),this.pairingToken&&(this.pairingIntervalId=setInterval(()=>{this.pairingToken&&this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:t=>{let e=t?.data?.status;this.pairingStatus=e??this.pairingStatus,e==="LINKED"&&this.detenerPollingVinculacion()},error:()=>{}})},2e3))}detenerPollingVinculacion(){this.pairingIntervalId&&(clearInterval(this.pairingIntervalId),this.pairingIntervalId=null)}iniciarCapturaFotoPorCelular(){return $(this,null,function*(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida actual");return}if(!this.pairingToken||this.pairingStatus!=="LINKED"){this._tools.MostrarMensaje("info","Primero vincule el celular (QR)"),yield this.abrirVinculacionCelular();return}this._tools.MostrarMensajeLoading();let t=this.newestudiantesifas.get("id")?.value?Number(this.newestudiantesifas.get("id")?.value):null;this._pairing.solicitarCaptura(this.pairingToken,t,"Foto").subscribe({next:e=>{let n=e?.data?.token;if(!n){this._tools.MostrarMensajeError();return}this.capturaToken=n,this.capturaStatus=e?.data?.status??"PENDING",this.isEsperandoCapturaFoto=!0,this.iniciarPollingCaptura(),this._tools.MostrarMensajeSuccess()},error:e=>{console.log("ERROR solicitando captura",e),this._tools.MostrarMensajeError()}})})}iniciarPollingCaptura(){this.detenerPollingCaptura(),this.capturaToken&&(this.capturaIntervalId=setInterval(()=>{this.capturaToken&&this._capture.estadoSesion(this.capturaToken).subscribe({next:t=>{let e=t?.data?.status,n=t?.data?.file_path;if(this.capturaStatus=e??this.capturaStatus,e==="UPLOADED"&&n){let i=this.fotoTempPath;this.newestudiantesifas.patchValue({Foto:n}),this.fotoTempPath=n,i&&i!==n&&i!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(i),this.isUploadingFoto=!1,this.uploadProgressFoto=0,this.isEsperandoCapturaFoto=!1,this.detenerPollingCaptura(),this._tools.MostrarMensaje("success","Foto recibida desde el celular")}},error:()=>{}})},2e3))}detenerPollingCaptura(){this.capturaIntervalId&&(clearInterval(this.capturaIntervalId),this.capturaIntervalId=null)}cancelarEsperaCaptura(t=!1){let e=this.capturaStatus;this.detenerPollingCaptura(),this.capturaStatus=null,this.capturaToken=null,this.isEsperandoCapturaFoto=!1,this.pairingToken&&e!=="UPLOADED"&&this._pairing.cancelarCaptura(this.pairingToken).subscribe({next:()=>{t||this._tools.MostrarMensaje("info","Espera cancelada")},error:()=>{}})}abrirSelectorFoto(t){t.click()}onFotoDragOver(t){t.preventDefault(),this.isDraggingFoto=!0}onFotoDragLeave(t){t.preventDefault(),this.isDraggingFoto=!1}onFotoDrop(t){t.preventDefault(),this.isDraggingFoto=!1;let e=t.dataTransfer?.files;e&&this.handleFotoFiles(e)}onFotoFileSelected(t){let e=t.target,n=e.files;n&&this.handleFotoFiles(n),e.value=""}handleFotoFiles(t){let e=t.item(0);e&&(t.length>1&&this._tools.MostrarMensaje("warning","Solo se permite 1 archivo"),this.subirFoto(e))}subirFoto(t){this.isUploadingFoto=!0,this.uploadProgressFoto=0,this._tools.SubirArchivo(t,"Foto").subscribe({next:e=>{if(e.type===he.UploadProgress&&e.total){this.uploadProgressFoto=Math.round(e.loaded/e.total*100);return}if(e.type===he.Response){let i=e.body?.filePath;if(i){let l=this.fotoTempPath;this.newestudiantesifas.patchValue({Foto:i}),this.fotoTempPath=i,l&&l!==i&&l!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(l)}this.isUploadingFoto=!1}},error:e=>{console.error("Error subiendo foto",e),this.isUploadingFoto=!1,this.uploadProgressFoto=0,this._tools.MostrarMensajeError()}})}limpiarFotoTemporalSiCorresponde(){this.fotoTempPath&&this.fotoTempPath!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(this.fotoTempPath),this.fotoTempPath=null,this.fotoAnteriorPath=null,this.isDraggingFoto=!1,this.isUploadingFoto=!1,this.uploadProgressFoto=0}Cargarestudiantesifas(){this.isLoadingestudiantesifas=!0;let t=(this.filtertxtestudiantesifas??"").toString().trim(),e=t!==""&&!this.ordenManualestudiantesifas,n={page:this.paginaestudiantesifas,per_page:this.pageSizeestudiantesifas,search:t,search_mode:"any",relevance:e?1:0,sort_by:this.sortByColumnestudiantesifas,sort_dir:this.sortDirestudiantesifas};this._est.Obtenerestudiantesifas(n).subscribe({next:i=>{console.log("data estudiantes",i.data),this.estudiantesifas=i.data||[],this.collectionSizeestudiantesifas=i?.meta?.total??this.estudiantesifas.length;let l=i?.meta?.from;this.rowIndexBaseestudiantesifas=typeof l=="number"&&l>0?l-1:0,this.isLoadingestudiantesifas=!1},error:i=>{console.error("Error al cargar estudiantesifas",i),this.estudiantesifas=[],this.collectionSizeestudiantesifas=0,this.rowIndexBaseestudiantesifas=0,this.isLoadingestudiantesifas=!1}})}AgregarModificarestudiantesifas(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida de la foto");return}if(this.newestudiantesifas.invalid){this.ValidacionTodoElementoestudiantesifas(),this._tools.MostrarMensajeFrmIncompleto(),this.AnimacionCargabtnModalestudiantesifas=!1;return}else{this.AnimarCargaTablaestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!0,this._tools.MostrarMensajeLoading(),this.newestudiantesifasAnteriorAccion.setValue(this.newestudiantesifas.value);let t=this.newestudiantesifas.controls.id.value;console.log("INFO A PROCESAR",this.newestudiantesifas.value);let e=this.newestudiantesifas.get("Foto")?.value??null,n=this.fotoAnteriorPath;t?this._est.Modificarestudiantesifas(this.newestudiantesifas.value,this.newestudiantesifas.value.id).subscribe(i=>{console.log("SE MODIFICO CORRECTAMENTE estudiantesifas",i.data),n&&e&&n!==e&&this._tools.EliminarArchivo(n),this.Cargarestudiantesifas(),this.fotoTempPath=null,this.fotoAnteriorPath=null,this.resetestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!1,this._tools.MostrarMensajeSuccess()},i=>{let l=i?.status,m=i?.error?.message;l===409?this._tools.MensajeInformacion("CI duplicado",m||"Ya existe un estudiante con ese CI.","warning"):(console.log("ERROR AL MODIFICAR estudiantesifas",i),this._tools.MostrarMensajeError()),this.AnimacionCargabtnModalestudiantesifas=!1}):this._est.Agregarestudiantesifas(this.newestudiantesifas.value).subscribe(i=>{console.log("SE A\xD1ADIO CORRECTAMENTE estudiantesifas",i.data),this.Cargarestudiantesifas(),this.fotoTempPath=null,this.fotoAnteriorPath=null,this.resetestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!1,this._tools.MostrarMensajeSuccess()},i=>{let l=i?.status,m=i?.error?.message;l===409?this._tools.MensajeInformacion("CI duplicado",m||"Ya existe un estudiante con ese CI.","warning"):(console.log("ERROR AL A\xD1ADIR estudiantesifas",i),this._tools.MostrarMensajeError()),this.AnimacionCargabtnModalestudiantesifas=!1})}}Seleccionarestudiantesifas(t){if(this._tools.MostrarMensajeLoading(),t){if(!this.estudiantesifas.find(n=>n.id===t))return;this._est.Seleccionarestudiantesifas(t).subscribe(n=>{Object.keys(this.newestudiantesifas.controls).forEach(i=>{this.newestudiantesifas.controls[i].setValue(n.data[i])}),console.log("SELECCION DE estudiantesifas EXITOSA",this.newestudiantesifas.value),this.newestudiantesifasAnteriorAccion.setValue(this.newestudiantesifas.value),this.fotoAnteriorPath=this.newestudiantesifas.get("Foto")?.value??null,this.fotoTempPath=null,this.isUploadingFoto=!1,this.uploadProgressFoto=0,this.modalGestionestudiantesifasRef=this._tools.openModal(this.modalgestionestudiantesifas,"xl"),this._tools.MostrarMensajeSuccess()},n=>{console.log("ERROR AL SELECCIONAR estudiantesifas",n),this._tools.MostrarMensajeError()})}}Eliminarestudiantesifas(t){this._tools.mostrarMensajeConfirm("\xBFSEGURO QUE DESEA ELIMINAR?","SE ELIMINARA EL DATO Y NO SE PODR\xC1 RECUPERAR EL DATO","warning","SI, ESTOY SEGURO","NO").then(e=>{e&&(this._tools.MostrarMensajeLoading(),this._est.Eliminarestudiantesifas(t).subscribe(n=>{console.log(n.data),this.Cargarestudiantesifas(),this._tools.MostrarMensajeSuccess()},n=>{console.log("ERROR AL ELIMINAR estudiantesifas",n),this._tools.MostrarMensajeError()}))})}resetestudiantesifas(){this.isEsperandoCapturaFoto&&this.cancelarEsperaCaptura(!0),this.limpiarFotoTemporalSiCorresponde(),this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this._tools.closeModal(this.modalGestionestudiantesifasRef)}AutoCompletarLastestudiantesifas(){this.newestudiantesifas.setValue(this.newestudiantesifasAnteriorAccion.value),this.newestudiantesifas.patchValue({id:0}),console.log("listo",this.newestudiantesifas.value)}AnimarCargaTablaestudiantesifas(){this.estudiantesifas=[],this.isLoadingestudiantesifas=!0}ValidacionestudiantesifasxElemento(t){return this._tools.obtenerValidationClass(this.newestudiantesifas,t)}ValidacionTodoElementoestudiantesifas(){Object.values(this.newestudiantesifas.controls).forEach(t=>{t.markAsTouched(),t.markAsDirty()})}onPageSizeChangeestudiantesifas(){this.paginaestudiantesifas=1,this.Cargarestudiantesifas()}onPageChangeestudiantesifas(t){this.paginaestudiantesifas=t,this.Cargarestudiantesifas()}onSearchChangeestudiantesifas(){this.estudiantesifas=[],this.paginaestudiantesifas=1,this.ordenManualestudiantesifas=!1,this.Cargarestudiantesifas()}escapeHtml(t){return(t??"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}highlightCell(t){let e=(t??"").toString(),n=(this.filtertxtestudiantesifas??"").toString().trim();if(!n)return this.escapeHtml(e);let i=n.split(/\s+/).map(f=>f.trim()).filter(Boolean).sort((f,C)=>C.length-f.length);if(i.length===0)return this.escapeHtml(e);let l=this.escapeHtml(e),m=i.map(f=>this.escapeRegExp(f)).join("|"),v=new RegExp(m,"gi");return l.replace(v,f=>`<mark class="bg-warning text-dark fw-bold px-1 rounded">${f}</mark>`)}sortByestudiantesifas(t,e){e.preventDefault(),this.ordenManualestudiantesifas=!0,this.sortByColumnestudiantesifas===t?this.sortDirestudiantesifas=this.sortDirestudiantesifas==="asc"?"desc":"asc":(this.sortByColumnestudiantesifas=t,this.sortDirestudiantesifas="asc"),this.paginaestudiantesifas=1,this.Cargarestudiantesifas()}isSortedestudiantesifas(t){return this.sortByColumnestudiantesifas===t}getSortDirestudiantesifas(t){return this.sortByColumnestudiantesifas===t?this.sortDirestudiantesifas:null}VisualizarInfoEstudiante(t){this.estudianteSeleccionadoId=t;let e=Array.isArray(this.estudiantesifas)?this.estudiantesifas.find(v=>Number(v?.id)===Number(t)):null,n=(e?.Ap_Paterno??"").toString().trim(),i=(e?.Ap_Materno??"").toString().trim(),l=(e?.Nombre??"").toString().trim(),m=`${n} ${i} ${l}`.replace(/\s+/g," ").trim();this.estudianteSeleccionadoNombre=m||`#${t}`,this.estudianteSeleccionadoFoto=e?.Foto??null,this.estudianteSeleccionadoSexo=e?.Sexo??null}closeMenu(){this._tools.close()}abrirMenuestudiantesifas(t,e){t.preventDefault(),t.stopPropagation(),console.log("aS",e);let n=[{label:"\u270F Editar",action:()=>this.Seleccionarestudiantesifas(e.id)},{label:"\u{1F5D1}\uFE0F Eliminar",action:()=>this.Eliminarestudiantesifas(e.id)}];this._tools.open(t.clientX,t.clientY,n)}};Re.\u0275fac=function(e){return new(e||Re)(P(Me),P(Te),P(Ae),P(we),P(ye),P(nt),P(rt),P(lt),P(Ke))},Re.\u0275cmp=me({type:Re,selectors:[["app-estudiantesifas"]],viewQuery:function(e,n){if(e&1&&(D(Tl,7),D(Pl,7),D(Vl,7),D(Nl,7),D(kl,7)),e&2){let i;L(i=j())&&(n.modalOtroComponentecalifhistorias=i.first),L(i=j())&&(n.modalOtroComponenteRegistrarpagos=i.first),L(i=j())&&(n.modalVincularCelular=i.first),L(i=j())&&(n.modalEsperaFotoCelular=i.first),L(i=j())&&(n.modalgestionestudiantesifas=i.first)}},hostBindings:function(e,n){e&1&&g("click",function(){return n.closeMenu()},ze)},standalone:!1,decls:78,vars:26,consts:[["modalgestionestudiantesifas",""],["modalVincularCelular",""],["modalEsperaFotoCelular",""],["modalOtroComponenteinfoestudiantes",""],["modalOtroComponenteRegistrarpagos",""],["modalOtroComponentecalifhistorias",""],["sinFotoEst",""],["fotoInputEst",""],[1,"container","mt-4"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"lead","text-secondary","subtitulosGlobales"],[1,"button","col-sm-3","d-flex","justify-content-start"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","width","30px","height","30px"],["width","50px","height","50px",3,"options"],[1,"dir-part"],[1,"col-sm-3","ms-auto","d-flex","justify-content-end"],["title","PRESIONAR TECLA ENTER PARA REALIZAR BUSQUEDA",1,"input-group"],[1,"input-group-text"],["width","30px","height","30px",3,"options"],[1,"form-floating"],["type","text","placeholder","Buscar","title","PRESIONAR TECLA ENTER PARA REALIZAR BUSQUEDA",1,"form-control",3,"keyup.enter","ngModelChange","ngModel"],[1,"mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-sm","align-middle"],[1,""],[1,"text-center"],[2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["class","bi",3,"ngClass",4,"ngIf"],[4,"ngIf"],["style","cursor: pointer;",3,"contextmenu",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["previousLabel","Anterior","nextLabel","Siguiente",3,"pageChange","page","collectionSize","pageSize","maxSize","rotate","ellipses","boundaryLinks"],[1,"form-select",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","context-menu",3,"ngStyle",4,"ngIf"],[1,"bi",3,"ngClass"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[2,"cursor","pointer",3,"contextmenu"],[3,"innerHTML"],[1,"text-center","d-flex","justify-content-center","align-items-center",2,"gap","5px"],["title","Visualizar Inscripciones",1,"btn","btn-outline-light","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src",4,"ngIf"],["width","30px","height","35px",3,"options",4,"ngIf"],["title","Ver historial (califhistorias)",1,"btn","btn-outline-light","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["title","Registrar pagos del estudiante","class","btn btn-outline-light btn-sm d-flex justify-content-center align-items-center p-0","style","width: 40px; height: 40px; overflow: hidden;",3,"click","mouseenter","mouseleave",4,"ngIf"],["title","Modificar informaci\xF3n",1,"btn","btn-outline-warning","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["title","Eliminar informaci\xF3n",1,"btn","btn-outline-danger","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src"],["width","30px","height","35px",3,"options"],["title","Registrar pagos del estudiante",1,"btn","btn-outline-light","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],[3,"value"],[1,"modal-header"],[1,"modal-title"],["type","button","title","cerrar",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup"],[1,"mb-3","col-sm-6"],[1,"form-label"],[4,"ngIf","ngIfElse"],[1,"border","rounded","p-3","text-center",3,"dragover","dragleave","drop","click"],[1,"text-muted"],["class","mt-2",4,"ngIf"],["type","file","accept","image/*",1,"d-none",3,"change"],[1,"mt-2","d-flex","justify-content-start"],["type","button",1,"btn","btn-outline-secondary","btn-sm","me-2",3,"click","disabled"],[1,"badge","align-self-center","me-2",3,"ngClass"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],["class","alert alert-info py-2 mt-2 d-flex justify-content-between align-items-center",4,"ngIf"],["class","text-danger small",4,"ngIf"],[1,"form-floating","mb-3","col-sm-3"],["type","text","placeholder","","formControlName","Ap_Paterno",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"invalid-feedback"],["type","text","placeholder","","formControlName","Ap_Materno",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-6"],["type","text","placeholder","","formControlName","Nombre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","CI",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-2"],["formControlName","Expedido",1,"form-control",3,"ngClass"],["disabled","",3,"value"],[3,"value","disabled",4,"ngFor","ngForOf"],["formControlName","Sexo",1,"form-control",3,"ngClass"],["type","date","placeholder","","formControlName","FechaNac",1,"form-control",3,"change","ngClass"],["type","number","placeholder","","formControlName","Edad","readonly","","tabindex","-1",1,"form-control",2,"pointer-events","none","background-color","#e9ecef",3,"ngClass"],["type","text","placeholder","","formControlName","Celular",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-5"],["type","text","placeholder","","formControlName","Direccion",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-4"],["type","text","placeholder","","formControlName","Correo",1,"form-control",3,"ngClass"],[1,"mb-3","col-sm-4"],[1,"d-flex","align-items-end",2,"gap","10px"],[1,"form-floating","flex-grow-1"],["type","text","placeholder","","formControlName","Usuario",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","button","title","Generar Usuario","class","btn mouse-dir secondary d-flex align-items-center justify-content-center p-0","style","width: 58px; height: 58px;",3,"click",4,"ngIf"],["class","invalid-feedback d-block",4,"ngIf"],["placeholder","","formControlName","Contrasenia",1,"form-control",3,"type","ngClass"],["type","button","title","Mostrar/Ocultar Contrasenia","class","btn mouse-dir secondary d-flex align-items-center justify-content-center p-0","style","width: 58px; height: 58px;",3,"click",4,"ngIf"],["formControlName","Estado",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","Nombre_Padre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","OcupacionP",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","NumCelP",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Nombre_Madre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","OcupacionM",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","NumCelM",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","NColegio",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","TipoColegio",1,"form-control",3,"ngClass"],["formControlName","CNivel",1,"form-control",3,"ngClass"],["formControlName","CGrado",1,"form-control",3,"ngClass"],[1,"col-sm-12"],["placeholder","","formControlName","InformacionCompartidaIFAS",1,"quill-container-wrapper",3,"modules","ngClass"],[1,"modal-footer"],["class","button d-flex justify-content-start",4,"ngIf"],[1,"button","me-2"],["title","Cancelar y cerrar","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],[1,"button"],["class","btn mouse-dir success","title","Procesando informaci\xF3n",3,"disabled","click",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;","title","Accionar",3,"disabled","click",4,"ngIf"],["alt","Foto",1,"img-thumbnail",2,"width","140px","height","140px","object-fit","cover",3,"src"],[1,"mt-2"],[1,"progress"],["role","progressbar",1,"progress-bar"],[1,"alert","alert-info","py-2","mt-2","d-flex","justify-content-between","align-items-center"],[1,"fw-semibold"],[1,"small"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"text-danger","small"],[3,"value","disabled"],["type","button","title","Generar Usuario",1,"btn","mouse-dir","secondary","d-flex","align-items-center","justify-content-center","p-0",2,"width","58px","height","58px",3,"click"],["width","70px","height","70px",3,"options"],[1,"invalid-feedback","d-block"],["type","button","title","Mostrar/Ocultar Contrasenia",1,"btn","mouse-dir","secondary","d-flex","align-items-center","justify-content-center","p-0",2,"width","58px","height","58px",3,"click"],[1,"button","d-flex","justify-content-start"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Cancelar y cerrar",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Procesando informaci\xF3n",1,"btn","mouse-dir","success",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["title","Accionar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],[1,"mb-2","text-muted"],["class","d-flex justify-content-center",4,"ngIf"],[1,"mt-3"],[1,"small","text-muted"],["class","mt-3",4,"ngIf"],[1,"d-flex","justify-content-center"],["alt","QR",2,"max-width","260px","width","100%",3,"src"],["target","_blank","rel","noopener",3,"href"],[1,"mt-3","d-flex","justify-content-end"],[1,"context-menu",3,"ngStyle"],["class","context-item",3,"click",4,"ngFor","ngForOf"],[1,"context-item",3,"click"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[3,"modo","estudianteId","nombreEstudiante","fotoEstudiante","sexoEstudiante"],[3,"modo","infoId","estudianteId","nombreEstudiante","fotoEstudiante","sexoEstudiante","gestionPredeterminada"],[3,"modo","ciBusqueda","institucion"]],template:function(e,n){if(e&1){let i=b();o(0,"div",8)(1,"div",9)(2,"div",10)(3,"h1",11),c(4,"Gesti\xF3n de la Informaci\xF3n Personal de los estudiantes"),a(),o(5,"p",12),c(6,"Administra la informaci\xF3n Personal de los estudiantes de manera sencilla y eficiente"),a()()()(),o(7,"div",9)(8,"div",13)(9,"button",14),g("click",function(){return p(i),_(n.abrirModalNuevoEstudiantesifas())}),o(10,"span",15),x(11,"ng-lottie",16),a(),o(12,"span"),c(13,"A\xF1adir estudiantesifas "),a(),x(14,"span",17),a()(),o(15,"div",18)(16,"div",19)(17,"span",20),x(18,"ng-lottie",21),a(),o(19,"div",22)(20,"input",23),g("keyup.enter",function(){return p(i),_(n.onSearchChangeestudiantesifas())}),T("ngModelChange",function(m){return p(i),M(n.filtertxtestudiantesifas,m)||(n.filtertxtestudiantesifas=m),_(m)}),a(),o(21,"label"),c(22,"Buscar"),a()()()()(),o(23,"div",24)(24,"div",25)(25,"table",26)(26,"thead",27)(27,"tr")(28,"th",28),c(29,"#"),a(),o(30,"th",29),g("click",function(m){return p(i),_(n.sortByestudiantesifas("Ap_Paterno",m))}),c(31," Ap_Paterno "),h(32,Ol,1,4,"i",30),a(),o(33,"th",29),g("click",function(m){return p(i),_(n.sortByestudiantesifas("Ap_Materno",m))}),c(34," Ap_Materno "),h(35,Dl,1,4,"i",30),a(),o(36,"th",29),g("click",function(m){return p(i),_(n.sortByestudiantesifas("Nombre",m))}),c(37," Nombre "),h(38,Ll,1,4,"i",30),a(),o(39,"th",29),g("click",function(m){return p(i),_(n.sortByestudiantesifas("CI",m))}),c(40," CI "),h(41,jl,1,4,"i",30),a(),o(42,"th",29),g("click",function(m){return p(i),_(n.sortByestudiantesifas("Expedido",m))}),c(43," Exp. "),h(44,Bl,1,4,"i",30),a(),o(45,"th",29),g("click",function(m){return p(i),_(n.sortByestudiantesifas("Sexo",m))}),c(46," Sexo "),h(47,$l,1,4,"i",30),a(),o(48,"th",29),g("click",function(m){return p(i),_(n.sortByestudiantesifas("Edad",m))}),c(49," Edad "),h(50,Gl,1,4,"i",30),a(),o(51,"th",29),g("click",function(m){return p(i),_(n.sortByestudiantesifas("Estado",m))}),c(52," Estado "),h(53,Ul,1,4,"i",30),a(),o(54,"th",28),c(55,"ACCIONES"),a()()(),o(56,"tbody"),h(57,zl,5,1,"tr",31)(58,ql,3,1,"tr",31)(59,nc,33,18,"tr",32),a()()(),o(60,"div",33)(61,"ngb-pagination",34),T("pageChange",function(m){return p(i),M(n.paginaestudiantesifas,m)||(n.paginaestudiantesifas=m),_(m)}),g("pageChange",function(m){return p(i),_(n.onPageChangeestudiantesifas(m))}),a(),o(62,"select",35),T("ngModelChange",function(m){return p(i),M(n.pageSizeestudiantesifas,m)||(n.pageSizeestudiantesifas=m),_(m)}),g("change",function(){return p(i),_(n.onPageSizeChangeestudiantesifas())}),h(63,ac,2,2,"option",36),a()()(),h(64,wc,224,62,"ng-template",null,0,V)(66,Pc,14,3,"ng-template",null,1,V)(68,Vc,15,1,"ng-template",null,2,V)(70,kc,5,11,"div",37),W(71,"async"),h(72,Fc,6,5,"ng-template",null,3,V)(74,Rc,6,7,"ng-template",null,4,V)(76,Oc,6,3,"ng-template",null,5,V)}if(e&2){let i;r(11),d("options",n._tools.optionsAdicionar),r(7),d("options",n._tools.optionslupa),r(2),w("ngModel",n.filtertxtestudiantesifas),r(12),d("ngIf",n.isSortedestudiantesifas("Ap_Paterno")),r(3),d("ngIf",n.isSortedestudiantesifas("Ap_Materno")),r(3),d("ngIf",n.isSortedestudiantesifas("Nombre")),r(3),d("ngIf",n.isSortedestudiantesifas("CI")),r(3),d("ngIf",n.isSortedestudiantesifas("Expedido")),r(3),d("ngIf",n.isSortedestudiantesifas("Sexo")),r(3),d("ngIf",n.isSortedestudiantesifas("Edad")),r(3),d("ngIf",n.isSortedestudiantesifas("Estado")),r(4),d("ngIf",n.isLoadingestudiantesifas),r(),d("ngIf",!n.isLoadingestudiantesifas&&(!n.estudiantesifas||n.estudiantesifas.length===0)),r(),d("ngForOf",n.estudiantesifas),r(2),w("page",n.paginaestudiantesifas),d("collectionSize",n.collectionSizeestudiantesifas)("pageSize",n.pageSizeestudiantesifas)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),r(),w("ngModel",n.pageSizeestudiantesifas),r(),d("ngForOf",n.pageSizeOptionsestudiantesifas),r(7),d("ngIf",(i=Q(71,24,n.menuStateestudiantesifas$))==null?null:i.visible)}},dependencies:[_e,fe,ge,We,Je,Ce,Se,Xe,et,be,ve,Ze,Ee,tt,it,at,Ie,Pe,st,ct,Fe,Qe],encapsulation:2});var pt=Re;var Dc=[{path:"estudiantes",component:pt},{path:"asignarestudiantes",component:Ne},{path:"estudiantesinscritos",component:Fe}],de=class de{};de.\u0275fac=function(e){return new(e||de)},de.\u0275mod=qe({type:de}),de.\u0275inj=Ge({imports:[vt.forChild(Dc),vt]});var _t=de;var ue=class ue{};ue.\u0275fac=function(e){return new(e||ue)},ue.\u0275mod=qe({type:ue}),ue.\u0275inj=Ge({imports:[bt,At,_t,Rt,It,Nt]});var Xt=ue;export{Xt as TiemposinscripcionesModule};
