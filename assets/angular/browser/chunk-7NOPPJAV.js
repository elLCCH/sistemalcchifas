import{a as fe}from"./chunk-5YOBPPYD.js";import{a as ve}from"./chunk-YBOEBBAE.js";import{a as ge}from"./chunk-P5G66PID.js";import{a as O}from"./chunk-XDAG4MPO.js";import{b as be}from"./chunk-P4K6CI26.js";import{a as ue,b as _e}from"./chunk-NHQGIU22.js";import{b as pe}from"./chunk-KCTZUZJH.js";import{e as Z,g as ee,h as te,k as ie}from"./chunk-PWQJWZZZ.js";import"./chunk-5VY7FQQV.js";import{b as ne,c as ae,f as oe,k as re,m as le,r as se,s as ce,t as de,x as me}from"./chunk-ROSYCBC4.js";import{a as M}from"./chunk-JISGPZ2J.js";import{$b as Q,Aa as W,Dc as X,Ea as r,F as C,Fc as G,Gc as Y,Ib as z,Kb as N,Lb as d,Ma as y,Mb as w,Nb as _,Oc as J,Ra as B,Tb as S,U as A,Ub as E,Vb as I,Wa as u,Yc as K,Z as j,Zb as k,_b as H,ac as F,ba as U,ga as b,ha as g,i as x,ib as m,jb as o,kb as a,lb as p,pb as q,qb as $,sb as f,vb as v,w as R,xb as c}from"./chunk-SPNCLBHB.js";import{a as D}from"./chunk-GG76335P.js";var T=class T{constructor(t){this.http=t;this.base=`${M.apiUrl}${M.apiRoutes.lchaula.base}`}getByAula(t){return this.http.get(`${this.base}/aulas/${t}/publicaciones`).pipe(O())}create(t,e){return this.http.post(`${this.base}/aulas/${t}/publicaciones`,e).pipe(O())}delete(t,e){return this.http.delete(`${this.base}/aulas/${t}/publicaciones/${e}`).pipe(O()).pipe(i=>i)}};T.\u0275fac=function(e){return new(e||T)(U(K))},T.\u0275prov=j({token:T,factory:T.\u0275fac,providedIn:"root"});var L=T;var xe=()=>({standalone:!0}),Se=(n,t)=>({"bg-success-subtle text-success border":n,"bg-secondary-subtle text-secondary border":t}),Ee=(n,t,e)=>({"bg-info":n,"bg-success":t,"bg-warning":e}),Ie=(n,t,e)=>({"bg-info-subtle text-info":n,"bg-success-subtle text-success":t,"bg-warning-subtle text-warning":e}),Te=(n,t,e)=>({"bg-info":n,"bg-success":t,"bg-warning text-dark":e}),Ce=()=>[],we=n=>["/lchaula/tarea",n];function Me(n,t){n&1&&(o(0,"div",35),p(1,"app-spinner-local",36),a())}function Pe(n,t){if(n&1&&(o(0,"span"),d(1),a()),n&2){let e=c(2);r(),_("",e.aula.materia_sigla," \u2022 ")}}function ke(n,t){if(n&1&&(o(0,"span"),d(1),a()),n&2){let e=c(2);r(),w(e.aula.materia_curso)}}function Fe(n,t){if(n&1&&(o(0,"span"),d(1),a()),n&2){let e=c(2);r(),_(" \u2022 Paralelo ",e.aula.materia_paralelo)}}function Oe(n,t){if(n&1&&(o(0,"span"),d(1),a()),n&2){let e=c(2);r(),_(" \u2022 ",e.aula.materia_turno)}}function Le(n,t){if(n&1&&(o(0,"div",58),d(1),a()),n&2){let e=c(2);r(),w(e.aula.descripcion)}}function Ne(n,t){if(n&1){let e=f();o(0,"li",59)(1,"button",60),v("click",function(){let s=b(e).$implicit,l=c(2);return g(l.setTab(s.key))}),p(2,"i"),d(3),o(4,"span",61),d(5),a()()()}if(n&2){let e=t.$implicit,i=c(2);r(),z("active",i.selectedTab===e.key),r(),N(e.icon+" me-1"),r(),_("",e.label," "),r(2),w(i.getTabCount(e.key))}}function Ve(n,t){if(n&1){let e=f();o(0,"button",62),v("click",function(){b(e);let s=c(2);return g(s.openComposer())}),p(1,"i",63),d(2," Nueva publicaci\xF3n "),a()}}function De(n,t){n&1&&(o(0,"div",64),p(1,"i",65),o(2,"div",66),d(3,"No hay publicaciones en esta secci\xF3n."),a()())}function Re(n,t){if(n&1&&(o(0,"span",83),p(1,"i",84),d(2),a()),n&2){let e=c().$implicit,i=c(3);r(2),_("",i.formatFecha(e.fecha_publicacion||e.created_at)," ")}}function je(n,t){if(n&1){let e=f();o(0,"button",85),v("click",function(){b(e);let s=c().$implicit,l=c(3);return g(l.onDeletePublicacion(s))}),p(1,"i",86),a()}}function Ue(n,t){if(n&1&&(o(0,"div",87),p(1,"quill-editor",88),a()),n&2){let e=c().$implicit,i=c(3);r(),m("ngModel",e.descripcion)("modules",i.modulesQuillShow)("readOnly",!0)("ngModelOptions",k(4,xe))}}function We(n,t){if(n&1&&(o(0,"div",92),p(1,"i",96),o(2,"strong"),d(3,"Fecha:"),a(),d(4),a()),n&2){let e=c(2).$implicit,i=c(3);r(4),_(" ",i.formatFecha(e.tarea.fecha_entrega)," ")}}function Be(n,t){if(n&1&&(o(0,"div",89)(1,"div",90),u(2,We,5,1,"div",91),o(3,"div",92),p(4,"i",93),o(5,"strong"),d(6,"Puntaje m\xE1x:"),a(),d(7),a(),o(8,"a",94),p(9,"i",95),d(10),a()()()),n&2){let e=c().$implicit,i=c(3);r(2),m("ngIf",e.tarea==null?null:e.tarea.fecha_entrega),r(5),_(" ",e.tarea==null?null:e.tarea.puntaje_maximo," "),r(),m("routerLink",H(4,we,e.tarea.id)),r(2),_(" ",i.isAdminLike?"Revisar entregas":"Ver / Entregar tarea"," ")}}function qe(n,t){if(n&1){let e=f();o(0,"button",108),v("click",function(){b(e);let s=c(2).$implicit,l=c(2).$implicit,h=c(3);return g(h.deleteArchivo(s.archivo.id,l.id))}),p(1,"i",86),a()}}function $e(n,t){if(n&1&&(o(0,"span",102)(1,"a",103),p(2,"i",104),o(3,"span",105),d(4),a(),p(5,"i",106),a(),u(6,qe,2,0,"button",107),a()),n&2){let e=c().$implicit,i=c(5);r(),m("href",i.publicBaseUrl+((e==null||e.archivo==null?null:e.archivo.ruta)||"")+"/"+((e==null||e.archivo==null?null:e.archivo.nombre_almacenado)||""),W),r(3),w((e==null||e.archivo==null?null:e.archivo.nombre_original)||"archivo"),r(2),m("ngIf",i.isAdminLike)}}function ze(n,t){if(n&1&&(q(0),u(1,$e,7,3,"span",101),$()),n&2){let e=t.$implicit;r(),m("ngIf",e==null||e.archivo==null?null:e.archivo.ruta)}}function He(n,t){if(n&1&&(o(0,"div",97)(1,"div",98),p(2,"i",22),d(3),a(),o(4,"div",99),u(5,ze,2,1,"ng-container",100),a()()),n&2){let e=c().$implicit,i=c(3);r(3),_("Adjuntos (",(i.archivosPorPublicacion[e.id]||k(2,Ce)).length,") "),r(2),m("ngForOf",i.archivosPorPublicacion[e.id])}}function Qe(n,t){if(n&1){let e=f();o(0,"div",109)(1,"div",23),v("dragover",function(s){b(e);let l=c(4);return g(l.onDragOver(s))})("dragleave",function(s){b(e);let l=c(4);return g(l.onDragLeave(s))})("drop",function(s){b(e);let l=c().$implicit,h=c(3);return g(h.onDropPublicacion(l.id,s))}),p(2,"i",24),o(3,"div",25),d(4,"Arrastra archivos aqu\xED o"),a(),o(5,"label",110),p(6,"i",27),d(7," Seleccionar archivos "),a(),o(8,"input",111),v("change",function(s){b(e);let l=c().$implicit,h=c(3);return g(h.onUploadPublicacionFiles(l.id,s))}),a()()()}if(n&2){let e=c().$implicit;r(5),m("for","upload_pub_"+e.id),r(3),m("id","upload_pub_"+e.id)}}function Xe(n,t){if(n&1&&(o(0,"div",38)(1,"div",69),p(2,"div",70),o(3,"div",71)(4,"div",72)(5,"div",73),p(6,"i",74),a(),o(7,"div",75)(8,"div",76)(9,"span",48),d(10),a(),u(11,Re,3,1,"span",77)(12,je,2,0,"button",78),a(),o(13,"h5",79),d(14),a(),u(15,Ue,2,5,"div",80)(16,Be,11,6,"div",81)(17,He,6,3,"div",82)(18,Qe,9,2,"div",29),a()()()()()),n&2){let e=t.$implicit,i=c(3);r(2),m("ngClass",F(13,Ee,e.tipo==="ANUNCIO",e.tipo==="MATERIAL",e.tipo==="TAREA")),r(3),m("ngClass",F(17,Ie,e.tipo==="ANUNCIO",e.tipo==="MATERIAL",e.tipo==="TAREA")),r(),N(i.getPublicacionIcon(e.tipo)),r(3),m("ngClass",F(21,Te,e.tipo==="ANUNCIO",e.tipo==="MATERIAL",e.tipo==="TAREA")),r(),_(" ",e.tipo," "),r(),m("ngIf",e.fecha_publicacion||e.created_at),r(),m("ngIf",i.isAdminLike),r(2),w(e.titulo),r(),m("ngIf",e.descripcion),r(),m("ngIf",e.tarea),r(),m("ngIf",(i.archivosPorPublicacion[e.id]||k(25,Ce)).length>0),r(),m("ngIf",i.isAdminLike)}}function Ge(n,t){if(n&1&&(o(0,"div",67),u(1,Xe,19,26,"div",68),a()),n&2){let e=c(2);r(),m("ngForOf",e.publicacionesFiltradas)}}function Ye(n,t){if(n&1&&(o(0,"div")(1,"div",37)(2,"div",38)(3,"div",39)(4,"a",40),p(5,"i",41),a(),o(6,"div",42)(7,"h1",43),d(8),a(),o(9,"p",44),u(10,Pe,2,1,"span",2)(11,ke,2,1,"span",2)(12,Fe,2,1,"span",2)(13,Oe,2,1,"span",2),a()(),o(14,"div",45)(15,"span",46),p(16,"i",47),d(17),a(),o(18,"span",48),d(19),a()()(),u(20,Le,2,1,"div",49),p(21,"hr",50),a()(),o(22,"div",51)(23,"div",52)(24,"ul",53),u(25,Ne,6,6,"li",54),a(),u(26,Ve,3,0,"button",55),a()(),u(27,De,4,0,"div",56)(28,Ge,2,1,"div",57),a()),n&2){let e=c();r(8),_(" ",(e.aula==null?null:e.aula.materia_nombre)||e.aula.nombre||"Aula #"+e.aula.id," "),r(2),m("ngIf",e.aula==null?null:e.aula.materia_sigla),r(),m("ngIf",e.aula==null?null:e.aula.materia_curso),r(),m("ngIf",e.aula==null?null:e.aula.materia_paralelo),r(),m("ngIf",e.aula==null?null:e.aula.materia_turno),r(4),_("",e.participantesCount," participantes "),r(),m("ngClass",Q(13,Se,(e.aula.estado||"").toUpperCase()==="ACTIVO",(e.aula.estado||"").toUpperCase()!=="ACTIVO")),r(),_(" ",e.aula.estado||"SIN ESTADO"," "),r(),m("ngIf",e.aula.descripcion),r(5),m("ngForOf",e.tabs),r(),m("ngIf",e.isAdminLike),r(),m("ngIf",e.publicacionesFiltradas.length===0),r(),m("ngIf",e.publicacionesFiltradas.length>0)}}function Je(n,t){if(n&1){let e=f();o(0,"span",115),p(1,"i",104),d(2),o(3,"button",116),v("click",function(){let s=b(e).index,l=c(2);return g(l.removeComposerFile(s))}),a()()}if(n&2){let e=t.$implicit;r(2),_(" ",e.name," ")}}function Ke(n,t){if(n&1&&(o(0,"div",109)(1,"div",112),d(2),a(),o(3,"div",113),u(4,Je,4,1,"span",114),a()()),n&2){let e=c();r(2),_("",e.composerFiles.length," archivo(s) seleccionados:"),r(2),m("ngForOf",e.composerFiles)}}function Ze(n,t){if(n&1){let e=f();o(0,"div",120)(1,"div",121)(2,"input",130),I("ngModelChange",function(s){b(e);let l=c(2);return E(l.form.tarea.limite_tardia_horas,s)||(l.form.tarea.limite_tardia_horas=s),g(s)}),a(),o(3,"label",131),d(4,"L\xEDmite tard\xEDa (horas)"),a()()()}if(n&2){let e=c(2);r(2),S("ngModel",e.form.tarea.limite_tardia_horas)}}function et(n,t){if(n&1){let e=f();o(0,"div",117)(1,"div",118),p(2,"i",119),d(3,"Configuraci\xF3n de tarea"),a(),o(4,"div",67)(5,"div",120)(6,"div",121)(7,"input",122),I("ngModelChange",function(s){b(e);let l=c();return E(l.form.tarea.fecha_entrega,s)||(l.form.tarea.fecha_entrega=s),g(s)}),a(),o(8,"label",123),d(9,"Fecha de entrega"),a()()(),o(10,"div",120)(11,"div",121)(12,"input",124),I("ngModelChange",function(s){b(e);let l=c();return E(l.form.tarea.puntaje_maximo,s)||(l.form.tarea.puntaje_maximo=s),g(s)}),a(),o(13,"label",125),d(14,"Puntaje m\xE1ximo"),a()()(),o(15,"div",120)(16,"div",126)(17,"input",127),I("ngModelChange",function(s){b(e);let l=c();return E(l.form.tarea.permitir_entrega_tardia,s)||(l.form.tarea.permitir_entrega_tardia=s),g(s)}),a(),o(18,"label",128),d(19,"Permitir entrega tard\xEDa"),a()()(),u(20,Ze,5,1,"div",129),a()()}if(n&2){let e=c();r(7),S("ngModel",e.form.tarea.fecha_entrega),r(5),S("ngModel",e.form.tarea.puntaje_maximo),r(5),S("ngModel",e.form.tarea.permitir_entrega_tardia),r(3),m("ngIf",e.form.tarea.permitir_entrega_tardia)}}var P=class P{constructor(t,e,i,s,l,h,V){this.route=t;this.aulasService=e;this.publicacionesService=i;this.archivosService=s;this.auth=l;this.toast=h;this.router=V;this.publicBaseUrl=M.ruta||M.apiUrl||"";this.loading=!1;this.aulaId=0;this.isAdminLike=!1;this.aula=null;this.participantesCount=0;this.publicaciones=[];this.modulesQuillEdicion={toolbar:[["bold","italic","underline","strike"],[{align:[]}],[{size:["small",!1,"large"]}],[{color:[]},{background:[]}],[{font:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","video"],["clean"]]};this.modulesQuillShow={toolbar:!1};this.tabs=[{key:"MIXTO",label:"Todo",icon:"bi bi-grid"},{key:"ANUNCIO",label:"Anuncios",icon:"bi bi-megaphone"},{key:"MATERIAL",label:"Material",icon:"bi bi-folder"},{key:"TAREA",label:"Tareas",icon:"bi bi-journal-check"}];this.selectedTab="MIXTO";this.form={tipo:"ANUNCIO",titulo:"",descripcion:"",tarea:{fecha_entrega:"",permitir_entrega_tardia:!1,limite_tardia_horas:null,puntaje_maximo:100}};this.composerFiles=[];this.archivosPorPublicacion={}}ngOnInit(){let t=Number(this.route.snapshot.paramMap.get("materiaId")||0);if(t>0){this.resolveByMateria(t);return}if(this.aulaId=Number(this.route.snapshot.paramMap.get("id")||0),!this.aulaId){this.toast.error("Aula invalida");return}this.auth.revisarSiesAdmin().subscribe({next:e=>this.isAdminLike=e,error:()=>this.isAdminLike=!1}),this.load()}resolveByMateria(t){this.loading=!0,this.aulasService.getByMateria(t,{auto_create:!0}).subscribe({next:e=>{let i=Number(e?.aula?.id);i>0?this.router.navigate(["/lchaula/aula",i],{replaceUrl:!0}):(this.loading=!1,this.toast.error("No se encontro el aula para esta materia"))},error:()=>{this.loading=!1,this.toast.error("Error al buscar el aula de la materia")}})}setTab(t){this.selectedTab=t}getTabCount(t){return t==="MIXTO"?this.publicaciones.length:this.publicaciones.filter(e=>(e.tipo||"").toUpperCase()===t).length}getPublicacionSortTime(t){let e=t.fecha_publicacion||t.created_at||"",i=Date.parse(e);return Number.isFinite(i)?i:0}get publicacionesOrdenadas(){return[...this.publicaciones].sort((t,e)=>this.getPublicacionSortTime(e)-this.getPublicacionSortTime(t))}get publicacionesFiltradas(){let t=this.publicacionesOrdenadas;return this.selectedTab==="MIXTO"?t:t.filter(e=>(e.tipo||"").toUpperCase()===this.selectedTab)}getPublicacionIcon(t){switch((t||"").toUpperCase()){case"ANUNCIO":return"bi bi-megaphone-fill";case"MATERIAL":return"bi bi-folder-fill";case"TAREA":return"bi bi-journal-check";default:return"bi bi-file-text"}}load(){this.loading=!0,this.aulasService.getById(this.aulaId).pipe(A(t=>{this.aula=t.aula,this.participantesCount=t.participantes_count}),C(t=>(this.loading=!1,t.status===403||t.status===401?(this.toast.error("No tienes acceso a esta aula"),this.router.navigate(["/inicio"])):this.toast.error(t.message),x))).subscribe(()=>this.loadPublicaciones())}loadPublicaciones(){this.publicacionesService.getByAula(this.aulaId).pipe(A(t=>{this.publicaciones=t,this.loading=!1,this.publicaciones.forEach(e=>this.loadArchivosPublicacion(e.id))}),C(t=>(this.loading=!1,this.toast.error(t.message),x))).subscribe()}loadArchivosPublicacion(t){this.archivosService.list("PUBLICACION",t).pipe(A(e=>this.archivosPorPublicacion[t]=e),C(()=>x)).subscribe()}openComposer(){if(!this.composerModal){let t=document.getElementById("composerModal");t&&(this.composerModal=new bootstrap.Modal(t))}this.composerModal?.show()}closeComposer(){this.composerModal?.hide()}onSelectComposerFiles(t){let e=t.target;if(e.files)for(let i=0;i<e.files.length;i++)this.composerFiles.push(e.files[i])}removeComposerFile(t){this.composerFiles.splice(t,1)}onCreatePublicacion(){let t={tipo:this.form.tipo,titulo:this.form.titulo,descripcion:this.form.descripcion};this.form.tipo==="TAREA"&&(t.tarea=D({},this.form.tarea)),this.publicacionesService.create(this.aulaId,t).pipe(A(e=>{if(this.toast.success("Publicacion creada"),this.composerFiles.length>0){let i=e?.id||e?.data?.id;i&&this.uploadMultipleFiles(this.composerFiles,"PUBLICACION",i)}this.resetForm(),this.closeComposer(),this.loadPublicaciones()}),C(e=>(this.toast.error(e.message),x))).subscribe()}resetForm(){this.form={tipo:"ANUNCIO",titulo:"",descripcion:"",tarea:{fecha_entrega:"",permitir_entrega_tardia:!1,limite_tardia_horas:null,puntaje_maximo:100}},this.composerFiles=[]}onUploadPublicacionFiles(t,e){let i=e.target;if(!i.files||i.files.length===0)return;let s=Array.from(i.files);this.uploadMultipleFiles(s,"PUBLICACION",t),i.value=""}onDragOver(t){t.preventDefault(),t.stopPropagation(),t.currentTarget?.classList.add("drop-zone-active")}onDragLeave(t){t.preventDefault(),t.stopPropagation(),t.currentTarget?.classList.remove("drop-zone-active")}onDropPublicacion(t,e){e.preventDefault(),e.stopPropagation(),e.currentTarget?.classList.remove("drop-zone-active");let i=e.dataTransfer?.files;i&&i.length>0&&this.uploadMultipleFiles(Array.from(i),"PUBLICACION",t)}onDropComposer(t){t.preventDefault(),t.stopPropagation(),t.currentTarget?.classList.remove("drop-zone-active");let e=t.dataTransfer?.files;if(e&&e.length>0)for(let i=0;i<e.length;i++)this.composerFiles.push(e[i])}formatFecha(t){if(!t)return"";let e=new Date(t);if(isNaN(e.getTime()))return String(t);let i=String(e.getDate()).padStart(2,"0"),s=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear(),h=String(e.getHours()).padStart(2,"0"),V=String(e.getMinutes()).padStart(2,"0");return`${i}/${s}/${l} ${h}:${V}`}uploadMultipleFiles(t,e,i){let s=t.map(l=>this.archivosService.upload(l,e,i));R(s).pipe(A(()=>{this.toast.success(t.length+" archivo(s) subido(s)"),this.loadArchivosPublicacion(i)}),C(l=>(this.toast.error(l.message||"Error al subir archivos"),this.loadArchivosPublicacion(i),x))).subscribe()}deleteArchivo(t,e){confirm("\xBFEliminar este archivo?")&&this.archivosService.deleteArchivo(t).pipe(A(()=>{this.toast.success("Archivo eliminado"),this.loadArchivosPublicacion(e)}),C(i=>(this.toast.error(i.message||"Error al eliminar archivo"),x))).subscribe()}onDeletePublicacion(t){confirm('Eliminar publicacion "'+t.titulo+'"?')&&this.publicacionesService.delete(this.aulaId,t.id).pipe(A(()=>{this.toast.success("Publicacion eliminada"),this.loadPublicaciones()}),C(e=>(this.toast.error(e.message),x))).subscribe()}};P.\u0275fac=function(e){return new(e||P)(y(Z),y(ge),y(L),y(fe),y(pe),y(be),y(ee))},P.\u0275cmp=B({type:P,selectors:[["app-lchaula-aula"]],decls:50,vars:11,consts:[[1,"container","mt-4"],["class","py-4 text-black",4,"ngIf"],[4,"ngIf"],["id","composerModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],[1,"bi","bi-pencil-square","me-2"],["type","button","data-bs-dismiss","modal",1,"btn-close","btn-close-white"],[1,"modal-body"],[1,"form-floating","mb-3"],["id","formTipo",1,"form-select",3,"ngModelChange","ngModel"],["value","ANUNCIO"],["value","MATERIAL"],["value","TAREA"],["for","formTipo"],["type","text","id","formTitulo","placeholder","Titulo de la publicacion",1,"form-control",3,"ngModelChange","ngModel"],["for","formTitulo"],[1,"mb-3"],[1,"form-label","small","text-muted"],["placeholder","Escribe aqui el contenido...",1,"quill-container-wrapper",3,"ngModelChange","ngModel","ngModelOptions","modules"],[1,"bi","bi-paperclip","me-1"],[1,"drop-zone","p-3","border","border-2","border-dashed","rounded-3","text-center",3,"dragover","dragleave","drop"],[1,"bi","bi-cloud-arrow-up","fs-4","text-primary"],[1,"small","text-muted","mt-1"],["for","composer_files_input",1,"btn","btn-sm","btn-outline-primary","mt-1"],[1,"bi","bi-upload","me-1"],["id","composer_files_input","type","file","multiple","",1,"d-none",3,"change"],["class","mt-2",4,"ngIf"],["class","border rounded-3 p-3 bg-light",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"bi","bi-send","me-1"],[1,"py-4","text-black"],["textShow","Cargando aula..."],[1,"row","mb-4"],[1,"col-12"],[1,"d-flex","align-items-center","gap-3","mb-2"],["routerLink","/lchaula","title","Volver a mis aulas",1,"btn","btn-sm","btn-outline-secondary","rounded-circle"],[1,"bi","bi-arrow-left"],[1,"flex-grow-1"],[1,"display-6","fw-bold","titulosGlobales","mb-0"],[1,"lead","text-secondary","subtitulosGlobales","mb-0"],[1,"text-end","d-none","d-md-block"],[1,"badge","bg-primary-subtle","text-primary","border","me-1"],[1,"bi","bi-people","me-1"],[1,"badge",3,"ngClass"],["class","text-muted small ms-5 ps-2",4,"ngIf"],[1,"mt-3","mb-0"],[1,"row","mb-3"],[1,"col-12","d-flex","flex-wrap","align-items-center","justify-content-between","gap-2"],["role","tablist",1,"nav","nav-pills","gap-1"],["class","nav-item",4,"ngFor","ngForOf"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["class","text-center py-5",4,"ngIf"],["class","row g-3",4,"ngIf"],[1,"text-muted","small","ms-5","ps-2"],[1,"nav-item"],[1,"nav-link","py-1","px-3",3,"click"],[1,"badge","bg-white","text-dark","ms-1","border",2,"font-size",".7rem"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"text-center","py-5"],[1,"bi","bi-journal-text","display-1","text-muted","opacity-50"],[1,"text-muted","mt-3"],[1,"row","g-3"],["class","col-12",4,"ngFor","ngForOf"],[1,"card","shadow-sm","border-0","pub-card"],[1,"pub-type-bar",3,"ngClass"],[1,"card-body"],[1,"d-flex","align-items-start","gap-3"],[1,"pub-icon","rounded-circle","d-flex","align-items-center","justify-content-center","flex-shrink-0",3,"ngClass"],[2,"font-size","1.3rem"],[1,"flex-grow-1","overflow-hidden"],[1,"d-flex","flex-wrap","align-items-center","gap-2","mb-1"],["class","text-muted small",4,"ngIf"],["class","btn btn-sm btn-outline-danger ms-auto","title","Eliminar publicaci\xF3n",3,"click",4,"ngIf"],[1,"fw-bold","mb-2"],["class","pub-description mb-3",4,"ngIf"],["class","border rounded-3 p-3 mb-3 bg-light",4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"text-muted","small"],[1,"bi","bi-clock","me-1"],["title","Eliminar publicaci\xF3n",1,"btn","btn-sm","btn-outline-danger","ms-auto",3,"click"],[1,"bi","bi-trash"],[1,"pub-description","mb-3"],[1,"quill-readonly-wrapper",3,"ngModel","modules","readOnly","ngModelOptions"],[1,"border","rounded-3","p-3","mb-3","bg-light"],[1,"d-flex","flex-wrap","align-items-center","gap-3"],["class","small",4,"ngIf"],[1,"small"],[1,"bi","bi-star","text-warning","me-1"],[1,"btn","btn-sm","btn-outline-primary","ms-auto",3,"routerLink"],[1,"bi","bi-box-arrow-in-right","me-1"],[1,"bi","bi-calendar-event","text-danger","me-1"],[1,"mb-2"],[1,"fw-semibold","small","mb-2"],[1,"d-flex","flex-wrap","gap-2"],[4,"ngFor","ngForOf"],["class","d-inline-flex align-items-center gap-1",4,"ngIf"],[1,"d-inline-flex","align-items-center","gap-1"],["target","_blank","rel","noopener",1,"btn","btn-sm","btn-outline-secondary","d-inline-flex","align-items-center","gap-1",3,"href"],[1,"bi","bi-file-earmark"],[1,"text-truncate",2,"max-width","180px"],[1,"bi","bi-download"],["class","btn btn-sm btn-outline-danger px-1 py-0","title","Eliminar archivo",3,"click",4,"ngIf"],["title","Eliminar archivo",1,"btn","btn-sm","btn-outline-danger","px-1","py-0",3,"click"],[1,"mt-2"],[1,"btn","btn-sm","btn-outline-primary","mt-1",3,"for"],["type","file","multiple","",1,"d-none",3,"change","id"],[1,"small","text-muted","mb-1"],[1,"d-flex","flex-wrap","gap-1"],["class","badge bg-light text-dark border d-inline-flex align-items-center gap-1",4,"ngFor","ngForOf"],[1,"badge","bg-light","text-dark","border","d-inline-flex","align-items-center","gap-1"],[1,"btn-close","btn-close-sm",2,"font-size",".5rem",3,"click"],[1,"border","rounded-3","p-3","bg-light"],[1,"fw-semibold","mb-3"],[1,"bi","bi-gear","me-1"],[1,"col-md-6"],[1,"form-floating"],["type","datetime-local","id","formDeadline",1,"form-control",3,"ngModelChange","ngModel"],["for","formDeadline"],["type","number","id","formPuntaje",1,"form-control",3,"ngModelChange","ngModel"],["for","formPuntaje"],[1,"form-check","mt-2"],["type","checkbox","id","formTardia",1,"form-check-input",3,"ngModelChange","ngModel"],["for","formTardia",1,"form-check-label"],["class","col-md-6",4,"ngIf"],["type","number","id","formLimite",1,"form-control",3,"ngModelChange","ngModel"],["for","formLimite"]],template:function(e,i){e&1&&(o(0,"div",0),u(1,Me,2,0,"div",1)(2,Ye,29,16,"div",2),a(),o(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),p(8,"i",8),d(9,"Nueva publicaci\xF3n"),a(),p(10,"button",9),a(),o(11,"div",10)(12,"div",11)(13,"select",12),I("ngModelChange",function(l){return E(i.form.tipo,l)||(i.form.tipo=l),l}),o(14,"option",13),d(15,"ANUNCIO"),a(),o(16,"option",14),d(17,"MATERIAL"),a(),o(18,"option",15),d(19,"TAREA"),a()(),o(20,"label",16),d(21,"Tipo de publicaci\xF3n"),a()(),o(22,"div",11)(23,"input",17),I("ngModelChange",function(l){return E(i.form.titulo,l)||(i.form.titulo=l),l}),a(),o(24,"label",18),d(25,"T\xEDtulo"),a()(),o(26,"div",19)(27,"label",20),d(28,"Descripci\xF3n / Contenido"),a(),o(29,"quill-editor",21),I("ngModelChange",function(l){return E(i.form.descripcion,l)||(i.form.descripcion=l),l}),a()(),o(30,"div",19)(31,"label",20),p(32,"i",22),d(33,"Archivos adjuntos (opcional) "),a(),o(34,"div",23),v("dragover",function(l){return i.onDragOver(l)})("dragleave",function(l){return i.onDragLeave(l)})("drop",function(l){return i.onDropComposer(l)}),p(35,"i",24),o(36,"div",25),d(37,"Arrastra archivos aqu\xED o"),a(),o(38,"label",26),p(39,"i",27),d(40," Seleccionar archivos "),a(),o(41,"input",28),v("change",function(l){return i.onSelectComposerFiles(l)}),a()(),u(42,Ke,5,2,"div",29),a(),u(43,et,21,4,"div",30),a(),o(44,"div",31)(45,"button",32),d(46,"Cancelar"),a(),o(47,"button",33),v("click",function(){return i.onCreatePublicacion()}),p(48,"i",34),d(49," Publicar "),a()()()()()),e&2&&(r(),m("ngIf",i.loading),r(),m("ngIf",!i.loading&&i.aula),r(11),S("ngModel",i.form.tipo),r(10),S("ngModel",i.form.titulo),r(6),S("ngModel",i.form.descripcion),m("ngModelOptions",k(10,xe))("modules",i.modulesQuillEdicion),r(13),m("ngIf",i.composerFiles.length>0),r(),m("ngIf",i.form.tipo==="TAREA"),r(4),m("disabled",!i.form.titulo.trim()))},dependencies:[J,X,G,Y,me,ce,de,ae,le,ne,se,oe,re,ie,te,ve,_e,ue],styles:["[_nghost-%COMP%]{display:block}.pub-card[_ngcontent-%COMP%]{position:relative;overflow:hidden;transition:box-shadow .2s ease}.pub-card[_ngcontent-%COMP%]:hover{box-shadow:0 .5rem 1.5rem #0000001f!important}.pub-type-bar[_ngcontent-%COMP%]{height:4px;width:100%}.pub-icon[_ngcontent-%COMP%]{width:44px;height:44px;min-width:44px}.pub-description   [_nghost-%COMP%]     .ql-container{border:none!important;font-size:inherit}.pub-description   [_nghost-%COMP%]     .ql-editor{padding:0;min-height:auto}.quill-readonly-wrapper   [_nghost-%COMP%]     .ql-container{border:none!important}.quill-readonly-wrapper   [_nghost-%COMP%]     .ql-editor{padding:0;min-height:auto}.quill-container-wrapper   [_nghost-%COMP%]     .ql-toolbar{border-radius:.375rem .375rem 0 0}.quill-container-wrapper   [_nghost-%COMP%]     .ql-container{border-radius:0 0 .375rem .375rem;min-height:120px}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:var(--bs-primary)}.drop-zone[_ngcontent-%COMP%]{border-color:#ced4da!important;background:#fafbfc;cursor:pointer;transition:border-color .2s,background .2s}.drop-zone[_ngcontent-%COMP%]:hover, .drop-zone.drop-zone-active[_ngcontent-%COMP%]{border-color:var(--bs-primary)!important;background:rgba(var(--bs-primary-rgb, 13, 110, 253),.06)}.border-dashed[_ngcontent-%COMP%]{border-style:dashed!important}"]});var he=P;export{he as AulaComponent};
