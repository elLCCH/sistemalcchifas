import{a as c}from"./chunk-OQPWVW4O.js";import{C as i,O as l,R as n,dc as p,kc as u,o,q as a}from"./chunk-TNNFIFGQ.js";var e=class e{constructor(t,r){this.http=t;this.router=r;this.ruta=c.ruta}loginConLaravel(t){return this.http.post(`${this.ruta}api/v1/auth/login`,t)}logout(){let t=localStorage.getItem("token");console.log("valorToken: ",t);var r={token:t};t?this.http.post(this.ruta+"api/v1/auth/logout",r).subscribe(s=>{localStorage.removeItem("token"),this.router.navigate(["/auth/login"])},s=>{console.error("Error al cerrar sesi\xF3n:",s)}):this.router.navigate(["/auth/login"])}pedirPerfil(){let t=localStorage.getItem("token");return this.http.get(`${this.ruta}api/v1/auth/user`,{headers:{Authorization:`Bearer ${t}`}})}cambiarClave(t){let r=localStorage.getItem("token");return this.http.post(`${this.ruta}api/v1/auth/cambiar-clave`,t,{headers:{Authorization:`Bearer ${r}`}})}resetPass(t){return this.http.post(`${this.ruta}api/reset-password`,t)}revisarSiesAdmin(){let t=localStorage.getItem("token");return t?this.http.post(`${this.ruta}api/verify-token`,{token:t}).pipe(a(r=>!!(r&&r.name!="ESTUDIANTE")),i(r=>o(!1))):o(!1)}revisarSiEsSuperAdmin(){let t=localStorage.getItem("token");return t?this.http.post(`${this.ruta}api/verify-token`,{token:t}).pipe(a(r=>!!(r&&r.name==="LCCH")),i(()=>o(!1))):o(!1)}};e.\u0275fac=function(r){return new(r||e)(n(p),n(u))},e.\u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"});var h=e;export{h as a};
