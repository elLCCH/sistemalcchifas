import{b as se}from"./chunk-52NN7TSC.js";import{b as de}from"./chunk-GEOJTL7L.js";import{a as ce}from"./chunk-TFYNVOGS.js";import"./chunk-MDVI344E.js";import"./chunk-5T22I67U.js";import{a as L}from"./chunk-KFXCIGMC.js";import"./chunk-4W7OKCCT.js";import{c as re,f as le,j as oe}from"./chunk-S3CK6CTG.js";import{$a as J,Cb as X,Da as c,Ea as n,Fa as t,Ga as f,J as U,K as O,M as G,Na as x,P as m,Q as _,Qa as g,Qb as Y,Sa as d,Sb as Z,Tb as $,_b as ee,bb as T,ca as w,cc as te,dc as ie,ea as r,eb as o,fb as v,gb as y,hb as k,hc as ne,ib as Q,la as I,lb as b,mb as h,na as q,nb as C,oa as N,sa as p,sc as ae,tb as K,wc as z}from"./chunk-T7ZSEIVN.js";import{a as H}from"./chunk-ATDPNAVO.js";var E=class E{constructor(a){this.http=a;this.ruta=L.ruta}authHeaders(){let a=localStorage.getItem("token");return new te({Authorization:`Bearer ${a}`})}obtenerMaterias(){return this.http.get(`${this.ruta}api/v1/perfil/materias`,{headers:this.authHeaders()})}actualizarMateriaDocente(a,e){return this.http.put(`${this.ruta}api/v1/perfil/materias/${a}`,e,{headers:this.authHeaders()})}obtenerDeudas(a){let e=new ie;return a&&(e=e.set("gestion",a)),this.http.get(`${this.ruta}api/v1/perfil/deudas`,{headers:this.authHeaders(),params:e})}};E.\u0275fac=function(e){return new(e||E)(G(ne))},E.\u0275prov=U({token:E,factory:E.\u0275fac,providedIn:"root"});var F=E;var _e=(i,a)=>({"d-none d-md-block":i,"sidebar-collapsed":a});function pe(i,a){i&1&&(n(0,"div",5)(1,"div",6),f(2,"div",7),n(3,"div"),o(4,"Cargando perfil\u2026"),t()()())}function ve(i,a){i&1&&(n(0,"div",5)(1,"div",8),o(2,"No hay sesi\xF3n activa."),t()())}function fe(i,a){if(i&1&&(n(0,"div",33)(1,"div",34),o(2,"Instituci\xF3n"),t(),n(3,"div",35),o(4),t()()),i&2){let e=d(2);r(4),v(e.datasesion.nameInst)}}function ge(i,a){i&1&&(n(0,"span",36),o(1,"Inicio"),t())}function xe(i,a){i&1&&(n(0,"span",36),o(1,"Cuenta"),t())}function be(i,a){i&1&&(n(0,"span",36),o(1,"Mis Materias"),t())}function he(i,a){i&1&&(n(0,"span",36),o(1,"Mis Deudas"),t())}function Ce(i,a){if(i&1){let e=x();n(0,"li")(1,"button",19),g("click",function(){m(e);let l=d(2);return _(l.setTab("deudas"))}),f(2,"i",37),p(3,he,2,0,"span",18),t()()}if(i&2){let e=d(2);r(),T("active",e.activeTab==="deudas"),r(2),c("ngIf",e.menuOpen)}}function ye(i,a){if(i&1&&(n(0,"div",38),o(1),t()),i&2){let e=d(2);r(),v(e.perfilError)}}function Ee(i,a){if(i&1){let e=x();n(0,"button",49),g("click",function(){m(e);let l=d(3);return _(l.setTab("deudas"))}),o(1,"Ver Deudas"),t()}}function Pe(i,a){if(i&1&&(n(0,"div",34),o(1),t()),i&2){let e=d(3);r(),y(" Deudas: ",(e.deudasPorInstitucion==null?null:e.deudasPorInstitucion.length)||0," instituci\xF3n(es) ")}}function Me(i,a){if(i&1){let e=x();n(0,"div")(1,"div",39)(2,"div",40)(3,"div",41)(4,"div",42)(5,"div",35),o(6,"Accesos r\xE1pidos"),t(),n(7,"div",43)(8,"button",44),g("click",function(){m(e);let l=d(2);return _(l.setTab("misMaterias"))}),o(9,"Ver Mis Materias"),t(),n(10,"button",45),g("click",function(){m(e);let l=d(2);return _(l.setTab("cuenta"))}),o(11,"Ver Cuenta"),t(),p(12,Ee,2,0,"button",46),t()()()(),n(13,"div",40)(14,"div",41)(15,"div",42)(16,"div",35),o(17,"Resumen"),t(),n(18,"div",47),o(19),t(),p(20,Pe,2,1,"div",48),t()()()()()}if(i&2){let e=d(2);r(12),c("ngIf",e.esEstudiante),r(7),y(" Materias cargadas: ",(e.materiasPorInstitucion==null?null:e.materiasPorInstitucion.length)||0," instituci\xF3n(es) "),r(),c("ngIf",e.esEstudiante)}}function Se(i,a){if(i&1&&(n(0,"div",67),o(1),t()),i&2){let e=d(3);r(),v(e.errorClave)}}function we(i,a){if(i&1){let e=x();n(0,"div",40)(1,"div",56)(2,"div",42)(3,"div",57),o(4,"Hoja de Vida (vista)"),t(),n(5,"quill-editor",68),C("ngModelChange",function(l){m(e);let u=d(3);return h(u.datasesion.usuario.hojadevida,l)||(u.datasesion.usuario.hojadevida=l),_(l)}),t()()()()}if(i&2){let e=d(3);r(5),c("modules",e._tools.modulesQuillShow),b("ngModel",e.datasesion.usuario.hojadevida)}}function Ie(i,a){if(i&1){let e=x();n(0,"div")(1,"div",41)(2,"div",42)(3,"div",39)(4,"div",50),f(5,"img",51),t(),n(6,"div",52)(7,"table",53)(8,"tbody")(9,"tr")(10,"th",54),o(11,"Usuario"),t(),n(12,"td"),o(13),t()(),n(14,"tr")(15,"th"),o(16,"Carnet"),t(),n(17,"td"),o(18),t()(),n(19,"tr")(20,"th"),o(21,"Celular"),t(),n(22,"td"),o(23),t()()()()()(),f(24,"hr",55),n(25,"div",39)(26,"div",40)(27,"div",56)(28,"div",42)(29,"div",57),o(30,"Cambiar contrase\xF1a"),t(),p(31,Se,2,1,"div",58),n(32,"div",59)(33,"label",60),o(34,"Contrase\xF1a actual"),t(),n(35,"input",61),C("ngModelChange",function(l){m(e);let u=d(2);return h(u.claveActual,l)||(u.claveActual=l),_(l)}),t()(),n(36,"div",59)(37,"label",60),o(38,"Nueva contrase\xF1a"),t(),n(39,"input",62),C("ngModelChange",function(l){m(e);let u=d(2);return h(u.nuevaClave,l)||(u.nuevaClave=l),_(l)}),t()(),n(40,"div",63)(41,"label",60),o(42,"Confirmar nueva contrase\xF1a"),t(),n(43,"input",62),C("ngModelChange",function(l){m(e);let u=d(2);return h(u.confirmarClave,l)||(u.confirmarClave=l),_(l)}),t()(),n(44,"button",64),g("click",function(){m(e);let l=d(2);return _(l.cambiarClave())}),f(45,"i",65),o(46," Cambiar contrase\xF1a "),t()()()(),p(47,we,6,2,"div",66),t()()()()}if(i&2){let e=d(2);r(5),c("src",(e.datasesion==null||e.datasesion.usuario==null?null:e.datasesion.usuario.foto)==null?e.ruta+"fijos/sinperfil.jpg":e.datasesion==null||e.datasesion.usuario==null?null:e.datasesion.usuario.foto,w),r(8),v((e.datasesion==null||e.datasesion.usuario==null?null:e.datasesion.usuario.usuario)||(e.datasesion==null||e.datasesion.usuario==null?null:e.datasesion.usuario.Usuario)||"\u2014"),r(5),v((e.datasesion==null||e.datasesion.usuario==null?null:e.datasesion.usuario.carnet)||(e.datasesion==null||e.datasesion.usuario==null?null:e.datasesion.usuario.Carnet)||"\u2014"),r(5),v((e.datasesion==null||e.datasesion.usuario==null?null:e.datasesion.usuario.celular)||(e.datasesion==null||e.datasesion.usuario==null?null:e.datasesion.usuario.Celular)||"\u2014"),r(8),c("ngIf",e.errorClave),r(4),b("ngModel",e.claveActual),r(4),b("ngModel",e.nuevaClave),r(4),b("ngModel",e.confirmarClave),r(4),c("ngIf",!e.esEstudiante)}}function Te(i,a){if(i&1&&(n(0,"div",38),o(1),t()),i&2){let e=d(3);r(),v(e.materiasError)}}function ke(i,a){i&1&&(n(0,"div",75),f(1,"div",7),n(2,"div"),o(3,"Cargando materias\u2026"),t()())}function Ve(i,a){i&1&&(n(0,"div",76),o(1," No hay materias para mostrar. "),t())}function Oe(i,a){if(i&1&&f(0,"img",82),i&2){let e=d().$implicit,s=d(3);c("src",s.ruta+e.institucion_logo,w)("alt",e==null?null:e.institucion_nombre)}}function Ne(i,a){if(i&1&&(n(0,"span",32),o(1),t()),i&2){let e=d().$implicit;r(),v((e==null?null:e.EstadoRegistroMateria)||(e==null?null:e.materia_estado_habilitacion))}}function Le(i,a){if(i&1&&(n(0,"div",95)(1,"div",96)(2,"div",97)(3,"div",34),o(4,"Promedio"),t(),n(5,"div",35),o(6),t()(),n(7,"div",97)(8,"div",34),o(9,"Recuperaci\xF3n"),t(),n(10,"div",35),o(11),t()()()()),i&2){let e=d().$implicit;r(6),v((e==null?null:e.Promedio)??"\u2014"),r(5),v((e==null?null:e.PruebaRecuperacion)??"\u2014")}}function Fe(i,a){if(i&1){let e=x();n(0,"div",98)(1,"button",44),g("click",function(){m(e);let l=d().$implicit,u=d(5);return _(u.abrirEdicionMateria(l))}),o(2," Modificar materia "),t()()}}function je(i,a){if(i&1&&(n(0,"div",85)(1,"div",86)(2,"div",42)(3,"div",87)(4,"div")(5,"div",88),o(6),t(),n(7,"div",31),o(8),t()(),p(9,Ne,2,1,"span",89),t(),n(10,"div",90),f(11,"img",91),n(12,"div",92)(13,"div",34),o(14,"Docente"),t(),n(15,"div",35),o(16),t()()(),p(17,Le,12,2,"div",93)(18,Fe,3,0,"div",94),t()()()),i&2){let e=a.$implicit,s=d(5);r(6),k("",e==null?null:e.sigla_materia," \u2014 ",e==null?null:e.nombre_materia),r(2),Q("",e==null?null:e.lvl_curso," \u2022 Paralelo ",e==null?null:e.materia_paralelo," \u2022 ",e==null?null:e.materia_turno),r(),c("ngIf",(e==null?null:e.EstadoRegistroMateria)||(e==null?null:e.materia_estado_habilitacion)),r(2),c("src",s.fotoUrl(e==null?null:e.docente_foto),w),r(5),v(s.docenteNombre(e)),r(),c("ngIf",s.esEstudiante),r(),c("ngIf",s.esDocente)}}function We(i,a){if(i&1&&(n(0,"div",63)(1,"div",83)(2,"div",35),o(3),t(),n(4,"span",80),o(5),t()(),n(6,"div",39),p(7,je,19,10,"div",84),t()()),i&2){let e=a.$implicit;r(3),y("Gesti\xF3n: ",e.gestion),r(2),v(e.items.length),r(2),c("ngForOf",e.items)}}function Ae(i,a){if(i&1&&(n(0,"div",77)(1,"div",78),p(2,Oe,1,2,"img",79),n(3,"div",35),o(4),t(),n(5,"span",80),o(6),t()(),p(7,We,8,3,"div",81),t()),i&2){let e=a.$implicit,s=d(3);r(2),c("ngIf",e==null?null:e.institucion_logo),r(2),v((e==null?null:e.institucion_nombre)||"INSTITUCI\xD3N"),r(2),v((e==null||e.items==null?null:e.items.length)||0),r(),c("ngForOf",s.agruparPorGestion(e.items))}}function De(i,a){if(i&1){let e=x();n(0,"div")(1,"div",69)(2,"div",70),o(3,"Mis Materias"),t(),n(4,"button",71),g("click",function(){m(e);let l=d(2);return _(l.cargarMaterias())}),o(5,"Recargar"),t()(),p(6,Te,2,1,"div",28)(7,ke,4,0,"div",72)(8,Ve,2,0,"div",73)(9,Ae,8,4,"div",74),t()}if(i&2){let e=d(2);r(4),c("disabled",e.materiasLoading),r(2),c("ngIf",e.materiasError),r(),c("ngIf",e.materiasLoading),r(),c("ngIf",!e.materiasLoading&&(!e.materiasPorInstitucion||e.materiasPorInstitucion.length===0)),r(),c("ngForOf",e.materiasPorInstitucion)}}function He(i,a){if(i&1&&(n(0,"div",38),o(1),t()),i&2){let e=d(3);r(),v(e.deudasError)}}function ze(i,a){i&1&&(n(0,"div",75),f(1,"div",7),n(2,"div"),o(3,"Cargando deudas\u2026"),t()())}function Re(i,a){i&1&&(n(0,"div",76),o(1," No hay deudas para mostrar. "),t())}function Be(i,a){if(i&1&&f(0,"img",82),i&2){let e=d().$implicit,s=d(3);c("src",s.ruta+e.institucion_logo,w)("alt",e==null?null:e.institucion_nombre)}}function Ue(i,a){if(i&1&&(n(0,"div",35),o(1),t()),i&2){let e=d().$implicit;r(),y(" ",e==null||e.meses_deuda==null?null:e.meses_deuda.join(", ")," ")}}function Ge(i,a){i&1&&(n(0,"span",103),o(1,"Sin deuda"),t())}function qe(i,a){if(i&1&&(n(0,"div",100)(1,"div",41)(2,"div",42)(3,"div",31),o(4),t(),n(5,"div",101)(6,"div",34),o(7,"Meses deuda"),t(),p(8,Ue,2,1,"div",102)(9,Ge,2,0,"ng-template",null,0,X),t()()()()),i&2){let e=a.$implicit,s=J(10);r(4),k("Inscripci\xF3n: #",e==null?null:e.infoestudiantesifas_id," \u2022 Cohorte: ",e==null?null:e.anio_asignacion),r(4),c("ngIf",e==null||e.meses_deuda==null?null:e.meses_deuda.length)("ngIfElse",s)}}function Je(i,a){if(i&1&&(n(0,"div",63)(1,"div",83)(2,"div",35),o(3),t(),n(4,"span",80),o(5),t()(),n(6,"div",39),p(7,qe,11,4,"div",99),t()()),i&2){let e=a.$implicit;r(3),y("Gesti\xF3n: ",e.gestion),r(2),v(e.items.length),r(2),c("ngForOf",e.items)}}function Qe(i,a){if(i&1&&(n(0,"div",77)(1,"div",78),p(2,Be,1,2,"img",79),n(3,"div",35),o(4),t()(),p(5,Je,8,3,"div",81),t()),i&2){let e=a.$implicit,s=d(3);r(2),c("ngIf",e==null?null:e.institucion_logo),r(2),v((e==null?null:e.institucion_nombre)||"INSTITUCI\xD3N"),r(),c("ngForOf",s.agruparPorGestion(e.items))}}function Ke(i,a){if(i&1){let e=x();n(0,"div")(1,"div",69)(2,"div",70),o(3,"Mis Deudas"),t(),n(4,"button",71),g("click",function(){m(e);let l=d(2);return _(l.cargarDeudas())}),o(5,"Recargar"),t()(),p(6,He,2,1,"div",28)(7,ze,4,0,"div",72)(8,Re,2,0,"div",73)(9,Qe,6,3,"div",74),t()}if(i&2){let e=d(2);r(4),c("disabled",e.deudasLoading),r(2),c("ngIf",e.deudasError),r(),c("ngIf",e.deudasLoading),r(),c("ngIf",!e.deudasLoading&&(!e.deudasPorInstitucion||e.deudasPorInstitucion.length===0)),r(),c("ngForOf",e.deudasPorInstitucion)}}function Xe(i,a){if(i&1){let e=x();n(0,"div",9)(1,"div",10)(2,"button",11),g("click",function(){m(e);let l=d();return _(l.toggleMenu())}),o(3,"\u2630"),t(),n(4,"div",12),p(5,fe,5,1,"div",13),n(6,"ul",14)(7,"li",15)(8,"button",16),g("click",function(){m(e);let l=d();return _(l.setTab("home"))}),f(9,"i",17),p(10,ge,2,0,"span",18),t()(),n(11,"li")(12,"button",19),g("click",function(){m(e);let l=d();return _(l.setTab("cuenta"))}),f(13,"i",20),p(14,xe,2,0,"span",18),t()(),n(15,"li")(16,"button",19),g("click",function(){m(e);let l=d();return _(l.setTab("misMaterias"))}),f(17,"i",21),p(18,be,2,0,"span",18),t()(),p(19,Ce,4,3,"li",22),t(),f(20,"hr"),t()(),n(21,"div",23)(22,"button",24),g("click",function(){m(e);let l=d();return _(l.toggleMenu())}),f(23,"i",25),t()(),n(24,"div",26)(25,"div",27),p(26,ye,2,1,"div",28),n(27,"div",29)(28,"div")(29,"div",30),o(30),t(),n(31,"div",31),o(32),t()(),n(33,"span",32),o(34),t()(),p(35,Me,21,3,"div",22)(36,Ie,48,9,"div",22)(37,De,10,5,"div",22)(38,Ke,10,5,"div",22),t()()()}if(i&2){let e=d();r(),c("ngClass",K(21,_e,!e.menuOpen,!e.menuOpen)),r(4),c("ngIf",e.datasesion==null?null:e.datasesion.nameInst),r(3),T("active",e.activeTab==="home"),r(2),c("ngIf",e.menuOpen),r(2),T("active",e.activeTab==="cuenta"),r(2),c("ngIf",e.menuOpen),r(2),T("active",e.activeTab==="misMaterias"),r(2),c("ngIf",e.menuOpen),r(),c("ngIf",e.esEstudiante),r(7),c("ngIf",e.perfilError),r(4),k("",(e.datasesion==null||e.datasesion.usuario==null?null:e.datasesion.usuario.nombres)||(e.datasesion==null||e.datasesion.usuario==null?null:e.datasesion.usuario.Nombres)||(e.datasesion==null||e.datasesion.usuario==null?null:e.datasesion.usuario.Nombre)," ",(e.datasesion==null||e.datasesion.usuario==null?null:e.datasesion.usuario.apellidos)||(e.datasesion==null||e.datasesion.usuario==null?null:e.datasesion.usuario.Apellidos)||""),r(2),y("Rol: ",e.tipoSesion),r(2),v((e.datasesion==null||e.datasesion.usuario==null?null:e.datasesion.usuario.estado)||(e.datasesion==null||e.datasesion.usuario==null?null:e.datasesion.usuario.Estado)||"ACTIVO"),r(),c("ngIf",e.activeTab==="home"),r(),c("ngIf",e.activeTab==="cuenta"),r(),c("ngIf",e.activeTab==="misMaterias"),r(),c("ngIf",e.activeTab==="deudas"&&e.esEstudiante)}}function Ye(i,a){i&1&&f(0,"span",117)}function Ze(i,a){if(i&1){let e=x();n(0,"div",104)(1,"div",105)(2,"div",106)(3,"div",107)(4,"h5",108),o(5,"Modificar materia"),t(),n(6,"button",109),g("click",function(){m(e);let l=d();return _(l.cerrarEdicionMateria())}),t()(),n(7,"div",110)(8,"div",59)(9,"div",35),o(10),t(),n(11,"div",31),o(12),t()(),n(13,"div",96)(14,"div",97)(15,"label",60),o(16,"Paralelo"),t(),n(17,"input",111),C("ngModelChange",function(l){m(e);let u=d();return h(u.editMateriaPayload.Paralelo,l)||(u.editMateriaPayload.Paralelo=l),_(l)}),t()(),n(18,"div",97)(19,"label",60),o(20,"Turno"),t(),n(21,"input",111),C("ngModelChange",function(l){m(e);let u=d();return h(u.editMateriaPayload.Turno,l)||(u.editMateriaPayload.Turno=l),_(l)}),t()(),n(22,"div",112)(23,"label",60),o(24,"Modo asistencia"),t(),n(25,"input",111),C("ngModelChange",function(l){m(e);let u=d();return h(u.editMateriaPayload.ModoAsistencia,l)||(u.editMateriaPayload.ModoAsistencia=l),_(l)}),t()(),n(26,"div",112)(27,"label",60),o(28,"Estado habilitaci\xF3n"),t(),n(29,"input",111),C("ngModelChange",function(l){m(e);let u=d();return h(u.editMateriaPayload.EstadoHabilitacion,l)||(u.editMateriaPayload.EstadoHabilitacion=l),_(l)}),t()(),n(30,"div",112)(31,"label",60),o(32,"Estado env\xEDo"),t(),n(33,"input",111),C("ngModelChange",function(l){m(e);let u=d();return h(u.editMateriaPayload.EstadoEnvio,l)||(u.editMateriaPayload.EstadoEnvio=l),_(l)}),t()()()(),n(34,"div",113)(35,"button",114),g("click",function(){m(e);let l=d();return _(l.cerrarEdicionMateria())}),o(36,"Cancelar"),t(),n(37,"button",115),g("click",function(){m(e);let l=d();return _(l.guardarEdicionMateria())}),p(38,Ye,1,0,"span",116),o(39," Guardar "),t()()()()()}if(i&2){let e=d();r(10),k("",e.editMateria==null?null:e.editMateria.sigla_materia," \u2014 ",e.editMateria==null?null:e.editMateria.nombre_materia),r(2),v(e.editMateria==null?null:e.editMateria.lvl_curso),r(5),b("ngModel",e.editMateriaPayload.Paralelo),r(4),b("ngModel",e.editMateriaPayload.Turno),r(4),b("ngModel",e.editMateriaPayload.ModoAsistencia),r(4),b("ngModel",e.editMateriaPayload.EstadoHabilitacion),r(4),b("ngModel",e.editMateriaPayload.EstadoEnvio),r(2),c("disabled",e.editSaving),r(2),c("disabled",e.editSaving),r(),c("ngIf",e.editSaving)}}var S=class S{constructor(a,e,s,l){this.router=a;this._auth=e;this._perfil=s;this._tools=l;this.ruta=L.ruta;this.infoHJVida="";this.apunteSeleccionado="";this.datasesion=null;this.perfilLoading=!0;this.perfilError="";this.activeTab="home";this.menuOpen=!0;this.materiasLoading=!1;this.materiasPorInstitucion=[];this.materiasError="";this.deudasLoading=!1;this.deudasPorInstitucion=[];this.deudasError="";this.editMateriaOpen=!1;this.editMateria=null;this.editMateriaPayload={Paralelo:"",Turno:"",ModoAsistencia:"",EstadoHabilitacion:"",EstadoEnvio:""};this.editSaving=!1;this.claveActual="";this.nuevaClave="";this.confirmarClave="";this.errorClave="";this.mostrarModalCambioClave=!1}ngOnInit(){this.PedirInformacionPerfil()}setTab(a){this.activeTab=a,a==="misMaterias"&&this.cargarMaterias(),a==="deudas"&&this.cargarDeudas()}get tipoSesion(){return(this.datasesion?.tipo??"").toString()}get esDocente(){return this.tipoSesion==="planteldocentes"}get esEstudiante(){return this.tipoSesion==="estudiantesifas"}get esAdministrativo(){return this.tipoSesion==="planteladministrativos"}get esSuper(){return this.tipoSesion==="superlcchs"}normalizarTexto(a){return(a??"").toString().trim()}docenteNombre(a){let e=this.normalizarTexto(a?.docente_nombre);return e!==""?e:"SIN DOCENTE"}fotoUrl(a){let e=this.normalizarTexto(a);if(e===""||e.toLowerCase()==="null"||e.toLowerCase()==="undefined")return this.ruta+"fijos/sinperfil.jpg";let s=e.toLowerCase();return s.startsWith("http://")||s.startsWith("https://")||s.startsWith("data:")?e:this.ruta+e}agruparPorGestion(a){let e=new Map;(a??[]).forEach(l=>{let u=this.normalizarTexto(l?.gestion)||"SIN GESTI\xD3N";e.has(u)||e.set(u,[]),e.get(u).push(l)});let s=Array.from(e.keys());return s.sort((l,u)=>{let V=Number(l),B=Number(u),A=!Number.isNaN(V)&&l!=="SIN GESTI\xD3N",D=!Number.isNaN(B)&&u!=="SIN GESTI\xD3N";return A&&D?B-V:A&&!D?-1:!A&&D?1:l.localeCompare(u)}),s.map(l=>({gestion:l,items:e.get(l)??[]}))}PedirInformacionPerfil(){this.perfilLoading=!0,this.perfilError="",this._auth.pedirPerfil().subscribe({next:a=>{this.datasesion=a,this.infoHJVida=this.datasesion?.usuario?.hojadevida??"",this.perfilLoading=!1,this.cargarMaterias(),this.esEstudiante&&this.cargarDeudas()},error:a=>{console.error("Error al obtener el perfil:",a),this.perfilLoading=!1,this.perfilError="No se pudo cargar el perfil."}})}toggleMenu(){this.menuOpen=!this.menuOpen}cargarMaterias(){this.datasesion&&(this.materiasLoading||(this.materiasLoading=!0,this.materiasError="",this._perfil.obtenerMaterias().subscribe({next:a=>{this.materiasPorInstitucion=Array.isArray(a?.data)?a.data:[],this.materiasLoading=!1},error:a=>{console.log("Error al cargar materias de perfil",a),this.materiasLoading=!1,this.materiasError="No se pudo cargar la lista de materias."}})))}cargarDeudas(){!this.datasesion||!this.esEstudiante||this.deudasLoading||(this.deudasLoading=!0,this.deudasError="",this._perfil.obtenerDeudas().subscribe({next:a=>{this.deudasPorInstitucion=Array.isArray(a?.data)?a.data:[],this.deudasLoading=!1},error:a=>{console.log("Error al cargar deudas de perfil",a),this.deudasLoading=!1,this.deudasError="No se pudo cargar las deudas."}}))}abrirEdicionMateria(a){this.esDocente&&(this.editMateria=a,this.editMateriaPayload={Paralelo:a?.materia_paralelo??"",Turno:a?.materia_turno??"",ModoAsistencia:a?.materia_modo_asistencia??"",EstadoHabilitacion:a?.materia_estado_habilitacion??"",EstadoEnvio:a?.materia_estado_envio??""},this.editMateriaOpen=!0)}cerrarEdicionMateria(){this.editMateriaOpen=!1,this.editMateria=null,this.editSaving=!1}guardarEdicionMateria(){if(!this.esDocente||!this.editMateria?.materia_id||this.editSaving)return;this.editSaving=!0;let a=Number(this.editMateria.materia_id);this._perfil.actualizarMateriaDocente(a,this.editMateriaPayload).subscribe({next:e=>{let s=e?.data;s&&this.materiasPorInstitucion.forEach(l=>{(l?.items??[]).forEach((u,V)=>{Number(u?.materia_id)===a&&(l.items[V]=H(H({},u),s))})}),this.editSaving=!1,this.editMateriaOpen=!1,this._tools.MensajeInformacion("\xC9xito","Materia actualizada.","success")},error:e=>{console.log("Error al actualizar materia",e),this.editSaving=!1;let s=e?.error?.message||"No se pudo actualizar la materia.";this._tools.MensajeInformacion("Error",s,"error")}})}cambiarClave(){if(this.errorClave="",!this.claveActual||!this.nuevaClave||!this.confirmarClave){this.errorClave="Todos los campos son obligatorios.";return}if(this.nuevaClave!==this.confirmarClave){this.errorClave="Las contrase\xF1as nuevas no coinciden.";return}if(this.nuevaClave.length<6){this.errorClave="La nueva contrase\xF1a debe tener al menos 6 caracteres.";return}this._auth.cambiarClave({claveActual:this.claveActual,nuevaClave:this.nuevaClave}).subscribe({next:a=>{this.mostrarModalCambioClave=!1,this.claveActual="",this.nuevaClave="",this.confirmarClave="",this.errorClave="",this._tools.MensajeInformacion("\xC9xito","Contrase\xF1a cambiada correctamente.","success")},error:a=>{this.errorClave=a?.error?.mensaje||"Error al cambiar la contrase\xF1a."}})}};S.\u0275fac=function(e){return new(e||S)(I(ae),I(se),I(F),I(de))},S.\u0275cmp=q({type:S,selectors:[["app-perfil"]],standalone:!1,decls:5,vars:4,consts:[["sinDeuda",""],[1,"container-fluid"],["class","p-4",4,"ngIf"],["class","row flex-nowrap",4,"ngIf"],["class","modal d-block","tabindex","-1","style","background: rgba(0,0,0,.5);",4,"ngIf"],[1,"p-4"],[1,"d-flex","align-items-center","gap-2"],["role","status",1,"spinner-border"],[1,"alert","alert-warning","mb-0"],[1,"row","flex-nowrap"],[1,"col-auto","col-md-3","col-xl-2","px-sm-2","px-0","sidebar",3,"ngClass"],["type","button",1,"navbar-toggler","text-dark","toggle-btn",3,"click"],[1,"d-flex","flex-column","align-items-center","align-items-sm-start","px-3","pt-2","min-vh-100"],["class","w-100 mb-3",4,"ngIf"],["id","menu",1,"nav","nav-pills","flex-column","mb-sm-auto","mb-0","align-items-center","align-items-sm-start"],[1,"nav-item"],[1,"nav-link","align-middle","px-0",3,"click"],[1,"fs-4","bi-house"],["class","ms-1 d-sm-inline",4,"ngIf"],[1,"nav-link","px-0","align-middle",3,"click"],[1,"fs-4","bi-person"],[1,"fs-4","bi-journal-bookmark"],[4,"ngIf"],["tabindex","-1",1,"d-md-none","position-fixed","top-5","end-0","m-3",2,"z-index","1050"],[1,"btn","btn-primary",2,"border-radius","50%","width","56px","height","56px",3,"click"],[1,"bi","bi-list",2,"font-size","1.5rem"],[1,"col","py-3","bg-light"],[1,"container"],["class","alert alert-danger",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap","gap-2","mb-3"],[1,"h4","mb-0"],[1,"text-muted","small"],[1,"badge","bg-secondary"],[1,"w-100","mb-3"],[1,"small","text-muted"],[1,"fw-semibold"],[1,"ms-1","d-sm-inline"],[1,"fs-4","bi-cash-coin"],[1,"alert","alert-danger"],[1,"row","g-3"],[1,"col-12","col-lg-6"],[1,"card","shadow-sm"],[1,"card-body"],[1,"d-flex","flex-wrap","gap-2","mt-3"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["class","btn btn-outline-success","type","button",3,"click",4,"ngIf"],[1,"small","text-muted","mt-2"],["class","small text-muted",4,"ngIf"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"col-12","col-md-4","text-center"],["alt","Foto de perfil",1,"img-fluid","rounded-circle","mb-3",2,"width","140px","height","140px","object-fit","cover",3,"src"],[1,"col-12","col-md-8"],[1,"table","table-bordered","mb-0"],[2,"width","220px"],[1,"my-4"],[1,"card","border-0","bg-white","shadow-sm"],[1,"fw-semibold","mb-2"],["class","alert alert-danger py-2",4,"ngIf"],[1,"mb-2"],[1,"form-label"],["type","password","autocomplete","current-password",1,"form-control",3,"ngModelChange","ngModel"],["type","password","autocomplete","new-password",1,"form-control",3,"ngModelChange","ngModel"],[1,"mb-3"],["type","button",1,"btn","btn-warning",3,"click"],[1,"bi","bi-key-fill","me-1"],["class","col-12 col-lg-6",4,"ngIf"],[1,"alert","alert-danger","py-2"],["disabled","",1,"quill-container-wrapper",3,"ngModelChange","modules","ngModel"],[1,"d-flex","align-items-center","justify-content-between","mb-2"],[1,"h5","mb-0"],["type","button",1,"btn","btn-sm","btn-outline-secondary",3,"click","disabled"],["class","d-flex align-items-center gap-2 py-3",4,"ngIf"],["class","alert alert-info",4,"ngIf"],["class","mb-4",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","gap-2","py-3"],[1,"alert","alert-info"],[1,"mb-4"],[1,"d-flex","align-items-center","gap-2","mb-2"],["style","width: 28px; height: 28px; object-fit: contain;",3,"src","alt",4,"ngIf"],[1,"badge","bg-light","text-dark","border"],["class","mb-3",4,"ngFor","ngForOf"],[2,"width","28px","height","28px","object-fit","contain",3,"src","alt"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap","gap-2","mb-2"],["class","col-12 col-md-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-lg-4"],[1,"card","h-100","shadow-sm"],[1,"d-flex","justify-content-between","align-items-start","gap-2"],[1,"fw-bold"],["class","badge bg-secondary",4,"ngIf"],[1,"d-flex","align-items-center","gap-2","mt-3"],["alt","Docente",1,"rounded-circle","border",2,"width","36px","height","36px","object-fit","cover",3,"src"],[1,"lh-sm"],["class","mt-3",4,"ngIf"],["class","d-grid mt-3",4,"ngIf"],[1,"mt-3"],[1,"row","g-2"],[1,"col-6"],[1,"d-grid","mt-3"],["class","col-12 col-md-6",4,"ngFor","ngForOf"],[1,"col-12","col-md-6"],[1,"mt-2"],["class","fw-semibold",4,"ngIf","ngIfElse"],[1,"badge","bg-success"],["tabindex","-1",1,"modal","d-block",2,"background","rgba(0,0,0,.5)"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,s){e&1&&(n(0,"div",1),p(1,pe,5,0,"div",2)(2,ve,3,0,"div",2)(3,Xe,39,24,"div",3)(4,Ze,40,11,"div",4),t()),e&2&&(r(),c("ngIf",s.perfilLoading),r(),c("ngIf",!s.perfilLoading&&!s.datasesion),r(),c("ngIf",s.datasesion),r(),c("ngIf",s.editMateriaOpen))},dependencies:[Y,Z,$,re,le,oe],styles:[".sidebar[_ngcontent-%COMP%]{border-right:1px solid rgba(var(--color-basico-institucional-rgb),.25);background-color:#f8f9fa;transition:width .3s}.sidebar.sidebar-collapsed[_ngcontent-%COMP%]{width:60px}.sidebar.sidebar-collapsed[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .sidebar.sidebar-collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.sidebar.sidebar-expanded[_ngcontent-%COMP%]{width:250px}.sidebar[_ngcontent-%COMP%]   .navbar-toggler[_ngcontent-%COMP%]{display:block;margin:1rem;border:none;background:transparent;cursor:pointer;font-size:1.5rem}.sidebar[_ngcontent-%COMP%]   .navbar-toggler[_ngcontent-%COMP%]:focus{outline:none}.sidebar[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%]{color:#343a40}.sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#343a40;border-radius:.5rem;width:100%;text-align:left}.sidebar[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:rgba(var(--color-basico-institucional-rgb),.12);color:var(--color-basico-institucional);font-weight:600}.sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:var(--color-basico-institucional);background-color:rgba(var(--color-basico-institucional-rgb),.08)}.sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:70%}.sidebar.sidebar-collapsed[_ngcontent-%COMP%]{width:60px}.sidebar.sidebar-expanded[_ngcontent-%COMP%]{width:250px}}"]});var j=S;var $e=[{path:"perfil",component:j}],P=class P{};P.\u0275fac=function(e){return new(e||P)},P.\u0275mod=N({type:P}),P.\u0275inj=O({imports:[z.forChild($e),z]});var W=P;var M=class M{};M.\u0275fac=function(e){return new(e||M)},M.\u0275mod=N({type:M}),M.\u0275inj=O({imports:[ee,ce,W]});var ue=M;export{ue as PrivadosModule};
