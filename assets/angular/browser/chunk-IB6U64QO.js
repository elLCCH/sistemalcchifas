import{a as nt}from"./chunk-J5Y3SAOU.js";import{a as et}from"./chunk-O24TPCPO.js";import{a as xe}from"./chunk-76LOQ7RP.js";import{a as tt}from"./chunk-CLO6LTW7.js";import"./chunk-724O7RRN.js";import{a as it}from"./chunk-2GD4CMSK.js";import"./chunk-WJU65V47.js";import{a as ee,e as Qe,f as Je}from"./chunk-NKLV3NO6.js";import{a as ge}from"./chunk-DNUF2RNX.js";import{a as Ze}from"./chunk-BPBF5BY4.js";import{a as Xe,b as Ke}from"./chunk-P3GASOP5.js";import{b as Be}from"./chunk-LRDGIBFV.js";import{a as Ce}from"./chunk-44ZKMDH4.js";import{b as Ye}from"./chunk-NHQGIU22.js";import"./chunk-NCIXDP2C.js";import{b as he}from"./chunk-KCTZUZJH.js";import{e as Re,g as Fe,k as K}from"./chunk-PWQJWZZZ.js";import{b as fe}from"./chunk-OX7OA6PN.js";import{d as Ge,f as We,i as qe}from"./chunk-EGRYB44C.js";import"./chunk-5VY7FQQV.js";import{b as Ve,c as ce,f as de,g as He,h as Pe,j as U,k as pe,o as Le,p as je,q as Ue,r as me,s as ue,t as _e,x as ze,y as $e}from"./chunk-ROSYCBC4.js";import{a as se}from"./chunk-JISGPZ2J.js";import{$b as j,Aa as D,Bb as Y,Ca as Se,Cb as J,Da as Ie,Db as X,Dc as ke,Ea as l,Fc as re,Gb as L,Gc as le,Hb as R,Ib as F,Lb as s,Ma as M,Mb as C,Nb as E,Ob as T,Oc as Ne,Pb as ye,Ra as ie,Sa as ne,Tb as O,Ub as k,Vb as N,Wa as u,Wc as De,Xb as B,Zb as Oe,_ as te,ab as Me,bb as oe,db as ae,ga as _,ha as g,hc as V,ib as p,jb as r,kb as a,lb as x,p as Z,pb as A,qb as w,sb as v,vb as h,xb as d}from"./chunk-SPNCLBHB.js";import{a as we,b as Te,m as $}from"./chunk-GG76335P.js";var _t=()=>({standalone:!0});function gt(n,t){if(n&1){let e=v();r(0,"button",61),h("click",function(){_(e);let o=d();return g(o.nuevoHorario())}),s(1," Publicar "),a()}}function ht(n,t){n&1&&(r(0,"div",62)(1,"div",63),s(2,"Cargando horarios..."),a()())}function ft(n,t){n&1&&(r(0,"div",66),s(1," No hay horarios publicados. "),a())}function xt(n,t){if(n&1&&x(0,"img",74),n&2){let e=d().$implicit,i=d(2);p("src",i.ruta+e.institucion_logo,D)("alt",e==null?null:e.institucion_nombre)}}function Ct(n,t){if(n&1&&(r(0,"span",75),s(1),a()),n&2){let e=d().$implicit;l(),C(e.horarios.length)}}function vt(n,t){if(n&1&&(r(0,"div",13),s(1),a()),n&2){let e=d().$implicit;l(),E("Gesti\xF3n: ",e==null?null:e.subtitulo)}}function bt(n,t){if(n&1&&(r(0,"div",13),s(1),a()),n&2){let e=d().$implicit;l(),C(e==null?null:e.descripcion)}}function Et(n,t){if(n&1&&(r(0,"a",82),s(1,"Ver"),a()),n&2){let e=d().$implicit,i=d(3);p("href",i.ruta+e.archivo,D)}}function St(n,t){if(n&1){let e=v();r(0,"button",83),h("click",function(){_(e);let o=d().$implicit,c=d(3);return g(c.editarHorario(o))}),s(1," Editar "),a()}}function It(n,t){if(n&1){let e=v();r(0,"button",84),h("click",function(){_(e);let o=d().$implicit,c=d(3);return g(c.eliminarHorario(o))}),s(1," Eliminar "),a()}}function Mt(n,t){if(n&1&&(r(0,"div",76)(1,"div",77)(2,"div")(3,"div",32),s(4),a(),u(5,vt,2,1,"div",78)(6,bt,2,1,"div",78),a(),r(7,"div",14),u(8,Et,2,1,"a",79)(9,St,2,0,"button",80)(10,It,2,0,"button",81),a()()()),n&2){let e=t.$implicit,i=d(3);l(4),C(e==null?null:e.titulo),l(),p("ngIf",e==null?null:e.subtitulo),l(),p("ngIf",e==null?null:e.descripcion),l(2),p("ngIf",e==null?null:e.archivo),l(),p("ngIf",i.puedeEditarHorario(e)),l(),p("ngIf",i.puedeEditarHorario(e))}}function yt(n,t){if(n&1&&(r(0,"div",62)(1,"div",67)(2,"div",68)(3,"div",11)(4,"div",14),u(5,xt,1,2,"img",69),r(6,"div",70),s(7),a()(),u(8,Ct,2,1,"span",71),a()(),r(9,"div",72),u(10,Mt,11,6,"div",73),a()()()),n&2){let e=t.$implicit;l(),R("border-left-color",(e==null?null:e.institucion_color_fuerte)||(e==null?null:e.institucion_color_institucional)||"#0d6efd"),l(),R("background",(e==null?null:e.institucion_color_bajo)||"#f8f9fa"),l(3),p("ngIf",e==null?null:e.institucion_logo),l(2),C(e==null?null:e.institucion_nombre),l(),p("ngIf",e==null||e.horarios==null?null:e.horarios.length),l(2),p("ngForOf",e.horarios)}}function Dt(n,t){if(n&1&&(A(0),u(1,ft,2,0,"div",64)(2,yt,11,8,"div",65),w()),n&2){let e=d();l(),p("ngIf",((e.horariosInstituciones==null?null:e.horariosInstituciones.length)??0)===0),l(),p("ngForOf",e.horariosInstituciones)}}function Pt(n,t){n&1&&(r(0,"div",85),s(1," No tiene permisos para publicar horarios. "),a())}function At(n,t){if(n&1&&(r(0,"div",96),s(1),a()),n&2){let e=d(2);l(),E("Archivo: ",e.horarioFile==null?null:e.horarioFile.name)}}function wt(n,t){if(n&1&&(r(0,"div",62)(1,"div",97)(2,"div",13),s(3,"Subida"),a(),r(4,"div",98),s(5),a()(),r(6,"div",99),x(7,"div",100),a()()),n&2){let e=d(2);l(5),E("",e.horarioUploadProgress??0,"%"),l(2),R("width",e.horarioUploadProgress??0,"%")}}function Tt(n,t){if(n&1){let e=v();A(0),r(1,"div",86),h("dragover",function(o){_(e);let c=d();return g(c.onHorarioDragOver(o))})("dragleave",function(o){_(e);let c=d();return g(c.onHorarioDragLeave(o))})("drop",function(o){_(e);let c=d();return g(c.onHorarioDrop(o))}),r(2,"input",87,0),h("change",function(o){_(e);let c=d();return g(c.onHorarioFileInputChange(o))}),a(),r(4,"div",11)(5,"div")(6,"div",32),s(7,"Arrastra aqu\xED tu archivo"),a(),r(8,"div",13),s(9,"PDF o imagen"),a()(),r(10,"button",88),h("click",function(){_(e);let o=L(3);return g(o.click())}),s(11,"Seleccionar"),a()(),u(12,At,2,1,"div",89),a(),u(13,wt,8,3,"div",17),r(14,"div",90)(15,"div",91)(16,"label",92),s(17,"Gesti\xF3n"),a(),x(18,"input",93),a(),r(19,"div",91)(20,"label",92),s(21,"T\xEDtulo"),a(),x(22,"input",94),a(),r(23,"div",91)(24,"label",92),s(25,"Descripci\xF3n"),a(),x(26,"textarea",95),a()(),w()}if(n&2){let e=d();l(),F("dragging",e.horarioUploadDragging),l(11),p("ngIf",e.horarioFile),l(),p("ngIf",e.horarioUploading||e.horarioUploadProgress!==null),l(),p("formGroup",e.horarioForm)}}function Ot(n,t){if(n&1){let e=v();r(0,"button",106),h("click",function(){let o=_(e).$implicit,c=d(2);return g(c.seleccionarInstitucion(o))}),x(1,"img",107),a()}if(n&2){let e=t.$implicit,i=d(2);F("active",(i.institucionSeleccionada==null?null:i.institucionSeleccionada.id)===(e==null?null:e.id)),p("title",e==null?null:e.Nombre),l(),p("src",i.ruta+e.Logo,D)("alt",e==null?null:e.Nombre)}}function kt(n,t){if(n&1){let e=v();r(0,"div",101)(1,"div",102)(2,"div",32),s(3,"Filtrar por instituci\xF3n (click en el logo)"),a(),r(4,"button",103),h("click",function(){_(e);let o=d();return g(o.seleccionarInstitucion(null))}),s(5," Quitar filtro "),a()(),r(6,"div",104),u(7,Ot,2,5,"button",105),a()()}if(n&2){let e=d();l(4),p("disabled",!e.institucionSeleccionada),l(3),p("ngForOf",e.institucionesLogos)}}function Nt(n,t){if(n&1&&(r(0,"option",108),s(1),a()),n&2){let e=t.$implicit;p("value",e.id),l(),C(e.Anio)}}function Rt(n,t){n&1&&(r(0,"div",109)(1,"div",110)(2,"div",111)(3,"div",112),s(4,"NO SE ENCONTR\xD3 HORARIOS PUBLICADOS"),a(),r(5,"div",33),s(6,"No se realiz\xF3 la publicaci\xF3n de horarios para esta gesti\xF3n."),a()()()())}function Ft(n,t){if(n&1&&x(0,"img",74),n&2){let e=d(2).$implicit,i=d();p("src",i.ruta+e.institucion_logo,D)("alt",e==null?null:e.institucion_nombre)}}function Vt(n,t){if(n&1&&(r(0,"div",125)(1,"div",126),u(2,Ft,1,2,"img",69),r(3,"div",33),s(4),a()()()),n&2){let e=d().$implicit,i=d();l(),R("border-color",i.institucionColorFuerte(e==null?null:e.instituciones_id)),l(),p("ngIf",e==null?null:e.institucion_logo),l(2),C(e==null?null:e.institucion_nombre)}}function Ht(n,t){if(n&1&&(r(0,"option",108),s(1),a()),n&2){let e=t.$implicit;p("value",e.materia_id),l(),T(" ",e.SiglaMateria," - ",e.NombreMateria," ")}}function Lt(n,t){if(n&1&&(r(0,"div",96),s(1," Seleccionado: "),r(2,"span",32),s(3),a()()),n&2){let e=d().$implicit;l(3),C(e.selectedMateriaNombre)}}function jt(n,t){if(n&1){let e=v();r(0,"div",113)(1,"div",114)(2,"div",10)(3,"div",115)(4,"div",116)(5,"button",117),h("click",function(){let o=_(e).$implicit,c=d();return g(c.filterHorarioForm.patchValue({txt:o.NivelCurso}))}),s(6),a(),u(7,Vt,5,4,"div",118),a(),r(8,"span",119),s(9),a()(),r(10,"div",62)(11,"label",120),s(12,"Materias"),a(),r(13,"select",121),N("ngModelChange",function(o){let c=_(e).$implicit;return k(c.selectedMateriaId,o)||(c.selectedMateriaId=o),g(o)}),h("ngModelChange",function(o){let c=_(e).$implicit,m=d();return g(m.onMateriaIdChange(c,o))}),r(14,"option",122),s(15,"LISTAR TODO EL CURSO (MEZCLADO)"),a(),u(16,Ht,2,3,"option",39),a()(),r(17,"div",123)(18,"button",124),h("click",function(o){let c=_(e).$implicit,m=d();return g(m.AbrirParalelosPorCurso(c,o))}),s(19," LISTAR "),a()(),u(20,Lt,4,1,"div",89),a()()()}if(n&2){let e=t.$implicit,i=d();l(),R("border-left-color",i.institucionColorFuerte(e==null?null:e.instituciones_id))("background","linear-gradient(180deg,"+i.institucionColorBajo(e==null?null:e.instituciones_id)+" 0%, #ffffff 55%)"),l(4),R("color",i.institucionColorFuerte(e==null?null:e.instituciones_id)),l(),E(" ",e.NivelCurso," "),l(),p("ngIf",(e==null?null:e.institucion_logo)||(e==null?null:e.institucion_nombre)),l(),R("background",i.institucionColorFuerte(e==null?null:e.instituciones_id)),l(),E(" ",e.Turno," "),l(4),O("ngModel",e.selectedMateriaId),p("ngModelOptions",Oe(19,_t)),l(3),p("ngForOf",e.materias),l(2),R("background",i.institucionColorFuerte(e==null?null:e.instituciones_id))("border-color",i.institucionColorFuerte(e==null?null:e.instituciones_id)),l(2),p("ngIf",e.selectedMateriaNombre)}}function Ut(n,t){if(n&1&&(r(0,"option",108),s(1),a()),n&2){let e=t.$implicit;p("value",e.id),l(),C(e.Anio)}}function zt(n,t){if(n&1&&x(0,"img",131),n&2){let e=d().$implicit,i=d();p("src",i.ruta+e.logo,D)}}function $t(n,t){if(n&1&&(r(0,"span"),s(1),a()),n&2){let e=d(2).$implicit;l(),E("(",e.docentes.especialidad.celular_trabajo,")")}}function Bt(n,t){if(n&1&&(r(0,"span"),s(1),u(2,$t,2,1,"span",18),a()),n&2){let e=d().$implicit;l(),T(" ",e.docentes.especialidad.nombres," ",e.docentes.especialidad.apellidos," "),l(),p("ngIf",e.docentes.especialidad.celular_trabajo)}}function Gt(n,t){if(n&1&&(r(0,"span"),s(1),a()),n&2){let e=d(2).$implicit;l(),E("(",e.docentes.practica_conjuntos.celular_trabajo,")")}}function Wt(n,t){if(n&1&&(r(0,"span"),s(1),u(2,Gt,2,1,"span",18),a()),n&2){let e=d().$implicit;l(),T(" ",e.docentes.practica_conjuntos.nombres," ",e.docentes.practica_conjuntos.apellidos," "),l(),p("ngIf",e.docentes.practica_conjuntos.celular_trabajo)}}function qt(n,t){if(n&1&&(r(0,"span"),s(1),a()),n&2){let e=d(2).$implicit;l(),E("(",e.docentes.instrumento_complementario.celular_trabajo,")")}}function Qt(n,t){if(n&1&&(r(0,"span"),s(1),u(2,qt,2,1,"span",18),a()),n&2){let e=d().$implicit;l(),T(" ",e.docentes.instrumento_complementario.nombres," ",e.docentes.instrumento_complementario.apellidos," "),l(),p("ngIf",e.docentes.instrumento_complementario.celular_trabajo)}}function Zt(n,t){if(n&1&&(r(0,"tr")(1,"td"),s(2),a(),r(3,"td"),s(4),a(),r(5,"td"),s(6),a(),r(7,"td"),s(8),a(),r(9,"td"),u(10,Bt,3,3,"span",18),a(),r(11,"td"),u(12,Wt,3,3,"span",18),a(),r(13,"td"),u(14,Qt,3,3,"span",18),a()()),n&2){let e=t.$implicit;l(2),T("",e.lvl_curso," ",e.paralelo),l(2),C(e.nombre_materia),l(2),C(e.turno),l(2),C(e.modo_asistencia),l(2),p("ngIf",e.docentes==null||e.docentes.especialidad==null?null:e.docentes.especialidad.nombres),l(2),p("ngIf",e.docentes==null||e.docentes.practica_conjuntos==null?null:e.docentes.practica_conjuntos.nombres),l(2),p("ngIf",e.docentes==null||e.docentes.instrumento_complementario==null?null:e.docentes.instrumento_complementario.nombres)}}function Yt(n,t){if(n&1&&(r(0,"div",101)(1,"div",132),s(2),a(),r(3,"table",133)(4,"thead",134)(5,"tr")(6,"th"),s(7,"Paralelo"),a(),r(8,"th"),s(9,"Materia"),a(),r(10,"th"),s(11,"Turno"),a(),r(12,"th"),s(13,"Modo Asistencia"),a(),r(14,"th"),s(15,"Docente Especialidad"),a(),r(16,"th"),s(17,"Docente Pr\xE1ctica"),a(),r(18,"th"),s(19,"Docente Complementario"),a()()(),r(20,"tbody"),u(21,Zt,15,8,"tr",135),a()()()),n&2){let e=t.$implicit;l(2),C(e.nombre),l(19),p("ngForOf",e.materias)}}function Jt(n,t){if(n&1&&(r(0,"div",127)(1,"h4",128),s(2),u(3,zt,1,1,"img",129),a(),u(4,Yt,22,2,"div",130),a()),n&2){let e=t.$implicit;l(2),E(" ",e.nombre," "),l(),p("ngIf",e.logo),l(),p("ngForOf",e.carreras)}}var q=class q{constructor(t,e,i,o,c,m,f,b){this.router=t;this.route=e;this._tools=i;this._anios=o;this._inst=c;this._public=m;this._inicios=f;this._auth=b;this.ruta=se.ruta;this.perfilTipo=null;this.puedePublicarHorarios=!1;this.institucionesIdSesion=null;this.esSuperlcchs=!1;this.horariosInstituciones=[];this.horariosLoading=!1;this.horarioForm=new Pe({titulo:new U(""),subtitulo:new U(""),descripcion:new U("")});this.horarioUploadDragging=!1;this.horarioFile=null;this.horarioTempFilePath=null;this.horarioUploading=!1;this.horarioUploadProgress=null;this.horarioEditId=null;this.horarioEditOriginalArchivo=null;this.horarioSaving=!1;this.cursos=[];this.cursosFiltrados=[];this.instituciones=[];this.institucionesLogos=[];this.institucionSeleccionada=null;this.institucionesById=new Map;this.modalHorarioEl=null;this.modalHorarioHiddenListener=null;this.filtroHorario=!1;this.filterHorarioForm=new Pe({txt:new U("")});this.anio=[];this.gestion_id_seleccionado="";this.CIVerificar="";this.CursosMateriasEstudiante=[]}ngAfterViewInit(){this.modalHorarioEl=document.getElementById("ModalPublicarHorario"),this.modalHorarioEl&&(this.modalHorarioHiddenListener=()=>{this.forceCleanupModalArtifacts()},this.modalHorarioEl.addEventListener("hidden.bs.modal",this.modalHorarioHiddenListener))}ngOnDestroy(){this.modalHorarioEl&&this.modalHorarioHiddenListener&&this.modalHorarioEl.removeEventListener("hidden.bs.modal",this.modalHorarioHiddenListener),this.modalHorarioEl=null,this.modalHorarioHiddenListener=null}ngOnInit(){this.CargarInstituciones(),this.CargarAnio(),this.iniciarFormfilterHorario(),this.iniciarFormHorario(),this._auth.pedirPerfil().subscribe({next:t=>{this.perfilTipo=t?.tipo??null,this.esSuperlcchs=this.perfilTipo==="superlcchs";let e=Number(t?.usuario?.instituciones_id??0);this.institucionesIdSesion=Number.isFinite(e)&&e>0?e:null,this.puedePublicarHorarios=this.perfilTipo==="planteladministrativos"||this.perfilTipo==="superlcchs",this.tryAutoSelectInstitucion()},error:()=>{this.perfilTipo=null,this.puedePublicarHorarios=!1,this.esSuperlcchs=!1,this.institucionesIdSesion=null}})}forceCleanupModalArtifacts(){try{document.querySelectorAll(".modal-backdrop").forEach(t=>t.remove()),document.body.classList.remove("modal-open"),document.body.style.removeProperty("overflow"),document.body.style.removeProperty("padding-right")}catch{}}getGestionAnioSeleccionado(){let t=(this.gestion_id_seleccionado??"").toString();return t?((this.anio??[]).find(i=>(i?.id??"").toString()===t)?.Anio??"").toString():""}iniciarFormHorario(){let t=this.getGestionAnioSeleccionado();this.horarioForm.patchValue({titulo:"HORARIO "+(t||new Date().getFullYear()),subtitulo:t||"",descripcion:""},{emitEvent:!1})}get esEdicionHorario(){return this.horarioEditId!=null}nuevoHorario(){this.horarioEditId=null,this.horarioEditOriginalArchivo=null,this.resetHorarioDraft(!0)}editarHorario(t){if(!this.puedeEditarHorario(t)){this._tools.MostrarMensaje("warning","No autorizado");return}this.resetHorarioDraft(!0),this.horarioEditId=Number(t?.id??0)||null,this.horarioEditOriginalArchivo=t?.archivo??null;let e=this.getGestionAnioSeleccionado()||(t?.subtitulo??"");this.horarioForm.patchValue({titulo:(t?.titulo??"").toString(),subtitulo:e.toString(),descripcion:(t?.descripcion??"").toString()},{emitEvent:!1})}cerrarModalHorario(){let t=document.getElementById("ModalPublicarHorario");if(t){try{(ee.getOrCreateInstance?ee.getOrCreateInstance(t):ee.getInstance(t)||new ee(t)).hide()}catch{}setTimeout(()=>this.forceCleanupModalArtifacts(),350)}}CargarHorariosPublicados(){this.horariosLoading=!0;let t=this.getGestionAnioSeleccionado(),e=this.institucionSeleccionada?.id!=null?this.institucionSeleccionada.id:void 0;this._public.obtenerHorariosPublicadosFiltrado({anio:t,institucion_id:e}).subscribe({next:i=>{this.horariosInstituciones=Array.isArray(i?.data)?i.data:[],this.horariosLoading=!1},error:i=>{console.error("Error al cargar horarios publicados",i),this.horariosInstituciones=[],this.horariosLoading=!1}})}subirArchivoHorario(t){t&&(this.horarioTempFilePath&&(this._tools.EliminarArchivo(this.horarioTempFilePath),this.horarioTempFilePath=null),this.horarioFile=t,this.horarioUploading=!0,this.horarioUploadProgress=0,this._tools.SubirArchivo(t,"inicioshorarios").subscribe({next:e=>{if(e.type===De.UploadProgress){let i=e.total??0;i>0&&(this.horarioUploadProgress=Math.round(e.loaded/i*100))}if(e.type===De.Response){let i=e.body?.filePath;i&&(this.horarioTempFilePath=i),this.horarioUploading=!1,this.horarioUploadProgress=100}},error:e=>{console.log("ERROR SUBIENDO HORARIO",e),this.horarioUploading=!1,this.horarioUploadProgress=null,this._tools.MostrarMensaje("error","Error al subir archivo")}}))}onHorarioFileInputChange(t){let e=t.target;if(!e?.files||e.files.length===0)return;let i=e.files[0];this.subirArchivoHorario(i)}onHorarioDragOver(t){t.preventDefault(),t.stopPropagation(),this.horarioUploadDragging=!0}onHorarioDragLeave(t){t.preventDefault(),t.stopPropagation(),this.horarioUploadDragging=!1}onHorarioDrop(t){t.preventDefault(),t.stopPropagation(),this.horarioUploadDragging=!1;let e=t.dataTransfer?.files?.[0];e&&this.subirArchivoHorario(e)}resetHorarioDraft(t){t&&this.horarioTempFilePath&&this._tools.EliminarArchivo(this.horarioTempFilePath),this.horarioTempFilePath=null,this.horarioFile=null,this.horarioUploading=!1,this.horarioUploadProgress=null,this.iniciarFormHorario()}limpiarHorarioDraft(){this.horarioEditId=null,this.horarioEditOriginalArchivo=null,this.resetHorarioDraft(!0)}puedeEditarHorario(t){if(!this.puedePublicarHorarios)return!1;if(this.esSuperlcchs)return!0;let e=this.institucionesIdSesion;if(!e)return!1;let i=Number(t?.id_institucion??t?.institucion_id??0);return Number.isFinite(i)&&i>0&&i===e}eliminarHorario(t){return $(this,null,function*(){if(!this.puedeEditarHorario(t)){this._tools.MostrarMensaje("warning","No autorizado");return}if(!(yield this._tools.mostrarMensajeConfirm("Eliminar horario","\xBFDesea eliminar este horario? Esta acci\xF3n no se puede deshacer.","warning","Eliminar","Cancelar")))return;let i=Number(t?.id??0);!Number.isFinite(i)||i<=0||this._inicios.Eliminarinicios(i).subscribe({next:()=>{t?.archivo&&this._tools.EliminarArchivo(t.archivo),this._tools.MostrarMensaje("success","Eliminado"),this.horarioEditId===i&&this.limpiarHorarioDraft(),this.CargarHorariosPublicados()},error:o=>{console.error("Error al eliminar horario",o),this._tools.MostrarMensaje("error","No se pudo eliminar")}})})}guardarHorario(){if(!this.puedePublicarHorarios){this._tools.MostrarMensaje("warning","No tiene permisos para publicar horarios");return}if(this.horarioSaving)return;if(this.horarioUploading){this._tools.MostrarMensaje("warning","Espere a que termine la subida");return}let t=this.getGestionAnioSeleccionado();if(!t){this._tools.MostrarMensaje("warning","Seleccione una gesti\xF3n");return}let e=(this.horarioForm.get("titulo")?.value??"").toString().trim(),i=(this.horarioForm.get("descripcion")?.value??"").toString().trim();if(!e){this._tools.MostrarMensaje("warning","Ingrese un t\xEDtulo");return}let o=this.horarioTempFilePath||this.horarioEditOriginalArchivo;if(!o){this._tools.MostrarMensaje("warning","Suba un PDF o imagen");return}let c={categoria:"HORARIO",titulo:e,subtitulo:t,descripcion:i,archivo:o,estado:"ACTIVO",visibilidad:"VISIBLE"};this.horarioSaving=!0;let m=this.horarioEditId!=null,f=()=>{this.horarioSaving=!1,this._tools.MostrarMensaje("success",m?"Horario actualizado":"Horario publicado"),m&&this.horarioTempFilePath&&this.horarioEditOriginalArchivo&&this.horarioEditOriginalArchivo!==this.horarioTempFilePath&&this._tools.EliminarArchivo(this.horarioEditOriginalArchivo),this.horarioEditId=null,this.horarioEditOriginalArchivo=null,this.resetHorarioDraft(!1),this.CargarHorariosPublicados(),this.cerrarModalHorario()},b=S=>{console.error(m?"Error al actualizar horario":"Error al publicar horario",S),this.horarioSaving=!1,this._tools.MostrarMensaje("error",m?"No se pudo actualizar el horario":"No se pudo publicar el horario")};m?this._inicios.Modificarinicios(c,this.horarioEditId).subscribe({next:f,error:b}):this._inicios.Agregarinicios(c).subscribe({next:f,error:b})}iniciarFormfilterHorario(){this.filterHorarioForm.get("txt").valueChanges.subscribe(t=>{console.log("entered data is ",t),this.filtroHorario=!0,this.aplicarFiltros()})}filterHorario(t){this.filterHorarioForm.patchValue({txt:t},{emitEvent:!1}),this.aplicarFiltros()}aplicarFiltros(){let t=(this.filterHorarioForm.get("txt")?.value??"").toString().toUpperCase().trim(),e=this.institucionSeleccionada?.id!=null?String(this.institucionSeleccionada.id):"",i=Array.isArray(this.cursos)?[...this.cursos]:[];e&&(i=i.filter(o=>String(o?.instituciones_id??"")===e)),t&&(i=i.filter(o=>String(o?.NivelCurso??"").toUpperCase().includes(t))),this.cursosFiltrados=i}CargarInstituciones(){this._inst.Obtenerinstituciones().subscribe({next:t=>{console.log("instituciones",t);let i=(Array.isArray(t?.data?.data)?t.data.data:Array.isArray(t?.data)?t.data:[]).filter(o=>String(o?.Visibilidad??"VISIBLE").toUpperCase()==="VISIBLE").filter(o=>String(o?.Estado??"ACTIVO").toUpperCase()==="ACTIVO").sort((o,c)=>String(o?.Nombre??"").localeCompare(String(c?.Nombre??"")));this.instituciones=i,this.institucionesLogos=i.filter(o=>!!o?.Logo),this.institucionesById=new Map((i||[]).map(o=>[String(o?.id??""),o])),this.tryAutoSelectInstitucion()},error:t=>{console.error("Error al cargar carreras",t),this.instituciones=[],this.institucionesLogos=[],this.institucionesById=new Map}})}institucionColorFuerte(t){let e=this.institucionesById.get(String(t??""));return e?.ColorFuerte||e?.ColorInstitucional||"#0d6efd"}institucionColorBajo(t){return this.institucionesById.get(String(t??""))?.ColorBajo||"#f8f9fa"}tryAutoSelectInstitucion(){if(this.institucionesIdSesion&&this.instituciones.length>0&&!this.institucionSeleccionada){let t=this.instituciones.find(e=>Number(e?.id)===this.institucionesIdSesion);t&&this.seleccionarInstitucion(t)}}seleccionarInstitucion(t){t?this.institucionSeleccionada?.id===t.id?this.institucionSeleccionada=null:this.institucionSeleccionada=t:this.institucionSeleccionada=null,this.CargarCursosDesdeMaterias(),this.CargarHorariosPublicados()}CargarAnio(){this._anios.Obteneranios().subscribe({next:t=>{console.log("anios",t),this.anio=t.data??[];let e=this.anio.find(i=>(i?.Predeterminado??"")==="SI")??this.anio[0];e?.id&&(this.gestion_id_seleccionado=e.id,this.onGestionChange())},error:t=>{console.error("Error al cargar",t),this.instituciones=[],this.institucionesLogos=[]}})}onGestionChange(){if(this.CargarCursosDesdeMaterias(),this.CargarHorariosPublicados(),!this.esEdicionHorario)this.iniciarFormHorario();else{let t=this.getGestionAnioSeleccionado();this.horarioForm.patchValue({subtitulo:t},{emitEvent:!1})}}CargarCursosDesdeMaterias(){if(!this.gestion_id_seleccionado){this.cursos=[],this.cursosFiltrados=[];return}let t={Anio_id:this.gestion_id_seleccionado};this.institucionSeleccionada?.id!=null&&(t.instituciones_id=this.institucionSeleccionada.id),this._public.obtenerHorariosCursos(t).subscribe({next:e=>{console.log("CURSOS FILTRADOS",e),this.cursos=(e??[]).map(i=>Te(we({},i),{selectedMateriaId:"",selectedMateriaNombre:"",ModoMateria:i.ModoMateria??""})),this.aplicarFiltros()},error:e=>{console.error("Error al cargar anios",e),this.cursos=[],this.cursosFiltrados=[]}})}onSelectMateria(t,e){t.selectedMateriaId=e?.materia_id??"",t.selectedMateriaNombre=`${e?.SiglaMateria??""} ${e?.NombreMateria??""}`.trim(),t.ModoMateria=e?.ModoMateria??""}onMateriaIdChange(t,e){let i=(e??"").toString(),o=(t?.materias??[]).find(c=>(c?.materia_id??"").toString()===i);o?this.onSelectMateria(t,o):(t.selectedMateriaId="",t.selectedMateriaNombre="",t.ModoMateria="")}abrirParalelos(t){console.log("intentanto abrir"),t.ctrlKey?window.open("/publicos/paralelos","_blank"):this.router.navigate(["/publicos/paralelos"])}AbrirParalelosPorCurso(t,e){t.selectedMateriaId?sessionStorage.setItem("HORARIOS_MODO","xMATERIA"):sessionStorage.setItem("HORARIOS_MODO","MEZCLADO"),sessionStorage.setItem("HORARIOS_ANIO_ID",(this.gestion_id_seleccionado??"").toString()),sessionStorage.setItem("HORARIOS_LVL_CURSO",(t.LvlCurso??"").toString()),sessionStorage.setItem("HORARIOS_PARALELO",(t.Paralelo??"").toString()),sessionStorage.setItem("HORARIOS_TURNO",(t.Turno??"").toString()),sessionStorage.setItem("HORARIOS_MATERIA_ID",(t.selectedMateriaId??"").toString()),sessionStorage.setItem("HORARIOS_MATERIA_TITULO",(t.selectedMateriaNombre??"TODAS LAS MATERIAS").toString()),sessionStorage.setItem("MODO_MATERIA",(t.ModoMateria??"").toString()),t?.instituciones_id!=null?(sessionStorage.setItem("HORARIOS_INSTITUCION_ID",String(t.instituciones_id)),t?.institucion_nombre&&sessionStorage.setItem("HORARIOS_INSTITUCION_NOMBRE",String(t.institucion_nombre)),t?.institucion_logo&&sessionStorage.setItem("HORARIOS_INSTITUCION_LOGO",String(t.institucion_logo))):(sessionStorage.removeItem("HORARIOS_INSTITUCION_ID"),sessionStorage.removeItem("HORARIOS_INSTITUCION_NOMBRE"),sessionStorage.removeItem("HORARIOS_INSTITUCION_LOGO")),this.abrirParalelos(e)}VerificarCursoParalelo(){console.log(this.CIVerificar,this.gestion_id_seleccionado);let t={CI:this.CIVerificar,Anio_id:this.gestion_id_seleccionado};this._public.CargarMateriasEstudiantesMultiInstitucionPublico(t).subscribe({next:e=>{console.log("CURSOS FILTRADOS",e.data),this.CursosMateriasEstudiante=e.data??[],this.CursosMateriasEstudiante.length==0&&this._tools.MensajeInformacion("ESTUDIANTE A\xDAN SIN MATERIAS ASIGNADAS","SI SU CARNET UTILIZA COMPLEMENTO ENTONCES ESCRIBIR, ejemplo: 12345-H1","error")},error:e=>{console.error("Error al cargar anios",e),this.CursosMateriasEstudiante=[],this._tools.MensajeInformacion("ESTUDIANTE A\xDAN SIN MATERIAS ASIGNADAS","SI SU CARNET UTILIZA COMPLEMENTO ENTONCES ESCRIBIR, ejemplo: 12345-H1","error")}})}};q.\u0275fac=function(e){return new(e||q)(M(Fe),M(Re),M(fe),M(xe),M(ge),M(Ce),M(Qe),M(he))},q.\u0275cmp=ie({type:q,selectors:[["app-horarios"]],standalone:!1,decls:105,vars:18,consts:[["horarioFileInput",""],[1,"container","mt-4"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"lead","text-secondary","subtitulosGlobales"],[1,"container-fluid","py-3"],[1,"row","g-3"],[1,"col-12","col-lg-4"],[1,"card","shadow-sm","border-0","sticky-lg-top","horarios-panel"],[1,"card-body"],[1,"d-flex","align-items-center","justify-content-between","gap-2"],[1,"h5","fw-bold","mb-0"],[1,"small","text-muted"],[1,"d-flex","align-items-center","gap-2"],["type","button","class","btn btn-sm btn-primary","data-bs-toggle","modal","data-bs-target","#ModalPublicarHorario",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],["class","mt-3",4,"ngIf"],[4,"ngIf"],["id","ModalPublicarHorario","tabindex","-1","aria-hidden","true","data-bs-backdrop","static","data-bs-keyboard","false",1,"modal","fade"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["class","alert alert-warning",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-success",3,"click","disabled"],[1,"col-12","col-lg-8"],[1,"col-sm-6","alert","alert-info","py-2"],[1,"fw-semibold"],[1,"small"],["class","mb-3",4,"ngIf"],[1,"col-sm-6","row"],[1,"form-floating","mb-3","col-4"],[1,"form-select",3,"ngModelChange","change","ngModel"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"form-floating","mb-3","col-8"],["type","button","data-bs-toggle","modal","data-bs-target","#AveriguarParalelo",1,"btn","btn-primary"],[1,"col-sm-12","ms-auto","d-flex","justify-content-end"],[1,"input-group"],[1,"form-floating",3,"formGroup"],["type","text","formControlName","txt","placeholder","EJ: PRIMERO SUPERIOR",1,"form-control"],["class","container text-center mt-5",4,"ngIf"],["class","col-12 col-md-6 col-lg-4",4,"ngFor","ngForOf"],["id","AveriguarParalelo","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"mb-4"],[1,"font-weight-bold","text-center","color-fuente"],[1,"form-group","row"],[1,"form-floating","mb-3","col-6"],[1,"form-label","col-6"],[1,"form-floating","mb-3","col-sm-12"],["type","text","placeholder","",1,"form-control",3,"ngModelChange","ngModel"],[1,"invalid-feedback"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["class","mb-5",4,"ngFor","ngForOf"],["type","button","data-bs-toggle","modal","data-bs-target","#ModalPublicarHorario",1,"btn","btn-sm","btn-primary",3,"click"],[1,"mt-3"],[1,"text-muted","small"],["class","text-muted small mt-3",4,"ngIf"],["class","mt-3",4,"ngFor","ngForOf"],[1,"text-muted","small","mt-3"],[1,"horario-inst-card"],[1,"horario-inst-header"],["class","institucion-mini-logo",3,"src","alt",4,"ngIf"],[1,"fw-semibold","small"],["class","badge bg-secondary",4,"ngIf"],[1,"horario-inst-body"],["class","horario-item",4,"ngFor","ngForOf"],[1,"institucion-mini-logo",3,"src","alt"],[1,"badge","bg-secondary"],[1,"horario-item"],[1,"d-flex","align-items-start","justify-content-between","gap-2"],["class","small text-muted",4,"ngIf"],["class","btn btn-sm btn-outline-secondary","target","_blank","rel","noopener",3,"href",4,"ngIf"],["type","button","class","btn btn-sm btn-outline-primary","data-bs-toggle","modal","data-bs-target","#ModalPublicarHorario",3,"click",4,"ngIf"],["type","button","class","btn btn-sm btn-outline-danger",3,"click",4,"ngIf"],["target","_blank","rel","noopener",1,"btn","btn-sm","btn-outline-secondary",3,"href"],["type","button","data-bs-toggle","modal","data-bs-target","#ModalPublicarHorario",1,"btn","btn-sm","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"alert","alert-warning"],[1,"horario-dropzone",3,"dragover","dragleave","drop"],["type","file","accept","application/pdf,image/*","hidden","",3,"change"],["type","button",1,"btn","btn-primary",3,"click"],["class","small text-muted mt-2",4,"ngIf"],[1,"row","g-2","mt-3",3,"formGroup"],[1,"col-12"],[1,"form-label"],["formControlName","subtitulo","readonly","",1,"form-control"],["formControlName","titulo","placeholder","Ej: HORARIO 2026",1,"form-control"],["formControlName","descripcion","rows","3","placeholder","Detalle (opcional)",1,"form-control"],[1,"small","text-muted","mt-2"],[1,"d-flex","align-items-center","justify-content-between"],[1,"small","fw-semibold"],[1,"progress",2,"height","10px"],["role","progressbar",1,"progress-bar"],[1,"mb-3"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap","gap-2"],["type","button",1,"btn","btn-sm","btn-outline-light",3,"click","disabled"],[1,"mt-2","d-flex","flex-wrap","gap-2"],["type","button","class","btn btn-light border institucion-logo-btn",3,"active","title","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-light","border","institucion-logo-btn",3,"click","title"],[1,"institucion-logo",3,"src","alt"],[3,"value"],[1,"container","text-center","mt-5"],[1,"row",2,"display","flex","flex-direction","column","align-items","center","position","relative"],[1,"alert","alert-warning","d-inline-block"],[1,"fw-bold"],[1,"col-12","col-md-6","col-lg-4"],[1,"card","h-100","shadow-sm","border-0","curso-card"],[1,"d-flex","justify-content-between","align-items-start","gap-3"],[1,"min-w-0"],["type","button",1,"btn","btn-link","p-0","fw-bold","text-decoration-none","curso-title",3,"click"],["class","mt-2 d-flex align-items-center gap-2",4,"ngIf"],[1,"badge","curso-badge"],[1,"form-label","fw-semibold","mb-1"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel","ngModelOptions"],["value",""],[1,"d-grid","gap-2","mt-3"],["type","button",1,"btn","btn-inst","fw-semibold",3,"click"],[1,"mt-2","d-flex","align-items-center","gap-2"],[1,"institucion-pill"],[1,"mb-5"],[1,"fw-bold","mb-2"],["alt","Logo","style","height:32px;vertical-align:middle;",3,"src",4,"ngIf"],["class","mb-3",4,"ngFor","ngForOf"],["alt","Logo",2,"height","32px","vertical-align","middle",3,"src"],[1,"fw-semibold","text-primary","mb-1"],[1,"table","table-bordered","table-sm"],[1,"table-light"],[4,"ngFor","ngForOf"]],template:function(e,i){e&1&&(r(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),s(4,"HORARIOS Y LISTAS DE ESTUDIANTES"),a(),r(5,"p",5),s(6,"Verifique su horario/curso/materia/paralelo"),a()()()(),r(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div")(14,"div",12),s(15,"HORARIOS"),a(),r(16,"div",13),s(17,"Publicados por instituci\xF3n"),a()(),r(18,"div",14),u(19,gt,2,0,"button",15),r(20,"button",16),h("click",function(){return i.CargarHorariosPublicados()}),s(21,"Actualizar"),a()()(),u(22,ht,3,0,"div",17)(23,Dt,3,2,"ng-container",18),a()()(),r(24,"div",19)(25,"div",20)(26,"div",21)(27,"div",22)(28,"h5",23),s(29),a(),r(30,"button",24),h("click",function(){return i.limpiarHorarioDraft()}),a()(),r(31,"div",25),u(32,Pt,2,0,"div",26)(33,Tt,27,5,"ng-container",18),a(),r(34,"div",27)(35,"button",28),h("click",function(){return i.limpiarHorarioDraft()}),s(36,"Cancelar"),a(),r(37,"button",29),h("click",function(){return i.guardarHorario()}),s(38),a()()()()(),r(39,"div",30)(40,"div",2)(41,"div",31)(42,"div",32),s(43,"C\xF3mo usar"),a(),r(44,"div",33),s(45,"1) Seleccione gesti\xF3n \u2192 se listar\xE1n los cursos"),a(),r(46,"div",33),s(47,"2) En cada curso, elija una materia (opcional) y pulse \u201CLISTAR\u201D"),a(),x(48,"hr"),r(49,"div",33),s(50,'i) Busque el estado de sus materias usando el boton "AVERIGUAR CURSO PARALELO" '),a(),u(51,kt,8,2,"div",34),a(),r(52,"div",35)(53,"div",36)(54,"select",37),N("ngModelChange",function(c){return k(i.gestion_id_seleccionado,c)||(i.gestion_id_seleccionado=c),c}),h("change",function(){return i.onGestionChange()}),r(55,"option",38),s(56,"Seleccione una opci\xF3n"),a(),u(57,Nt,2,2,"option",39),a(),r(58,"label"),s(59,"Gesti\xF3n"),a()(),r(60,"div",40)(61,"button",41),s(62,"AVERIGUAR CURSO PARALELO (POR CI)"),a()(),r(63,"div",2)(64,"div",42)(65,"div",43)(66,"div",44),x(67,"input",45),r(68,"label"),s(69,"Buscar"),a()()()()()()(),u(70,Rt,7,0,"div",46),r(71,"div",7),u(72,jt,21,20,"div",47),a()()()(),r(73,"div",48)(74,"div",49)(75,"div",21)(76,"div",22)(77,"h5",23),s(78," CONSULTAR CURSO Y PARALELO"),a(),x(79,"button",50),a(),r(80,"div",25)(81,"div",51)(82,"h3",52),s(83,"DEBE INTRODUCIR SU CARNET CORRECTAMENTE. EJEMPLO: 4567814 - 12345-H1 (si tiene complemento)"),a(),r(84,"div",53)(85,"div",54)(86,"select",37),N("ngModelChange",function(c){return k(i.gestion_id_seleccionado,c)||(i.gestion_id_seleccionado=c),c}),h("change",function(){return i.CargarCursosDesdeMaterias()}),r(87,"option",38),s(88,"Seleccione una opci\xF3n"),a(),u(89,Ut,2,2,"option",39),a(),r(90,"label"),s(91,"SE BUSCAR\xC1 LA INFORMACION PARA LA GESTI\xD3N"),a()(),r(92,"label",55),s(93,"SI DESEA VERIFICAR EN OTRA GESTION SELECCIONE OTRA. "),a()(),r(94,"div",53)(95,"div",56)(96,"input",57),N("ngModelChange",function(c){return k(i.CIVerificar,c)||(i.CIVerificar=c),c}),a(),r(97,"label"),s(98,"CARNET (SOLO N\xDAMEROS, SI TIENE COMPLEMENTO SU CI COLOCAR SEGUIDO)"),a(),r(99,"div",58),s(100,"Este campo es obligatorio*"),a()(),r(101,"button",59),h("click",function(){return i.VerificarCursoParalelo()}),s(102,"BUSCAR"),a()()(),u(103,Jt,5,3,"div",60),a(),x(104,"div",27),a()()()),e&2&&(l(19),p("ngIf",i.puedePublicarHorarios),l(3),p("ngIf",i.horariosLoading),l(),p("ngIf",!i.horariosLoading),l(6),C(i.esEdicionHorario?"Editar horario":"Publicar horario"),l(3),p("ngIf",!i.puedePublicarHorarios),l(),p("ngIf",i.puedePublicarHorarios),l(4),p("disabled",!i.puedePublicarHorarios||i.horarioUploading||i.horarioSaving),l(),E(" ",i.esEdicionHorario?"Guardar cambios":"Publicar"," "),l(13),p("ngIf",i.institucionesLogos==null?null:i.institucionesLogos.length),l(3),O("ngModel",i.gestion_id_seleccionado),l(3),p("ngForOf",i.anio),l(9),p("formGroup",i.filterHorarioForm),l(4),p("ngIf",i.cursosFiltrados.length===0),l(2),p("ngForOf",i.cursosFiltrados),l(14),O("ngModel",i.gestion_id_seleccionado),l(3),p("ngForOf",i.anio),l(7),O("ngModel",i.CIVerificar),l(7),p("ngForOf",i.CursosMateriasEstudiante))},dependencies:[re,le,ue,_e,ce,me,de,He,pe,je,Ue],styles:['@charset "UTF-8";.no-horario-svg[_ngcontent-%COMP%]{width:200px;height:200px;margin:50px auto auto;display:block}.institucion-logo-btn[_ngcontent-%COMP%]{padding:6px;border-radius:12px;line-height:0}.institucion-logo-btn.active[_ngcontent-%COMP%]{outline:2px solid rgba(25,135,84,.5);box-shadow:0 0 0 .25rem #19875426}.institucion-logo[_ngcontent-%COMP%]{width:44px;height:44px;object-fit:contain;display:block}.institucion-mini-logo[_ngcontent-%COMP%]{width:22px;height:22px;object-fit:contain;display:block}.horarios-panel[_ngcontent-%COMP%]{top:12px}.horario-dropzone[_ngcontent-%COMP%]{border:2px dashed rgba(13,110,253,.35);border-radius:12px;padding:12px;background:#fff;transition:background .12s ease,border-color .12s ease}.horario-dropzone.dragging[_ngcontent-%COMP%]{background:#0d6efd0d;border-color:#0d6efda6}.horario-inst-card[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.08);border-left:6px solid #0d6efd;border-radius:12px;overflow:hidden;background:#fff}.horario-inst-header[_ngcontent-%COMP%]{padding:10px 12px;border-bottom:1px solid rgba(0,0,0,.06)}.horario-inst-body[_ngcontent-%COMP%]{padding:10px 12px}.horario-item[_ngcontent-%COMP%]{padding:10px 0;border-bottom:1px dashed rgba(0,0,0,.08)}.horario-item[_ngcontent-%COMP%]:last-child{border-bottom:0}.curso-card[_ngcontent-%COMP%]{border-left:6px solid #0d6efd;border-radius:14px;overflow:hidden;transition:transform .12s ease,box-shadow .12s ease}.curso-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 .5rem 1.25rem #00000014!important}.curso-title[_ngcontent-%COMP%]{text-align:left;line-height:1.15}.curso-badge[_ngcontent-%COMP%]{color:#fff;font-weight:700;letter-spacing:.2px}.institucion-pill[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;border:1px solid rgba(0,0,0,.12);background:#ffffffbf;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.btn-inst[_ngcontent-%COMP%]{color:#fff}.btn-inst[_ngcontent-%COMP%]:hover{filter:brightness(.95);color:#fff}.btn-inst[_ngcontent-%COMP%]:disabled{opacity:.65}']});var ve=q;var Xt=["modalDetalleDocente"],Kt=["modalAccionesGrupales"],ei=["modalSeleccionPlantillaExcel"],ti=["modalActualizarExcel"],z=(n,t)=>({"bi-caret-up":n,"bi-caret-down":t});function ii(n,t){if(n&1){let e=v();r(0,"button",47),h("click",function(){_(e);let o=d(2);return g(o.GenerarReporteListaEstudiantes())}),r(1,"span",48),x(2,"ng-lottie",49),a(),r(3,"span"),s(4,"GENERAR LISTA DE ESTUDIANTES"),a(),x(5,"span",50),a()}if(n&2){let e=d(2);l(2),p("options",e._tools.optionsarchive)}}function ni(n,t){if(n&1){let e=v();r(0,"button",51),h("click",function(){_(e);let o=d(2);return g(o.descargarRegistroExcel())}),r(1,"span",48),x(2,"ng-lottie",49),a(),r(3,"span"),s(4),a(),x(5,"span",50),a()}if(n&2){let e=d(2);p("disabled",e.descargandoExcel),l(2),p("options",e._tools.optionsarchive),l(2),C(e.descargandoExcel?"GENERANDO...":"DESCARGAR (EXCEL)")}}function oi(n,t){if(n&1){let e=v();r(0,"button",51),h("click",function(){_(e);let o=d(2);return g(o.abrirModalActualizarExcel())}),r(1,"span",48),x(2,"ng-lottie",49),a(),r(3,"span"),s(4),a(),x(5,"span",50),a()}if(n&2){let e=d(2);p("disabled",e.actualizandoExcel),l(2),p("options",e._tools.optionsarchive),l(2),C(e.actualizandoExcel?"ACTUALIZANDO...":"ACTUALIZAR DATOS ARCHIVO EXCEL")}}function ai(n,t){if(n&1){let e=v();r(0,"button",52),h("click",function(){_(e);let o=d(2);return g(o.abrirAccionesGrupales())}),r(1,"span",48),x(2,"ng-lottie",49),a(),r(3,"span"),s(4,"ACCIONES GRUPALES"),a(),x(5,"span",50),a()}if(n&2){let e=d(2);l(2),p("options",e._tools.optionstripleengranaje)}}function ri(n,t){if(n&1){let e=v();r(0,"div",60)(1,"input",61),N("ngModelChange",function(o){_(e);let c=d(3);return k(c.edicionDocentesActiva,o)||(c.edicionDocentesActiva=o),g(o)}),h("change",function(){_(e);let o=d(3);return g(o.onToggleEdicionDocentes())}),a(),r(2,"label",62),s(3,"Edici\xF3n de docentes"),a()()}if(n&2){let e=d(3);l(),O("ngModel",e.edicionDocentesActiva)}}function li(n,t){if(n&1){let e=v();r(0,"div",53)(1,"div",54)(2,"input",55),N("ngModelChange",function(o){_(e);let c=d(2);return k(c.reportarconInstrumentos,o)||(c.reportarconInstrumentos=o),g(o)}),a(),r(3,"label",56),s(4,"con Especialidad"),a()(),r(5,"div",54)(6,"input",57),N("ngModelChange",function(o){_(e);let c=d(2);return k(c.reportarcondocentesEspecialidad,o)||(c.reportarcondocentesEspecialidad=o),g(o)}),a(),r(7,"label",58),s(8,"con Docentes Especialidad"),a()(),u(9,ri,4,1,"div",59),a()}if(n&2){let e=d(2);l(2),O("ngModel",e.reportarconInstrumentos),l(4),O("ngModel",e.reportarcondocentesEspecialidad),l(3),p("ngIf",e.puedeEditarDocentes&&e.mostrarCamposMusicales)}}function si(n,t){if(n&1){let e=v();r(0,"div",63)(1,"button",52),h("click",function(){_(e);let o=d(2);return g(o.copiarListaExcel())}),r(2,"span",48),x(3,"ng-lottie",49),a(),r(4,"span"),s(5,"COPIAR INFORMACI\xD3N AL PORTAPAPELES"),a()()()}if(n&2){let e=d(2);l(3),p("options",e._tools.optionsUpload)}}function ci(n,t){if(n&1&&x(0,"i",64),n&2){let e=d(2);p("ngClass",j(1,z,e.getSortDirest("Ap_Paterno")==="asc",e.getSortDirest("Ap_Paterno")==="desc"))}}function di(n,t){if(n&1&&x(0,"i",64),n&2){let e=d(2);p("ngClass",j(1,z,e.getSortDirest("Ap_Materno")==="asc",e.getSortDirest("Ap_Materno")==="desc"))}}function pi(n,t){if(n&1&&x(0,"i",64),n&2){let e=d(2);p("ngClass",j(1,z,e.getSortDirest("Nombre")==="asc",e.getSortDirest("Nombre")==="desc"))}}function mi(n,t){if(n&1&&x(0,"i",64),n&2){let e=d(3);p("ngClass",j(1,z,e.getSortDirest("Docente_Especialidad_Apellidos")==="asc",e.getSortDirest("Docente_Especialidad_Apellidos")==="desc"))}}function ui(n,t){if(n&1){let e=v();r(0,"th",65),h("click",function(o){_(e);let c=d(2);return g(c.sortByest("Docente_Especialidad_Apellidos",o))}),s(1," Doc. Especialidad "),u(2,mi,1,4,"i",37),a()}if(n&2){let e=d(2);l(2),p("ngIf",e.isSortedest("Docente_Especialidad_Apellidos"))}}function _i(n,t){if(n&1&&x(0,"i",64),n&2){let e=d(3);p("ngClass",j(1,z,e.getSortDirest("Docente_Practica_Conjuntos_Apellidos")==="asc",e.getSortDirest("Docente_Practica_Conjuntos_Apellidos")==="desc"))}}function gi(n,t){if(n&1){let e=v();r(0,"th",66),h("click",function(o){_(e);let c=d(2);return g(c.sortByest("Docente_Practica_Conjuntos_Apellidos",o))}),s(1," Doc. Prac. Conj. "),u(2,_i,1,4,"i",37),a()}if(n&2){let e=d(2);l(2),p("ngIf",e.isSortedest("Docente_Practica_Conjuntos_Apellidos"))}}function hi(n,t){if(n&1&&x(0,"i",64),n&2){let e=d(3);p("ngClass",j(1,z,e.getSortDirest("Docente_Instrumento_Complementario_Apellidos")==="asc",e.getSortDirest("Docente_Instrumento_Complementario_Apellidos")==="desc"))}}function fi(n,t){if(n&1){let e=v();r(0,"th",67),h("click",function(o){_(e);let c=d(2);return g(c.sortByest("Docente_Instrumento_Complementario_Apellidos",o))}),s(1," Doc. Inst. Comp. "),u(2,hi,1,4,"i",37),a()}if(n&2){let e=d(2);l(2),p("ngIf",e.isSortedest("Docente_Instrumento_Complementario_Apellidos"))}}function xi(n,t){if(n&1&&x(0,"i",64),n&2){let e=d(3);p("ngClass",j(1,z,e.getSortDirest("InstrumentoMusical")==="asc",e.getSortDirest("InstrumentoMusical")==="desc"))}}function Ci(n,t){if(n&1){let e=v();r(0,"th",36),h("click",function(o){_(e);let c=d(2);return g(c.sortByest("InstrumentoMusical",o))}),s(1," Especialidad "),u(2,xi,1,4,"i",37),a()}if(n&2){let e=d(2);l(2),p("ngIf",e.isSortedest("InstrumentoMusical"))}}function vi(n,t){if(n&1&&x(0,"i",64),n&2){let e=d(3);p("ngClass",j(1,z,e.getSortDirest("InstrumentoMusicalSecundario")==="asc",e.getSortDirest("InstrumentoMusicalSecundario")==="desc"))}}function bi(n,t){if(n&1){let e=v();r(0,"th",68),h("click",function(o){_(e);let c=d(2);return g(c.sortByest("InstrumentoMusicalSecundario",o))}),s(1," Instr. Secundario "),u(2,vi,1,4,"i",37),a()}if(n&2){let e=d(2);l(2),p("ngIf",e.isSortedest("InstrumentoMusicalSecundario"))}}function Ei(n,t){n&1&&(r(0,"th",35),s(1,"CELULAR_EST"),a())}function Si(n,t){n&1&&(r(0,"th",35),s(1,"PADRE"),a())}function Ii(n,t){n&1&&(r(0,"th",35),s(1,"MADRE"),a())}function Mi(n,t){n&1&&(r(0,"tr")(1,"td",35)(2,"div",69)(3,"span",70),s(4,"Cargando..."),a()()()()),n&2&&(l(),Me("colspan",5))}function yi(n,t){n&1&&(r(0,"tr")(1,"td",35),s(2,"No hay datos disponibles"),a()()),n&2&&(l(),Me("colspan",5))}function Di(n,t){if(n&1&&(r(0,"div",76),s(1),a()),n&2){let e=d().$implicit;l(),E("CI: ",e.CI)}}function Pi(n,t){if(n&1&&(r(0,"div",76),s(1),a()),n&2){let e=d().$implicit;l(),E(" ",e.Sexo)}}function Ai(n,t){if(n&1&&(r(0,"span"),s(1),a()),n&2){let e=d(2).$implicit;l(),E("Edad: ",e.Edad)}}function wi(n,t){if(n&1&&(r(0,"div",76),u(1,Ai,2,1,"span",44),a()),n&2){let e=d(3);l(),p("ngIf",e.verdetallado)}}function Ti(n,t){if(n&1&&(r(0,"div",77),s(1),a()),n&2){let e=d().$implicit;l(),E(" Asig. ",e.CantidadMateriasAsignadas)}}function Oi(n,t){if(n&1&&(r(0,"span"),s(1),a()),n&2){let e=d(2).$implicit;l(),E("Est. ",e.Categoria)}}function ki(n,t){if(n&1&&(r(0,"div",76),u(1,Oi,2,1,"span",44),a()),n&2){let e=d(3);l(),p("ngIf",e.verdetallado)}}function Ni(n,t){n&1&&(r(0,"span"),s(1,"A\xDAN SIN DESIGNAR"),a())}function Ri(n,t){if(n&1){let e=v();r(0,"a",80),h("click",function(o){return _(e),g(o.stopPropagation())}),r(1,"span",81),x(2,"ng-lottie",82),a(),r(3,"span"),s(4),a(),x(5,"span",50),a()}if(n&2){let e=d(3).$implicit,i=d(2);p("href",B("https://api.whatsapp.com/send?phone=591",e.Docente_Especialidad_CelularTrabajo),D),l(2),p("options",i._tools.optionsWhatsApp),l(2),C(e.Docente_Especialidad_CelularTrabajo)}}function Fi(n,t){if(n&1&&(A(0),oe(1,Ni,2,0,"span")(2,Ri,6,4,"a",79),r(3,"div",76),s(4),a(),w()),n&2){let e=d(2).$implicit;l(),ae(e.Docente_Especialidad_Apellidos==null&&e.Docente_Especialidad_Nombres==null?1:2),l(3),T("",e.Docente_Especialidad_Apellidos," ",e.Docente_Especialidad_Nombres)}}function Vi(n,t){n&1&&(r(0,"div",86),s(1,"Guardando..."),a())}function Hi(n,t){if(n&1){let e=v();r(0,"div",83)(1,"input",84),h("focus",function(o){_(e);let c=d(4);return g(c.abrirOverlayDocentes(o))})("click",function(o){_(e);let c=d(4);return o.stopPropagation(),g(c.abrirOverlayDocentes(o))})("keydown.escape",function(o){_(e);let c=d(4);return o.preventDefault(),g(c.salirModoEdicionDocente())}),a()(),u(2,Vi,2,0,"div",85)}if(n&2){let e=d(2).$implicit,i=d(2);l(),p("formControl",i.docEdicionInput),l(),p("ngIf",i.isGuardandoDocente(i.getRowInfoId(e),"planteldocadmins_id"))}}function Li(n,t){if(n&1){let e=v();r(0,"td",78),h("click",function(o){_(e);let c=d().$implicit,m=d(2);return g(m.edicionDocentesActiva?m.activarEdicionDocente(c,"planteldocadmins_id",o):null)}),u(1,Fi,5,3,"ng-container",10)(2,Hi,3,2,"ng-template",null,5,V),a()}if(n&2){let e=L(3),i=d().$implicit,o=d(2);F("docente-cell-editable",o.edicionDocentesActiva&&o.puedeEditarDocentes)("docente-cell-active",o.edicionDocentesActiva&&o.isCeldaDocenteActiva(o.getRowInfoId(i),"planteldocadmins_id")),l(),p("ngIf",!o.edicionDocentesActiva||!o.isCeldaDocenteActiva(o.getRowInfoId(i),"planteldocadmins_id"))("ngIfElse",e)}}function ji(n,t){n&1&&(r(0,"span"),s(1,"NINGUNO(A)"),a())}function Ui(n,t){if(n&1){let e=v();r(0,"a",80),h("click",function(o){return _(e),g(o.stopPropagation())}),r(1,"span",81),x(2,"ng-lottie",82),a(),r(3,"span"),s(4),a(),x(5,"span",50),a()}if(n&2){let e=d(3).$implicit,i=d(2);p("href",B("https://api.whatsapp.com/send?phone=591",e.Docente_Practica_Conjuntos_CelularTrabajo),D),l(2),p("options",i._tools.optionsWhatsApp),l(2),C(e.Docente_Practica_Conjuntos_CelularTrabajo)}}function zi(n,t){if(n&1&&(A(0),oe(1,ji,2,0,"span")(2,Ui,6,4,"a",79),r(3,"div",76),s(4),a(),w()),n&2){let e=d(2).$implicit;l(),ae(e.Docente_Practica_Conjuntos_Apellidos==null&&e.Docente_Practica_Conjuntos_Nombres==null?1:2),l(3),T("",e.Docente_Practica_Conjuntos_Apellidos," ",e.Docente_Practica_Conjuntos_Nombres)}}function $i(n,t){n&1&&(r(0,"div",86),s(1,"Guardando..."),a())}function Bi(n,t){if(n&1){let e=v();r(0,"div",83)(1,"input",84),h("focus",function(o){_(e);let c=d(4);return g(c.abrirOverlayDocentes(o))})("click",function(o){_(e);let c=d(4);return o.stopPropagation(),g(c.abrirOverlayDocentes(o))})("keydown.escape",function(o){_(e);let c=d(4);return o.preventDefault(),g(c.salirModoEdicionDocente())}),a()(),u(2,$i,2,0,"div",85)}if(n&2){let e=d(2).$implicit,i=d(2);l(),p("formControl",i.docEdicionInput),l(),p("ngIf",i.isGuardandoDocente(i.getRowInfoId(e),"planteldocadmins_idPC"))}}function Gi(n,t){if(n&1){let e=v();r(0,"td",78),h("click",function(o){_(e);let c=d().$implicit,m=d(2);return g(m.edicionDocentesActiva?m.activarEdicionDocente(c,"planteldocadmins_idPC",o):null)}),u(1,zi,5,3,"ng-container",10)(2,Bi,3,2,"ng-template",null,6,V),a()}if(n&2){let e=L(3),i=d().$implicit,o=d(2);F("docente-cell-editable",o.edicionDocentesActiva&&o.puedeEditarDocentes)("docente-cell-active",o.edicionDocentesActiva&&o.isCeldaDocenteActiva(o.getRowInfoId(i),"planteldocadmins_idPC")),l(),p("ngIf",!o.edicionDocentesActiva||!o.isCeldaDocenteActiva(o.getRowInfoId(i),"planteldocadmins_idPC"))("ngIfElse",e)}}function Wi(n,t){n&1&&(r(0,"span"),s(1,"NINGUNO(A)"),a())}function qi(n,t){if(n&1){let e=v();r(0,"a",80),h("click",function(o){return _(e),g(o.stopPropagation())}),r(1,"span",81),x(2,"ng-lottie",82),a(),r(3,"span"),s(4),a(),x(5,"span",50),a()}if(n&2){let e=d(3).$implicit,i=d(2);p("href",B("https://api.whatsapp.com/send?phone=591",e.Docente_Instrumento_Complementario_CelularTrabajo),D),l(2),p("options",i._tools.optionsWhatsApp),l(2),C(e.Docente_Instrumento_Complementario_CelularTrabajo)}}function Qi(n,t){if(n&1&&(A(0),oe(1,Wi,2,0,"span")(2,qi,6,4,"a",79),r(3,"div",76),s(4),a(),w()),n&2){let e=d(2).$implicit;l(),ae(e.Docente_Instrumento_Complementario_Apellidos==null&&e.Docente_Instrumento_Complementario_Nombres==null?1:2),l(3),T("",e.Docente_Instrumento_Complementario_Apellidos," ",e.Docente_Instrumento_Complementario_Nombres)}}function Zi(n,t){n&1&&(r(0,"div",86),s(1,"Guardando..."),a())}function Yi(n,t){if(n&1){let e=v();r(0,"div",83)(1,"input",84),h("focus",function(o){_(e);let c=d(4);return g(c.abrirOverlayDocentes(o))})("click",function(o){_(e);let c=d(4);return o.stopPropagation(),g(c.abrirOverlayDocentes(o))})("keydown.escape",function(o){_(e);let c=d(4);return o.preventDefault(),g(c.salirModoEdicionDocente())}),a()(),u(2,Zi,2,0,"div",85)}if(n&2){let e=d(2).$implicit,i=d(2);l(),p("formControl",i.docEdicionInput),l(),p("ngIf",i.isGuardandoDocente(i.getRowInfoId(e),"planteldocadmins_idOtros"))}}function Ji(n,t){if(n&1){let e=v();r(0,"td",78),h("click",function(o){_(e);let c=d().$implicit,m=d(2);return g(m.edicionDocentesActiva?m.activarEdicionDocente(c,"planteldocadmins_idOtros",o):null)}),u(1,Qi,5,3,"ng-container",10)(2,Yi,3,2,"ng-template",null,7,V),a()}if(n&2){let e=L(3),i=d().$implicit,o=d(2);F("docente-cell-editable",o.edicionDocentesActiva&&o.puedeEditarDocentes)("docente-cell-active",o.edicionDocentesActiva&&o.isCeldaDocenteActiva(o.getRowInfoId(i),"planteldocadmins_idOtros")),l(),p("ngIf",!o.edicionDocentesActiva||!o.isCeldaDocenteActiva(o.getRowInfoId(i),"planteldocadmins_idOtros"))("ngIfElse",e)}}function Xi(n,t){if(n&1&&(r(0,"div",76),s(1),a()),n&2){let e=d(3).$implicit;l(),E(" (Est. ",e.Categoria,")")}}function Ki(n,t){if(n&1&&(A(0),s(1),u(2,Xi,2,1,"div",72),w()),n&2){let e=d(2).$implicit,i=d(2);l(),E(" ",e.InstrumentoMusical||"SIN ESPECIALIDAD"," "),l(),p("ngIf",i.verdetallado)}}function en(n,t){if(n&1&&(r(0,"option",92),s(1),a()),n&2){let e=t.$implicit;p("ngValue",e.value)("disabled",e.disabled),l(),C(e.label)}}function tn(n,t){n&1&&(r(0,"div",86),s(1,"Guardando..."),a())}function nn(n,t){if(n&1){let e=v();r(0,"div",88)(1,"select",89),h("click",function(o){return _(e),g(o.stopPropagation())})("ngModelChange",function(o){_(e);let c=d(2).$implicit,m=d(2);return g(m.onInstrumentoChange(c,"InstrumentoMusical",o))}),r(2,"option",90),s(3,"-- Sin especialidad --"),a(),u(4,en,2,3,"option",91),a(),r(5,"label"),s(6,"Especialidad"),a()(),u(7,tn,2,0,"div",85)}if(n&2){let e=d(2).$implicit,i=d(2);l(),p("ngModel",e.InstrumentoMusical),l(),p("ngValue",""),l(2),p("ngForOf",i.InstrumentoMusicalOptions),l(3),p("ngIf",i.isGuardandoInstrumento(i.getRowInfoId(e),"InstrumentoMusical"))}}function on(n,t){if(n&1&&(r(0,"td",87),u(1,Ki,3,2,"ng-container",10)(2,nn,8,4,"ng-template",null,8,V),a()),n&2){let e=L(3),i=d(3);l(),p("ngIf",!i.edicionDocentesActiva)("ngIfElse",e)}}function an(n,t){if(n&1&&(r(0,"div",76),s(1),a()),n&2){let e=d(3).$implicit;l(),E(" Edad: ",e.Edad)}}function rn(n,t){if(n&1&&(A(0),s(1),u(2,an,2,1,"div",72),w()),n&2){let e=d(2).$implicit,i=d(2);l(),E(" ",e.InstrumentoMusicalSecundario||"SIN INSTR. SEC."," "),l(),p("ngIf",i.verdetallado)}}function ln(n,t){if(n&1&&(r(0,"option",92),s(1),a()),n&2){let e=t.$implicit;p("ngValue",e.value)("disabled",e.disabled),l(),C(e.label)}}function sn(n,t){n&1&&(r(0,"div",86),s(1,"Guardando..."),a())}function cn(n,t){if(n&1){let e=v();r(0,"div",88)(1,"select",89),h("click",function(o){return _(e),g(o.stopPropagation())})("ngModelChange",function(o){_(e);let c=d(2).$implicit,m=d(2);return g(m.onInstrumentoChange(c,"InstrumentoMusicalSecundario",o))}),r(2,"option",90),s(3,"-- Sin instr. secundario --"),a(),u(4,ln,2,3,"option",91),a(),r(5,"label"),s(6,"Instr. Secundario"),a()(),u(7,sn,2,0,"div",85)}if(n&2){let e=d(2).$implicit,i=d(2);l(),p("ngModel",e.InstrumentoMusicalSecundario),l(),p("ngValue",""),l(2),p("ngForOf",i.InstrumentoMusicalSecundarioOptions),l(3),p("ngIf",i.isGuardandoInstrumento(i.getRowInfoId(e),"InstrumentoMusicalSecundario"))}}function dn(n,t){if(n&1&&(r(0,"td",87),u(1,rn,3,2,"ng-container",10)(2,cn,8,4,"ng-template",null,9,V),a()),n&2){let e=L(3),i=d(3);l(),p("ngIf",!i.edicionDocentesActiva)("ngIfElse",e)}}function pn(n,t){if(n&1&&(r(0,"td")(1,"a",79)(2,"span",81),x(3,"ng-lottie",82),a(),r(4,"span"),s(5),a(),x(6,"span",50),a(),r(7,"div",76),s(8),a()()),n&2){let e=d().$implicit,i=d(2);l(),p("href",B("https://api.whatsapp.com/send?phone=591",e.Celular),D),l(2),p("options",i._tools.optionsWhatsApp),l(2),C(e.Celular),l(3),C(e.Nombre_Padre)}}function mn(n,t){if(n&1&&(r(0,"td")(1,"a",79)(2,"span",81),x(3,"ng-lottie",82),a(),r(4,"span"),s(5),a(),x(6,"span",50),a(),r(7,"div",76),s(8),a()()),n&2){let e=d().$implicit,i=d(2);l(),p("href",B("https://api.whatsapp.com/send?phone=591",e.NumCelP),D),l(2),p("options",i._tools.optionsWhatsApp),l(2),C(e.NumCelP),l(3),C(e.Nombre_Padre)}}function un(n,t){if(n&1&&(r(0,"td")(1,"a",79)(2,"span",81),x(3,"ng-lottie",82),a(),r(4,"span"),s(5),a(),x(6,"span",50),a(),r(7,"div",76),s(8),a()()),n&2){let e=d().$implicit,i=d(2);l(),p("href",B("https://api.whatsapp.com/send?phone=591",e.NumCelM),D),l(2),p("options",i._tools.optionsWhatsApp),l(2),C(e.NumCelM),l(3),C(e.Nombre_Madre)}}function _n(n,t){if(n&1){let e=v();r(0,"tr",71),h("contextmenu",function(){let o=_(e).$implicit,c=d(2);return g(c.abrirMenuest(c.event,o))}),r(1,"td",35),s(2),a(),r(3,"td"),s(4),u(5,Di,2,1,"div",72),a(),r(6,"td"),s(7),u(8,Pi,2,1,"div",72)(9,wi,2,1,"div",72),a(),r(10,"td"),s(11),u(12,Ti,2,1,"div",73)(13,ki,2,1,"div",72),a(),u(14,Li,4,6,"td",74)(15,Gi,4,6,"td",74)(16,Ji,4,6,"td",74)(17,on,4,2,"td",75)(18,dn,4,2,"td",75)(19,pn,9,5,"td",44)(20,mn,9,5,"td",44)(21,un,9,5,"td",44),a()}if(n&2){let e=t.$implicit,i=t.index,o=d(2);l(2),C((o.paginaest-1)*o.pageSizeest+(i+1)),l(2),E("",e.Ap_Paterno," "),l(),p("ngIf",o.verdetallado),l(2),E("",e.Ap_Materno," "),l(),p("ngIf",o.verdetallado),l(),p("ngIf",!o.mostrarCamposMusicales),l(2),E("",e.Nombre," "),l(),p("ngIf",o.verdetallado),l(),p("ngIf",!o.mostrarCamposMusicales),l(),p("ngIf",o.mostrarCamposMusicales),l(),p("ngIf",o.mostrarCamposMusicales),l(),p("ngIf",o.mostrarCamposMusicales),l(),p("ngIf",o.mostrarCamposMusicales),l(),p("ngIf",o.mostrarCamposMusicales),l(),p("ngIf",o.verdetallado),l(),p("ngIf",o.verdetallado),l(),p("ngIf",o.verdetallado)}}function gn(n,t){if(n&1){let e=v();r(0,"div",97)(1,"div",98),s(2,"Dejar vac\xEDo (quitar docente)"),a(),r(3,"button",99),h("click",function(o){_(e);let c=d(3);return o.stopPropagation(),g(c.quitarDocenteEdicion())}),s(4," Quitar "),a()()}if(n&2){let e=d(3);l(3),p("disabled",e.isGuardandoDocente(e.edicionDocenteActivo.infoId,e.edicionDocenteActivo.field))}}function hn(n,t){n&1&&(r(0,"div",100),s(1,"Sin resultados"),a())}function fn(n,t){if(n&1&&(r(0,"span",107),s(1),a()),n&2){let e=d().$implicit,i=d(3);l(),E(" | No tomado en Cuenta: ",i.getConteoDocenteSinModo(e.id))}}function xn(n,t){if(n&1){let e=v();r(0,"div",101),h("click",function(o){let c=_(e).$implicit,m=d(3);return o.stopPropagation(),g(m.seleccionarDocenteEdicion(c))}),r(1,"div",102)(2,"div",103),s(3),a(),r(4,"small",104),s(5),u(6,fn,2,1,"span",105),a()(),r(7,"button",106),h("click",function(o){let c=_(e).$implicit,m=d(3);return g(m.abrirDetalleDocente(c,o))}),s(8,"Detalle"),a()()}if(n&2){let e=t.$implicit,i=d(3);F("disabled",i.docenteInactivo(e)),l(2),F("text-muted",i.docenteInactivo(e)),l(),C(i.getNombreCompletoDocente(e)),l(2),E(" Estudiantes: ",i.getConteoDocenteOk(e.id)," "),l(),p("ngIf",i.getConteoDocenteSinModo(e.id)>0)}}function Cn(n,t){if(n&1&&(r(0,"div",93),u(1,gn,5,1,"div",94)(2,hn,2,0,"div",95)(3,xn,9,7,"div",96),a()),n&2){let e=d(2);R("top",e.docenteOverlayTop,"px")("left",e.docenteOverlayLeft,"px")("width",e.docenteOverlayWidth,"px"),l(),p("ngIf",e.edicionDocentesActiva&&e.edicionDocenteActivo),l(),p("ngIf",e.docentesFiltradosEdicion.length===0),l(),p("ngForOf",e.docentesFiltradosEdicion)}}function vn(n,t){if(n&1){let e=v();A(0),r(1,"div",11)(2,"div",12)(3,"div",13)(4,"h1",14),s(5,"Lista de Estudiantes "),a(),r(6,"p",15)(7,"span",16),s(8),a(),s(9),r(10,"span",17),s(11),a()()()()(),r(12,"div",12)(13,"div",18),u(14,ii,6,1,"button",19)(15,ni,6,3,"button",20)(16,oi,6,3,"button",20)(17,ai,6,1,"button",21),a(),r(18,"div",22)(19,"div",23)(20,"div",24)(21,"span",25),x(22,"ng-lottie",26),a(),r(23,"div",27)(24,"input",28),N("ngModelChange",function(o){_(e);let c=d();return k(c.filtertxtest,o)||(c.filtertxtest=o),g(o)}),h("ngModelChange",function(){_(e);let o=d();return g(o.onFilterTxtEstChange())}),a(),r(25,"label"),s(26,"Buscar"),a()()()()()(),u(27,li,10,3,"div",29)(28,si,6,1,"div",30),r(29,"div",31)(30,"div",32)(31,"table",33)(32,"thead",34)(33,"tr")(34,"th",35),s(35,"#"),a(),r(36,"th",36),h("click",function(o){_(e);let c=d();return g(c.sortByest("Ap_Paterno",o))}),s(37," Ap_Paterno "),u(38,ci,1,4,"i",37),a(),r(39,"th",36),h("click",function(o){_(e);let c=d();return g(c.sortByest("Ap_Materno",o))}),s(40," Ap_Materno "),u(41,di,1,4,"i",37),a(),r(42,"th",36),h("click",function(o){_(e);let c=d();return g(c.sortByest("Nombre",o))}),s(43," Nombre "),u(44,pi,1,4,"i",37),a(),u(45,ui,3,1,"th",38)(46,gi,3,1,"th",39)(47,fi,3,1,"th",40)(48,Ci,3,1,"th",41)(49,bi,3,1,"th",42)(50,Ei,2,0,"th",43)(51,Si,2,0,"th",43)(52,Ii,2,0,"th",43),a()(),r(53,"tbody"),u(54,Mi,5,1,"tr",44)(55,yi,3,1,"tr",44)(56,_n,22,17,"tr",45),a()()()(),u(57,Cn,4,9,"div",46),w()}if(n&2){let e=d();l(8),T("",e.lvlCurso," ",e.paralelo),l(),E(" Turno ",e.turno," "),l(2),C(e.siglaYMateria),l(3),p("ngIf",e.visionOpciones),l(),p("ngIf",e.habilitarCopiaExcel),l(),p("ngIf",e.habilitarCopiaExcel),l(),p("ngIf",e.puedeEditarDocentes&&e.mostrarCamposMusicales),l(5),p("options",e._tools.optionslupa),l(2),O("ngModel",e.filtertxtest),l(3),p("ngIf",e.visionOpciones&&e.mostrarCamposMusicales),l(),p("ngIf",e.habilitarCopiaExcel),l(10),p("ngIf",e.isSortedest("Ap_Paterno")),l(3),p("ngIf",e.isSortedest("Ap_Materno")),l(3),p("ngIf",e.isSortedest("Nombre")),l(),p("ngIf",e.mostrarCamposMusicales),l(),p("ngIf",e.mostrarCamposMusicales),l(),p("ngIf",e.mostrarCamposMusicales),l(),p("ngIf",e.mostrarCamposMusicales),l(),p("ngIf",e.mostrarCamposMusicales),l(),p("ngIf",e.verdetallado),l(),p("ngIf",e.verdetallado),l(),p("ngIf",e.verdetallado),l(2),p("ngIf",e.isLoadingest),l(),p("ngIf",!e.isLoadingest&&(!e.estFiltrados||e.estFiltrados.length===0)),l(),p("ngForOf",e.estFiltrados),l(),p("ngIf",e.mostrarListaDocEdicion&&e.puedeEditarDocentes)}}function bn(n,t){n&1&&(r(0,"div",11)(1,"div",108),s(2," Debe iniciar sesi\xF3n para acceder a este sitio. "),a()())}function En(n,t){n&1&&(r(0,"div",117),s(1," No hay plantillas disponibles. "),a())}function Sn(n,t){if(n&1){let e=v();r(0,"button",120),h("click",function(){let o=_(e).$implicit,c=d(2).$implicit;return g(c.close(o))}),r(1,"div",102)(2,"div",103),s(3),a(),r(4,"small",104),s(5),a()(),r(6,"span",121),s(7,"Usar"),a()()}if(n&2){let e=t.$implicit;l(3),C((e==null?null:e.ParaI)||"SIN T\xCDTULO"),l(2),E("Celda: ",(e==null?null:e.NivelCurso)||"B10")}}function In(n,t){if(n&1&&(r(0,"div",118),u(1,Sn,8,2,"button",119),a()),n&2){let e=d(2);l(),p("ngForOf",e.plantillasExcelDisponibles)}}function Mn(n,t){if(n&1){let e=v();r(0,"div",109)(1,"h4",110),s(2,"Seleccione una plantilla Excel"),a(),r(3,"button",111),h("click",function(){let o=_(e).$implicit;return g(o.dismiss("cancel"))}),a()(),r(4,"div",112),u(5,En,2,0,"div",113)(6,In,2,1,"div",114),a(),r(7,"div",115)(8,"button",116),h("click",function(){let o=_(e).$implicit;return g(o.dismiss("cancel"))}),r(9,"span",81),x(10,"ng-lottie",49),a(),r(11,"span"),s(12,"CANCELAR"),a(),x(13,"span",50),a()()}if(n&2){let e=d();l(5),p("ngIf",!e.plantillasExcelDisponibles||e.plantillasExcelDisponibles.length===0),l(),p("ngIf",e.plantillasExcelDisponibles&&e.plantillasExcelDisponibles.length>0),l(4),p("options",e._tools.optionscancelar)}}function yn(n,t){n&1&&(r(0,"span",135),s(1,"OK Oficial"),a())}function Dn(n,t){n&1&&(r(0,"span",136),s(1,"No tomado en Cuenta"),a())}function Pn(n,t){if(n&1&&(r(0,"tr")(1,"td",35),s(2),a(),r(3,"td"),s(4),a(),r(5,"td"),s(6),a(),r(7,"td"),s(8),a(),r(9,"td"),s(10),a(),r(11,"td",35),u(12,yn,2,0,"span",133)(13,Dn,2,0,"span",134),a(),r(14,"td",35),s(15),a(),r(16,"td",35),s(17),a(),r(18,"td",35),s(19),a(),r(20,"td",35),s(21),a()()),n&2){let e=t.$implicit,i=t.index,o=d(2);l(2),C(i+1),l(2),C(o.anioId),l(2),C(o.lvlCurso),l(2),C(o.paralelo),l(2),ye("",e==null?null:e.Ap_Paterno," ",e==null?null:e.Ap_Materno," ",e==null?null:e.Nombre),l(2),p("ngIf",o.tieneModoMateria(e,o.detalleDocenteMeta==null?null:o.detalleDocenteMeta.field)),l(),p("ngIf",!o.tieneModoMateria(e,o.detalleDocenteMeta==null?null:o.detalleDocenteMeta.field)),l(2),C(e==null?null:e.CI),l(2),C(e==null?null:e.Edad),l(2),C(e==null?null:e.Sexo),l(2),C(o.turno)}}function An(n,t){if(n&1&&(r(0,"div",76),s(1),a()),n&2){let e=d(2);l(),E(" Nota: \u201CNo tomado en Cuenta\u201D significa que el estudiante no tiene la materia asignada por lo tanto no se cuenta en estadistica con ",e.detalleDocenteMeta==null?null:e.detalleDocenteMeta.modo_label,". ")}}function wn(n,t){if(n&1){let e=v();r(0,"div",109)(1,"div")(2,"h5",110),s(3,"Detalle por docente"),a(),r(4,"div",122),s(5),a()(),r(6,"button",123),h("click",function(){let o=_(e).$implicit;return g(o.dismiss("close"))}),a()(),r(7,"div",112)(8,"div",124)(9,"table",125)(10,"thead")(11,"tr")(12,"th",126),s(13,"#"),a(),r(14,"th"),s(15,"A\xF1o"),a(),r(16,"th"),s(17,"Curso"),a(),r(18,"th"),s(19,"Paralelo"),a(),r(20,"th"),s(21,"Nombre"),a(),r(22,"th",127),s(23,"Modo"),a(),r(24,"th",128),s(25,"CI"),a(),r(26,"th",129),s(27,"Edad"),a(),r(28,"th",130),s(29,"Sexo"),a(),r(30,"th",131),s(31,"Turno"),a()()(),r(32,"tbody"),u(33,Pn,22,13,"tr",132),a()()(),u(34,An,2,1,"div",72),a(),r(35,"div",115)(36,"button",116),h("click",function(){let o=_(e).$implicit;return g(o.close("ok"))}),r(37,"span",81),x(38,"ng-lottie",49),a(),r(39,"span"),s(40,"CERRAR"),a(),x(41,"span",50),a()()}if(n&2){let e=d();l(5),E(" ",e.detalleDocenteMeta==null?null:e.detalleDocenteMeta.docente_nombre," "),l(28),p("ngForOf",e.detalleDocenteRows),l(),p("ngIf",e.detalleDocenteMeta==null?null:e.detalleDocenteMeta.modo_label),l(4),p("options",e._tools.optionscancelar)}}function Tn(n,t){if(n&1&&(r(0,"option",153),s(1),a()),n&2){let e=t.$implicit;p("value",e),l(),C(e)}}function On(n,t){if(n&1&&(r(0,"span",107),s(1),a()),n&2){let e=d().$implicit,i=d(3);l(),E(" | No tomado en Cuenta: ",i.getBulkConteoDocenteSinModo(e.id))}}function kn(n,t){if(n&1){let e=v();r(0,"div",101),h("click",function(o){let c=_(e).$implicit,m=d(3);return g(m.seleccionarDocenteBulk(c,o))}),r(1,"div",102)(2,"div",103),s(3),a(),r(4,"small",104),s(5),u(6,On,2,1,"span",105),a()(),r(7,"button",106),h("click",function(o){let c=_(e).$implicit,m=d(3);return g(m.abrirDetalleDocenteBulk(c,o))}),s(8,"Detalle"),a()()}if(n&2){let e=t.$implicit,i=d(3);F("disabled",i.docenteInactivo(e)),l(2),F("text-muted",i.docenteInactivo(e)),l(),C(i.getNombreCompletoDocente(e)),l(2),E(" Estudiantes: ",i.getBulkConteoDocenteOk(e.id)," "),l(),p("ngIf",i.getBulkConteoDocenteSinModo(e.id)>0)}}function Nn(n,t){if(n&1&&(r(0,"div",154),u(1,kn,9,7,"div",96),a()),n&2){let e=d(2);l(),p("ngForOf",e.bulkDocentesFiltrados)}}function Rn(n,t){if(n&1&&(r(0,"div",155),s(1," Seleccionado: "),r(2,"span",103),s(3),a()()),n&2){let e=d(2);l(3),C(e.getNombreCompletoDocente(e.bulkDocenteSeleccionado))}}function Fn(n,t){if(n&1&&(r(0,"tr")(1,"td",156),s(2),a()()),n&2){let e=d(2);l(2),E("Seleccione tipo y ",e.getBulkEspecialidadLabel()," para ver estudiantes.")}}function Vn(n,t){if(n&1&&(A(0),s(1),w()),n&2){let e=d().$implicit;l(),E(" ",(e==null?null:e.InstrumentoMusical)||"SIN ESPECIALIDAD"," ")}}function Hn(n,t){if(n&1&&(A(0),s(1),w()),n&2){let e=d().$implicit;l(),E(" ",(e==null?null:e.InstrumentoMusicalSecundario)||"SIN ESPECIALIDAD"," ")}}function Ln(n,t){if(n&1){let e=v();r(0,"tr")(1,"td",35)(2,"input",157),h("ngModelChange",function(o){let c=_(e).$implicit,m=d(2);return g(m.bulkSeleccionMap[m.getRowInfoId(c)]=o)}),a()(),r(3,"td"),s(4),a(),r(5,"td"),s(6),a(),r(7,"td"),u(8,Vn,2,1,"ng-container",44)(9,Hn,2,1,"ng-container",44),a()()}if(n&2){let e=t.$implicit,i=d(2);l(2),p("ngModel",i.bulkSeleccionMap[i.getRowInfoId(e)]),l(2),C(e==null?null:e.CI),l(2),ye("",e==null?null:e.Ap_Paterno," ",e==null?null:e.Ap_Materno," ",e==null?null:e.Nombre),l(2),p("ngIf",i.bulkModo!=="DOC_INSTR_COMPLEMENTARIO"),l(),p("ngIf",i.bulkModo==="DOC_INSTR_COMPLEMENTARIO")}}function jn(n,t){if(n&1){let e=v();r(0,"div",109)(1,"div")(2,"h5",110),s(3,"Acciones grupales"),a(),r(4,"div",122),s(5,"Se aplicar\xE1 sobre el contenido actual de la tabla filtrada."),a()(),r(6,"button",123),h("click",function(){let o=_(e).$implicit;return g(o.dismiss("close"))}),a()(),r(7,"div",112)(8,"div",137)(9,"div",138)(10,"div",27)(11,"select",139),N("ngModelChange",function(o){_(e);let c=d();return k(c.bulkModo,o)||(c.bulkModo=o),g(o)}),h("change",function(){_(e);let o=d();return g(o.onBulkModoChange())}),r(12,"option",90),s(13,"Seleccione..."),a(),r(14,"option",90),s(15,"Doc. Especialidad"),a(),r(16,"option",90),s(17,"Doc. Pr\xE1ctica de Conjuntos"),a(),r(18,"option",90),s(19,"Doc. Instr. Complementario"),a()(),r(20,"label",103),s(21,"Tipo de columna"),a()()(),r(22,"div",138)(23,"div",27)(24,"select",140),N("ngModelChange",function(o){_(e);let c=d();return k(c.bulkEspecialidadSelected,o)||(c.bulkEspecialidadSelected=o),g(o)}),h("change",function(){_(e);let o=d();return g(o.onBulkEspecialidadChange())}),r(25,"option",141),s(26,"Seleccione..."),a(),u(27,Tn,2,2,"option",142),a(),r(28,"label",103),s(29),a()()(),r(30,"div",138)(31,"div",27)(32,"input",143),h("focus",function(){_(e);let o=d();return g(o.onBulkDocInputFocus())})("input",function(){_(e);let o=d();return g(o.onBulkDocInputChange())}),a(),r(33,"label",103),s(34,"Docente"),a()(),u(35,Nn,2,1,"div",144)(36,Rn,4,1,"div",145),a()(),x(37,"hr",146),r(38,"div",147)(39,"div",103),s(40,"Estudiantes a modificar"),a(),r(41,"div",122),s(42),a()(),r(43,"div",148)(44,"table",125)(45,"thead")(46,"tr")(47,"th",126),s(48,"OK"),a(),r(49,"th",149),s(50,"CI"),a(),r(51,"th"),s(52,"Nombre"),a(),r(53,"th",150),s(54),a()()(),r(55,"tbody"),u(56,Fn,3,1,"tr",44)(57,Ln,10,7,"tr",132),a()()()(),r(58,"div",115)(59,"button",151),h("click",function(){let o=_(e).$implicit;return g(o.dismiss("cancel"))}),r(60,"span",81),x(61,"ng-lottie",49),a(),r(62,"span"),s(63,"CERRAR"),a(),x(64,"span",50),a(),r(65,"button",152),h("click",function(){_(e);let o=d();return g(o.ejecutarAccionGrupal())}),r(66,"span",81),x(67,"ng-lottie",49),a(),r(68,"span"),s(69,"APLICAR CAMBIOS"),a(),x(70,"span",50),a()()}if(n&2){let e=d();l(11),O("ngModel",e.bulkModo),l(),p("ngValue",null),l(2),p("ngValue","DOC_ESPECIALIDAD"),l(2),p("ngValue","DOC_PRACTICA_CONJUNTOS"),l(2),p("ngValue","DOC_INSTR_COMPLEMENTARIO"),l(6),O("ngModel",e.bulkEspecialidadSelected),p("disabled",!e.bulkModo),l(3),p("ngForOf",e.bulkEspecialidadOptions),l(2),C(e.getBulkEspecialidadLabel()),l(3),p("formControl",e.bulkDocInput)("disabled",!e.bulkModo||!e.bulkEspecialidadSelected),l(3),p("ngIf",e.bulkMostrarListaDoc&&e.bulkDocentesFiltrados.length>0),l(),p("ngIf",e.bulkDocenteSeleccionado),l(6),T("Seleccionados: ",e.getBulkSeleccionadosCount()," / ",(e.bulkRowsCandidatos==null?null:e.bulkRowsCandidatos.length)||0),l(12),C(e.getBulkEspecialidadLabel()),l(2),p("ngIf",!e.bulkRowsCandidatos||e.bulkRowsCandidatos.length===0),l(),p("ngForOf",e.bulkRowsCandidatos),l(2),p("disabled",e.bulkGuardando),l(2),p("options",e._tools.optionscancelar),l(4),p("disabled",e.bulkGuardando),l(2),p("options",e._tools.optionstripleengranaje)}}function Un(n,t){if(n&1&&(r(0,"div",163),x(1,"i",164),s(2),a()),n&2){let e=d(2);l(2),E(" ",e.archivoExcelParaActualizar.name," ")}}function zn(n,t){if(n&1){let e=v();r(0,"div",109)(1,"h4",110),s(2,"Actualizar datos archivo Excel"),a(),r(3,"button",111),h("click",function(){let o=_(e).$implicit;return g(o.dismiss("cancel"))}),a()(),r(4,"div",112)(5,"p",158),s(6," Seleccione el archivo Excel que descarg\xF3 previamente. Se reemplazar\xE1n los datos de estudiantes y los metadatos (docente, materia, curso, gesti\xF3n, etc.) con la informaci\xF3n actual del sistema. "),a(),r(7,"div",159)(8,"label",160),s(9,"Archivo Excel (.xlsx / .xlsm)"),a(),r(10,"input",161),h("change",function(o){_(e);let c=d();return g(c.onArchivoExcelSeleccionado(o))}),a()(),u(11,Un,3,1,"div",162),a(),r(12,"div",115)(13,"button",151),h("click",function(){let o=_(e).$implicit;return g(o.dismiss("cancel"))}),r(14,"span",81),x(15,"ng-lottie",49),a(),r(16,"span"),s(17,"CANCELAR"),a(),x(18,"span",50),a(),r(19,"button",152),h("click",function(){_(e);let o=d();return g(o.ejecutarActualizarExcel())}),r(20,"span",81),x(21,"ng-lottie",49),a(),r(22,"span"),s(23),a(),x(24,"span",50),a()()}if(n&2){let e=d();l(11),p("ngIf",e.archivoExcelParaActualizar),l(2),p("disabled",e.actualizandoExcel),l(2),p("options",e._tools.optionscancelar),l(4),p("disabled",e.actualizandoExcel||!e.archivoExcelParaActualizar),l(2),p("options",e._tools.optionsarchive),l(2),C(e.actualizandoExcel?"ACTUALIZANDO...":"ACTUALIZAR Y DESCARGAR")}}var Q=class Q{constructor(t,e,i,o,c,m,f,b,S,I){this._reportes=t;this._anios=e;this._tools=i;this._planteldoc=o;this._public=c;this._auth=m;this._inst=f;this._infoest=b;this._controles=S;this._plantillasExcel=I;this.ruta=se.ruta;this.est=[];this.estRespaldo=[];this.admin=[];this.filterpost="";this.ModoSimple=!1;this.materiaId=null;this.anioId=null;this.lvlCurso=null;this.paralelo=null;this.institucionId=null;this.modo="";this.verdetallado=!1;this.esxMateria=!0;this.nameInst="";this.siglaYMateria="";this.turno="";this.visionOpciones=!1;this.requiereLogin=!1;this.tipoPerfil=null;this.perfilUsuario=null;this.puedeEditarDocentes=!1;this.mostrarCamposMusicales=!1;this.habilitarCopiaExcel=!1;this.descargandoExcel=!1;this.bloqueoOtraInstitucion=!1;this.gestionTextoCache=null;this.edicionDocentesActiva=!1;this.edicionDocenteActivo=null;this.docEdicionInput=new U("");this.mostrarListaDocEdicion=!1;this.docentesFiltradosEdicion=[];this.docenteOverlayTop=0;this.docenteOverlayLeft=0;this.docenteOverlayWidth=320;this.docenteOverlayAnchorEl=null;this.overlayDocentePrevState=null;this.guardandoDocenteMap={};this.conteoDocentesOkMap={};this.conteoDocentesSinModoMap={};this.InstrumentoMusicalOptions=[];this.InstrumentoMusicalSecundarioOptions=[];this.guardandoInstrumentoMap={};this.instrumentosOptionsCargando=!1;this.instrumentosOptionsCargadas=!1;this.detalleDocenteMeta=null;this.detalleDocenteRows=[];this.plantillasExcelDisponibles=[];this.archivoExcelParaActualizar=null;this.actualizandoExcel=!1;this.bulkModo=null;this.bulkEspecialidadOptions=[];this.bulkEspecialidadSelected="";this.bulkRowsCandidatos=[];this.bulkDocInput=new U("");this.bulkDocentesFiltrados=[];this.bulkDocenteSeleccionado=null;this.bulkMostrarListaDoc=!1;this.bulkSeleccionMap={};this.bulkGuardando=!1;this.bulkConteoOkMap={};this.bulkConteoSinModoMap={};this.modomateria="";this.habilitarCamposMusicales=!1;this.paginaest=1;this.isLoadingest=!0;this.AnimacionCargabtnModalest=!1;this.filtertxtest="";this.estFiltrados=[];this.collectionSizeest=0;this.pageSizeest=10;this.pageSizeOptionsest=[5,10,20,50];this.sortColumnsest=[];this.planteldocente=[];this.reportarconInstrumentos=!1;this.reportarcondocentesEspecialidad=!1;this.copiadoNombres=!1;this.copiadoEspecialidades=!1;this.copiadoSexos=!1;this.copiadoTodos=!1;this.copiadoCarnets=!1}ngOnInit(){this.materiaId=sessionStorage.getItem("HORARIOS_MATERIA_ID"),this.anioId=sessionStorage.getItem("HORARIOS_ANIO_ID"),this.lvlCurso=sessionStorage.getItem("HORARIOS_LVL_CURSO"),this.paralelo=sessionStorage.getItem("HORARIOS_PARALELO"),this.institucionId=sessionStorage.getItem("HORARIOS_INSTITUCION_ID"),this.modo=sessionStorage.getItem("HORARIOS_MODO"),this.modomateria=sessionStorage.getItem("MODO_MATERIA"),this.nameInst=sessionStorage.getItem("HORARIOS_INSTITUCION_NOMBRE"),this.siglaYMateria=sessionStorage.getItem("HORARIOS_MATERIA_TITULO"),this.turno=sessionStorage.getItem("HORARIOS_TURNO"),(this.materiaId==null||this.materiaId==""||this.materiaId==null)&&(this.esxMateria=!1),this._auth.pedirPerfil().subscribe({next:t=>{if(console.log("perfil obtenido",t),!t){this.requiereLogin=!0,this.tipoPerfil=null,this.perfilUsuario=null,this.visionOpciones=!1,this.puedeEditarDocentes=!1,this.verdetallado=!1,this.edicionDocentesActiva=!1,this.salirModoEdicionDocente(),this.est=[],this.aplicarFiltroEstudiantes(),this.isLoadingest=!1,this._tools.MostrarMensaje("info","Debe iniciar sesi\xF3n para acceder a este sitio."),this.actualizarMostrarCamposMusicales();return}this.requiereLogin=!1,this.tipoPerfil=t?.tipo??null,this.perfilUsuario=t?.usuario??null;let e=(t?.tipo??"").toString(),i=e==="superlcchs"||e==="usuarioslcchs",o=i||e==="planteladministrativos",c=e==="planteldocentes",m=e==="estudiantesifas",f=Number(t?.usuario?.instituciones_id??0),b=Number(this.institucionId??0),S=!i&&f>0&&b>0&&f!==b;this.habilitarCopiaExcel=!m,this.visionOpciones=o||c,this.puedeEditarDocentes=o,this.verdetallado=o||c,S?(this.bloqueoOtraInstitucion=!0,this.visionOpciones=!1,this.puedeEditarDocentes=!1,this.verdetallado=!1,this.habilitarCopiaExcel=!1,this.edicionDocentesActiva=!1,this.salirModoEdicionDocente(),this._tools.MostrarMensaje("info","Est\xE1 viendo otra instituci\xF3n: se deshabilit\xF3 el detallado, impresi\xF3n y edici\xF3n de docentes.")):this.bloqueoOtraInstitucion=!1,this.edicionDocentesActiva=!1,this.salirModoEdicionDocente(),this.puedeEditarDocentes&&(this.CargarPlantelDocente(),this.setupBuscadorDocenteEdicion()),m?this.esxMateria?this.CargarEstudiantesMateriaPublico():this.CargarEstudiantesMezcladosMateriasPublico():(o||c)&&!S?this.esxMateria?this.CargarEstudiantesMateriaPrivado():this.CargarEstudiantesMezcladosMateriasPrivado():(this.visionOpciones=!1,this.puedeEditarDocentes=!1,this.verdetallado=!1,this.esxMateria?this.CargarEstudiantesMateriaPublico():this.CargarEstudiantesMezcladosMateriasPublico()),this.cargarCaractisticasInstitucionActual(this.institucionId)},error:t=>{console.error("Error al cargar",t),this.requiereLogin=!0,this.tipoPerfil=null,this.visionOpciones=!1,this.puedeEditarDocentes=!1,this.verdetallado=!1,this.edicionDocentesActiva=!1,this.salirModoEdicionDocente(),this.est=[],this.aplicarFiltroEstudiantes(),this.isLoadingest=!1,this._tools.MostrarMensaje("info","Debe iniciar sesi\xF3n para acceder a este sitio."),this.actualizarMostrarCamposMusicales()}})}setupBuscadorDocenteEdicion(){this.docEdicionInput.valueChanges.subscribe(t=>{let e=(t??"").toString();if(e===""){this.docentesFiltradosEdicion=[];return}if(e.trim()===""){this.docentesFiltradosEdicion=this.filtrarPlantelDocentes("",!0);return}this.docentesFiltradosEdicion=this.filtrarPlantelDocentes(e.toLowerCase().trim()),this.reposicionarOverlayDocentes()})}abrirOverlayDocentes(t){if(!this.puedeEditarDocentes)return;let e=t?.target??null;e&&(this.docenteOverlayAnchorEl=e,this.mostrarListaDocEdicion=!0,this.reposicionarOverlayDocentes())}reposicionarOverlayDocentes(){if(!this.mostrarListaDocEdicion||!this.docenteOverlayAnchorEl)return;let t=this.docenteOverlayAnchorEl.getBoundingClientRect(),e=window?.innerWidth??1200,i=560,o=Math.max(320,Math.min(720,e-24)),c=Math.max(i,t.width);this.docenteOverlayWidth=Math.min(o,c),this.docenteOverlayTop=t.bottom+2;let m=Math.max(0,e-this.docenteOverlayWidth-12);this.docenteOverlayLeft=Math.min(t.left,m)}salirModoEdicionDocente(){this.overlayDocentePrevState=null,this.edicionDocenteActivo=null,this.mostrarListaDocEdicion=!1,this.docentesFiltradosEdicion=[],this.docEdicionInput.setValue("",{emitEvent:!1}),this.docenteOverlayAnchorEl=null}onToggleEdicionDocentes(){if(!this.edicionDocentesActiva){this.edicionDocenteActivo=null,this.docEdicionInput.setValue("",{emitEvent:!1}),this.docentesFiltradosEdicion=[],this.mostrarListaDocEdicion=!1;return}if(!this.puedeEditarDocentes){this.edicionDocentesActiva=!1,this._tools.MostrarMensaje("info","No tiene permisos para editar docentes");return}if(!this.visionOpciones){this.edicionDocentesActiva=!1,this._tools.MostrarMensaje("info","La edici\xF3n solo est\xE1 disponible en modo privado");return}if(!this.habilitarCamposMusicales){this.edicionDocentesActiva=!1,this._tools.MostrarMensaje("info","Edici\xF3n disponible solo para instituciones musicales");return}}activarEdicionDocente(t,e,i){if(i&&(i.preventDefault?.(),i.stopPropagation?.()),!this.edicionDocentesActiva||!this.visionOpciones||!this.puedeEditarDocentes)return;let o=Number(t?.id??t?.info_id??0);if(!Number.isFinite(o)||o<=0){this._tools.MostrarMensaje("warning","No se pudo identificar la inscripci\xF3n (infoestudiantesifas.id)");return}this.edicionDocenteActivo={infoId:o,field:e},this.docEdicionInput.setValue("",{emitEvent:!1}),this.docentesFiltradosEdicion=[],this.mostrarListaDocEdicion=!0,this.recalcularConteoDocentes(e)}isCeldaDocenteActiva(t,e){let i=Number(t??0);return!!this.edicionDocenteActivo&&this.edicionDocenteActivo.infoId===i&&this.edicionDocenteActivo.field===e}docenteInactivo(t){return this.normalizarTexto(t?.Estado)==="INACTIVO"}getNombreCompletoDocente(t){let e=(t?.Nombres??"").toString().trim(),i=(t?.Apellidos??"").toString().trim();return`${e} ${i}`.trim()}filtrarPlantelDocentes(t,e=!1){let i=String(this.institucionId??"").trim(),o=(this.planteldocente||[]).filter(c=>!(this.normalizarTexto(c?.Visibilidad)==="OCULTO"||i&&String(c?.instituciones_id)!==i)).sort((c,m)=>this.getNombreCompletoDocente(c).localeCompare(this.getNombreCompletoDocente(m)));return e?o.slice(0,50):t?o.filter(c=>this.getNombreCompletoDocente(c).toLowerCase().includes(t)).slice(0,25):[]}recalcularConteoDocentes(t){let e={},i={};(this.est||[]).forEach(o=>{let c=Number(o?.[t]??0);if(!c)return;let m=String(c);this.tieneModoParaField(o,t)?e[m]=(e[m]??0)+1:i[m]=(i[m]??0)+1}),this.conteoDocentesOkMap=e,this.conteoDocentesSinModoMap=i}getModoFlagField(t){return t==="planteldocadmins_id"?"TieneModoEspecialidad":t==="planteldocadmins_idPC"?"TieneModoPracticaConjuntos":"TieneModoInstrumentoComplementario"}getModoLabel(t){return t==="planteldocadmins_id"?"MODO INSTRUMENTOS DE ESPECIALIDAD":t==="planteldocadmins_idPC"?"MODO PR\xC1CTICA DE CONJUNTOS":"MODO INSTRUMENTO COMPLEMENTARIO"}tieneModoParaField(t,e){let i=this.getModoFlagField(e),o=t?.[i];return o===!0||o===1||o==="1"||o==="true"}tieneModoMateria(t,e){return e?this.tieneModoParaField(t,e):!0}getConteoDocenteOk(t){let e=String(t??"");return Number(this.conteoDocentesOkMap?.[e]??0)||0}getConteoDocenteSinModo(t){let e=String(t??"");return Number(this.conteoDocentesSinModoMap?.[e]??0)||0}getConteoDocente(t){let e=String(t??"");return(Number(this.conteoDocentesOkMap?.[e]??0)||0)+(Number(this.conteoDocentesSinModoMap?.[e]??0)||0)}seleccionarDocenteEdicion(t){if(!t||this.docenteInactivo(t))return;if(!this.puedeEditarDocentes){this._tools.MostrarMensaje("info","No tiene permisos para editar docentes"),this.salirModoEdicionDocente(),this.edicionDocentesActiva=!1;return}if(!this.edicionDocentesActiva||!this.edicionDocenteActivo){this._tools.MostrarMensaje("warning","Seleccione una celda de docente");return}let e=Number(t?.id??0);if(!Number.isFinite(e)||e<=0)return;let i=this.edicionDocenteActivo.infoId,o=this.edicionDocenteActivo.field;this.guardarDocenteEnFila(i,o,e,t),this.salirModoEdicionDocente()}aplicarDocenteEnRowVisual(t,e,i){if(!t)return;if(!i){if(t[e]=null,e==="planteldocadmins_id"){t.Docente_Especialidad_Apellidos=null,t.Docente_Especialidad_Nombres=null,t.Docente_Especialidad_CelularTrabajo=null;return}if(e==="planteldocadmins_idPC"){t.Docente_Practica_Conjuntos_Apellidos=null,t.Docente_Practica_Conjuntos_Nombres=null,t.Docente_Practica_Conjuntos_CelularTrabajo=null;return}t.Docente_Instrumento_Complementario_Apellidos=null,t.Docente_Instrumento_Complementario_Nombres=null,t.Docente_Instrumento_Complementario_CelularTrabajo=null;return}t[e]=Number(i?.id??0)||null;let o=(i?.Apellidos??"").toString().trim(),c=(i?.Nombres??"").toString().trim(),m=(i?.CelularTrabajo??"").toString().trim();if(e==="planteldocadmins_id"){t.Docente_Especialidad_Apellidos=o||null,t.Docente_Especialidad_Nombres=c||null,t.Docente_Especialidad_CelularTrabajo=m||null;return}if(e==="planteldocadmins_idPC"){t.Docente_Practica_Conjuntos_Apellidos=o||null,t.Docente_Practica_Conjuntos_Nombres=c||null,t.Docente_Practica_Conjuntos_CelularTrabajo=m||null;return}t.Docente_Instrumento_Complementario_Apellidos=o||null,t.Docente_Instrumento_Complementario_Nombres=c||null,t.Docente_Instrumento_Complementario_CelularTrabajo=m||null}quitarDocenteEdicion(){if(!this.puedeEditarDocentes){this._tools.MostrarMensaje("info","No tiene permisos para editar docentes");return}if(!this.edicionDocentesActiva||!this.edicionDocenteActivo){this._tools.MostrarMensaje("warning","Seleccione una celda de docente");return}let t=this.edicionDocenteActivo.infoId,e=this.edicionDocenteActivo.field;this.guardarDocenteEnFila(t,e,null,null),this.salirModoEdicionDocente()}guardarDocenteEnFila(t,e,i,o,c=!1){if(!this.puedeEditarDocentes){this._tools.MostrarMensaje("info","No tiene permisos para editar docentes");return}let m=`${t}:${e}`;this.guardandoDocenteMap[m]=!0;let f={id:t};f[e]=i,this._infoest.Modificarinfoestudiantesifas(f,t,{force:c}).subscribe({next:()=>{let b=(this.est||[]).find(S=>Number(S?.id??0)===Number(t));b&&this.aplicarDocenteEnRowVisual(b,e,o),this.guardandoDocenteMap[m]=!1,this._tools.MostrarMensaje("success",i?"Docente actualizado":"Docente quitado"),this.recalcularConteoDocentes(e)},error:b=>{let S=b?.status,I=!!b?.error?.requires_confirmation,P=b?.error?.anio;if(S===409&&I){this._tools.mostrarMensajeConfirm("Inscripci\xF3n duplicada",`Ya existe una inscripci\xF3n del estudiante en esta instituci\xF3n para la gesti\xF3n ${P??"actual"}. \xBFDesea guardar igualmente?`,"warning","S\xED, guardar","No, cancelar").then(y=>{y?this.guardarDocenteEnFila(t,e,i,o,!0):this.guardandoDocenteMap[m]=!1});return}console.error("Error al actualizar docente",b),this.guardandoDocenteMap[m]=!1,this._tools.MostrarMensaje("error","No se pudo actualizar el docente")}})}onInstrumentoChange(t,e,i,o){if(o&&(o.preventDefault?.(),o.stopPropagation?.()),!this.edicionDocentesActiva||!this.visionOpciones||!this.puedeEditarDocentes)return;let c=Number(t?.id??t?.info_id??0);if(!Number.isFinite(c)||c<=0){this._tools.MostrarMensaje("warning","No se pudo identificar la inscripci\xF3n (infoestudiantesifas.id)");return}let m=(i??"").toString(),f=(t?.[e]??"").toString();m!==f&&this.guardarInstrumentoEnFila(c,e,m)}guardarInstrumentoEnFila(t,e,i,o=!1){if(!this.puedeEditarDocentes){this._tools.MostrarMensaje("info","No tiene permisos para editar instrumentos");return}let c=`${t}:${e}`;this.guardandoInstrumentoMap[c]=!0;let m={id:t};m[e]=i,this._infoest.Modificarinfoestudiantesifas(m,t,{force:o}).subscribe({next:()=>{let f=(this.est||[]).find(b=>Number(b?.id??0)===Number(t));f&&(f[e]=i),this.guardandoInstrumentoMap[c]=!1,this._tools.MostrarMensaje("success","Instrumento actualizado")},error:f=>{let b=f?.status,S=!!f?.error?.requires_confirmation,I=f?.error?.anio;if(b===409&&S){this._tools.mostrarMensajeConfirm("Inscripci\xF3n duplicada",`Ya existe una inscripci\xF3n del estudiante en esta instituci\xF3n para la gesti\xF3n ${I??"actual"}. \xBFDesea guardar igualmente?`,"warning","S\xED, guardar","No, cancelar").then(P=>{P?this.guardarInstrumentoEnFila(t,e,i,!0):this.guardandoInstrumentoMap[c]=!1});return}console.error("Error al actualizar instrumento",f),this.guardandoInstrumentoMap[c]=!1,this._tools.MostrarMensaje("error","No se pudo actualizar el instrumento")}})}isGuardandoInstrumento(t,e){let i=`${Number(t??0)}:${e}`;return!!this.guardandoInstrumentoMap?.[i]}isGuardandoDocente(t,e){let i=`${Number(t??0)}:${e}`;return!!this.guardandoDocenteMap?.[i]}abrirDetalleDocente(t,e){if(e&&(e.preventDefault?.(),e.stopPropagation?.()),!t)return;let i=Number(t?.id??0);if(!i)return;if(!this.modalDetalleDocente){this._tools.MostrarMensaje("error","No se encontr\xF3 el template del modal de detalle");return}let o=this.edicionDocenteActivo?.field??"planteldocadmins_id",c=this.getModoLabel(o);this.overlayDocentePrevState={mostrar:this.mostrarListaDocEdicion,anchor:this.docenteOverlayAnchorEl,top:this.docenteOverlayTop,left:this.docenteOverlayLeft,width:this.docenteOverlayWidth,inputValue:this.docEdicionInput.value,filtrados:[...this.docentesFiltradosEdicion||[]],edicionActiva:this.edicionDocentesActiva},this.mostrarListaDocEdicion=!1,this.detalleDocenteMeta={docente_id:i,docente_nombre:this.getNombreCompletoDocente(t),field:o,modo_label:c},this.detalleDocenteRows=(this.est||[]).filter(f=>Number(f?.[o]??0)===i),this.modalDetalleDocenteRef=this._tools.openModal(this.modalDetalleDocente,"xl",{scrollable:!0,windowClass:"modal-paralelos-detalle"});let m=this.overlayDocentePrevState;this.modalDetalleDocenteRef.result.finally(()=>{m&&(this.overlayDocentePrevState=null,this.puedeEditarDocentes&&(!m.edicionActiva||!this.edicionDocentesActiva||m.mostrar&&(this.docenteOverlayAnchorEl=m.anchor,this.docenteOverlayTop=m.top,this.docenteOverlayLeft=m.left,this.docenteOverlayWidth=m.width,this.docentesFiltradosEdicion=m.filtrados,this.docEdicionInput.setValue(m.inputValue??"",{emitEvent:!1}),this.mostrarListaDocEdicion=!0,this.reposicionarOverlayDocentes())))}).catch(()=>{})}closeMenu(t){if(this.overlayDocentePrevState)return;let e=t?.target;e?.closest?.("ngb-modal-window")||e?.closest?.(".modal")||e?.closest?.(".modal-backdrop")||e?.closest?.(".docente-edicion-buscador")||e?.closest?.(".docente-edicion-overlay")||this.salirModoEdicionDocente()}onResize(){this.reposicionarOverlayDocentes()}onScroll(){this.reposicionarOverlayDocentes()}onKeydown(t){t?.key==="Escape"&&this.mostrarListaDocEdicion&&(t.preventDefault(),this.salirModoEdicionDocente())}actualizarMostrarCamposMusicales(){this.mostrarCamposMusicales=!!this.habilitarCamposMusicales&&!this.requiereLogin&&this.tipoPerfil!=="estudiantesifas",this.habilitarCopiaExcel=!this.requiereLogin&&!!this.tipoPerfil&&this.tipoPerfil!=="estudiantesifas"&&!this.bloqueoOtraInstitucion,this.puedeEditarDocentes||(this.edicionDocentesActiva=!1,this.salirModoEdicionDocente())}abrirAccionesGrupales(){if(!this.puedeEditarDocentes||!this.mostrarCamposMusicales||this.bloqueoOtraInstitucion){this._tools.MostrarMensaje("info","Acciones grupales no disponibles");return}this.bulkModo=null,this.bulkEspecialidadOptions=[],this.bulkEspecialidadSelected="",this.bulkRowsCandidatos=[],this.bulkDocenteSeleccionado=null,this.bulkDocInput.setValue("",{emitEvent:!1}),this.bulkDocentesFiltrados=[],this.bulkMostrarListaDoc=!1,this.bulkSeleccionMap={},this.bulkGuardando=!1,this.bulkConteoOkMap={},this.bulkConteoSinModoMap={},this.setupBulkBuscadorDocente(),this.modalAccionesGrupalesRef=this._tools.openModal(this.modalAccionesGrupales,"xl",{scrollable:!0,windowClass:"modal-paralelos-acciones-grupales"})}setupBulkBuscadorDocente(){}getBulkField(){return this.bulkModo==="DOC_ESPECIALIDAD"?"planteldocadmins_id":this.bulkModo==="DOC_PRACTICA_CONJUNTOS"?"planteldocadmins_idPC":this.bulkModo==="DOC_INSTR_COMPLEMENTARIO"?"planteldocadmins_idOtros":null}getBulkEspecialidadField(){return this.bulkModo==="DOC_INSTR_COMPLEMENTARIO"?"InstrumentoMusicalSecundario":this.bulkModo==="DOC_ESPECIALIDAD"||this.bulkModo==="DOC_PRACTICA_CONJUNTOS"?"InstrumentoMusical":null}getBulkEspecialidadLabel(){return this.bulkModo==="DOC_INSTR_COMPLEMENTARIO"?"Instrumento Complementario":"Especialidad"}onBulkModoChange(){this.bulkDocenteSeleccionado=null,this.bulkDocInput.setValue("",{emitEvent:!1}),this.bulkDocentesFiltrados=[],this.bulkMostrarListaDoc=!1,this.bulkEspecialidadSelected="",this.bulkEspecialidadOptions=this.detectarEspecialidadesDesdeTabla(),this.bulkRowsCandidatos=[],this.bulkSeleccionMap={},this.bulkConteoOkMap={},this.bulkConteoSinModoMap={}}detectarEspecialidadesDesdeTabla(){let t=this.getBulkEspecialidadField();if(!t)return[];let e=Array.isArray(this.estFiltrados)?this.estFiltrados:[],i=new Set,o=!1;e.forEach(m=>{let f=(m?.[t]??"").toString().trim();if(!f){o=!0;return}i.add(f)});let c=Array.from(i.values()).sort((m,f)=>m.localeCompare(f));return o&&c.unshift("SIN ESPECIALIDAD"),c}onBulkEspecialidadChange(){this.bulkDocenteSeleccionado=null,this.bulkDocInput.setValue("",{emitEvent:!1}),this.bulkDocentesFiltrados=[],this.bulkMostrarListaDoc=!1;let t=this.getBulkEspecialidadField(),e=this.getBulkField();if(!t||!e){this.bulkRowsCandidatos=[],this.bulkSeleccionMap={},this.bulkConteoOkMap={},this.bulkConteoSinModoMap={};return}let i=(this.bulkEspecialidadSelected??"").toString().trim(),o=i==="SIN ESPECIALIDAD"?"":i,c=Array.isArray(this.estFiltrados)?this.estFiltrados:[];this.bulkRowsCandidatos=c.filter(S=>{let I=(S?.[t]??"").toString().trim();return o===""?I==="":I===o});let m={};this.bulkRowsCandidatos.forEach(S=>{let I=Number(S?.id??S?.info_id??0);I>0&&(m[String(I)]=!0)}),this.bulkSeleccionMap=m;let{okMap:f,sinMap:b}=this.recalcularConteoDocentesEnRows(this.bulkRowsCandidatos,e);this.bulkConteoOkMap=f,this.bulkConteoSinModoMap=b}onBulkDocInputFocus(){this.bulkMostrarListaDoc=!0,this.actualizarBulkDocentesFiltrados()}onBulkDocInputChange(){this.bulkMostrarListaDoc=!0,this.actualizarBulkDocentesFiltrados()}actualizarBulkDocentesFiltrados(){let t=(this.bulkDocInput.value??"").toString(),e=t.toLowerCase().trim();if(t===""){this.bulkDocentesFiltrados=[];return}if(e===""){this.bulkDocentesFiltrados=this.filtrarPlantelDocentes("",!0);return}this.bulkDocentesFiltrados=this.filtrarPlantelDocentes(e)}getBulkConteoDocenteOk(t){let e=String(t??"");return Number(this.bulkConteoOkMap?.[e]??0)||0}getBulkConteoDocenteSinModo(t){let e=String(t??"");return Number(this.bulkConteoSinModoMap?.[e]??0)||0}recalcularConteoDocentesEnRows(t,e){let i={},o={};return(t||[]).forEach(c=>{let m=Number(c?.[e]??0);if(!m)return;let f=String(m);this.tieneModoParaField(c,e)?i[f]=(i[f]??0)+1:o[f]=(o[f]??0)+1}),{okMap:i,sinMap:o}}seleccionarDocenteBulk(t,e){e?.preventDefault?.(),e?.stopPropagation?.(),!(!t||this.docenteInactivo(t))&&(this.bulkDocenteSeleccionado=t,this.bulkMostrarListaDoc=!1)}abrirDetalleDocenteBulk(t,e){if(e?.preventDefault?.(),e?.stopPropagation?.(),!t)return;let i=Number(t?.id??0);if(!i)return;let o=this.getBulkField()??"planteldocadmins_id",c=this.getModoLabel(o);this.detalleDocenteMeta={docente_id:i,docente_nombre:this.getNombreCompletoDocente(t),field:o,modo_label:c},this.detalleDocenteRows=(this.bulkRowsCandidatos||[]).filter(m=>Number(m?.[o]??0)===i),this.modalDetalleDocenteRef=this._tools.openModal(this.modalDetalleDocente,"xl",{scrollable:!0,windowClass:"modal-paralelos-detalle"})}getBulkSeleccionadosCount(){return Object.entries(this.bulkSeleccionMap||{}).filter(([,e])=>!!e).map(([e])=>Number(e)).filter(e=>Number.isFinite(e)&&e>0).length}getNombreDocenteEnRow(t,e){return e==="planteldocadmins_id"?`${t?.Docente_Especialidad_Apellidos??""} ${t?.Docente_Especialidad_Nombres??""}`.trim():e==="planteldocadmins_idPC"?`${t?.Docente_Practica_Conjuntos_Apellidos??""} ${t?.Docente_Practica_Conjuntos_Nombres??""}`.trim():`${t?.Docente_Instrumento_Complementario_Apellidos??""} ${t?.Docente_Instrumento_Complementario_Nombres??""}`.trim()}getRowInfoId(t){let e=Number(t?.id??t?.info_id??0);return Number.isFinite(e)?e:0}ejecutarAccionGrupal(){if(this.bulkGuardando)return;let t=this.getBulkField();if(!t){this._tools.MostrarMensaje("warning","Seleccione el tipo de columna");return}if(!this.bulkEspecialidadSelected){this._tools.MostrarMensaje("warning",`Seleccione ${this.getBulkEspecialidadLabel()}`);return}let e=Number(this.bulkDocenteSeleccionado?.id??0);if(!e){this._tools.MostrarMensaje("warning","Seleccione el docente");return}let i=Object.entries(this.bulkSeleccionMap||{}).filter(([,c])=>!!c).map(([c])=>Number(c)).filter(c=>Number.isFinite(c)&&c>0);if(i.length===0){this._tools.MostrarMensaje("warning","No hay estudiantes seleccionados");return}let o={ids:i,field:t,docente_id:e};this.bulkGuardando=!0,this._infoest.BulkUpdateDocente(o).subscribe({next:c=>{let m=this.bulkDocenteSeleccionado;(this.est||[]).forEach(f=>{let b=Number(f?.id??f?.info_id??0);i.includes(b)&&(f[t]=e,this.aplicarDocenteEnRowVisual(f,t,m))}),this.aplicarFiltroEstudiantes(),this.recalcularConteoDocentes(t),this.bulkGuardando=!1,this._tools.MostrarMensaje("success",`Actualizaci\xF3n grupal realizada (${c?.affected??i.length})`);try{this.modalAccionesGrupalesRef?.close?.("ok")}catch{}},error:c=>{console.error("Error bulk update",c),this.bulkGuardando=!1,this._tools.MostrarMensaje("error","No se pudo realizar la actualizaci\xF3n grupal")}})}cargarCaractisticasInstitucionActual(t){if(!t){this.habilitarCamposMusicales=!1,this.actualizarMostrarCamposMusicales();return}this._inst.Seleccionarinstituciones(t).subscribe({next:e=>{console.log("ins",e);var o=(e?.data?.Caractisticas??"").toString();this.habilitarCamposMusicales=this.normalizarTexto(o).includes("INSTITUTO MUSICAL"),this.actualizarMostrarCamposMusicales(),this.habilitarCamposMusicales&&this.puedeEditarDocentes&&this.cargarOptionsInstrumentosDesdeControles()},error:()=>{this.habilitarCamposMusicales=!1,this.actualizarMostrarCamposMusicales()}})}cargarOptionsInstrumentosDesdeControles(){if(this.instrumentosOptionsCargando||this.instrumentosOptionsCargadas)return;this.instrumentosOptionsCargando=!0;let t=["ESPECIALIDAD","ESPECIALIDAD SECUNDARIA"];this._controles.ObtenerOptionsSelectPorCategorias(t).subscribe({next:e=>{this.InstrumentoMusicalOptions=e?.ESPECIALIDAD||[],this.InstrumentoMusicalSecundarioOptions=e?.["ESPECIALIDAD SECUNDARIA"]||[],this.instrumentosOptionsCargando=!1,this.instrumentosOptionsCargadas=!0},error:()=>{this.InstrumentoMusicalOptions=[],this.InstrumentoMusicalSecundarioOptions=[],this.instrumentosOptionsCargando=!1,this.instrumentosOptionsCargadas=!1}})}normalizarTexto(t){return(t??"").toString().trim().toUpperCase()}onFilterTxtEstChange(){this.paginaest=1,this.aplicarFiltroEstudiantes()}normalizarBusqueda(t){let e=(t??"").toString();try{return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim().toUpperCase()}catch{return e.trim().toUpperCase()}}textoIndexadoEstudiante(t){let e=`${t?.Ap_Paterno??""} ${t?.Ap_Materno??""}`.trim(),i=`${t?.Nombre??""}`.trim(),o=`${t?.CI??""}`.trim(),c=`${t?.Sexo??""}`.trim(),m=`${t?.InstrumentoMusical??""}`.trim();return`${e} ${i} ${o} ${c} ${m}`.trim()}aplicarFiltroEstudiantes(){let t=Array.isArray(this.est)?this.est:[],e=this.normalizarBusqueda(this.filtertxtest);e?this.estFiltrados=t.filter(i=>this.normalizarBusqueda(this.textoIndexadoEstudiante(i)).includes(e)):this.estFiltrados=t,this.collectionSizeest=this.estFiltrados.length}AnimarCargaTablaest(){this.est=[],this.aplicarFiltroEstudiantes(),this.isLoadingest=!0}onPageSizeChangeest(){this.paginaest=1}obtenerOrdenDefaultEstudiantes(){return[{column:"Ap_Paterno",direction:"asc"},{column:"Ap_Materno",direction:"asc"},{column:"Nombre",direction:"asc"}]}aplicarOrdenEstudiantes(){let t=this.sortColumnsest&&this.sortColumnsest.length>0?this.sortColumnsest:this.obtenerOrdenDefaultEstudiantes();this.est=this._tools.applyMultiSort(this.est,t)}sortByest(t,e){this.sortColumnsest=this._tools.handleSort(t,e,this.sortColumnsest),this.est=this._tools.applyMultiSort(this.est,this.sortColumnsest),this.aplicarFiltroEstudiantes()}isSortedest(t){return this._tools.isSorted(this.sortColumnsest,t)}getSortDirest(t){return this._tools.getSortDirection(this.sortColumnsest,t)}CargarEstudiantesMateriaPublico(){this.isLoadingest=!0;let t={materiaId:this.materiaId,anioId:this.anioId};this._public.CargarEstudiantesMateriaPublico(t).subscribe({next:e=>{this.est=e.data||[],this.aplicarOrdenEstudiantes(),this.aplicarFiltroEstudiantes(),this.isLoadingest=!1,this.recalcularConteoDocentes(this.edicionDocenteActivo?.field??"planteldocadmins_id"),console.log("estudiantes publicos",this.est)},error:e=>{console.error("Error al cargar",e),this.isLoadingest=!1}})}CargarEstudiantesMezcladosMateriasPublico(){this.isLoadingest=!0;let t={anioId:this.anioId,LvlCurso:this.lvlCurso,Paralelo:this.paralelo,institucionId:this.institucionId};this._public.CargarEstudiantesMezcladosMateriasPublico(t).subscribe({next:e=>{this.est=e.data||[],this.aplicarOrdenEstudiantes(),this.aplicarFiltroEstudiantes(),this.isLoadingest=!1,this.recalcularConteoDocentes(this.edicionDocenteActivo?.field??"planteldocadmins_id"),console.log("estudiantes publicos",this.est)},error:e=>{console.error("Error al cargar",e),this.isLoadingest=!1}})}CargarEstudiantesMateriaPrivado(){this.isLoadingest=!0;let t={materiaId:this.materiaId,anioId:this.anioId};this._public.CargarEstudiantesMateriaPrivado(t).subscribe({next:e=>{this.est=e.data||[],this.aplicarOrdenEstudiantes(),this.aplicarFiltroEstudiantes(),this.isLoadingest=!1,this.recalcularConteoDocentes(this.edicionDocenteActivo?.field??"planteldocadmins_id"),console.log("estudiantes Privados",this.est)},error:e=>{console.error("Error al cargar",e),this.isLoadingest=!1}})}CargarEstudiantesMezcladosMateriasPrivado(){this.isLoadingest=!0;let t={anioId:this.anioId,LvlCurso:this.lvlCurso,Paralelo:this.paralelo,institucionId:this.institucionId};this._public.CargarEstudiantesMezcladosMateriasPrivado(t).subscribe({next:e=>{this.est=e.data||[],this.aplicarOrdenEstudiantes(),this.aplicarFiltroEstudiantes(),this.isLoadingest=!1,this.recalcularConteoDocentes(this.edicionDocenteActivo?.field??"planteldocadmins_id"),console.log("estudiantes Privados",this.est)},error:e=>{console.error("Error al cargar",e),this.isLoadingest=!1}})}copiarListaExcel(){if(!this.habilitarCopiaExcel){this._tools.MostrarMensaje("info","No tiene permisos para copiar esta lista");return}let t=Array.isArray(this.estFiltrados)?this.estFiltrados:[];if(t.length===0){this._tools.MostrarMensaje("info","No hay datos para copiar");return}let e=[];t.forEach(o=>{let c=`${o?.Ap_Paterno??""} ${o?.Ap_Materno??""}`.trim(),m=`${o?.Nombre??""}`.trim(),f=`${c} ${m}`.trim(),b=`${o?.CI??""}`.toString().trim(),S=`${o?.InstrumentoMusical??""}`.trim(),I=this.normalizarBusqueda(o?.Sexo??""),P=I.startsWith("F")||I.includes("FEM"),H=I.startsWith("M")||I.includes("MASC")?"X":"",at=P?"X":"";e.push([f,b,S,H,at].join("	"))});let i=e.join(`
`);this.copiarTextoPortapapeles(i).then(()=>this._tools.MostrarMensaje("success",`Copiado para Excel (${t.length} filas)`)).catch(()=>this._tools.MostrarMensaje("error","No se pudo copiar al portapapeles"))}normalizeKey(t){return(t??"").toString().trim().toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}buildExcelRowsFromEstudiantes(t){let e=[];return t.forEach(i=>{let o=`${i?.Ap_Paterno??""} ${i?.Ap_Materno??""}`.trim(),c=`${i?.Nombre??""}`.trim(),m=`${o} ${c}`.trim(),f=`${i?.CI??""}`.toString().trim(),b=`${i?.InstrumentoMusical??""}`.trim(),S=this.normalizarBusqueda(i?.Sexo??""),I=S.startsWith("F")||S.includes("FEM"),y=S.startsWith("M")||S.includes("MASC")?"X":"",H=I?"X":"";e.push([m,f,b,y,H])}),e}descargarBlob(t,e){let i=URL.createObjectURL(t),o=document.createElement("a");o.href=i,o.download=e,o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>URL.revokeObjectURL(i),0)}parseExcelCellRef(t){let e=(t??"").toString().trim().toUpperCase();if(!e)return null;let i=e.match(/^([A-Z]+)(\d+)$/);if(!i)return null;let o=i[1],c=Number(i[2]);if(!Number.isFinite(c)||c<=0)return null;let m=0;for(let f=0;f<o.length;f++){let b=o.charCodeAt(f);if(b<65||b>90)return null;m=m*26+(b-64)}return m<=0?null:{row:c,col:m}}pedirPlantillaExcelParaModoActual(){return $(this,null,function*(){let t=(this.modomateria??"").toString().trim();if(!t)return null;let i=(yield Z(this._plantillasExcel.ObtenerPlantillas(t,!1)))?.data||[];if(i.length===0)return null;if(i.length===1)return i[0];this.plantillasExcelDisponibles=i,this.modalSeleccionPlantillaExcelRef=this._tools.openModal(this.modalSeleccionPlantillaExcel,"lg",{scrollable:!0});try{return(yield this.modalSeleccionPlantillaExcelRef.result)??null}catch{return null}})}descargarRegistroExcel(){return $(this,null,function*(){if(!this.habilitarCopiaExcel){this._tools.MostrarMensaje("info","No tiene permisos para descargar esta lista");return}let t=Array.isArray(this.estFiltrados)?this.estFiltrados:[];if(t.length===0){this._tools.MostrarMensaje("info","No hay datos para generar");return}if(!this.descargandoExcel){this.descargandoExcel=!0;try{let e=yield this.pedirPlantillaExcelParaModoActual();if(!e?.id){this._tools.MostrarMensaje("warning","No se encontr\xF3 plantilla Excel para este modo.");return}let i=this.buildExcelRowsFromEstudiantes(t),o=(this.modomateria??"MODO").toString().replace(/[^a-zA-Z0-9_\- ]/g,"").trim(),c=(this.lvlCurso??"").toString().replace(/[^a-zA-Z0-9_\- ]/g,"").trim(),m=(this.paralelo??"").toString().replace(/[^a-zA-Z0-9_\- ]/g,"").trim(),f=[c,m,o].filter(y=>!!y).join(" ").trim(),b=yield Z(this._plantillasExcel.GenerarExcelDesdePlantilla(Number(e.id),{rows:i,filename:f||"registro",docente:this.getDocenteNombreParaPlantilla(),materia:this.getMateriaTextoParaPlantilla(t),curso:this.getCursoTextoParaPlantilla(),gestion:yield this.getGestionTextoParaPlantilla(),turno:(this.turno??"").toString().trim(),institucion:(this.nameInst??"").toString().trim(),materiaId:this.materiaId?Number(this.materiaId):void 0})),S=b.body;if(!S){this._tools.MostrarMensaje("error","No se pudo generar el Excel");return}let I=b.headers?.get?.("content-disposition")||b.headers?.get?.("Content-Disposition"),P=(f||"registro")+".xlsx";if(I){let y=I.match(/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i),H=decodeURIComponent((y?.[1]||y?.[2]||"").trim());H&&(P=H)}this.descargarBlob(S,P),this._tools.MostrarMensaje("success",`Excel generado (${t.length} filas)`)}catch(e){console.error("Error generando Excel",e),this._tools.MostrarMensaje("error","Error al generar el Excel")}finally{this.descargandoExcel=!1}}})}abrirModalActualizarExcel(){if(!this.habilitarCopiaExcel){this._tools.MostrarMensaje("info","No tiene permisos para actualizar archivos");return}if((Array.isArray(this.estFiltrados)?this.estFiltrados:[]).length===0){this._tools.MostrarMensaje("info","No hay datos de estudiantes para actualizar");return}this.archivoExcelParaActualizar=null,this.modalActualizarExcelRef=this._tools.openModal(this.modalActualizarExcel,"md",{scrollable:!0})}onArchivoExcelSeleccionado(t){let e=t.target,i=e?.files?.[0]??null;if(i){let o=(i.name||"").split(".").pop()?.toLowerCase()??"";if(!["xlsx","xlsm","xltx"].includes(o)){this._tools.MostrarMensaje("warning","Solo se permiten archivos .xlsx, .xlsm o .xltx"),this.archivoExcelParaActualizar=null,e.value="";return}}this.archivoExcelParaActualizar=i}ejecutarActualizarExcel(){return $(this,null,function*(){if(!this.archivoExcelParaActualizar){this._tools.MostrarMensaje("warning","Seleccione un archivo Excel primero");return}if(!this.actualizandoExcel){this.actualizandoExcel=!0;try{let t=yield this.pedirPlantillaExcelParaModoActual();if(!t?.id){this._tools.MostrarMensaje("warning","No se encontr\xF3 plantilla Excel para este modo.");return}let e=Array.isArray(this.estFiltrados)?this.estFiltrados:[],i=this.buildExcelRowsFromEstudiantes(e),o=(this.modomateria??"MODO").toString().replace(/[^a-zA-Z0-9_\- ]/g,"").trim(),c=(this.lvlCurso??"").toString().replace(/[^a-zA-Z0-9_\- ]/g,"").trim(),m=(this.paralelo??"").toString().replace(/[^a-zA-Z0-9_\- ]/g,"").trim(),f=[c,m,o].filter(y=>!!y).join(" ").trim(),b=yield Z(this._plantillasExcel.ActualizarExcelDesdePlantilla(Number(t.id),this.archivoExcelParaActualizar,{rows:i,filename:f||"registro_actualizado",docente:this.getDocenteNombreParaPlantilla(),materia:this.getMateriaTextoParaPlantilla(e),curso:this.getCursoTextoParaPlantilla(),gestion:yield this.getGestionTextoParaPlantilla(),turno:(this.turno??"").toString().trim(),institucion:(this.nameInst??"").toString().trim(),materiaId:this.materiaId?Number(this.materiaId):void 0})),S=b.body;if(!S){this._tools.MostrarMensaje("error","No se pudo actualizar el Excel");return}let I=b.headers?.get?.("content-disposition")||b.headers?.get?.("Content-Disposition"),P=(f||"registro_actualizado")+".xlsx";if(I){let y=I.match(/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i),H=decodeURIComponent((y?.[1]||y?.[2]||"").trim());H&&(P=H)}this.descargarBlob(S,P),this._tools.MostrarMensaje("success",`Excel actualizado (${e.length} filas)`);try{this.modalActualizarExcelRef?.close?.("done")}catch{}}catch(t){console.error("Error actualizando Excel",t);let e=t?.error?.error||t?.message||"Error al actualizar el Excel";this._tools.MostrarMensaje("error",e)}finally{this.actualizandoExcel=!1}}})}getDocenteNombreParaPlantilla(){if((this.tipoPerfil??"").toString()!=="planteldocentes")return"";let e=(this.perfilUsuario?.Apellidos??"").toString().trim(),i=(this.perfilUsuario?.Nombres??"").toString().trim();return[e,i].filter(o=>!!o).join(" ").trim()}getCursoTextoParaPlantilla(){let t=(this.lvlCurso??"").toString().trim(),e=(this.paralelo??"").toString().trim();return[t,e].filter(i=>!!i).join(" ").trim()}getMateriaTextoParaPlantilla(t){let e=(this.siglaYMateria??"").toString().trim(),i=(this.modomateria??"").toString().trim().toUpperCase(),c=(e.match(/\b([A-Z]{2,8}-\d{2,6})\b/)?.[1]??"").toString().trim(),m=e;c&&(m=m.replace(new RegExp(`\\(?\\s*${c}\\s*\\)?`,"g"),""),m=m.replace(new RegExp(`\\b${c}\\b`,"g"),"")),m=m.replace(/\(\s*\)/g,"").replace(/\s+/g," ").trim();let f="",b=i.includes("MODO INSTRUMENTOS DE ESPECIALIDAD")||i.includes("MODO PRACTICA DE CONJUNTOS")||i.includes("MODO PR\xC1CTICA DE CONJUNTOS")||i.includes("MODO INSTRUMENTO COMPLEMENTARIO"),S=i.includes("1 DOCENTE")&&i.includes("MATERIA");if(b&&!S){let I=Array.isArray(t)?t[0]:null;i.includes("COMPLEMENTARIO")?f=(I?.InstrumentoMusicalSecundario??"").toString().trim():f=(I?.InstrumentoMusical??"").toString().trim()}return[m,f].filter(I=>!!I).join(" ").trim()}getGestionTextoParaPlantilla(){return $(this,null,function*(){if(this.gestionTextoCache!==null)return this.gestionTextoCache;let t=Number((this.anioId??"").toString());if(!Number.isFinite(t)||t<=0)return this.gestionTextoCache="",this.gestionTextoCache;try{let i=((yield Z(this._anios.Seleccionaranios(t)))?.data?.Anio??"").toString().trim();this.gestionTextoCache=i}catch{this.gestionTextoCache=""}return this.gestionTextoCache})}copiarTextoPortapapeles(t){let e=window?.navigator;return e?.clipboard?.writeText?e.clipboard.writeText(t):new Promise((i,o)=>{try{let c=document.createElement("textarea");c.value=t,c.style.position="fixed",c.style.left="-10000px",c.style.top="0",document.body.appendChild(c),c.focus(),c.select();let m=document.execCommand("copy");document.body.removeChild(c),m?i():o()}catch{o()}})}CargarPlantelDocente(){this._planteldoc.Obtenerplanteldocentes().subscribe({next:t=>{console.log("plateldoc",t),this.planteldocente=t.data??[]},error:t=>{console.error("Error al cargar",t)}})}GenerarQRDocente(t,e){console.log(t+" "+e),this._reportes.GeneradorQRDinamico("QR DEL NUMERO DE CELULAR DE "+t,"Numero de Celular de Trabajo: "+e,e)}GenerarReporteListaEstudiantes(){this._reportes.GenerarListaAlumnos2026(this.est,this.anioId,this.lvlCurso,this.paralelo,this.institucionId,this.modo,this.materiaId,this.reportarconInstrumentos,this.reportarcondocentesEspecialidad)}AccionCopiarNombres(){var t="";this.est.forEach(e=>{var i=e.Ap_Paterno+" "+e.Ap_Materno+" "+e.Nombre;t=t+i+`
`}),this.copyText(t),this.copiadoNombres=!0,setTimeout(()=>{this.copiadoNombres=!1},1500)}AccionCopiarEspecialidades(){var t="";this.est.forEach(e=>{var i=e.Especialidad;t=t+i+`
`}),this.copyText(t),this.copiadoEspecialidades=!0,setTimeout(()=>{this.copiadoEspecialidades=!1},1500)}AccionCopiarSexos(){var t="";this.est.forEach(e=>{var i=e.Sexo;t=t+i+`
`}),this.copyText(t),this.copiadoSexos=!0,setTimeout(()=>{this.copiadoSexos=!1},1500)}AccionCopiarTodos(){var t="";this.est.forEach(e=>{var i=e.CI,o=e.Especialidad,c=e.Sexo,m=e.Ap_Paterno+" "+e.Ap_Materno+" "+e.Nombre;c=="FEMENINO"?t=t+m+"	"+i+"	"+o+`		X
`:t=t+m+"	"+i+"	"+o+`	X	
`}),this.copyText(t),this.copiadoTodos=!0,setTimeout(()=>{this.copiadoTodos=!1},1500)}AccionCopiarCarnets(){var t="";this.est.forEach(e=>{var i=e.CI;t=t+i+`
`}),this.copyText(t),this.copiadoCarnets=!0,setTimeout(()=>{this.copiadoCarnets=!1},1500)}copyText(t){let e=document.createElement("textarea");e.style.position="fixed",e.style.left="0",e.style.top="0",e.style.opacity="0",e.value=t,document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),document.body.removeChild(e),this.copy=!0,setTimeout(()=>{this.copy=!1},2e3)}};Q.\u0275fac=function(e){return new(e||Q)(M(et),M(xe),M(fe),M(tt),M(Ce),M(he),M(ge),M(it),M(Ze),M(nt))},Q.\u0275cmp=ie({type:Q,selectors:[["app-paralelos"]],viewQuery:function(e,i){if(e&1&&(Y(Xt,7),Y(Kt,7),Y(ei,7),Y(ti,7)),e&2){let o;J(o=X())&&(i.modalDetalleDocente=o.first),J(o=X())&&(i.modalAccionesGrupales=o.first),J(o=X())&&(i.modalSeleccionPlantillaExcel=o.first),J(o=X())&&(i.modalActualizarExcel=o.first)}},hostBindings:function(e,i){e&1&&h("click",function(c){return i.closeMenu(c)},Ie)("resize",function(){return i.onResize()},Se)("scroll",function(){return i.onScroll()},Se)("keydown",function(c){return i.onKeydown(c)},Ie)},standalone:!1,decls:11,vars:2,consts:[["loginRequerido",""],["modalSeleccionPlantillaExcel",""],["modalDetalleDocente",""],["modalAccionesGrupales",""],["modalActualizarExcel",""],["editDocAdmin",""],["editDocPC",""],["editDocOtros",""],["editInstrumentoMusical",""],["editInstrumentoMusicalSec",""],[4,"ngIf","ngIfElse"],[1,"container","mt-4"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"lead","text-secondary","subtitulosGlobales"],[1,"fw-bold",2,"color","blue"],[2,"color","brown"],[1,"col-sm-9","d-flex","justify-content-start","button",2,"gap","10px","flex-wrap","wrap"],["class","btn mouse-dir secondary d-flex align-items-center","style","gap: 8px;",3,"click",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style","gap: 8px;",3,"disabled","click",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style","gap: 8px;",3,"click",4,"ngIf"],[1,"col-sm-3","ms-auto","d-flex","justify-content-end"],[1,"w-100"],[1,"input-group"],[1,"input-group-text"],["width","30px","height","30px",3,"options"],[1,"form-floating"],["type","text","placeholder","Buscar","title","Filtrar/Buscar",1,"form-control",3,"ngModelChange","ngModel"],["class","col-sm-12 paralelos-inline-switches mt-2","style","gap: 10px; display: flex;",4,"ngIf"],["class","col-sm-12 mt-2",4,"ngIf"],[1,"mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-sm","align-middle"],[1,""],[1,"text-center"],[2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["class","bi",3,"ngClass",4,"ngIf"],["title","Docente de Especialidad","style","user-select: none; -webkit-user-select: none; -moz-user-select: none;",3,"click",4,"ngIf"],["title","Docente de Pr\xE1ctica de Conjuntos","style","user-select: none; -webkit-user-select: none; -moz-user-select: none;",3,"click",4,"ngIf"],["title","Docente de Instrumento Complementario","style","user-select: none; -webkit-user-select: none; -moz-user-select: none;",3,"click",4,"ngIf"],["style","user-select: none; -webkit-user-select: none; -moz-user-select: none;",3,"click",4,"ngIf"],["title","Instrumento Complementario","style","user-select: none; -webkit-user-select: none; -moz-user-select: none;",3,"click",4,"ngIf"],["class","text-center",4,"ngIf"],[4,"ngIf"],["style","cursor: pointer;",3,"contextmenu",4,"ngFor","ngForOf"],["class","docente-edicion-overlay list-group",3,"top","left","width",4,"ngIf"],[1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","width","30px","height","30px"],["width","50px","height","50px",3,"options"],[1,"dir-part"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[1,"col-sm-12","paralelos-inline-switches","mt-2",2,"gap","10px","display","flex"],[1,"form-check","form-switch","text-dark","fw-semibold"],["type","checkbox","role","switch","id","reportarconInstrumentosxd",1,"form-check-input",3,"ngModelChange","ngModel"],["for","reportarconInstrumentosxd",1,"form-check-label"],["type","checkbox","role","switch","id","reportarcondocentesEspecialidadxd",1,"form-check-input",3,"ngModelChange","ngModel"],["for","reportarcondocentesEspecialidadxd",1,"form-check-label"],["class","form-check form-switch mt-2 paralelos-switch",4,"ngIf"],[1,"form-check","form-switch","mt-2","paralelos-switch"],["type","checkbox","role","switch","id","chkEdicionDocentes",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","chkEdicionDocentes",1,"form-check-label","fw-semibold","text-dark"],[1,"col-sm-12","mt-2"],[1,"bi",3,"ngClass"],["title","Docente de Especialidad",2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["title","Docente de Pr\xE1ctica de Conjuntos",2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["title","Docente de Instrumento Complementario",2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["title","Instrumento Complementario",2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[2,"cursor","pointer",3,"contextmenu"],["class","small text-muted",4,"ngIf"],["class","small text-muted","title","Cantidad de asignaciones",4,"ngIf"],["class","docente-cell","style","min-width: 240px;",3,"docente-cell-editable","docente-cell-active","click",4,"ngIf"],["style","min-width: 210px;",4,"ngIf"],[1,"small","text-muted"],["title","Cantidad de asignaciones",1,"small","text-muted"],[1,"docente-cell",2,"min-width","240px",3,"click"],["target","_blank","title","CONTACTARSE",1,"btn","mouse-dir","success","btn-sm","d-inline-flex","align-items-center",2,"gap","6px",3,"href"],["target","_blank","title","CONTACTARSE",1,"btn","mouse-dir","success","btn-sm","d-inline-flex","align-items-center",2,"gap","6px",3,"click","href"],[1,"paralelos-btn-icon"],["width","34px","height","34px",3,"options"],[1,"docente-edicion-buscador","position-relative"],["type","text","placeholder","Buscar docente...",1,"form-control","form-control-sm",3,"focus","click","keydown.escape","formControl"],["class","small text-muted mt-1",4,"ngIf"],[1,"small","text-muted","mt-1"],[2,"min-width","210px"],[1,"form-floating","paralelos-floating"],[1,"form-select","form-select-sm",3,"click","ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[3,"ngValue","disabled"],[1,"docente-edicion-overlay","list-group"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngIf"],["class","list-group-item text-muted",4,"ngIf"],["class","list-group-item list-group-item-action d-flex justify-content-between align-items-center",3,"disabled","click",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"fw-semibold","text-truncate"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],[1,"list-group-item","text-muted"],[1,"list-group-item","list-group-item-action","d-flex","justify-content-between","align-items-center",3,"click"],[1,"me-2"],[1,"fw-semibold"],[1,"text-muted"],["class","text-danger fw-semibold",4,"ngIf"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"text-danger","fw-semibold"],["role","alert",1,"alert","alert-warning","text-center"],[1,"modal-header"],[1,"modal-title"],["type","button","title","cerrar",1,"btn-close",3,"click"],[1,"modal-body"],["class","text-center text-muted",4,"ngIf"],["class","list-group",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],[1,"text-center","text-muted"],[1,"list-group"],["type","button","class","list-group-item list-group-item-action d-flex justify-content-between align-items-center",3,"click",4,"ngFor","ngForOf"],["type","button",1,"list-group-item","list-group-item-action","d-flex","justify-content-between","align-items-center",3,"click"],[1,"badge","text-bg-primary"],[1,"text-muted","small"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"table-responsive",2,"max-height","65vh"],[1,"table","table-sm","table-striped","align-middle"],[1,"text-center",2,"width","40px"],[1,"text-center",2,"width","140px"],[1,"text-center",2,"width","120px"],[1,"text-center",2,"width","70px"],[1,"text-center",2,"width","90px"],[1,"text-center",2,"width","110px"],[4,"ngFor","ngForOf"],["class","badge bg-success",4,"ngIf"],["class","badge bg-danger",4,"ngIf"],[1,"badge","bg-success"],[1,"badge","bg-danger"],[1,"row","g-3"],[1,"col-md-4"],[1,"form-select",3,"ngModelChange","change","ngModel"],[1,"form-select",3,"ngModelChange","change","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Buscar docente...",1,"form-control",3,"focus","input","formControl","disabled"],["class","list-group mt-2",4,"ngIf"],["class","small text-muted mt-2",4,"ngIf"],[1,"my-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"table-responsive","mt-2",2,"max-height","55vh"],[2,"width","120px"],[2,"width","160px"],["type","button",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],["type","button",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],[3,"value"],[1,"list-group","mt-2"],[1,"small","text-muted","mt-2"],["colspan","4",1,"text-center","text-muted"],["type","checkbox",1,"form-check-input","paralelos-check",3,"ngModelChange","ngModel"],[1,"text-muted","small","mb-3"],[1,"mb-3"],[1,"form-label","fw-semibold"],["type","file","accept",".xlsx,.xlsm,.xltx",1,"form-control",3,"change"],["class","alert alert-info py-2 small mb-0",4,"ngIf"],[1,"alert","alert-info","py-2","small","mb-0"],[1,"bi","bi-file-earmark-spreadsheet","me-1"]],template:function(e,i){if(e&1&&u(0,vn,58,27,"ng-container",10)(1,bn,3,0,"ng-template",null,0,V)(3,Mn,14,3,"ng-template",null,1,V)(5,wn,42,4,"ng-template",null,2,V)(7,jn,71,22,"ng-template",null,3,V)(9,zn,25,6,"ng-template",null,4,V),e&2){let o=L(2);p("ngIf",!i.requiereLogin)("ngIfElse",o)}},dependencies:[ke,re,le,ue,_e,ce,Ve,me,de,pe,Le,Be],styles:['@charset "UTF-8";[_nghost-%COMP%]     .docente-edicion-overlay{position:fixed;z-index:1040;max-height:520px;overflow:auto;box-shadow:0 6px 18px #0000001f;border-radius:.5rem;background:#fff}[_nghost-%COMP%]     .docente-edicion-overlay .list-group-item{padding-top:.6rem;padding-bottom:.6rem}[_nghost-%COMP%]     .docente-edicion-overlay .list-group-item>.me-2{flex:1;min-width:0}[_nghost-%COMP%]     .docente-edicion-overlay .fw-semibold{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]     .modal.modal-paralelos-detalle{z-index:1060}[_nghost-%COMP%]     .modal.modal-paralelos-detalle .modal-content{min-height:220px}[_nghost-%COMP%]     .modal.modal-paralelos-detalle .modal-body{overflow:auto}[_nghost-%COMP%]     .docente-edicion-buscador .list-group-item.disabled{pointer-events:none;opacity:.6}[_nghost-%COMP%]     td.docente-cell{position:relative;overflow:visible}[_nghost-%COMP%]     .paralelos-actions{display:flex;flex-wrap:wrap;align-items:center;gap:10px}[_nghost-%COMP%]     .paralelos-btn-icon{display:flex;align-items:center;justify-content:center;width:30px;height:30px}[_nghost-%COMP%]     a.btn.mouse-dir.success.btn-sm{padding-top:.25rem;padding-bottom:.25rem}[_nghost-%COMP%]     a.btn.mouse-dir.success.btn-sm .paralelos-btn-icon{width:26px;height:26px}[_nghost-%COMP%]     .paralelos-inline-switches{display:flex;flex-wrap:wrap;gap:14px;align-items:center}[_nghost-%COMP%]     .paralelos-switch .form-check-input, [_nghost-%COMP%]     .paralelos-inline-switches .form-check-input{cursor:pointer}[_nghost-%COMP%]     .paralelos-check.form-check-input{cursor:pointer;transform:scale(1.15);transform-origin:center}[_nghost-%COMP%]     td.docente-cell.docente-cell-editable{cursor:pointer;background-color:rgba(var(--bs-warning-rgb),.08);box-shadow:inset 0 0 0 1px rgba(var(--bs-warning-rgb),.35);transition:background-color .12s ease,box-shadow .12s ease}[_nghost-%COMP%]     td.docente-cell.docente-cell-editable:hover{background-color:rgba(var(--bs-warning-rgb),.12);box-shadow:0 0 0 .18rem rgba(var(--bs-warning-rgb),.22)}[_nghost-%COMP%]     td.docente-cell.docente-cell-active{background-color:rgba(var(--bs-warning-rgb),.16);box-shadow:0 0 0 .22rem rgba(var(--bs-warning-rgb),.26)}[_nghost-%COMP%]     .paralelos-floating{min-height:44px}[_nghost-%COMP%]     .paralelos-floating>.form-select{padding-top:1.25rem;padding-bottom:.35rem}[_nghost-%COMP%]     .paralelos-floating>label{padding-top:.4rem;padding-bottom:.2rem;font-size:.78rem;opacity:.8}']});var be=Q;var $n=[{path:"inicio",component:Je},{path:"horarios",component:ve},{path:"paralelos",component:be},{path:"planteldocentes",loadComponent:()=>import("./chunk-V7GTVAX4.js").then(n=>n.Planteldocentes)},{path:"planteladministrativos",loadComponent:()=>import("./chunk-W5L6QPKW.js").then(n=>n.Planteladministrativos)},{path:"eventos",loadComponent:()=>import("./chunk-TKQA2E25.js").then(n=>n.EventosPublicosComponent)},{path:"eventos/:id",loadComponent:()=>import("./chunk-JNFLUTQN.js").then(n=>n.EventoInscripcionComponent)},{path:"documentos",loadComponent:()=>import("./chunk-SBBNCNSI.js").then(n=>n.DocumentosComponent)},{path:"documentos-publicos",loadComponent:()=>import("./chunk-LU7Y5JTY.js").then(n=>n.DocumentosPublicosComponent)}],G=class G{};G.\u0275fac=function(e){return new(e||G)},G.\u0275mod=ne({type:G}),G.\u0275inj=te({imports:[K.forChild($n),K]});var Ee=G;var W=class W{};W.\u0275fac=function(e){return new(e||W)},W.\u0275mod=ne({type:W}),W.\u0275inj=te({imports:[Ne,ze,$e,Ee,Ye,Ge,qe,We,K,Xe,Ke]});var ot=W;export{ot as PublicosModule};
