import{a as b}from"./chunk-NCIXDP2C.js";import{h as F,k as L}from"./chunk-LEW5N4EV.js";import{b as k}from"./chunk-56VH3ULB.js";import"./chunk-OXGEW5OA.js";import{c as O,f as w,k as A,r as V,s as B,t as D,x as U}from"./chunk-TKGN7DBU.js";import{a as N}from"./chunk-5RMZ5E5A.js";import{Ea as o,Ec as T,Fc as M,Ib as E,Lb as r,Ma as S,Mb as v,Nb as f,Nc as P,Ob as _,Ra as x,Sb as C,Tb as h,Ub as y,Wa as m,Zb as I,ib as s,jb as l,kb as i,vb as g,xb as p}from"./chunk-SGF3PIFW.js";import"./chunk-GG76335P.js";var R=n=>["/publicos/eventos",n];function W(n,t){if(n&1&&(l(0,"option",9),r(1),i()),n&2){let e=t.$implicit;s("ngValue",e),o(),v(e==null?null:e.Nombre)}}function $(n,t){n&1&&(l(0,"div",3),r(1,"Cargando eventos..."),i())}function q(n,t){if(n&1&&(l(0,"span"),r(1),i()),n&2){let e=p().$implicit;o(),f("\xB7 ",e==null?null:e.Lugar)}}function z(n,t){if(n&1&&(l(0,"p",30),r(1),i()),n&2){let e=p().$implicit;o(),v(e==null?null:e.Descripcion)}}function G(n,t){if(n&1&&(l(0,"div",23),r(1),i()),n&2){let e=p().$implicit;o(),_(" Monto: ",e==null?null:e.Monto," ",(e==null?null:e.Moneda)||"BS"," ")}}function J(n,t){if(n&1&&(l(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div")(5,"h5",22),r(6),i(),l(7,"div",23),r(8),m(9,q,2,1,"span",24),i()(),l(10,"span",25),r(11),i()(),m(12,z,2,1,"p",26)(13,G,2,2,"div",27),i(),l(14,"div",28)(15,"a",29),r(16,"Inscribirme"),i()()()()),n&2){let e=t.$implicit;o(6),v(e==null?null:e.NombreEvento),o(2),_("",e==null?null:e.Anio," \xB7 ",e==null?null:e.ModoInscripcion," "),o(),s("ngIf",e==null?null:e.Lugar),o(),E("bg-success",(e==null?null:e.TienePago)==0)("bg-warning",(e==null?null:e.TienePago)==1),o(),f(" ",(e==null?null:e.TienePago)==1?"Con pago":"Sin pago"," "),o(),s("ngIf",e==null?null:e.Descripcion),o(),s("ngIf",(e==null?null:e.TienePago)==1),o(2),s("routerLink",I(12,R,e==null?null:e.id))}}function K(n,t){n&1&&(l(0,"div",31)(1,"div",32),r(2,"No hay eventos p\xFAblicos disponibles."),i()())}function Q(n,t){if(n&1&&(l(0,"div",15),m(1,J,17,14,"div",16)(2,K,3,0,"div",17),i()),n&2){let e=p();o(),s("ngForOf",e.eventosFiltrados),o(),s("ngIf",((e.eventosFiltrados==null?null:e.eventosFiltrados.length)??0)===0)}}var u=class u{constructor(t){this._tools=t;this.ruta=N.ruta;this.instituciones=[];this.institucionSeleccionada=null;this.eventos=[];this.isLoading=!1;this.filterTxt=""}ngOnInit(){this.cargarInstituciones(),this.cargarEventos()}cargarInstituciones(){b.get(this.ruta+"api/instituciones").then(t=>{let e=Array.isArray(t?.data?.data)?t.data.data:Array.isArray(t?.data)?t.data:[];this.instituciones=e.filter(a=>String(a?.Visibilidad??"VISIBLE").toUpperCase()==="VISIBLE").filter(a=>String(a?.Estado??"ACTIVO").toUpperCase()==="ACTIVO").sort((a,d)=>String(a?.Nombre??"").localeCompare(String(d?.Nombre??"")))}).catch(()=>{this.instituciones=[]})}seleccionarInstitucion(t){t?this.institucionSeleccionada?.id===t.id?this.institucionSeleccionada=null:this.institucionSeleccionada=t:this.institucionSeleccionada=null,this.cargarEventos()}cargarEventos(){this.isLoading=!0;let t={};this.institucionSeleccionada?.id&&(t.instituciones_id=this.institucionSeleccionada.id),b.get(this.ruta+"api/public/eventos",{params:t}).then(e=>{this.eventos=e?.data?.data??[],this.isLoading=!1}).catch(()=>{this.eventos=[],this.isLoading=!1})}get eventosFiltrados(){let t=(this.filterTxt??"").toString().trim().toUpperCase();return t?(this.eventos??[]).filter(e=>{let a=(e?.NombreEvento??"").toString().toUpperCase(),d=(e?.Lugar??"").toString().toUpperCase(),c=(e?.ModoInscripcion??"").toString().toUpperCase(),H=(e?.Anio??"").toString().toUpperCase();return a.includes(t)||d.includes(t)||c.includes(t)||H.includes(t)}):this.eventos}};u.\u0275fac=function(e){return new(e||u)(S(k))},u.\u0275cmp=x({type:u,selectors:[["app-eventos-publicos"]],decls:23,vars:6,consts:[[1,"container-fluid"],[1,"d-flex","align-items-center","justify-content-between","mb-3"],[1,"mb-0"],[1,"text-muted"],[1,"btn","btn-outline-secondary",3,"click"],[1,"row","g-2","mb-2"],[1,"col-md-5"],[1,"form-label"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-7"],["placeholder","Nombre / lugar / a\xF1o / modo...",1,"form-control",3,"ngModelChange","ngModel"],["class","text-muted",4,"ngIf"],["class","row g-3",4,"ngIf"],[1,"row","g-3"],["class","col-md-6 col-lg-4",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],[1,"col-md-6","col-lg-4"],[1,"card","h-100"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-start"],[1,"card-title","mb-1"],[1,"text-muted","small"],[4,"ngIf"],[1,"badge"],["class","mt-2 mb-2 text-muted",4,"ngIf"],["class","text-muted small",4,"ngIf"],[1,"card-footer","bg-transparent"],[1,"btn","btn-primary","w-100",3,"routerLink"],[1,"mt-2","mb-2","text-muted"],[1,"col-12"],[1,"alert","alert-info","mb-0"]],template:function(e,a){e&1&&(l(0,"div",0)(1,"div",1)(2,"div")(3,"h3",2),r(4,"Eventos"),i(),l(5,"small",3),r(6,"Inscripci\xF3n p\xFAblica v\xEDa web"),i()(),l(7,"button",4),g("click",function(){return a.cargarEventos()}),r(8,"Refrescar"),i()(),l(9,"div",5)(10,"div",6)(11,"label",7),r(12,"Instituci\xF3n (opcional)"),i(),l(13,"select",8),g("ngModelChange",function(c){return a.seleccionarInstitucion(c)}),l(14,"option",9),r(15,"-- Todas --"),i(),m(16,W,2,2,"option",10),i()(),l(17,"div",11)(18,"label",7),r(19,"Buscar"),i(),l(20,"input",12),y("ngModelChange",function(c){return h(a.filterTxt,c)||(a.filterTxt=c),c}),i()()(),m(21,$,2,0,"div",13)(22,Q,3,2,"div",14),i()),e&2&&(o(13),s("ngModel",a.institucionSeleccionada),o(),s("ngValue",null),o(2),s("ngForOf",a.instituciones),o(4),C("ngModel",a.filterTxt),o(),s("ngIf",a.isLoading),o(),s("ngIf",!a.isLoading))},dependencies:[P,T,M,U,B,D,O,V,w,A,L,F],styles:[".card-title[_ngcontent-%COMP%]{line-height:1.1}"]});var j=u;export{j as EventosPublicosComponent};
