import{a as fe}from"./chunk-5YOBPPYD.js";import{a as ge}from"./chunk-YBOEBBAE.js";import{a as be}from"./chunk-P5G66PID.js";import{a as F}from"./chunk-XDAG4MPO.js";import{b as _e}from"./chunk-P4K6CI26.js";import{a as pe,b as ue}from"./chunk-NHQGIU22.js";import{b as me}from"./chunk-KCTZUZJH.js";import{e as K,g as Z,h as ee,k as te}from"./chunk-PWQJWZZZ.js";import"./chunk-5VY7FQQV.js";import{b as ie,c as ne,f as ae,k as oe,m as re,r as le,s as ce,t as se,x as de}from"./chunk-ROSYCBC4.js";import{a as T}from"./chunk-JISGPZ2J.js";import{$b as Q,Aa as W,Dc as H,Ea as r,F as I,Fc as X,Gc as G,Ib as $,Kb as N,Lb as l,Ma as f,Mb as w,Nb as _,Oc as J,Ra as q,Tb as x,U as S,Ub as C,Vb as A,Wa as u,Yc as Y,Z as j,Zb as P,_b as z,ac as k,ba as U,ga as b,ha as g,i as y,ib as s,jb as a,kb as n,lb as p,pb as B,qb as D,sb as v,vb as h,w as R,xb as m}from"./chunk-SPNCLBHB.js";import{a as L}from"./chunk-GG76335P.js";var E=class E{constructor(t){this.http=t;this.base=`${T.apiUrl}${T.apiRoutes.lchaula.base}`}getByAula(t){return this.http.get(`${this.base}/aulas/${t}/publicaciones`).pipe(F())}create(t,e){return this.http.post(`${this.base}/aulas/${t}/publicaciones`,e).pipe(F())}delete(t,e){return this.http.delete(`${this.base}/aulas/${t}/publicaciones/${e}`).pipe(F()).pipe(o=>o)}};E.\u0275fac=function(e){return new(e||E)(U(Y))},E.\u0275prov=j({token:E,factory:E.\u0275fac,providedIn:"root"});var O=E;var he=()=>({standalone:!0}),ye=(i,t)=>({"bg-success-subtle text-success border":i,"bg-secondary-subtle text-secondary border":t}),Ie=(i,t,e)=>({"bg-info":i,"bg-success":t,"bg-warning":e}),Se=(i,t,e)=>({"bg-info-subtle text-info":i,"bg-success-subtle text-success":t,"bg-warning-subtle text-warning":e}),Ee=(i,t,e)=>({"bg-info":i,"bg-success":t,"bg-warning text-dark":e}),xe=()=>[],we=i=>["/lchaula/tarea",i];function Te(i,t){i&1&&(a(0,"div",30),p(1,"app-spinner-local",31),n())}function Me(i,t){if(i&1&&(a(0,"span"),l(1),n()),i&2){let e=m(2);r(),_("",e.aula.materia_sigla," \u2022 ")}}function Pe(i,t){if(i&1&&(a(0,"span"),l(1),n()),i&2){let e=m(2);r(),w(e.aula.materia_curso)}}function ke(i,t){if(i&1&&(a(0,"span"),l(1),n()),i&2){let e=m(2);r(),_(" \u2022 Paralelo ",e.aula.materia_paralelo)}}function Fe(i,t){if(i&1&&(a(0,"span"),l(1),n()),i&2){let e=m(2);r(),_(" \u2022 ",e.aula.materia_turno)}}function Oe(i,t){if(i&1&&(a(0,"div",53),l(1),n()),i&2){let e=m(2);r(),w(e.aula.descripcion)}}function Ne(i,t){if(i&1){let e=v();a(0,"li",54)(1,"button",55),h("click",function(){let d=b(e).$implicit,c=m(2);return g(c.setTab(d.key))}),p(2,"i"),l(3),a(4,"span",56),l(5),n()()()}if(i&2){let e=t.$implicit,o=m(2);r(),$("active",o.selectedTab===e.key),r(),N(e.icon+" me-1"),r(),_("",e.label," "),r(2),w(o.getTabCount(e.key))}}function Ve(i,t){if(i&1){let e=v();a(0,"button",57),h("click",function(){b(e);let d=m(2);return g(d.openComposer())}),p(1,"i",58),l(2," Nueva publicaci\xF3n "),n()}}function Le(i,t){i&1&&(a(0,"div",59),p(1,"i",60),a(2,"div",61),l(3,"No hay publicaciones en esta secci\xF3n."),n()())}function Re(i,t){if(i&1&&(a(0,"span",78),p(1,"i",79),l(2),n()),i&2){let e=m().$implicit;r(2),_("",e.fecha_publicacion||e.created_at," ")}}function je(i,t){if(i&1){let e=v();a(0,"button",80),h("click",function(){b(e);let d=m().$implicit,c=m(3);return g(c.onDeletePublicacion(d))}),p(1,"i",81),n()}}function Ue(i,t){if(i&1&&(a(0,"div",82),p(1,"quill-editor",83),n()),i&2){let e=m().$implicit,o=m(3);r(),s("ngModel",e.descripcion)("modules",o.modulesQuillShow)("readOnly",!0)("ngModelOptions",P(4,he))}}function We(i,t){if(i&1&&(a(0,"div",87),p(1,"i",91),a(2,"strong"),l(3,"Fecha:"),n(),l(4),n()),i&2){let e=m(2).$implicit;r(4),_(" ",e.tarea.fecha_entrega," ")}}function qe(i,t){if(i&1&&(a(0,"div",84)(1,"div",85),u(2,We,5,1,"div",86),a(3,"div",87),p(4,"i",88),a(5,"strong"),l(6,"Puntaje m\xE1x:"),n(),l(7),n(),a(8,"a",89),p(9,"i",90),l(10),n()()()),i&2){let e=m().$implicit,o=m(3);r(2),s("ngIf",e.tarea==null?null:e.tarea.fecha_entrega),r(5),_(" ",e.tarea==null?null:e.tarea.puntaje_maximo," "),r(),s("routerLink",z(4,we,e.tarea.id)),r(2),_(" ",o.isAdminLike?"Revisar entregas":"Ver / Entregar tarea"," ")}}function Be(i,t){if(i&1&&(a(0,"a",97),p(1,"i",98),a(2,"span",99),l(3),n(),p(4,"i",100),n()),i&2){let e=m().$implicit,o=m(5);s("href",o.publicBaseUrl+((e==null||e.archivo==null?null:e.archivo.ruta)||""),W),r(3),w((e==null||e.archivo==null?null:e.archivo.nombre_original)||"archivo")}}function De(i,t){if(i&1&&(B(0),u(1,Be,5,2,"a",96),D()),i&2){let e=t.$implicit;r(),s("ngIf",e==null||e.archivo==null?null:e.archivo.ruta)}}function $e(i,t){if(i&1&&(a(0,"div",92)(1,"div",93),p(2,"i",22),l(3),n(),a(4,"div",94),u(5,De,2,1,"ng-container",95),n()()),i&2){let e=m().$implicit,o=m(3);r(3),_("Adjuntos (",(o.archivosPorPublicacion[e.id]||P(2,xe)).length,") "),r(2),s("ngForOf",o.archivosPorPublicacion[e.id])}}function ze(i,t){if(i&1){let e=v();a(0,"div",101)(1,"div",102)(2,"label",103),p(3,"i",104),l(4," Subir archivo "),n(),a(5,"input",105),h("change",function(d){b(e);let c=m().$implicit,V=m(3);return g(V.onUploadPublicacionFiles(c.id,d))}),n(),a(6,"span",78),l(7,"Se pueden subir m\xFAltiples archivos"),n()()()}if(i&2){let e=m().$implicit;r(2),s("for","upload_pub_"+e.id),r(3),s("id","upload_pub_"+e.id)}}function Qe(i,t){if(i&1&&(a(0,"div",33)(1,"div",64),p(2,"div",65),a(3,"div",66)(4,"div",67)(5,"div",68),p(6,"i",69),n(),a(7,"div",70)(8,"div",71)(9,"span",43),l(10),n(),u(11,Re,3,1,"span",72)(12,je,2,0,"button",73),n(),a(13,"h5",74),l(14),n(),u(15,Ue,2,5,"div",75)(16,qe,11,6,"div",76)(17,$e,6,3,"div",77)(18,ze,8,2,"div",24),n()()()()()),i&2){let e=t.$implicit,o=m(3);r(2),s("ngClass",k(13,Ie,e.tipo==="ANUNCIO",e.tipo==="MATERIAL",e.tipo==="TAREA")),r(3),s("ngClass",k(17,Se,e.tipo==="ANUNCIO",e.tipo==="MATERIAL",e.tipo==="TAREA")),r(),N(o.getPublicacionIcon(e.tipo)),r(3),s("ngClass",k(21,Ee,e.tipo==="ANUNCIO",e.tipo==="MATERIAL",e.tipo==="TAREA")),r(),_(" ",e.tipo," "),r(),s("ngIf",e.fecha_publicacion||e.created_at),r(),s("ngIf",o.isAdminLike),r(2),w(e.titulo),r(),s("ngIf",e.descripcion),r(),s("ngIf",e.tarea),r(),s("ngIf",(o.archivosPorPublicacion[e.id]||P(25,xe)).length>0),r(),s("ngIf",o.isAdminLike)}}function He(i,t){if(i&1&&(a(0,"div",62),u(1,Qe,19,26,"div",63),n()),i&2){let e=m(2);r(),s("ngForOf",e.publicacionesFiltradas)}}function Xe(i,t){if(i&1&&(a(0,"div")(1,"div",32)(2,"div",33)(3,"div",34)(4,"a",35),p(5,"i",36),n(),a(6,"div",37)(7,"h1",38),l(8),n(),a(9,"p",39),u(10,Me,2,1,"span",2)(11,Pe,2,1,"span",2)(12,ke,2,1,"span",2)(13,Fe,2,1,"span",2),n()(),a(14,"div",40)(15,"span",41),p(16,"i",42),l(17),n(),a(18,"span",43),l(19),n()()(),u(20,Oe,2,1,"div",44),p(21,"hr",45),n()(),a(22,"div",46)(23,"div",47)(24,"ul",48),u(25,Ne,6,6,"li",49),n(),u(26,Ve,3,0,"button",50),n()(),u(27,Le,4,0,"div",51)(28,He,2,1,"div",52),n()),i&2){let e=m();r(8),_(" ",(e.aula==null?null:e.aula.materia_nombre)||e.aula.nombre||"Aula #"+e.aula.id," "),r(2),s("ngIf",e.aula==null?null:e.aula.materia_sigla),r(),s("ngIf",e.aula==null?null:e.aula.materia_curso),r(),s("ngIf",e.aula==null?null:e.aula.materia_paralelo),r(),s("ngIf",e.aula==null?null:e.aula.materia_turno),r(4),_("",e.participantesCount," participantes "),r(),s("ngClass",Q(13,ye,(e.aula.estado||"").toUpperCase()==="ACTIVO",(e.aula.estado||"").toUpperCase()!=="ACTIVO")),r(),_(" ",e.aula.estado||"SIN ESTADO"," "),r(),s("ngIf",e.aula.descripcion),r(5),s("ngForOf",e.tabs),r(),s("ngIf",e.isAdminLike),r(),s("ngIf",e.publicacionesFiltradas.length===0),r(),s("ngIf",e.publicacionesFiltradas.length>0)}}function Ge(i,t){if(i&1){let e=v();a(0,"span",109),p(1,"i",98),l(2),a(3,"button",110),h("click",function(){let d=b(e).index,c=m(2);return g(c.removeComposerFile(d))}),n()()}if(i&2){let e=t.$implicit;r(2),_(" ",e.name," ")}}function Je(i,t){if(i&1&&(a(0,"div",101)(1,"div",106),l(2),n(),a(3,"div",107),u(4,Ge,4,1,"span",108),n()()),i&2){let e=m();r(2),_("",e.composerFiles.length," archivo(s) seleccionados:"),r(2),s("ngForOf",e.composerFiles)}}function Ye(i,t){if(i&1){let e=v();a(0,"div",114)(1,"div",115)(2,"input",124),A("ngModelChange",function(d){b(e);let c=m(2);return C(c.form.tarea.limite_tardia_horas,d)||(c.form.tarea.limite_tardia_horas=d),g(d)}),n(),a(3,"label",125),l(4,"L\xEDmite tard\xEDa (horas)"),n()()()}if(i&2){let e=m(2);r(2),x("ngModel",e.form.tarea.limite_tardia_horas)}}function Ke(i,t){if(i&1){let e=v();a(0,"div",111)(1,"div",112),p(2,"i",113),l(3,"Configuraci\xF3n de tarea"),n(),a(4,"div",62)(5,"div",114)(6,"div",115)(7,"input",116),A("ngModelChange",function(d){b(e);let c=m();return C(c.form.tarea.fecha_entrega,d)||(c.form.tarea.fecha_entrega=d),g(d)}),n(),a(8,"label",117),l(9,"Fecha de entrega"),n()()(),a(10,"div",114)(11,"div",115)(12,"input",118),A("ngModelChange",function(d){b(e);let c=m();return C(c.form.tarea.puntaje_maximo,d)||(c.form.tarea.puntaje_maximo=d),g(d)}),n(),a(13,"label",119),l(14,"Puntaje m\xE1ximo"),n()()(),a(15,"div",114)(16,"div",120)(17,"input",121),A("ngModelChange",function(d){b(e);let c=m();return C(c.form.tarea.permitir_entrega_tardia,d)||(c.form.tarea.permitir_entrega_tardia=d),g(d)}),n(),a(18,"label",122),l(19,"Permitir entrega tard\xEDa"),n()()(),u(20,Ye,5,1,"div",123),n()()}if(i&2){let e=m();r(7),x("ngModel",e.form.tarea.fecha_entrega),r(5),x("ngModel",e.form.tarea.puntaje_maximo),r(5),x("ngModel",e.form.tarea.permitir_entrega_tardia),r(3),s("ngIf",e.form.tarea.permitir_entrega_tardia)}}var M=class M{constructor(t,e,o,d,c,V,Ze){this.route=t;this.aulasService=e;this.publicacionesService=o;this.archivosService=d;this.auth=c;this.toast=V;this.router=Ze;this.publicBaseUrl=T.ruta||T.apiUrl||"";this.loading=!1;this.aulaId=0;this.isAdminLike=!1;this.aula=null;this.participantesCount=0;this.publicaciones=[];this.modulesQuillEdicion={toolbar:[["bold","italic","underline","strike"],[{align:[]}],[{size:["small",!1,"large"]}],[{color:[]},{background:[]}],[{font:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","video"],["clean"]]};this.modulesQuillShow={toolbar:!1};this.tabs=[{key:"MIXTO",label:"Todo",icon:"bi bi-grid"},{key:"ANUNCIO",label:"Anuncios",icon:"bi bi-megaphone"},{key:"MATERIAL",label:"Material",icon:"bi bi-folder"},{key:"TAREA",label:"Tareas",icon:"bi bi-journal-check"}];this.selectedTab="MIXTO";this.form={tipo:"ANUNCIO",titulo:"",descripcion:"",tarea:{fecha_entrega:"",permitir_entrega_tardia:!1,limite_tardia_horas:null,puntaje_maximo:100}};this.composerFiles=[];this.archivosPorPublicacion={}}ngOnInit(){if(this.aulaId=Number(this.route.snapshot.paramMap.get("id")||0),!this.aulaId){this.toast.error("Aula invalida");return}this.auth.revisarSiesAdmin().subscribe({next:t=>this.isAdminLike=t,error:()=>this.isAdminLike=!1}),this.load()}setTab(t){this.selectedTab=t}getTabCount(t){return t==="MIXTO"?this.publicaciones.length:this.publicaciones.filter(e=>(e.tipo||"").toUpperCase()===t).length}getPublicacionSortTime(t){let e=t.fecha_publicacion||t.created_at||"",o=Date.parse(e);return Number.isFinite(o)?o:0}get publicacionesOrdenadas(){return[...this.publicaciones].sort((t,e)=>this.getPublicacionSortTime(e)-this.getPublicacionSortTime(t))}get publicacionesFiltradas(){let t=this.publicacionesOrdenadas;return this.selectedTab==="MIXTO"?t:t.filter(e=>(e.tipo||"").toUpperCase()===this.selectedTab)}getPublicacionIcon(t){switch((t||"").toUpperCase()){case"ANUNCIO":return"bi bi-megaphone-fill";case"MATERIAL":return"bi bi-folder-fill";case"TAREA":return"bi bi-journal-check";default:return"bi bi-file-text"}}load(){this.loading=!0,this.aulasService.getById(this.aulaId).pipe(S(t=>{this.aula=t.aula,this.participantesCount=t.participantes_count}),I(t=>(this.loading=!1,t.status===403||t.status===401?(this.toast.error("No tienes acceso a esta aula"),this.router.navigate(["/inicio"])):this.toast.error(t.message),y))).subscribe(()=>this.loadPublicaciones())}loadPublicaciones(){this.publicacionesService.getByAula(this.aulaId).pipe(S(t=>{this.publicaciones=t,this.loading=!1,this.publicaciones.forEach(e=>this.loadArchivosPublicacion(e.id))}),I(t=>(this.loading=!1,this.toast.error(t.message),y))).subscribe()}loadArchivosPublicacion(t){this.archivosService.list("PUBLICACION",t).pipe(S(e=>this.archivosPorPublicacion[t]=e),I(()=>y)).subscribe()}openComposer(){if(!this.composerModal){let t=document.getElementById("composerModal");t&&(this.composerModal=new bootstrap.Modal(t))}this.composerModal?.show()}closeComposer(){this.composerModal?.hide()}onSelectComposerFiles(t){let e=t.target;if(e.files)for(let o=0;o<e.files.length;o++)this.composerFiles.push(e.files[o])}removeComposerFile(t){this.composerFiles.splice(t,1)}onCreatePublicacion(){let t={tipo:this.form.tipo,titulo:this.form.titulo,descripcion:this.form.descripcion};this.form.tipo==="TAREA"&&(t.tarea=L({},this.form.tarea)),this.publicacionesService.create(this.aulaId,t).pipe(S(e=>{if(this.toast.success("Publicacion creada"),this.composerFiles.length>0){let o=e?.id||e?.data?.id;o&&this.uploadMultipleFiles(this.composerFiles,"PUBLICACION",o)}this.resetForm(),this.closeComposer(),this.loadPublicaciones()}),I(e=>(this.toast.error(e.message),y))).subscribe()}resetForm(){this.form={tipo:"ANUNCIO",titulo:"",descripcion:"",tarea:{fecha_entrega:"",permitir_entrega_tardia:!1,limite_tardia_horas:null,puntaje_maximo:100}},this.composerFiles=[]}onUploadPublicacionFiles(t,e){let o=e.target;if(!o.files||o.files.length===0)return;let d=Array.from(o.files);this.uploadMultipleFiles(d,"PUBLICACION",t),o.value=""}uploadMultipleFiles(t,e,o){let d=t.map(c=>this.archivosService.upload(c,e,o));R(d).pipe(S(()=>{this.toast.success(t.length+" archivo(s) subido(s)"),this.loadArchivosPublicacion(o)}),I(c=>(this.toast.error(c.message||"Error al subir archivos"),this.loadArchivosPublicacion(o),y))).subscribe()}onDeletePublicacion(t){confirm('Eliminar publicacion "'+t.titulo+'"?')&&this.publicacionesService.delete(this.aulaId,t.id).pipe(S(()=>{this.toast.success("Publicacion eliminada"),this.loadPublicaciones()}),I(e=>(this.toast.error(e.message),y))).subscribe()}};M.\u0275fac=function(e){return new(e||M)(f(K),f(be),f(O),f(fe),f(me),f(_e),f(Z))},M.\u0275cmp=q({type:M,selectors:[["app-lchaula-aula"]],decls:43,vars:11,consts:[[1,"container","mt-4"],["class","py-4 text-black",4,"ngIf"],[4,"ngIf"],["id","composerModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],[1,"bi","bi-pencil-square","me-2"],["type","button","data-bs-dismiss","modal",1,"btn-close","btn-close-white"],[1,"modal-body"],[1,"form-floating","mb-3"],["id","formTipo",1,"form-select",3,"ngModelChange","ngModel"],["value","ANUNCIO"],["value","MATERIAL"],["value","TAREA"],["for","formTipo"],["type","text","id","formTitulo","placeholder","Titulo de la publicacion",1,"form-control",3,"ngModelChange","ngModel"],["for","formTitulo"],[1,"mb-3"],[1,"form-label","small","text-muted"],["placeholder","Escribe aqui el contenido...",1,"quill-container-wrapper",3,"ngModelChange","ngModel","ngModelOptions","modules"],[1,"bi","bi-paperclip","me-1"],["type","file","multiple","",1,"form-control",3,"change"],["class","mt-2",4,"ngIf"],["class","border rounded-3 p-3 bg-light",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"bi","bi-send","me-1"],[1,"py-4","text-black"],["textShow","Cargando aula..."],[1,"row","mb-4"],[1,"col-12"],[1,"d-flex","align-items-center","gap-3","mb-2"],["routerLink","/lchaula","title","Volver a mis aulas",1,"btn","btn-sm","btn-outline-secondary","rounded-circle"],[1,"bi","bi-arrow-left"],[1,"flex-grow-1"],[1,"display-6","fw-bold","titulosGlobales","mb-0"],[1,"lead","text-secondary","subtitulosGlobales","mb-0"],[1,"text-end","d-none","d-md-block"],[1,"badge","bg-primary-subtle","text-primary","border","me-1"],[1,"bi","bi-people","me-1"],[1,"badge",3,"ngClass"],["class","text-muted small ms-5 ps-2",4,"ngIf"],[1,"mt-3","mb-0"],[1,"row","mb-3"],[1,"col-12","d-flex","flex-wrap","align-items-center","justify-content-between","gap-2"],["role","tablist",1,"nav","nav-pills","gap-1"],["class","nav-item",4,"ngFor","ngForOf"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["class","text-center py-5",4,"ngIf"],["class","row g-3",4,"ngIf"],[1,"text-muted","small","ms-5","ps-2"],[1,"nav-item"],[1,"nav-link","py-1","px-3",3,"click"],[1,"badge","bg-white","text-dark","ms-1","border",2,"font-size",".7rem"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"text-center","py-5"],[1,"bi","bi-journal-text","display-1","text-muted","opacity-50"],[1,"text-muted","mt-3"],[1,"row","g-3"],["class","col-12",4,"ngFor","ngForOf"],[1,"card","shadow-sm","border-0","pub-card"],[1,"pub-type-bar",3,"ngClass"],[1,"card-body"],[1,"d-flex","align-items-start","gap-3"],[1,"pub-icon","rounded-circle","d-flex","align-items-center","justify-content-center","flex-shrink-0",3,"ngClass"],[2,"font-size","1.3rem"],[1,"flex-grow-1","overflow-hidden"],[1,"d-flex","flex-wrap","align-items-center","gap-2","mb-1"],["class","text-muted small",4,"ngIf"],["class","btn btn-sm btn-outline-danger ms-auto","title","Eliminar publicaci\xF3n",3,"click",4,"ngIf"],[1,"fw-bold","mb-2"],["class","pub-description mb-3",4,"ngIf"],["class","border rounded-3 p-3 mb-3 bg-light",4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"text-muted","small"],[1,"bi","bi-clock","me-1"],["title","Eliminar publicaci\xF3n",1,"btn","btn-sm","btn-outline-danger","ms-auto",3,"click"],[1,"bi","bi-trash"],[1,"pub-description","mb-3"],[1,"quill-readonly-wrapper",3,"ngModel","modules","readOnly","ngModelOptions"],[1,"border","rounded-3","p-3","mb-3","bg-light"],[1,"d-flex","flex-wrap","align-items-center","gap-3"],["class","small",4,"ngIf"],[1,"small"],[1,"bi","bi-star","text-warning","me-1"],[1,"btn","btn-sm","btn-outline-primary","ms-auto",3,"routerLink"],[1,"bi","bi-box-arrow-in-right","me-1"],[1,"bi","bi-calendar-event","text-danger","me-1"],[1,"mb-2"],[1,"fw-semibold","small","mb-2"],[1,"d-flex","flex-wrap","gap-2"],[4,"ngFor","ngForOf"],["class","btn btn-sm btn-outline-secondary d-inline-flex align-items-center gap-1","target","_blank","rel","noopener",3,"href",4,"ngIf"],["target","_blank","rel","noopener",1,"btn","btn-sm","btn-outline-secondary","d-inline-flex","align-items-center","gap-1",3,"href"],[1,"bi","bi-file-earmark"],[1,"text-truncate",2,"max-width","180px"],[1,"bi","bi-download"],[1,"mt-2"],[1,"d-flex","align-items-center","gap-2"],[1,"btn","btn-sm","btn-outline-primary",3,"for"],[1,"bi","bi-upload","me-1"],["type","file","multiple","",1,"d-none",3,"change","id"],[1,"small","text-muted","mb-1"],[1,"d-flex","flex-wrap","gap-1"],["class","badge bg-light text-dark border d-inline-flex align-items-center gap-1",4,"ngFor","ngForOf"],[1,"badge","bg-light","text-dark","border","d-inline-flex","align-items-center","gap-1"],[1,"btn-close","btn-close-sm",2,"font-size",".5rem",3,"click"],[1,"border","rounded-3","p-3","bg-light"],[1,"fw-semibold","mb-3"],[1,"bi","bi-gear","me-1"],[1,"col-md-6"],[1,"form-floating"],["type","datetime-local","id","formDeadline",1,"form-control",3,"ngModelChange","ngModel"],["for","formDeadline"],["type","number","id","formPuntaje",1,"form-control",3,"ngModelChange","ngModel"],["for","formPuntaje"],[1,"form-check","mt-2"],["type","checkbox","id","formTardia",1,"form-check-input",3,"ngModelChange","ngModel"],["for","formTardia",1,"form-check-label"],["class","col-md-6",4,"ngIf"],["type","number","id","formLimite",1,"form-control",3,"ngModelChange","ngModel"],["for","formLimite"]],template:function(e,o){e&1&&(a(0,"div",0),u(1,Te,2,0,"div",1)(2,Xe,29,16,"div",2),n(),a(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),p(8,"i",8),l(9,"Nueva publicaci\xF3n"),n(),p(10,"button",9),n(),a(11,"div",10)(12,"div",11)(13,"select",12),A("ngModelChange",function(c){return C(o.form.tipo,c)||(o.form.tipo=c),c}),a(14,"option",13),l(15,"ANUNCIO"),n(),a(16,"option",14),l(17,"MATERIAL"),n(),a(18,"option",15),l(19,"TAREA"),n()(),a(20,"label",16),l(21,"Tipo de publicaci\xF3n"),n()(),a(22,"div",11)(23,"input",17),A("ngModelChange",function(c){return C(o.form.titulo,c)||(o.form.titulo=c),c}),n(),a(24,"label",18),l(25,"T\xEDtulo"),n()(),a(26,"div",19)(27,"label",20),l(28,"Descripci\xF3n / Contenido"),n(),a(29,"quill-editor",21),A("ngModelChange",function(c){return C(o.form.descripcion,c)||(o.form.descripcion=c),c}),n()(),a(30,"div",19)(31,"label",20),p(32,"i",22),l(33,"Archivos adjuntos (opcional) "),n(),a(34,"input",23),h("change",function(c){return o.onSelectComposerFiles(c)}),n(),u(35,Je,5,2,"div",24),n(),u(36,Ke,21,4,"div",25),n(),a(37,"div",26)(38,"button",27),l(39,"Cancelar"),n(),a(40,"button",28),h("click",function(){return o.onCreatePublicacion()}),p(41,"i",29),l(42," Publicar "),n()()()()()),e&2&&(r(),s("ngIf",o.loading),r(),s("ngIf",!o.loading&&o.aula),r(11),x("ngModel",o.form.tipo),r(10),x("ngModel",o.form.titulo),r(6),x("ngModel",o.form.descripcion),s("ngModelOptions",P(10,he))("modules",o.modulesQuillEdicion),r(6),s("ngIf",o.composerFiles.length>0),r(),s("ngIf",o.form.tipo==="TAREA"),r(4),s("disabled",!o.form.titulo.trim()))},dependencies:[J,H,X,G,de,ce,se,ne,re,ie,le,ae,oe,te,ee,ge,ue,pe],styles:["[_nghost-%COMP%]{display:block}.pub-card[_ngcontent-%COMP%]{position:relative;overflow:hidden;transition:box-shadow .2s ease}.pub-card[_ngcontent-%COMP%]:hover{box-shadow:0 .5rem 1.5rem #0000001f!important}.pub-type-bar[_ngcontent-%COMP%]{height:4px;width:100%}.pub-icon[_ngcontent-%COMP%]{width:44px;height:44px;min-width:44px}.pub-description   [_nghost-%COMP%]     .ql-container{border:none!important;font-size:inherit}.pub-description   [_nghost-%COMP%]     .ql-editor{padding:0;min-height:auto}.quill-readonly-wrapper   [_nghost-%COMP%]     .ql-container{border:none!important}.quill-readonly-wrapper   [_nghost-%COMP%]     .ql-editor{padding:0;min-height:auto}.quill-container-wrapper   [_nghost-%COMP%]     .ql-toolbar{border-radius:.375rem .375rem 0 0}.quill-container-wrapper   [_nghost-%COMP%]     .ql-container{border-radius:0 0 .375rem .375rem;min-height:120px}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:var(--bs-primary)}"]});var ve=M;export{ve as AulaComponent};
