import{a as bt,b as Ct,c as St}from"./chunk-37K6MB3T.js";import{a as yt,b as It}from"./chunk-4T6OS6YM.js";import{a as Xe}from"./chunk-YSMC63TH.js";import{a as We,b as gt}from"./chunk-2BXAM6ZK.js";import{a as xt}from"./chunk-BVCCOGXA.js";import{a as vt}from"./chunk-2S3SUACW.js";import{a as Qe}from"./chunk-QLP4KPPV.js";import{a as Ke}from"./chunk-BEB7REIC.js";import{b as qe}from"./chunk-VUPGJX5W.js";import{a as Ut,b as ve}from"./chunk-6PECI7IV.js";import{a as Et}from"./chunk-OO53LASR.js";import{a as ht}from"./chunk-MOE5DPUY.js";import{b as xe}from"./chunk-A4J24TIR.js";import{a as U}from"./chunk-KFXCIGMC.js";import{g as He}from"./chunk-JJJK5VRP.js";import{b as pt,c as Be,e as k,f as pe,g as je,h as _t,i as y,j as _e,k as $e,l as Ue,m as ft,n as ze,o as Ge,p as fe,q as ge,r as he}from"./chunk-EANZ5AHF.js";import{$a as N,Da as d,Ea as a,Fa as n,Ga as x,J as se,K as Fe,Ka as Ae,La as Te,M as oe,Na as b,Nb as le,P as p,Pb as ce,Q as _,Qa as h,Qb as de,Rb as lt,Sa as u,Tb as ct,Wa as B,X as Oe,Xa as j,Ya as $,Zb as dt,ab as X,ba as T,bb as G,bc as ut,ca as F,da as ke,dc as ue,ea as r,eb as l,fb as v,fc as me,gb as I,hb as De,ib as Re,jc as mt,kb as D,la as w,lb as R,mb as L,na as re,oa as Ne,qb as at,qc as Le,rb as V,sa as g,sb as Ve,uc as st,va as Q,vb as Y,wa as it,wb as Z,ya as nt,zb as P}from"./chunk-N4IAAO5D.js";import{a as Me,b as Pe,f as tt,g as O}from"./chunk-ATDPNAVO.js";var Rt=tt(xt());var J=class J{constructor(t){this.http=t;this.ruta=U.ruta}Obtenerestudiantesifas(t){let e=new ut;return t&&Object.entries(t).forEach(([i,s])=>{s!=null&&s!==""&&(e=e.set(i,String(s)))}),this.http.get(this.ruta+"api/estudiantesifas/",{params:e})}Agregarestudiantesifas(t){return this.http.post(this.ruta+"api/estudiantesifas/",t)}Modificarestudiantesifas(t,e){return this.http.put(this.ruta+"api/estudiantesifas/"+e,t)}Seleccionarestudiantesifas(t){return this.http.get(this.ruta+"api/estudiantesifas/"+t)}Eliminarestudiantesifas(t){return this.http.delete(this.ruta+"api/estudiantesifas/"+t)}createFormGroupestudiantesifas(){return new _t({id:new y(0),Foto:new y(""),Ap_Paterno:new y(""),Ap_Materno:new y(""),Nombre:new y("",[k.required]),Sexo:new y("",[k.required]),FechaNac:new y("",[k.required]),Edad:new y("",[k.required]),CI:new y("",[k.required]),Expedido:new y("",[k.required]),Celular:new y("",[k.required]),Direccion:new y("",[k.required]),Correo:new y("NINGUNA"),Nombre_Padre:new y(""),Nombre_Madre:new y(""),OcupacionP:new y(""),OcupacionM:new y(""),NumCelP:new y(""),NumCelM:new y(""),NColegio:new y(""),TipoColegio:new y(""),CGrado:new y(""),CNivel:new y(""),Usuario:new y("",[k.required]),Contrasenia:new y("",[k.required]),Estado:new y("ACTIVO",[k.required]),InformacionCompartidaIFAS:new y("")})}};J.\u0275fac=function(e){return new(e||J)(oe(me))},J.\u0275prov=se({token:J,factory:J.\u0275fac,providedIn:"root"});var W=J;var te=class te{constructor(t){this.http=t;this.ruta=U.ruta}crearSesion(t){return this.http.post(this.ruta+"api/capture-sessions",{estudianteifas_id:t??null})}estadoSesion(t){return this.http.get(this.ruta+"api/capture-sessions/"+t)}cancelarSesion(t){return this.http.post(this.ruta+"api/capture-sessions/"+t+"/cancel",{})}};te.\u0275fac=function(e){return new(e||te)(oe(me))},te.\u0275prov=se({token:te,factory:te.\u0275fac,providedIn:"root"});var Ee=te;var ie=class ie{constructor(t){this.http=t;this.ruta=U.ruta}crearVinculacion(){return this.http.post(this.ruta+"api/capture-pairings",{})}estadoVinculacion(t){return this.http.get(this.ruta+"api/capture-pairings/"+t)}solicitarCaptura(t,e,i){return this.http.post(this.ruta+"api/capture-pairings/"+t+"/request-capture",{estudianteifas_id:e??null,capture_kind:i??void 0})}cancelarCaptura(t){return this.http.post(this.ruta+"api/capture-pairings/"+t+"/cancel-capture",{})}};ie.\u0275fac=function(e){return new(e||ie)(oe(me))},ie.\u0275prov=se({token:ie,factory:ie.\u0275fac,providedIn:"root"});var be=ie;var Nt=tt(xt());var z=tt(Ut());var Ht=(o,t)=>({border:o,"border-primary":t}),kt=o=>({checked:o,"custom-border":!0});function Qt(o,t){o&1&&(a(0,"div",27)(1,"div",28)(2,"h1",29),l(3,"Asignador de Materias - ESTUDIANTES"),n(),a(4,"p",30),l(5,"Asigne materias a estudiantes de manera sencilla y eficiente"),n()()())}function Wt(o,t){if(o&1&&x(0,"img",42),o&2){let e=u(2);d("src",e._tools.ruta+e.fotoEstudiante,F)}}function Kt(o,t){if(o&1&&x(0,"ng-lottie",43),o&2){let e=u(2);d("options",e.sexoEstudiante==="MASCULINO"?e._tools.optionsavatarmasculinoanimado:e._tools.optionsavatarfemenino2)}}function Xt(o,t){if(o&1&&(a(0,"span",44),l(1),n()),o&2){let e=u(2);r(),I("ID: ",e.estudianteId)}}function Yt(o,t){if(o&1&&(a(0,"span",45),l(1),n()),o&2){let e=u(2);r(),I("Inscripci\xF3n: #",e.preferInfoId)}}function Zt(o,t){if(o&1&&(a(0,"div",27)(1,"div",31)(2,"div",32)(3,"div",33)(4,"div",34),g(5,Wt,1,1,"img",35)(6,Kt,1,1,"ng-lottie",36),n(),a(7,"div")(8,"div",37),l(9,"Estudiante seleccionado"),n(),a(10,"div",38),l(11),n()()(),a(12,"div",39),g(13,Xt,2,1,"span",40)(14,Yt,2,1,"span",41),n()()()()),o&2){let e=u();r(5),d("ngIf",e.fotoEstudiante),r(),d("ngIf",!e.fotoEstudiante),r(5),v(e.nombreEstudiante||(e.estudianteSeleccionado==null?null:e.estudianteSeleccionado.nombre)),r(2),d("ngIf",e.estudianteId),r(),d("ngIf",e.preferInfoId)}}function Jt(o,t){if(o&1&&(a(0,"option",13),l(1),n()),o&2){let e=t.$implicit;d("ngValue",e.id),r(),v(e.Anio)}}function ei(o,t){if(o&1&&(a(0,"option",13),l(1),n()),o&2){let e=t.$implicit;d("ngValue",e.key),r(),v(e.label)}}function ti(o,t){o&1&&(a(0,"small",61),l(1,"Cargando..."),n())}function ii(o,t){if(o&1){let e=b();a(0,"div",62)(1,"button",63),h("click",function(){p(e);let s=u(2);return _(s.pendPrev())}),l(2,"Anterior"),n(),a(3,"small",61),l(4),n(),a(5,"button",63),h("click",function(){p(e);let s=u(2);return _(s.pendNext())}),l(6,"Siguiente"),n()()}if(o&2){let e=u(2);r(),d("disabled",!e.pendTienePrev()||e.isLoadingPendientes),r(3),Re(" P\xE1gina ",e.pendMeta.current_page," / ",e.pendMeta.last_page," (",e.pendMeta.total," resultados) "),r(),d("disabled",!e.pendTieneNext()||e.isLoadingPendientes)}}function ni(o,t){o&1&&(a(0,"th"),l(1,"Instituci\xF3n"),n())}function ai(o,t){if(o&1&&(a(0,"td"),l(1),n()),o&2){let e=u().$implicit;r(),v(e.NombreInstitucion||"-")}}function si(o,t){if(o&1){let e=b();a(0,"tr")(1,"td"),l(2),n(),a(3,"td"),l(4),n(),g(5,ai,2,1,"td",26),a(6,"td"),l(7),n(),a(8,"td"),l(9),n(),a(10,"td"),l(11),n(),a(12,"td"),l(13),n(),a(14,"td"),l(15),n(),a(16,"td"),l(17),n(),a(18,"td")(19,"button",64),h("click",function(){let s=p(e).$implicit,c=u(2);return _(c.seleccionarPendiente(s))}),l(20," Asignar "),n()()()}if(o&2){let e=t.$implicit,i=u(2);r(2),I("#",e.id),r(2),v(e.FechInsc||"-"),r(),d("ngIf",i.esSuperAdmin),r(2),Re("",e.Ap_Paterno," ",e.Ap_Materno," ",e.Nombre),r(2),v(e.CI||"-"),r(2),v(e.Matricula||"-"),r(2),v(e.Curso_Solicitado||"-"),r(2),v(e.Paralelo_Solicitado||"-"),r(2),v(e.Turno||"-")}}function oi(o,t){if(o&1&&(a(0,"tr")(1,"td",65),l(2,"Sin registros"),n()()),o&2){let e=u(2);r(),Q("colspan",e.esSuperAdmin?10:9)}}function ri(o,t){if(o&1){let e=b();a(0,"div",46)(1,"div",47)(2,"span"),l(3,"Inscritos pendientes de asignaci\xF3n (sin materias asignadas)"),n(),g(4,ti,2,0,"small",24),n(),a(5,"div",5)(6,"div",48)(7,"div",49)(8,"div",8)(9,"span",9),x(10,"i",50),n(),a(11,"div",11)(12,"input",51),h("input",function(s){p(e);let c=u();return _(c.filterPendientes=s.target.value)})("keyup.enter",function(){p(e);let s=u();return _(s.cargarPendientes(1))}),n(),a(13,"label"),l(14,"Buscar (nombre/CI/matr\xEDcula/curso/paralelo/turno)"),n()(),a(15,"button",52),h("click",function(){p(e);let s=u();return _(s.cargarPendientes(1))}),l(16," Buscar "),n()(),g(17,ii,7,5,"div",53),n(),a(18,"div",54)(19,"label",55),l(20,"Total pendientes"),n(),x(21,"input",56),n()()(),a(22,"div",57)(23,"table",58)(24,"thead")(25,"tr")(26,"th"),l(27,"Inscripci\xF3n"),n(),a(28,"th"),l(29,"Fecha inscripci\xF3n"),n(),g(30,ni,2,0,"th",26),a(31,"th"),l(32,"Estudiante"),n(),a(33,"th"),l(34,"CI"),n(),a(35,"th"),l(36,"Matr\xEDcula"),n(),a(37,"th"),l(38,"Curso solicitado"),n(),a(39,"th"),l(40,"Paralelo"),n(),a(41,"th"),l(42,"Turno"),n(),a(43,"th",59),l(44,"Acci\xF3n"),n()()(),a(45,"tbody"),g(46,si,21,11,"tr",60)(47,oi,3,1,"tr",26),n()()()()}if(o&2){let e=u();r(4),d("ngIf",e.isLoadingPendientes),r(8),d("value",e.filterPendientes),r(3),d("disabled",e.isLoadingPendientes),r(2),d("ngIf",e.pendMeta),r(4),d("value",(e.pendMeta==null?null:e.pendMeta.total)||0),r(9),d("ngIf",e.esSuperAdmin),r(16),d("ngForOf",e.pendientes),r(),d("ngIf",e.pendientes.length===0)}}function li(o,t){o&1&&(a(0,"small",77),l(1,"Buscando..."),n())}function ci(o,t){if(o&1){let e=b();a(0,"div",62)(1,"button",78),h("click",function(){p(e);let s=u(2);return _(s.estPrev())}),l(2,"Anterior"),n(),a(3,"small",61),l(4),n(),a(5,"button",78),h("click",function(){p(e);let s=u(2);return _(s.estNext())}),l(6,"Siguiente"),n()()}if(o&2){let e=u(2);r(),d("disabled",!e.estTienePrev()||e.isLoadingEstudiantes),r(3),Re(" P\xE1gina ",e.estMeta.current_page," / ",e.estMeta.last_page," (",e.estMeta.total," resultados) "),r(),d("disabled",!e.estTieneNext()||e.isLoadingEstudiantes)}}function di(o,t){if(o&1&&(a(0,"span"),l(1,"CI: "),x(2,"span",79),n()),o&2){let e=u().$implicit,i=u(2);r(2),d("innerHTML",i.highlightHtml(e.ci),T)}}function ui(o,t){if(o&1&&(a(0,"span"),l(1," \xA0|\xA0 Matr\xEDcula: "),x(2,"span",79),n()),o&2){let e=u().$implicit,i=u(2);r(2),d("innerHTML",i.highlightHtml(e.matricula),T)}}function mi(o,t){if(o&1&&x(0,"span",79),o&2){let e=u().$implicit,i=u(2);d("innerHTML",i.highlightHtml(i.formatoCursoParalelo(e)),T)}}function pi(o,t){if(o&1&&(a(0,"div",80),l(1),n()),o&2){let e=u().$implicit;r(),I("Instituci\xF3n: ",e.institucionNombre)}}function _i(o,t){if(o&1&&(a(0,"div",80),l(1),n()),o&2){let e=u().$implicit;r(),I("Fecha: ",e.fechInsc)}}function fi(o,t){if(o&1){let e=b();a(0,"button",78),h("click",function(){let s=p(e).$implicit,c=u(2);return _(c.seleccionarEstudiante(s))}),x(1,"div",79),a(2,"div",80),g(3,di,3,1,"span",26)(4,ui,3,1,"span",26),n(),a(5,"div",81)(6,"span",82),l(7),n(),g(8,mi,1,1,"span",83),n(),g(9,pi,2,1,"div",84)(10,_i,2,1,"div",84),n()}if(o&2){let e=t.$implicit,i=u(2);G("active",i.selectedSearchInfoId&&e.infoId&&i.selectedSearchInfoId===e.infoId),d("disabled",i.isLoadingEstudiantes),r(),d("innerHTML",i.highlightHtml(e.nombre),T),r(2),d("ngIf",e.ci),r(),d("ngIf",e.matricula),r(3),I("Asignaciones: ",e.cantAsignaciones??0),r(),d("ngIf",i.formatoCursoParalelo(e)),r(),d("ngIf",i.esSuperAdmin&&e.institucionNombre),r(),d("ngIf",e.fechInsc)}}function gi(o,t){o&1&&(a(0,"small",61),l(1," Busca y selecciona un estudiante para continuar. "),n())}function hi(o,t){if(o&1&&(a(0,"span",88),l(1),n()),o&2){let e=t.$implicit;r(),v(e)}}function xi(o,t){if(o&1&&(Ae(0),a(1,"small",61),l(2," Tiene Materias Asignadas en:"),n(),g(3,hi,2,1,"span",87),Te()),o&2){let e=u(3);r(3),d("ngForOf",e.cursosConMateriasAsignadas())}}function vi(o,t){o&1&&(a(0,"small",61),l(1,"Sin materias asignadas (en sus inscripciones)"),n())}function Ei(o,t){if(o&1&&(a(0,"div",85)(1,"div",23)(2,"h3",77),l(3," Estudiante Seleccionado: "),a(4,"b"),l(5),n()()(),g(6,xi,4,1,"ng-container",86)(7,vi,2,0,"ng-template",null,1,P),n()),o&2){let e=N(8),i=u(2);r(5),v(i.estudianteSeleccionado.nombre),r(),d("ngIf",i.cursosConMateriasAsignadas().length>0)("ngIfElse",e)}}function bi(o,t){if(o&1){let e=b();a(0,"div",48)(1,"div",66)(2,"div",67)(3,"div",11)(4,"input",68),h("input",function(s){p(e);let c=u();return _(c.filterEstudiante=s.target.value)})("keyup.enter",function(){p(e);let s=u();return _(s.buscarEstudiantes(1))}),n(),a(5,"label"),l(6,"Buscar estudiante (m\xEDn. 2 caracteres)"),n()(),a(7,"button",69),h("click",function(){p(e);let s=u();return _(s.buscarEstudiantes(1))}),l(8," Buscar "),n()(),g(9,li,2,0,"small",70)(10,ci,7,5,"div",53),a(11,"div",71),g(12,fi,11,10,"button",72),n(),a(13,"div",23),g(14,gi,2,0,"small",24)(15,Ei,9,3,"div",25),n()(),a(16,"div",73)(17,"div",74)(18,"input",75),h("change",function(s){p(e);let c=u();return _(c.onToggleChange(s))}),n(),a(19,"label",76),l(20,"Modo tabla"),n()()()()}if(o&2){let e=u();r(4),d("ngClass",V(9,Ht,e.isLoadingEstudiantes,e.isLoadingEstudiantes))("value",e.filterEstudiante),r(3),d("disabled",e.isLoadingEstudiantes),r(2),d("ngIf",e.isLoadingEstudiantes),r(),d("ngIf",e.estMeta),r(2),d("ngForOf",e.estudiantes)("ngForTrackBy",e.trackById),r(2),d("ngIf",!e.estudianteSeleccionado),r(),d("ngIf",e.estudianteSeleccionado)}}function Ci(o,t){if(o&1&&(a(0,"small",61),l(1),n()),o&2){let e=u();r(),I(" ",e.modo==="estudiante"?"Cargando estudiante...":"Busca y selecciona un estudiante para continuar."," ")}}function Si(o,t){if(o&1&&(a(0,"span",88),l(1),n()),o&2){let e=t.$implicit;r(),v(e)}}function yi(o,t){if(o&1&&(Ae(0),a(1,"small",61),l(2," Tiene Materias Asignadas en:"),n(),g(3,Si,2,1,"span",87),Te()),o&2){let e=u(2);r(3),d("ngForOf",e.cursosConMateriasAsignadas())}}function Ii(o,t){o&1&&(a(0,"small",61),l(1,"Sin materias asignadas (en sus inscripciones)"),n())}function wi(o,t){if(o&1&&(a(0,"div",85)(1,"div",23)(2,"h3",77),l(3," Estudiante Seleccionado: "),a(4,"b"),l(5),n()()(),g(6,yi,4,1,"ng-container",86)(7,Ii,2,0,"ng-template",null,1,P),n()),o&2){let e=N(8),i=u();r(5),v(i.estudianteSeleccionado.nombre),r(),d("ngIf",i.cursosConMateriasAsignadas().length>0)("ngIfElse",e)}}function Ai(o,t){o&1&&(a(0,"small",61),l(1,"Sin inscripciones."),n())}function Ti(o,t){o&1&&(a(0,"h3",61),l(1,"Seleccione una inscripci\xF3n."),n())}function Vi(o,t){if(o&1){let e=b();a(0,"div",90)(1,"h4",91),l(2," CURSO SOLICITADO: "),a(3,"b"),l(4),n()(),a(5,"button",92),h("click",function(){p(e);let s=u(2),c=N(41);return _(s._tools.openModal(c,"xl"))}),x(6,"ng-lottie",93),a(7,"span"),l(8,"Historial"),n()()()}if(o&2){let e=u(2);r(4),De("",e.inscripcionSeleccionada.Curso_Solicitado||"-"," ",e.inscripcionSeleccionada.Paralelo_Solicitado?"- "+e.inscripcionSeleccionada.Paralelo_Solicitado:""),r(),d("disabled",!e.ciEstudianteNumerico()),r(),d("options",e._tools.optionsAdicionar)}}function Mi(o,t){if(o&1&&(a(0,"div")(1,"div",23),g(2,Ai,2,0,"small",24)(3,Ti,2,0,"h3",24)(4,Vi,9,4,"div",89),n()()),o&2){let e=u();r(2),d("ngIf",!e.isLoadingInscripciones&&e.inscripciones.length===0),r(),d("ngIf",!e.isLoadingInscripciones&&e.inscripciones.length>0&&!e.inscripcionSeleccionada),r(),d("ngIf",e.inscripcionSeleccionada)}}function Pi(o,t){o&1&&x(0,"hr")}function Fi(o,t){if(o&1){let e=b();a(0,"button",98),h("click",function(){p(e);let s=u(3);return _(s.abrirOpcionesAsignacion())}),l(1," Asignar... "),n()}}function Oi(o,t){if(o&1&&(a(0,"div",96)(1,"div",61)(2,"b"),l(3,"Calificaciones"),n(),l(4," de materias asignadas (vista r\xE1pida) "),n(),g(5,Fi,2,0,"button",97),n()),o&2){let e=u(2);r(5),d("ngIf",!e.mostrarOpcionesAsignacion)}}function ki(o,t){o&1&&(a(0,"tr")(1,"td",102),l(2,"Sin asignaciones"),n()())}function Ni(o,t){if(o&1&&(a(0,"tr")(1,"td"),l(2),n(),a(3,"td"),l(4),n(),a(5,"td",100),l(6),n(),a(7,"td",100),l(8),n(),a(9,"td",100),l(10),n(),a(11,"td",100),l(12),n(),a(13,"td",100),l(14),n(),a(15,"td",100),l(16),n(),a(17,"td",100),l(18),n(),a(19,"td",100),l(20),n(),a(21,"td",100),l(22),n(),a(23,"td",100),l(24),n(),a(25,"td",100),l(26),n(),a(27,"td",100),l(28),n(),a(29,"td"),l(30),n()()),o&2){let e=t.$implicit,i=t.index,s=u(3);r(2),v(i+1),r(2),v(e.materia),r(2),v(s.califValor(e.materiaId,"Teorico1")),r(2),v(s.califValor(e.materiaId,"Teorico2")),r(2),v(s.califValor(e.materiaId,"Teorico3")),r(2),v(s.califValor(e.materiaId,"Teorico4")),r(2),v(s.califValor(e.materiaId,"Practico1")),r(2),v(s.califValor(e.materiaId,"Practico2")),r(2),v(s.califValor(e.materiaId,"Practico3")),r(2),v(s.califValor(e.materiaId,"Practico4")),r(2),v(s.califValor(e.materiaId,"PromTeorico")),r(2),v(s.califValor(e.materiaId,"PromPractico")),r(2),v(s.califValor(e.materiaId,"Promedio")),r(2),v(s.califValor(e.materiaId,"PruebaRecuperacion")),r(2),v(s.estadoRegistroMateria(e.materiaId))}}function Di(o,t){if(o&1&&(a(0,"div",57)(1,"table",99)(2,"thead")(3,"tr")(4,"th"),l(5,"#"),n(),a(6,"th"),l(7,"Materia"),n(),a(8,"th",100),l(9,"T1"),n(),a(10,"th",100),l(11,"T2"),n(),a(12,"th",100),l(13,"T3"),n(),a(14,"th",100),l(15,"T4"),n(),a(16,"th",100),l(17,"P1"),n(),a(18,"th",100),l(19,"P2"),n(),a(20,"th",100),l(21,"P3"),n(),a(22,"th",100),l(23,"P4"),n(),a(24,"th",100),l(25,"PromT"),n(),a(26,"th",100),l(27,"PromP"),n(),a(28,"th",100),l(29,"Prom"),n(),a(30,"th",100),l(31,"Rec"),n(),a(32,"th"),l(33,"Estado"),n()()(),a(34,"tbody",101),g(35,ki,3,0,"tr",26)(36,Ni,31,15,"tr",60),n()()()),o&2){let e=u(2);r(35),d("ngIf",e.tablaAsignaciones().length===0),r(),d("ngForOf",e.tablaAsignaciones())}}function Ri(o,t){if(o&1){let e=b();a(0,"button",20),h("click",function(){let s=p(e).$implicit,c=u(4);return _(c.toggleLvlCurso(s))}),l(1),n()}if(o&2){let e=t.$implicit,i=u(4);G("active",i.isLvlCursoSeleccionado(e)),r(),I(" ",e," ")}}function Li(o,t){if(o&1){let e=b();a(0,"button",119),h("click",function(){let s=p(e).$implicit,c=u(4);return _(c.toggleParalelo(s))}),l(1),n()}if(o&2){let e=t.$implicit,i=u(4);G("active",i.isParaleloSeleccionado(e)),r(),I(" ",e," ")}}function Bi(o,t){if(o&1){let e=b();a(0,"button",120),h("click",function(){p(e);let s=u(4);return _(s.asignarCursoCompleto())}),l(1," Asignar todo (A\xF1o/Resoluci\xF3n) "),n()}if(o&2){let e=u(4);d("disabled",e.isBulkLoading)}}function ji(o,t){if(o&1){let e=b();a(0,"button",121),h("click",function(){p(e);let s=u(4);return _(s.quitarTodasAsignaciones())}),l(1," Quitar todas "),n()}if(o&2){let e=u(4);d("disabled",e.isBulkLoading)}}function $i(o,t){o&1&&(a(0,"span",137),l(1,"Tiene calificaciones"),n())}function Ui(o,t){o&1&&(a(0,"span",137),l(1,"Sin calificaciones"),n())}function zi(o,t){if(o&1){let e=b();a(0,"div",134)(1,"span")(2,"b"),l(3,"Calificaciones:"),n(),g(4,$i,2,0,"span",135)(5,Ui,2,0,"span",135),n(),a(6,"button",136),h("click",function(s){p(e);let c=u().$implicit,m=u(6);return _(m.verCalificaciones(c,s))}),l(7," Ver "),n()()}if(o&2){let e=u().$implicit,i=u(6);r(4),d("ngIf",i.tieneCalificaciones(e.id)),r(),d("ngIf",!i.tieneCalificaciones(e.id)),r(),d("disabled",!i.tieneCalificaciones(e.id))}}function Gi(o,t){o&1&&(a(0,"div",138)(1,"span",139),l(2,"Cargando..."),n()())}function qi(o,t){if(o&1){let e=b();a(0,"div",129)(1,"button",130),h("click",function(s){let c=p(e).$implicit,m=u(6);return _(m.toggleAsignacion(c,s))}),a(2,"span",131),l(3),n(),a(4,"span"),l(5),n()(),g(6,zi,8,3,"div",132)(7,Gi,3,0,"div",133),n()}if(o&2){let e=t.$implicit,i=u(6);d("ngClass",at(7,kt,i.isAsignada(e.id))),r(),d("disabled",i.isLoadingMateria[e.id]),r(),d("ngClass",i.isAsignada(e.id)?"bg-success":"bg-secondary"),r(),I(" ",i.isAsignada(e.id)?"ASIGNADO":"NO"," "),r(2),v((e.sigla?e.sigla+" - ":"")+e.nombre),r(),d("ngIf",i.isAsignada(e.id)),r(),d("ngIf",i.isLoadingMateria[e.id])}}function Hi(o,t){if(o&1){let e=b();a(0,"div")(1,"div",122)(2,"h5",123),l(3),n(),a(4,"div",124)(5,"button",125),h("click",function(s){let c=p(e).$implicit,m=u(5);return _(m.asignarCategoriaCompleta(c,s))}),l(6," Asignar este curso "),n(),a(7,"button",126),h("click",function(s){let c=p(e).$implicit,m=u(5);return _(m.quitarCategoriaCompleta(c,s))}),l(8," Quitar este curso "),n()()(),a(9,"div",127),g(10,qi,8,9,"div",128),n(),x(11,"hr"),n()}if(o&2){let e=t.$implicit,i=u(5);r(3),v(e),r(2),d("disabled",i.isBulkLoading),r(2),d("disabled",i.isBulkLoading),r(3),d("ngForOf",i.materiasPorCategoria(e))("ngForTrackBy",i.trackById)}}function Qi(o,t){if(o&1&&(Ae(0),g(1,Hi,12,5,"div",60),Te()),o&2){let e=u(4);r(),d("ngForOf",e.categorias())}}function Wi(o,t){if(o&1&&(a(0,"span"),l(1),n()),o&2){let e=u().$implicit;r(),v(e.lvlCurso)}}function Ki(o,t){if(o&1&&(a(0,"span"),l(1),n()),o&2){let e=u().$implicit;r(),I(" - ",e.paralelo)}}function Xi(o,t){o&1&&(a(0,"span",137),l(1,"Tiene calificaciones"),n())}function Yi(o,t){o&1&&(a(0,"span",137),l(1,"Sin calificaciones"),n())}function Zi(o,t){if(o&1){let e=b();a(0,"div",134)(1,"span")(2,"b"),l(3,"Calificaciones:"),n(),g(4,Xi,2,0,"span",135)(5,Yi,2,0,"span",135),n(),a(6,"button",136),h("click",function(s){p(e);let c=u().$implicit,m=u(5);return _(m.verCalificaciones(c,s))}),l(7," Ver "),n()()}if(o&2){let e=u().$implicit,i=u(5);r(4),d("ngIf",i.tieneCalificaciones(e.id)),r(),d("ngIf",!i.tieneCalificaciones(e.id)),r(),d("disabled",!i.tieneCalificaciones(e.id))}}function Ji(o,t){o&1&&(a(0,"div",138)(1,"span",139),l(2,"Cargando..."),n()())}function en(o,t){if(o&1){let e=b();a(0,"div",129)(1,"button",130),h("click",function(s){let c=p(e).$implicit,m=u(5);return _(m.toggleAsignacion(c,s))}),a(2,"span",131),l(3),n(),a(4,"span"),l(5),n()(),a(6,"div",140),g(7,Wi,2,1,"span",26)(8,Ki,2,1,"span",26),n(),g(9,Zi,8,3,"div",132)(10,Ji,3,0,"div",133),n()}if(o&2){let e=t.$implicit,i=u(5);d("ngClass",at(9,kt,i.isAsignada(e.id))),r(),d("disabled",i.isLoadingMateria[e.id]),r(),d("ngClass",i.isAsignada(e.id)?"bg-success":"bg-secondary"),r(),I(" ",i.isAsignada(e.id)?"ASIGNADO":"NO"," "),r(2),v((e.sigla?e.sigla+" - ":"")+e.nombre),r(2),d("ngIf",e.lvlCurso),r(),d("ngIf",e.paralelo),r(),d("ngIf",i.isAsignada(e.id)),r(),d("ngIf",i.isLoadingMateria[e.id])}}function tn(o,t){if(o&1&&(Ae(0),a(1,"div",127),g(2,en,11,11,"div",128),n(),Te()),o&2){let e=u(4);r(2),d("ngForOf",e.materiasFiltradas())("ngForTrackBy",e.trackById)}}function nn(o,t){if(o&1){let e=b();a(0,"div")(1,"div",103)(2,"div",104)(3,"div",8)(4,"span",9),x(5,"i",105),n(),a(6,"div",11)(7,"input",106),h("input",function(s){p(e);let c=u(3);return _(c.filterMateria=s.target.value)}),n(),a(8,"label"),l(9,"Buscar materia (sigla/nombre/ID)"),n()()()(),a(10,"div",107)(11,"div",108)(12,"input",109),h("change",function(){p(e);let s=u(3);return _(s.toggleModoCategorias())}),n(),a(13,"label",110),l(14,"Con categor\xEDas"),n()(),a(15,"div",108)(16,"input",111),h("change",function(){p(e);let s=u(3);return _(s.onToggleMostrarTodasMaterias())}),n(),a(17,"label",112),l(18,"Mostrar todas (manual)"),n()(),a(19,"div",113)(20,"small",114),l(21,"Cursos:"),n(),g(22,Ri,2,3,"button",115),n(),a(23,"div",113)(24,"small",114),l(25,"Paralelos:"),n(),g(26,Li,2,3,"button",116),n(),g(27,Bi,2,1,"button",117)(28,ji,2,1,"button",118),n()(),g(29,Qi,2,1,"ng-container",26)(30,tn,3,2,"ng-container",26),n()}if(o&2){let e=u(3);r(7),d("value",e.filterMateria),r(5),d("checked",e.modoCategorias),r(4),d("checked",e.mostrarTodasMaterias),r(6),d("ngForOf",e.lvlCursosDetectados()),r(4),d("ngForOf",e.paralelosDetectados()),r(),d("ngIf",!e.modoCategorias),r(),d("ngIf",!e.modoCategorias),r(),d("ngIf",e.modoCategorias),r(),d("ngIf",!e.modoCategorias)}}function an(o,t){o&1&&(a(0,"tr")(1,"td",141),l(2,"Sin asignaciones"),n()())}function sn(o,t){if(o&1){let e=b();a(0,"tr")(1,"td"),l(2),n(),a(3,"td"),l(4),n(),a(5,"td"),l(6),n(),a(7,"td"),l(8),n(),a(9,"td"),l(10),n(),a(11,"td",100),l(12),n(),a(13,"td",100),l(14),n(),a(15,"td",100),l(16),n(),a(17,"td",100),l(18),n(),a(19,"td",100),l(20),n(),a(21,"td",100),l(22),n(),a(23,"td",100),l(24),n(),a(25,"td",100),l(26),n(),a(27,"td",100),l(28),n(),a(29,"td",100),l(30),n(),a(31,"td",100),l(32),n(),a(33,"td",100),l(34),n(),a(35,"td"),l(36),n(),a(37,"td")(38,"button",121),h("click",function(){let s=p(e).$implicit,c=u(4);return _(c.quitarAsignacionTabla(s.materiaId))}),l(39," Quitar "),n()()()}if(o&2){let e=t.$implicit,i=t.index,s=u(4);r(2),v(i+1),r(2),v(e.estudiante),r(2),v(e.categoria),r(2),v(e.materia),r(2),v(e.paralelo),r(2),v(s.califValor(e.materiaId,"Teorico1")),r(2),v(s.califValor(e.materiaId,"Teorico2")),r(2),v(s.califValor(e.materiaId,"Teorico3")),r(2),v(s.califValor(e.materiaId,"Teorico4")),r(2),v(s.califValor(e.materiaId,"Practico1")),r(2),v(s.califValor(e.materiaId,"Practico2")),r(2),v(s.califValor(e.materiaId,"Practico3")),r(2),v(s.califValor(e.materiaId,"Practico4")),r(2),v(s.califValor(e.materiaId,"PromTeorico")),r(2),v(s.califValor(e.materiaId,"PromPractico")),r(2),v(s.califValor(e.materiaId,"Promedio")),r(2),v(s.califValor(e.materiaId,"PruebaRecuperacion")),r(2),v(s.estadoRegistroMateria(e.materiaId)),r(2),d("disabled",s.isLoadingMateria[e.materiaId])}}function on(o,t){if(o&1&&(a(0,"div",57)(1,"table",99)(2,"thead")(3,"tr")(4,"th"),l(5,"#"),n(),a(6,"th"),l(7,"Estudiante"),n(),a(8,"th"),l(9,"Categoria"),n(),a(10,"th"),l(11,"Materia"),n(),a(12,"th"),l(13,"Paralelo"),n(),a(14,"th",100),l(15,"T1"),n(),a(16,"th",100),l(17,"T2"),n(),a(18,"th",100),l(19,"T3"),n(),a(20,"th",100),l(21,"T4"),n(),a(22,"th",100),l(23,"P1"),n(),a(24,"th",100),l(25,"P2"),n(),a(26,"th",100),l(27,"P3"),n(),a(28,"th",100),l(29,"P4"),n(),a(30,"th",100),l(31,"PromT"),n(),a(32,"th",100),l(33,"PromP"),n(),a(34,"th",100),l(35,"Prom"),n(),a(36,"th",100),l(37,"Rec"),n(),a(38,"th"),l(39,"Estado"),n(),a(40,"th"),l(41,"Acci\xF3n"),n()()(),a(42,"tbody",101),g(43,an,3,0,"tr",26)(44,sn,40,19,"tr",60),n()()()),o&2){let e=u(3);r(43),d("ngIf",e.tablaAsignaciones().length===0),r(),d("ngForOf",e.tablaAsignaciones())}}function rn(o,t){if(o&1&&(a(0,"div"),g(1,nn,31,9,"div",26)(2,on,45,2,"div",95),n()),o&2){let e=u(2);r(),d("ngIf",!e.ModoBoolean),r(),d("ngIf",e.ModoBoolean)}}function ln(o,t){if(o&1&&(a(0,"div"),g(1,Oi,6,1,"div",94)(2,Di,37,2,"div",95)(3,rn,3,2,"div",26),n()),o&2){let e=u();r(),d("ngIf",e.modo==="estudiante"),r(),d("ngIf",e.modo==="estudiante"&&!e.mostrarOpcionesAsignacion),r(),d("ngIf",e.modo!=="estudiante"||e.mostrarOpcionesAsignacion)}}function cn(o,t){if(o&1){let e=b();a(0,"div",142)(1,"h5",143),l(2,"Componente Historias"),n(),a(3,"button",144),h("click",function(){let s=p(e).$implicit;return _(s.dismiss())}),n()(),a(4,"div",145),x(5,"app-califhistorias",146),n()}if(o&2){let e=u();r(5),d("modo","modal_ci")("ciBusqueda",e.ciEstudianteNumerico())("institucion",e.institucionHistorialNombre())}}var Ce=class Ce{constructor(t,e,i,s,c,m,E,f){this._calif=t;this._carreras=e;this._mat=i;this._est=s;this._info=c;this._anios=m;this._auth=E;this._tools=f;this.modo="general";this.estudianteId=null;this.nombreEstudiante=null;this.fotoEstudiante=null;this.sexoEstudiante=null;this.preferInfoId=null;this.lastAppliedEstudianteId=null;this.mostrarOpcionesAsignacion=!0;this.ModoBoolean=!1;this.filterEstudiante="";this.filterMateria="";this.busquedaAnioScope="mixed";this.selectedSearchInfoId=null;this.mostrarTodasMaterias=!1;this.estudiantes=[];this.estMeta=null;this.estPage=1;this.estPerPage=10;this.isLoadingEstudiantes=!1;this.estudianteSeleccionado=null;this.inscripciones=[];this.inscripcionSeleccionada=null;this.isLoadingInscripciones=!1;this.inscripcionesReqToken=0;this.verPendientes=!1;this.filterPendientes="";this.pendientes=[];this.pendMeta=null;this.pendPage=1;this.pendPerPage=10;this.isLoadingPendientes=!1;this.materias=[];this.modoCategorias=!0;this.selectedLvlCursos=new Set;this.selectedParalelos=new Set;this.aniosOptions=[];this.filtroAnioId=null;this.filtroResolucionKey="";this.filtroResolucion=null;this.filtroInstitucionId=null;this.resolucionOptions=[];this.esSuperAdmin=!1;this.perfilInstitucionNombre="";this.carreras=[];this.asignadas=new Set;this.isLoadingMateria={};this.isBulkLoading=!1;this.califPorMateria=new Map;this.camposCalificacion=[{key:"Teorico1",label:"Teorico1"},{key:"Teorico2",label:"Teorico2"},{key:"Teorico3",label:"Teorico3"},{key:"Teorico4",label:"Teorico4"},{key:"Practico1",label:"Practico1"},{key:"Practico2",label:"Practico2"},{key:"Practico3",label:"Practico3"},{key:"Practico4",label:"Practico4"},{key:"PromTeorico",label:"PromTeorico"},{key:"PromPractico",label:"PromPractico"},{key:"Promedio",label:"Promedio"},{key:"PruebaRecuperacion",label:"PruebaRecuperacion"}]}ngOnInit(){this.cargarFiltrosAsignacion(),this._auth.pedirPerfil().subscribe({next:t=>{this.perfilInstitucionNombre=String(t?.nameInst??"").trim()},error:()=>{this.perfilInstitucionNombre=""}}),this._auth.revisarSiEsSuperAdmin().subscribe(t=>{this.esSuperAdmin=t,this.rebuildResolucionOptions()}),this.tryApplyModoEstudiante()}ngOnChanges(t){(t.modo||t.estudianteId||t.preferInfoId||t.nombreEstudiante||t.fotoEstudiante||t.sexoEstudiante)&&this.tryApplyModoEstudiante()}tryApplyModoEstudiante(){if(this.modo!=="estudiante")return;let t=Number(this.estudianteId??0);if(!Number.isFinite(t)||t<=0||this.lastAppliedEstudianteId===t&&this.estudianteSeleccionado?.id===t)return;this.verPendientes=!1,this.mostrarOpcionesAsignacion=!1,this.filterEstudiante="",this.estudiantes=[],this.estMeta=null;let e=(this.nombreEstudiante??"").toString().trim()||`Estudiante #${t}`,i=this.preferInfoId?Number(this.preferInfoId):null;this.lastAppliedEstudianteId=t,this.seleccionarEstudiante({id:t,nombre:e,infoId:i??void 0}),this._est.Seleccionarestudiantesifas(t).subscribe({next:s=>{let c=s?.data;!c||!this.estudianteSeleccionado||this.estudianteSeleccionado.id!==t||(this.estudianteSeleccionado=Pe(Me({},this.estudianteSeleccionado),{ci:(c?.CI??"").toString()}))},error:()=>{}})}abrirOpcionesAsignacion(){this.mostrarOpcionesAsignacion=!0}cargarFiltrosAsignacion(){this._anios.ObtenerAniosConPredeterminado().subscribe({next:t=>{let e=Array.isArray(t?.anios)?t.anios:[];if(this.aniosOptions=e.map(i=>({id:Number(i?.id),Anio:String(i?.Anio??"").trim()})).filter(i=>Number.isFinite(i.id)&&i.id>0&&i.Anio),this.filtroAnioId===null||this.filtroAnioId===void 0){let i=t?.predeterminado;i?.id?this.filtroAnioId=Number(i.id):this.aniosOptions.length&&(this.filtroAnioId=this.aniosOptions[0].id)}},error:()=>{this.aniosOptions=[]}}),this._carreras.Obtenercarreras().subscribe({next:t=>{this.carreras=Array.isArray(t?.data)?t.data:[],this.rebuildResolucionOptions()},error:()=>{this.carreras=[],this.rebuildResolucionOptions()}})}rebuildResolucionOptions(){let t=new Map;for(let e of this.carreras||[]){let i=(e?.Resolucion??"").toString().trim();if(!i)continue;let s=e?.instituciones_id,c=s!=null&&s!==""?Number(s):null,m=(e?.NombreInstitucion??"").toString().trim(),E=this.esSuperAdmin&&c?`${c}|${i}`:i,f=this.esSuperAdmin&&c?`${i}${m?" ("+m+")":""}`:i;t.has(E)||t.set(E,{key:E,label:f,resolucion:i,instituciones_id:c})}this.resolucionOptions=Array.from(t.values()).sort((e,i)=>e.label.localeCompare(i.label))}parseResolucionKey(){let t=(this.filtroResolucionKey??"").toString();if(!t){this.filtroResolucion=null,this.filtroInstitucionId=null;return}let e=t.split("|");if(e.length>=2){let i=Number(e[0]),s=e.slice(1).join("|");this.filtroInstitucionId=Number.isFinite(i)?i:null,this.filtroResolucion=s||null}else this.filtroInstitucionId=null,this.filtroResolucion=t}onCambioFiltrosAsignacion(){this.parseResolucionKey(),this.inscripcionSeleccionada&&this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}trackById(t,e){return e.id}onToggleChange(t){let e=t.target.checked;this.ModoBoolean=e}toggleModoCategorias(){this.modoCategorias=!this.modoCategorias}togglePendientes(){this.verPendientes=!this.verPendientes,this.verPendientes&&this.cargarPendientes(1)}cargarPendientes(t=1){if(this.isLoadingPendientes)return;let e=(this.filterPendientes??"").trim();this.isLoadingPendientes=!0,this._info.ObtenerPendientesAsignacion({page:t,per_page:this.pendPerPage,instituciones_id:this.esSuperAdmin?this.filtroInstitucionId??void 0:void 0,search:e||void 0}).subscribe({next:i=>{this.pendientes=Array.isArray(i?.data)?i.data:[],this.pendMeta=i?.meta??null,this.pendPage=this.pendMeta?.current_page??t},error:i=>{console.error("Error al cargar pendientes:",i),this.pendientes=[],this.pendMeta=null,this.pendPage=1},complete:()=>{this.isLoadingPendientes=!1}})}pendTienePrev(){return(this.pendMeta?.current_page??1)>1}pendTieneNext(){let t=this.pendMeta?.current_page??1,e=this.pendMeta?.last_page??1;return t<e}pendPrev(){this.pendTienePrev()&&this.cargarPendientes((this.pendMeta?.current_page??1)-1)}pendNext(){this.pendTieneNext()&&this.cargarPendientes((this.pendMeta?.current_page??1)+1)}seleccionarPendiente(t){let e=Number(t?.estudiantesifas_id??0),i=Number(t?.id??0);if(!e||!i)return;let s=(t?.Ap_Paterno??"").toString().trim(),c=(t?.Ap_Materno??"").toString().trim(),m=(t?.Nombre??"").toString().trim(),E=`${s} ${c} ${m}`.replace(/\s+/g," ").trim()||`Estudiante #${e}`;this.seleccionarEstudiante({id:e,nombre:E,ci:(t?.CI??"").toString(),matricula:(t?.Matricula??"").toString(),infoId:i,institucionId:Number(t?.instituciones_id??0)||void 0,institucionNombre:(t?.NombreInstitucion??"").toString().trim()||void 0})}buscarEstudiantes(t=1){if(this.isLoadingEstudiantes)return;let e=(this.filterEstudiante??"").trim();if(!e||e.length<2){this.estudiantes=[],this.estMeta=null,this.estPage=1;return}if((this.busquedaAnioScope==="assigned"||this.busquedaAnioScope==="mixed")&&!this.filtroAnioId){z.default.fire("Falta gesti\xF3n","Selecciona el A\xF1o (Gesti\xF3n) para buscar por gesti\xF3n.","info");return}let i=this.busquedaAnioScope==="mixed"?"default":this.busquedaAnioScope;this.isLoadingEstudiantes=!0,this._info.Obtenerinfoestudiantesifas({page:t,per_page:this.estPerPage,search:e,sort_by:"Ap_Paterno",sort_dir:"asc",instituciones_id:this.esSuperAdmin?this.filtroInstitucionId??void 0:void 0,anio_id:this.busquedaAnioScope==="unassigned"?void 0:this.filtroAnioId??void 0,include_sin_asignar:this.busquedaAnioScope==="mixed"?1:0,anio_scope:i}).subscribe({next:s=>{let m=(Array.isArray(s?.data)?s.data:[]).map(E=>{let f=(E?.Ap_Paterno??"").toString().trim(),C=(E?.Ap_Materno??"").toString().trim(),S=(E?.Nombre??"").toString().trim(),A=`${f} ${C} ${S}`.replace(/\s+/g," ").trim()||`Estudiante #${E?.id}`,M=Number(E?.estudiantesifas_id??0),H=Number(E?.id??0),Je=(E?.FechInsc??E?.fechInsc??"").toString().trim(),Bt=(E?.Curso_Solicitado??"").toString().trim(),jt=(E?.Paralelo_Solicitado??"").toString().trim(),rt=Number(E?.CantidadMateriasAsignadas??0),$t=(E?.NombreInstitucion??"").toString().trim(),et=Number(E?.instituciones_id??0);return{id:M,nombre:A,ci:(E?.CI??"").toString(),matricula:(E?.Matricula??"").toString(),infoId:H,fechInsc:Je||void 0,cursoSolicitado:Bt||void 0,paraleloSolicitado:jt||void 0,cantAsignaciones:Number.isFinite(rt)?rt:0,institucionId:Number.isFinite(et)&&et>0?et:void 0,institucionNombre:$t||void 0}}).filter(E=>Number.isFinite(E.id)&&E.id>0);this.estudiantes=m,this.estMeta=s?.meta??null,this.estPage=this.estMeta?.current_page??t},error:s=>{console.error("Error al buscar estudiantes:",s),this.estudiantes=[],this.estMeta=null},complete:()=>{this.isLoadingEstudiantes=!1}})}estTienePrev(){return(this.estMeta?.current_page??1)>1}estTieneNext(){let t=this.estMeta?.current_page??1,e=this.estMeta?.last_page??1;return t<e}estPrev(){this.estTienePrev()&&this.buscarEstudiantes((this.estMeta?.current_page??1)-1)}estNext(){this.estTieneNext()&&this.buscarEstudiantes((this.estMeta?.current_page??1)+1)}seleccionarEstudiante(t){this.selectedSearchInfoId=t.infoId??null,this.estudianteSeleccionado=t,this.inscripcionSeleccionada=null,this.inscripciones=[],this.materias=[],this.asignadas.clear(),this.filterMateria="",this.mostrarTodasMaterias=!1,this.selectedLvlCursos.clear(),this.selectedParalelos.clear(),this.modoCategorias=!0,this.cargarInscripciones(t.id,t.infoId??null)}limpiarEstudiante(){this.estudianteSeleccionado=null,this.inscripcionSeleccionada=null,this.inscripciones=[],this.materias=[],this.asignadas.clear(),this.filterMateria="",this.mostrarTodasMaterias=!1,this.selectedLvlCursos.clear(),this.selectedParalelos.clear(),this.modoCategorias=!0}cursosConMateriasAsignadas(){if(this.inscripcionSeleccionada){let i=new Map;for(let s of this.asignadas){let m=(this.materias.find(E=>E.id===s)?.categoria??"SIN CATEGORIA").toString().trim()||"SIN CATEGORIA";i.set(m,(i.get(m)??0)+1)}return Array.from(i.entries()).sort(([s],[c])=>s.localeCompare(c)).map(([s,c])=>`${s} (${c})`)}let t=new Set,e=[];for(let i of this.inscripciones??[]){let s=Number(i?.CantidadMateriasAsignadas??0);if(!Number.isFinite(s)||s<=0)continue;let c=(i?.Curso_Solicitado??"SIN CURSO").toString().trim()||"SIN CURSO",m=(i?.Paralelo_Solicitado??"").toString().trim(),E=m?`${c} - ${m} (${s})`:`${c} (${s})`;t.has(E)||(t.add(E),e.push(E))}return e.sort((i,s)=>i.localeCompare(s))}cargarInscripciones(t,e=null){let i=++this.inscripcionesReqToken;this.isLoadingInscripciones=!0,this._info.ObtenerinfoestudiantesifasPorEstudiante(t).subscribe({next:s=>{if(i!==this.inscripcionesReqToken)return;let c=Array.isArray(s?.data)?s.data:[];if(this.inscripciones=c.map(m=>({id:Number(m?.id),FechInsc:m?.FechInsc,Curso_Solicitado:m?.Curso_Solicitado,Paralelo_Solicitado:m?.Paralelo_Solicitado,Categoria:m?.Categoria,Turno:m?.Turno,CantidadMateriasAsignadas:m?.CantidadMateriasAsignadas,institucionId:Number(m?.instituciones_id??0)||void 0,institucionNombre:(m?.NombreInstitucion??"").toString().trim()||void 0})).filter(m=>Number.isFinite(m.id)),this.inscripciones.length>0){let m=e?this.inscripciones.find(E=>E.id===e):null;this.seleccionarInscripcion(m??this.inscripciones[0],!0)}},error:s=>{i===this.inscripcionesReqToken&&(console.error("Error al cargar inscripciones:",s),this.inscripciones=[])},complete:()=>{i===this.inscripcionesReqToken&&(this.isLoadingInscripciones=!1)}})}seleccionarInscripcion(t,e=!1){this.inscripcionSeleccionada=t,this.materias=[],this.asignadas.clear(),this.califPorMateria.clear(),this.filterMateria="",this.cargarMateriasYAsignaciones(t.id),this.parseResolucionKey(),(!this.filtroAnioId||!this.filtroResolucion)&&!e&&z.default.fire("Filtros incompletos","Selecciona A\xF1o (Gesti\xF3n) y Resoluci\xF3n para cargar materias asignables. Mientras tanto, se muestran las asignadas actuales.","info")}syncCantidadMateriasAsignadas(t,e){this.inscripcionSeleccionada?.id===t&&(this.inscripcionSeleccionada=Pe(Me({},this.inscripcionSeleccionada),{CantidadMateriasAsignadas:e})),this.inscripciones=(this.inscripciones??[]).map(i=>i.id===t?Pe(Me({},i),{CantidadMateriasAsignadas:e}):i)}cargarMateriasYAsignaciones(t){this.parseResolucionKey(),!!this.filtroAnioId&&!!this.filtroResolucion?this._mat.ObtenermateriasPorInfo(t,{all:this.mostrarTodasMaterias,anio_id:this.filtroAnioId??void 0,resolucion:this.filtroResolucion||void 0}).subscribe({next:i=>{let s=Array.isArray(i?.data)?i.data:[];this.materias=s.map(c=>{let m=(c?.NombreMateria??"").toString().trim()||`Materia #${c?.id}`,E=(c?.SiglaMateria??"").toString().trim()||void 0,f=(c?.Anio??"SIN ASIGNAR").toString().trim()||"SIN ASIGNAR",C=(c?.Resolucion??"SIN RESOLUCION").toString().trim()||"SIN RESOLUCION",S=(c?.LvlCurso??"SIN CURSO").toString().trim()||"SIN CURSO",A=(c?.Paralelo??"").toString().trim(),M=A?`${S} ${A}`:S;return{id:Number(c?.id),categoria:M,sigla:E,nombre:m,lvlCurso:S,paralelo:A,anio:f,resolucion:C}}).filter(c=>Number.isFinite(c.id))},error:i=>{console.error("Error al cargar materias:",i),this.materias=[]}}):this.materias=[],this._calif.ObtenerCalificacionesPorInfo(t).subscribe({next:i=>{let s=Array.isArray(i?.data)?i.data:[];this.asignadas.clear(),this.califPorMateria.clear();for(let c of s){let m=Number(c?.materias_id??c?.materia_id);if(Number.isFinite(m)&&(this.asignadas.add(m),this.califPorMateria.set(m,c),!this.materias.some(E=>E.id===m))){let E=(c?.NombreMateria??"").toString().trim()||`Materia #${m}`,f=(c?.SiglaMateria??"").toString().trim()||void 0,C=(c?.LvlCurso??"SIN CURSO").toString().trim()||"SIN CURSO",S=(c?.MateriaParalelo??"").toString().trim(),A=(c?.Anio??"SIN ASIGNAR").toString().trim()||"SIN ASIGNAR",M=(c?.Resolucion??"SIN RESOLUCION").toString().trim()||"SIN RESOLUCION",H=S?`${C} ${S}`:C;this.materias=[...this.materias,{id:m,categoria:H,sigla:f,nombre:E,lvlCurso:C,paralelo:S,anio:A,resolucion:M}]}}this.syncCantidadMateriasAsignadas(t,this.asignadas.size)},error:i=>{console.error("Error al cargar asignaciones:",i),this.asignadas.clear(),this.califPorMateria.clear(),this.syncCantidadMateriasAsignadas(t,0)}})}materiasFiltradas(){let t=(this.filterMateria??"").trim().toLowerCase(),e=this.materias;if(this.inscripcionSeleccionada&&!this.mostrarTodasMaterias){let i=(this.inscripcionSeleccionada.Curso_Solicitado??"").toString().trim(),s=(this.inscripcionSeleccionada.Paralelo_Solicitado??"").toString().trim();i&&(e=e.filter(c=>this.asignadas.has(c.id)||(c.lvlCurso??"").toString().trim()===i),s&&(e=e.filter(c=>this.asignadas.has(c.id)||(c.paralelo??"").toString().trim()===s)))}return t&&(e=e.filter(i=>`${i.id} ${i.sigla??""} ${i.nombre} ${i.categoria} ${i.lvlCurso??""} ${i.paralelo??""}`.toLowerCase().includes(t))),this.selectedLvlCursos.size>0&&(e=e.filter(i=>this.selectedLvlCursos.has((i.lvlCurso??"").toString()))),this.selectedParalelos.size>0&&(e=e.filter(i=>this.selectedParalelos.has((i.paralelo??"").toString()))),e}lvlCursosDetectados(){return Array.from(new Set(this.materias.map(t=>(t.lvlCurso??"").toString()).filter(Boolean))).sort((t,e)=>t.localeCompare(e))}paralelosDetectados(){return Array.from(new Set(this.materias.map(t=>(t.paralelo??"").toString()).filter(t=>!!t))).sort((t,e)=>t.localeCompare(e))}isLvlCursoSeleccionado(t){return this.selectedLvlCursos.has(t)}toggleLvlCurso(t){this.selectedLvlCursos.has(t)?this.selectedLvlCursos.delete(t):this.selectedLvlCursos.add(t)}isParaleloSeleccionado(t){return this.selectedParalelos.has(t)}toggleParalelo(t){this.selectedParalelos.has(t)?this.selectedParalelos.delete(t):this.selectedParalelos.add(t)}categorias(){return Array.from(new Set(this.materiasFiltradas().map(t=>t.categoria))).sort((t,e)=>t.localeCompare(e))}materiasPorCategoria(t){return this.materiasFiltradas().filter(e=>e.categoria===t)}isAsignada(t){return this.asignadas.has(t)}toggleAsignacion(t,e){return O(this,null,function*(){if(e?.preventDefault(),!this.inscripcionSeleccionada)return;let i=this.inscripcionSeleccionada.id;this.isLoadingMateria[t.id]=!0;try{if(this.asignadas.has(t.id)){if(!(yield this.confirmarQuitarMateriaSiTieneCalificaciones(t)))return;yield new Promise((m,E)=>{this._calif.QuitarMateriaAEstudiante({infoestudiantesifas_id:i,materias_id:t.id}).subscribe({next:()=>m(),error:f=>E(f)})}),this.asignadas.delete(t.id),this.syncCantidadMateriasAsignadas(i,this.asignadas.size)}else yield new Promise((c,m)=>{this._calif.AsignarMateriaAEstudiante({infoestudiantesifas_id:i,materias_id:t.id,forzar:!0}).subscribe({next:()=>c(),error:E=>m(E)})}),this.asignadas.add(t.id),this.syncCantidadMateriasAsignadas(i,this.asignadas.size);this._calif.ObtenerCalificacionesPorInfo(i).subscribe({next:c=>{let m=Array.isArray(c?.data)?c.data:[];this.califPorMateria.clear();for(let E of m){let f=Number(E?.materias_id??E?.materia_id);Number.isFinite(f)&&this.califPorMateria.set(f,E)}this.syncCantidadMateriasAsignadas(i,this.asignadas.size)}})}catch(s){console.error("Error al alternar asignaci\xF3n:",s)}finally{this.isLoadingMateria[t.id]=!1}})}onToggleMostrarTodasMaterias(){this.mostrarTodasMaterias=!this.mostrarTodasMaterias,this.inscripcionSeleccionada&&this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}fmtCal(t){return t==null||t===""?"NULL":String(t)}califDeMateria(t){return this.califPorMateria.get(t)}tieneCalificaciones(t){let e=this.califDeMateria(t);return e?this.camposCalificacion.some(({key:i})=>{let s=e?.[i];return s!=null&&s!==""}):!1}verCalificaciones(t,e){return O(this,null,function*(){e?.preventDefault(),e?.stopPropagation?.();let i=this.califDeMateria(t.id),s=`${t.sigla?t.sigla+" - ":""}${t.nombre}`,c=`
      <div style="text-align:left">
        <div><b>Materia:</b> ${this.escapeHtml(s)}</div>
        <div style="margin-top:8px">
          <table class="table table-sm" style="margin:0">
            <tbody>
              ${this.camposCalificacion.map(({key:m,label:E})=>{let f=this.fmtCal(i?.[m]);return`<tr><td style="width:45%"><b>${this.escapeHtml(E)}</b></td><td>${this.escapeHtml(f)}</td></tr>`}).join("")}
            </tbody>
          </table>
        </div>
      </div>
    `;yield z.default.fire({title:"Calificaciones",html:c,icon:"info",confirmButtonText:"Cerrar",width:720})})}verCalificacionesPorId(t,e){return O(this,null,function*(){let i=this.materias.find(s=>s.id===t);i&&(yield this.verCalificaciones(i,e))})}confirmarQuitarMateriaSiTieneCalificaciones(t){return O(this,null,function*(){if(!this.tieneCalificaciones(t.id))return!0;let e=`${t.sigla?t.sigla+" - ":""}${t.nombre}`;return!!(yield z.default.fire({title:"Confirmar",text:`Esta materia ya tiene calificaciones (${e}). \xBFSeguro que deseas quitarla?`,icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, quitar",cancelButtonText:"Cancelar"})).isConfirmed})}escapeHtml(t){return String(t??"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}tokensBusqueda(){let t=(this.filterEstudiante??"").toString().trim();if(!t)return[];let e=t.split(/\s+/).map(i=>i.trim()).filter(i=>i!=="");return Array.from(new Set(e)).sort((i,s)=>s.length-i.length)}highlightHtml(t){let e=this.escapeHtml(t??""),i=this.tokensBusqueda();if(i.length===0)return e;let s=e;for(let c of i){if(!c)continue;let m=new RegExp(this.escapeRegExp(c),"gi");s=s.replace(m,E=>`<strong class="fw-bold">${E}</strong>`)}return s}formatoCursoParalelo(t){let e=(t?.cursoSolicitado??"").toString().trim(),i=(t?.paraleloSolicitado??"").toString().trim();return!e&&!i?"":i?`${e} - ${i}`:e}ciSoloNumeros(t){return String(t??"").replace(/\D+/g,"")}ciEstudianteNumerico(){return this.ciSoloNumeros(this.estudianteSeleccionado?.ci??"")}institucionHistorialNombre(){let t=(this.perfilInstitucionNombre??"").toString().trim();if(t)return t;let e=(this.estudianteSeleccionado?.institucionNombre??"").toString().trim();if(e)return e;let i=(this.inscripcionSeleccionada?.institucionNombre??"").toString().trim();if(i)return i;if(this.esSuperAdmin&&this.filtroInstitucionId){let c=((this.carreras??[]).find(m=>Number(m?.instituciones_id??0)===Number(this.filtroInstitucionId))?.NombreInstitucion??"").toString().trim();if(c)return c}return""}califValor(t,e){let i=this.califDeMateria(t),s=i?i?.[e]:null;return s==null||s===""?"-":String(s)}estadoRegistroMateria(t){let e=this.califDeMateria(t),i=e?e?.EstadoRegistroMateria:null;return i==null||i===""?"-":String(i)}asignarCursoCompleto(){return O(this,null,function*(){if(this.inscripcionSeleccionada){if(this.parseResolucionKey(),!this.filtroAnioId||!this.filtroResolucion){yield z.default.fire({title:"Faltan filtros",text:"Selecciona A\xF1o y Resoluci\xF3n para asignaci\xF3n masiva.",icon:"warning",confirmButtonText:"Cerrar"});return}this.isBulkLoading=!0;try{yield new Promise((t,e)=>{this._calif.AsignarAnioResolucionCompleto({infoestudiantesifas_id:this.inscripcionSeleccionada.id,anio_id:this.filtroAnioId,resolucion:this.filtroResolucion}).subscribe({next:()=>t(),error:i=>e(i)})}),this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}catch(t){console.error("Error al asignar curso completo:",t)}finally{this.isBulkLoading=!1}}})}asignarCategoriaCompleta(t,e){return O(this,null,function*(){if(e?.preventDefault(),e?.stopPropagation?.(),!this.inscripcionSeleccionada)return;let i=this.inscripcionSeleccionada.id;if(this.parseResolucionKey(),!this.filtroAnioId||!this.filtroResolucion){yield z.default.fire({title:"Faltan filtros",text:"Selecciona A\xF1o y Resoluci\xF3n para asignaci\xF3n masiva.",icon:"warning",confirmButtonText:"Cerrar"});return}let s=this.materiasPorCategoria(t);if(s.length===0)return;let c=s.map(C=>C.id);for(let C of c)this.isLoadingMateria[C]=!0;let m=(s[0]?.lvlCurso??"").toString().trim(),E=(s[0]?.paralelo??"").toString().trim(),f=E||null;this.isBulkLoading=!0;try{yield new Promise((C,S)=>{this._calif.AsignarCategoriaCompleta({infoestudiantesifas_id:i,curso:m,paralelo:f,forzar:!1}).subscribe({next:()=>C(),error:A=>S(A)})}),this.cargarMateriasYAsignaciones(i)}catch(C){console.error("Error al asignar curso/paralelo (bulk):",C),yield z.default.fire({title:"Error",text:"No se pudo asignar el curso/paralelo.",icon:"error",confirmButtonText:"Cerrar"})}finally{this.isBulkLoading=!1;for(let C of c)this.isLoadingMateria[C]=!1}})}quitarCategoriaCompleta(t,e){return O(this,null,function*(){if(e?.preventDefault(),e?.stopPropagation?.(),!this.inscripcionSeleccionada)return;let i=this.inscripcionSeleccionada.id;if(this.parseResolucionKey(),!this.filtroAnioId||!this.filtroResolucion){yield z.default.fire({title:"Faltan filtros",text:"Selecciona A\xF1o y Resoluci\xF3n para desasignaci\xF3n masiva.",icon:"warning",confirmButtonText:"Cerrar"});return}let s=this.materiasPorCategoria(t);if(s.length===0)return;let c=s.filter(M=>this.asignadas.has(M.id));if(c.length===0)return;let m=c.some(M=>this.tieneCalificaciones(M.id));if(!(yield z.default.fire({title:"Confirmar",text:m?"Hay materias con calificaciones en este curso/paralelo. \xBFSeguro que deseas quitar todas sus asignaciones?":"\xBFSeguro que deseas quitar todas las asignaciones de este curso/paralelo?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, quitar",cancelButtonText:"Cancelar"})).isConfirmed)return;let f=s.map(M=>M.id);for(let M of f)this.isLoadingMateria[M]=!0;let C=(s[0]?.lvlCurso??"").toString().trim(),S=(s[0]?.paralelo??"").toString().trim(),A=S||null;this.isBulkLoading=!0;try{yield new Promise((M,H)=>{this._calif.QuitarCategoriaCompleta({infoestudiantesifas_id:i,curso:C,paralelo:A,forzar:!1}).subscribe({next:()=>M(),error:Je=>H(Je)})}),this.cargarMateriasYAsignaciones(i)}catch(M){console.error("Error al quitar curso/paralelo (bulk):",M),yield z.default.fire({title:"Error",text:"No se pudo quitar el curso/paralelo.",icon:"error",confirmButtonText:"Cerrar"})}finally{this.isBulkLoading=!1;for(let M of f)this.isLoadingMateria[M]=!1}})}quitarTodasAsignaciones(){return O(this,null,function*(){if(!this.inscripcionSeleccionada)return;let t=Array.from(this.asignadas).some(i=>this.tieneCalificaciones(i));if((yield z.default.fire({title:"Confirmar",text:t?"Hay materias con calificaciones. \xBFSeguro que deseas quitar todas las asignaciones?":"\xBFSeguro que deseas quitar todas las asignaciones?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, quitar todas",cancelButtonText:"Cancelar"})).isConfirmed){this.isBulkLoading=!0;try{yield new Promise((i,s)=>{this._calif.QuitarTodasLasMaterias({infoestudiantesifas_id:this.inscripcionSeleccionada.id}).subscribe({next:()=>i(),error:c=>s(c)})}),this.cargarMateriasYAsignaciones(this.inscripcionSeleccionada.id)}catch(i){console.error("Error al quitar todas las asignaciones:",i)}finally{this.isBulkLoading=!1}}})}quitarAsignacionTabla(t){return O(this,null,function*(){let e=this.materias.find(i=>i.id===t);e&&(yield this.toggleAsignacion(e))})}tablaAsignaciones(){if(!this.estudianteSeleccionado||!this.inscripcionSeleccionada)return[];let t=[];for(let e of this.asignadas){let i=this.materias.find(s=>s.id===e);i&&t.push({materiaId:i.id,estudiante:this.estudianteSeleccionado.nombre,materia:`${i.sigla?i.sigla+" - ":""}${i.nombre}`,categoria:i.categoria,paralelo:i.paralelo||"-"})}return t}};Ce.\u0275fac=function(e){return new(e||Ce)(w(Et),w(bt),w(Ct),w(W),w(Ke),w(Xe),w(qe),w(ve))},Ce.\u0275cmp=re({type:Ce,selectors:[["app-asignadormateriasestudiantes"]],inputs:{modo:"modo",estudianteId:"estudianteId",nombreEstudiante:"nombreEstudiante",fotoEstudiante:"fotoEstudiante",sexoEstudiante:"sexoEstudiante",preferInfoId:"preferInfoId"},standalone:!1,features:[Oe],decls:42,vars:16,consts:[["modalOtroComponentecalifhistorias",""],["sinCursosAsignados",""],[1,"container","mt-4"],["class","row",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"row","align-items-end","g-2","mb-3"],[1,"col-sm-3"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-calendar"],[1,"form-floating","flex-grow-1"],["id","filtroAnioGlobal",1,"form-select",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","filtroAnioGlobal"],[1,"bi","bi-bookmark"],["id","filtroResolucionGlobal",1,"form-select",3,"ngModelChange","change","ngModel"],["for","filtroResolucionGlobal"],[1,"col-sm-6","d-flex","justify-content-end"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],["class","card mb-3",4,"ngIf"],["class","row align-items-end g-2",4,"ngIf"],[1,"mt-2"],["class","text-muted",4,"ngIf"],["class","d-flex flex-wrap align-items-center gap-2",4,"ngIf"],[4,"ngIf"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"lead","text-secondary","subtitulosGlobales"],[1,"col-12"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-center",2,"gap","16px"],[1,"d-flex","align-items-center",2,"gap","12px"],[2,"width","70px","height","70px","border-radius","50%","overflow","hidden","border","3px solid #0d6efd","display","flex","align-items","center","justify-content","center","background","#fff"],["style","width: 100%; height: 100%; object-fit: cover;",3,"src",4,"ngIf"],["style","width: 70px; height: 70px;",3,"options",4,"ngIf"],[1,"text-muted",2,"font-size","13px"],[1,"fw-bold",2,"font-size","18px"],[1,"d-flex","align-items-center",2,"gap","8px"],["class","badge bg-primary",4,"ngIf"],["class","badge bg-secondary",4,"ngIf"],[2,"width","100%","height","100%","object-fit","cover",3,"src"],[2,"width","70px","height","70px",3,"options"],[1,"badge","bg-primary"],[1,"badge","bg-secondary"],[1,"card","mb-3"],[1,"card-header","d-flex","align-items-center","justify-content-between","flex-wrap","gap-2"],[1,"row","align-items-end","g-2"],[1,"col-lg-8"],[1,"bi","bi-search"],["type","text","placeholder","Buscar pendiente",1,"form-control",3,"input","keyup.enter","value"],["type","button",1,"btn","btn-outline-primary",3,"click","disabled"],["class","mt-2 d-flex align-items-center gap-2",4,"ngIf"],[1,"col-lg-4"],[1,"form-label"],["readonly","",1,"form-control",3,"value"],[1,"table-responsive"],[1,"table","table-sm","table-striped","align-middle","mb-0"],[2,"width","140px"],[4,"ngFor","ngForOf"],[1,"text-muted"],[1,"mt-2","d-flex","align-items-center","gap-2"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],["type","button",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"text-center","py-3"],[1,"col-sm-10"],[1,"row","g-2","mb-2"],["type","text","placeholder","Buscar estudiante",1,"form-control",3,"input","keyup.enter","ngClass","value"],[1,"btn","btn-outline-primary",3,"click","disabled"],["class","text-primary",4,"ngIf"],[1,"mt-2","d-flex","flex-wrap","gap-2"],["class","btn btn-outline-secondary btn-sm",3,"active","disabled","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-sm-2","d-flex","justify-content-end","gap-2"],[1,"form-check","mt-2"],["type","checkbox","id","toggleModo",1,"form-check-input",3,"change"],["for","toggleModo",1,"form-check-label"],[1,"text-primary"],[1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[3,"innerHTML"],[1,"small","text-muted"],[1,"small"],[1,"badge","bg-secondary","me-1"],[3,"innerHTML",4,"ngIf"],["class","small text-muted",4,"ngIf"],[1,"d-flex","flex-wrap","align-items-center","gap-2"],[4,"ngIf","ngIfElse"],["class","badge bg-success",4,"ngFor","ngForOf"],[1,"badge","bg-success"],["class","d-flex align-items-center justify-content-between flex-wrap gap-2",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap","gap-2"],[1,"text-success","m-0"],["type","button","title","Ver historial (califhistorias) por CI",1,"btn","btn-outline-primary","btn-sm","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],["width","26px","height","26px",3,"options"],["class","d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap","gap-2","mb-2"],["type","button","class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"table","align-middle","table-hover","table-sm"],[1,"text-center"],[1,"table-group-divider"],["colspan","14",1,"text-center","text-muted"],[1,"row","mb-2"],[1,"col-sm-6"],[1,"bi","bi-filter"],["type","text","placeholder","Buscar materia",1,"form-control",3,"input","value"],[1,"col-sm-6","d-flex","justify-content-end","flex-wrap","gap-2","mt-2","mt-sm-0"],[1,"form-check","mt-1"],["type","checkbox","id","toggleCategorias",1,"form-check-input",3,"change","checked"],["for","toggleCategorias",1,"form-check-label"],["type","checkbox","id","toggleTodas",1,"form-check-input",3,"change","checked"],["for","toggleTodas",1,"form-check-label"],[1,"d-flex","align-items-center","flex-wrap","gap-1"],[1,"text-muted","me-1"],["type","button","class","btn btn-outline-primary btn-sm",3,"active","click",4,"ngFor","ngForOf"],["type","button","class","btn btn-outline-secondary btn-sm",3,"active","click",4,"ngFor","ngForOf"],["class","btn btn-outline-success btn-sm",3,"disabled","click",4,"ngIf"],["class","btn btn-outline-danger btn-sm",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"btn","btn-outline-success","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],[1,"d-flex","align-items-center","justify-content-between","mt-3","gap-2"],[1,"m-0","flex-grow-1","text-center"],[1,"d-flex","align-items-center","gap-2"],["type","button","title","Asigna todas las materias de este curso/paralelo",1,"btn","btn-outline-success","btn-sm",3,"click","disabled"],["type","button","title","Quita todas las materias asignadas de este curso/paralelo",1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],[1,"d-flex","flex-wrap"],["class","list-group-item col-sm-3 custom-border position-relative",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"list-group-item","col-sm-3","custom-border","position-relative",3,"ngClass"],["type","button",1,"btn","btn-sm","w-100","text-start",3,"click","disabled"],[1,"me-2","badge",3,"ngClass"],["class","small text-muted mt-2 d-flex align-items-center justify-content-between gap-2",4,"ngIf"],["class","spinner-border spinner-border-sm text-primary position-absolute top-50 start-50 translate-middle","role","status",4,"ngIf"],[1,"small","text-muted","mt-2","d-flex","align-items-center","justify-content-between","gap-2"],["class","ms-1",4,"ngIf"],["type","button","title","Ver detalle",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"ms-1"],["role","status",1,"spinner-border","spinner-border-sm","text-primary","position-absolute","top-50","start-50","translate-middle"],[1,"visually-hidden"],[1,"small","text-muted","mt-1"],["colspan","18",1,"text-center","text-muted"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[1,"modal-body"],[3,"modo","ciBusqueda","institucion"]],template:function(e,i){if(e&1){let s=b();a(0,"div",2),g(1,Qt,6,0,"div",3)(2,Zt,15,5,"div",3),n(),a(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"span",9),x(9,"i",10),n(),a(10,"div",11)(11,"select",12),L("ngModelChange",function(m){return p(s),R(i.filtroAnioId,m)||(i.filtroAnioId=m),_(m)}),h("change",function(){return p(s),_(i.onCambioFiltrosAsignacion())}),a(12,"option",13),l(13,"-- Seleccione --"),n(),g(14,Jt,2,2,"option",14),n(),a(15,"label",15),l(16,"A\xF1o (Gesti\xF3n)"),n()()()(),a(17,"div",7)(18,"div",8)(19,"span",9),x(20,"i",16),n(),a(21,"div",11)(22,"select",17),L("ngModelChange",function(m){return p(s),R(i.filtroResolucionKey,m)||(i.filtroResolucionKey=m),_(m)}),h("change",function(){return p(s),_(i.onCambioFiltrosAsignacion())}),a(23,"option",13),l(24,"-- Seleccione --"),n(),g(25,ei,2,2,"option",14),n(),a(26,"label",18),l(27,"Resoluci\xF3n"),n()()()(),a(28,"div",19)(29,"button",20),h("click",function(){return p(s),_(i.togglePendientes())}),l(30),n()()(),g(31,ri,48,8,"div",21)(32,bi,21,12,"div",22),a(33,"div",23),g(34,Ci,2,1,"small",24)(35,wi,9,3,"div",25),n(),x(36,"hr"),g(37,Mi,5,3,"div",26)(38,Pi,1,0,"hr",26)(39,ln,4,3,"div",26),n()(),g(40,cn,6,3,"ng-template",null,0,P)}e&2&&(r(),d("ngIf",i.modo!=="estudiante"),r(),d("ngIf",i.modo==="estudiante"),r(9),D("ngModel",i.filtroAnioId),r(),d("ngValue",null),r(2),d("ngForOf",i.aniosOptions),r(8),D("ngModel",i.filtroResolucionKey),r(),d("ngValue",""),r(2),d("ngForOf",i.resolucionOptions),r(5),I(" ",i.verPendientes?"Ocultar pendientes":"Ver pendientes de asignaci\xF3n"," "),r(),d("ngIf",i.verPendientes&&i.modo!=="estudiante"),r(),d("ngIf",i.modo!=="estudiante"),r(2),d("ngIf",!i.estudianteSeleccionado),r(),d("ngIf",i.estudianteSeleccionado),r(2),d("ngIf",i.estudianteSeleccionado),r(),d("ngIf",i.inscripcionSeleccionada),r(),d("ngIf",i.inscripcionSeleccionada))},dependencies:[le,ce,de,ge,he,fe,pe,_e,xe,yt],styles:[".custom-border[_ngcontent-%COMP%]{border:1px solid #e6e6e6;border-radius:10px;padding:8px;background:#fff;transition:background-color .16s ease,border-color .16s ease}.custom-border[_ngcontent-%COMP%]:hover{border-color:#2563eb;background:#eaf1ff}.checked[_ngcontent-%COMP%]{border-color:#22c55e!important;background:#f3fff5}.btn.active[_ngcontent-%COMP%]{border-color:#2563eb;background:#eaf1ff;color:#0335a0;font-weight:700}"]});var Se=Ce;var fn=["modalRegistroEstudianteCompleto"],gn=["modalEsperaFotoCelular"],hn=["modalVincularCelular"],xn=["modalEsperaFotoPagoCelular"],vn=["modalgestioninfoestudiantesifas"],En=["modalOtroComponenteEstadisticas"],bn=["modalOtroComponenteAsignacionesEstudiantes"],q=(o,t)=>({"bi-caret-up":o,"bi-caret-down":t}),Dt=(o,t,e)=>({"bg-success":o,"bg-secondary":t,"bg-danger":e});function Cn(o,t){if(o&1&&x(0,"ng-lottie",53),o&2){let e=u(2);d("options",e.sexoEstudiante==="MASCULINO"?e._tools.optionsavatarmasculinoanimado:e._tools.optionsavatarfemenino2)}}function Sn(o,t){if(o&1&&x(0,"img",54),o&2){let e=u(2);d("src",e._tools.ruta+e.fotoEstudiante,F)}}function yn(o,t){if(o&1&&(a(0,"div",52),it(1,Cn,1,1,"ng-lottie",53)(2,Sn,1,1,"img",54),n()),o&2){let e=u();r(),nt(e.fotoEstudiante==null||e.fotoEstudiante==""?1:2)}}function In(o,t){if(o&1&&(a(0,"option",55),l(1),n()),o&2){let e=t.$implicit;d("ngValue",e.id),r(),v(e.Anio)}}function wn(o,t){if(o&1&&x(0,"i",56),o&2){let e=u(2);d("ngClass",V(1,q,e.getSortDirinfoestudiantesifas("NombreInstitucion")==="asc",e.getSortDirinfoestudiantesifas("NombreInstitucion")==="desc"))}}function An(o,t){if(o&1){let e=b();a(0,"th",44),h("click",function(s){p(e);let c=u();return _(c.sortByinfoestudiantesifas("NombreInstitucion",s))}),l(1," NombreInstitucion "),g(2,wn,1,4,"i",45),n()}if(o&2){let e=u();r(2),d("ngIf",e.isSortedinfoestudiantesifas("NombreInstitucion"))}}function Tn(o,t){if(o&1&&x(0,"i",56),o&2){let e=u();d("ngClass",V(1,q,e.getSortDirinfoestudiantesifas("Anio")==="asc",e.getSortDirinfoestudiantesifas("Anio")==="desc"))}}function Vn(o,t){if(o&1&&x(0,"i",56),o&2){let e=u();d("ngClass",V(1,q,e.getSortDirinfoestudiantesifas("FechInsc")==="asc",e.getSortDirinfoestudiantesifas("FechInsc")==="desc"))}}function Mn(o,t){if(o&1&&x(0,"i",56),o&2){let e=u(2);d("ngClass",V(1,q,e.getSortDirinfoestudiantesifas("Ap_Paterno")==="asc",e.getSortDirinfoestudiantesifas("Ap_Paterno")==="desc"))}}function Pn(o,t){if(o&1){let e=b();a(0,"th",44),h("click",function(s){p(e);let c=u();return _(c.sortByinfoestudiantesifas("Ap_Paterno",s))}),l(1," Ap_Paterno "),g(2,Mn,1,4,"i",45),n()}if(o&2){let e=u();r(2),d("ngIf",e.isSortedinfoestudiantesifas("Ap_Paterno"))}}function Fn(o,t){if(o&1&&x(0,"i",56),o&2){let e=u(2);d("ngClass",V(1,q,e.getSortDirinfoestudiantesifas("Ap_Materno")==="asc",e.getSortDirinfoestudiantesifas("Ap_Materno")==="desc"))}}function On(o,t){if(o&1){let e=b();a(0,"th",44),h("click",function(s){p(e);let c=u();return _(c.sortByinfoestudiantesifas("Ap_Materno",s))}),l(1," Ap_Materno "),g(2,Fn,1,4,"i",45),n()}if(o&2){let e=u();r(2),d("ngIf",e.isSortedinfoestudiantesifas("Ap_Materno"))}}function kn(o,t){if(o&1&&x(0,"i",56),o&2){let e=u(2);d("ngClass",V(1,q,e.getSortDirinfoestudiantesifas("Nombre")==="asc",e.getSortDirinfoestudiantesifas("Nombre")==="desc"))}}function Nn(o,t){if(o&1){let e=b();a(0,"th",44),h("click",function(s){p(e);let c=u();return _(c.sortByinfoestudiantesifas("Nombre",s))}),l(1," Nombre "),g(2,kn,1,4,"i",45),n()}if(o&2){let e=u();r(2),d("ngIf",e.isSortedinfoestudiantesifas("Nombre"))}}function Dn(o,t){if(o&1&&x(0,"i",56),o&2){let e=u(2);d("ngClass",V(1,q,e.getSortDirinfoestudiantesifas("CI")==="asc",e.getSortDirinfoestudiantesifas("CI")==="desc"))}}function Rn(o,t){if(o&1){let e=b();a(0,"th",44),h("click",function(s){p(e);let c=u();return _(c.sortByinfoestudiantesifas("CI",s))}),l(1," Carnet "),g(2,Dn,1,4,"i",45),n()}if(o&2){let e=u();r(2),d("ngIf",e.isSortedinfoestudiantesifas("CI"))}}function Ln(o,t){if(o&1&&x(0,"i",56),o&2){let e=u();d("ngClass",V(1,q,e.getSortDirinfoestudiantesifas("Categoria")==="asc",e.getSortDirinfoestudiantesifas("Categoria")==="desc"))}}function Bn(o,t){if(o&1&&x(0,"i",56),o&2){let e=u();d("ngClass",V(1,q,e.getSortDirinfoestudiantesifas("Curso_Solicitado")==="asc",e.getSortDirinfoestudiantesifas("Curso_Solicitado")==="desc"))}}function jn(o,t){if(o&1&&x(0,"i",56),o&2){let e=u();d("ngClass",V(1,q,e.getSortDirinfoestudiantesifas("CantidadMateriasAsignadas")==="asc",e.getSortDirinfoestudiantesifas("CantidadMateriasAsignadas")==="desc"))}}function $n(o,t){if(o&1&&x(0,"i",56),o&2){let e=u();d("ngClass",V(1,q,e.getSortDirinfoestudiantesifas("Verificacion")==="asc",e.getSortDirinfoestudiantesifas("Verificacion")==="desc"))}}function Un(o,t){if(o&1&&(a(0,"tr")(1,"td",42)(2,"div",57)(3,"span",58),l(4,"Cargando..."),n()()()()),o&2){let e=u();r(),Q("colspan",e.getTableColspan())}}function zn(o,t){if(o&1&&(a(0,"tr")(1,"td",59)(2,"div",60)(3,"div",61),l(4,"No hay datos disponibles"),n(),x(5,"ng-lottie",62),n()()()),o&2){let e=u();r(),Q("colspan",e.getTableColspan()),r(4),d("options",e._tools.optionsnohayinformacion)}}function Gn(o,t){if(o&1&&(a(0,"td"),l(1),n()),o&2){let e=u().$implicit;r(),v(e.NombreInstitucion)}}function qn(o,t){if(o&1&&(a(0,"td"),x(1,"span",64),n()),o&2){let e=u().$implicit,i=u();r(),d("innerHTML",i.resaltarTexto(e.Ap_Paterno),T)}}function Hn(o,t){if(o&1&&(a(0,"td"),x(1,"span",64),n()),o&2){let e=u().$implicit,i=u();r(),d("innerHTML",i.resaltarTexto(e.Ap_Materno),T)}}function Qn(o,t){if(o&1&&(a(0,"td"),x(1,"span",64),n()),o&2){let e=u().$implicit,i=u();r(),d("innerHTML",i.resaltarTexto(e.Nombre),T)}}function Wn(o,t){if(o&1&&(a(0,"td"),x(1,"span",64),n()),o&2){let e=u().$implicit,i=u();r(),d("innerHTML",i.resaltarTexto(e.CI),T)}}function Kn(o,t){if(o&1&&x(0,"img",71),o&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"eye.svg",F)}}function Xn(o,t){if(o&1&&x(0,"ng-lottie",72),o&2){let e=u(2);d("options",e._tools.optionseye)}}function Yn(o,t){if(o&1&&x(0,"img",71),o&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"eye.svg",F)}}function Zn(o,t){if(o&1&&x(0,"ng-lottie",72),o&2){let e=u(2);d("options",e._tools.optionseye)}}function Jn(o,t){if(o&1&&x(0,"img",71),o&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"pencil.svg",F)}}function ea(o,t){if(o&1&&x(0,"ng-lottie",72),o&2){let e=u(2);d("options",e._tools.optionsEditar)}}function ta(o,t){if(o&1&&x(0,"img",71),o&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"delete.svg",F)}}function ia(o,t){if(o&1&&x(0,"ng-lottie",72),o&2){let e=u(2);d("options",e._tools.optionsEliminar)}}function na(o,t){if(o&1){let e=b();a(0,"tr",63),h("contextmenu",function(s){let c=p(e).$implicit,m=u();return _(m.abrirMenuinfoestudiantesifas(s,c))}),a(1,"td",42),l(2),n(),g(3,Gn,2,1,"td",46),a(4,"td"),l(5),n(),a(6,"td"),l(7),Y(8,"dateFormat"),n(),g(9,qn,2,1,"td",46)(10,Hn,2,1,"td",46)(11,Qn,2,1,"td",46)(12,Wn,2,1,"td",46),a(13,"td"),x(14,"span",64),n(),a(15,"td"),x(16,"span",64),n(),a(17,"td",42),x(18,"span",64),n(),a(19,"td"),x(20,"span",64),n(),a(21,"td",65)(22,"button",66),h("click",function(){let s=p(e).$implicit,c=u();return _(c.abrirRegistroPagoDesdeInscripcion(s))})("mouseenter",function(){let s=p(e).$implicit,c=u();return _(c._tools.hoverBotonMap["visualizacioninfoestudiantesifas-"+s.id]=!0)})("mouseleave",function(){let s=p(e).$implicit,c=u();return _(c._tools.hoverBotonMap["visualizacioninfoestudiantesifas-"+s.id]=!1)}),g(23,Kn,1,1,"img",67)(24,Xn,1,1,"ng-lottie",68),n(),a(25,"button",66),h("click",function(){let s=p(e).$implicit,c=u();return _(c.abrirAsignadorMateriasDesdeInscripcion(s))})("mouseenter",function(){let s=p(e).$implicit,c=u();return _(c._tools.hoverBotonMap["visualizacioninfoestudiantesifas-"+s.id]=!0)})("mouseleave",function(){let s=p(e).$implicit,c=u();return _(c._tools.hoverBotonMap["visualizacioninfoestudiantesifas-"+s.id]=!1)}),g(26,Yn,1,1,"img",67)(27,Zn,1,1,"ng-lottie",68),n(),a(28,"button",69),h("click",function(){let s=p(e).$implicit,c=u();return _(c.Seleccionarinfoestudiantesifas(s.id))})("mouseenter",function(){let s=p(e).$implicit,c=u();return _(c._tools.hoverBotonMap["edicioninfoestudiantesifas-"+s.id]=!0)})("mouseleave",function(){let s=p(e).$implicit,c=u();return _(c._tools.hoverBotonMap["edicioninfoestudiantesifas-"+s.id]=!1)}),g(29,Jn,1,1,"img",67)(30,ea,1,1,"ng-lottie",68),n(),a(31,"button",70),h("click",function(){let s=p(e).$implicit,c=u();return _(c.Eliminarinfoestudiantesifas(s.id))})("mouseenter",function(){let s=p(e).$implicit,c=u();return _(c._tools.hoverBotonMap["eliminacioninfoestudiantesifas-"+s.id]=!0)})("mouseleave",function(){let s=p(e).$implicit,c=u();return _(c._tools.hoverBotonMap["eliminacioninfoestudiantesifas-"+s.id]=!1)}),g(32,ta,1,1,"img",67)(33,ia,1,1,"ng-lottie",68),n()()()}if(o&2){let e=t.index,i=t.$implicit,s=u();r(2),v((s.paginainfoestudiantesifas-1)*s.pageSizeinfoestudiantesifas+(e+1)),r(),d("ngIf",s.esSuperAdmin),r(2),v(i.Anio+" | "+(i.Resolucion||"INACTIVO")),r(2),v(Z(8,20,i.FechInsc)),r(2),d("ngIf",!s.estudianteId),r(),d("ngIf",!s.estudianteId),r(),d("ngIf",!s.estudianteId),r(),d("ngIf",!s.estudianteId),r(2),d("innerHTML",s.resaltarTexto(i.Categoria),T),r(2),d("innerHTML",s.resaltarTexto(i.Curso_Solicitado+" "+(i.Paralelo_Solicitado==null?" ":i.Paralelo_Solicitado)),T),r(2),d("innerHTML",s.resaltarTexto(i.CantidadMateriasAsignadas),T),r(2),d("innerHTML",s.resaltarTexto(i.Verificacion),T),r(3),d("ngIf",!s._tools.hoverBotonMap["visualizacioninfoestudiantesifas-"+i.id]),r(),d("ngIf",s._tools.hoverBotonMap["visualizacioninfoestudiantesifas-"+i.id]),r(2),d("ngIf",!s._tools.hoverBotonMap["visualizacioninfoestudiantesifas-"+i.id]),r(),d("ngIf",s._tools.hoverBotonMap["visualizacioninfoestudiantesifas-"+i.id]),r(2),d("ngIf",!s._tools.hoverBotonMap["edicioninfoestudiantesifas-"+i.id]),r(),d("ngIf",s._tools.hoverBotonMap["edicioninfoestudiantesifas-"+i.id]),r(2),d("ngIf",!s._tools.hoverBotonMap["eliminacioninfoestudiantesifas-"+i.id]),r(),d("ngIf",s._tools.hoverBotonMap["eliminacioninfoestudiantesifas-"+i.id])}}function aa(o,t){if(o&1&&(a(0,"option",73),l(1),n()),o&2){let e=t.$implicit;d("value",e),r(),I("",e," por p\xE1gina")}}function sa(o,t){if(o&1&&(a(0,"div",19)(1,"div",121),x(2,"input",122),a(3,"label"),l(4,"Instituci\xF3n"),n(),a(5,"div",92),l(6,"Este campo es obligatorio*"),n()()()),o&2){let e=u(2);r(2),d("ngClass",e.ValidacioninfoestudiantesifasxElemento("instituciones_id"))}}function oa(o,t){if(o&1&&(a(0,"div"),x(1,"img",123),n()),o&2){let e,i=u(2);r(),d("src",i._tools.ruta+((e=i.newinfoestudiantesifas.get("FotoPago"))==null?null:e.value),F)}}function ra(o,t){if(o&1&&(a(0,"div",19)(1,"div",61),l(2,"NO SE DISPONE DE FOTO COMPROBANTE DE PAGO EN DIGITAL"),n(),x(3,"ng-lottie",124),n()),o&2){let e=u(2);r(3),d("options",e._tools.optionsmoney)}}function la(o,t){o&1&&(a(0,"div",138),x(1,"span",139),l(2," Buscando... "),n())}function ca(o,t){if(o&1){let e=b();a(0,"div",131),h("click",function(){let s=p(e).$implicit,c=u(4);return _(c.seleccionarEstudiante(s))}),a(1,"div",140),x(2,"span",64),a(3,"small",61),l(4,"CI: "),x(5,"span",64),n()()()}if(o&2){let e=t.$implicit,i=u(4);r(2),d("innerHTML",i.resaltarNombreEnBuscadorEstudiante(e),T),r(3),d("innerHTML",i.resaltarCIEnBuscadorEstudiante(e.CI),T)}}function da(o,t){if(o&1){let e=b();a(0,"div",138)(1,"div",141)(2,"button",142),h("click",function(s){return p(e),u(4).estudiantesPrevPage(),_(s.stopPropagation())}),l(3," Anterior "),n(),a(4,"span",134),l(5),n(),a(6,"button",142),h("click",function(s){return p(e),u(4).estudiantesNextPage(),_(s.stopPropagation())}),l(7," Siguiente "),n()()()}if(o&2){let e=u(4);r(2),d("disabled",e.estudiantesPage<=1),r(3),De("P\xE1gina ",e.estudiantesPage," de ",e.estudiantesTotalPages),r(),d("disabled",e.estudiantesPage>=e.estudiantesTotalPages)}}function ua(o,t){if(o&1){let e=b();a(0,"div",130)(1,"div",131),h("click",function(){p(e);let s=u(3);return _(s.abrirRegistroEstudianteDesdeBuscador())}),a(2,"div",132)(3,"div")(4,"div",133),l(5,"\xBFNO ENCONTR\xD3 AL ESTUDIANTE?, REG\xCDSTRE SU INFO. PERSONAL."),n(),a(6,"div",134),l(7,"Click para registrar y continuar con la inscripci\xF3n."),n()(),a(8,"span",135),l(9,"REGISTRAR"),n()()(),g(10,la,3,0,"div",136)(11,ca,6,2,"div",137)(12,da,8,4,"div",136),n()}if(o&2){let e=u(3);r(10),d("ngIf",e.isBuscandoEstudiante),r(),d("ngForOf",e.estudiantesPaginados),r(),d("ngIf",!e.isBuscandoEstudiante&&((e.estudiantesFiltrados==null?null:e.estudiantesFiltrados.length)||0)>e.estudiantesPageSize)}}function ma(o,t){if(o&1&&(a(0,"div"),x(1,"img",143),n()),o&2){let e=u(3);r(),d("src",e._tools.ruta+e.estudianteSeleccionado.Foto,F)}}function pa(o,t){if(o&1&&(a(0,"div",19)(1,"div",61),l(2,"NO SE DISPONE DE FOTO DEL ESTUDIANTE"),n(),x(3,"ng-lottie",124),n()),o&2){let e=u(3);r(3),d("options",e._tools.optionsavatarmasculinoanimado)}}function _a(o,t){if(o&1){let e=b();a(0,"div",125)(1,"div",19)(2,"div",126)(3,"input",127),h("focus",function(){p(e);let s=u(2);return _(s.mostrarListaEstudiantes=!0)})("keyup.enter",function(){p(e);let s=u(2);return _(s.buscarEstudiantes())}),n(),a(4,"label"),l(5,"Buscar estudiante (CI / Apellidos / Nombre)"),n(),g(6,ua,13,3,"div",128),n(),a(7,"div",129),g(8,ma,2,1,"div",82)(9,pa,4,1,"ng-template",null,9,P),n()()()}if(o&2){let e=N(10),i=u(2);r(3),d("formControl",i.estudianteInput),r(3),d("ngIf",i.mostrarListaEstudiantes&&(i.estudianteInput.value||"").toString().trim()!==""&&i.busquedaEstudiantesEjecutada),r(2),d("ngIf",i.estudianteSeleccionado==null?null:i.estudianteSeleccionado.Foto)("ngIfElse",e)}}function fa(o,t){if(o&1&&(a(0,"option",144),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function ga(o,t){if(o&1&&(a(0,"option",144),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function ha(o,t){if(o&1&&(a(0,"option",144),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function xa(o,t){if(o&1&&(a(0,"option",144),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function va(o,t){o&1&&(a(0,"small",148),l(1,"INACTIVO"),n())}function Ea(o,t){if(o&1){let e=b();a(0,"div",131),h("click",function(){let s=p(e).$implicit,c=u(3);return _(c.seleccionarDocenteAdmin(s))}),a(1,"div",140)(2,"span"),l(3),n(),g(4,va,2,0,"small",147),n()()}if(o&2){let e=t.$implicit,i=u(3);X("opacity",i.docenteInactivo(e)?"0.65":"1")("pointer-events",i.docenteInactivo(e)?"none":"auto"),G("disabled",i.docenteInactivo(e)),r(3),v(i.getNombreCompletoDocente(e)),r(),d("ngIf",i.docenteInactivo(e))}}function ba(o,t){if(o&1&&(a(0,"div",145),g(1,Ea,5,8,"div",146),n()),o&2){let e=u(2);r(),d("ngForOf",e.docentesFiltradosAdmin)}}function Ca(o,t){o&1&&(a(0,"small",148),l(1,"INACTIVO"),n())}function Sa(o,t){if(o&1){let e=b();a(0,"div",131),h("click",function(){let s=p(e).$implicit,c=u(3);return _(c.seleccionarDocentePC(s))}),a(1,"div",140)(2,"span"),l(3),n(),g(4,Ca,2,0,"small",147),n()()}if(o&2){let e=t.$implicit,i=u(3);X("opacity",i.docenteInactivo(e)?"0.65":"1")("pointer-events",i.docenteInactivo(e)?"none":"auto"),G("disabled",i.docenteInactivo(e)),r(3),v(i.getNombreCompletoDocente(e)),r(),d("ngIf",i.docenteInactivo(e))}}function ya(o,t){if(o&1&&(a(0,"div",145),g(1,Sa,5,8,"div",146),n()),o&2){let e=u(2);r(),d("ngForOf",e.docentesFiltradosPC)}}function Ia(o,t){o&1&&(a(0,"small",148),l(1,"INACTIVO"),n())}function wa(o,t){if(o&1){let e=b();a(0,"div",131),h("click",function(){let s=p(e).$implicit,c=u(3);return _(c.seleccionarDocenteOtros(s))}),a(1,"div",140)(2,"span"),l(3),n(),g(4,Ia,2,0,"small",147),n()()}if(o&2){let e=t.$implicit,i=u(3);X("opacity",i.docenteInactivo(e)?"0.65":"1")("pointer-events",i.docenteInactivo(e)?"none":"auto"),G("disabled",i.docenteInactivo(e)),r(3),v(i.getNombreCompletoDocente(e)),r(),d("ngIf",i.docenteInactivo(e))}}function Aa(o,t){if(o&1&&(a(0,"div",145),g(1,wa,5,8,"div",146),n()),o&2){let e=u(2);r(),d("ngForOf",e.docentesFiltradosOtros)}}function Ta(o,t){if(o&1&&(a(0,"option",144),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function Va(o,t){if(o&1&&(a(0,"option",144),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function Ma(o,t){if(o&1){let e=b();a(0,"button",151),h("click",function(){p(e);let s=u(3);return _(s.AutoCompletarLastinfoestudiantesifas())}),a(1,"span",22),x(2,"ng-lottie",23),n(),a(3,"span"),l(4,"AUTO COMPLETAR "),n(),x(5,"span",24),n()}if(o&2){let e=u(3);r(2),d("options",e._tools.optionsautocompletar)}}function Pa(o,t){if(o&1&&(a(0,"div",149),g(1,Ma,6,1,"button",150),n()),o&2){let e=u(2);r(),d("ngIf",!e.AnimacionCargabtnModalinfoestudiantesifas)}}function Fa(o,t){if(o&1){let e=b();a(0,"button",152),h("click",function(){p(e);let s=u().$implicit,c=u();return s.dismiss(),_(c.resetinfoestudiantesifas())}),a(1,"span",22),x(2,"ng-lottie",23),n(),a(3,"span"),l(4,"CANCELAR"),n(),x(5,"span",24),n()}if(o&2){let e=u(2);r(2),d("options",e._tools.optionscancelar)}}function Oa(o,t){if(o&1){let e=b();a(0,"button",153),h("click",function(){p(e);let s=u(2);return _(s.AgregarModificarinfoestudiantesifas())}),x(1,"span",154),n()}o&2&&d("disabled",!0)}function ka(o,t){if(o&1){let e=b();a(0,"button",155),h("click",function(){p(e);let s=u(2);return _(s.AgregarModificarinfoestudiantesifas())}),a(1,"span",22),x(2,"ng-lottie",23),n(),a(3,"span"),l(4),n(),x(5,"span",24),n()}if(o&2){let e,i,s=u(2);r(2),d("options",(e=s.newinfoestudiantesifas.get("id"))!=null&&e.value?s._tools.optionsEditar:s._tools.optionsAdicionar),r(2),v((i=s.newinfoestudiantesifas.get("id"))!=null&&i.value?"MODIFICAR":"REGISTRAR")}}function Na(o,t){if(o&1){let e=b();a(0,"div",74)(1,"h4",75),l(2),n(),a(3,"button",76),h("click",function(){let s=p(e).$implicit,c=u();return s.dismiss(),_(c.resetinfoestudiantesifas())}),n()(),a(4,"div",77)(5,"form",78),g(6,sa,7,1,"div",79),a(7,"div",19)(8,"div",80)(9,"label",81),l(10,"COMPROBANTE DE PAGO EN DIGITAL"),n(),g(11,oa,2,1,"div",82)(12,ra,4,1,"ng-template",null,8,P),a(14,"div",83)(15,"button",84),h("click",function(){p(e);let s=u();return _(s.abrirVinculacionCelular())}),l(16," Vincular celular (QR) "),n(),a(17,"span",85),l(18),n(),a(19,"button",86),h("click",function(){p(e);let s=u();return _(s.iniciarCapturaFotoPagoPorCelular())}),l(20," Obtener Comprobante con celular "),n()()(),g(21,_a,11,4,"div",87),n(),a(22,"div",19)(23,"div",88)(24,"select",89)(25,"option",90),l(26,"Seleccione una opci\xF3n"),n(),g(27,fa,2,3,"option",91),n(),a(28,"label"),l(29,"Categoria"),n(),a(30,"div",92),l(31,"Este campo es obligatorio*"),n()(),a(32,"div",88),x(33,"input",93),a(34,"label"),l(35,"Fecha de Inscripci\xF3n"),n(),a(36,"div",92),l(37,"Este campo es obligatorio*"),n()(),a(38,"div",88)(39,"select",94)(40,"option",90),l(41,"Seleccione una opci\xF3n"),n(),g(42,ga,2,3,"option",91),n(),a(43,"label"),l(44,"Verificacion"),n(),a(45,"div",92),l(46,"Este campo es obligatorio*"),n()()(),a(47,"div",19)(48,"div",95)(49,"select",96)(50,"option",90),l(51,"Seleccione una opci\xF3n"),n(),g(52,ha,2,3,"option",91),n(),a(53,"label"),l(54,"Turno"),n(),a(55,"div",92),l(56,"Este campo es obligatorio*"),n()(),a(57,"div",97)(58,"select",98)(59,"option",90),l(60,"Seleccione una opci\xF3n"),n(),g(61,xa,2,3,"option",91),n(),a(62,"label"),l(63,"Curso Solicitado"),n(),a(64,"div",92),l(65,"Este campo es obligatorio*"),n()(),a(66,"div",95)(67,"input",99),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newinfoestudiantesifas,"Paralelo_Solicitado"))}),n(),a(68,"label"),l(69,"Paralelo Solicitado"),n(),a(70,"div",92),l(71,"Este campo es obligatorio*"),n()(),a(72,"div",97)(73,"input",100),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newinfoestudiantesifas,"Matricula"))}),n(),a(74,"label"),l(75,"Matricula"),n(),a(76,"div",92),l(77,"Este campo es obligatorio*"),n()(),a(78,"div",101)(79,"button",102),h("click",function(){p(e);let s=u();return _(s.newinfoestudiantesifas.patchValue({Matricula:s.generarMatricula()}))}),a(80,"span",22),x(81,"ng-lottie",23),n(),a(82,"span"),l(83,"Generar"),n(),x(84,"span",24),n()()(),a(85,"div",19)(86,"div",103)(87,"input",104),h("focus",function(){p(e);let s=u();return _(s.mostrarListaDocAdmin=!0)}),n(),a(88,"label"),l(89,"Docente (Especialidad)"),n(),g(90,ba,2,1,"div",105),n(),a(91,"div",103)(92,"input",104),h("focus",function(){p(e);let s=u();return _(s.mostrarListaDocPC=!0)}),n(),a(93,"label"),l(94,"Docente Pr\xE1ctica de Conjuntos (funciona si se usa Modo Pr\xE1ctica de Conjuntos)"),n(),g(95,ya,2,1,"div",105),n(),a(96,"div",103)(97,"input",104),h("focus",function(){p(e);let s=u();return _(s.mostrarListaDocOtros=!0)}),n(),a(98,"label"),l(99,"Docente (Otros)"),n(),g(100,Aa,2,1,"div",105),n()(),a(101,"div",106)(102,"div",107)(103,"select",108)(104,"option",90),l(105,"Seleccione una opci\xF3n"),n(),g(106,Ta,2,3,"option",91),n(),a(107,"label"),l(108,"Instrumento Musical"),n(),a(109,"div",92),l(110,"Este campo es obligatorio*"),n()(),a(111,"div",107)(112,"select",109)(113,"option",90),l(114,"Seleccione una opci\xF3n"),n(),g(115,Va,2,3,"option",91),n(),a(116,"label"),l(117,"Instrumento Musical Secundario"),n(),a(118,"div",92),l(119,"Este campo es obligatorio*"),n()()(),a(120,"div",110)(121,"label"),l(122,"Observacion"),n(),x(123,"quill-editor",111),a(124,"div",92),l(125,"Este campo es obligatorio*"),n()(),a(126,"div",110)(127,"label"),l(128,"Anotaciones"),n(),x(129,"quill-editor",112),a(130,"div",92),l(131,"Este campo es obligatorio*"),n()(),a(132,"div",110)(133,"label"),l(134,"Notas"),n(),x(135,"quill-editor",113),a(136,"div",92),l(137,"Este campo es obligatorio*"),n()()()(),a(138,"div",114),g(139,Pa,2,1,"div",115),a(140,"div",116),g(141,Fa,6,1,"button",117),n(),a(142,"div",118),g(143,Oa,2,1,"button",119)(144,ka,6,2,"button",120),n()()}if(o&2){let e,i,s=N(13),c=u();r(2),I("",(e=c.newinfoestudiantesifas.get("id"))!=null&&e.value?"Modificar":"Registrar"," Inscripci\xF3n"),r(3),d("formGroup",c.newinfoestudiantesifas),r(),d("ngIf",c.esSuperAdmin),r(5),d("ngIf",(i=c.newinfoestudiantesifas.get("FotoPago"))==null?null:i.value)("ngIfElse",s),r(4),d("disabled",c.isCapturandoFotoPago),r(2),d("ngClass",Ve(42,Dt,c.pairingStatus==="LINKED",!c.pairingStatus||c.pairingStatus==="PENDING",c.pairingStatus==="EXPIRED"||c.pairingStatus==="REVOKED")),r(),I(" ",c.pairingStatus==="LINKED"?"VINCULADO":c.pairingStatus||"NO VINCULADO"," "),r(),d("disabled",c.isCapturandoFotoPago),r(2),d("ngIf",!c.estudianteId),r(3),d("ngClass",c.ValidacioninfoestudiantesifasxElemento("Categoria")),r(3),d("ngForOf",c.categoriaOptions),r(6),d("ngClass",c.ValidacioninfoestudiantesifasxElemento("FechInsc")),r(6),d("ngClass",c.ValidacioninfoestudiantesifasxElemento("Verificacion")),r(3),d("ngForOf",c.VerificacionInscripciones),r(7),d("ngClass",c.ValidacioninfoestudiantesifasxElemento("Turno")),r(3),d("ngForOf",c.turnoOptions),r(6),d("ngClass",c.ValidacioninfoestudiantesifasxElemento("Curso_Solicitado")),r(3),d("ngForOf",c.cursoOptions),r(6),d("ngClass",c.ValidacioninfoestudiantesifasxElemento("Paralelo_Solicitado")),r(6),d("ngClass",c.ValidacioninfoestudiantesifasxElemento("Matricula")),r(8),d("options",c._tools.optionsautocompletar),r(6),d("formControl",c.docAdminInput),r(3),d("ngIf",c.mostrarListaDocAdmin&&c.docAdminInput.value),r(2),d("formControl",c.docPCInput),r(3),d("ngIf",c.mostrarListaDocPC&&c.docPCInput.value),r(2),d("formControl",c.docOtrosInput),r(3),d("ngIf",c.mostrarListaDocOtros&&c.docOtrosInput.value),r(3),d("ngClass",c.ValidacioninfoestudiantesifasxElemento("InstrumentoMusical")),r(3),d("ngForOf",c.InstrumentoMusicalOptions),r(6),d("ngClass",c.ValidacioninfoestudiantesifasxElemento("InstrumentoMusicalSecundario")),r(3),d("ngForOf",c.InstrumentoMusicalSecundarioOptions),r(8),d("modules",c.modulesQuillEdicion)("ngClass",c.ValidacioninfoestudiantesifasxElemento("Observacion")),r(6),d("modules",c.modulesQuillEdicion)("ngClass",c.ValidacioninfoestudiantesifasxElemento("Anotaciones")),r(6),d("modules",c.modulesQuillEdicion)("ngClass",c.ValidacioninfoestudiantesifasxElemento("Notas")),r(4),d("ngIf",!c.newinfoestudiantesifas.get("id").value),r(2),d("ngIf",!c.AnimacionCargabtnModalinfoestudiantesifas),r(2),d("ngIf",c.AnimacionCargabtnModalinfoestudiantesifas),r(),d("ngIf",!c.AnimacionCargabtnModalinfoestudiantesifas)}}function Da(o,t){if(o&1&&(a(0,"div"),x(1,"img",195),n()),o&2){let e,i=u(2);r(),d("src",i._tools.ruta+((e=i.newestudiantesifas.get("Foto"))==null?null:e.value),F)}}function Ra(o,t){o&1&&(a(0,"div",61),l(1,"SIN FOTO DE PERFIL"),n())}function La(o,t){if(o&1&&(a(0,"div",196)(1,"div",197)(2,"div",198),l(3),n()()()),o&2){let e=u(2);r(2),X("width",e.uploadProgressFoto,"%"),r(),I(" ",e.uploadProgressFoto,"% ")}}function Ba(o,t){o&1&&(a(0,"div",199),l(1," Este campo es obligatorio* "),n())}function ja(o,t){if(o&1&&(a(0,"option",144),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function $a(o,t){if(o&1&&(a(0,"option",144),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function Ua(o,t){if(o&1){let e=b();a(0,"button",200),h("click",function(){let s;p(e);let c=u(2);return _(c.newestudiantesifas.patchValue({Usuario:((s=c.newestudiantesifas.get("Ap_Paterno"))==null?null:s.value.charAt(0))+((s=c.newestudiantesifas.get("Ap_Materno"))==null?null:s.value.charAt(0))+((s=c.newestudiantesifas.get("Nombre"))==null?null:s.value.charAt(0))+((s=c.newestudiantesifas.get("CI"))==null?null:s.value)+"EST"}))}),x(1,"ng-lottie",201),n()}if(o&2){let e=u(2);r(),d("options",e._tools.optionstripleengranaje)}}function za(o,t){o&1&&(a(0,"div",202),l(1," Este campo es obligatorio* "),n())}function Ga(o,t){if(o&1){let e=b();a(0,"button",203),h("click",function(){p(e);let s=u(2);return _(s.mostrarContrasenia=!s.mostrarContrasenia)}),x(1,"ng-lottie",201),n()}if(o&2){let e=u(2);r(),d("options",e._tools.optionseye)}}function qa(o,t){o&1&&(a(0,"div",202),l(1," Este campo es obligatorio* "),n())}function Ha(o,t){if(o&1&&(a(0,"option",144),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function Qa(o,t){if(o&1&&(a(0,"option",144),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function Wa(o,t){if(o&1&&(a(0,"option",144),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function Ka(o,t){if(o&1&&(a(0,"option",144),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function Xa(o,t){if(o&1&&(a(0,"option",144),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function Ya(o,t){if(o&1&&(a(0,"option",144),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function Za(o,t){if(o&1){let e=b();a(0,"button",151),h("click",function(){p(e);let s=u(3);return _(s.AutoCompletarLastestudiantesifas())}),a(1,"span",22),x(2,"ng-lottie",23),n(),a(3,"span"),l(4,"AUTO COMPLETAR "),n(),x(5,"span",24),n()}if(o&2){let e=u(3);r(2),d("options",e._tools.optionsautocompletar)}}function Ja(o,t){if(o&1&&(a(0,"div",149),g(1,Za,6,1,"button",150),n()),o&2){let e=u(2);r(),d("ngIf",!e.AnimacionCargabtnModalestudiantesifas)}}function es(o,t){if(o&1){let e=b();a(0,"button",152),h("click",function(){p(e);let s=u().$implicit,c=u();return s.dismiss(),_(c.resetestudiantesifas())}),a(1,"span",22),x(2,"ng-lottie",23),n(),a(3,"span"),l(4,"CANCELAR"),n(),x(5,"span",24),n()}if(o&2){let e=u(2);r(2),d("options",e._tools.optionscancelar)}}function ts(o,t){if(o&1){let e=b();a(0,"button",153),h("click",function(){p(e);let s=u(2);return _(s.AgregarModificarestudiantesifas())}),x(1,"span",154),n()}o&2&&d("disabled",!0)}function is(o,t){if(o&1){let e=b();a(0,"button",204),h("click",function(){p(e);let s=u(2);return _(s.AgregarModificarestudiantesifas())}),a(1,"span",22),x(2,"ng-lottie",23),n(),a(3,"span"),l(4),n(),x(5,"span",24),n()}if(o&2){let e,i,s=u(2);d("disabled",s.isUploadingFoto),r(2),d("options",(e=s.newestudiantesifas.get("id"))!=null&&e.value?s._tools.optionsEditar:s._tools.optionsAdicionar),r(2),v((i=s.newestudiantesifas.get("id"))!=null&&i.value?"MODIFICAR":"REGISTRAR")}}function ns(o,t){if(o&1){let e=b();a(0,"div",74)(1,"h4",75),l(2),n(),a(3,"button",76),h("click",function(){let s=p(e).$implicit,c=u();return s.dismiss(),_(c.resetestudiantesifas())}),n()(),a(4,"div",77)(5,"form",78)(6,"div",19)(7,"div",156)(8,"label",157),l(9,"Foto actual"),n(),g(10,Da,2,1,"div",82)(11,Ra,2,0,"ng-template",null,10,P),n(),a(13,"div",156)(14,"label",157),l(15,"SUBIR FOTO DE PERFIL (1 archivo)"),n(),a(16,"div",158),h("dragover",function(s){p(e);let c=u();return _(c.onFotoDragOver(s))})("dragleave",function(s){p(e);let c=u();return _(c.onFotoDragLeave(s))})("drop",function(s){p(e);let c=u();return _(c.onFotoDrop(s))})("click",function(){p(e);let s=N(21),c=u();return _(c.abrirSelectorFoto(s))}),a(17,"div",61),l(18,"Arrastra y suelta aqu\xED, o clic para seleccionar archivo"),n(),g(19,La,4,3,"div",159),n(),a(20,"input",160,11),h("change",function(s){p(e);let c=u();return _(c.onFotoFileSelected(s))}),n(),a(22,"div",83)(23,"button",84),h("click",function(){p(e);let s=u();return _(s.abrirVinculacionCelular())}),l(24," Vincular celular (QR) "),n(),a(25,"span",85),l(26),n(),a(27,"button",86),h("click",function(){p(e);let s=u();return _(s.iniciarCapturaFotoPorCelular())}),l(28," Tomar foto con celular "),n()(),g(29,Ba,2,0,"div",161),n()(),a(30,"div",19)(31,"div",97)(32,"input",162),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"Ap_Paterno"))}),n(),a(33,"label"),l(34,"Apellido Paterno"),n(),a(35,"div",92),l(36,"Este campo es obligatorio*"),n()(),a(37,"div",97)(38,"input",163),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"Ap_Materno"))}),n(),a(39,"label"),l(40,"Apellido Materno"),n(),a(41,"div",92),l(42,"Este campo es obligatorio*"),n()(),a(43,"div",107)(44,"input",164),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"Nombre"))}),n(),a(45,"label"),l(46,"Nombres"),n(),a(47,"div",92),l(48,"Este campo es obligatorio*"),n()()(),a(49,"div",19)(50,"div",97)(51,"input",165),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"CI"))}),n(),a(52,"label"),l(53,"C\xE9dula de Identidad"),n(),a(54,"div",92),l(55,"Este campo es obligatorio*"),n()(),a(56,"div",95)(57,"select",166)(58,"option",90),l(59,"Seleccione una opci\xF3n"),n(),g(60,ja,2,3,"option",91),n(),a(61,"label"),l(62,"Expedido"),n(),a(63,"div",92),l(64,"Este campo es obligatorio*"),n()(),a(65,"div",95)(66,"select",167)(67,"option",90),l(68,"Seleccione una opci\xF3n"),n(),g(69,$a,2,3,"option",91),n(),a(70,"label"),l(71,"Sexo"),n(),a(72,"div",92),l(73,"Este campo es obligatorio*"),n()(),a(74,"div",97)(75,"input",168),h("change",function(s){let c;p(e);let m=u();return _((c=m.newestudiantesifas.get("Edad"))==null?null:c.setValue(m._tools.CalcularEdad(s.target.value)))}),n(),a(76,"label"),l(77,"Fecha de Nacimiento"),n(),a(78,"div",92),l(79,"Este campo es obligatorio*"),n()(),a(80,"div",95),x(81,"input",169),a(82,"label"),l(83,"Edad"),n(),a(84,"div",92),l(85,"Este campo es obligatorio*"),n()()(),a(86,"div",19)(87,"div",97)(88,"input",170),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"Celular"))}),n(),a(89,"label"),l(90,"Celular"),n(),a(91,"div",92),l(92,"Este campo es obligatorio*"),n()(),a(93,"div",171)(94,"input",172),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"Direccion"))}),n(),a(95,"label"),l(96,"Direcci\xF3n"),n(),a(97,"div",92),l(98,"Este campo es obligatorio*"),n()(),a(99,"div",88),x(100,"input",173),a(101,"label"),l(102,"Correo"),n(),a(103,"div",92),l(104,"Este campo es obligatorio*"),n()()(),a(105,"div",19)(106,"div",174)(107,"div",175)(108,"div",27)(109,"input",176),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"Usuario"))}),n(),a(110,"label"),l(111,"Usuario"),n()(),g(112,Ua,2,1,"button",177),n(),g(113,za,2,0,"div",178),n(),a(114,"div",174)(115,"div",175)(116,"div",27),x(117,"input",179),a(118,"label"),l(119,"Contrase\xF1a"),n()(),g(120,Ga,2,1,"button",180),n(),g(121,qa,2,0,"div",178),n(),a(122,"div",88)(123,"select",181)(124,"option",90),l(125,"Seleccione una opci\xF3n"),n(),g(126,Ha,2,3,"option",91),n(),a(127,"label"),l(128,"Estado"),n(),a(129,"div",92),l(130,"Este campo es obligatorio*"),n()()(),x(131,"hr"),a(132,"div",19)(133,"div",88)(134,"input",182),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"Nombre_Padre"))}),n(),a(135,"label"),l(136,"Nombre Padre"),n(),a(137,"div",92),l(138,"Este campo es obligatorio*"),n()(),a(139,"div",97)(140,"select",183)(141,"option",90),l(142,"Seleccione una opci\xF3n"),n(),g(143,Qa,2,3,"option",91),n(),a(144,"label"),l(145,"Ocupaci\xF3n del Padre"),n(),a(146,"div",92),l(147,"Este campo es obligatorio*"),n()(),a(148,"div",88)(149,"input",184),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"NumCelP"))}),n(),a(150,"label"),l(151,"N\xFAmero Celular del Padre"),n(),a(152,"div",92),l(153,"Este campo es obligatorio*"),n()()(),a(154,"div",19)(155,"div",88)(156,"input",185),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"Nombre_Madre"))}),n(),a(157,"label"),l(158,"Nombre Madre"),n(),a(159,"div",92),l(160,"Este campo es obligatorio*"),n()(),a(161,"div",97)(162,"select",186)(163,"option",90),l(164,"Seleccione una opci\xF3n"),n(),g(165,Wa,2,3,"option",91),n(),a(166,"label"),l(167,"Ocupaci\xF3n de la Madre"),n(),a(168,"div",92),l(169,"Este campo es obligatorio*"),n()(),a(170,"div",88)(171,"input",187),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"NumCelM"))}),n(),a(172,"label"),l(173,"N\xFAmero Celular de la Madre"),n(),a(174,"div",92),l(175,"Este campo es obligatorio*"),n()()(),a(176,"div",19)(177,"div",97)(178,"input",188),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"NColegio"))}),n(),a(179,"label"),l(180,"Nombre Colegio"),n(),a(181,"div",92),l(182,"Este campo es obligatorio*"),n()(),a(183,"div",97)(184,"select",189)(185,"option",90),l(186,"Seleccione una opci\xF3n"),n(),g(187,Ka,2,3,"option",91),n(),a(188,"label"),l(189,"Tipo Colegio"),n(),a(190,"div",92),l(191,"Este campo es obligatorio*"),n()(),a(192,"div",97)(193,"select",190)(194,"option",90),l(195,"Seleccione una opci\xF3n"),n(),g(196,Xa,2,3,"option",91),n(),a(197,"label"),l(198,"Nivel del Colegio"),n(),a(199,"div",92),l(200,"Este campo es obligatorio*"),n()(),a(201,"div",97)(202,"select",191)(203,"option",90),l(204,"Seleccione una opci\xF3n"),n(),g(205,Ya,2,3,"option",91),n(),a(206,"label"),l(207,"Grado en Colegio"),n(),a(208,"div",92),l(209,"Este campo es obligatorio*"),n()()(),a(210,"div",192)(211,"label"),l(212,"Informaci\xF3n Compartida IFAS"),n(),x(213,"quill-editor",193),a(214,"div",92),l(215,"Este campo es obligatorio*"),n()()()(),a(216,"div",114),g(217,Ja,2,1,"div",115),a(218,"div",116),g(219,es,6,1,"button",117),n(),a(220,"div",118),g(221,ts,2,1,"button",119)(222,is,6,3,"button",194),n()()}if(o&2){let e,i,s,c,m,E=N(12),f=u();r(2),I("",(e=f.newestudiantesifas.get("id"))!=null&&e.value?"Modificar":"Registrar"," Informaci\xF3n Personal Estudiante"),r(3),d("formGroup",f.newestudiantesifas),r(5),d("ngIf",(i=f.newestudiantesifas.get("Foto"))==null?null:i.value)("ngIfElse",E),r(6),G("border-primary",f.isDraggingFoto)("bg-light",f.isDraggingFoto),r(3),d("ngIf",f.isUploadingFoto),r(4),d("disabled",f.isUploadingFoto),r(2),d("ngClass",Ve(57,Dt,f.pairingStatus==="LINKED",!f.pairingStatus||f.pairingStatus==="PENDING",f.pairingStatus==="EXPIRED"||f.pairingStatus==="REVOKED")),r(),I(" ",f.pairingStatus==="LINKED"?"VINCULADO":f.pairingStatus||"NO VINCULADO"," "),r(),d("disabled",f.isUploadingFoto),r(2),d("ngIf",((s=f.newestudiantesifas.get("Foto"))==null?null:s.touched)&&((s=f.newestudiantesifas.get("Foto"))==null?null:s.invalid)),r(3),d("ngClass",f.ValidacionestudiantesifasxElemento("Ap_Paterno")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Ap_Materno")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Nombre")),r(7),d("ngClass",f.ValidacionestudiantesifasxElemento("CI")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Expedido")),r(3),d("ngForOf",f.expedidoOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Sexo")),r(3),d("ngForOf",f.sexoOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("FechaNac")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Edad")),r(7),d("ngClass",f.ValidacionestudiantesifasxElemento("Celular")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Direccion")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Correo")),r(9),d("ngClass",f.ValidacionestudiantesifasxElemento("Usuario")),r(3),d("ngIf",!f.AnimacionCargabtnModalestudiantesifas),r(),d("ngIf",((c=f.newestudiantesifas.get("Usuario"))==null?null:c.touched)&&((c=f.newestudiantesifas.get("Usuario"))==null?null:c.invalid)),r(4),d("type",f.mostrarContrasenia?"text":"password")("ngClass",f.ValidacionestudiantesifasxElemento("Contrasenia")),r(3),d("ngIf",!f.AnimacionCargabtnModalestudiantesifas),r(),d("ngIf",((m=f.newestudiantesifas.get("Contrasenia"))==null?null:m.touched)&&((m=f.newestudiantesifas.get("Contrasenia"))==null?null:m.invalid)),r(2),d("ngClass",f.ValidacionestudiantesifasxElemento("Estado")),r(3),d("ngForOf",f.estadoOptions),r(8),d("ngClass",f.ValidacionestudiantesifasxElemento("Nombre_Padre")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("OcupacionP")),r(3),d("ngForOf",f.OcupacionOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("NumCelP")),r(7),d("ngClass",f.ValidacionestudiantesifasxElemento("Nombre_Madre")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("OcupacionM")),r(3),d("ngForOf",f.OcupacionOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("NumCelM")),r(7),d("ngClass",f.ValidacionestudiantesifasxElemento("NColegio")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("TipoColegio")),r(3),d("ngForOf",f.tipoColegioOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("CNivel")),r(3),d("ngForOf",f.nivelColegioOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("CGrado")),r(3),d("ngForOf",f.gradoColegioOptions),r(8),d("modules",f.modulesQuillEdicion)("ngClass",f.ValidacionestudiantesifasxElemento("InformacionCompartidaIFAS")),r(4),d("ngIf",!f.newestudiantesifas.get("id").value),r(2),d("ngIf",!f.AnimacionCargabtnModalestudiantesifas),r(2),d("ngIf",f.AnimacionCargabtnModalestudiantesifas),r(),d("ngIf",!f.AnimacionCargabtnModalestudiantesifas)}}function as(o,t){if(o&1&&(a(0,"div",209),x(1,"img",210),n()),o&2){let e=u(2);r(),d("src",e.pairingQrDataUrl,F)}}function ss(o,t){if(o&1&&(a(0,"div",207)(1,"a",211),l(2,"Abrir link en el celular"),n()()),o&2){let e=u(2);r(),d("href",e.pairingUrl,F)}}function os(o,t){if(o&1){let e=b();a(0,"div",74)(1,"h4",75),l(2,"Vincular celular"),n(),a(3,"button",76),h("click",function(){let s=p(e).$implicit;return _(s.dismiss())}),n()(),a(4,"div",77)(5,"div",205),l(6,"Escanea este QR una sola vez desde el celular."),n(),g(7,as,2,1,"div",206),a(8,"div",207)(9,"div",134),l(10,"Estado"),n(),a(11,"div",133),l(12),n()(),g(13,ss,3,1,"div",208),n()}if(o&2){let e=u();r(7),d("ngIf",e.pairingQrDataUrl),r(5),v(e.pairingStatus||"..."),r(),d("ngIf",e.pairingUrl)}}function rs(o,t){if(o&1){let e=b();a(0,"div",74)(1,"h4",75),l(2,"Esperando foto..."),n(),a(3,"button",76),h("click",function(){let s=p(e).$implicit;return _(s.dismiss())}),n()(),a(4,"div",77)(5,"div",61),l(6,"En el celular entra a \u201CCaptura desde celular\u201D (ya vinculado) y toma la foto del estudiante."),n(),a(7,"div",207)(8,"div",134),l(9,"Estado"),n(),a(10,"div",133),l(11),n()(),a(12,"div",212)(13,"button",213),h("click",function(){let s=p(e).$implicit;return u().cancelarEsperaCapturaFotoPerfil(),_(s.close())}),l(14,"Cancelar espera"),n()()()}if(o&2){let e=u();r(11),v(e.capturaStatusFotoPerfil||"PENDING")}}function ls(o,t){if(o&1){let e=b();a(0,"div",74)(1,"h4",75),l(2,"Esperando FotoPago..."),n(),a(3,"button",76),h("click",function(){let s=p(e).$implicit;return _(s.dismiss())}),n()(),a(4,"div",77)(5,"div",61),l(6,"En el celular entra a \u201CCaptura desde celular\u201D (ya vinculado) y toma la foto del comprobante."),n(),a(7,"div",207)(8,"div",134),l(9,"Estado"),n(),a(10,"div",133),l(11),n()(),a(12,"div",212)(13,"button",213),h("click",function(){let s=p(e).$implicit;return u().cancelarEsperaCaptura(),_(s.close())}),l(14,"Cancelar espera"),n()()()}if(o&2){let e=u();r(11),v(e.capturaStatus||"PENDING")}}function cs(o,t){if(o&1&&(a(0,"div",222)(1,"div",223),l(2,"Total:"),n(),a(3,"div",224),l(4),n()()),o&2){let e=u(2);r(4),v(e.estadisticasInscripciones==null||e.estadisticasInscripciones.meta==null?null:e.estadisticasInscripciones.meta.total)}}function ds(o,t){o&1&&(a(0,"div",207),l(1," Cargando estad\xEDsticas... "),n())}function us(o,t){o&1&&(a(0,"div",207),l(1," No hay estad\xEDsticas para mostrar. "),n())}function ms(o,t){o&1&&(a(0,"th"),l(1,"Edades"),n())}function ps(o,t){o&1&&(a(0,"th"),l(1,"Instrumentos"),n())}function _s(o,t){if(o&1&&(a(0,"td"),l(1),n()),o&2){let e=u().$implicit,i=u(3);r(),v(i.resumenEdades(e.edades))}}function fs(o,t){if(o&1&&(a(0,"td"),l(1),n()),o&2){let e=u().$implicit,i=u(3);r(),v(i.resumenInstrumentos(e.instrumentos))}}function gs(o,t){if(o&1&&(a(0,"tr")(1,"td"),l(2),n(),a(3,"td"),l(4),n(),a(5,"td",226),l(6),n(),a(7,"td",226),l(8),n(),a(9,"td",226),l(10),n(),a(11,"td",226),l(12),n(),g(13,_s,2,1,"td",46)(14,fs,2,1,"td",46),n()),o&2){let e=t.$implicit,i=u(3);r(2),v(e.curso),r(2),v(e.tipo),r(2),v(e.total),r(2),v(i.getSexoCount(e.sexo,"MASCULINO")),r(2),v(i.getSexoCount(e.sexo,"FEMENINO")),r(2),v(e.total-i.getSexoCount(e.sexo,"MASCULINO")-i.getSexoCount(e.sexo,"FEMENINO")),r(),d("ngIf",i.hayEdades(i.estadisticasInscripciones==null?null:i.estadisticasInscripciones.por_curso)),r(),d("ngIf",i.hayInstrumentos(i.estadisticasInscripciones==null?null:i.estadisticasInscripciones.por_curso))}}function hs(o,t){o&1&&(a(0,"th"),l(1,"Edades"),n())}function xs(o,t){o&1&&(a(0,"th"),l(1,"Instrumentos"),n())}function vs(o,t){if(o&1&&(a(0,"td"),l(1),n()),o&2){let e=u().$implicit,i=u(3);r(),v(i.resumenEdades(e.edades))}}function Es(o,t){if(o&1&&(a(0,"td"),l(1),n()),o&2){let e=u().$implicit,i=u(3);r(),v(i.resumenInstrumentos(e.instrumentos))}}function bs(o,t){if(o&1&&(a(0,"tr")(1,"td"),l(2),n(),a(3,"td"),l(4),n(),a(5,"td"),l(6),n(),a(7,"td",226),l(8),n(),a(9,"td",226),l(10),n(),a(11,"td",226),l(12),n(),a(13,"td",226),l(14),n(),g(15,vs,2,1,"td",46)(16,Es,2,1,"td",46),n()),o&2){let e=t.$implicit,i=u(3);r(2),v(e.curso),r(2),v(e.paralelo),r(2),v(e.tipo),r(2),v(e.total),r(2),v(i.getSexoCount(e.sexo,"MASCULINO")),r(2),v(i.getSexoCount(e.sexo,"FEMENINO")),r(2),v(e.total-i.getSexoCount(e.sexo,"MASCULINO")-i.getSexoCount(e.sexo,"FEMENINO")),r(),d("ngIf",i.hayEdades(i.estadisticasInscripciones==null?null:i.estadisticasInscripciones.por_curso_paralelo)),r(),d("ngIf",i.hayInstrumentos(i.estadisticasInscripciones==null?null:i.estadisticasInscripciones.por_curso_paralelo))}}function Cs(o,t){if(o&1&&(a(0,"div",207)(1,"h6"),l(2,"Por Curso_Solicitado"),n(),a(3,"div",40)(4,"table",225)(5,"thead")(6,"tr")(7,"th"),l(8,"Curso"),n(),a(9,"th"),l(10,"Tipo"),n(),a(11,"th",226),l(12,"Total"),n(),a(13,"th",226),l(14,"Varones"),n(),a(15,"th",226),l(16,"Mujeres"),n(),a(17,"th",226),l(18,"Otros/Sin dato"),n(),g(19,ms,2,0,"th",46)(20,ps,2,0,"th",46),n()(),a(21,"tbody"),g(22,gs,15,8,"tr",227),n()()(),a(23,"h6",39),l(24,"Por Curso_Solicitado + Paralelo_Solicitado"),n(),a(25,"div",228),l(26,"(Solo se muestra cuando existe Paralelo_Solicitado)"),n(),a(27,"div",40)(28,"table",225)(29,"thead")(30,"tr")(31,"th"),l(32,"Curso"),n(),a(33,"th"),l(34,"Paralelo"),n(),a(35,"th"),l(36,"Tipo"),n(),a(37,"th",226),l(38,"Total"),n(),a(39,"th",226),l(40,"Varones"),n(),a(41,"th",226),l(42,"Mujeres"),n(),a(43,"th",226),l(44,"Otros/Sin dato"),n(),g(45,hs,2,0,"th",46)(46,xs,2,0,"th",46),n()(),a(47,"tbody"),g(48,bs,17,9,"tr",227),n()()()()),o&2){let e=u(2);r(19),d("ngIf",e.hayEdades(e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso)),r(),d("ngIf",e.hayInstrumentos(e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso)),r(2),d("ngForOf",e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso),r(23),d("ngIf",e.hayEdades(e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso_paralelo)),r(),d("ngIf",e.hayInstrumentos(e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso_paralelo)),r(2),d("ngForOf",e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.por_curso_paralelo)}}function Ss(o,t){if(o&1){let e=b();a(0,"div",74)(1,"h5",75),l(2,"Componente Estadisticas de Inscripciones"),n(),a(3,"button",214),h("click",function(){let s=p(e).$implicit;return _(s.dismiss())}),n()(),a(4,"div",77)(5,"div",215)(6,"div",216)(7,"label",157),l(8,"Modo"),n(),a(9,"select",28),L("ngModelChange",function(s){p(e);let c=u();return R(c.estadisticasModo,s)||(c.estadisticasModo=s),_(s)}),h("change",function(){p(e);let s=u();return _(s.cargarEstadisticasInscripciones())}),a(10,"option",217),l(11,"POR DEFECTO (seg\xFAn check SIN ASIGNACIONES)"),n(),a(12,"option",218),l(13,"SOLO ASIGNADOS"),n(),a(14,"option",219),l(15,"SOLO SIN ASIGNAR"),n()()(),a(16,"div",216)(17,"button",220),h("click",function(){p(e);let s=u();return _(s.cargarEstadisticasInscripciones())}),l(18," ACTUALIZAR "),n()(),g(19,cs,5,1,"div",221),n(),g(20,ds,2,0,"div",208)(21,us,2,0,"div",208)(22,Cs,49,6,"div",208),n()}if(o&2){let e=u();r(9),D("ngModel",e.estadisticasModo),r(10),d("ngIf",e.estadisticasInscripciones==null?null:e.estadisticasInscripciones.meta),r(),d("ngIf",e.isLoadingEstadisticas),r(),d("ngIf",!e.isLoadingEstadisticas&&!e.estadisticasInscripciones),r(),d("ngIf",!e.isLoadingEstadisticas&&e.estadisticasInscripciones)}}function ys(o,t){if(o&1){let e=b();a(0,"div",74)(1,"h5",75),l(2,"Componente Asignacion de estudiante"),n(),a(3,"button",214),h("click",function(){let s=p(e).$implicit;return _(s.dismiss())}),n()(),a(4,"div",77),x(5,"app-asignadormateriasestudiantes",229),n()}if(o&2){let e=u();r(5),d("modo",e.asignadorModo)("estudianteId",e.asignadorEstudianteId)("nombreEstudiante",e.asignadorNombreEstudiante)("fotoEstudiante",e.asignadorFotoEstudiante)("sexoEstudiante",e.asignadorSexoEstudiante)("preferInfoId",e.asignadorPreferInfoId)}}function Is(o,t){if(o&1){let e=b();a(0,"div",74)(1,"h5",75),l(2,"Componente Registro de pagos estudiantes de carrera"),n(),a(3,"button",214),h("click",function(){let s=p(e).$implicit;return _(s.dismiss())}),n()(),a(4,"div",77),x(5,"app-sistemapagoslcch",230),n()}if(o&2){let e=u();r(5),d("modo",e.pagosModo)}}var ye=class ye{constructor(t,e,i,s,c,m,E,f,C,S,A){this._infoest=t;this._est=e;this._anios=i;this._controles=s;this._tools=c;this._auth=m;this._planteldoc=E;this._capture=f;this._pairing=C;this.router=S;this.sanitizer=A;this.modulesQuillEdicion={toolbar:[["bold","italic","underline","strike"],[{align:[]}],[{size:["small",!1,"large"]}],[{color:[]},{background:[]}],[{font:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","video"],["clean"]]};this.modulesQuillShow={toolbar:!1};this.estudianteId=null;this.nombreEstudiante=null;this.fotoEstudiante=null;this.sexoEstudiante=null;this.modo=null;this.AnimacionCargabtnModalestudiantesifas=!1;this.mostrarContrasenia=!1;this.sexoOptions=[];this.expedidoOptions=[];this.estadoOptions=[];this.especialidadOptions=[];this.tipoColegioOptions=[];this.nivelColegioOptions=[];this.gradoColegioOptions=[];this.OcupacionOptions=[];this.capturaTokenFotoPerfil=null;this.capturaStatusFotoPerfil=null;this.capturaIntervalIdFotoPerfil=null;this.isDraggingFoto=!1;this.isUploadingFoto=!1;this.uploadProgressFoto=0;this.fotoAnteriorPath=null;this.fotoTempPath=null;this.pairingToken=null;this.pairingStatus=null;this.pairingUrl=null;this.pairingQrDataUrl=null;this.pairingIntervalId=null;this.capturaToken=null;this.capturaStatus=null;this.capturaIntervalId=null;this.isCapturandoFotoPago=!1;this.fotoPagoAnteriorPath=null;this.fotoPagoTempPath=null;this.esSuperAdmin=!1;this.plantelDocentes=[];this.docAdminInput=new y("");this.docPCInput=new y("");this.docOtrosInput=new y("");this.mostrarListaDocAdmin=!1;this.mostrarListaDocPC=!1;this.mostrarListaDocOtros=!1;this.docentesFiltradosAdmin=[];this.docentesFiltradosPC=[];this.docentesFiltradosOtros=[];this.categoriaOptions=[];this.turnoOptions=[];this.cursoOptions=[];this.InstrumentoMusicalOptions=[];this.InstrumentoMusicalSecundarioOptions=[];this.VerificacionInscripciones=[];this.infoestudiantesifas=[];this.autoAbrioNuevoPorVacio=!1;this.paginainfoestudiantesifas=1;this.isLoadinginfoestudiantesifas=!1;this.AnimacionCargabtnModalinfoestudiantesifas=!1;this.filtertxtinfoestudiantesifas="";this.searchAplicado="";this.anios=[];this.selectedAnioId="";this.incluirSinAsignar=!0;this.estadisticasModo="default";this.isLoadingEstadisticas=!1;this.estadisticasInscripciones=null;this.asignadorModo="general";this.asignadorEstudianteId=null;this.asignadorNombreEstudiante=null;this.asignadorFotoEstudiante=null;this.asignadorSexoEstudiante=null;this.asignadorPreferInfoId=null;this.sortByColumn="FechInsc";this.sortDir="desc";this.estudianteInput=new y("");this.mostrarListaEstudiantes=!1;this.estudiantesFiltrados=[];this.isBuscandoEstudiante=!1;this.estudianteSeleccionado=null;this.busquedaEstudiantesEjecutada=!1;this.estudiantesPage=1;this.estudiantesPageSize=10;this.collectionSizeinfoestudiantesifas=0;this.pageSizeinfoestudiantesifas=10;this.pageSizeOptionsinfoestudiantesifas=[5,10,20,50];this.sortColumnsinfoestudiantesifas=[];this.menuStateinfoestudiantesifas$=this._tools.state$;this.newinfoestudiantesifas=this._infoest.createFormGroupinfoestudiantesifas(),this.newinfoestudiantesifasAnteriorAccion=this._infoest.createFormGroupinfoestudiantesifas(),this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this.newestudiantesifasAnteriorAccion=this._est.createFormGroupestudiantesifas()}ngOnInit(){console.log("foto",this.fotoEstudiante),this.cargarAnios(),this.cargarOptionsDesdeControles(),this.cargarOptionsEstudiantesDesdeControles(),this._auth.revisarSiEsSuperAdmin().subscribe(t=>{this.esSuperAdmin=t;let e=this.newinfoestudiantesifas.get("instituciones_id");e&&(t?e.setValidators([k.required]):e.clearValidators(),e.updateValueAndValidity({emitEvent:!1}))}),this.setupBuscadoresPlantel(),this.cargarPlantelDocentes(),this.setupBuscadorEstudiantes(),this.cargarVinculacionDesdeStorage()}cargarOptionsEstudiantesDesdeControles(){let t=["SEXO","EXPEDIDO","ESTADO","ESPECIALIDAD","TIPO COLEGIO","GRADO DE COLEGIO","NIVEL EN COLEGIO","OCUPACIONES PADRES"];this._controles.ObtenerOptionsSelectPorCategorias(t).subscribe({next:e=>{this.sexoOptions=e?.SEXO||[],this.expedidoOptions=e?.EXPEDIDO||[],this.estadoOptions=e?.ESTADO||[],this.especialidadOptions=e?.ESPECIALIDAD||[],this.tipoColegioOptions=e?.["TIPO COLEGIO"]||[],this.nivelColegioOptions=e?.["NIVEL EN COLEGIO"]||[],this.gradoColegioOptions=e?.["GRADO DE COLEGIO"]||[],this.OcupacionOptions=e?.["OCUPACIONES PADRES"]||[]},error:()=>{this.sexoOptions=[],this.expedidoOptions=[],this.estadoOptions=[],this.especialidadOptions=[],this.tipoColegioOptions=[],this.nivelColegioOptions=[],this.gradoColegioOptions=[],this.OcupacionOptions=[]}})}abrirModalRegistroEstudianteCompleto(t){this.limpiarFotoTemporalSiCorresponde(),this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!1,this.mostrarContrasenia=!1;let e=(t??"").toString().trim();e&&this.newestudiantesifas.patchValue({CI:e}),this.newestudiantesifas.get("Estado")?.value||this.newestudiantesifas.patchValue({Estado:"ACTIVO"}),this.modalRegistroEstudianteCompletoRef=this._tools.openModal(this.modalRegistroEstudianteCompleto,"xl")}resetestudiantesifas(){this.limpiarFotoTemporalSiCorresponde(),this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!1,this.mostrarContrasenia=!1,this.modalRegistroEstudianteCompletoRef&&this._tools.closeModal(this.modalRegistroEstudianteCompletoRef)}AutoCompletarLastestudiantesifas(){this.newestudiantesifas.setValue(this.newestudiantesifasAnteriorAccion.value),this.newestudiantesifas.patchValue({id:0})}ValidacionestudiantesifasxElemento(t){return this._tools.obtenerValidationClass(this.newestudiantesifas,t)}ValidacionTodoElementoestudiantesifas(){Object.values(this.newestudiantesifas.controls).forEach(t=>{t.markAsTouched(),t.markAsDirty()})}AgregarModificarestudiantesifas(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida de la foto");return}if(this.newestudiantesifas.invalid){this.ValidacionTodoElementoestudiantesifas(),this._tools.MostrarMensajeFrmIncompleto(),this.AnimacionCargabtnModalestudiantesifas=!1;return}if(this.AnimacionCargabtnModalestudiantesifas=!0,this._tools.MostrarMensajeLoading(),this.newestudiantesifasAnteriorAccion.setValue(this.newestudiantesifas.value),this.newestudiantesifas.controls.id?.value){this._tools.MensajeInformacion("Acci\xF3n no permitida","Desde inscripci\xF3n solo se registra (no se modifica).","info"),this.AnimacionCargabtnModalestudiantesifas=!1;return}this._est.Agregarestudiantesifas(this.newestudiantesifas.value).subscribe({next:e=>{let i=e?.data;this.fotoTempPath=null,this.fotoAnteriorPath=null,i?.id&&this.seleccionarEstudiante(i),this.AnimacionCargabtnModalestudiantesifas=!1,this._tools.MostrarMensajeSuccess(),this.resetestudiantesifas()},error:e=>{let i=e?.status,s=e?.error?.message;i===409?this._tools.MensajeInformacion("CI duplicado",s||"Ya existe un estudiante con ese CI.","warning"):this._tools.MostrarMensajeError(),this.AnimacionCargabtnModalestudiantesifas=!1}})}iniciarCapturaFotoPorCelular(){return O(this,null,function*(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida actual");return}if(!this.pairingToken||this.pairingStatus!=="LINKED"){this._tools.MostrarMensaje("info","Primero vincule el celular (QR)"),yield this.abrirVinculacionCelular();return}this._tools.MostrarMensajeLoading();let t=this.newestudiantesifas.get("id")?.value?Number(this.newestudiantesifas.get("id")?.value):null;this._pairing.solicitarCaptura(this.pairingToken,t,"Foto").subscribe({next:e=>{let i=e?.data?.token;if(!i){this._tools.MostrarMensajeError();return}this.capturaTokenFotoPerfil=i,this.capturaStatusFotoPerfil=e?.data?.status??"PENDING",this.modalEsperaFotoCelularRef=this._tools.openModal(this.modalEsperaFotoCelular,"md"),this.modalEsperaFotoCelularRef.result.finally(()=>{this.cancelarEsperaCapturaFotoPerfil(!0)}),this.iniciarPollingCapturaFotoPerfil(),this._tools.MostrarMensajeSuccess()},error:e=>{console.log("ERROR solicitando captura",e),this._tools.MostrarMensajeError()}})})}iniciarPollingCapturaFotoPerfil(){this.detenerPollingCapturaFotoPerfil(),this.capturaTokenFotoPerfil&&(this.capturaIntervalIdFotoPerfil=setInterval(()=>{this.capturaTokenFotoPerfil&&this._capture.estadoSesion(this.capturaTokenFotoPerfil).subscribe({next:t=>{let e=t?.data?.status,i=t?.data?.file_path;if(this.capturaStatusFotoPerfil=e??this.capturaStatusFotoPerfil,e==="UPLOADED"&&i){let s=this.fotoTempPath;this.newestudiantesifas.patchValue({Foto:i}),this.fotoTempPath=i,s&&s!==i&&s!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(s),this.isUploadingFoto=!1,this.uploadProgressFoto=0,this.detenerPollingCapturaFotoPerfil(),this.modalEsperaFotoCelularRef?.close(),this._tools.MostrarMensaje("success","Foto recibida desde el celular")}},error:()=>{}})},2e3))}detenerPollingCapturaFotoPerfil(){this.capturaIntervalIdFotoPerfil&&(clearInterval(this.capturaIntervalIdFotoPerfil),this.capturaIntervalIdFotoPerfil=null)}cancelarEsperaCapturaFotoPerfil(t=!1){let e=this.capturaStatusFotoPerfil;this.detenerPollingCapturaFotoPerfil(),this.capturaStatusFotoPerfil=null,this.capturaTokenFotoPerfil=null,this.pairingToken&&e!=="UPLOADED"&&this._pairing.cancelarCaptura(this.pairingToken).subscribe({next:()=>{t||this._tools.MostrarMensaje("info","Espera cancelada")},error:()=>{}})}abrirSelectorFoto(t){t.click()}onFotoDragOver(t){t.preventDefault(),this.isDraggingFoto=!0}onFotoDragLeave(t){t.preventDefault(),this.isDraggingFoto=!1}onFotoDrop(t){t.preventDefault(),this.isDraggingFoto=!1;let e=t.dataTransfer?.files;e&&this.handleFotoFiles(e)}onFotoFileSelected(t){let e=t.target,i=e.files;i&&this.handleFotoFiles(i),e.value=""}handleFotoFiles(t){let e=t.item(0);e&&(t.length>1&&this._tools.MostrarMensaje("warning","Solo se permite 1 archivo"),this.subirFoto(e))}subirFoto(t){this.isUploadingFoto=!0,this.uploadProgressFoto=0,this._tools.SubirArchivo(t,"Foto").subscribe({next:e=>{if(e.type===ue.UploadProgress&&e.total){this.uploadProgressFoto=Math.round(e.loaded/e.total*100);return}if(e.type===ue.Response){let s=e.body?.filePath;if(s){let c=this.fotoTempPath;this.newestudiantesifas.patchValue({Foto:s}),this.fotoTempPath=s,c&&c!==s&&c!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(c)}this.isUploadingFoto=!1}},error:e=>{console.error("Error subiendo foto",e),this.isUploadingFoto=!1,this.uploadProgressFoto=0,this._tools.MostrarMensajeError()}})}limpiarFotoTemporalSiCorresponde(){this.fotoTempPath&&this.fotoTempPath!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(this.fotoTempPath),this.fotoTempPath=null,this.fotoAnteriorPath=null,this.isDraggingFoto=!1,this.isUploadingFoto=!1,this.uploadProgressFoto=0}ngOnDestroy(){this.detenerPollingVinculacion(),this.detenerPollingCaptura(),this.detenerPollingCapturaFotoPerfil()}cargarVinculacionDesdeStorage(){let t=localStorage.getItem("lcch_capture_pairing_token");t&&(this.pairingToken=t,this.refrescarEstadoVinculacion(!1))}refrescarEstadoVinculacion(t){this.pairingToken&&this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:e=>{let i=e?.data?.status??this.pairingStatus;if(this.pairingStatus=i,i==="REVOKED"||i==="EXPIRED"){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null;return}t&&this._tools.MostrarMensaje("success","Vinculaci\xF3n actualizada")},error:e=>{e?.status===404&&(localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null)}})}abrirVinculacionCelular(){return O(this,null,function*(){this._tools.MostrarMensajeLoading();let t=()=>new Promise((e,i)=>{let s=()=>{this._pairing.crearVinculacion().subscribe({next:c=>{let m=c?.data?.token;if(!m)return i(new Error("No token"));this.pairingToken=m,this.pairingStatus=c?.data?.status??null,localStorage.setItem("lcch_capture_pairing_token",m),e(m)},error:c=>i(c)})};if(this.pairingToken){this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:c=>{let m=c?.data?.status??null;if(this.pairingStatus=m,m==="EXPIRED"||m==="REVOKED"){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null,s();return}e(this.pairingToken)},error:c=>{if(c?.status===404){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null,s();return}i(c)}});return}s()});try{let e=yield t(),i=this.router.serializeUrl(this.router.createUrlTree(["/captura-celular",e])),s=window.location.hostname,m=(s==="localhost"||s==="127.0.0.1")&&U.frontendPublicBaseUrl?U.frontendPublicBaseUrl:document.baseURI;this.pairingUrl=new URL(i,m).toString();try{this.pairingQrDataUrl=yield Nt.toDataURL(this.pairingUrl,{width:240,margin:1})}catch{this.pairingQrDataUrl=null}this.modalVincularCelularRef=this._tools.openModal(this.modalVincularCelular,"md"),this.modalVincularCelularRef.result.finally(()=>{this.detenerPollingVinculacion()}),this.iniciarPollingVinculacion(),this._tools.MostrarMensajeSuccess()}catch(e){console.log("ERROR creando vinculaci\xF3n",e),this._tools.MostrarMensajeError()}})}iniciarPollingVinculacion(){this.detenerPollingVinculacion(),this.pairingToken&&(this.pairingIntervalId=setInterval(()=>{this.pairingToken&&this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:t=>{let e=t?.data?.status;this.pairingStatus=e??this.pairingStatus,e==="LINKED"&&this.detenerPollingVinculacion()},error:()=>{}})},2e3))}detenerPollingVinculacion(){this.pairingIntervalId&&(clearInterval(this.pairingIntervalId),this.pairingIntervalId=null)}iniciarCapturaFotoPagoPorCelular(){return O(this,null,function*(){if(!this.pairingToken||this.pairingStatus!=="LINKED"){this._tools.MostrarMensaje("info","Primero vincule el celular (QR)"),yield this.abrirVinculacionCelular();return}this._tools.MostrarMensajeLoading();let t=this.estudianteId?Number(this.estudianteId):this.newinfoestudiantesifas.get("estudiantesifas_id")?.value?Number(this.newinfoestudiantesifas.get("estudiantesifas_id")?.value):null;this._pairing.solicitarCaptura(this.pairingToken,t,"pagosAnualesUnicos").subscribe({next:e=>{let i=e?.data?.token;if(!i){this._tools.MostrarMensajeError();return}this.capturaToken=i,this.capturaStatus=e?.data?.status??"PENDING",this.isCapturandoFotoPago=!0,this.modalEsperaFotoPagoCelularRef=this._tools.openModal(this.modalEsperaFotoPagoCelular,"md"),this.modalEsperaFotoPagoCelularRef.result.finally(()=>{this.cancelarEsperaCaptura(!0)}),this.iniciarPollingCaptura(),this._tools.MostrarMensajeSuccess()},error:e=>{console.log("ERROR solicitando captura",e),this._tools.MostrarMensajeError()}})})}iniciarPollingCaptura(){this.detenerPollingCaptura(),this.capturaToken&&(this.capturaIntervalId=setInterval(()=>{this.capturaToken&&this._capture.estadoSesion(this.capturaToken).subscribe({next:t=>{let e=t?.data?.status,i=t?.data?.file_path;if(this.capturaStatus=e??this.capturaStatus,e==="UPLOADED"&&i){let s=this.fotoPagoTempPath;this.newinfoestudiantesifas.patchValue({FotoPago:i}),this.fotoPagoTempPath=i,s&&s!==i&&s!==this.fotoPagoAnteriorPath&&this._tools.EliminarArchivo(s),this.isCapturandoFotoPago=!1,this.detenerPollingCaptura(),this.modalEsperaFotoPagoCelularRef?.close(),this._tools.MostrarMensaje("success","FotoPago recibida desde el celular")}},error:()=>{}})},2e3))}detenerPollingCaptura(){this.capturaIntervalId&&(clearInterval(this.capturaIntervalId),this.capturaIntervalId=null)}cancelarEsperaCaptura(t=!1){let e=this.capturaStatus;this.detenerPollingCaptura(),this.capturaStatus=null,this.capturaToken=null,this.isCapturandoFotoPago=!1,this.pairingToken&&e!=="UPLOADED"&&this._pairing.cancelarCaptura(this.pairingToken).subscribe({next:()=>{t||this._tools.MostrarMensaje("info","Espera cancelada")},error:()=>{}})}ngOnChanges(t){t.estudianteId&&!t.estudianteId.firstChange&&this.CargarSegunModo()}snapshotFormValue(t){let e=t;return typeof e.getRawValue=="function"?e.getRawValue():t.value}getTableColspan(){let t=10;return this.esSuperAdmin&&(t+=1),this.estudianteId||(t+=3),t}setupBuscadoresPlantel(){this.docAdminInput.valueChanges.subscribe(t=>{let e=(t??"").toString();if(e===""){this.docentesFiltradosAdmin=[],this.newinfoestudiantesifas.patchValue({planteldocadmins_id:""});return}if(e.trim()===""){this.docentesFiltradosAdmin=this.filtrarPlantelDocentes("",!0);return}this.newinfoestudiantesifas.patchValue({planteldocadmins_id:""}),this.docentesFiltradosAdmin=this.filtrarPlantelDocentes(e.toLowerCase().trim())}),this.docPCInput.valueChanges.subscribe(t=>{let e=(t??"").toString();if(e===""){this.docentesFiltradosPC=[],this.newinfoestudiantesifas.patchValue({planteldocadmins_idPC:""});return}if(e.trim()===""){this.docentesFiltradosPC=this.filtrarPlantelDocentes("",!0);return}this.newinfoestudiantesifas.patchValue({planteldocadmins_idPC:""}),this.docentesFiltradosPC=this.filtrarPlantelDocentes(e.toLowerCase().trim())}),this.docOtrosInput.valueChanges.subscribe(t=>{let e=(t??"").toString();if(e===""){this.docentesFiltradosOtros=[],this.newinfoestudiantesifas.patchValue({planteldocadmins_idOtros:""});return}if(e.trim()===""){this.docentesFiltradosOtros=this.filtrarPlantelDocentes("",!0);return}this.newinfoestudiantesifas.patchValue({planteldocadmins_idOtros:""}),this.docentesFiltradosOtros=this.filtrarPlantelDocentes(e.toLowerCase().trim())})}cargarPlantelDocentes(){this._planteldoc.Obtenerplanteldocentes().subscribe({next:t=>{let e=t?.data||[];this.plantelDocentes=e.filter(i=>this.normalizar(i?.Visibilidad)!=="OCULTO"),this.syncBuscadoresPlantelConForm()},error:t=>{console.error("Error al cargar planteldocentes",t),this.plantelDocentes=[]}})}getInstitucionFiltroId(){let t=this.newinfoestudiantesifas.get("instituciones_id")?.value;return t==null||String(t).trim()===""?null:String(t)}filtrarPlantelDocentes(t,e=!1){let i=this.getInstitucionFiltroId(),s=(this.plantelDocentes||[]).filter(c=>!(i&&String(c?.instituciones_id)!==i)).sort((c,m)=>this.getNombreCompletoDocente(c).localeCompare(this.getNombreCompletoDocente(m)));return e?s.slice(0,50):t?s.filter(c=>this.getNombreCompletoDocente(c).toLowerCase().includes(t)).slice(0,25):[]}normalizar(t){return(t??"").toString().trim().toUpperCase()}getNombreCompletoDocente(t){let e=(t?.Nombres??"").toString().trim(),i=(t?.Apellidos??"").toString().trim();return`${e} ${i}`.trim()}docenteInactivo(t){return this.normalizar(t?.Estado)==="INACTIVO"}seleccionarDocenteAdmin(t){!t||this.docenteInactivo(t)||(this.newinfoestudiantesifas.patchValue({planteldocadmins_id:t?.id??""}),this.docAdminInput.setValue(this.getNombreCompletoDocente(t),{emitEvent:!1}),this.mostrarListaDocAdmin=!1,this.docentesFiltradosAdmin=[])}seleccionarDocentePC(t){!t||this.docenteInactivo(t)||(this.newinfoestudiantesifas.patchValue({planteldocadmins_idPC:t?.id??""}),this.docPCInput.setValue(this.getNombreCompletoDocente(t),{emitEvent:!1}),this.mostrarListaDocPC=!1,this.docentesFiltradosPC=[])}seleccionarDocenteOtros(t){!t||this.docenteInactivo(t)||(this.newinfoestudiantesifas.patchValue({planteldocadmins_idOtros:t?.id??""}),this.docOtrosInput.setValue(this.getNombreCompletoDocente(t),{emitEvent:!1}),this.mostrarListaDocOtros=!1,this.docentesFiltradosOtros=[])}syncBuscadoresPlantelConForm(){if(!this.plantelDocentes?.length)return;let t=this.newinfoestudiantesifas.get("planteldocadmins_id")?.value,e=this.newinfoestudiantesifas.get("planteldocadmins_idPC")?.value,i=this.newinfoestudiantesifas.get("planteldocadmins_idOtros")?.value,s=f=>(this.plantelDocentes||[]).find(C=>String(C?.id)===String(f)),c=t?s(t):null,m=e?s(e):null,E=i?s(i):null;c&&this.docAdminInput.setValue(this.getNombreCompletoDocente(c),{emitEvent:!1}),m&&this.docPCInput.setValue(this.getNombreCompletoDocente(m),{emitEvent:!1}),E&&this.docOtrosInput.setValue(this.getNombreCompletoDocente(E),{emitEvent:!1})}cargarOptionsDesdeControles(){let t=["TIPO DE ESTUDIANTE","TURNO","LVLCURSO","ESPECIALIDAD","ESPECIALIDAD SECUNDARIA","VERIFICACI\xD3N INSCRIPCIONES"];this._controles.ObtenerOptionsSelectPorCategorias(t).subscribe({next:e=>{this.categoriaOptions=e?.["TIPO DE ESTUDIANTE"]||[],this.turnoOptions=e?.TURNO||[],this.cursoOptions=e?.LVLCURSO||[],this.InstrumentoMusicalOptions=e?.ESPECIALIDAD||[],this.InstrumentoMusicalSecundarioOptions=e?.["ESPECIALIDAD SECUNDARIA"]||[],this.VerificacionInscripciones=e?.["VERIFICACI\xD3N INSCRIPCIONES"]||[]},error:()=>{this.categoriaOptions=[],this.turnoOptions=[],this.cursoOptions=[],this.InstrumentoMusicalOptions=[],this.InstrumentoMusicalSecundarioOptions=[],this.VerificacionInscripciones=[]}})}abrirModalNuevoInfoestudiantesifas(){this.modalGestioninfoestudiantesifasRef=this._tools.openModal(this.modalgestioninfoestudiantesifas,"xl")}cargarAnios(){this._anios.ObtenerAniosConPredeterminado().subscribe({next:t=>{if(this.anios=t?.anios||[],this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){let e=t?.predeterminado;e?.id?this.selectedAnioId=e.id:this.anios?.length&&(this.selectedAnioId=this.anios[0]?.id??"")}this.CargarSegunModo()},error:t=>{console.error("Error al cargar anios",t),this.CargarSegunModo()}})}buildNombreCompleto(t,e,i){return`${(t??"").toString().trim()} ${(e??"").toString().trim()} ${(i??"").toString().trim()}`.replace(/\s+/g," ").trim()}abrirAsignadorMateriasGeneral(){this.asignadorModo="general",this.asignadorEstudianteId=null,this.asignadorNombreEstudiante=null,this.asignadorFotoEstudiante=null,this.asignadorSexoEstudiante=null,this.asignadorPreferInfoId=null,this.modalAsignacionesEstudiantesRef=this._tools.openModal(this.modalOtroComponenteAsignacionesEstudiantes,"xl"),this.modalAsignacionesEstudiantesRef?.result?.finally(()=>{this.Cargarinfoestudiantesifas()})}abrirAsignadorMateriasDesdeInscripcion(t){this.asignadorModo="estudiante",this.asignadorPreferInfoId=Number(t?.id??0)||null;let e=this.estudianteId?Number(this.estudianteId):Number(t?.estudiantesifas_id??0);this.asignadorEstudianteId=Number.isFinite(e)&&e>0?e:null,this.estudianteId?(this.asignadorNombreEstudiante=this.nombreEstudiante,this.asignadorFotoEstudiante=this.fotoEstudiante,this.asignadorSexoEstudiante=this.sexoEstudiante):(this.asignadorNombreEstudiante=this.buildNombreCompleto(t?.Ap_Paterno,t?.Ap_Materno,t?.Nombre)||(this.asignadorEstudianteId?`Estudiante #${this.asignadorEstudianteId}`:null),this.asignadorFotoEstudiante=null,this.asignadorSexoEstudiante=null,this.asignadorEstudianteId&&this._est.Seleccionarestudiantesifas(this.asignadorEstudianteId).subscribe({next:i=>{let s=i?.data;if(!s)return;this.asignadorFotoEstudiante=s?.Foto??s?.foto??this.asignadorFotoEstudiante,this.asignadorSexoEstudiante=s?.Sexo??s?.sexo??this.asignadorSexoEstudiante;let c=this.buildNombreCompleto(s?.Ap_Paterno,s?.Ap_Materno,s?.Nombre);c&&(this.asignadorNombreEstudiante=c)},error:()=>{}})),this.modalAsignacionesEstudiantesRef=this._tools.openModal(this.modalOtroComponenteAsignacionesEstudiantes,"xl"),this.modalAsignacionesEstudiantesRef?.result?.finally(()=>{this.Cargarinfoestudiantesifas()})}onAnioChange(){this.paginainfoestudiantesifas=1,this.Cargarinfoestudiantesifas(),this.modalEstadisticasRef&&this.cargarEstadisticasInscripciones()}abrirModalEstadisticas(){this.modalEstadisticasRef=this._tools.openModal(this.modalOtroComponenteEstadisticas,"xl"),this.cargarEstadisticasInscripciones(),this.modalEstadisticasRef.result.finally(()=>{this.isLoadingEstadisticas=!1})}cargarEstadisticasInscripciones(){if(this.selectedAnioId===""||this.selectedAnioId===null||this.selectedAnioId===void 0){this.estadisticasInscripciones=null;return}this.isLoadingEstadisticas=!0,this._infoest.ObtenerEstadisticasInscripciones({anio_id:Number(this.selectedAnioId),include_sin_asignar:this.incluirSinAsignar?1:0,anio_scope:this.estadisticasModo}).subscribe({next:t=>{this.estadisticasInscripciones=t??null,this.isLoadingEstadisticas=!1},error:t=>{console.error("Error al cargar estad\xEDsticas",t),this.estadisticasInscripciones=null,this.isLoadingEstadisticas=!1}})}formatearMapaConteo(t,e,i){return!Array.isArray(t)||t.length===0?"":t.map(s=>{let c=(s?.[e]??"").toString().trim(),m=Number(s?.total??0);if(!c||!Number.isFinite(m)||m<=0)return"";let E=i?.suffix??"";return`${c}${E} (${m})`}).filter(s=>s!=="").join(", ")}resumenEdades(t){return this.formatearMapaConteo(t,"edad",{suffix:" a\xF1os"})}resumenInstrumentos(t){return this.formatearMapaConteo(t,"instrumento")}hayInstrumentos(t){return Array.isArray(t)&&t.some(e=>Array.isArray(e?.instrumentos)&&e.instrumentos.length>0)}hayEdades(t){return Array.isArray(t)&&t.some(e=>Array.isArray(e?.edades)&&e.edades.length>0)}getSexoCount(t,e){return t?Number(t?.[e]??0):0}onSearchEnter(){this.searchAplicado=(this.filtertxtinfoestudiantesifas??"").toString(),this.paginainfoestudiantesifas=1,this.sortColumnsinfoestudiantesifas=[],this.sortByColumn="FechInsc",this.sortDir="desc",this.Cargarinfoestudiantesifas()}onPageChange(t){this.paginainfoestudiantesifas=t,this.Cargarinfoestudiantesifas()}CargarSegunModo(){this.estudianteId&&(this.newinfoestudiantesifas.patchValue({estudiantesifas_id:this.estudianteId}),this.cargarEstudianteSeleccionadoPorId(this.estudianteId)),this.Cargarinfoestudiantesifas()}setupBuscadorEstudiantes(){this.estudianteInput.valueChanges.subscribe(t=>{(t??"").toString()===""&&(this.estudiantesFiltrados=[],this.mostrarListaEstudiantes=!1,this.busquedaEstudiantesEjecutada=!1,this.estudiantesPage=1,this.estudianteId||(this.estudianteSeleccionado=null,this.newinfoestudiantesifas.patchValue({estudiantesifas_id:""})))})}get estudiantesTotalPages(){let t=this.estudiantesFiltrados?.length??0,e=Math.ceil(t/this.estudiantesPageSize);return Math.max(1,e||1)}get estudiantesPaginados(){let t=this.estudiantesFiltrados||[],i=(Math.min(Math.max(1,this.estudiantesPage),this.estudiantesTotalPages)-1)*this.estudiantesPageSize;return t.slice(i,i+this.estudiantesPageSize)}estudiantesPrevPage(){this.estudiantesPage=Math.max(1,this.estudiantesPage-1)}estudiantesNextPage(){this.estudiantesPage=Math.min(this.estudiantesTotalPages,this.estudiantesPage+1)}abrirRegistroEstudianteDesdeBuscador(){let t=(this.estudianteInput?.value??"").toString().trim();this.mostrarListaEstudiantes=!1,this.estudiantesFiltrados=[],this.busquedaEstudiantesEjecutada=!1,this.estudiantesPage=1,this.abrirModalRegistroEstudianteCompleto(t)}getNombreCompletoEstudiante(t){let e=(t?.Ap_Paterno??"").toString().trim(),i=(t?.Ap_Materno??"").toString().trim(),s=(t?.Nombre??"").toString().trim();return`${e} ${i} ${s}`.replace(/\s+/g," ").trim()}normalizarParaBusqueda(t){return(t??"").toString().toLowerCase().trim()}tokenizarPreservandoDuplicados(t){return t.split(/\s+/g).map(e=>e.trim()).filter(e=>e.length>0)}esTokenNumerico(t){return/^\d+$/.test(t)}contarOcurrencias(t,e){if(!e)return 0;let i=0,s=0;for(;;){let c=t.indexOf(e,s);if(c===-1)break;i+=1,s=c+e.length}return i}scoreEstudianteBusqueda(t,e){let i=(e??"").toString().trim().toLowerCase();if(!i)return 0;let s=this.normalizarParaBusqueda(this.getNombreCompletoEstudiante(t)),c=this.normalizarParaBusqueda(t?.CI),m=0;c&&i===c&&(m+=2e4),c&&i.length>=3&&c.startsWith(i)&&(m+=12e3),s&&i===s&&(m+=15e3),s&&s.startsWith(i)&&(m+=9e3);let E=this.tokenizarPreservandoDuplicados(i).map(S=>this.normalizarParaBusqueda(S));if(E.length===0)return m;for(let S of E)if(S)if(this.esTokenNumerico(S)){let A=this.contarOcurrencias(c,S);m+=A*1200}else{let A=this.contarOcurrencias(s,S);m+=A*700}let f=new Map;for(let S of E)f.set(S,(f.get(S)??0)+1);let C=!0;for(let[S,A]of f.entries())if(S){if(this.esTokenNumerico(S)){if(this.contarOcurrencias(c,S)<A){C=!1;break}}else if(this.contarOcurrencias(s,S)<A){C=!1;break}}return C&&(m+=5e3),m}filtrarEstudiantesPreciso(t,e){let i=(e??"").toString().trim();if(!i)return[];let s=this.tokenizarPreservandoDuplicados(i).map(m=>this.normalizarParaBusqueda(m));if(s.length===0)return[];let c=new Map;for(let m of s)c.set(m,(c.get(m)??0)+1);return(t||[]).filter(m=>{let E=this.normalizarParaBusqueda(this.getNombreCompletoEstudiante(m)),f=this.normalizarParaBusqueda(m?.CI);for(let[C,S]of c.entries())if(C){if(this.esTokenNumerico(C)){if(this.contarOcurrencias(f,C)<S)return!1}else if(this.contarOcurrencias(E,C)<S)return!1}return!0})}getTokensResaltadoEstudiante(t,e){let i=(t??"").toString().trim();if(!i)return[];let s=this.tokenizarPreservandoDuplicados(i).map(m=>this.normalizarParaBusqueda(m)).filter(m=>m.length>0),c=e==="ci"?s.filter(m=>this.esTokenNumerico(m)):s.filter(m=>!this.esTokenNumerico(m));return Array.from(new Set(c))}resaltarTextoConTokens(t,e){let i=(t??"").toString();if(!i)return this.sanitizer.bypassSecurityTrustHtml("");let s=this.escapeHtml(i);if(e.length>0){let c=e.map(E=>this.escapeRegExp(E)).sort((E,f)=>f.length-E.length),m=new RegExp(`(${c.join("|")})`,"gi");s=s.replace(m,E=>`<mark class="match-strong">${E}</mark>`)}return this.sanitizer.bypassSecurityTrustHtml(s)}resaltarNombreEnBuscadorEstudiante(t){let e=(this.estudianteInput?.value??"").toString(),i=this.getTokensResaltadoEstudiante(e,"nombre");return this.resaltarTextoConTokens(this.getNombreCompletoEstudiante(t),i)}resaltarCIEnBuscadorEstudiante(t){let e=(this.estudianteInput?.value??"").toString(),i=this.getTokensResaltadoEstudiante(e,"ci");return this.resaltarTextoConTokens((t??"").toString(),i)}getBackendSearchTermEstudiantes(t){let e=(t??"").toString().trim();if(!e)return"";let i=this.tokenizarPreservandoDuplicados(e).map(m=>(m??"").toString().trim()).filter(Boolean),s=i.filter(m=>this.esTokenNumerico(m)).sort((m,E)=>E.length-m.length);if(s.length>0)return s[0];let c=i.filter(m=>!this.esTokenNumerico(m)).sort((m,E)=>E.length-m.length);return c.length>0?c[0]:e}buscarEstudiantes(){if(this.estudianteId)return;let t=(this.estudianteInput.value??"").toString().trim();if(!t){this.estudiantesFiltrados=[];return}this.busquedaEstudiantesEjecutada=!0,this.estudiantesPage=1,this.mostrarListaEstudiantes=!0,this.isBuscandoEstudiante=!0;let i={page:1,per_page:200,search:this.getBackendSearchTermEstudiantes(t)||t,search_mode:"any",relevance:1,sort_by:"id",sort_dir:"desc"};this._est.Obtenerestudiantesifas(i).subscribe({next:s=>{let c=s?.data||[],E=(this.filtrarEstudiantesPreciso(c,t)||[]).slice().sort((f,C)=>{let S=this.scoreEstudianteBusqueda(C,t),A=this.scoreEstudianteBusqueda(f,t);if(S!==A)return S-A;let M=this.getNombreCompletoEstudiante(C).toLowerCase(),H=this.getNombreCompletoEstudiante(f).toLowerCase();return M!==H?M.localeCompare(H):Number(C?.id??0)-Number(f?.id??0)});this.estudiantesFiltrados=E,this.mostrarListaEstudiantes=!0,this.isBuscandoEstudiante=!1},error:s=>{console.error("Error al buscar estudiantes",s),this.estudiantesFiltrados=[],this.mostrarListaEstudiantes=!0,this.isBuscandoEstudiante=!1}})}seleccionarEstudiante(t){t&&(this.estudianteSeleccionado=t,this.newinfoestudiantesifas.patchValue({estudiantesifas_id:t?.id??""}),this.estudianteInput.setValue(this.getNombreCompletoEstudiante(t),{emitEvent:!1}),this.mostrarListaEstudiantes=!1,this.estudiantesFiltrados=[],this.busquedaEstudiantesEjecutada=!1,this.estudiantesPage=1)}cargarEstudianteSeleccionadoPorId(t){t&&this._est.Seleccionarestudiantesifas(Number(t)).subscribe({next:e=>{this.estudianteSeleccionado=e?.data??null,!this.estudianteId&&this.estudianteSeleccionado&&this.estudianteInput.setValue(this.getNombreCompletoEstudiante(this.estudianteSeleccionado),{emitEvent:!1})},error:e=>{console.error("Error al cargar estudiante",e),this.estudianteId||(this.estudianteSeleccionado=null)}})}generarMatricula(){let t=this.estudianteSeleccionado,e=(t?.Ap_Paterno??"").toString().trim(),i=(t?.Ap_Materno??"").toString().trim(),s=(t?.Nombre??"").toString().trim(),c=(t?.CI??"").toString().trim(),m=e?e.charAt(0):"",E=i?i.charAt(0):"",f=s?s.charAt(0):"";return`${m}${E}${f}${c}`.toUpperCase()}Cargarinfoestudiantesifas(){this.isLoadinginfoestudiantesifas=!0;let t=(this.searchAplicado??"").toString().trim()!=="",e=Array.isArray(this.sortColumnsinfoestudiantesifas)&&this.sortColumnsinfoestudiantesifas.length>0,i=t&&!e;this._infoest.Obtenerinfoestudiantesifas({page:this.paginainfoestudiantesifas,per_page:this.pageSizeinfoestudiantesifas,anio_id:this.selectedAnioId===""?void 0:Number(this.selectedAnioId),include_sin_asignar:this.incluirSinAsignar?1:0,estudiante_id:this.estudianteId?Number(this.estudianteId):void 0,search:(this.searchAplicado??"").toString().trim(),search_mode:"any",relevance:i?1:0,sort_by:this.sortByColumn,sort_dir:this.sortDir}).subscribe({next:s=>{console.log("cargar estudiantes inscritos",s.data),this.infoestudiantesifas=s.data||[],this.collectionSizeinfoestudiantesifas=s.meta?.total??this.infoestudiantesifas.length,this.isLoadinginfoestudiantesifas=!1,!this.autoAbrioNuevoPorVacio&&this.modo==="estudiante"&&this.estudianteId&&(this.infoestudiantesifas?.length||0)===0&&(this.autoAbrioNuevoPorVacio=!0,this.abrirModalNuevoInfoestudiantesifas())},error:s=>{console.error("Error al cargar infoestudiantesifas",s),this.infoestudiantesifas=[],this.collectionSizeinfoestudiantesifas=0,this.isLoadinginfoestudiantesifas=!1}})}getTokensBusqueda(t){let e=(t??this.filtertxtinfoestudiantesifas??"").toString().trim();return e?Array.from(new Set(e.split(/\s+/g).map(i=>i.trim()).filter(i=>i.length>0))):[]}escapeHtml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}resaltarTexto(t,e){let i=this.getTokensBusqueda(e),s=(t??"").toString();if(!s)return this.sanitizer.bypassSecurityTrustHtml("");let c=this.escapeHtml(s);if(i.length>0){let m=i.map(f=>this.escapeRegExp(f)).sort((f,C)=>C.length-f.length),E=new RegExp(`(${m.join("|")})`,"gi");c=c.replace(E,f=>`<mark class="match-strong">${f}</mark>`)}return this.sanitizer.bypassSecurityTrustHtml(c)}AgregarModificarinfoestudiantesifas(){if(this.newinfoestudiantesifas.invalid){this.ValidacionTodoElementoinfoestudiantesifas(),this._tools.MostrarMensajeFrmIncompleto(),this.AnimacionCargabtnModalinfoestudiantesifas=!1;return}else{this.AnimarCargaTablainfoestudiantesifas(),this.AnimacionCargabtnModalinfoestudiantesifas=!0,this._tools.MostrarMensajeLoading(),this.newinfoestudiantesifasAnteriorAccion.patchValue(this.snapshotFormValue(this.newinfoestudiantesifas));let t=this.newinfoestudiantesifas.controls.id.value;console.log("INFO A PROCESAR",this.newinfoestudiantesifas.value);let e=this.newinfoestudiantesifas.get("FotoPago")?.value??null,i=this.fotoPagoAnteriorPath,s=m=>{this._infoest.Agregarinfoestudiantesifas(this.newinfoestudiantesifas.value,{force:m}).subscribe(E=>{console.log("SE A\xD1ADIO CORRECTAMENTE infoestudiantesifas",E.data),this.Cargarinfoestudiantesifas(),this.fotoPagoTempPath=null,this.fotoPagoAnteriorPath=null,this.resetinfoestudiantesifas(),this.AnimacionCargabtnModalinfoestudiantesifas=!1,this._tools.MostrarMensajeSuccess()},E=>{let f=E?.status,C=!!E?.error?.requires_confirmation,S=E?.error?.anio;if(f===409&&C){this._tools.mostrarMensajeConfirm("Inscripci\xF3n duplicada",`Ya existe una inscripci\xF3n del estudiante en esta instituci\xF3n para la gesti\xF3n ${S??"actual"}. \xBFDesea continuar igualmente?`,"warning","S\xED, continuar","No, cancelar").then(A=>{A?s(!0):this.AnimacionCargabtnModalinfoestudiantesifas=!1});return}console.log("ERROR AL A\xD1ADIR infoestudiantesifas",E),this.AnimacionCargabtnModalinfoestudiantesifas=!1,this._tools.MostrarMensajeError()})},c=m=>{this._infoest.Modificarinfoestudiantesifas(this.newinfoestudiantesifas.value,this.newinfoestudiantesifas.value.id,{force:m}).subscribe(E=>{console.log("SE MODIFICO CORRECTAMENTE infoestudiantesifas",E.data),i&&e&&i!==e&&this._tools.EliminarArchivo(i),this.Cargarinfoestudiantesifas(),this.fotoPagoTempPath=null,this.fotoPagoAnteriorPath=null,this.resetinfoestudiantesifas(),this.AnimacionCargabtnModalinfoestudiantesifas=!1,this._tools.MostrarMensajeSuccess()},E=>{let f=E?.status,C=!!E?.error?.requires_confirmation,S=E?.error?.anio;if(f===409&&C){this._tools.mostrarMensajeConfirm("Inscripci\xF3n duplicada",`Ya existe una inscripci\xF3n del estudiante en esta instituci\xF3n para la gesti\xF3n ${S??"actual"}. \xBFDesea guardar igualmente?`,"warning","S\xED, guardar","No, cancelar").then(A=>{A?c(!0):this.AnimacionCargabtnModalinfoestudiantesifas=!1});return}console.log("ERROR AL MODIFICAR infoestudiantesifas",E),this.AnimacionCargabtnModalinfoestudiantesifas=!1,this._tools.MostrarMensajeError()})};t?c(!1):s(!1)}}Seleccionarinfoestudiantesifas(t){if(this._tools.MostrarMensajeLoading(),t){if(!this.infoestudiantesifas.find(i=>i.id===t))return;this._infoest.Seleccionarinfoestudiantesifas(t).subscribe(i=>{Object.keys(this.newinfoestudiantesifas.controls).forEach(c=>{this.newinfoestudiantesifas.controls[c].setValue(i.data[c])}),console.log("SELECCION DE infoestudiantesifas EXITOSA",this.newinfoestudiantesifas.value),this.newinfoestudiantesifasAnteriorAccion.patchValue(this.snapshotFormValue(this.newinfoestudiantesifas)),this.fotoPagoAnteriorPath=this.newinfoestudiantesifas.get("FotoPago")?.value??null,this.fotoPagoTempPath=null;let s=this.newinfoestudiantesifas.get("estudiantesifas_id")?.value;!this.estudianteId&&s&&this.cargarEstudianteSeleccionadoPorId(Number(s)),this.syncBuscadoresPlantelConForm(),this.modalGestioninfoestudiantesifasRef=this._tools.openModal(this.modalgestioninfoestudiantesifas,"xl"),this._tools.MostrarMensajeSuccess()},i=>{console.log("ERROR AL SELECCIONAR infoestudiantesifas",i),this._tools.MostrarMensajeError()})}}Eliminarinfoestudiantesifas(t){this._tools.mostrarMensajeConfirm("\xBFSEGURO QUE DESEA ELIMINAR?","SE ELIMINARA EL DATO Y NO SE PODR\xC1 RECUPERAR EL DATO","warning","SI, ESTOY SEGURO","NO").then(e=>{e&&(this._tools.MostrarMensajeLoading(),this._infoest.Eliminarinfoestudiantesifas(t).subscribe(i=>{console.log(i.data),this.Cargarinfoestudiantesifas(),this._tools.MostrarMensajeSuccess()},i=>{console.log("ERROR AL ELIMINAR infoestudiantesifas",i),this._tools.MostrarMensajeError()}))})}resetinfoestudiantesifas(){this.fotoPagoTempPath&&this.fotoPagoTempPath!==this.fotoPagoAnteriorPath&&this._tools.EliminarArchivo(this.fotoPagoTempPath),this.fotoPagoTempPath=null,this.fotoPagoAnteriorPath=null,this.newinfoestudiantesifas=this._infoest.createFormGroupinfoestudiantesifas(),this.estudianteId?(this.newinfoestudiantesifas.patchValue({estudiantesifas_id:this.estudianteId}),this.cargarEstudianteSeleccionadoPorId(this.estudianteId)):(this.estudianteSeleccionado=null,this.estudianteInput.setValue("",{emitEvent:!1}),this.estudiantesFiltrados=[],this.mostrarListaEstudiantes=!1),this.docAdminInput.setValue("",{emitEvent:!1}),this.docPCInput.setValue("",{emitEvent:!1}),this.docOtrosInput.setValue("",{emitEvent:!1}),this.docentesFiltradosAdmin=[],this.docentesFiltradosPC=[],this.docentesFiltradosOtros=[],this.mostrarListaDocAdmin=!1,this.mostrarListaDocPC=!1,this.mostrarListaDocOtros=!1,this._tools.closeModal(this.modalGestioninfoestudiantesifasRef)}AutoCompletarLastinfoestudiantesifas(){this.newinfoestudiantesifasAnteriorAccion.patchValue({CantidadMateriasAsignadas:0}),this.newinfoestudiantesifas.patchValue(this.snapshotFormValue(this.newinfoestudiantesifasAnteriorAccion)),this.syncBuscadoresPlantelConForm(),this.newinfoestudiantesifas.patchValue({id:0}),console.log("listo",this.newinfoestudiantesifas.value)}AnimarCargaTablainfoestudiantesifas(){this.infoestudiantesifas=[],this.isLoadinginfoestudiantesifas=!0}ValidacioninfoestudiantesifasxElemento(t){return this._tools.obtenerValidationClass(this.newinfoestudiantesifas,t)}ValidacionTodoElementoinfoestudiantesifas(){Object.values(this.newinfoestudiantesifas.controls).forEach(t=>{t.markAsTouched(),t.markAsDirty()})}onPageSizeChangeinfoestudiantesifas(){this.paginainfoestudiantesifas=1,this.Cargarinfoestudiantesifas()}sortByinfoestudiantesifas(t,e){this.sortColumnsinfoestudiantesifas=this._tools.handleSort(t,e,this.sortColumnsinfoestudiantesifas);let i=this.sortColumnsinfoestudiantesifas?.[0];i?.column&&(this.sortByColumn=i.column,this.sortDir=i.direction,this.paginainfoestudiantesifas=1,this.Cargarinfoestudiantesifas())}isSortedinfoestudiantesifas(t){return this._tools.isSorted(this.sortColumnsinfoestudiantesifas,t)}getSortDirinfoestudiantesifas(t){return this._tools.getSortDirection(this.sortColumnsinfoestudiantesifas,t)}closeMenu(t){this._tools.close();let e=t?.target;e?.closest?.(".plantel-doc-buscador")||e?.closest?.(".estudiante-buscador")||(this.mostrarListaDocAdmin=!1,this.mostrarListaDocPC=!1,this.mostrarListaDocOtros=!1,this.mostrarListaEstudiantes=!1)}abrirMenuinfoestudiantesifas(t,e){t.preventDefault(),t.stopPropagation(),console.log("aS",e);let i=[{label:"\u270F Editar",action:()=>this.Seleccionarinfoestudiantesifas(e.id)},{label:"\u{1F5D1}\uFE0F Eliminar",action:()=>this.Eliminarinfoestudiantesifas(e.id)}];this._tools.open(t.clientX,t.clientY,i)}};ye.\u0275fac=function(e){return new(e||ye)(w(Ke),w(W),w(Xe),w(Qe),w(ve),w(qe),w(St),w(Ee),w(be),w(Le),w(mt))},ye.\u0275cmp=re({type:ye,selectors:[["app-estudiantesinscritos"]],viewQuery:function(e,i){if(e&1&&(B(fn,7),B(gn,7),B(hn,7),B(xn,7),B(vn,7),B(En,7),B(bn,7)),e&2){let s;j(s=$())&&(i.modalRegistroEstudianteCompleto=s.first),j(s=$())&&(i.modalEsperaFotoCelular=s.first),j(s=$())&&(i.modalVincularCelular=s.first),j(s=$())&&(i.modalEsperaFotoPagoCelular=s.first),j(s=$())&&(i.modalgestioninfoestudiantesifas=s.first),j(s=$())&&(i.modalOtroComponenteEstadisticas=s.first),j(s=$())&&(i.modalOtroComponenteAsignacionesEstudiantes=s.first)}},hostBindings:function(e,i){e&1&&h("click",function(c){return i.closeMenu(c)},ke)},inputs:{estudianteId:"estudianteId",nombreEstudiante:"nombreEstudiante",fotoEstudiante:"fotoEstudiante",sexoEstudiante:"sexoEstudiante",modo:"modo"},standalone:!1,features:[Oe],decls:99,vars:35,consts:[["modalgestioninfoestudiantesifas",""],["modalRegistroEstudianteCompleto",""],["modalVincularCelular",""],["modalEsperaFotoCelular",""],["modalEsperaFotoPagoCelular",""],["modalOtroComponenteEstadisticas",""],["modalOtroComponenteAsignacionesEstudiantes",""],["modalOtroComponenteRegistrarpagos",""],["sinFotoPago",""],["sinFotoEstudiante",""],["sinFotoEst",""],["fotoInputEst",""],[1,"container","mt-4"],[1,"row","align-items-center"],[1,"col-12",3,"ngClass"],[1,"display-4","fw-bold","titulosGlobales","text-center"],[1,"lead","text-secondary","subtitulosGlobales","text-center"],[1,"lead","text-primary","subtitulosGlobales","text-center"],["class","col-12 col-md-4 d-flex justify-content-center justify-content-md-end mt-3 mt-md-0",4,"ngIf"],[1,"row"],[1,"col-sm-5","d-flex","justify-content-start","button",2,"gap","10px"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","width","30px","height","30px"],["width","50px","height","50px",3,"options"],[1,"dir-part"],[1,"col-sm-4","d-flex","justify-content-end"],[1,"d-flex","align-items-center","w-100",2,"gap","12px"],[1,"form-floating","flex-grow-1"],[1,"form-select",3,"ngModelChange","change","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-sm-3","ms-auto","d-flex","justify-content-end"],["title","PRESIONAR TECLA ENTER PARA REALIZAR BUSQUEDA",1,"input-group"],[1,"input-group-text"],["width","30px","height","30px",3,"options"],[1,"form-floating"],["type","text","placeholder","Buscar","title","PRESIONAR TECLA ENTER PARA REALIZAR BUSQUEDA",1,"form-control",3,"keyup.enter","ngModelChange","ngModel"],[1,"form-check",2,"white-space","nowrap"],["type","checkbox","id","chkSinAsignar",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","chkSinAsignar",1,"form-check-label","text-danger","fw-bold"],[1,"mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-sm","align-middle"],[1,"text-center"],["style","user-select: none; -webkit-user-select: none; -moz-user-select: none;",3,"click",4,"ngIf"],[2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["class","bi",3,"ngClass",4,"ngIf"],[4,"ngIf"],["style","cursor: pointer;",3,"contextmenu",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["previousLabel","Anterior","nextLabel","Siguiente",3,"pageChange","page","collectionSize","pageSize","maxSize","rotate","ellipses","boundaryLinks"],[1,"form-select",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-md-4","d-flex","justify-content-center","justify-content-md-end","mt-3","mt-md-0"],[2,"width","160px","height","160px","object-fit","cover",3,"options"],["alt","Foto del estudiante",1,"border","rounded",2,"width","160px","height","160px","object-fit","cover",3,"src"],[3,"ngValue"],[1,"bi",3,"ngClass"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-center","py-4"],[1,"d-flex","flex-column","align-items-center","justify-content-center","gap-2"],[1,"text-muted"],[2,"width","min(200px, 40vw)","height","min(200px, 40vw)",3,"options"],[2,"cursor","pointer",3,"contextmenu"],[3,"innerHTML"],[1,"text-center","d-flex","justify-content-center","align-items-center",2,"gap","5px"],["title","Visualizar informaci\xF3n",1,"btn","btn-outline-light","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src",4,"ngIf"],["width","30px","height","35px",3,"options",4,"ngIf"],["title","Modificar informaci\xF3n",1,"btn","btn-outline-warning","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["title","Eliminar informaci\xF3n",1,"btn","btn-outline-danger","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src"],["width","30px","height","35px",3,"options"],[3,"value"],[1,"modal-header"],[1,"modal-title"],["type","button","title","cerrar",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup"],["class","row",4,"ngIf"],[1,"mb-3","col-12","col-sm-6"],[1,"form-label","bold"],[4,"ngIf","ngIfElse"],[1,"mt-2","d-flex","justify-content-start"],["type","button",1,"btn","btn-outline-secondary","btn-sm","me-2",3,"click","disabled"],[1,"badge","align-self-center","me-2",3,"ngClass"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],["class","col-12 col-sm-6",4,"ngIf"],[1,"form-floating","mb-3","col-sm-4"],["formControlName","Categoria",1,"form-control",3,"ngClass"],["disabled","",3,"value"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"invalid-feedback"],["type","date","placeholder","","formControlName","FechInsc",1,"form-control",3,"ngClass"],["formControlName","Verificacion",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-2"],["formControlName","Turno",1,"form-control",3,"ngClass"],[1,"form-floating","mb-3","col-sm-3"],["formControlName","Curso_Solicitado",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","Paralelo_Solicitado",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Matricula",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"button","col-sm-2","d-flex","align-items-start"],["type","button",1,"btn","mouse-dir","primary","d-flex","align-items-center","flex-shrink-0",2,"gap","8px","height","58px","white-space","nowrap",3,"click"],[1,"form-floating","mb-3","col-sm-4","position-relative","plantel-doc-buscador",2,"z-index","1051"],["type","text","placeholder"," ","autocomplete","off",1,"form-control",3,"focus","formControl"],["class","list-group position-absolute w-100","style","z-index: 1060;",4,"ngIf"],[1,"row",2,"z-index","1"],[1,"form-floating","mb-3","col-sm-6"],["formControlName","InstrumentoMusical",1,"form-control",3,"ngClass"],["formControlName","InstrumentoMusicalSecundario",1,"form-control",3,"ngClass"],[1,"mb-3","col-sm-12"],["placeholder","","formControlName","Observacion",1,"quill-container-wrapper",2,"text-transform","uppercase",3,"modules","ngClass"],["placeholder","","formControlName","Anotaciones",1,"quill-container-wrapper",2,"text-transform","uppercase",3,"modules","ngClass"],["placeholder","","formControlName","Notas",1,"quill-container-wrapper",2,"text-transform","uppercase",3,"modules","ngClass"],[1,"modal-footer"],["class","button d-flex justify-content-start",4,"ngIf"],[1,"button","me-2"],["title","Cancelar y cerrar","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],[1,"button"],["class","btn mouse-dir success","title","Procesando informaci\xF3n",3,"disabled","click",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;","title","Accionar",3,"click",4,"ngIf"],[1,"form-floating","mb-3","col-sm-12"],["type","number","placeholder","","formControlName","instituciones_id",1,"form-control",3,"ngClass"],["alt","FotoPago",1,"img-thumbnail",2,"width","180px","height","180px","object-fit","cover",3,"src"],[2,"width","180px","height","180px","object-fit","cover",3,"options"],[1,"col-12","col-sm-6"],[1,"form-floating","mb-3","col-12","position-relative","estudiante-buscador",2,"z-index","1052"],["type","text","placeholder"," ","autocomplete","off",1,"form-control",3,"focus","keyup.enter","formControl"],["class","list-group position-absolute w-100","style","z-index: 1000;",4,"ngIf"],[1,"mb-3","col-12"],[1,"list-group","position-absolute","w-100",2,"z-index","1000"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"d-flex","w-100","justify-content-between","align-items-center",2,"gap","10px"],[1,"fw-semibold"],[1,"small","text-muted"],[1,"badge","bg-primary"],["class","list-group-item",4,"ngIf"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"d-flex","w-100","justify-content-between"],[1,"d-flex","justify-content-between","align-items-center",2,"gap","8px"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],["alt","Foto del estudiante",1,"img-thumbnail",2,"width","180px","height","180px","object-fit","cover",3,"src"],[3,"value","disabled"],[1,"list-group","position-absolute","w-100",2,"z-index","1060"],["class","list-group-item list-group-item-action",3,"disabled","opacity","pointerEvents","click",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"button","d-flex","justify-content-start"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Cancelar y cerrar",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Procesando informaci\xF3n",1,"btn","mouse-dir","success",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["title","Accionar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[1,"mb-3","col-sm-6"],[1,"form-label"],[1,"border","rounded","p-3","text-center",3,"dragover","dragleave","drop","click"],["class","mt-2",4,"ngIf"],["type","file","accept","image/*",1,"d-none",3,"change"],["class","text-danger small",4,"ngIf"],["type","text","placeholder","","formControlName","Ap_Paterno",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Ap_Materno",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Nombre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","CI",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","Expedido",1,"form-control",3,"ngClass"],["formControlName","Sexo",1,"form-control",3,"ngClass"],["type","date","placeholder","","formControlName","FechaNac",1,"form-control",3,"change","ngClass"],["type","number","placeholder","","formControlName","Edad","readonly","","tabindex","-1",1,"form-control",2,"pointer-events","none","background-color","#e9ecef",3,"ngClass"],["type","text","placeholder","","formControlName","Celular",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-5"],["type","text","placeholder","","formControlName","Direccion",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Correo",1,"form-control",3,"ngClass"],[1,"mb-3","col-sm-4"],[1,"d-flex","align-items-end",2,"gap","10px"],["type","text","placeholder","","formControlName","Usuario",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","button","title","Generar Usuario","class","btn mouse-dir secondary d-flex align-items-center justify-content-center p-0","style","width: 58px; height: 58px;",3,"click",4,"ngIf"],["class","invalid-feedback d-block",4,"ngIf"],["placeholder","","formControlName","Contrasenia",1,"form-control",3,"type","ngClass"],["type","button","title","Mostrar/Ocultar Contrasenia","class","btn mouse-dir secondary d-flex align-items-center justify-content-center p-0","style","width: 58px; height: 58px;",3,"click",4,"ngIf"],["formControlName","Estado",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","Nombre_Padre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","OcupacionP",1,"form-control",3,"ngClass"],["type","number","placeholder","","formControlName","NumCelP",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Nombre_Madre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","OcupacionM",1,"form-control",3,"ngClass"],["type","number","placeholder","","formControlName","NumCelM",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","NColegio",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","TipoColegio",1,"form-control",3,"ngClass"],["formControlName","CNivel",1,"form-control",3,"ngClass"],["formControlName","CGrado",1,"form-control",3,"ngClass"],[1,"col-sm-12"],["placeholder","","formControlName","InformacionCompartidaIFAS",1,"quill-container-wrapper",3,"modules","ngClass"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;","title","Accionar",3,"disabled","click",4,"ngIf"],["alt","Foto",1,"img-thumbnail",2,"width","140px","height","140px","object-fit","cover",3,"src"],[1,"mt-2"],[1,"progress"],["role","progressbar",1,"progress-bar"],[1,"text-danger","small"],["type","button","title","Generar Usuario",1,"btn","mouse-dir","secondary","d-flex","align-items-center","justify-content-center","p-0",2,"width","58px","height","58px",3,"click"],["width","70px","height","70px",3,"options"],[1,"invalid-feedback","d-block"],["type","button","title","Mostrar/Ocultar Contrasenia",1,"btn","mouse-dir","secondary","d-flex","align-items-center","justify-content-center","p-0",2,"width","58px","height","58px",3,"click"],["title","Accionar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],[1,"mb-2","text-muted"],["class","d-flex justify-content-center",4,"ngIf"],[1,"mt-3"],["class","mt-3",4,"ngIf"],[1,"d-flex","justify-content-center"],["alt","QR",2,"max-width","260px","width","100%",3,"src"],["target","_blank","rel","noopener",3,"href"],[1,"mt-3","d-flex","justify-content-end"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[1,"row","g-2","align-items-end"],[1,"col-12","col-md-4"],["value","default"],["value","assigned"],["value","unassigned"],[1,"btn","btn-outline-primary","w-100",3,"click"],["class","col-12 col-md-4 text-md-end",4,"ngIf"],[1,"col-12","col-md-4","text-md-end"],[1,"text-secondary"],[1,"fs-5","fw-bold"],[1,"table","table-sm","table-striped","align-middle"],[1,"text-end"],[4,"ngFor","ngForOf"],[1,"text-secondary","mb-2"],[3,"modo","estudianteId","nombreEstudiante","fotoEstudiante","sexoEstudiante","preferInfoId"],[3,"modo"]],template:function(e,i){if(e&1){let s=b();a(0,"div",12)(1,"div",13)(2,"div",14)(3,"h1",15),l(4),n(),a(5,"p",16),l(6),n(),a(7,"p",17),l(8),n()(),g(9,yn,3,1,"div",18),n()(),a(10,"div",19)(11,"div",20)(12,"button",21),h("click",function(){return p(s),_(i.abrirModalNuevoInfoestudiantesifas())}),a(13,"span",22),x(14,"ng-lottie",23),n(),a(15,"span"),l(16,"A\xF1adir Inscripci\xF3n "),n(),x(17,"span",24),n(),a(18,"button",21),h("click",function(){return p(s),_(i.abrirModalEstadisticas())}),a(19,"span",22),x(20,"ng-lottie",23),n(),a(21,"span"),l(22,"VER ESTAD\xCDSTICAS DE INSCRIPCIONES"),n(),x(23,"span",24),n()(),a(24,"div",25)(25,"div",26)(26,"div",27)(27,"select",28),L("ngModelChange",function(m){return p(s),R(i.selectedAnioId,m)||(i.selectedAnioId=m),_(m)}),h("change",function(){return p(s),_(i.onAnioChange())}),g(28,In,2,2,"option",29),n(),a(29,"label"),l(30,"A\xF1o"),n()()()(),a(31,"div",30)(32,"div",31)(33,"span",32),x(34,"ng-lottie",33),n(),a(35,"div",34)(36,"input",35),h("keyup.enter",function(){return p(s),_(i.onSearchEnter())}),L("ngModelChange",function(m){return p(s),R(i.filtertxtinfoestudiantesifas,m)||(i.filtertxtinfoestudiantesifas=m),_(m)}),n(),a(37,"label"),l(38,"Buscar"),n()()()(),a(39,"div",30)(40,"div",36)(41,"input",37),L("ngModelChange",function(m){return p(s),R(i.incluirSinAsignar,m)||(i.incluirSinAsignar=m),_(m)}),h("change",function(){return p(s),_(i.onAnioChange())}),n(),a(42,"label",38),l(43,"INCLUIR LOS SIN ASIGNACIONES"),n()()()(),a(44,"div",39)(45,"div",40)(46,"table",41)(47,"tr")(48,"th",42),l(49,"#"),n(),g(50,An,3,1,"th",43),a(51,"th",44),h("click",function(m){return p(s),_(i.sortByinfoestudiantesifas("Anio",m))}),l(52," Anio | Resoluci\xF3n "),g(53,Tn,1,4,"i",45),n(),a(54,"th",44),h("click",function(m){return p(s),_(i.sortByinfoestudiantesifas("FechInsc",m))}),l(55," Fecha Inscripci\xF3n "),g(56,Vn,1,4,"i",45),n(),g(57,Pn,3,1,"th",43)(58,On,3,1,"th",43)(59,Nn,3,1,"th",43)(60,Rn,3,1,"th",43),a(61,"th",44),h("click",function(m){return p(s),_(i.sortByinfoestudiantesifas("Categoria",m))}),l(62," Categoria "),g(63,Ln,1,4,"i",45),n(),a(64,"th",44),h("click",function(m){return p(s),_(i.sortByinfoestudiantesifas("Curso_Solicitado",m))}),l(65," Curso_Solicitado "),g(66,Bn,1,4,"i",45),n(),a(67,"th",44),h("click",function(m){return p(s),_(i.sortByinfoestudiantesifas("CantidadMateriasAsignadas",m))}),l(68," N\xB0 Asig. "),g(69,jn,1,4,"i",45),n(),a(70,"th",44),h("click",function(m){return p(s),_(i.sortByinfoestudiantesifas("Verificacion",m))}),l(71," Verificacion "),g(72,$n,1,4,"i",45),n(),a(73,"th",42),l(74,"ACCIONES"),n()(),a(75,"tbody"),g(76,Un,5,1,"tr",46),it(77,zn,6,2,"tr"),g(78,na,34,22,"tr",47),n()()(),a(79,"div",48)(80,"ngb-pagination",49),h("pageChange",function(m){return p(s),_(i.onPageChange(m))}),n(),a(81,"select",50),L("ngModelChange",function(m){return p(s),R(i.pageSizeinfoestudiantesifas,m)||(i.pageSizeinfoestudiantesifas=m),_(m)}),h("change",function(){return p(s),_(i.onPageSizeChangeinfoestudiantesifas())}),g(82,aa,2,2,"option",51),n()()(),g(83,Na,145,46,"ng-template",null,0,P)(85,ns,223,61,"ng-template",null,1,P)(87,os,14,3,"ng-template",null,2,P)(89,rs,15,1,"ng-template",null,3,P)(91,ls,15,1,"ng-template",null,4,P)(93,Ss,23,5,"ng-template",null,5,P)(95,ys,6,6,"ng-template",null,6,P)(97,Is,6,1,"ng-template",null,7,P)}e&2&&(r(2),d("ngClass",i.modo==="estudiante"?"col-md-8 text-md-start":"text-center"),r(2),I(" ",i.modo==="estudiante"?"Inscripciones":"Inscripciones Estudiantiles"," "),r(2),I(" ",i.modo==="estudiante"?"Gestiona las Inscripciones del estudiante: ":"Gestiona la Informaci\xF3n de Inscripciones de sus estudiantes de manera sencilla y eficiente"," "),r(2),I(" ",i.modo==="estudiante"?""+i.nombreEstudiante:""," "),r(),d("ngIf",i.modo==="estudiante"),r(5),d("options",i._tools.optionsAdicionar),r(6),d("options",i._tools.optionsengranaje),r(7),D("ngModel",i.selectedAnioId),r(),d("ngForOf",i.anios),r(6),d("options",i._tools.optionslupa),r(2),D("ngModel",i.filtertxtinfoestudiantesifas),r(5),D("ngModel",i.incluirSinAsignar),r(9),d("ngIf",i.esSuperAdmin),r(3),d("ngIf",i.isSortedinfoestudiantesifas("Anio")),r(3),d("ngIf",i.isSortedinfoestudiantesifas("FechInsc")),r(),d("ngIf",!i.estudianteId),r(),d("ngIf",!i.estudianteId),r(),d("ngIf",!i.estudianteId),r(),d("ngIf",!i.estudianteId),r(3),d("ngIf",i.isSortedinfoestudiantesifas("Categoria")),r(3),d("ngIf",i.isSortedinfoestudiantesifas("Curso_Solicitado")),r(3),d("ngIf",i.isSortedinfoestudiantesifas("CantidadMateriasAsignadas")),r(3),d("ngIf",i.isSortedinfoestudiantesifas("Verificacion")),r(4),d("ngIf",i.isLoadinginfoestudiantesifas),r(),nt(!i.isLoadinginfoestudiantesifas&&(!i.infoestudiantesifas||i.infoestudiantesifas.length===0)?77:-1),r(),d("ngForOf",i.infoestudiantesifas),r(2),d("page",i.paginainfoestudiantesifas)("collectionSize",i.collectionSizeinfoestudiantesifas)("pageSize",i.pageSizeinfoestudiantesifas)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),r(),D("ngModel",i.pageSizeinfoestudiantesifas),r(),d("ngForOf",i.pageSizeOptionsinfoestudiantesifas))},dependencies:[le,ce,de,$e,ge,he,Be,Ue,pt,fe,pe,je,_e,ft,ze,Ge,He,xe,We,Se,vt],styles:["[_nghost-%COMP%]     mark.match-strong{background-color:rgba(var(--bs-warning-rgb),.55);color:var(--bs-dark);font-weight:800;padding:0 .15rem;border-radius:.2rem;box-decoration-break:clone;-webkit-box-decoration-break:clone;outline:1px solid rgba(var(--bs-warning-rgb),.9)}"]});var Ie=ye;var As=["modalVincularCelular"],Ts=["modalEsperaFotoCelular"],Vs=["modalgestionestudiantesifas"],K=(o,t)=>({"bi-caret-up":o,"bi-caret-down":t}),Ms=(o,t,e)=>({"bg-success":o,"bg-secondary":t,"bg-danger":e}),Ps=(o,t)=>({top:o,left:t});function Fs(o,t){if(o&1&&x(0,"i",36),o&2){let e=u();d("ngClass",V(1,K,e.getSortDirestudiantesifas("Ap_Paterno")==="asc",e.getSortDirestudiantesifas("Ap_Paterno")==="desc"))}}function Os(o,t){if(o&1&&x(0,"i",36),o&2){let e=u();d("ngClass",V(1,K,e.getSortDirestudiantesifas("Ap_Materno")==="asc",e.getSortDirestudiantesifas("Ap_Materno")==="desc"))}}function ks(o,t){if(o&1&&x(0,"i",36),o&2){let e=u();d("ngClass",V(1,K,e.getSortDirestudiantesifas("Nombre")==="asc",e.getSortDirestudiantesifas("Nombre")==="desc"))}}function Ns(o,t){if(o&1&&x(0,"i",36),o&2){let e=u();d("ngClass",V(1,K,e.getSortDirestudiantesifas("CI")==="asc",e.getSortDirestudiantesifas("CI")==="desc"))}}function Ds(o,t){if(o&1&&x(0,"i",36),o&2){let e=u();d("ngClass",V(1,K,e.getSortDirestudiantesifas("Expedido")==="asc",e.getSortDirestudiantesifas("Expedido")==="desc"))}}function Rs(o,t){if(o&1&&x(0,"i",36),o&2){let e=u();d("ngClass",V(1,K,e.getSortDirestudiantesifas("Sexo")==="asc",e.getSortDirestudiantesifas("Sexo")==="desc"))}}function Ls(o,t){if(o&1&&x(0,"i",36),o&2){let e=u();d("ngClass",V(1,K,e.getSortDirestudiantesifas("Edad")==="asc",e.getSortDirestudiantesifas("Edad")==="desc"))}}function Bs(o,t){if(o&1&&x(0,"i",36),o&2){let e=u();d("ngClass",V(1,K,e.getSortDirestudiantesifas("Estado")==="asc",e.getSortDirestudiantesifas("Estado")==="desc"))}}function js(o,t){o&1&&(a(0,"tr")(1,"td",26)(2,"div",37)(3,"span",38),l(4,"Cargando..."),n()()()()),o&2&&(r(),Q("colspan",10))}function $s(o,t){o&1&&(a(0,"tr")(1,"td",26),l(2,"No hay datos disponibles"),n()()),o&2&&(r(),Q("colspan",10))}function Us(o,t){if(o&1&&x(0,"img",47),o&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"eye.svg",F)}}function zs(o,t){if(o&1&&x(0,"ng-lottie",48),o&2){let e=u(2);d("options",e._tools.optionsAdicionar)}}function Gs(o,t){if(o&1&&x(0,"img",47),o&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"pencil.svg",F)}}function qs(o,t){if(o&1&&x(0,"ng-lottie",48),o&2){let e=u(2);d("options",e._tools.optionsEditar)}}function Hs(o,t){if(o&1&&x(0,"img",47),o&2){let e=u(2);d("src",e._tools.rutabtniconsanimaciones+"delete.svg",F)}}function Qs(o,t){if(o&1&&x(0,"ng-lottie",48),o&2){let e=u(2);d("options",e._tools.optionsEliminar)}}function Ws(o,t){if(o&1){let e=b();a(0,"tr",39),h("contextmenu",function(s){let c=p(e).$implicit,m=u();return _(m.abrirMenuestudiantesifas(s,c))}),a(1,"td",26),l(2),n(),a(3,"td"),x(4,"span",40),n(),a(5,"td"),x(6,"span",40),n(),a(7,"td"),x(8,"span",40),n(),a(9,"td"),x(10,"span",40),n(),a(11,"td"),x(12,"span",40),n(),a(13,"td"),x(14,"span",40),n(),a(15,"td"),l(16),n(),a(17,"td"),x(18,"span",40),n(),a(19,"td",41)(20,"button",42),h("click",function(){let s=p(e).$implicit,c=u(),m=N(73);return c.VisualizarInfoEstudiante(s.id),_(c._tools.openModal(m,"xl"))})("mouseenter",function(){let s=p(e).$implicit,c=u();return _(c._tools.hoverBotonMap["visualizacionestudiantesifas-"+s.id]=!0)})("mouseleave",function(){let s=p(e).$implicit,c=u();return _(c._tools.hoverBotonMap["visualizacionestudiantesifas-"+s.id]=!1)}),g(21,Us,1,1,"img",43)(22,zs,1,1,"ng-lottie",44),n(),a(23,"button",45),h("click",function(){let s=p(e).$implicit,c=u();return _(c.Seleccionarestudiantesifas(s.id))})("mouseenter",function(){let s=p(e).$implicit,c=u();return _(c._tools.hoverBotonMap["edicionestudiantesifas-"+s.id]=!0)})("mouseleave",function(){let s=p(e).$implicit,c=u();return _(c._tools.hoverBotonMap["edicionestudiantesifas-"+s.id]=!1)}),g(24,Gs,1,1,"img",43)(25,qs,1,1,"ng-lottie",44),n(),a(26,"button",46),h("click",function(){let s=p(e).$implicit,c=u();return _(c.Eliminarestudiantesifas(s.id))})("mouseenter",function(){let s=p(e).$implicit,c=u();return _(c._tools.hoverBotonMap["eliminacionestudiantesifas-"+s.id]=!0)})("mouseleave",function(){let s=p(e).$implicit,c=u();return _(c._tools.hoverBotonMap["eliminacionestudiantesifas-"+s.id]=!1)}),g(27,Hs,1,1,"img",43)(28,Qs,1,1,"ng-lottie",44),n()()()}if(o&2){let e=t.$implicit,i=t.index,s=u();r(2),v(s.rowIndexBaseestudiantesifas+(i+1)),r(2),d("innerHTML",s.highlightCell(e.Ap_Paterno),T),r(2),d("innerHTML",s.highlightCell(e.Ap_Materno),T),r(2),d("innerHTML",s.highlightCell(e.Nombre),T),r(2),d("innerHTML",s.highlightCell(e.CI),T),r(2),d("innerHTML",s.highlightCell(e.Expedido),T),r(2),d("innerHTML",s.highlightCell(e.Sexo),T),r(2),v(e.Edad),r(2),d("innerHTML",s.highlightCell(e.Estado),T),r(3),d("ngIf",!s._tools.hoverBotonMap["visualizacionestudiantesifas-"+e.id]),r(),d("ngIf",s._tools.hoverBotonMap["visualizacionestudiantesifas-"+e.id]),r(2),d("ngIf",!s._tools.hoverBotonMap["edicionestudiantesifas-"+e.id]),r(),d("ngIf",s._tools.hoverBotonMap["edicionestudiantesifas-"+e.id]),r(2),d("ngIf",!s._tools.hoverBotonMap["eliminacionestudiantesifas-"+e.id]),r(),d("ngIf",s._tools.hoverBotonMap["eliminacionestudiantesifas-"+e.id])}}function Ks(o,t){if(o&1&&(a(0,"option",49),l(1),n()),o&2){let e=t.$implicit;d("value",e),r(),I("",e," por p\xE1gina")}}function Xs(o,t){if(o&1&&(a(0,"div"),x(1,"img",114),n()),o&2){let e,i=u(2);r(),d("src",i._tools.ruta+((e=i.newestudiantesifas.get("Foto"))==null?null:e.value),F)}}function Ys(o,t){o&1&&(a(0,"div",59),l(1,"SIN FOTO DE PERFIL"),n())}function Zs(o,t){if(o&1&&(a(0,"div",115)(1,"div",116)(2,"div",117),l(3),n()()()),o&2){let e=u(2);r(2),X("width",e.uploadProgressFoto,"%"),r(),I(" ",e.uploadProgressFoto,"% ")}}function Js(o,t){o&1&&(a(0,"div",118),l(1," Este campo es obligatorio* "),n())}function eo(o,t){if(o&1&&(a(0,"option",119),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function to(o,t){if(o&1&&(a(0,"option",119),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function io(o,t){if(o&1){let e=b();a(0,"button",120),h("click",function(){let s;p(e);let c=u(2);return _(c.newestudiantesifas.patchValue({Usuario:((s=c.newestudiantesifas.get("Ap_Paterno"))==null?null:s.value.charAt(0))+((s=c.newestudiantesifas.get("Ap_Materno"))==null?null:s.value.charAt(0))+((s=c.newestudiantesifas.get("Nombre"))==null?null:s.value.charAt(0))+((s=c.newestudiantesifas.get("CI"))==null?null:s.value)+"EST"}))}),x(1,"ng-lottie",121),n()}if(o&2){let e=u(2);r(),d("options",e._tools.optionstripleengranaje)}}function no(o,t){o&1&&(a(0,"div",122),l(1," Este campo es obligatorio* "),n())}function ao(o,t){if(o&1){let e=b();a(0,"button",123),h("click",function(){p(e);let s=u(2);return _(s.mostrarContrasenia=!s.mostrarContrasenia)}),x(1,"ng-lottie",121),n()}if(o&2){let e=u(2);r(),d("options",e._tools.optionseye)}}function so(o,t){o&1&&(a(0,"div",122),l(1," Este campo es obligatorio* "),n())}function oo(o,t){if(o&1&&(a(0,"option",119),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function ro(o,t){if(o&1&&(a(0,"option",119),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function lo(o,t){if(o&1&&(a(0,"option",119),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function co(o,t){if(o&1&&(a(0,"option",119),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function uo(o,t){if(o&1&&(a(0,"option",119),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function mo(o,t){if(o&1&&(a(0,"option",119),l(1),n()),o&2){let e=t.$implicit;d("value",e.value)("disabled",e.disabled),r(),v(e.label)}}function po(o,t){if(o&1){let e=b();a(0,"button",126),h("click",function(){p(e);let s=u(3);return _(s.AutoCompletarLastestudiantesifas())}),a(1,"span",13),x(2,"ng-lottie",14),n(),a(3,"span"),l(4,"AUTO COMPLETAR "),n(),x(5,"span",15),n()}if(o&2){let e=u(3);r(2),d("options",e._tools.optionsautocompletar)}}function _o(o,t){if(o&1&&(a(0,"div",124),g(1,po,6,1,"button",125),n()),o&2){let e=u(2);r(),d("ngIf",!e.AnimacionCargabtnModalestudiantesifas)}}function fo(o,t){if(o&1){let e=b();a(0,"button",127),h("click",function(){p(e);let s=u().$implicit,c=u();return s.dismiss(),_(c.resetestudiantesifas())}),a(1,"span",13),x(2,"ng-lottie",14),n(),a(3,"span"),l(4,"CANCELAR"),n(),x(5,"span",15),n()}if(o&2){let e=u(2);r(2),d("options",e._tools.optionscancelar)}}function go(o,t){if(o&1){let e=b();a(0,"button",128),h("click",function(){p(e);let s=u(2);return _(s.AgregarModificarestudiantesifas())}),x(1,"span",129),n()}o&2&&d("disabled",!0)}function ho(o,t){if(o&1){let e=b();a(0,"button",130),h("click",function(){p(e);let s=u(2);return _(s.AgregarModificarestudiantesifas())}),a(1,"span",13),x(2,"ng-lottie",14),n(),a(3,"span"),l(4),n(),x(5,"span",15),n()}if(o&2){let e,i,s=u(2);d("disabled",s.isUploadingFoto),r(2),d("options",(e=s.newestudiantesifas.get("id"))!=null&&e.value?s._tools.optionsEditar:s._tools.optionsAdicionar),r(2),v((i=s.newestudiantesifas.get("id"))!=null&&i.value?"MODIFICAR":"REGISTRAR")}}function xo(o,t){if(o&1){let e=b();a(0,"div",50)(1,"h4",51),l(2),n(),a(3,"button",52),h("click",function(){let s=p(e).$implicit,c=u();return s.dismiss(),_(c.resetestudiantesifas())}),n()(),a(4,"div",53)(5,"form",54)(6,"div",7)(7,"div",55)(8,"label",56),l(9,"Foto actual"),n(),g(10,Xs,2,1,"div",57)(11,Ys,2,0,"ng-template",null,4,P),n(),a(13,"div",55)(14,"label",56),l(15,"SUBIR FOTO DE PERFIL (1 archivo)"),n(),a(16,"div",58),h("dragover",function(s){p(e);let c=u();return _(c.onFotoDragOver(s))})("dragleave",function(s){p(e);let c=u();return _(c.onFotoDragLeave(s))})("drop",function(s){p(e);let c=u();return _(c.onFotoDrop(s))})("click",function(){p(e);let s=N(21),c=u();return _(c.abrirSelectorFoto(s))}),a(17,"div",59),l(18,"Arrastra y suelta aqu\xED, o clic para seleccionar archivo"),n(),g(19,Zs,4,3,"div",60),n(),a(20,"input",61,5),h("change",function(s){p(e);let c=u();return _(c.onFotoFileSelected(s))}),n(),a(22,"div",62)(23,"button",63),h("click",function(){p(e);let s=u();return _(s.abrirVinculacionCelular())}),l(24," Vincular celular (QR) "),n(),a(25,"span",64),l(26),n(),a(27,"button",65),h("click",function(){p(e);let s=u();return _(s.iniciarCapturaFotoPorCelular())}),l(28," Tomar foto con celular "),n()(),g(29,Js,2,0,"div",66),n()(),a(30,"div",7)(31,"div",67)(32,"input",68),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"Ap_Paterno"))}),n(),a(33,"label"),l(34,"Apellido Paterno"),n(),a(35,"div",69),l(36,"Este campo es obligatorio*"),n()(),a(37,"div",67)(38,"input",70),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"Ap_Materno"))}),n(),a(39,"label"),l(40,"Apellido Materno"),n(),a(41,"div",69),l(42,"Este campo es obligatorio*"),n()(),a(43,"div",71)(44,"input",72),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"Nombre"))}),n(),a(45,"label"),l(46,"Nombres"),n(),a(47,"div",69),l(48,"Este campo es obligatorio*"),n()()(),a(49,"div",7)(50,"div",67)(51,"input",73),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"CI"))}),n(),a(52,"label"),l(53,"C\xE9dula de Identidad"),n(),a(54,"div",69),l(55,"Este campo es obligatorio*"),n()(),a(56,"div",74)(57,"select",75)(58,"option",76),l(59,"Seleccione una opci\xF3n"),n(),g(60,eo,2,3,"option",77),n(),a(61,"label"),l(62,"Expedido"),n(),a(63,"div",69),l(64,"Este campo es obligatorio*"),n()(),a(65,"div",74)(66,"select",78)(67,"option",76),l(68,"Seleccione una opci\xF3n"),n(),g(69,to,2,3,"option",77),n(),a(70,"label"),l(71,"Sexo"),n(),a(72,"div",69),l(73,"Este campo es obligatorio*"),n()(),a(74,"div",67)(75,"input",79),h("change",function(s){let c;p(e);let m=u();return _((c=m.newestudiantesifas.get("Edad"))==null?null:c.setValue(m._tools.CalcularEdad(s.target.value)))}),n(),a(76,"label"),l(77,"Fecha de Nacimiento"),n(),a(78,"div",69),l(79,"Este campo es obligatorio*"),n()(),a(80,"div",74),x(81,"input",80),a(82,"label"),l(83,"Edad"),n(),a(84,"div",69),l(85,"Este campo es obligatorio*"),n()()(),a(86,"div",7)(87,"div",67)(88,"input",81),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"Celular"))}),n(),a(89,"label"),l(90,"Celular"),n(),a(91,"div",69),l(92,"Este campo es obligatorio*"),n()(),a(93,"div",82)(94,"input",83),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"Direccion"))}),n(),a(95,"label"),l(96,"Direcci\xF3n"),n(),a(97,"div",69),l(98,"Este campo es obligatorio*"),n()(),a(99,"div",84),x(100,"input",85),a(101,"label"),l(102,"Correo"),n(),a(103,"div",69),l(104,"Este campo es obligatorio*"),n()()(),a(105,"div",7)(106,"div",86)(107,"div",87)(108,"div",88)(109,"input",89),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"Usuario"))}),n(),a(110,"label"),l(111,"Usuario"),n()(),g(112,io,2,1,"button",90),n(),g(113,no,2,0,"div",91),n(),a(114,"div",86)(115,"div",87)(116,"div",88),x(117,"input",92),a(118,"label"),l(119,"Contrase\xF1a"),n()(),g(120,ao,2,1,"button",93),n(),g(121,so,2,0,"div",91),n(),a(122,"div",84)(123,"select",94)(124,"option",76),l(125,"Seleccione una opci\xF3n"),n(),g(126,oo,2,3,"option",77),n(),a(127,"label"),l(128,"Estado"),n(),a(129,"div",69),l(130,"Este campo es obligatorio*"),n()()(),x(131,"hr"),a(132,"div",7)(133,"div",84)(134,"input",95),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"Nombre_Padre"))}),n(),a(135,"label"),l(136,"Nombre Padre"),n(),a(137,"div",69),l(138,"Este campo es obligatorio*"),n()(),a(139,"div",67)(140,"select",96)(141,"option",76),l(142,"Seleccione una opci\xF3n"),n(),g(143,ro,2,3,"option",77),n(),a(144,"label"),l(145,"Ocupaci\xF3n del Padre"),n(),a(146,"div",69),l(147,"Este campo es obligatorio*"),n()(),a(148,"div",84)(149,"input",97),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"NumCelP"))}),n(),a(150,"label"),l(151,"N\xFAmero Celular del Padre"),n(),a(152,"div",69),l(153,"Este campo es obligatorio*"),n()()(),a(154,"div",7)(155,"div",84)(156,"input",98),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"Nombre_Madre"))}),n(),a(157,"label"),l(158,"Nombre Madre"),n(),a(159,"div",69),l(160,"Este campo es obligatorio*"),n()(),a(161,"div",67)(162,"select",99)(163,"option",76),l(164,"Seleccione una opci\xF3n"),n(),g(165,lo,2,3,"option",77),n(),a(166,"label"),l(167,"Ocupaci\xF3n de la Madre"),n(),a(168,"div",69),l(169,"Este campo es obligatorio*"),n()(),a(170,"div",84)(171,"input",100),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"NumCelM"))}),n(),a(172,"label"),l(173,"N\xFAmero Celular de la Madre"),n(),a(174,"div",69),l(175,"Este campo es obligatorio*"),n()()(),a(176,"div",7)(177,"div",67)(178,"input",101),h("change",function(s){p(e);let c=u();return _(c._tools.EscribirEnMayuscula(s,c.newestudiantesifas,"NColegio"))}),n(),a(179,"label"),l(180,"Nombre Colegio"),n(),a(181,"div",69),l(182,"Este campo es obligatorio*"),n()(),a(183,"div",67)(184,"select",102)(185,"option",76),l(186,"Seleccione una opci\xF3n"),n(),g(187,co,2,3,"option",77),n(),a(188,"label"),l(189,"Tipo Colegio"),n(),a(190,"div",69),l(191,"Este campo es obligatorio*"),n()(),a(192,"div",67)(193,"select",103)(194,"option",76),l(195,"Seleccione una opci\xF3n"),n(),g(196,uo,2,3,"option",77),n(),a(197,"label"),l(198,"Nivel del Colegio"),n(),a(199,"div",69),l(200,"Este campo es obligatorio*"),n()(),a(201,"div",67)(202,"select",104)(203,"option",76),l(204,"Seleccione una opci\xF3n"),n(),g(205,mo,2,3,"option",77),n(),a(206,"label"),l(207,"Grado en Colegio"),n(),a(208,"div",69),l(209,"Este campo es obligatorio*"),n()()(),a(210,"div",105)(211,"label"),l(212,"Informaci\xF3n Compartida IFAS"),n(),x(213,"quill-editor",106),a(214,"div",69),l(215,"Este campo es obligatorio*"),n()()()(),a(216,"div",107),g(217,_o,2,1,"div",108),a(218,"div",109),g(219,fo,6,1,"button",110),n(),a(220,"div",111),g(221,go,2,1,"button",112)(222,ho,6,3,"button",113),n()()}if(o&2){let e,i,s,c,m,E=N(12),f=u();r(2),I("",(e=f.newestudiantesifas.get("id"))!=null&&e.value?"Modificar":"Registrar"," Informaci\xF3n Personal Estudiante"),r(3),d("formGroup",f.newestudiantesifas),r(5),d("ngIf",(i=f.newestudiantesifas.get("Foto"))==null?null:i.value)("ngIfElse",E),r(6),G("border-primary",f.isDraggingFoto)("bg-light",f.isDraggingFoto),r(3),d("ngIf",f.isUploadingFoto),r(4),d("disabled",f.isUploadingFoto),r(2),d("ngClass",Ve(57,Ms,f.pairingStatus==="LINKED",!f.pairingStatus||f.pairingStatus==="PENDING",f.pairingStatus==="EXPIRED"||f.pairingStatus==="REVOKED")),r(),I(" ",f.pairingStatus==="LINKED"?"VINCULADO":f.pairingStatus||"NO VINCULADO"," "),r(),d("disabled",f.isUploadingFoto),r(2),d("ngIf",((s=f.newestudiantesifas.get("Foto"))==null?null:s.touched)&&((s=f.newestudiantesifas.get("Foto"))==null?null:s.invalid)),r(3),d("ngClass",f.ValidacionestudiantesifasxElemento("Ap_Paterno")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Ap_Materno")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Nombre")),r(7),d("ngClass",f.ValidacionestudiantesifasxElemento("CI")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Expedido")),r(3),d("ngForOf",f.expedidoOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Sexo")),r(3),d("ngForOf",f.sexoOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("FechaNac")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Edad")),r(7),d("ngClass",f.ValidacionestudiantesifasxElemento("Celular")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Direccion")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("Correo")),r(9),d("ngClass",f.ValidacionestudiantesifasxElemento("Usuario")),r(3),d("ngIf",!f.AnimacionCargabtnModalplanteldocentes),r(),d("ngIf",((c=f.newestudiantesifas.get("Usuario"))==null?null:c.touched)&&((c=f.newestudiantesifas.get("Usuario"))==null?null:c.invalid)),r(4),d("type",f.mostrarContrasenia?"text":"password")("ngClass",f.ValidacionestudiantesifasxElemento("Contrasenia")),r(3),d("ngIf",!f.AnimacionCargabtnModalplanteldocentes),r(),d("ngIf",((m=f.newestudiantesifas.get("Contrasenia"))==null?null:m.touched)&&((m=f.newestudiantesifas.get("Contrasenia"))==null?null:m.invalid)),r(2),d("ngClass",f.ValidacionestudiantesifasxElemento("Estado")),r(3),d("ngForOf",f.estadoOptions),r(8),d("ngClass",f.ValidacionestudiantesifasxElemento("Nombre_Padre")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("OcupacionP")),r(3),d("ngForOf",f.OcupacionOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("NumCelP")),r(7),d("ngClass",f.ValidacionestudiantesifasxElemento("Nombre_Madre")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("OcupacionM")),r(3),d("ngForOf",f.OcupacionOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("NumCelM")),r(7),d("ngClass",f.ValidacionestudiantesifasxElemento("NColegio")),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("TipoColegio")),r(3),d("ngForOf",f.tipoColegioOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("CNivel")),r(3),d("ngForOf",f.nivelColegioOptions),r(6),d("ngClass",f.ValidacionestudiantesifasxElemento("CGrado")),r(3),d("ngForOf",f.gradoColegioOptions),r(8),d("modules",f.modulesQuillEdicion)("ngClass",f.ValidacionestudiantesifasxElemento("InformacionCompartidaIFAS")),r(4),d("ngIf",!f.newestudiantesifas.get("id").value),r(2),d("ngIf",!f.AnimacionCargabtnModalestudiantesifas),r(2),d("ngIf",f.AnimacionCargabtnModalestudiantesifas),r(),d("ngIf",!f.AnimacionCargabtnModalestudiantesifas)}}function vo(o,t){if(o&1&&(a(0,"div",137),x(1,"img",138),n()),o&2){let e=u(2);r(),d("src",e.pairingQrDataUrl,F)}}function Eo(o,t){if(o&1&&(a(0,"div",133)(1,"a",139),l(2,"Abrir link en el celular"),n()()),o&2){let e=u(2);r(),d("href",e.pairingUrl,F)}}function bo(o,t){if(o&1){let e=b();a(0,"div",50)(1,"h4",51),l(2,"Vincular celular"),n(),a(3,"button",52),h("click",function(){let s=p(e).$implicit;return _(s.dismiss())}),n()(),a(4,"div",53)(5,"div",131),l(6,"Escanea este QR una sola vez desde el celular."),n(),g(7,vo,2,1,"div",132),a(8,"div",133)(9,"div",134),l(10,"Estado"),n(),a(11,"div",135),l(12),n()(),g(13,Eo,3,1,"div",136),n()}if(o&2){let e=u();r(7),d("ngIf",e.pairingQrDataUrl),r(5),v(e.pairingStatus||"..."),r(),d("ngIf",e.pairingUrl)}}function Co(o,t){if(o&1){let e=b();a(0,"div",50)(1,"h4",51),l(2,"Esperando foto..."),n(),a(3,"button",52),h("click",function(){let s=p(e).$implicit;return _(s.dismiss())}),n()(),a(4,"div",53)(5,"div",59),l(6,"En el celular entra a \u201CCaptura desde celular\u201D (ya vinculado) y toma la foto."),n(),a(7,"div",133)(8,"div",134),l(9,"Estado"),n(),a(10,"div",135),l(11),n()(),a(12,"div",140)(13,"button",141),h("click",function(){let s=p(e).$implicit;return u().cancelarEsperaCaptura(),_(s.close())}),l(14,"Cancelar espera"),n()()()}if(o&2){let e=u();r(11),v(e.capturaStatus||"PENDING")}}function So(o,t){if(o&1){let e=b();a(0,"button",144),h("click",function(){let s=p(e).$implicit;return _(s.action())}),l(1),n()}if(o&2){let e=t.$implicit;r(),I(" ",e.label," ")}}function yo(o,t){if(o&1&&(a(0,"div",142),Y(1,"async"),Y(2,"async"),g(3,So,2,1,"button",143),Y(4,"async"),n()),o&2){let e,i,s=u();d("ngStyle",V(8,Ps,((e=Z(1,2,s.menuStateestudiantesifas$))==null?null:e.y)+"px",((e=Z(2,4,s.menuStateestudiantesifas$))==null?null:e.x)+"px")),r(3),d("ngForOf",(i=Z(4,6,s.menuStateestudiantesifas$))==null?null:i.items)}}function Io(o,t){if(o&1){let e=b();a(0,"div",50)(1,"h5",51),l(2,"Inscripciones del estudiante"),n(),a(3,"button",145),h("click",function(){let s=p(e).$implicit;return _(s.dismiss())}),n()(),a(4,"div",53),x(5,"app-estudiantesinscritos",146),n()}if(o&2){let e=u();r(5),d("modo","estudiante")("estudianteId",e.estudianteSeleccionadoId)("nombreEstudiante",e.estudianteSeleccionadoNombre)("fotoEstudiante",e.estudianteSeleccionadoFoto)("sexoEstudiante",e.estudianteSeleccionadoSexo)}}var we=class we{constructor(t,e,i,s,c,m){this._est=t;this._tools=e;this._controles=i;this._capture=s;this._pairing=c;this.router=m;this.modulesQuillEdicion={toolbar:[["bold","italic","underline","strike"],[{align:[]}],[{size:["small",!1,"large"]}],[{color:[]},{background:[]}],[{font:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","video"],["clean"]]};this.modulesQuillShow={toolbar:!1};this.sexoOptions=[];this.expedidoOptions=[];this.estadoOptions=[];this.especialidadOptions=[];this.tipoColegioOptions=[];this.nivelColegioOptions=[];this.gradoColegioOptions=[];this.OcupacionOptions=[];this.pairingToken=null;this.pairingStatus=null;this.pairingUrl=null;this.pairingQrDataUrl=null;this.pairingIntervalId=null;this.capturaToken=null;this.capturaStatus=null;this.capturaIntervalId=null;this.isDraggingFoto=!1;this.isUploadingFoto=!1;this.uploadProgressFoto=0;this.fotoAnteriorPath=null;this.fotoTempPath=null;this.estudiantesifas=[];this.paginaestudiantesifas=1;this.isLoadingestudiantesifas=!0;this.AnimacionCargabtnModalestudiantesifas=!1;this.filtertxtestudiantesifas="";this.sortByColumnestudiantesifas="id";this.sortDirestudiantesifas="desc";this.ordenManualestudiantesifas=!1;this.rowIndexBaseestudiantesifas=0;this.estudianteSeleccionadoId=null;this.estudianteSeleccionadoNombre=null;this.estudianteSeleccionadoFoto=null;this.estudianteSeleccionadoSexo=null;this.collectionSizeestudiantesifas=0;this.pageSizeestudiantesifas=10;this.pageSizeOptionsestudiantesifas=[5,10,20,50];this.menuStateestudiantesifas$=this._tools.state$;this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this.newestudiantesifasAnteriorAccion=this._est.createFormGroupestudiantesifas()}ngOnInit(){this.Cargarestudiantesifas(),this.cargarVinculacionDesdeStorage(),this.cargarOptionsDesdeControles()}cargarOptionsDesdeControles(){let t=["SEXO","EXPEDIDO","ESTADO","ESPECIALIDAD","TIPO COLEGIO","GRADO DE COLEGIO","NIVEL EN COLEGIO","OCUPACIONES PADRES"];this._controles.ObtenerOptionsSelectPorCategorias(t).subscribe({next:e=>{this.sexoOptions=e?.SEXO||[],this.expedidoOptions=e?.EXPEDIDO||[],this.estadoOptions=e?.ESTADO||[],this.especialidadOptions=e?.ESPECIALIDAD||[],this.tipoColegioOptions=e?.["TIPO COLEGIO"]||[],this.nivelColegioOptions=e?.["NIVEL EN COLEGIO"]||[],this.gradoColegioOptions=e?.["GRADO DE COLEGIO"]||[],this.OcupacionOptions=e?.["OCUPACIONES PADRES"]||[]},error:()=>{this.sexoOptions=[],this.expedidoOptions=[],this.estadoOptions=[],this.especialidadOptions=[],this.tipoColegioOptions=[],this.nivelColegioOptions=[],this.gradoColegioOptions=[],this.OcupacionOptions=[]}})}abrirModalNuevoEstudiantesifas(){this.modalGestionestudiantesifasRef=this._tools.openModal(this.modalgestionestudiantesifas,"xl")}ngOnDestroy(){this.detenerPollingCaptura(),this.detenerPollingVinculacion()}cargarVinculacionDesdeStorage(){let t=localStorage.getItem("lcch_capture_pairing_token");t&&(this.pairingToken=t,this.refrescarEstadoVinculacion(!1))}refrescarEstadoVinculacion(t){this.pairingToken&&this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:e=>{let i=e?.data?.status??this.pairingStatus;if(this.pairingStatus=i,i==="REVOKED"||i==="EXPIRED"){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null;return}t&&this._tools.MostrarMensaje("success","Vinculaci\xF3n actualizada")},error:e=>{e?.status===404&&(localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null)}})}abrirVinculacionCelular(){return O(this,null,function*(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida actual");return}this._tools.MostrarMensajeLoading();let t=()=>new Promise((e,i)=>{let s=()=>{this._pairing.crearVinculacion().subscribe({next:c=>{let m=c?.data?.token;if(!m)return i(new Error("No token"));this.pairingToken=m,this.pairingStatus=c?.data?.status??null,localStorage.setItem("lcch_capture_pairing_token",m),e(m)},error:c=>i(c)})};if(this.pairingToken){this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:c=>{let m=c?.data?.status??null;if(this.pairingStatus=m,m==="EXPIRED"||m==="REVOKED"){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null,s();return}e(this.pairingToken)},error:c=>{if(c?.status===404){localStorage.removeItem("lcch_capture_pairing_token"),this.pairingToken=null,this.pairingStatus=null,s();return}i(c)}});return}s()});try{let e=yield t(),i=this.router.serializeUrl(this.router.createUrlTree(["/captura-celular",e])),s=window.location.hostname,m=(s==="localhost"||s==="127.0.0.1")&&U.frontendPublicBaseUrl?U.frontendPublicBaseUrl:document.baseURI;this.pairingUrl=new URL(i,m).toString();try{this.pairingQrDataUrl=yield Rt.toDataURL(this.pairingUrl,{width:240,margin:1})}catch{this.pairingQrDataUrl=null}this.modalVincularCelularRef=this._tools.openModal(this.modalVincularCelular,"md"),this.modalVincularCelularRef.result.finally(()=>{this.detenerPollingVinculacion()}),this.iniciarPollingVinculacion(),this._tools.MostrarMensajeSuccess()}catch(e){console.log("ERROR creando vinculaci\xF3n",e),this._tools.MostrarMensajeError()}})}iniciarPollingVinculacion(){this.detenerPollingVinculacion(),this.pairingToken&&(this.pairingIntervalId=setInterval(()=>{this.pairingToken&&this._pairing.estadoVinculacion(this.pairingToken).subscribe({next:t=>{let e=t?.data?.status;this.pairingStatus=e??this.pairingStatus,e==="LINKED"&&this.detenerPollingVinculacion()},error:()=>{}})},2e3))}detenerPollingVinculacion(){this.pairingIntervalId&&(clearInterval(this.pairingIntervalId),this.pairingIntervalId=null)}iniciarCapturaFotoPorCelular(){return O(this,null,function*(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida actual");return}if(!this.pairingToken||this.pairingStatus!=="LINKED"){this._tools.MostrarMensaje("info","Primero vincule el celular (QR)"),yield this.abrirVinculacionCelular();return}this._tools.MostrarMensajeLoading();let t=this.newestudiantesifas.get("id")?.value?Number(this.newestudiantesifas.get("id")?.value):null;this._pairing.solicitarCaptura(this.pairingToken,t,"Foto").subscribe({next:e=>{let i=e?.data?.token;if(!i){this._tools.MostrarMensajeError();return}this.capturaToken=i,this.capturaStatus=e?.data?.status??"PENDING",this.modalEsperaFotoCelularRef=this._tools.openModal(this.modalEsperaFotoCelular,"md"),this.modalEsperaFotoCelularRef.result.finally(()=>{this.cancelarEsperaCaptura(!0)}),this.iniciarPollingCaptura(),this._tools.MostrarMensajeSuccess()},error:e=>{console.log("ERROR solicitando captura",e),this._tools.MostrarMensajeError()}})})}iniciarPollingCaptura(){this.detenerPollingCaptura(),this.capturaToken&&(this.capturaIntervalId=setInterval(()=>{this.capturaToken&&this._capture.estadoSesion(this.capturaToken).subscribe({next:t=>{let e=t?.data?.status,i=t?.data?.file_path;if(this.capturaStatus=e??this.capturaStatus,e==="UPLOADED"&&i){let s=this.fotoTempPath;this.newestudiantesifas.patchValue({Foto:i}),this.fotoTempPath=i,s&&s!==i&&s!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(s),this.isUploadingFoto=!1,this.uploadProgressFoto=0,this.detenerPollingCaptura(),this.modalEsperaFotoCelularRef?.close(),this._tools.MostrarMensaje("success","Foto recibida desde el celular")}},error:()=>{}})},2e3))}detenerPollingCaptura(){this.capturaIntervalId&&(clearInterval(this.capturaIntervalId),this.capturaIntervalId=null)}cancelarEsperaCaptura(t=!1){let e=this.capturaStatus;this.detenerPollingCaptura(),this.capturaStatus=null,this.capturaToken=null,this.pairingToken&&e!=="UPLOADED"&&this._pairing.cancelarCaptura(this.pairingToken).subscribe({next:()=>{t||this._tools.MostrarMensaje("info","Espera cancelada")},error:()=>{}})}abrirSelectorFoto(t){t.click()}onFotoDragOver(t){t.preventDefault(),this.isDraggingFoto=!0}onFotoDragLeave(t){t.preventDefault(),this.isDraggingFoto=!1}onFotoDrop(t){t.preventDefault(),this.isDraggingFoto=!1;let e=t.dataTransfer?.files;e&&this.handleFotoFiles(e)}onFotoFileSelected(t){let e=t.target,i=e.files;i&&this.handleFotoFiles(i),e.value=""}handleFotoFiles(t){let e=t.item(0);e&&(t.length>1&&this._tools.MostrarMensaje("warning","Solo se permite 1 archivo"),this.subirFoto(e))}subirFoto(t){this.isUploadingFoto=!0,this.uploadProgressFoto=0,this._tools.SubirArchivo(t,"Foto").subscribe({next:e=>{if(e.type===ue.UploadProgress&&e.total){this.uploadProgressFoto=Math.round(e.loaded/e.total*100);return}if(e.type===ue.Response){let s=e.body?.filePath;if(s){let c=this.fotoTempPath;this.newestudiantesifas.patchValue({Foto:s}),this.fotoTempPath=s,c&&c!==s&&c!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(c)}this.isUploadingFoto=!1}},error:e=>{console.error("Error subiendo foto",e),this.isUploadingFoto=!1,this.uploadProgressFoto=0,this._tools.MostrarMensajeError()}})}limpiarFotoTemporalSiCorresponde(){this.fotoTempPath&&this.fotoTempPath!==this.fotoAnteriorPath&&this._tools.EliminarArchivo(this.fotoTempPath),this.fotoTempPath=null,this.fotoAnteriorPath=null,this.isDraggingFoto=!1,this.isUploadingFoto=!1,this.uploadProgressFoto=0}Cargarestudiantesifas(){this.isLoadingestudiantesifas=!0;let t=(this.filtertxtestudiantesifas??"").toString().trim(),e=t!==""&&!this.ordenManualestudiantesifas,i={page:this.paginaestudiantesifas,per_page:this.pageSizeestudiantesifas,search:t,search_mode:"any",relevance:e?1:0,sort_by:this.sortByColumnestudiantesifas,sort_dir:this.sortDirestudiantesifas};this._est.Obtenerestudiantesifas(i).subscribe({next:s=>{console.log("data estudiantes",s.data),this.estudiantesifas=s.data||[],this.collectionSizeestudiantesifas=s?.meta?.total??this.estudiantesifas.length;let c=s?.meta?.from;this.rowIndexBaseestudiantesifas=typeof c=="number"&&c>0?c-1:0,this.isLoadingestudiantesifas=!1},error:s=>{console.error("Error al cargar estudiantesifas",s),this.estudiantesifas=[],this.collectionSizeestudiantesifas=0,this.rowIndexBaseestudiantesifas=0,this.isLoadingestudiantesifas=!1}})}AgregarModificarestudiantesifas(){if(this.isUploadingFoto){this._tools.MostrarMensaje("warning","Espere a que termine la subida de la foto");return}if(this.newestudiantesifas.invalid){this.ValidacionTodoElementoestudiantesifas(),this._tools.MostrarMensajeFrmIncompleto(),this.AnimacionCargabtnModalestudiantesifas=!1;return}else{this.AnimarCargaTablaestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!0,this._tools.MostrarMensajeLoading(),this.newestudiantesifasAnteriorAccion.setValue(this.newestudiantesifas.value);let t=this.newestudiantesifas.controls.id.value;console.log("INFO A PROCESAR",this.newestudiantesifas.value);let e=this.newestudiantesifas.get("Foto")?.value??null,i=this.fotoAnteriorPath;t?this._est.Modificarestudiantesifas(this.newestudiantesifas.value,this.newestudiantesifas.value.id).subscribe(s=>{console.log("SE MODIFICO CORRECTAMENTE estudiantesifas",s.data),i&&e&&i!==e&&this._tools.EliminarArchivo(i),this.Cargarestudiantesifas(),this.fotoTempPath=null,this.fotoAnteriorPath=null,this.resetestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!1,this._tools.MostrarMensajeSuccess()},s=>{let c=s?.status,m=s?.error?.message;c===409?this._tools.MensajeInformacion("CI duplicado",m||"Ya existe un estudiante con ese CI.","warning"):(console.log("ERROR AL MODIFICAR estudiantesifas",s),this._tools.MostrarMensajeError()),this.AnimacionCargabtnModalestudiantesifas=!1}):this._est.Agregarestudiantesifas(this.newestudiantesifas.value).subscribe(s=>{console.log("SE A\xD1ADIO CORRECTAMENTE estudiantesifas",s.data),this.Cargarestudiantesifas(),this.fotoTempPath=null,this.fotoAnteriorPath=null,this.resetestudiantesifas(),this.AnimacionCargabtnModalestudiantesifas=!1,this._tools.MostrarMensajeSuccess()},s=>{let c=s?.status,m=s?.error?.message;c===409?this._tools.MensajeInformacion("CI duplicado",m||"Ya existe un estudiante con ese CI.","warning"):(console.log("ERROR AL A\xD1ADIR estudiantesifas",s),this._tools.MostrarMensajeError()),this.AnimacionCargabtnModalestudiantesifas=!1})}}Seleccionarestudiantesifas(t){if(this._tools.MostrarMensajeLoading(),t){if(!this.estudiantesifas.find(i=>i.id===t))return;this._est.Seleccionarestudiantesifas(t).subscribe(i=>{Object.keys(this.newestudiantesifas.controls).forEach(s=>{this.newestudiantesifas.controls[s].setValue(i.data[s])}),console.log("SELECCION DE estudiantesifas EXITOSA",this.newestudiantesifas.value),this.newestudiantesifasAnteriorAccion.setValue(this.newestudiantesifas.value),this.fotoAnteriorPath=this.newestudiantesifas.get("Foto")?.value??null,this.fotoTempPath=null,this.isUploadingFoto=!1,this.uploadProgressFoto=0,this.modalGestionestudiantesifasRef=this._tools.openModal(this.modalgestionestudiantesifas,"xl"),this._tools.MostrarMensajeSuccess()},i=>{console.log("ERROR AL SELECCIONAR estudiantesifas",i),this._tools.MostrarMensajeError()})}}Eliminarestudiantesifas(t){this._tools.mostrarMensajeConfirm("\xBFSEGURO QUE DESEA ELIMINAR?","SE ELIMINARA EL DATO Y NO SE PODR\xC1 RECUPERAR EL DATO","warning","SI, ESTOY SEGURO","NO").then(e=>{e&&(this._tools.MostrarMensajeLoading(),this._est.Eliminarestudiantesifas(t).subscribe(i=>{console.log(i.data),this.Cargarestudiantesifas(),this._tools.MostrarMensajeSuccess()},i=>{console.log("ERROR AL ELIMINAR estudiantesifas",i),this._tools.MostrarMensajeError()}))})}resetestudiantesifas(){this.limpiarFotoTemporalSiCorresponde(),this.newestudiantesifas=this._est.createFormGroupestudiantesifas(),this._tools.closeModal(this.modalGestionestudiantesifasRef)}AutoCompletarLastestudiantesifas(){this.newestudiantesifas.setValue(this.newestudiantesifasAnteriorAccion.value),this.newestudiantesifas.patchValue({id:0}),console.log("listo",this.newestudiantesifas.value)}AnimarCargaTablaestudiantesifas(){this.estudiantesifas=[],this.isLoadingestudiantesifas=!0}ValidacionestudiantesifasxElemento(t){return this._tools.obtenerValidationClass(this.newestudiantesifas,t)}ValidacionTodoElementoestudiantesifas(){Object.values(this.newestudiantesifas.controls).forEach(t=>{t.markAsTouched(),t.markAsDirty()})}onPageSizeChangeestudiantesifas(){this.paginaestudiantesifas=1,this.Cargarestudiantesifas()}onPageChangeestudiantesifas(t){this.paginaestudiantesifas=t,this.Cargarestudiantesifas()}onSearchChangeestudiantesifas(){this.estudiantesifas=[],this.paginaestudiantesifas=1,this.ordenManualestudiantesifas=!1,this.Cargarestudiantesifas()}escapeHtml(t){return(t??"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}highlightCell(t){let e=(t??"").toString(),i=(this.filtertxtestudiantesifas??"").toString().trim();if(!i)return this.escapeHtml(e);let s=i.split(/\s+/).map(f=>f.trim()).filter(Boolean).sort((f,C)=>C.length-f.length);if(s.length===0)return this.escapeHtml(e);let c=this.escapeHtml(e),m=s.map(f=>this.escapeRegExp(f)).join("|"),E=new RegExp(m,"gi");return c.replace(E,f=>`<mark class="bg-warning text-dark fw-bold px-1 rounded">${f}</mark>`)}sortByestudiantesifas(t,e){e.preventDefault(),this.ordenManualestudiantesifas=!0,this.sortByColumnestudiantesifas===t?this.sortDirestudiantesifas=this.sortDirestudiantesifas==="asc"?"desc":"asc":(this.sortByColumnestudiantesifas=t,this.sortDirestudiantesifas="asc"),this.paginaestudiantesifas=1,this.Cargarestudiantesifas()}isSortedestudiantesifas(t){return this.sortByColumnestudiantesifas===t}getSortDirestudiantesifas(t){return this.sortByColumnestudiantesifas===t?this.sortDirestudiantesifas:null}VisualizarInfoEstudiante(t){this.estudianteSeleccionadoId=t;let e=Array.isArray(this.estudiantesifas)?this.estudiantesifas.find(E=>Number(E?.id)===Number(t)):null,i=(e?.Ap_Paterno??"").toString().trim(),s=(e?.Ap_Materno??"").toString().trim(),c=(e?.Nombre??"").toString().trim(),m=`${i} ${s} ${c}`.replace(/\s+/g," ").trim();this.estudianteSeleccionadoNombre=m||`#${t}`,this.estudianteSeleccionadoFoto=e?.Foto??null,this.estudianteSeleccionadoSexo=e?.Sexo??null}closeMenu(){this._tools.close()}abrirMenuestudiantesifas(t,e){t.preventDefault(),t.stopPropagation(),console.log("aS",e);let i=[{label:"\u270F Editar",action:()=>this.Seleccionarestudiantesifas(e.id)},{label:"\u{1F5D1}\uFE0F Eliminar",action:()=>this.Eliminarestudiantesifas(e.id)}];this._tools.open(t.clientX,t.clientY,i)}};we.\u0275fac=function(e){return new(e||we)(w(W),w(ve),w(Qe),w(Ee),w(be),w(Le))},we.\u0275cmp=re({type:we,selectors:[["app-estudiantesifas"]],viewQuery:function(e,i){if(e&1&&(B(As,7),B(Ts,7),B(Vs,7)),e&2){let s;j(s=$())&&(i.modalVincularCelular=s.first),j(s=$())&&(i.modalEsperaFotoCelular=s.first),j(s=$())&&(i.modalgestionestudiantesifas=s.first)}},hostBindings:function(e,i){e&1&&h("click",function(){return i.closeMenu()},ke)},standalone:!1,decls:74,vars:26,consts:[["modalgestionestudiantesifas",""],["modalVincularCelular",""],["modalEsperaFotoCelular",""],["modalOtroComponenteinfoestudiantes",""],["sinFotoEst",""],["fotoInputEst",""],[1,"container","mt-4"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"lead","text-secondary","subtitulosGlobales"],[1,"button","col-sm-3","d-flex","justify-content-start"],[1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click"],[2,"display","flex","align-items","center","justify-content","center","width","30px","height","30px"],["width","50px","height","50px",3,"options"],[1,"dir-part"],[1,"col-sm-3","ms-auto","d-flex","justify-content-end"],["title","PRESIONAR TECLA ENTER PARA REALIZAR BUSQUEDA",1,"input-group"],[1,"input-group-text"],["width","30px","height","30px",3,"options"],[1,"form-floating"],["type","text","placeholder","Buscar","title","PRESIONAR TECLA ENTER PARA REALIZAR BUSQUEDA",1,"form-control",3,"keyup.enter","ngModelChange","ngModel"],[1,"mt-4"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-sm","align-middle"],[1,""],[1,"text-center"],[2,"user-select","none","-webkit-user-select","none","-moz-user-select","none",3,"click"],["class","bi",3,"ngClass",4,"ngIf"],[4,"ngIf"],["style","cursor: pointer;",3,"contextmenu",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["previousLabel","Anterior","nextLabel","Siguiente",3,"pageChange","page","collectionSize","pageSize","maxSize","rotate","ellipses","boundaryLinks"],[1,"form-select",2,"width","auto",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","context-menu",3,"ngStyle",4,"ngIf"],[1,"bi",3,"ngClass"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[2,"cursor","pointer",3,"contextmenu"],[3,"innerHTML"],[1,"text-center","d-flex","justify-content-center","align-items-center",2,"gap","5px"],["title","Visualizar Inscripciones",1,"btn","btn-outline-light","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src",4,"ngIf"],["width","30px","height","35px",3,"options",4,"ngIf"],["title","Modificar informaci\xF3n",1,"btn","btn-outline-warning","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["title","Eliminar informaci\xF3n",1,"btn","btn-outline-danger","btn-sm","d-flex","justify-content-center","align-items-center","p-0",2,"width","40px","height","40px","overflow","hidden",3,"click","mouseenter","mouseleave"],["width","20",3,"src"],["width","30px","height","35px",3,"options"],[3,"value"],[1,"modal-header"],[1,"modal-title"],["type","button","title","cerrar",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup"],[1,"mb-3","col-sm-6"],[1,"form-label"],[4,"ngIf","ngIfElse"],[1,"border","rounded","p-3","text-center",3,"dragover","dragleave","drop","click"],[1,"text-muted"],["class","mt-2",4,"ngIf"],["type","file","accept","image/*",1,"d-none",3,"change"],[1,"mt-2","d-flex","justify-content-start"],["type","button",1,"btn","btn-outline-secondary","btn-sm","me-2",3,"click","disabled"],[1,"badge","align-self-center","me-2",3,"ngClass"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],["class","text-danger small",4,"ngIf"],[1,"form-floating","mb-3","col-sm-3"],["type","text","placeholder","","formControlName","Ap_Paterno",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"invalid-feedback"],["type","text","placeholder","","formControlName","Ap_Materno",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-6"],["type","text","placeholder","","formControlName","Nombre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","CI",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-2"],["formControlName","Expedido",1,"form-control",3,"ngClass"],["disabled","",3,"value"],[3,"value","disabled",4,"ngFor","ngForOf"],["formControlName","Sexo",1,"form-control",3,"ngClass"],["type","date","placeholder","","formControlName","FechaNac",1,"form-control",3,"change","ngClass"],["type","number","placeholder","","formControlName","Edad","readonly","","tabindex","-1",1,"form-control",2,"pointer-events","none","background-color","#e9ecef",3,"ngClass"],["type","text","placeholder","","formControlName","Celular",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-5"],["type","text","placeholder","","formControlName","Direccion",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],[1,"form-floating","mb-3","col-sm-4"],["type","text","placeholder","","formControlName","Correo",1,"form-control",3,"ngClass"],[1,"mb-3","col-sm-4"],[1,"d-flex","align-items-end",2,"gap","10px"],[1,"form-floating","flex-grow-1"],["type","text","placeholder","","formControlName","Usuario",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","button","title","Generar Usuario","class","btn mouse-dir secondary d-flex align-items-center justify-content-center p-0","style","width: 58px; height: 58px;",3,"click",4,"ngIf"],["class","invalid-feedback d-block",4,"ngIf"],["placeholder","","formControlName","Contrasenia",1,"form-control",3,"type","ngClass"],["type","button","title","Mostrar/Ocultar Contrasenia","class","btn mouse-dir secondary d-flex align-items-center justify-content-center p-0","style","width: 58px; height: 58px;",3,"click",4,"ngIf"],["formControlName","Estado",1,"form-control",3,"ngClass"],["type","text","placeholder","","formControlName","Nombre_Padre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","OcupacionP",1,"form-control",3,"ngClass"],["type","number","placeholder","","formControlName","NumCelP",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","Nombre_Madre",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","OcupacionM",1,"form-control",3,"ngClass"],["type","number","placeholder","","formControlName","NumCelM",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["type","text","placeholder","","formControlName","NColegio",1,"form-control",2,"text-transform","uppercase",3,"change","ngClass"],["formControlName","TipoColegio",1,"form-control",3,"ngClass"],["formControlName","CNivel",1,"form-control",3,"ngClass"],["formControlName","CGrado",1,"form-control",3,"ngClass"],[1,"col-sm-12"],["placeholder","","formControlName","InformacionCompartidaIFAS",1,"quill-container-wrapper",3,"modules","ngClass"],[1,"modal-footer"],["class","button d-flex justify-content-start",4,"ngIf"],[1,"button","me-2"],["title","Cancelar y cerrar","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],[1,"button"],["class","btn mouse-dir success","title","Procesando informaci\xF3n",3,"disabled","click",4,"ngIf"],["class","btn mouse-dir primary d-flex align-items-center","style"," gap: 8px;","title","Accionar",3,"disabled","click",4,"ngIf"],["alt","Foto",1,"img-thumbnail",2,"width","140px","height","140px","object-fit","cover",3,"src"],[1,"mt-2"],[1,"progress"],["role","progressbar",1,"progress-bar"],[1,"text-danger","small"],[3,"value","disabled"],["type","button","title","Generar Usuario",1,"btn","mouse-dir","secondary","d-flex","align-items-center","justify-content-center","p-0",2,"width","58px","height","58px",3,"click"],["width","70px","height","70px",3,"options"],[1,"invalid-feedback","d-block"],["type","button","title","Mostrar/Ocultar Contrasenia",1,"btn","mouse-dir","secondary","d-flex","align-items-center","justify-content-center","p-0",2,"width","58px","height","58px",3,"click"],[1,"button","d-flex","justify-content-start"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n","class","btn mouse-dir secondary d-flex align-items-center","style"," gap: 8px;",3,"click",4,"ngIf"],["title","Se Autocompletar\xE1 la ultima informaci\xF3n",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Cancelar y cerrar",1,"btn","mouse-dir","secondary","d-flex","align-items-center",2,"gap","8px",3,"click"],["title","Procesando informaci\xF3n",1,"btn","mouse-dir","success",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["title","Accionar",1,"btn","mouse-dir","primary","d-flex","align-items-center",2,"gap","8px",3,"click","disabled"],[1,"mb-2","text-muted"],["class","d-flex justify-content-center",4,"ngIf"],[1,"mt-3"],[1,"small","text-muted"],[1,"fw-semibold"],["class","mt-3",4,"ngIf"],[1,"d-flex","justify-content-center"],["alt","QR",2,"max-width","260px","width","100%",3,"src"],["target","_blank","rel","noopener",3,"href"],[1,"mt-3","d-flex","justify-content-end"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"context-menu",3,"ngStyle"],["class","context-item",3,"click",4,"ngFor","ngForOf"],[1,"context-item",3,"click"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[3,"modo","estudianteId","nombreEstudiante","fotoEstudiante","sexoEstudiante"]],template:function(e,i){if(e&1){let s=b();a(0,"div",6)(1,"div",7)(2,"div",8)(3,"h1",9),l(4,"Gesti\xF3n de la Informaci\xF3n Personal de los estudiantes"),n(),a(5,"p",10),l(6,"Administra la informaci\xF3n Personal de los estudiantes de manera sencilla y eficiente"),n()()()(),a(7,"div",7)(8,"div",11)(9,"button",12),h("click",function(){return p(s),_(i.abrirModalNuevoEstudiantesifas())}),a(10,"span",13),x(11,"ng-lottie",14),n(),a(12,"span"),l(13,"A\xF1adir estudiantesifas "),n(),x(14,"span",15),n()(),a(15,"div",16)(16,"div",17)(17,"span",18),x(18,"ng-lottie",19),n(),a(19,"div",20)(20,"input",21),h("keyup.enter",function(){return p(s),_(i.onSearchChangeestudiantesifas())}),L("ngModelChange",function(m){return p(s),R(i.filtertxtestudiantesifas,m)||(i.filtertxtestudiantesifas=m),_(m)}),n(),a(21,"label"),l(22,"Buscar"),n()()()()(),a(23,"div",22)(24,"div",23)(25,"table",24)(26,"thead",25)(27,"tr")(28,"th",26),l(29,"#"),n(),a(30,"th",27),h("click",function(m){return p(s),_(i.sortByestudiantesifas("Ap_Paterno",m))}),l(31," Ap_Paterno "),g(32,Fs,1,4,"i",28),n(),a(33,"th",27),h("click",function(m){return p(s),_(i.sortByestudiantesifas("Ap_Materno",m))}),l(34," Ap_Materno "),g(35,Os,1,4,"i",28),n(),a(36,"th",27),h("click",function(m){return p(s),_(i.sortByestudiantesifas("Nombre",m))}),l(37," Nombre "),g(38,ks,1,4,"i",28),n(),a(39,"th",27),h("click",function(m){return p(s),_(i.sortByestudiantesifas("CI",m))}),l(40," CI "),g(41,Ns,1,4,"i",28),n(),a(42,"th",27),h("click",function(m){return p(s),_(i.sortByestudiantesifas("Expedido",m))}),l(43," Exp. "),g(44,Ds,1,4,"i",28),n(),a(45,"th",27),h("click",function(m){return p(s),_(i.sortByestudiantesifas("Sexo",m))}),l(46," Sexo "),g(47,Rs,1,4,"i",28),n(),a(48,"th",27),h("click",function(m){return p(s),_(i.sortByestudiantesifas("Edad",m))}),l(49," Edad "),g(50,Ls,1,4,"i",28),n(),a(51,"th",27),h("click",function(m){return p(s),_(i.sortByestudiantesifas("Estado",m))}),l(52," Estado "),g(53,Bs,1,4,"i",28),n(),a(54,"th",26),l(55,"ACCIONES"),n()()(),a(56,"tbody"),g(57,js,5,1,"tr",29)(58,$s,3,1,"tr",29)(59,Ws,29,15,"tr",30),n()()(),a(60,"div",31)(61,"ngb-pagination",32),L("pageChange",function(m){return p(s),R(i.paginaestudiantesifas,m)||(i.paginaestudiantesifas=m),_(m)}),h("pageChange",function(m){return p(s),_(i.onPageChangeestudiantesifas(m))}),n(),a(62,"select",33),L("ngModelChange",function(m){return p(s),R(i.pageSizeestudiantesifas,m)||(i.pageSizeestudiantesifas=m),_(m)}),h("change",function(){return p(s),_(i.onPageSizeChangeestudiantesifas())}),g(63,Ks,2,2,"option",34),n()()(),g(64,xo,223,61,"ng-template",null,0,P)(66,bo,14,3,"ng-template",null,1,P)(68,Co,15,1,"ng-template",null,2,P)(70,yo,5,11,"div",35),Y(71,"async"),g(72,Io,6,5,"ng-template",null,3,P)}if(e&2){let s;r(11),d("options",i._tools.optionsAdicionar),r(7),d("options",i._tools.optionslupa),r(2),D("ngModel",i.filtertxtestudiantesifas),r(12),d("ngIf",i.isSortedestudiantesifas("Ap_Paterno")),r(3),d("ngIf",i.isSortedestudiantesifas("Ap_Materno")),r(3),d("ngIf",i.isSortedestudiantesifas("Nombre")),r(3),d("ngIf",i.isSortedestudiantesifas("CI")),r(3),d("ngIf",i.isSortedestudiantesifas("Expedido")),r(3),d("ngIf",i.isSortedestudiantesifas("Sexo")),r(3),d("ngIf",i.isSortedestudiantesifas("Edad")),r(3),d("ngIf",i.isSortedestudiantesifas("Estado")),r(4),d("ngIf",i.isLoadingestudiantesifas),r(),d("ngIf",!i.isLoadingestudiantesifas&&(!i.estudiantesifas||i.estudiantesifas.length===0)),r(),d("ngForOf",i.estudiantesifas),r(2),D("page",i.paginaestudiantesifas),d("collectionSize",i.collectionSizeestudiantesifas)("pageSize",i.pageSizeestudiantesifas)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0),r(),D("ngModel",i.pageSizeestudiantesifas),r(),d("ngForOf",i.pageSizeOptionsestudiantesifas),r(7),d("ngIf",(s=Z(71,24,i.menuStateestudiantesifas$))==null?null:s.visible)}},dependencies:[le,ce,de,lt,$e,ge,he,Be,Ue,fe,pe,je,_e,ze,Ge,He,xe,We,Ie,ct],encapsulation:2});var Ye=we;var wo=[{path:"estudiantes",component:Ye},{path:"asignarestudiantes",component:Se},{path:"estudiantesinscritos",component:Ie}],ne=class ne{};ne.\u0275fac=function(e){return new(e||ne)},ne.\u0275mod=Ne({type:ne}),ne.\u0275inj=Fe({imports:[st.forChild(wo),st]});var Ze=ne;var ae=class ae{};ae.\u0275fac=function(e){return new(e||ae)},ae.\u0275mod=Ne({type:ae}),ae.\u0275inj=Fe({imports:[dt,ht,Ze,It,gt]});var Lt=ae;export{Lt as TiemposinscripcionesModule};
