import{c as Gt}from"./chunk-VRTRBCXU.js";import{b as Ot}from"./chunk-GEOJTL7L.js";import{a as Vt}from"./chunk-TFYNVOGS.js";import{a as ft}from"./chunk-KFXCIGMC.js";import{g as Rt}from"./chunk-4W7OKCCT.js";import{b as xt,c as bt,e as at,f as St,g as Et,h as Ct,i as f,j as Pt,k as It,l as yt,o as Tt,p as Mt,q as wt,r as Nt,s as At,u as Dt,v as Ft}from"./chunk-S3CK6CTG.js";import{Da as c,Ea as n,Fa as i,Ga as F,J as st,K as z,Ka as B,La as L,M as lt,Na as M,P as C,Q as P,Qa as T,Qb as pt,Sa as m,Sb as mt,Tb as ut,Yb as _t,_b as gt,dc as vt,ea as o,eb as a,fb as p,gb as N,hb as it,hc as ht,ib as dt,la as $,lb as K,mb as W,na as ct,nb as Y,oa as U,sa as _,sb as v,tb as J,va as et,wc as nt,xb as j,zb as q}from"./chunk-T7ZSEIVN.js";import{g as H}from"./chunk-ATDPNAVO.js";var O=class O{constructor(e){this.http=e;this.ruta=ft.ruta}buildParams(e){let t=new vt;return Object.keys(e).forEach(s=>{let l=e[s];if(l==null)return;let d=String(l).trim();d!==""&&(t=t.set(s,d))}),t}Obtenercalifhistorias(){return this.http.get(this.ruta+"api/califhistorias/")}Agregarcalifhistorias(e){return this.http.post(this.ruta+"api/califhistorias/",e)}Modificarcalifhistorias(e,t){return this.http.put(this.ruta+"api/califhistorias/"+t,e)}Seleccionarcalifhistorias(e){return this.http.get(this.ruta+"api/califhistorias/"+e)}Eliminarcalifhistorias(e){return this.http.delete(this.ruta+"api/califhistorias/"+e)}OpcionesInstituciones(){return this.http.get(this.ruta+"api/califhistorias/opciones/instituciones")}OpcionesAnios(e){return this.http.get(this.ruta+"api/califhistorias/opciones/anios",{params:this.buildParams({institucion:e})})}OpcionesMallas(e,t){return this.http.get(this.ruta+"api/califhistorias/opciones/mallas",{params:this.buildParams({institucion:e,anio:t})})}OpcionesNiveles(e,t,s){return this.http.get(this.ruta+"api/califhistorias/opciones/niveles",{params:this.buildParams({institucion:e,anio:t,malla:s})})}OpcionesCursos(e,t,s,l){return this.http.get(this.ruta+"api/califhistorias/opciones/cursos",{params:this.buildParams({institucion:e,anio:t,malla:s,nivel_curso:l})})}OpcionesDocentes(e,t,s){return this.http.get(this.ruta+"api/califhistorias/opciones/docentes",{params:this.buildParams({institucion:e,anio:t,malla:s})})}OpcionesDocentesEspecialidad(e,t,s){return this.http.get(this.ruta+"api/califhistorias/opciones/docentes-especialidad",{params:this.buildParams({institucion:e,anio:t,malla:s})})}OpcionesCIs(e,t,s){return this.http.get(this.ruta+"api/califhistorias/opciones/cis",{params:this.buildParams({institucion:e,q:t,limit:s})})}ConsultarPorCurso(e){return this.http.get(this.ruta+"api/califhistorias/consultas/curso",{params:this.buildParams(e)})}ConsultarPorDocente(e){return this.http.get(this.ruta+"api/califhistorias/consultas/docente",{params:this.buildParams(e)})}ConsultarPorDocenteEspecialidad(e){return this.http.get(this.ruta+"api/califhistorias/consultas/docente-especialidad",{params:this.buildParams(e)})}ConsultarPorEstudiante(e){return this.http.get(this.ruta+"api/califhistorias/consultas/estudiante",{params:this.buildParams(e)})}FiltrarEstudiantesPorNombre(e){return this.http.get(this.ruta+"api/califhistorias/consultas/estudiantes-por-nombre",{params:this.buildParams(e)})}FiltrarEstudiantesPorCI(e){return this.http.get(this.ruta+"api/califhistorias/consultas/estudiantes-por-ci",{params:this.buildParams(e)})}EstadisticasGeneral(e){return this.http.get(this.ruta+"api/califhistorias/estadisticas/general",{params:this.buildParams(e)})}EstadisticasPorDocente(e){return this.http.get(this.ruta+"api/califhistorias/estadisticas/docente",{params:this.buildParams(e)})}EstadisticasPorEstudiante(e){return this.http.get(this.ruta+"api/califhistorias/estadisticas/estudiante",{params:this.buildParams(e)})}EstadisticasPorCurso(e){return this.http.get(this.ruta+"api/califhistorias/estadisticas/curso",{params:this.buildParams(e)})}createFormGroupcalifhistorias(){return new Ct({id:new f(0),Institucion:new f(""),Anio:new f(""),Malla:new f(""),Arrastre:new f(""),DocenteMateria:new f(""),NivelCurso:new f(""),NombreCurso:new f(""),Sigla:new f(""),Rango:new f(""),Tipo:new f(""),Horas:new f(""),Categoria:new f(""),Docente_Especialidad:new f(""),Docente_Practica:new f(""),Teorica1:new f(""),Teorica2:new f(""),Teorica3:new f(""),Teorica4:new f(""),Practica1:new f(""),Practica2:new f(""),Practica3:new f(""),Practica4:new f(""),PromEvT:new f(""),PromEvP:new f(""),Promedio:new f(""),PruebaRecuperacion:new f(""),Ap_Paterno:new f(""),Ap_Materno:new f(""),Nombre:new f(""),Sexo:new f(""),CI:new f(""),Especialidad:new f(""),Observacion:new f("")})}};O.\u0275fac=function(t){return new(t||O)(lt(ht))},O.\u0275prov=st({token:O,factory:O.\u0275fac,providedIn:"root"});var Q=O;var jt=r=>({"is-invalid":r}),x=r=>({"text-danger fw-semibold":r}),Z=r=>({"text-danger":r}),ot=(r,e)=>[r,e];function qt(r,e){if(r&1&&(n(0,"option",46),a(1),i()),r&2){let t=e.$implicit;c("value",t),o(),p(t)}}function Ht(r,e){r&1&&(n(0,"div",47),a(1,"Cargando opciones..."),i())}function zt(r,e){if(r&1&&(n(0,"option",46),a(1),i()),r&2){let t=e.$implicit;c("value",t),o(),p(t)}}function Ut(r,e){if(r&1&&(n(0,"div",48)(1,"div",18)(2,"select",49)(3,"option",32),a(4,"Seleccione..."),i(),_(5,zt,2,2,"option",33),i(),n(6,"label"),a(7,"A\xF1o"),i()()()),r&2){let t=m(2);o(5),c("ngForOf",t.anios)}}function Kt(r,e){if(r&1&&(n(0,"option",46),a(1),i()),r&2){let t=e.$implicit;c("value",t),o(),p(t)}}function Wt(r,e){if(r&1&&(n(0,"div",48)(1,"div",18)(2,"select",50)(3,"option",32),a(4,"Seleccione..."),i(),_(5,Kt,2,2,"option",33),i(),n(6,"label"),a(7,"Malla"),i()()()),r&2){let t=m(2);o(5),c("ngForOf",t.mallas)}}function Yt(r,e){if(r&1&&(n(0,"option",46),a(1),i()),r&2){let t=e.$implicit;c("value",t),o(),p(t)}}function Jt(r,e){if(r&1&&(n(0,"div",48)(1,"div",18)(2,"select",51)(3,"option",32),a(4,"Seleccione..."),i(),_(5,Yt,2,2,"option",33),i(),n(6,"label"),a(7,"Nivel"),i()()()),r&2){let t=m(2);o(5),c("ngForOf",t.niveles)}}function Qt(r,e){if(r&1&&(n(0,"option",46),a(1),i()),r&2){let t=e.$implicit;c("value",t),o(),p(t)}}function Xt(r,e){if(r&1&&(n(0,"div",52)(1,"div",18)(2,"select",53)(3,"option",32),a(4,"Seleccione..."),i(),_(5,Qt,2,2,"option",33),i(),n(6,"label"),a(7,"Curso"),i()()()),r&2){let t=m(2);o(5),c("ngForOf",t.cursos)}}function Zt(r,e){if(r&1&&(n(0,"option",46),a(1),i()),r&2){let t=e.$implicit;c("value",t),o(),p(t)}}function te(r,e){if(r&1&&(n(0,"div",52)(1,"div",18)(2,"select",54)(3,"option",32),a(4,"Seleccione..."),i(),_(5,Zt,2,2,"option",33),i(),n(6,"label"),a(7,"Docente"),i()()()),r&2){let t=m(2);o(5),c("ngForOf",t.docentes)}}function ee(r,e){if(r&1&&(n(0,"option",46),a(1),i()),r&2){let t=e.$implicit;c("value",t),o(),p(t)}}function ie(r,e){if(r&1&&(n(0,"div",52)(1,"div",18)(2,"select",55)(3,"option",32),a(4,"Seleccione..."),i(),_(5,ee,2,2,"option",33),i(),n(6,"label"),a(7,"Docente (Especialidad)"),i()()()),r&2){let t=m(2);o(5),c("ngForOf",t.docentesEspecialidad)}}function ne(r,e){r&1&&(n(0,"div",52)(1,"div",18),F(2,"input",56),n(3,"label"),a(4,"CI"),i()(),n(5,"div",47),a(6,"La b\xFAsqueda se ejecuta al presionar Buscar."),i()())}function ae(r,e){r&1&&(n(0,"span"),a(1,"Filtrar"),i())}function re(r,e){r&1&&(n(0,"span"),a(1,"..."),i())}function oe(r,e){if(r&1){let t=M();n(0,"div",52)(1,"label",57),a(2,"Nombre (filtrar)"),i(),n(3,"div",58),F(4,"input",59),n(5,"button",60),T("click",function(){C(t);let l=m(2);return P(l.filtrarPorNombre())}),_(6,ae,2,0,"span",45)(7,re,2,0,"span",45),i()(),n(8,"div",47),a(9,"Se mostrar\xE1n los estudiantes encontrados para seleccionar."),i()()}if(r&2){let t=m(2);o(5),c("disabled",t.loadingFiltro),o(),c("ngIf",!t.loadingFiltro),o(),c("ngIf",t.loadingFiltro)}}function se(r,e){r&1&&(n(0,"span"),a(1,"Filtrar"),i())}function le(r,e){r&1&&(n(0,"span"),a(1,"..."),i())}function ce(r,e){if(r&1){let t=M();n(0,"div",52)(1,"label",57),a(2,"CI (filtrar)"),i(),n(3,"div",58),F(4,"input",61),n(5,"button",60),T("click",function(){C(t);let l=m(2);return P(l.filtrarPorCI())}),_(6,se,2,0,"span",45)(7,le,2,0,"span",45),i()(),n(8,"div",47),a(9,"Se mostrar\xE1n coincidencias de CI para seleccionar."),i()()}if(r&2){let t=m(2);o(5),c("disabled",t.loadingFiltro),o(),c("ngIf",!t.loadingFiltro),o(),c("ngIf",t.loadingFiltro)}}function de(r,e){if(r&1&&(n(0,"option",46),a(1),i()),r&2){let t=e.$implicit;c("value",t.CI),o(),it(" ",(t.Ap_Paterno||"")+" "+(t.Ap_Materno||"")+" "+(t.Nombre||"")," (CI: ",t.CI,") ")}}function pe(r,e){if(r&1&&(n(0,"div",47),a(1),i()),r&2){let t=m(3);o(),N("Encontrados: ",t.estudiantesEncontrados.length)}}function me(r,e){if(r&1){let t=M();n(0,"div",52)(1,"label",57),a(2,"Estudiante"),i(),n(3,"select",62),T("change",function(l){C(t);let d=m(2);return P(d.onSeleccionEstudiante(l.target.value))}),n(4,"option",32),a(5,"Seleccione..."),i(),_(6,de,2,3,"option",33),i(),_(7,pe,2,1,"div",35),i()}if(r&2){let t=m(2);o(6),c("ngForOf",t.estudiantesEncontrados),o(),c("ngIf",t.estudiantesEncontrados==null?null:t.estudiantesEncontrados.length)}}function ue(r,e){if(r&1&&(n(0,"option",46),a(1),i()),r&2){let t=e.$implicit;c("value",t.CI),o(),it(" ",(t.Ap_Paterno||"")+" "+(t.Ap_Materno||"")+" "+(t.Nombre||"")," (CI: ",t.CI,") ")}}function _e(r,e){if(r&1&&(n(0,"div",47),a(1),i()),r&2){let t=m(3);o(),N("Encontrados: ",t.estudiantesEncontrados.length)}}function ge(r,e){if(r&1){let t=M();n(0,"div",52)(1,"label",57),a(2,"Estudiante"),i(),n(3,"select",62),T("change",function(l){C(t);let d=m(2);return P(d.onSeleccionEstudiante(l.target.value))}),n(4,"option",32),a(5,"Seleccione..."),i(),_(6,ue,2,3,"option",33),i(),_(7,_e,2,1,"div",35),i()}if(r&2){let t=m(2);o(6),c("ngForOf",t.estudiantesEncontrados),o(),c("ngIf",t.estudiantesEncontrados==null?null:t.estudiantesEncontrados.length)}}function ve(r,e){r&1&&(n(0,"div",38)(1,"div",18)(2,"select",63)(3,"option",64),a(4,"MA\xD1ANA"),i(),n(5,"option",65),a(6,"TARDE"),i(),n(7,"option",66),a(8,"NOCHE"),i()(),n(9,"label"),a(10,"Turno (Bolet\xEDn)"),i()()())}function he(r,e){r&1&&(n(0,"div",67)(1,"div",68)(2,"div",69)(3,"div",70),F(4,"input",71),n(5,"label",72),a(6,"\xBFES TAMA\xD1O CARTA?"),i()()(),n(7,"div",69)(8,"div",70),F(9,"input",73),n(10,"label",74),a(11,"\xBFCONFIAR EN UNA SOLA PLANA?"),i()()(),n(12,"div",69)(13,"div",70),F(14,"input",75),n(15,"label",76),a(16,"\xBFOBLIGAR MARGEN INFERIOR?"),i()()(),n(17,"div",77)(18,"label",78),a(19,"TAMA\xD1O LETRA"),i(),F(20,"input",79),i()()())}function fe(r,e){r&1&&(n(0,"span"),a(1,"Buscar"),i())}function xe(r,e){r&1&&(n(0,"span"),a(1,"Buscando..."),i())}function be(r,e){if(r&1){let t=M();n(0,"div",67)(1,"div",80)(2,"div",81)(3,"input",82),T("change",function(){C(t);let l=m(2);return P(l.toggleResaltarPorGestion())}),i(),n(4,"label",83),a(5,"Resaltar por gesti\xF3n (A\xF1o)"),i()(),n(6,"div",81)(7,"input",82),T("change",function(){C(t);let l=m(2);return P(l.toggleSepararEnTablas())}),i(),n(8,"label",83),a(9,"Separar en tablas por curso (NivelCurso)"),i()(),n(10,"div",81)(11,"input",82),T("change",function(){C(t);let l=m(2);return P(l.toggleSepararPorNombreCurso())}),i(),n(12,"label",83),a(13,"Separar en tablas por NombreMateria (NombreCurso)"),i()()(),n(14,"div",84),a(15,"La separaci\xF3n se aplica a la p\xE1gina actual."),i()()}if(r&2){let t=m(2);o(3),c("checked",t.resaltarPorGestion),o(4),c("checked",t.separarEnTablas),o(4),c("checked",t.separarPorNombreCurso)}}function Se(r,e){if(r&1){let t=M();n(0,"div",13)(1,"div",14)(2,"form",15),T("ngSubmit",function(){C(t);let l=m();return P(l.buscar())}),n(3,"div",16)(4,"div",17)(5,"div",18)(6,"select",19)(7,"option",20),a(8,"1) Por Instituci\xF3n + A\xF1o + Malla + Nivel + Curso"),i(),n(9,"option",21),a(10,"2) Por Instituci\xF3n + A\xF1o + Malla + Docente"),i(),n(11,"option",22),a(12,"11) Por Instituci\xF3n + A\xF1o + Malla + Docente (Especialidad)"),i(),n(13,"option",23),a(14,"3) Por Instituci\xF3n + CI"),i(),n(15,"option",24),a(16,"8) Por Instituci\xF3n + Nombre (filtrar y seleccionar)"),i(),n(17,"option",25),a(18,"9) Por Instituci\xF3n + CI (filtrar y seleccionar)"),i(),n(19,"option",26),a(20,"4) Estad\xEDsticas (Inst + A\xF1o + Malla)"),i(),n(21,"option",27),a(22,"5) Estad\xEDsticas (Inst + A\xF1o + Malla + Docente)"),i(),n(23,"option",28),a(24,"6) Estad\xEDsticas (Inst + CI)"),i(),n(25,"option",29),a(26,"10) Estad\xEDsticas (Inst + CI - filtrar y seleccionar)"),i(),n(27,"option",30),a(28,"7) Estad\xEDsticas (Inst + A\xF1o + Malla + NivelCurso)"),i()(),n(29,"label"),a(30,"Tipo de b\xFAsqueda"),i()()(),n(31,"div",17)(32,"div",18)(33,"select",31)(34,"option",32),a(35,"Seleccione..."),i(),_(36,qt,2,2,"option",33),i(),n(37,"label"),a(38,"Instituci\xF3n"),i(),n(39,"div",34),a(40,"Este campo es obligatorio*"),i()(),_(41,Ht,2,0,"div",35),i(),_(42,Ut,8,1,"div",36)(43,Wt,8,1,"div",36)(44,Jt,8,1,"div",36)(45,Xt,8,1,"div",37)(46,te,8,1,"div",37)(47,ie,8,1,"div",37)(48,ne,7,0,"div",37)(49,oe,10,3,"div",37)(50,ce,10,3,"div",37)(51,me,8,2,"div",37)(52,ge,8,2,"div",37),n(53,"div",38)(54,"div",18)(55,"select",39)(56,"option",40),a(57,"10"),i(),n(58,"option",40),a(59,"25"),i(),n(60,"option",40),a(61,"50"),i(),n(62,"option",40),a(63,"100"),i(),n(64,"option",40),a(65,"200"),i()(),n(66,"label"),a(67,"Filas por p\xE1gina"),i()()(),_(68,ve,11,0,"div",41)(69,he,21,0,"div",42),n(70,"div",43)(71,"button",44),_(72,fe,2,0,"span",45)(73,xe,2,0,"span",45),i()(),_(74,be,16,3,"div",42),i()()()()}if(r&2){let t,s=m();o(2),c("formGroup",s.form),o(31),c("ngClass",v(26,jt,((t=s.form.get("institucion"))==null?null:t.invalid)&&(((t=s.form.get("institucion"))==null?null:t.touched)||((t=s.form.get("institucion"))==null?null:t.dirty)))),o(3),c("ngForOf",s.instituciones),o(5),c("ngIf",s.loadingOpciones),o(),c("ngIf",s.mostrarCampo("anio")),o(),c("ngIf",s.mostrarCampo("malla")),o(),c("ngIf",s.mostrarCampo("nivel")),o(),c("ngIf",s.mostrarCampo("curso")),o(),c("ngIf",s.mostrarCampo("docente")),o(),c("ngIf",s.tipo==="docente_especialidad"),o(),c("ngIf",s.mostrarCampo("ci")),o(),c("ngIf",s.tipo==="estudiante_nombre"),o(),c("ngIf",s.tipo==="estudiante_ci"||s.tipo==="stats_estudiante_ci"),o(),c("ngIf",s.tipo==="estudiante_ci"||s.tipo==="stats_estudiante_ci"),o(),c("ngIf",s.tipo==="estudiante_nombre"),o(4),c("ngValue",10),o(2),c("ngValue",25),o(2),c("ngValue",50),o(2),c("ngValue",100),o(2),c("ngValue",200),o(4),c("ngIf",s.tipo==="curso"),o(),c("ngIf",s.tipo==="curso"),o(2),c("disabled",s.loading),o(),c("ngIf",!s.loading),o(),c("ngIf",s.loading),o(),c("ngIf",s.tipo==="curso"||s.tipo==="docente"||s.tipo==="docente_especialidad")}}function Ee(r,e){if(r&1&&(n(0,"div",85),a(1),i()),r&2){let t=m();o(),p(t.errorMsg)}}function Ce(r,e){r&1&&(n(0,"div",86),F(1,"div",87),n(2,"div",88),a(3,"Cargando..."),i()())}function Pe(r,e){r&1&&(n(0,"span",96),a(1," \xB7 "),i())}function Ie(r,e){if(r&1&&(B(0),n(1,"span",93),a(2),i(),n(3,"span",94),a(4),i(),_(5,Pe,2,0,"span",95),L()),r&2){let t=e.$implicit,s=e.last;o(),c("ngClass","res-"+t.kind),o(),p(t.label),o(2),p(t.value),o(),c("ngIf",!s)}}function ye(r,e){if(r&1&&(n(0,"div",89)(1,"div",90),a(2,"Mostrando informaci\xF3n de"),i(),n(3,"div",91),_(4,Ie,6,4,"ng-container",92),i()()),r&2){let t=m();o(4),c("ngForOf",t.resumenItems)}}function Te(r,e){if(r&1&&(n(0,"div",97),a(1),i()),r&2){let t=m();o(),p(t.copyMsg)}}function Me(r,e){if(r&1&&(n(0,"div",69)(1,"div",98)(2,"div",14)(3,"div",99),a(4,"Estudiantes"),i(),n(5,"div",100),a(6),i()()()()),r&2){let t=m(2);o(6),p(t.stats.general.total_estudiantes??0)}}function we(r,e){if(r&1&&(n(0,"div",16)(1,"div",69)(2,"div",98)(3,"div",14)(4,"div",99),a(5,"Total registros"),i(),n(6,"div",100),a(7),i()()()(),_(8,Me,7,1,"div",101),n(9,"div",69)(10,"div",98)(11,"div",14)(12,"div",99),a(13,"Promedio general"),i(),n(14,"div",100),a(15),j(16,"number"),i()()()(),n(17,"div",69)(18,"div",98)(19,"div",14)(20,"div",99),a(21,"Aprob. / Reprob. / Aband."),i(),n(22,"div",102),a(23),i(),n(24,"div",99),a(25,"(\u2265 61 o Recup. \u2265 61)"),i()()()()()),r&2){let t=m();o(7),p(t.stats.general.total_registros??0),o(),c("ngIf",t.stats.general.total_estudiantes!==void 0),o(7),p(q(16,6,t.stats.general.prom_general??0,"1.0-0")),o(8),dt("",t.stats.general.aprobados??0," / ",t.stats.general.reprobados??0," / ",t.stats.general.abandonos??0)}}function Ne(r,e){if(r&1&&(n(0,"tr")(1,"td"),a(2),i(),n(3,"td"),a(4),i(),n(5,"td",108),a(6),i(),n(7,"td",108),a(8),j(9,"number"),i(),n(10,"td",108),a(11),i(),n(12,"td",108),a(13),i(),n(14,"td",108),a(15),i()()),r&2){let t=e.$implicit;o(2),p(t.NombreCurso),o(2),p(t.NivelCurso),o(2),p(t.total_estudiantes),o(2),p(q(9,7,t.prom_general??0,"1.0-0")),o(3),p(t.aprobados),o(2),p(t.reprobados),o(2),p(t.abandonos??0)}}function Ae(r,e){if(r&1&&(n(0,"div",103)(1,"div",104)(2,"strong"),a(3,"Estad\xEDsticas por curso"),i(),n(4,"span",99),a(5,"(top 50)"),i()(),n(6,"div",105)(7,"table",106)(8,"thead",107)(9,"tr")(10,"th"),a(11,"Curso"),i(),n(12,"th"),a(13,"Nivel"),i(),n(14,"th",108),a(15,"Estudiantes"),i(),n(16,"th",108),a(17,"Promedio"),i(),n(18,"th",108),a(19,"Aprob."),i(),n(20,"th",108),a(21,"Reprob."),i(),n(22,"th",108),a(23,"Aband."),i()()(),n(24,"tbody"),_(25,Ne,16,10,"tr",92),i()()()()),r&2){let t=m();o(25),c("ngForOf",t.stats.por_curso)}}function De(r,e){if(r&1&&(n(0,"tr")(1,"td"),a(2),i(),n(3,"td",108),a(4),i(),n(5,"td",108),a(6),j(7,"number"),i(),n(8,"td",108),a(9),i(),n(10,"td",108),a(11),i(),n(12,"td",108),a(13),i()()),r&2){let t=e.$implicit;o(2),p(t.DocenteMateria),o(2),p(t.total_estudiantes),o(2),p(q(7,6,t.prom_general??0,"1.0-0")),o(3),p(t.aprobados),o(2),p(t.reprobados),o(2),p(t.abandonos??0)}}function Fe(r,e){if(r&1&&(n(0,"div",103)(1,"div",104)(2,"strong"),a(3,"Estad\xEDsticas por docente"),i(),n(4,"span",99),a(5,"(top 50)"),i()(),n(6,"div",105)(7,"table",106)(8,"thead",107)(9,"tr")(10,"th"),a(11,"Docente"),i(),n(12,"th",108),a(13,"Estudiantes"),i(),n(14,"th",108),a(15,"Promedio"),i(),n(16,"th",108),a(17,"Aprob."),i(),n(18,"th",108),a(19,"Reprob."),i(),n(20,"th",108),a(21,"Aband."),i()()(),n(22,"tbody"),_(23,De,14,9,"tr",92),i()()()()),r&2){let t=m();o(23),c("ngForOf",t.stats.por_docente)}}function Re(r,e){if(r&1&&(n(0,"tr")(1,"td"),a(2),i(),n(3,"td"),a(4),i(),n(5,"td",108),a(6),i(),n(7,"td",108),a(8),j(9,"number"),i(),n(10,"td",108),a(11),i(),n(12,"td",108),a(13),i(),n(14,"td",108),a(15),i()()),r&2){let t=e.$implicit;o(2),p(t.Anio),o(2),p(t.Malla),o(2),p(t.total_registros),o(2),p(q(9,7,t.prom_general??0,"1.0-0")),o(3),p(t.aprobados),o(2),p(t.reprobados),o(2),p(t.abandonos??0)}}function Oe(r,e){if(r&1&&(n(0,"div",103)(1,"div",104)(2,"strong"),a(3,"Rendimiento por a\xF1o/malla"),i()(),n(4,"div",105)(5,"table",106)(6,"thead",107)(7,"tr")(8,"th"),a(9,"A\xF1o"),i(),n(10,"th"),a(11,"Malla"),i(),n(12,"th",108),a(13,"Registros"),i(),n(14,"th",108),a(15,"Promedio"),i(),n(16,"th",108),a(17,"Aprob."),i(),n(18,"th",108),a(19,"Reprob."),i(),n(20,"th",108),a(21,"Aband."),i()()(),n(22,"tbody"),_(23,Re,16,10,"tr",92),i()()()()),r&2){let t=m();o(23),c("ngForOf",t.stats.por_anio_malla)}}function Ge(r,e){if(r&1){let t=M();n(0,"div",115)(1,"div",81)(2,"input",82),T("change",function(){C(t);let l=m(2);return P(l.toggleDocenteEnHistorial())}),i(),n(3,"label",83),a(4,"Mostrar docente"),i()()()}if(r&2){let t=m(2);o(2),c("checked",t.showDocenteEnHistorial)}}function Ve(r,e){if(r&1&&(n(0,"option",46),a(1),i()),r&2){let t=e.$implicit;c("value",t),o(),p(t)}}function ke(r,e){if(r&1){let t=M();n(0,"div",121)(1,"label",122),a(2,"Filtrar tablas por Docente Esp."),i(),n(3,"select",123),Y("ngModelChange",function(l){C(t);let d=m(4);return W(d.filtroGrupoDocente,l)||(d.filtroGrupoDocente=l),P(l)}),n(4,"option",32),a(5,"(Todos)"),i(),_(6,Ve,2,2,"option",33),i()()}if(r&2){let t=m(4);o(3),K("ngModel",t.filtroGrupoDocente),o(3),c("ngForOf",t.docentesParaFiltroGrupo)}}function $e(r,e){if(r&1&&(n(0,"option",46),a(1),i()),r&2){let t=e.$implicit;c("value",t),o(),p(t)}}function Be(r,e){if(r&1){let t=M();n(0,"div",121)(1,"label",122),a(2,"Filtrar tablas por Especialidad"),i(),n(3,"select",123),Y("ngModelChange",function(l){C(t);let d=m(4);return W(d.filtroGrupoEspecialidad,l)||(d.filtroGrupoEspecialidad=l),P(l)}),n(4,"option",32),a(5,"(Todas)"),i(),_(6,$e,2,2,"option",33),i()()}if(r&2){let t=m(4);o(3),K("ngModel",t.filtroGrupoEspecialidad),o(3),c("ngForOf",t.especialidadesParaFiltroGrupo)}}function Le(r,e){if(r&1){let t=M();n(0,"div",13)(1,"div",117)(2,"div",118),_(3,ke,7,2,"div",119)(4,Be,7,2,"div",119),n(5,"div",48)(6,"button",120),T("click",function(){C(t);let l=m(3);return P(l.limpiarFiltrosGrupo())}),a(7," Limpiar "),i()()()()()}if(r&2){let t=m(3);o(3),c("ngIf",t.docentesParaFiltroGrupo==null?null:t.docentesParaFiltroGrupo.length),o(),c("ngIf",t.especialidadesParaFiltroGrupo==null?null:t.especialidadesParaFiltroGrupo.length)}}function je(r,e){if(r&1&&(n(0,"strong"),a(1),i()),r&2){let t=m().$implicit;o(),N("NombreMateria: ",t.NombreCurso)}}function qe(r,e){if(r&1&&(n(0,"strong"),a(1),i()),r&2){let t=m().$implicit;o(),N("Nivel: ",t.NivelCurso)}}function He(r,e){r&1&&(n(0,"strong"),a(1,"Grupo"),i())}function ze(r,e){if(r&1&&(n(0,"span",126),a(1),i()),r&2){let t=m().$implicit;o(),N(" \xB7 Especialidad ",t.Especialidad)}}function Ue(r,e){if(r&1&&(n(0,"span",126),a(1),i()),r&2){let t=m().$implicit;o(),N(" \xB7 Docente Esp. ",t.DocenteEspecialidad)}}function Ke(r,e){if(r&1&&(n(0,"span"),a(1),i()),r&2){let t=m().$implicit;o(),N(" \xB7 Nivel ",t.NivelCurso)}}function We(r,e){if(r&1&&(n(0,"span"),a(1),i()),r&2){let t=m().$implicit;o(),N(" \xB7 A\xF1o ",t.Anio)}}function Ye(r,e){if(r&1&&(n(0,"span"),a(1),i()),r&2){let t=m().$implicit;o(),N(" \xB7 Malla ",t.Malla)}}function Je(r,e){r&1&&(n(0,"span"),F(1,"i",130),a(2," Generar bolet\xEDn"),i())}function Qe(r,e){r&1&&(n(0,"span"),a(1,"Generando..."),i())}function Xe(r,e){if(r&1){let t=M();n(0,"div")(1,"button",129),T("click",function(){C(t);let l=m().$implicit,d=m(3);return P(d.generarBoletinGrupo(l))}),_(2,Je,3,0,"span",45)(3,Qe,2,0,"span",45),i()()}if(r&2){let t=m().$implicit,s=m(3);o(),c("disabled",s.boletinLoadingKey===t.key),o(),c("ngIf",s.boletinLoadingKey!==t.key),o(),c("ngIf",s.boletinLoadingKey===t.key)}}function Ze(r,e){if(r&1&&(n(0,"tr",131)(1,"td",132),a(2),i(),n(3,"td"),a(4),i(),n(5,"td"),a(6),i(),n(7,"td"),a(8),i(),n(9,"td"),a(10),i(),n(11,"td",133),a(12),i(),n(13,"td",133),a(14),i(),n(15,"td",133),a(16),i(),n(17,"td",133),a(18),i(),n(19,"td",133),a(20),i(),n(21,"td",133),a(22),i(),n(23,"td",133),a(24),i(),n(25,"td",133),a(26),i(),n(27,"td",108),a(28),i(),n(29,"td",108),a(30),i(),n(31,"td",134),a(32),i(),n(33,"td",108),a(34),i()()),r&2){let t=e.$implicit,s=e.index,l=m(4);c("ngClass",l.rowResultadoClass(t)),o(2),p(s+1),o(2),p(t.Ap_Paterno),o(2),p(t.Ap_Materno),o(2),p(t.Nombre),o(2),p(t.CI),o(),c("ngClass",v(27,x,l.evalReprobado(t,1))),o(),p(t.Teorica1),o(),c("ngClass",v(29,x,l.evalReprobado(t,1))),o(),p(t.Practica1),o(),c("ngClass",v(31,x,l.evalReprobado(t,2))),o(),p(t.Teorica2),o(),c("ngClass",v(33,x,l.evalReprobado(t,2))),o(),p(t.Practica2),o(),c("ngClass",v(35,x,l.evalReprobado(t,3))),o(),p(t.Teorica3),o(),c("ngClass",v(37,x,l.evalReprobado(t,3))),o(),p(t.Practica3),o(),c("ngClass",v(39,x,l.evalReprobado(t,4))),o(),p(t.Teorica4),o(),c("ngClass",v(41,x,l.evalReprobado(t,4))),o(),p(t.Practica4),o(2),p(t.PromEvT),o(2),p(t.PromEvP),o(),c("ngClass",v(43,Z,l.finalReprobado(t))),o(),p(t.Promedio),o(2),p(t.PruebaRecuperacion)}}function ti(r,e){if(r&1&&(n(0,"div",13)(1,"div",124)(2,"div"),_(3,je,2,1,"strong",45)(4,qe,2,1,"strong",45)(5,He,2,0,"strong",45)(6,ze,2,1,"span",125)(7,Ue,2,1,"span",125),n(8,"span",126),_(9,Ke,2,1,"span",45)(10,We,2,1,"span",45)(11,Ye,2,1,"span",45),i()(),_(12,Xe,4,3,"div",45),i(),n(13,"div",105)(14,"table",127)(15,"thead",107)(16,"tr")(17,"th",108),a(18,"N\xB0"),i(),n(19,"th"),a(20,"Ap. Paterno"),i(),n(21,"th"),a(22,"Ap. Materno"),i(),n(23,"th"),a(24,"Nombres"),i(),n(25,"th"),a(26,"CI"),i(),n(27,"th",108),a(28,"Teo1"),i(),n(29,"th",108),a(30,"Prac1"),i(),n(31,"th",108),a(32,"Teo2"),i(),n(33,"th",108),a(34,"Prac2"),i(),n(35,"th",108),a(36,"Teo3"),i(),n(37,"th",108),a(38,"Prac3"),i(),n(39,"th",108),a(40,"Teo4"),i(),n(41,"th",108),a(42,"Prac4"),i(),n(43,"th",108),a(44,"PromEvT"),i(),n(45,"th",108),a(46,"PromEvP"),i(),n(47,"th",108),a(48,"Promedio"),i(),n(49,"th",108),a(50,"Recup."),i()()(),n(51,"tbody"),_(52,Ze,35,45,"tr",128),i()()()()),r&2){let t=e.$implicit,s=m(3);o(3),c("ngIf",t.NombreCurso),o(),c("ngIf",!t.NombreCurso&&t.NivelCurso),o(),c("ngIf",!t.NombreCurso&&!t.NivelCurso),o(),c("ngIf",t.Especialidad),o(),c("ngIf",t.DocenteEspecialidad),o(2),c("ngIf",t.NombreCurso&&t.NivelCurso),o(),c("ngIf",t.Anio),o(),c("ngIf",t.Malla),o(),c("ngIf",s.tipo==="curso"||s.tipo==="docente_especialidad"),o(40),c("ngForOf",t.rows)}}function ei(r,e){if(r&1&&(n(0,"div"),_(1,Le,8,2,"div",5)(2,ti,53,10,"div",116),i()),r&2){let t=m(2);o(),c("ngIf",(t.docentesParaFiltroGrupo==null?null:t.docentesParaFiltroGrupo.length)||(t.especialidadesParaFiltroGrupo==null?null:t.especialidadesParaFiltroGrupo.length)),o(),c("ngForOf",t.gruposFiltrados)}}function ii(r,e){r&1&&(n(0,"th"),a(1,"Docente"),i())}function ni(r,e){if(r&1){let t=M();n(0,"tr",137)(1,"td")(2,"div",138)(3,"span"),a(4),i(),n(5,"button",139),T("click",function(){C(t);let l=m().$implicit,d=m(3);return P(d.generarBoletaGestion(l.Anio))}),a(6," PDF "),i()()()()}if(r&2){let t=m().$implicit,s=m(3);o(),et("colspan",s.showDocenteEnHistorial?20:19),o(3),N("Gesti\xF3n ",t.Anio)}}function ai(r,e){if(r&1&&(n(0,"span"),a(1),i()),r&2){let t=m(2).$implicit;o(),p(t.DocenteMateria)}}function ri(r,e){if(r&1&&(n(0,"span",141),a(1),i()),r&2){let t=m(2).$implicit;o(),p(t.Docente_Especialidad)}}function oi(r,e){if(r&1&&(n(0,"td"),_(1,ai,2,1,"span",45)(2,ri,2,1,"span",140),i()),r&2){let t=m().$implicit;o(),c("ngIf",t.DocenteMateria),o(),c("ngIf",!t.DocenteMateria)}}function si(r,e){if(r&1&&(B(0),_(1,ni,7,2,"tr",136),n(2,"tr",131)(3,"td",132),a(4),i(),n(5,"td"),a(6),i(),n(7,"td"),a(8),i(),n(9,"td"),a(10),i(),n(11,"td"),a(12),i(),n(13,"td",108),a(14),i(),n(15,"td"),a(16),i(),_(17,oi,3,2,"td",45),n(18,"td",133),a(19),i(),n(20,"td",133),a(21),i(),n(22,"td",133),a(23),i(),n(24,"td",133),a(25),i(),n(26,"td",133),a(27),i(),n(28,"td",133),a(29),i(),n(30,"td",133),a(31),i(),n(32,"td",133),a(33),i(),n(34,"td",108),a(35),i(),n(36,"td",108),a(37),i(),n(38,"td",134),a(39),i(),n(40,"td",108),a(41),i()(),L()),r&2){let t=e.$implicit,s=e.index,l=m(3);o(),c("ngIf",l.shouldShowGestionSeparator(s)),o(),c("ngClass",J(31,ot,l.anioBandClass(t),l.rowResultadoClass(t))),o(2),p((l.page-1)*l.perPage+(s+1)),o(2),p(t.CI),o(2),p(t.Anio),o(2),p(t.Malla),o(2),p(t.NivelCurso),o(2),p(t.Rango),o(2),p(t.NombreCurso),o(),c("ngIf",l.showDocenteEnHistorial),o(),c("ngClass",v(34,x,l.evalReprobado(t,1))),o(),p(t.Teorica1),o(),c("ngClass",v(36,x,l.evalReprobado(t,1))),o(),p(t.Practica1),o(),c("ngClass",v(38,x,l.evalReprobado(t,2))),o(),p(t.Teorica2),o(),c("ngClass",v(40,x,l.evalReprobado(t,2))),o(),p(t.Practica2),o(),c("ngClass",v(42,x,l.evalReprobado(t,3))),o(),p(t.Teorica3),o(),c("ngClass",v(44,x,l.evalReprobado(t,3))),o(),p(t.Practica3),o(),c("ngClass",v(46,x,l.evalReprobado(t,4))),o(),p(t.Teorica4),o(),c("ngClass",v(48,x,l.evalReprobado(t,4))),o(),p(t.Practica4),o(2),p(t.PromEvT),o(2),p(t.PromEvP),o(),c("ngClass",v(50,Z,l.finalReprobado(t))),o(),p(t.Promedio),o(2),p(t.PruebaRecuperacion)}}function li(r,e){if(r&1&&(n(0,"table",135)(1,"thead",107)(2,"tr")(3,"th",108),a(4,"N\xB0"),i(),n(5,"th"),a(6,"CI"),i(),n(7,"th"),a(8,"A\xF1o"),i(),n(9,"th"),a(10,"Malla"),i(),n(11,"th"),a(12,"Nivel"),i(),n(13,"th",108),a(14,"Rango"),i(),n(15,"th"),a(16,"Curso"),i(),_(17,ii,2,0,"th",45),n(18,"th",108),a(19,"Teo1"),i(),n(20,"th",108),a(21,"Prac1"),i(),n(22,"th",108),a(23,"Teo2"),i(),n(24,"th",108),a(25,"Prac2"),i(),n(26,"th",108),a(27,"Teo3"),i(),n(28,"th",108),a(29,"Prac3"),i(),n(30,"th",108),a(31,"Teo4"),i(),n(32,"th",108),a(33,"Prac4"),i(),n(34,"th",108),a(35,"PromEvT"),i(),n(36,"th",108),a(37,"PromEvP"),i(),n(38,"th",108),a(39,"Promedio"),i(),n(40,"th",108),a(41,"Recup."),i()()(),n(42,"tbody"),_(43,si,42,52,"ng-container",92),i()()),r&2){let t=m(2);o(17),c("ngIf",t.showDocenteEnHistorial),o(26),c("ngForOf",t.rows)}}function ci(r,e){r&1&&(n(0,"th"),a(1,"A\xF1o"),i())}function di(r,e){r&1&&(n(0,"th"),a(1,"Malla"),i())}function pi(r,e){r&1&&(n(0,"th"),a(1,"Nivel"),i())}function mi(r,e){r&1&&(n(0,"th"),a(1,"NombreMateria"),i())}function ui(r,e){if(r&1&&(n(0,"tr",137)(1,"td",142),a(2),i()()),r&2){let t=m().$implicit,s=m(3);o(2),p(s.grupoSeparatorText(t))}}function _i(r,e){if(r&1&&(n(0,"td"),a(1),i()),r&2){let t=m().$implicit;o(),p(t.Anio)}}function gi(r,e){if(r&1&&(n(0,"td"),a(1),i()),r&2){let t=m().$implicit;o(),p(t.Malla)}}function vi(r,e){if(r&1&&(n(0,"td"),a(1),i()),r&2){let t=m().$implicit;o(),p(t.NivelCurso)}}function hi(r,e){if(r&1&&(n(0,"td"),a(1),i()),r&2){let t=m().$implicit;o(),p(t.NombreCurso)}}function fi(r,e){if(r&1&&(B(0),_(1,ui,3,1,"tr",136),n(2,"tr",131)(3,"td",132),a(4),i(),_(5,_i,2,1,"td",45)(6,gi,2,1,"td",45)(7,vi,2,1,"td",45)(8,hi,2,1,"td",45),n(9,"td"),a(10),i(),n(11,"td"),a(12),i(),n(13,"td"),a(14),i(),n(15,"td"),a(16),i(),n(17,"td",133),a(18),i(),n(19,"td",133),a(20),i(),n(21,"td",133),a(22),i(),n(23,"td",133),a(24),i(),n(25,"td",133),a(26),i(),n(27,"td",133),a(28),i(),n(29,"td",133),a(30),i(),n(31,"td",133),a(32),i(),n(33,"td",108),a(34),i(),n(35,"td",108),a(36),i(),n(37,"td",134),a(38),i(),n(39,"td",108),a(40),i()(),L()),r&2){let t=e.$implicit,s=e.index,l=m(3);o(),c("ngIf",l.shouldShowGrupoSeparator(s)),o(),c("ngClass",J(32,ot,l.anioBandClass(t),l.rowResultadoClass(t))),o(2),p((l.page-1)*l.perPage+(s+1)),o(),c("ngIf",(l.tipo==="curso"||l.tipo==="docente"||l.tipo==="docente_especialidad")&&!l.resaltarPorGestion),o(),c("ngIf",(l.tipo==="curso"||l.tipo==="docente"||l.tipo==="docente_especialidad")&&!l.resaltarPorGestion),o(),c("ngIf",(l.tipo==="curso"||l.tipo==="docente"||l.tipo==="docente_especialidad")&&!l.resaltarPorGestion),o(),c("ngIf",(l.tipo==="curso"||l.tipo==="docente"||l.tipo==="docente_especialidad")&&!l.resaltarPorGestion),o(2),p(t.Ap_Paterno),o(2),p(t.Ap_Materno),o(2),p(t.Nombre),o(2),p(t.CI),o(),c("ngClass",v(35,x,l.evalReprobado(t,1))),o(),p(t.Teorica1),o(),c("ngClass",v(37,x,l.evalReprobado(t,1))),o(),p(t.Practica1),o(),c("ngClass",v(39,x,l.evalReprobado(t,2))),o(),p(t.Teorica2),o(),c("ngClass",v(41,x,l.evalReprobado(t,2))),o(),p(t.Practica2),o(),c("ngClass",v(43,x,l.evalReprobado(t,3))),o(),p(t.Teorica3),o(),c("ngClass",v(45,x,l.evalReprobado(t,3))),o(),p(t.Practica3),o(),c("ngClass",v(47,x,l.evalReprobado(t,4))),o(),p(t.Teorica4),o(),c("ngClass",v(49,x,l.evalReprobado(t,4))),o(),p(t.Practica4),o(2),p(t.PromEvT),o(2),p(t.PromEvP),o(),c("ngClass",v(51,Z,l.finalReprobado(t))),o(),p(t.Promedio),o(2),p(t.PruebaRecuperacion)}}function xi(r,e){if(r&1&&(n(0,"table",135)(1,"thead",107)(2,"tr")(3,"th",108),a(4,"N\xB0"),i(),_(5,ci,2,0,"th",45)(6,di,2,0,"th",45)(7,pi,2,0,"th",45)(8,mi,2,0,"th",45),n(9,"th"),a(10,"Ap. Paterno"),i(),n(11,"th"),a(12,"Ap. Materno"),i(),n(13,"th"),a(14,"Nombres"),i(),n(15,"th"),a(16,"CI"),i(),n(17,"th",108),a(18,"Teo1"),i(),n(19,"th",108),a(20,"Prac1"),i(),n(21,"th",108),a(22,"Teo2"),i(),n(23,"th",108),a(24,"Prac2"),i(),n(25,"th",108),a(26,"Teo3"),i(),n(27,"th",108),a(28,"Prac3"),i(),n(29,"th",108),a(30,"Teo4"),i(),n(31,"th",108),a(32,"Prac4"),i(),n(33,"th",108),a(34,"PromEvT"),i(),n(35,"th",108),a(36,"PromEvP"),i(),n(37,"th",108),a(38,"Promedio"),i(),n(39,"th",108),a(40,"Recup."),i()()(),n(41,"tbody"),_(42,fi,41,53,"ng-container",92),i()()),r&2){let t=m(2);o(5),c("ngIf",(t.tipo==="curso"||t.tipo==="docente"||t.tipo==="docente_especialidad")&&!t.resaltarPorGestion),o(),c("ngIf",(t.tipo==="curso"||t.tipo==="docente"||t.tipo==="docente_especialidad")&&!t.resaltarPorGestion),o(),c("ngIf",(t.tipo==="curso"||t.tipo==="docente"||t.tipo==="docente_especialidad")&&!t.resaltarPorGestion),o(),c("ngIf",(t.tipo==="curso"||t.tipo==="docente"||t.tipo==="docente_especialidad")&&!t.resaltarPorGestion),o(34),c("ngForOf",t.rows)}}function bi(r,e){if(r&1){let t=M();n(0,"div",143)(1,"ngb-pagination",144),T("pageChange",function(l){C(t);let d=m(2);return P(d.onPageChange(l))}),i()()}if(r&2){let t=m(2);o(),c("collectionSize",t.total)("page",t.page)("pageSize",t.perPage)("maxSize",5)("boundaryLinks",!0)}}function Si(r,e){if(r&1){let t=M();n(0,"div",103)(1,"div",109)(2,"div",110)(3,"strong"),a(4,"Resultados"),i(),n(5,"span",99),a(6),i()(),_(7,Ge,5,1,"div",111),n(8,"div",110)(9,"button",112),T("click",function(){C(t);let l=m();return P(l.copiarTodoActual())}),a(10),i(),n(11,"button",112),T("click",function(){C(t);let l=m();return P(l.copiarApellidosNombresCiYNotas())}),a(12),i(),n(13,"button",112),T("click",function(){C(t);let l=m();return P(l.copiarApellidosNombresYResumen())}),a(14),i()()(),n(15,"div",105),_(16,ei,3,2,"div",45)(17,li,44,2,"table",113)(18,xi,43,5,"table",113),i(),_(19,bi,2,5,"div",114),i()}if(r&2){let t=m();o(6),N("Total: ",t.total),o(),c("ngIf",t.tipo==="estudiante"||t.tipo==="estudiante_nombre"||t.tipo==="estudiante_ci"),o(3),N(" ",t.tipo==="estudiante"||t.tipo==="estudiante_nombre"||t.tipo==="estudiante_ci"?"Copiar historial (todo)":"Copiar todo"," "),o(2),N(" ",t.tipo==="estudiante"||t.tipo==="estudiante_nombre"||t.tipo==="estudiante_ci"?"Copiar historial (con notas)":"Copiar (Ape/Nom/CI + notas)"," "),o(2),N(" ",t.tipo==="estudiante"||t.tipo==="estudiante_nombre"||t.tipo==="estudiante_ci"?"Copiar historial (resumen)":"Copiar (Ape/Nom + resumen)"," "),o(2),c("ngIf",(t.tipo==="curso"||t.tipo==="docente"||t.tipo==="docente_especialidad")&&t.separarEnTablasActivo),o(),c("ngIf",t.tipo==="estudiante"||t.tipo==="estudiante_nombre"||t.tipo==="estudiante_ci"),o(),c("ngIf",!(t.tipo==="estudiante"||t.tipo==="estudiante_nombre"||t.tipo==="estudiante_ci")&&!((t.tipo==="curso"||t.tipo==="docente"||t.tipo==="docente_especialidad")&&t.separarEnTablasActivo)),o(),c("ngIf",t.total>t.perPage)}}function Ei(r,e){r&1&&(n(0,"th",108),a(1,"Teo1"),i())}function Ci(r,e){r&1&&(n(0,"th",108),a(1,"Prac1"),i())}function Pi(r,e){r&1&&(n(0,"th",108),a(1,"Teo2"),i())}function Ii(r,e){r&1&&(n(0,"th",108),a(1,"Prac2"),i())}function yi(r,e){r&1&&(n(0,"th",108),a(1,"Teo3"),i())}function Ti(r,e){r&1&&(n(0,"th",108),a(1,"Prac3"),i())}function Mi(r,e){r&1&&(n(0,"th",108),a(1,"Teo4"),i())}function wi(r,e){r&1&&(n(0,"th",108),a(1,"Prac4"),i())}function Ni(r,e){if(r&1){let t=M();n(0,"tr",137)(1,"td")(2,"div",138)(3,"span"),a(4),i(),n(5,"button",139),T("click",function(){C(t);let l=m().$implicit,d=m(2);return P(d.generarBoletaGestion(l.Anio))}),a(6," PDF "),i()()()()}if(r&2){let t=m().$implicit,s=m(2);o(),et("colspan",s.modalCiColspan),o(3),N("Gesti\xF3n ",t.Anio)}}function Ai(r,e){if(r&1&&(n(0,"td",133),a(1),i()),r&2){let t=m().$implicit,s=m(2);c("ngClass",v(2,x,s.evalReprobado(t,1))),o(),p(t.Teorica1)}}function Di(r,e){if(r&1&&(n(0,"td",133),a(1),i()),r&2){let t=m().$implicit,s=m(2);c("ngClass",v(2,x,s.evalReprobado(t,1))),o(),p(t.Practica1)}}function Fi(r,e){if(r&1&&(n(0,"td",133),a(1),i()),r&2){let t=m().$implicit,s=m(2);c("ngClass",v(2,x,s.evalReprobado(t,2))),o(),p(t.Teorica2)}}function Ri(r,e){if(r&1&&(n(0,"td",133),a(1),i()),r&2){let t=m().$implicit,s=m(2);c("ngClass",v(2,x,s.evalReprobado(t,2))),o(),p(t.Practica2)}}function Oi(r,e){if(r&1&&(n(0,"td",133),a(1),i()),r&2){let t=m().$implicit,s=m(2);c("ngClass",v(2,x,s.evalReprobado(t,3))),o(),p(t.Teorica3)}}function Gi(r,e){if(r&1&&(n(0,"td",133),a(1),i()),r&2){let t=m().$implicit,s=m(2);c("ngClass",v(2,x,s.evalReprobado(t,3))),o(),p(t.Practica3)}}function Vi(r,e){if(r&1&&(n(0,"td",133),a(1),i()),r&2){let t=m().$implicit,s=m(2);c("ngClass",v(2,x,s.evalReprobado(t,4))),o(),p(t.Teorica4)}}function ki(r,e){if(r&1&&(n(0,"td",133),a(1),i()),r&2){let t=m().$implicit,s=m(2);c("ngClass",v(2,x,s.evalReprobado(t,4))),o(),p(t.Practica4)}}function $i(r,e){if(r&1&&(B(0),_(1,Ni,7,2,"tr",136),n(2,"tr",131)(3,"td",132),a(4),i(),n(5,"td"),a(6),i(),n(7,"td"),a(8),i(),n(9,"td"),a(10),i(),n(11,"td",108),a(12),i(),n(13,"td"),a(14),i(),_(15,Ai,2,4,"td",148)(16,Di,2,4,"td",148)(17,Fi,2,4,"td",148)(18,Ri,2,4,"td",148)(19,Oi,2,4,"td",148)(20,Gi,2,4,"td",148)(21,Vi,2,4,"td",148)(22,ki,2,4,"td",148),n(23,"td",108),a(24),i(),n(25,"td",108),a(26),i(),n(27,"td",134),a(28),i(),n(29,"td",108),a(30),i()(),L()),r&2){let t=e.$implicit,s=e.index,l=m(2);o(),c("ngIf",l.shouldShowGestionSeparator(s)),o(),c("ngClass",J(21,ot,l.anioBandClass(t),l.rowResultadoClass(t))),o(2),p((l.page-1)*l.perPage+(s+1)),o(2),p(t.Anio),o(2),p(t.Malla),o(2),p(t.NivelCurso),o(2),p(t.Rango),o(2),p(t.NombreCurso),o(),c("ngIf",l.showDetalleModalCi),o(),c("ngIf",l.showDetalleModalCi),o(),c("ngIf",l.showDetalleModalCi),o(),c("ngIf",l.showDetalleModalCi),o(),c("ngIf",l.showDetalleModalCi),o(),c("ngIf",l.showDetalleModalCi),o(),c("ngIf",l.showDetalleModalCi),o(),c("ngIf",l.showDetalleModalCi),o(2),p(t.PromEvT),o(2),p(t.PromEvP),o(),c("ngClass",v(24,Z,l.finalReprobado(t))),o(),p(t.Promedio),o(2),p(t.PruebaRecuperacion)}}function Bi(r,e){if(r&1){let t=M();n(0,"div",143)(1,"ngb-pagination",144),T("pageChange",function(l){C(t);let d=m(2);return P(d.onPageChange(l))}),i()()}if(r&2){let t=m(2);o(),c("collectionSize",t.total)("page",t.page)("pageSize",t.perPage)("maxSize",5)("boundaryLinks",!0)}}function Li(r,e){if(r&1){let t=M();n(0,"div",103)(1,"div",109)(2,"strong"),a(3,"Historial"),i(),n(4,"div",81)(5,"input",145),Y("ngModelChange",function(l){C(t);let d=m();return W(d.showDetalleModalCi,l)||(d.showDetalleModalCi=l),P(l)}),i(),n(6,"label",146),a(7,"Mostrar detalle"),i()()(),n(8,"div",105)(9,"table",127)(10,"thead",107)(11,"tr")(12,"th",108),a(13,"N\xB0"),i(),n(14,"th"),a(15,"A\xF1o"),i(),n(16,"th"),a(17,"Malla"),i(),n(18,"th"),a(19,"Nivel"),i(),n(20,"th",108),a(21,"Rango"),i(),n(22,"th"),a(23,"Curso"),i(),_(24,Ei,2,0,"th",147)(25,Ci,2,0,"th",147)(26,Pi,2,0,"th",147)(27,Ii,2,0,"th",147)(28,yi,2,0,"th",147)(29,Ti,2,0,"th",147)(30,Mi,2,0,"th",147)(31,wi,2,0,"th",147),n(32,"th",108),a(33,"PromEvT"),i(),n(34,"th",108),a(35,"PromEvP"),i(),n(36,"th",108),a(37,"Promedio"),i(),n(38,"th",108),a(39,"Recup."),i()()(),n(40,"tbody"),_(41,$i,31,26,"ng-container",92),i()()(),_(42,Bi,2,5,"div",114),i()}if(r&2){let t=m();o(5),K("ngModel",t.showDetalleModalCi),o(19),c("ngIf",t.showDetalleModalCi),o(),c("ngIf",t.showDetalleModalCi),o(),c("ngIf",t.showDetalleModalCi),o(),c("ngIf",t.showDetalleModalCi),o(),c("ngIf",t.showDetalleModalCi),o(),c("ngIf",t.showDetalleModalCi),o(),c("ngIf",t.showDetalleModalCi),o(),c("ngIf",t.showDetalleModalCi),o(10),c("ngForOf",t.rows),o(),c("ngIf",t.total>t.perPage)}}function ji(r,e){r&1&&(n(0,"div",149),a(1," Selecciona par\xE1metros y presiona "),n(2,"strong"),a(3,"Buscar"),i(),a(4,". "),i())}var k=class k{constructor(e,t,s,l){this.fb=e;this.api=t;this.reportes=s;this._tools=l;this.modo="full";this.ciBusqueda=null;this.institucion=null;this.instituciones=[];this.anios=[];this.mallas=[];this.niveles=[];this.cursos=[];this.docentes=[];this.docentesEspecialidad=[];this.loading=!1;this.loadingOpciones=!1;this.errorMsg="";this.rows=[];this.total=0;this.page=1;this.perPage=25;this.lastTipo=null;this.stats=null;this.resumen="";this.resumenItems=[];this.showDocenteEnHistorial=!1;this.showDetalleModalCi=!1;this.separarEnTablas=!1;this.separarPorNombreCurso=!1;this.resaltarPorGestion=!0;this.grupos=[];this.filtroGrupoDocente="";this.filtroGrupoEspecialidad="";this.anioBand={};this.loadingFiltro=!1;this.estudiantesEncontrados=[];this.estudianteSeleccionado=null;this.copyMsg="";this.boletinLoadingKey=null;this.subs=[];this.initModalDone=!1}generarBoletaGestion(e){return H(this,null,function*(){try{let t=String(e??"").trim();if(!t)return;let s=(this.rows??[]).filter(D=>String(D?.Anio??"").trim()===t);if(!s.length){this.errorMsg="No hay filas para generar la boleta de esa gesti\xF3n.";return}let l=s[0]??{},d=String(l?.Ap_Paterno??"").trim(),b=String(l?.Ap_Materno??"").trim(),g=String(l?.Nombre??"").trim(),I=String(l?.CI??"").trim(),E=[d,b,g].filter(D=>D).join(" ")||(I?`CI: ${I}`:""),S=String(l?.Malla??"").trim(),w=S||"REGULAR",A=String(l?.NivelCurso??"").trim(),R=A&&S?`${A} (${S})`:A||S||"";this.reportes.openBoletaCalificaciones(E,w,R,t,s)}catch(t){console.error(t),this.errorMsg="No se pudo generar el PDF para esa gesti\xF3n."}})}ngOnInit(){if(this.form=this.fb.group({tipo:["curso",at.required],institucion:["",at.required],anio:[""],malla:[""],nivel_curso:[""],nombre_curso:[""],docente_materia:[""],docente_especialidad:[""],ci:[""],nombre_busqueda:[""],ci_busqueda:[""],estudiante_ci:[""],turno:["MA\xD1ANA"],escarta:[!1],confiar1plana:[!1],obligarmargenes:[!1],tamanioletratxt:[8],per_page:[25]}),this.esModoModalCi){this.loadingOpciones=!1,this.showDetalleModalCi=!1,this.initFromInputsIfNeeded();return}this.cargarInstituciones(),this.subs.push(this.form.get("tipo").valueChanges.subscribe(()=>{this.onTipoChange()})),this.subs.push(this.form.get("institucion").valueChanges.subscribe(()=>{this.resetDependientes(),this.cargarDependientesBase()})),this.subs.push(this.form.get("anio").valueChanges.subscribe(()=>{this.form.patchValue({malla:"",nivel_curso:"",nombre_curso:"",docente_materia:"",docente_especialidad:""},{emitEvent:!1}),this.mallas=[],this.niveles=[],this.cursos=[],this.docentes=[],this.docentesEspecialidad=[],this.cargarMallas(),this.cargarNiveles(),this.cargarCursos(),this.cargarDocentes(),this.cargarDocentesEspecialidad()})),this.subs.push(this.form.get("malla").valueChanges.subscribe(()=>{this.form.patchValue({nivel_curso:"",nombre_curso:"",docente_materia:"",docente_especialidad:""},{emitEvent:!1}),this.niveles=[],this.cursos=[],this.docentes=[],this.docentesEspecialidad=[],this.cargarNiveles(),this.cargarCursos(),this.cargarDocentes(),this.cargarDocentesEspecialidad()})),this.subs.push(this.form.get("nivel_curso").valueChanges.subscribe(()=>{this.form.patchValue({nombre_curso:""},{emitEvent:!1}),this.cursos=[],this.cargarCursos()}))}get esModoModalCi(){return String(this.modo??"").toLowerCase()==="modal_ci"}get modalCiColspan(){return this.showDetalleModalCi?18:10}parseGestion(e){let t=String(e??"").trim();if(!t)return{year:0,sub:0};let s=t.split("/").map(b=>String(b??"").trim()),l=Number(s[0]),d=s.length>1?Number(s[1]):0;return{year:Number.isFinite(l)?l:0,sub:Number.isFinite(d)?d:0}}sortRowsGestionDesc(e){return[...e??[]].sort((t,s)=>{let l=this.parseGestion(t?.Anio),d=this.parseGestion(s?.Anio);return d.year!==l.year?d.year-l.year:d.sub!==l.sub?d.sub-l.sub:0})}ciSoloNumeros(e){return String(e??"").replace(/\D+/g,"")}numVal(e){let t=Number(String(e??"").toString().replace(",","."));return Number.isFinite(t)?t:null}isAprobadoFila(e){let t=this.numVal(e?.Promedio),s=this.numVal(e?.PruebaRecuperacion);return t!==null&&t>=61||s!==null&&s>=61}isReprobadoFila(e){let t=this.numVal(e?.Promedio),s=this.numVal(e?.PruebaRecuperacion);return s!==null&&s>=61?!1:t!==null?t<61:!1}rowResultadoClass(e){return this.isAprobadoFila(e)?"row-aprobado":this.isReprobadoFila(e)?"row-reprobado":""}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}get tipo(){return this.form.get("tipo").value}get separarEnTablasActivo(){return this.separarEnTablas||this.separarPorNombreCurso}resetDependientes(){this.form.patchValue({anio:"",malla:"",nivel_curso:"",nombre_curso:"",docente_materia:"",docente_especialidad:"",ci:"",nombre_busqueda:"",ci_busqueda:"",estudiante_ci:""},{emitEvent:!1}),this.anios=[],this.mallas=[],this.niveles=[],this.cursos=[],this.docentes=[],this.docentesEspecialidad=[],this.estudiantesEncontrados=[],this.estudianteSeleccionado=null}limpiarResultados(e=!0){this.errorMsg="",this.copyMsg="",this.rows=[],this.grupos=[],this.anioBand={},this.total=0,e&&(this.page=1),this.stats=null}cargarInstituciones(){this.loadingOpciones=!0,this.api.OpcionesInstituciones().subscribe({next:e=>{this.instituciones=e?.data??[],this.loadingOpciones=!1,this.initFromInputsIfNeeded()},error:()=>{this.loadingOpciones=!1}})}initFromInputsIfNeeded(){if(this.initModalDone||!this.esModoModalCi)return;let e=this.ciSoloNumeros(this.ciBusqueda);if(!e){this.errorMsg="No se recibi\xF3 un CI v\xE1lido para consultar el historial.";return}let t=String(this.institucion??"").trim(),s=this.instituciones?.length===1?String(this.instituciones[0]??"").trim():"",l=g=>String(g??"").toLowerCase().replace(/\s+/g," ").trim(),d=t?(this.instituciones??[]).find(g=>l(g)===l(t)):"",b=String(d??t??"").trim()||s;if(!b){this.errorMsg="No se pudo determinar la instituci\xF3n. Selecci\xF3nela para buscar por CI.";return}this.form.patchValue({tipo:"estudiante_ci",institucion:b,ci_busqueda:e,estudiante_ci:"",ci:""},{emitEvent:!0}),this.loadingFiltro=!0,this.api.FiltrarEstudiantesPorCI({institucion:b,q:e,limit:80}).subscribe({next:g=>{this.estudiantesEncontrados=g?.data??[];let I=e,S=(this.estudiantesEncontrados??[]).find(w=>this.ciSoloNumeros(w?.CI)===I)??((this.estudiantesEncontrados??[]).length===1?this.estudiantesEncontrados[0]:null);if(!S?.CI){this.errorMsg="No se encontr\xF3 historial para ese CI en la instituci\xF3n seleccionada.",this.loadingFiltro=!1;return}this.onSeleccionEstudiante(String(S.CI)),this.loadingFiltro=!1,this.initModalDone=!0,this.buscar(!0)},error:g=>{this.errorMsg=g?.error?.message||"No se pudo filtrar por CI.",this.loadingFiltro=!1}})}cargarDependientesBase(){this.form.get("institucion").value&&(this.cargarAnios(),this.cargarMallas(),this.cargarNiveles(),this.cargarCursos(),this.cargarDocentes(),this.cargarDocentesEspecialidad())}cargarAnios(){let e=this.form.get("institucion").value;e&&this.api.OpcionesAnios(e).subscribe({next:t=>this.anios=t?.data??[]})}cargarMallas(){let e=this.form.get("institucion").value,t=this.form.get("anio").value;e&&this.api.OpcionesMallas(e,t).subscribe({next:s=>this.mallas=s?.data??[]})}cargarNiveles(){let e=this.form.get("institucion").value,t=this.form.get("anio").value,s=this.form.get("malla").value;e&&this.api.OpcionesNiveles(e,t,s).subscribe({next:l=>this.niveles=l?.data??[]})}cargarCursos(){let e=this.form.get("institucion").value,t=this.form.get("anio").value,s=this.form.get("malla").value,l=this.form.get("nivel_curso").value;e&&this.api.OpcionesCursos(e,t,s,l).subscribe({next:d=>this.cursos=d?.data??[]})}cargarDocentes(){let e=this.form.get("institucion").value,t=this.form.get("anio").value,s=this.form.get("malla").value;e&&this.api.OpcionesDocentes(e,t,s).subscribe({next:l=>this.docentes=l?.data??[]})}cargarDocentesEspecialidad(){let e=this.form.get("institucion").value,t=this.form.get("anio").value,s=this.form.get("malla").value;e&&this.api.OpcionesDocentesEspecialidad(e,t,s).subscribe({next:l=>this.docentesEspecialidad=l?.data??[]})}val(e){return String(this.form.get(e)?.value??"").trim()}num(e){let t=Number(String(e??"").replace(",","."));return Number.isFinite(t)?t:0}isAbandono(e){let t=this.num(e?.Promedio),s=this.num(e?.PruebaRecuperacion);return t===0&&(s===0||!Number.isFinite(s))}passMark(){return 61}evalReprobado(e,t){let s=this.num(e?.[`Teorica${t}`]),l=this.num(e?.[`Practica${t}`]);return s+l<this.passMark()}finalReprobado(e){let t=this.passMark(),s=this.num(e?.Promedio),l=this.num(e?.PruebaRecuperacion);return s===0&&(l===0||!Number.isFinite(l))?!1:s<t&&l<t}toggleDocenteEnHistorial(){this.showDocenteEnHistorial=!this.showDocenteEnHistorial}construirResumen(e){let t=[];return e.institucion&&t.push({kind:"institucion",label:"INSTITUCI\xD3N",value:e.institucion}),e.anio&&t.push({kind:"anio",label:"A\xD1O",value:e.anio}),e.malla&&t.push({kind:"malla",label:"MALLA",value:e.malla}),e.nivel_curso&&t.push({kind:"nivel",label:"NIVEL",value:e.nivel_curso}),e.nombre_curso&&t.push({kind:"curso",label:"CURSO",value:e.nombre_curso}),e.docente_materia&&t.push({kind:"docente",label:"DOCENTE",value:e.docente_materia}),e.docente_especialidad&&t.push({kind:"docente_esp",label:"DOCENTE ESP.",value:e.docente_especialidad}),e.estudiante_label&&t.push({kind:"estudiante",label:"ESTUDIANTE",value:e.estudiante_label}),e.ci&&t.push({kind:"ci",label:"CI",value:e.ci}),t.length?{text:`MOSTRANDO INFORMACI\xD3N DE ${t.map(l=>`${l.label} ${l.value}`).join(" \xB7 ")}`,items:t}:{text:"",items:[]}}onTipoChange(){let e=this.tipo;e!=="estudiante"&&e!=="estudiante_nombre"&&e!=="estudiante_ci"&&(this.showDocenteEnHistorial=!1),e!=="estudiante"&&e!=="stats_estudiante"&&this.form.patchValue({ci:""},{emitEvent:!1}),e==="estudiante_nombre"||e==="estudiante_ci"||e==="stats_estudiante_ci"||(this.estudiantesEncontrados=[],this.estudianteSeleccionado=null,this.form.patchValue({nombre_busqueda:"",ci_busqueda:"",estudiante_ci:""},{emitEvent:!1})),e!=="estudiante_nombre"&&this.form.patchValue({nombre_busqueda:""},{emitEvent:!1}),e!=="estudiante_ci"&&e!=="stats_estudiante_ci"&&this.form.patchValue({ci_busqueda:""},{emitEvent:!1}),this.resumen="",this.resumenItems=[],this.copyMsg="",e!=="curso"&&e!=="docente"&&e!=="docente_especialidad"&&(this.separarEnTablas=!1,this.separarPorNombreCurso=!1)}toggleSepararEnTablas(){this.separarEnTablas=!this.separarEnTablas,this.rebuildGrupos()}toggleSepararPorNombreCurso(){this.separarPorNombreCurso=!this.separarPorNombreCurso,this.rebuildGrupos()}toggleResaltarPorGestion(){this.resaltarPorGestion=!this.resaltarPorGestion,this.recomputeAnioBand()}recomputeAnioBand(){let e={},t=0;for(let s of this.rows??[]){let l=String(s?.Anio??"").trim();l&&e[l]===void 0&&(e[l]=t,t+=1)}this.anioBand=e}anioBandClass(e){if(!this.resaltarPorGestion)return"";let t=String(e?.Anio??"").trim();if(!t)return"";let s=this.anioBand[t];return s===void 0?"":s%2===0?"gest-even":"gest-odd"}shouldShowGestionSeparator(e){if(!this.resaltarPorGestion||!(this.tipo==="estudiante"||this.tipo==="estudiante_nombre"||this.tipo==="estudiante_ci")||!this.rows?.length)return!1;if(e===0)return!0;let t=String(this.rows[e-1]?.Anio??"").trim(),s=String(this.rows[e]?.Anio??"").trim();return t!==s}grupoKey(e){let t=String(e?.Anio??"").trim(),s=String(e?.Malla??"").trim(),l=String(e?.NivelCurso??"").trim(),d=String(e?.NombreCurso??"").trim();if(!d.toUpperCase().includes("INSTRUMENTO DE ESPECIALIDAD"))return`${t}||${s}||${l}||${d}`;let g=String(e?.Docente_Especialidad??"").trim(),I=String(e?.Especialidad??"").trim();return`${t}||${s}||${l}||${d}||${g}||${I}`}shouldShowGrupoSeparator(e){return!this.resaltarPorGestion||!(this.tipo==="curso"||this.tipo==="docente"||this.tipo==="docente_especialidad")||this.separarEnTablasActivo||!this.rows?.length?!1:e===0?!0:this.grupoKey(this.rows[e-1])!==this.grupoKey(this.rows[e])}grupoSeparatorText(e){let t=String(e?.Anio??"").trim(),s=String(e?.Malla??"").trim(),l=String(e?.NivelCurso??"").trim(),d=String(e?.NombreCurso??"").trim(),b=d.toUpperCase().includes("INSTRUMENTO DE ESPECIALIDAD"),g=b?String(e?.Docente_Especialidad??"").trim():"",I=b?String(e?.Especialidad??"").trim():"",E=[];return t&&E.push(`A\xF1o ${t}`),s&&E.push(`Malla ${s}`),l&&E.push(`Nivel ${l}`),d&&E.push(`${d}`),I&&E.push(`Especialidad ${I}`),g&&E.push(`Docente Esp. ${g}`),E.join(" \xB7 ")}isInstrumentoEspecialidad(e){return String(e??"").toUpperCase().includes("INSTRUMENTO DE ESPECIALIDAD")}rebuildGrupos(){if(!this.separarEnTablasActivo||!this.rows?.length){this.grupos=[];return}let e=new Map,t=[];for(let d of this.rows){let b=String(d?.Anio??"").trim(),g=String(d?.Malla??"").trim(),I=String(d?.NivelCurso??"").trim(),E=String(d?.NombreCurso??"").trim(),S=this.isInstrumentoEspecialidad(E),w=S?String(d?.Docente_Especialidad??"").trim():"",A=S?String(d?.Especialidad??"").trim():"",R=this.separarEnTablas?I:"",D=this.separarPorNombreCurso||S?E:"",h=[b,g];this.separarEnTablas&&h.push(I),(this.separarPorNombreCurso||S)&&h.push(E),S&&h.push(w,A);let u=h.join("||");e.has(u)||(e.set(u,{key:u,Anio:b,Malla:g,NivelCurso:R,NombreCurso:D,DocenteEspecialidad:w,Especialidad:A,rows:[]}),t.push(u)),e.get(u).rows.push(d)}this.grupos=t.map(d=>e.get(d)).filter(Boolean);let s=this.docentesParaFiltroGrupo,l=this.especialidadesParaFiltroGrupo;this.filtroGrupoDocente&&!s.includes(this.filtroGrupoDocente)&&(this.filtroGrupoDocente=""),this.filtroGrupoEspecialidad&&!l.includes(this.filtroGrupoEspecialidad)&&(this.filtroGrupoEspecialidad="")}get docentesParaFiltroGrupo(){let e=new Set;for(let t of this.grupos??[]){let s=String(t?.DocenteEspecialidad??"").trim();s&&e.add(s)}return Array.from(e.values()).sort((t,s)=>t.localeCompare(s))}get especialidadesParaFiltroGrupo(){let e=new Set;for(let t of this.grupos??[]){let s=String(t?.Especialidad??"").trim();s&&e.add(s)}return Array.from(e.values()).sort((t,s)=>t.localeCompare(s))}get gruposFiltrados(){let e=String(this.filtroGrupoDocente??"").trim(),t=String(this.filtroGrupoEspecialidad??"").trim();return!e&&!t?this.grupos:(this.grupos??[]).filter(s=>{let l=String(s?.DocenteEspecialidad??"").trim(),d=String(s?.Especialidad??"").trim();return!(e&&l!==e||t&&d!==t)})}limpiarFiltrosGrupo(){this.filtroGrupoDocente="",this.filtroGrupoEspecialidad=""}grupoTitulo(e){let t=[];return e.Anio&&t.push(`A\xD1O ${e.Anio}`),e.Malla&&t.push(`MALLA ${e.Malla}`),e.NivelCurso&&t.push(`NIVEL ${e.NivelCurso}`),e.NombreCurso&&t.push(`NOMBREMATERIA ${e.NombreCurso}`),e.Especialidad&&t.push(`ESPECIALIDAD ${e.Especialidad}`),e.DocenteEspecialidad&&t.push(`DOCENTEESP ${e.DocenteEspecialidad}`),t.join(" \xB7 ")}buildGroupedTsv(e,t){let s=[];for(let l of this.grupos??[]){s.push(this.grupoTitulo(l)),s.push(e.join("	"));for(let d=0;d<(l.rows?.length??0);d++)s.push(t(l.rows[d],d+1).join("	"));s.push("")}return s.join(`\r
`).trim()}filtrarPorNombre(){this.copyMsg="",this.errorMsg="",this.estudiantesEncontrados=[],this.estudianteSeleccionado=null,this.form.patchValue({estudiante_ci:""},{emitEvent:!1});let e=this.val("institucion"),t=this.val("nombre_busqueda");if(!e){this.errorMsg="Seleccione la instituci\xF3n antes de filtrar.";return}if(!t||t.length<2){this.errorMsg="Ingrese al menos 2 caracteres para filtrar por nombre.";return}this.loadingFiltro=!0,this.api.FiltrarEstudiantesPorNombre({institucion:e,nombre:t,limit:80}).subscribe({next:s=>{this.estudiantesEncontrados=s?.data??[],this.loadingFiltro=!1},error:s=>{this.errorMsg=s?.error?.message||"No se pudo filtrar estudiantes.",this.loadingFiltro=!1}})}filtrarPorCI(){this.copyMsg="",this.errorMsg="",this.estudiantesEncontrados=[],this.estudianteSeleccionado=null,this.form.patchValue({estudiante_ci:""},{emitEvent:!1});let e=this.val("institucion"),t=this.val("ci_busqueda"),s=this.ciSoloNumeros(t);if(!e){this.errorMsg="Seleccione la instituci\xF3n antes de filtrar.";return}if(!s||s.length<2){this.errorMsg="Ingrese al menos 2 n\xFAmeros del CI para filtrar.";return}this.loadingFiltro=!0,this.api.FiltrarEstudiantesPorCI({institucion:e,q:s,limit:80}).subscribe({next:l=>{this.estudiantesEncontrados=l?.data??[],this.loadingFiltro=!1},error:l=>{this.errorMsg=l?.error?.message||"No se pudo filtrar estudiantes.",this.loadingFiltro=!1}})}onSeleccionEstudiante(e){let t=this.estudiantesEncontrados.find(l=>String(l?.CI??"")===String(e)),s=t?`${t.Ap_Paterno??""} ${t.Ap_Materno??""} ${t.Nombre??""}`.replace(/\s+/g," ").trim():"";this.estudianteSeleccionado=e?{CI:e,label:s}:null,this.form.patchValue({estudiante_ci:e},{emitEvent:!1})}copyToClipboard(e){return H(this,null,function*(){let t=(e??"").trim();if(!t){this.copyMsg="No hay datos para copiar.";return}try{yield navigator.clipboard.writeText(t),this.copyMsg="Copiado al portapapeles."}catch{let s=document.createElement("textarea");s.value=t,s.style.position="fixed",s.style.left="-9999px",document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),this.copyMsg="Copiado al portapapeles."}})}buildTsv(e,t){return[e.join("	"),...t.map(l=>l.join("	"))].join(`\r
`)}copiarTodoActual(){if(this.tipo==="estudiante"||this.tipo==="estudiante_nombre"||this.tipo==="estudiante_ci"){let l=["N\xB0","Anio","Malla","NivelCurso","Rango","NombreCurso",...this.showDocenteEnHistorial?["Docente"]:[],"Teorica1","Practica1","Teorica2","Practica2","Teorica3","Practica3","Teorica4","Practica4","PromEvT","PromEvP","Promedio","Recup"],d=(this.page-1)*this.perPage,b=(this.rows??[]).map((g,I)=>[String(d+I+1),String(g?.Anio??""),String(g?.Malla??""),String(g?.NivelCurso??""),String(g?.Rango??""),String(g?.NombreCurso??""),...this.showDocenteEnHistorial?[String(g?.DocenteMateria&&String(g.DocenteMateria).trim().length>0?g.DocenteMateria:g?.Docente_Especialidad??"")]:[],String(g?.Teorica1??""),String(g?.Practica1??""),String(g?.Teorica2??""),String(g?.Practica2??""),String(g?.Teorica3??""),String(g?.Practica3??""),String(g?.Teorica4??""),String(g?.Practica4??""),String(g?.PromEvT??""),String(g?.PromEvP??""),String(g?.Promedio??""),String(g?.PruebaRecuperacion??"")]);this.copyToClipboard(this.buildTsv(l,b));return}let e=["N\xB0","CI","Ap_Paterno","Ap_Materno","Nombre","Teorica1","Practica1","Teorica2","Practica2","Teorica3","Practica3","Teorica4","Practica4","PromEvT","PromEvP","Promedio","Recup"];if((this.tipo==="curso"||this.tipo==="docente"||this.tipo==="docente_especialidad")&&this.separarEnTablasActivo&&this.grupos?.length){let l=this.buildGroupedTsv(e,(d,b)=>[String(b),String(d?.CI??""),String(d?.Ap_Paterno??""),String(d?.Ap_Materno??""),String(d?.Nombre??""),String(d?.Teorica1??""),String(d?.Practica1??""),String(d?.Teorica2??""),String(d?.Practica2??""),String(d?.Teorica3??""),String(d?.Practica3??""),String(d?.Teorica4??""),String(d?.Practica4??""),String(d?.PromEvT??""),String(d?.PromEvP??""),String(d?.Promedio??""),String(d?.PruebaRecuperacion??"")]);this.copyToClipboard(l);return}let t=(this.page-1)*this.perPage,s=(this.rows??[]).map((l,d)=>[String(t+d+1),String(l?.CI??""),String(l?.Ap_Paterno??""),String(l?.Ap_Materno??""),String(l?.Nombre??""),String(l?.Teorica1??""),String(l?.Practica1??""),String(l?.Teorica2??""),String(l?.Practica2??""),String(l?.Teorica3??""),String(l?.Practica3??""),String(l?.Teorica4??""),String(l?.Practica4??""),String(l?.PromEvT??""),String(l?.PromEvP??""),String(l?.Promedio??""),String(l?.PruebaRecuperacion??"")]);this.copyToClipboard(this.buildTsv(e,s))}copiarApellidosNombresCiYNotas(){if(this.tipo==="estudiante"||this.tipo==="estudiante_nombre"||this.tipo==="estudiante_ci"){let s=["Anio","Malla","NivelCurso","Rango","NombreCurso",...this.showDocenteEnHistorial?["Docente"]:[],"Teorica1","Practica1","Teorica2","Practica2","Teorica3","Practica3","Teorica4","Practica4","PromEvT","PromEvP","Promedio","Recup"],l=(this.rows??[]).map(d=>[String(d?.Anio??""),String(d?.Malla??""),String(d?.NivelCurso??""),String(d?.Rango??""),String(d?.NombreCurso??""),...this.showDocenteEnHistorial?[String(d?.DocenteMateria&&String(d.DocenteMateria).trim().length>0?d.DocenteMateria:d?.Docente_Especialidad??"")]:[],String(d?.Teorica1??""),String(d?.Practica1??""),String(d?.Teorica2??""),String(d?.Practica2??""),String(d?.Teorica3??""),String(d?.Practica3??""),String(d?.Teorica4??""),String(d?.Practica4??""),String(d?.PromEvT??""),String(d?.PromEvP??""),String(d?.Promedio??""),String(d?.PruebaRecuperacion??"")]);this.copyToClipboard(this.buildTsv(s,l));return}let e=["Ap_Paterno","Ap_Materno","Nombre","CI","Teorica1","Practica1","Teorica2","Practica2","Teorica3","Practica3","Teorica4","Practica4","PromEvT","PromEvP","Promedio","Recup"];if((this.tipo==="curso"||this.tipo==="docente"||this.tipo==="docente_especialidad")&&this.separarEnTablasActivo&&this.grupos?.length){let s=this.buildGroupedTsv(e,l=>[String(l?.Ap_Paterno??""),String(l?.Ap_Materno??""),String(l?.Nombre??""),String(l?.CI??""),String(l?.Teorica1??""),String(l?.Practica1??""),String(l?.Teorica2??""),String(l?.Practica2??""),String(l?.Teorica3??""),String(l?.Practica3??""),String(l?.Teorica4??""),String(l?.Practica4??""),String(l?.PromEvT??""),String(l?.PromEvP??""),String(l?.Promedio??""),String(l?.PruebaRecuperacion??"")]);this.copyToClipboard(s);return}let t=(this.rows??[]).map(s=>[String(s?.Ap_Paterno??""),String(s?.Ap_Materno??""),String(s?.Nombre??""),String(s?.CI??""),String(s?.Teorica1??""),String(s?.Practica1??""),String(s?.Teorica2??""),String(s?.Practica2??""),String(s?.Teorica3??""),String(s?.Practica3??""),String(s?.Teorica4??""),String(s?.Practica4??""),String(s?.PromEvT??""),String(s?.PromEvP??""),String(s?.Promedio??""),String(s?.PruebaRecuperacion??"")]);this.copyToClipboard(this.buildTsv(e,t))}copiarApellidosNombresYResumen(){if(this.tipo==="estudiante"||this.tipo==="estudiante_nombre"||this.tipo==="estudiante_ci"){let s=["Anio","Malla","NivelCurso","Rango","NombreCurso",...this.showDocenteEnHistorial?["Docente"]:[],"PromEvT","PromEvP","Promedio","Recup"],l=(this.rows??[]).map(d=>[String(d?.Anio??""),String(d?.Malla??""),String(d?.NivelCurso??""),String(d?.Rango??""),String(d?.NombreCurso??""),...this.showDocenteEnHistorial?[String(d?.DocenteMateria&&String(d.DocenteMateria).trim().length>0?d.DocenteMateria:d?.Docente_Especialidad??"")]:[],String(d?.PromEvT??""),String(d?.PromEvP??""),String(d?.Promedio??""),String(d?.PruebaRecuperacion??"")]);this.copyToClipboard(this.buildTsv(s,l));return}let e=["Ap_Paterno","Ap_Materno","Nombre","PromEvT","PromEvP","Promedio","Recup"];if((this.tipo==="curso"||this.tipo==="docente"||this.tipo==="docente_especialidad")&&this.separarEnTablasActivo&&this.grupos?.length){let s=this.buildGroupedTsv(e,l=>[String(l?.Ap_Paterno??""),String(l?.Ap_Materno??""),String(l?.Nombre??""),String(l?.PromEvT??""),String(l?.PromEvP??""),String(l?.Promedio??""),String(l?.PruebaRecuperacion??"")]);this.copyToClipboard(s);return}let t=(this.rows??[]).map(s=>[String(s?.Ap_Paterno??""),String(s?.Ap_Materno??""),String(s?.Nombre??""),String(s?.PromEvT??""),String(s?.PromEvP??""),String(s?.Promedio??""),String(s?.PruebaRecuperacion??"")]);this.copyToClipboard(this.buildTsv(e,t))}buildListaDocentesFromRows(e){let t=new Set;for(let s of e??[]){let l=String(s?.DocenteMateria??"").trim(),d=String(s?.Docente_Especialidad??"").trim(),b=l||d;b&&t.add(b)}return Array.from(t.values()).join(", ")}generarBoletinGrupo(e){return H(this,null,function*(){let t=e?.rows?.[0];if(!t){this.copyMsg="No hay datos para generar bolet\xEDn.";return}this.boletinLoadingKey=e.key,this.copyMsg="",this.errorMsg="";try{let l=` - ${(this.val("turno")||"MA\xD1ANA").toUpperCase()}`,d=String(this.val("institucion")??"").trim(),b=String(t?.Anio??"").trim(),g=String(t?.NombreCurso??"").trim(),I=this.isInstrumentoEspecialidad(g),E=String(e?.DocenteEspecialidad??"").trim(),S=String(e?.Especialidad??"").trim(),w=I?E||String(t?.Docente_Especialidad??"").trim()||this.buildListaDocentesFromRows(e.rows):this.buildListaDocentesFromRows(e.rows),A=I?E||String(t?.Docente_Especialidad??"").trim():String(t?.DocenteMateria??t?.Docente_Especialidad??"").trim(),R={NivelCurso:String(t?.NivelCurso??"").trim(),NombreCurso:g,Sigla:String(t?.Sigla??"").trim(),Malla:String(t?.Malla??"").trim(),Nombre:A,Ap_Paterno:"",Ap_Materno:""},D=I?S||String(t?.Especialidad??"").trim():"",h=!!this.val("escarta"),u=!0,y=Math.max(1,Number(this.val("tamanioletratxt")??8)||8),$t=!!this.val("confiar1plana"),Bt=!!this.val("obligarmargenes");yield this.reportes.GenerarBoletin2025DesdePerfil(e.rows,R,D,w,b,l,h,u,y,$t,Bt,d)}catch(s){this.errorMsg="No se pudo generar el bolet\xEDn.",console.error(s)}finally{this.boletinLoadingKey=null}})}buscar(e=!0){this.limpiarResultados(e),this.loading=!0,this.lastTipo=this.tipo;let t=this.val("institucion"),s=this.val("anio")||void 0,l=this.val("malla")||void 0,d=this.val("nivel_curso")||void 0,b=this.val("nombre_curso")||void 0,g=this.val("docente_materia")||void 0,I=this.val("docente_especialidad")||void 0,E=this.val("ci"),S=this.val("estudiante_ci"),w=Number(this.form.get("per_page").value??25);this.perPage=w;let A=this.tipo==="estudiante"||this.tipo==="stats_estudiante",R=this.tipo==="estudiante_nombre"||this.tipo==="estudiante_ci"||this.tipo==="stats_estudiante_ci",D=this.construirResumen({institucion:t,anio:s,malla:l,nivel_curso:d,nombre_curso:b,docente_materia:g,docente_especialidad:I,ci:A?E||void 0:R&&S||void 0,estudiante_label:R&&this.estudianteSeleccionado?.label||void 0});this.resumen=D.text,this.resumenItems=D.items;let h=()=>this.loading=!1;if(this.tipo==="curso"){this.api.ConsultarPorCurso({institucion:t,anio:s,malla:l,nivel_curso:d,nombre_curso:b,page:this.page,per_page:w}).subscribe({next:u=>{let y=u?.data;this.rows=this.sortRowsGestionDesc(y?.data??[]),this.recomputeAnioBand(),this.rebuildGrupos(),this.total=y?.total??0,h()},error:u=>{this.errorMsg=u?.error?.message||"No se pudo cargar la informaci\xF3n.",h()}});return}if(this.tipo==="docente"){this.api.ConsultarPorDocente({institucion:t,anio:s,malla:l,docente_materia:g,page:this.page,per_page:w}).subscribe({next:u=>{let y=u?.data;this.rows=this.sortRowsGestionDesc(y?.data??[]),this.recomputeAnioBand(),this.rebuildGrupos(),this.total=y?.total??0,h()},error:u=>{this.errorMsg=u?.error?.message||"No se pudo cargar la informaci\xF3n.",h()}}),this.api.EstadisticasPorDocente({institucion:t,anio:s,malla:l,docente_materia:g}).subscribe({next:u=>this.stats=u?.data??null});return}if(this.tipo==="docente_especialidad"){this.api.ConsultarPorDocenteEspecialidad({institucion:t,anio:s,malla:l,docente_especialidad:I,page:this.page,per_page:w}).subscribe({next:u=>{let y=u?.data;this.rows=this.sortRowsGestionDesc(y?.data??[]),this.recomputeAnioBand(),this.rebuildGrupos(),this.total=y?.total??0,h()},error:u=>{this.errorMsg=u?.error?.message||"No se pudo cargar la informaci\xF3n.",h()}});return}if(this.tipo==="estudiante"){if(!E){this.errorMsg="Debe ingresar el CI para buscar.",h();return}this.api.ConsultarPorEstudiante({institucion:t,ci:E,page:this.page,per_page:w}).subscribe({next:u=>{let y=u?.data;this.rows=this.sortRowsGestionDesc(y?.data??[]),this.recomputeAnioBand(),this.rebuildGrupos(),this.total=y?.total??0,h()},error:u=>{this.errorMsg=u?.error?.message||"No se pudo cargar la informaci\xF3n.",h()}}),this.api.EstadisticasPorEstudiante({institucion:t,ci:E}).subscribe({next:u=>this.stats=u?.data??null});return}if(this.tipo==="estudiante_nombre"){if(!S){this.errorMsg="Debe filtrar y seleccionar un estudiante antes de buscar.",h();return}this.api.ConsultarPorEstudiante({institucion:t,ci:S,page:this.page,per_page:w}).subscribe({next:u=>{let y=u?.data;this.rows=this.sortRowsGestionDesc(y?.data??[]),this.recomputeAnioBand(),this.rebuildGrupos(),this.total=y?.total??0,h()},error:u=>{this.errorMsg=u?.error?.message||"No se pudo cargar la informaci\xF3n.",h()}}),this.api.EstadisticasPorEstudiante({institucion:t,ci:S}).subscribe({next:u=>this.stats=u?.data??null});return}if(this.tipo==="estudiante_ci"){if(!S){this.errorMsg="Debe filtrar y seleccionar un estudiante antes de buscar.",h();return}this.api.ConsultarPorEstudiante({institucion:t,ci:S,page:this.page,per_page:w}).subscribe({next:u=>{let y=u?.data;this.rows=this.sortRowsGestionDesc(y?.data??[]),this.recomputeAnioBand(),this.rebuildGrupos(),this.total=y?.total??0,h()},error:u=>{this.errorMsg=u?.error?.message||"No se pudo cargar la informaci\xF3n.",h()}}),this.api.EstadisticasPorEstudiante({institucion:t,ci:S}).subscribe({next:u=>this.stats=u?.data??null});return}if(this.tipo==="stats_general"){this.api.EstadisticasGeneral({institucion:t,anio:s,malla:l}).subscribe({next:u=>{this.stats=u?.data??null,h()},error:u=>{this.errorMsg=u?.error?.message||"No se pudo cargar estad\xEDsticas.",h()}});return}if(this.tipo==="stats_docente"){this.api.EstadisticasPorDocente({institucion:t,anio:s,malla:l,docente_materia:g}).subscribe({next:u=>{this.stats=u?.data??null,h()},error:u=>{this.errorMsg=u?.error?.message||"No se pudo cargar estad\xEDsticas.",h()}});return}if(this.tipo==="stats_estudiante"){if(!E){this.errorMsg="Debe ingresar el CI para ver estad\xEDsticas.",h();return}this.api.EstadisticasPorEstudiante({institucion:t,ci:E}).subscribe({next:u=>{this.stats=u?.data??null,h()},error:u=>{this.errorMsg=u?.error?.message||"No se pudo cargar estad\xEDsticas.",h()}});return}if(this.tipo==="stats_estudiante_ci"){if(!S){this.errorMsg="Debe filtrar y seleccionar un estudiante antes de ver estad\xEDsticas.",h();return}this.api.EstadisticasPorEstudiante({institucion:t,ci:S}).subscribe({next:u=>{this.stats=u?.data??null,h()},error:u=>{this.errorMsg=u?.error?.message||"No se pudo cargar estad\xEDsticas.",h()}});return}if(this.tipo==="stats_curso"){if(!d){this.errorMsg="Debe seleccionar el Nivel (Curso) para ver estad\xEDsticas.",h();return}this.api.EstadisticasPorCurso({institucion:t,anio:s,malla:l,nivel_curso:d}).subscribe({next:u=>{this.stats=u?.data??null,h()},error:u=>{this.errorMsg=u?.error?.message||"No se pudo cargar estad\xEDsticas.",h()}});return}h()}onPageChange(e){this.page=e,(this.lastTipo==="curso"||this.lastTipo==="docente"||this.lastTipo==="docente_especialidad"||this.lastTipo==="estudiante"||this.lastTipo==="estudiante_nombre"||this.lastTipo==="estudiante_ci")&&this.buscar(!1)}mostrarCampo(e){let t=this.tipo;return e==="anio"||e==="malla"?t!=="estudiante"&&t!=="stats_estudiante"&&t!=="estudiante_nombre"&&t!=="estudiante_ci"&&t!=="stats_estudiante_ci":e==="nivel"?t==="curso"||t==="stats_curso":e==="curso"?t==="curso":e==="docente"?t==="docente"||t==="stats_docente":e==="ci"?t==="estudiante"||t==="stats_estudiante":!0}};k.\u0275fac=function(t){return new(t||k)($(Ft),$(Q),$(Gt),$(Ot))},k.\u0275cmp=ct({type:k,selectors:[["app-califhistorias"]],inputs:{modo:"modo",ciBusqueda:"ciBusqueda",institucion:"institucion"},standalone:!1,decls:18,vars:12,consts:[[1,"container","mt-4"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"container-fluid","py-3"],["class","card shadow-sm mb-3",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","text-center py-3",4,"ngIf"],["class","alert alert-light border py-2 resumen-box",4,"ngIf"],["class","alert alert-success py-2",4,"ngIf"],["class","row g-3",4,"ngIf"],["class","card shadow-sm mt-3",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],[1,"card","shadow-sm","mb-3"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-12","col-lg-3"],[1,"form-floating"],["formControlName","tipo",1,"form-select"],["value","curso"],["value","docente"],["value","docente_especialidad"],["value","estudiante"],["value","estudiante_nombre"],["value","estudiante_ci"],["value","stats_general"],["value","stats_docente"],["value","stats_estudiante"],["value","stats_estudiante_ci"],["value","stats_curso"],["formControlName","institucion",1,"form-select",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"invalid-feedback"],["class","form-text",4,"ngIf"],["class","col-12 col-lg-2",4,"ngIf"],["class","col-12 col-lg-4",4,"ngIf"],[1,"col-6","col-lg-2"],["formControlName","per_page",1,"form-select"],[3,"ngValue"],["class","col-6 col-lg-2",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"col-12","col-lg-2","d-flex","align-items-end"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[4,"ngIf"],[3,"value"],[1,"form-text"],[1,"col-12","col-lg-2"],["formControlName","anio",1,"form-select"],["formControlName","malla",1,"form-select"],["formControlName","nivel_curso",1,"form-select"],[1,"col-12","col-lg-4"],["formControlName","nombre_curso",1,"form-select"],["formControlName","docente_materia",1,"form-select"],["formControlName","docente_especialidad",1,"form-select"],["placeholder","CI","formControlName","ci",1,"form-control"],[1,"form-label"],[1,"input-group"],["placeholder","Ej: Juan Perez","formControlName","nombre_busqueda",1,"form-control"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],["placeholder","Ej: 123","formControlName","ci_busqueda",1,"form-control"],["formControlName","estudiante_ci",1,"form-select",3,"change"],["formControlName","turno",1,"form-select"],["value","MA\xD1ANA"],["value","TARDE"],["value","NOCHE"],[1,"col-12"],[1,"row","g-2","align-items-center"],[1,"col-12","col-md-3"],[1,"form-check"],["type","checkbox","id","ESCARTA","formControlName","escarta",1,"form-check-input"],["for","ESCARTA",1,"form-check-label"],["type","checkbox","id","confiar1planaID","formControlName","confiar1plana",1,"form-check-input"],["for","confiar1planaID",1,"form-check-label"],["type","checkbox","id","obligarmargen","formControlName","obligarmargenes",1,"form-check-input"],["for","obligarmargen",1,"form-check-label"],[1,"col-12","col-md-3","d-flex","align-items-center","gap-2"],[1,"form-text","mb-0"],["type","number","min","1","step","1","formControlName","tamanioletratxt",1,"form-control",2,"width","110px"],[1,"d-flex","flex-wrap","gap-3"],[1,"form-check","form-switch","mb-0"],["type","checkbox","role","switch",1,"form-check-input",3,"change","checked"],[1,"form-check-label"],[1,"text-muted","small","mt-1"],[1,"alert","alert-danger"],[1,"text-center","py-3"],["role","status","aria-label","Cargando",1,"spinner-border","text-primary"],[1,"text-muted","small","mt-2"],[1,"alert","alert-light","border","py-2","resumen-box"],[1,"text-uppercase","small","fw-semibold","text-muted"],[1,"mt-1"],[4,"ngFor","ngForOf"],[1,"resumen-label",3,"ngClass"],[1,"resumen-value"],["class","resumen-sep",4,"ngIf"],[1,"resumen-sep"],[1,"alert","alert-success","py-2"],[1,"card","border-0","shadow-sm","h-100"],[1,"text-muted","small"],[1,"h4","mb-0"],["class","col-12 col-md-3",4,"ngIf"],[1,"h5","mb-0"],[1,"card","shadow-sm","mt-3"],[1,"card-header","bg-white"],[1,"table-responsive"],[1,"table","table-sm","table-striped","mb-0"],[1,"table-light"],[1,"text-center"],[1,"card-header","bg-white","d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","gap-2"],["class","d-flex align-items-center gap-3",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],["class","table table-striped table-hover table-sm align-middle",4,"ngIf"],["class","card-footer bg-white",4,"ngIf"],[1,"d-flex","align-items-center","gap-3"],["class","card shadow-sm mb-3",4,"ngFor","ngForOf"],[1,"card-body","py-2"],[1,"row","g-2","align-items-end"],["class","col-12 col-lg-5",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-outline-secondary","w-100",3,"click"],[1,"col-12","col-lg-5"],[1,"form-label","mb-1"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[1,"card-header","bg-white","d-flex","align-items-center","justify-content-between","gap-2"],["class","text-muted",4,"ngIf"],[1,"text-muted"],[1,"table","table-striped","table-hover","table-sm","align-middle","mb-0"],[3,"ngClass",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-outline-success",3,"click","disabled"],[1,"bi","bi-file"],[3,"ngClass"],[1,"text-center","text-muted"],[1,"text-center",3,"ngClass"],[1,"text-center","fw-semibold",3,"ngClass"],[1,"table","table-striped","table-hover","table-sm","align-middle"],["class","gest-sep",4,"ngIf"],[1,"gest-sep"],[1,"d-flex","align-items-center","justify-content-between"],["type","button",1,"btn","btn-sm","btn-outline-dark",3,"click"],["class","fst-italic text-muted",4,"ngIf"],[1,"fst-italic","text-muted"],["colspan","22"],[1,"card-footer","bg-white"],[3,"pageChange","collectionSize","page","pageSize","maxSize","boundaryLinks"],["type","checkbox","role","switch","id","showDetalleModalCi",1,"form-check-input",3,"ngModelChange","ngModel"],["for","showDetalleModalCi",1,"form-check-label"],["class","text-center",4,"ngIf"],["class","text-center",3,"ngClass",4,"ngIf"],[1,"alert","alert-info","mt-3"]],template:function(t,s){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),a(4,"CALIFICACIONES DEL ANTERIOR SISTEMA"),i()()()(),n(5,"div",4),_(6,Se,75,28,"div",5)(7,Ee,2,1,"div",6)(8,Ce,4,0,"div",7)(9,ye,5,1,"div",8)(10,Te,2,1,"div",9)(11,we,26,9,"div",10)(12,Ae,26,1,"div",11)(13,Fe,24,1,"div",11)(14,Oe,24,1,"div",11)(15,Si,20,9,"div",11)(16,Li,43,11,"div",11)(17,ji,5,0,"div",12),i()),t&2&&(o(6),c("ngIf",!s.esModoModalCi),o(),c("ngIf",s.errorMsg),o(),c("ngIf",s.loading||s.loadingFiltro||s.loadingOpciones),o(),c("ngIf",!s.esModoModalCi&&(s.resumenItems==null?null:s.resumenItems.length)),o(),c("ngIf",!s.esModoModalCi&&s.copyMsg),o(),c("ngIf",!s.esModoModalCi&&(s.stats==null?null:s.stats.general)),o(),c("ngIf",!s.esModoModalCi&&(s.stats==null||s.stats.por_curso==null?null:s.stats.por_curso.length)),o(),c("ngIf",!s.esModoModalCi&&(s.stats==null||s.stats.por_docente==null?null:s.stats.por_docente.length)),o(),c("ngIf",!s.esModoModalCi&&(s.stats==null||s.stats.por_anio_malla==null?null:s.stats.por_anio_malla.length)),o(),c("ngIf",!s.esModoModalCi&&(s.rows==null?null:s.rows.length)),o(),c("ngIf",s.esModoModalCi&&(s.rows==null?null:s.rows.length)),o(),c("ngIf",!s.esModoModalCi&&!s.loading&&!(s.rows!=null&&s.rows.length)&&!s.stats&&!s.errorMsg))},dependencies:[pt,mt,ut,It,Nt,At,bt,yt,xt,wt,St,Et,Dt,Pt,Tt,Mt,Rt,_t],styles:[".calif-table[_ngcontent-%COMP%]{max-height:65vh}.calif-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;z-index:2}.gest-sep[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#e9ecef;font-weight:700;text-transform:uppercase;letter-spacing:.02em}.gest-even[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#fff}.gest-odd[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#f8f9fa}.row-aprobado[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#19875424!important}.row-reprobado[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#dc354524!important}.resumen-box[_ngcontent-%COMP%]{background:#fff}.resumen-label[_ngcontent-%COMP%]{font-weight:800;letter-spacing:.02em;text-transform:uppercase;margin-right:.35rem}.resumen-value[_ngcontent-%COMP%]{font-weight:700;color:#212529}.resumen-sep[_ngcontent-%COMP%]{color:#6c757d;font-weight:600;margin:0 .4rem}.res-institucion[_ngcontent-%COMP%]{color:#0d6efd}.res-anio[_ngcontent-%COMP%]{color:#198754}.res-malla[_ngcontent-%COMP%]{color:#6f42c1}.res-nivel[_ngcontent-%COMP%]{color:#fd7e14}.res-curso[_ngcontent-%COMP%]{color:#0dcaf0}.res-docente[_ngcontent-%COMP%]{color:#6610f2}.res-docente_esp[_ngcontent-%COMP%]{color:#20c997}.res-estudiante[_ngcontent-%COMP%]{color:#d63384}.res-ci[_ngcontent-%COMP%]{color:#495057}.card-header[_ngcontent-%COMP%]{color:#000}"]});var X=k;var qi=[{path:"califhistorias",component:X}],G=class G{};G.\u0275fac=function(t){return new(t||G)},G.\u0275mod=U({type:G}),G.\u0275inj=z({imports:[nt.forChild(qi),nt]});var tt=G;var V=class V{};V.\u0275fac=function(t){return new(t||V)},V.\u0275mod=U({type:V}),V.\u0275inj=z({imports:[gt,Vt,tt]});var kt=V;export{X as a,kt as b};
