import{a as B}from"./chunk-YBOEBBAE.js";import{a as z}from"./chunk-P5G66PID.js";import"./chunk-XDAG4MPO.js";import{b as W}from"./chunk-P4K6CI26.js";import{b as $}from"./chunk-KCTZUZJH.js";import{g as P}from"./chunk-PWQJWZZZ.js";import{c as N,f as R,k as j,x as D}from"./chunk-ROSYCBC4.js";import"./chunk-JISGPZ2J.js";import{$b as k,Dc as O,Ea as a,F as y,Fc as M,Gc as V,Hb as I,Lb as s,Ma as g,Nb as p,Oc as F,Pb as w,Ra as S,Tb as L,U as A,Ub as T,Vb as E,Wa as u,ga as x,ha as b,i as h,ib as o,jb as r,kb as n,lb as d,sb as C,vb as v,xb as c}from"./chunk-SPNCLBHB.js";import"./chunk-GG76335P.js";var U=(t,i)=>({"bg-success":t,"bg-secondary":i});function Y(t,i){if(t&1){let e=C();r(0,"button",18),v("click",function(){x(e);let m=c();return b(m.getAll(!0))}),d(1,"i",19),s(2," Sincronizar mis materias "),n()}if(t&2){let e=c();o("disabled",e.loading)}}function q(t,i){t&1&&(r(0,"div",20),d(1,"app-spinner-local",21),n())}function H(t,i){t&1&&(r(0,"div",22),d(1,"i",23),r(2,"div",24),s(3,"No hay aulas disponibles para tu usuario."),n()())}function J(t,i){if(t&1&&(r(0,"div",42),s(1),n()),t&2){let e=c().$implicit;a(),w(" ",e.materia_curso," ",e.materia_paralelo," - ",e.materia_sigla," ")}}function K(t,i){if(t&1&&(r(0,"span",43),d(1,"i",44),s(2),n()),t&2){let e=c().$implicit;a(2),p("",e.materia_curso," ")}}function Q(t,i){if(t&1&&(r(0,"span",43),s(1),n()),t&2){let e=c().$implicit;a(),p(" Paralelo ",e.materia_paralelo," ")}}function X(t,i){if(t&1&&(r(0,"span",43),s(1),n()),t&2){let e=c().$implicit;a(),p(" ",e.materia_turno," ")}}function Z(t,i){if(t&1&&(r(0,"div",45),s(1),n()),t&2){let e=c().$implicit;a(),p(" ",e.descripcion," ")}}function ee(t,i){if(t&1){let e=C();r(0,"div",27)(1,"div",28),v("click",function(){let m=x(e).$implicit,_=c(2);return b(_.openAula(m))}),r(2,"div",29)(3,"div",30)(4,"div",31)(5,"div",32),s(6),n(),u(7,J,2,3,"div",33),n(),d(8,"i",34),n()(),r(9,"div",35)(10,"div",36),u(11,K,3,1,"span",37)(12,Q,2,1,"span",37)(13,X,2,1,"span",37),n(),u(14,Z,2,1,"div",38),r(15,"div",39)(16,"span",40),s(17),n(),r(18,"span",41),s(19),n()()()()()}if(t&2){let e=i.$implicit,l=i.index,m=c(2);a(2),I("background",m.getAulaColor(l)),a(4),p(" ",e.materia_nombre||e.nombre||"Aula #"+e.id," "),a(),o("ngIf",e.materia_sigla),a(4),o("ngIf",e.materia_curso),a(),o("ngIf",e.materia_paralelo),a(),o("ngIf",e.materia_turno),a(),o("ngIf",e.descripcion),a(2),o("ngClass",k(11,U,(e.estado||"").toUpperCase()==="ACTIVO",(e.estado||"").toUpperCase()!=="ACTIVO")),a(),p(" ",e.estado||"SIN ESTADO"," "),a(2),p("ID: ",e.id)}}function te(t,i){if(t&1&&(r(0,"div",25),u(1,ee,20,14,"div",26),n()),t&2){let e=c();a(),o("ngForOf",e.aulasFiltradas)}}var f=class f{constructor(i,e,l,m){this.aulasService=i;this.toast=e;this.router=l;this.auth=m;this.loading=!1;this.aulas=[];this.filterText="";this.isAdminLike=!1;this.COLORS=["#4e73df","#1cc88a","#36b9cc","#f6c23e","#e74a3b","#6f42c1","#fd7e14","#20c997","#6610f2","#17a2b8","#e83e8c","#28a745"]}ngOnInit(){this.auth.revisarSiesAdmin().subscribe({next:i=>this.isAdminLike=i,error:()=>this.isAdminLike=!1}),this.getAll()}get aulasFiltradas(){if(!this.filterText.trim())return this.aulas;let i=this.filterText.toLowerCase();return this.aulas.filter(e=>(e.nombre||"").toLowerCase().includes(i)||(e.materia_nombre||"").toLowerCase().includes(i)||(e.materia_sigla||"").toLowerCase().includes(i)||(e.descripcion||"").toLowerCase().includes(i))}getAll(i=!1){this.loading=!0,this.aulasService.getAll({auto_create:i}).pipe(A(e=>{this.loading=!1,this.aulas=e}),y(e=>(this.loading=!1,this.toast.error(e.message),h))).subscribe()}openAula(i){this.router.navigate(["/lchaula/aula",i.id])}getAulaColor(i){return this.COLORS[i%this.COLORS.length]}};f.\u0275fac=function(e){return new(e||f)(g(z),g(W),g(P),g($))},f.\u0275cmp=S({type:f,selectors:[["app-lchaula-aulas-list"]],decls:21,vars:6,consts:[[1,"container","mt-4"],[1,"row"],[1,"col","text-center"],[1,"display-4","fw-bold","titulosGlobales"],[1,"lead","text-secondary","subtitulosGlobales"],[1,"row","mb-3"],[1,"col-sm-6","d-flex","align-items-center","gap-2"],[1,"btn","btn-sm","btn-outline-secondary",3,"click","disabled"],[1,"bi","bi-arrow-clockwise","me-1"],["class","btn btn-sm btn-primary","title","Crea autom\xE1ticamente aulas faltantes para tus materias",3,"disabled","click",4,"ngIf"],[1,"col-sm-3","ms-auto"],[1,"input-group","input-group-sm"],[1,"input-group-text"],[1,"bi","bi-search"],["type","text","placeholder","Buscar aula\u2026",1,"form-control",3,"ngModelChange","ngModel"],["class","py-4 text-black",4,"ngIf"],["class","text-center py-5",4,"ngIf"],["class","row g-3",4,"ngIf"],["title","Crea autom\xE1ticamente aulas faltantes para tus materias",1,"btn","btn-sm","btn-primary",3,"click","disabled"],[1,"bi","bi-plus-circle","me-1"],[1,"py-4","text-black"],["textShow","Cargando aulas..."],[1,"text-center","py-5"],[1,"bi","bi-easel","display-1","text-muted","opacity-50"],[1,"text-muted","mt-3"],[1,"row","g-3"],["class","col-12 col-md-6 col-xl-4",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-xl-4"],["role","button",1,"card","h-100","shadow-sm","aula-card","border-0",3,"click"],[1,"card-header","text-white","border-0","py-3","px-3"],[1,"d-flex","align-items-start","justify-content-between"],[1,"flex-grow-1","overflow-hidden"],[1,"fw-bold","text-truncate",2,"font-size","1.05rem"],["class","small opacity-75 text-truncate",4,"ngIf"],[1,"bi","bi-arrow-right-circle","fs-4","opacity-75","ms-2","flex-shrink-0"],[1,"card-body","d-flex","flex-column","gap-2"],[1,"d-flex","flex-wrap","gap-2"],["class","badge bg-light text-dark border",4,"ngIf"],["class","small text-muted mt-1 text-truncate",4,"ngIf"],[1,"mt-auto","d-flex","align-items-center","justify-content-between","pt-2"],[1,"badge",3,"ngClass"],[1,"text-muted","small"],[1,"small","opacity-75","text-truncate"],[1,"badge","bg-light","text-dark","border"],[1,"bi","bi-mortarboard","me-1"],[1,"small","text-muted","mt-1","text-truncate"]],template:function(e,l){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),s(4,"LChaula"),n(),r(5,"p",4),s(6,"Tu espacio de clases virtuales \u2014 anuncios, materiales y tareas"),n()()()(),r(7,"div",5)(8,"div",6)(9,"button",7),v("click",function(){return l.getAll(!1)}),d(10,"i",8),s(11," Recargar "),n(),u(12,Y,3,1,"button",9),n(),r(13,"div",10)(14,"div",11)(15,"span",12),d(16,"i",13),n(),r(17,"input",14),E("ngModelChange",function(_){return T(l.filterText,_)||(l.filterText=_),_}),n()()()(),u(18,q,2,0,"div",15)(19,H,4,0,"div",16)(20,te,2,1,"div",17)),e&2&&(a(9),o("disabled",l.loading),a(3),o("ngIf",l.isAdminLike),a(5),L("ngModel",l.filterText),a(),o("ngIf",l.loading),a(),o("ngIf",!l.loading&&l.aulasFiltradas.length===0),a(),o("ngIf",!l.loading&&l.aulasFiltradas.length>0))},dependencies:[F,O,M,V,D,N,R,j,B],styles:["[_nghost-%COMP%]{display:block}.aula-card[_ngcontent-%COMP%]{transition:transform .18s ease,box-shadow .18s ease;cursor:pointer}.aula-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 .5rem 1.5rem #00000026!important}.aula-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{border-radius:.375rem .375rem 0 0}"]});var G=f;export{G as AulasListComponent};
